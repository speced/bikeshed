<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>N2218: Signed Integers are Two’s Complement</title>
<style data-fill-with="stylesheet">
  </style>
<style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      vertical-align: top;
    }
    th, td {
      border-left: none;
      border-right: none;
      padding: 0px 10px;
    }
    th {
      text-align: center;
    }
  </style>
  <link href="https://isocpp.org/favicon.ico" rel="icon">
  <meta content="dark light" name="color-scheme">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">N2218<br>Signed Integers are Two’s Complement</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">New Proposal, <time class="dt-updated" datetime="1970-01-01">1970-01-01</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt class="editor">Author:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:jfbastien@apple.com">JF Bastien</a> (<span class="p-org org">Apple</span>)
     <dt>Project:
     <dd>ISO/IEC 9899 Programming Languages — C, ISO/IEC JTC1/SC22/WG14
     <dt>Source:
     <dd><a href="https://github.com/jfbastien/papers/blob/master/source/N2218.bs">github.com/jfbastien/papers/blob/master/source/N2218.bs</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span><a class="self-link" href="#abstract"></a></h2>
   <p>There is One True Representation for signed integers, and that representation is two’s complement.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref heading settled" id="contents"><span class="content">Table of Contents</span></h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#details"><span class="secno">2</span> <span class="content">Details</span></a>
    <li><a href="#c-sign"><span class="secno">3</span> <span class="content">C Signed Integer Wording</span></a>
    <li><a href="#survey"><span class="secno">4</span> <span class="content">Survey of Signed Integer Representations</span></a>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p><a data-link-type="biblio" href="#biblio-c11" title="Programming Languages — C">[C11]</a> Integer types allows three representations for signed integral types:</p>
   <ul>
    <li data-md>
     <p>Signed magnitude</p>
    <li data-md>
     <p>Ones' complement</p>
    <li data-md>
     <p>Two’s complement</p>
   </ul>
   <p>See <a href="#c-sign">§ 3 C Signed Integer Wording</a> for full wording.</p>
   <p>C++17 goes further than C and only requires that "the representations of
integral types shall define values by use of a pure binary numeration
system". To the author’s knowledge no modern machine uses both C++ and a signed
integer representation other than two’s complement (see <a href="#survey">§ 4 Survey of Signed Integer Representations</a>). None of <a data-link-type="biblio" href="#biblio-msvc" title="MSVC C Implementation-Defined Behavior: Integers">[MSVC]</a>, <a data-link-type="biblio" href="#biblio-gcc" title="GCC C Implementation-Defined Behavior: Integers">[GCC]</a>, and <a data-link-type="biblio" href="#biblio-llvm" title="LLVM Language Reference Manual">[LLVM]</a> support other representations. This means that
the C++ that is taught is effectively two’s complement, and the C++ that is
written is two’s complement. It is extremely unlikely that there exist any
significant codebase developed for two’s complement machines that would actually
work when run on a non-two’s complement machine.</p>
   <p>C and C++ as specified, however, are not two’s complement. Signed integers
currently allow the existence of an extraordinary value which traps, extra
padding bits, integral negative zero, and introduce undefined behavior and
implementation-defined behavior for the sake of this <em>extremely</em> abstract
machine.</p>
   <p><a data-link-type="biblio" href="#biblio-p0907r1" title="Signed integers are two&apos;s complement">[P0907r1]</a> stands to change C++20 and make two’s complement the only signed
integer representation that is supported. WG21 wants to hear from WG14 before
making this change, and hopes that WG14 will be interested in making the same
changes. Aaron Ballman has volunteered to present this paper at the WG14 Brno
meeting, as well as with the C Safety and Security study group.</p>
   <p>Based on guidance received from this paper, The author is happy to write a
follow-up proposal with wording for WG14. The author will communicate WG14’s
feedback to WG21 at the Rappersvil meeting in June 2018.</p>
   <h2 class="heading settled" data-level="2" id="details"><span class="secno">2. </span><span class="content">Details</span><a class="self-link" href="#details"></a></h2>
   <p>The following is proposed to C++:</p>
   <ul>
    <li data-md>
     <p><em>Status-quo</em> Signed integer arithmetic remains non-commutative in general
(though some implementations may guarantee that it is).</p>
    <li data-md>
     <p><em>Change</em> <code class="highlight"><c- b>bool</c-></code> is represented as <code class="highlight"><c- mi>0</c-></code> for <code class="highlight">false</code> and <code class="highlight"><c- mi>1</c-></code> for <code class="highlight">true</code>. All
other representations are undefined.</p>
    <li data-md>
     <p><em>Change</em> <code class="highlight"><c- b>bool</c-></code> only has value bits, no padding bits.</p>
    <li data-md>
     <p><em>Change</em> Signed integers are two’s complement.</p>
    <li data-md>
     <p><em>Change</em> If there are <em>M</em> value bits in the signed type and <em>N</em> in the
unsigned type, then <em>M = N-1</em> (whereas C says <em>M ≤ N</em>).</p>
    <li data-md>
     <p><em>Status-quo</em> If a signed operation would naturally produce a value that is
not within the range of the result type, the behavior is undefined.</p>
    <li data-md>
     <p><em>Change</em> None of the integral types have extraordinary values.</p>
    <li data-md>
     <p><em>Change</em> C11 note 53 has wording aroung trap representations within padding
bits, e.g. for parity bits. C++ has no such wording.</p>
    <li data-md>
     <p><em>Change</em> Conversion from signed to unsigned is always well-defined: the
result is the unique value of the destination type that is congruent to the
source integer modulo 2<sup>N</sup>.</p>
    <li data-md>
     <p><em>Change</em> Conversion from enumeration type to integral is the same as that of
converting from the enumeration’s underlying type and then to the
destination type, even if the original value cannot be represented by the
specified type.</p>
    <li data-md>
     <p><em>Status-quo</em> Conversion from integral type to enumeration is unchanged: if
the original value is not within the range of the enumeration values the
behavior is undefined.</p>
    <li data-md>
     <p><em>Change</em> Left-shift on signed integer types produces the same results as
left-shift on the corresponding unsigned integer type.</p>
    <li data-md>
     <p><em>Change</em> Right-shift is an arithmetic right shift which performs
sign-extension.</p>
    <li data-md>
     <p><em>Status-quo</em> shift by larger-than or equal-to bit-width remains undefined.</p>
    <li data-md>
     <p><em>Status-quo</em> <code class="highlight"><c- n>constexpr</c-></code> evaluation of signed integer arithmetic with
undefined result is not a <em>core constant expression</em>.</p>
    <li data-md>
     <p><em>Change</em> the range of enumerations without a fixed underlying type is
simplified because of two’s complement.</p>
    <li data-md>
     <p><em>Status-quo</em> <code class="highlight"><c- n>is_modulo</c-></code> type trait remains <code class="highlight">false</code> for signed integer types
unless an implementation chooses to defined overflow as wrap.</p>
    <li data-md>
     <p><code class="highlight"><c- n>has_unique_object_representations</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-></code> is <code class="highlight">true</code> for <code class="highlight"><c- b>bool</c-></code> and signed
integer types, in addition to unsigned integer types and others before.</p>
    <li data-md>
     <p><em>Status-quo</em> atomic operations on signed integer types continues not to have
undefined behavior, and is still specified to wrap as two’s complement (the
definition is clarified to act as-if casting to unsigned and back).</p>
    <li data-md>
     <p><em>Change</em> address <a data-link-type="biblio" href="#biblio-lwg3047" title="atomic compound assignment operators can cause undefined behavior when corresponding fetch_meow members don&apos;t">[LWG3047]</a> to remove undefined behavior in pre-increment
atomic operations.</p>
   </ul>
   <h2 class="heading settled" data-level="3" id="c-sign"><span class="secno">3. </span><span class="content">C Signed Integer Wording</span><a class="self-link" href="#c-sign"></a></h2>
   <p>The following is the wording on integers from the C11 Standard.</p>
   <blockquote>
    <p>For unsigned integer types other than unsigned char, the bits of the object
  representation shall be divided into two groups: value bits and padding bits
  (there need not be any of the latter). If there are <em>N</em> value bits, each bit
  shall represent a different power of 2 between 1 and 2<sup>N−1</sup>, so that
  objects of that type shall be capable of representing values from 0 to
  2<sup>N</sup> − 1 using a pure binary representation; this shall be known as
  the value representation. The values of any padding bits are unspecified.</p>
    <p>For signed integer types, the bits of the object representation shall be
  divided into three groups: value bits, padding bits, and the sign bit. There
  need not be any padding bits; <code class="highlight"><c- b>signed</c-> <c- b>char</c-></code> shall not have any padding bits.
  There shall be exactly one sign bit. Each bit that is a value bit shall have
  the same value as the same bit in the object representation of the
  corresponding unsigned type (if there are <em>M</em> value bits in the signed type
  and <em>N</em> in the unsigned type, then M ≤ N). If the sign bit is zero, it shall
  not affect the resulting value. If the sign bit is one, the value shall be
  modified in one of the following ways:</p>
    <ul>
     <li data-md>
      <p>the corresponding value with sign bit 0 is negated (<em>sign and magnitude</em>);</p>
     <li data-md>
      <p>the sign bit has the value −(2<sup>M</sup>) (<em>two’s complement</em>);</p>
     <li data-md>
      <p>the sign bit has the value −(2<sup>M</sup> − 1) (<em>ones’ complement</em>).</p>
    </ul>
    <p>Which of these applies is implementation-defined, as is whether the value with
  sign bit 1 and all value bits zero (for the first two), or with sign bit and
  all value bits 1 (for ones’ complement), is a trap representation or a normal
  value. In the case of sign and magnitude and ones’ complement, if this
  representation is a normal value it is called a <em>negative zero</em>.</p>
    <p>If the implementation supports negative zeros, they shall be generated only
  by:</p>
    <ul>
     <li data-md>
      <p>the <code class="highlight"><c- o>&amp;</c-></code>, <code class="highlight"><c- o>|</c-></code>, <code class="highlight"><c- o>^</c-></code>, <code class="highlight"><c- o>~</c-></code>, <code class="highlight"><c- o>&lt;&lt;</c-></code>, and <code class="highlight"><c- o>>></c-></code> operators with operands that produce such a value;</p>
     <li data-md>
      <p>the <code class="highlight"><c- o>+</c-></code>, <code class="highlight"><c- o>-</c-></code>, <code class="highlight"><c- o>*</c-></code>, <code class="highlight"><c- o>/</c-></code>, and <code class="highlight"><c- o>%</c-></code> operators where one operand is a negative zero and the result is zero;</p>
     <li data-md>
      <p>compound assignment operators based on the above cases.</p>
    </ul>
    <p>It is unspecified whether these cases actually generate a negative zero or a
  normal zero, and whether a negative zero becomes a normal zero when stored in
  an object.</p>
    <p>If the implementation does not support negative zeros, the behavior of the <code class="highlight"><c- o>&amp;</c-></code>, <code class="highlight"><c- o>|</c-></code>, <code class="highlight"><c- o>^</c-></code>, <code class="highlight"><c- o>~</c-></code>, <code class="highlight"><c- o>&lt;&lt;</c-></code>, and <code class="highlight"><c- o>>></c-></code> operators with operands that would produce
  such a value is undefined.</p>
    <p>The values of any padding bits are unspecified. A valid (non-trap) object
  representation of a signed integer type where the sign bit is zero is a valid
  object representation of the corresponding unsigned type, and shall represent
  the same value. For any integer type, the object representation where all the
  bits are zero shall be a representation of the value zero in that type.</p>
    <p>The <em>precision</em> of an integer type is the number of bits it uses to represent
  values, excluding any sign and padding bits. The <em>width</em> of an integer type is
  the same but including any sign bit; thus for unsigned integer types the two
  values are the same, while for signed integer types the width is one greater
  than the precision.</p>
   </blockquote>
   <h2 class="heading settled" data-level="4" id="survey"><span class="secno">4. </span><span class="content">Survey of Signed Integer Representations</span><a class="self-link" href="#survey"></a></h2>
   <p>Here is a non-comprehensive history of signed integer representations:</p>
   <ul>
    <li data-md>
     <p>Two’s complement</p>
     <ul>
      <li data-md>
       <p>John von Neumann suggested use of two’s complement binary representation in his 1945 First Draft of a Report on the EDVAC proposal for an electronic stored-program digital computer.</p>
      <li data-md>
       <p>The 1949 EDSAC, which was inspired by the First Draft, used two’s complement representation of binary numbers.</p>
      <li data-md>
       <p>Early commercial two’s complement computers include the Digital Equipment Corporation PDP-5 and the 1963 PDP-6.</p>
      <li data-md>
       <p>The System/360, introduced in 1964 by IBM, then the dominant player in the computer industry, made two’s complement the most widely used binary representation in the computer industry.</p>
      <li data-md>
       <p>The first minicomputer, the PDP-8 introduced in 1965, uses two’s complement arithmetic as do the 1969 Data General Nova, the 1970 PDP-11.</p>
     </ul>
    <li data-md>
     <p>Ones' complement</p>
     <ul>
      <li data-md>
       <p>Many early computers, including the CDC 6600, the LINC, the PDP-1, and the UNIVAC 1107.</p>
      <li data-md>
       <p>Successors of the CDC 6600 continued to use ones' complement until the late 1980s.</p>
      <li data-md>
       <p>Descendants of the UNIVAC 1107, the UNIVAC 1100/2200 series, continue to do so, although ClearPath machines are a common platform that implement either the 1100/2200 architecture (the ClearPath IX series) or the Burroughs large systems architecture (the ClearPath NX series). Everything is common except the actual CPUs, which are implemented as ASICs. In addition to the IX (1100/2200) CPUs and the NX (Burroughs large systems) CPU, the architecture had Xeon (and briefly Itanium) CPUs. Unisys' goal was to provide an orderly transition for their 1100/2200 customers to a more modern architecture.</p>
     </ul>
    <li data-md>
     <p>Signed magnitude</p>
     <ul>
      <li data-md>
       <p>The IBM 700/7000 series scientific machines use sign/magnitude notation, except for the index registers which are two’s complement.</p>
     </ul>
   </ul>
   <p><a href="https://en.wikipedia.org/wiki/Two%27s_complement">Wikipedia</a> offers
more details and has comprehensive sources for the above.</p>
   <p>Thomas Rodgers surveyed popular DSPs and found the following:</p>
   <ul>
    <li data-md>
     <p>SHARC family ships <a href="http://www.analog.com/media/en/dsp-documentation/software-manuals/cces-SharcCompiler-manual.pdf">a C++ compiler</a> which supports C++11, and where signed integers are two’s complement.</p>
    <li data-md>
     <p>Freescale/NXP ships <a href="https://www.nxp.com/docs/en/reference-manual/SC_COMPILER_USERS_GUIDE.pdf">a C++ compiler</a> which supports C++03, and where signed integers are two’s complement
(<a href="https://www.nxp.com/docs/en/reference-manual/MNSC140CORE.pdf">reference</a>).</p>
    <li data-md>
     <p>Texas Instruments ships <a href="http://www.ti.com/lit/ug/slau132r/slau132r.pdf">a C++ compiler</a> which
supports C++14, and where signed integers are two’s complement.</p>
    <li data-md>
     <p>CML Microcircuits has fixed ASIC for radio processing, and doesn’t seem to
support C++.</p>
    <li data-md>
     <p><a href="https://www.cirrus.com/products/cs4970xx/">Cirrus Logic</a> (formerly Wolfson)
has <a href="https://d3uzseaevmutz1.cloudfront.net/pubs/manual/cirrus_c_compiler_um15.pdf">a C compiler only</a> which is probably two’s complement.</p>
    <li data-md>
     <p>Synaptics (formerly Connexant) makes audio input subsystem for voice
assistants. The DSP runs fixed far-field signal processing algorithms and
has programmable functions which run on standard ARM controller, using
Raspbian.</p>
   </ul>
   <p>In short, the only machine the author could find using non-two’s complement are
made by Unisys, and no counter-example was brought by any member of the C++
standards committee. Nowadays Unisys emulates their old architecture using x86
CPUs with attached FPGAs for customers who have legacy applications which
they’ve been unable to migrate. These applications are unlikely to be well
served by modern C++, signed integers are the least of their
problem. Post-modern C++ should focus on serving its existing users well, and
incoming users should be blissfully unaware of integer esoterica.</p>
  </main>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don't scroll to compensate for the ToC if we're above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don't know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn't exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn't standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don't have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we're at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can't find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-c11">[C11]
   <dd><a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf"><cite>Programming Languages — C</cite></a>. URL: <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf">http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf</a>
   <dt id="biblio-gcc">[GCC]
   <dd><a href="https://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html"><cite>GCC C Implementation-Defined Behavior: Integers</cite></a>. URL: <a href="https://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html">https://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html</a>
   <dt id="biblio-llvm">[LLVM]
   <dd><a href="https://llvm.org/docs/LangRef.html"><cite>LLVM Language Reference Manual</cite></a>. URL: <a href="https://llvm.org/docs/LangRef.html">https://llvm.org/docs/LangRef.html</a>
   <dt id="biblio-lwg3047">[LWG3047]
   <dd>Tim Song. <a href="https://wg21.link/lwg3047"><cite>atomic compound assignment operators can cause undefined behavior when corresponding fetch_meow members don't</cite></a>. New. URL: <a href="https://wg21.link/lwg3047">https://wg21.link/lwg3047</a>
   <dt id="biblio-msvc">[MSVC]
   <dd><a href="https://docs.microsoft.com/en-us/cpp/c-language/integers"><cite>MSVC C Implementation-Defined Behavior: Integers</cite></a>. URL: <a href="https://docs.microsoft.com/en-us/cpp/c-language/integers">https://docs.microsoft.com/en-us/cpp/c-language/integers</a>
   <dt id="biblio-p0907r1">[P0907r1]
   <dd>JF Bastien. <a href="https://wg21.link/P0907r1"><cite>Signed integers are two's complement</cite></a>. URL: <a href="https://wg21.link/P0907r1">https://wg21.link/P0907r1</a>
  </dl>