<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Media Session Standard</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/TR/mediasession/" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
  /* https://github.com/tabatkins/bikeshed/issues/485 */
  .example .self-link { display: none; }
</style>
<style>
table {
  border-collapse: collapse;
  border-left-style: hidden;
  border-right-style: hidden;
  text-align: left;
}
table caption {
  font-weight: bold;
  padding: 3px;
  text-align: left;
}
table td, table th {
  border: 1px solid black;
  padding: 3px;
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Media Session Standard</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/mediasession/">https://w3c.github.io/mediasession/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/mediasession/">https://www.w3.org/TR/mediasession/</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="45389"><a class="p-name fn u-email email" href="mailto:mlamouri@google.com">Mounir Lamouri</a> (<span class="p-org org">Google Inc.</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="103353"><a class="p-name fn u-email email" href="mailto:beccahughes@google.com">Becca Hughes</a> (<span class="p-org org">Google Inc.</span>)
      <dt class="editor">Former Editors:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:zqzhang@google.com">Zhiqiang Zhang</a> (<span class="p-org org">Google Inc.</span>)
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:richt@opera.com">Rich Tibbett</a> (<span class="p-org org">Opera</span>)
      <dt>Participate:
      <dd><a href="https://github.com/w3c/mediasession/">We are on GitHub</a>
      <dd><a href="https://github.com/w3c/mediasession/issues/new">File an issue</a>
      <dd><a href="https://github.com/w3c/mediasession/issues?state=open">Open issues</a>
      <dt>Version History:
      <dd><a href="https://github.com/w3c/mediasession/commits">https://github.com/w3c/mediasession/commits</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This specification enables web developers to show customized media
metadata on platform UI, customize available platform media
controls, and access platform media keys such as hardware keys found
on keyboards, headsets, remote controls, and software keys found in
notification areas and on lock screens of mobile devices.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em> </p>
   <p> Feedback and comments on this specification are welcome. <a href="https://github.com/w3c/mediasession/issues">GitHub Issues</a> are preferred for discussion on this specification. Alternatively, you can send comments to the Media Working Group’s mailing-list, <a href="mailto:public-media-wg@w3.org">public-media-wg@w3.org</a> (<a href="https://lists.w3.org/Archives/Public/public-media-wg/">archives</a>).
  This draft highlights some of the pending issues that are still to be discussed in the working group.
  No decision has been taken on the outcome of these issues including whether they are valid. </p>
   <p> This document was published by the <a href="https://www.w3.org/groups/wg/media">Media Working Group</a> as an Editor’s Draft.
  This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation. </p>
   <p> Publication as an Editor’s Draft does not imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
   <p> This document was produced by a group operating under the <a class="css" data-link-type="property" href="https://www.w3.org/policies/patent-policy/" id="sotd_patent">W3C Patent Policy</a>. <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="https://www.w3.org/groups/wg/media/ipr" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#conformance"><span class="secno">2</span> <span class="content">Conformance</span></a>
    <li><a href="#dependencies"><span class="secno">3</span> <span class="content">Dependencies</span></a>
    <li>
     <a href="#security-privacy-considerations"><span class="secno">4</span> <span class="content">Security and Privacy
  Considerations</span></a>
     <ol class="toc">
      <li><a href="#user-interface-guidelines"><span class="secno">4.1</span> <span class="content">User interface guidelines</span></a>
      <li><a href="#incognito-mode-privacy"><span class="secno">4.2</span> <span class="content">Incognito mode</span></a>
      <li><a href="#media-session-actions-privacy"><span class="secno">4.3</span> <span class="content">Media Session Actions</span></a>
     </ol>
    <li>
     <a href="#model"><span class="secno">5</span> <span class="content">Model</span></a>
     <ol class="toc">
      <li><a href="#playback-state-model"><span class="secno">5.1</span> <span class="content">Playback State</span></a>
      <li><a href="#media-session-routing"><span class="secno">5.2</span> <span class="content">Routing</span></a>
      <li><a href="#metadata"><span class="secno">5.3</span> <span class="content">Metadata</span></a>
      <li><a href="#actions-model"><span class="secno">5.4</span> <span class="content">Actions</span></a>
      <li><a href="#position-state"><span class="secno">5.5</span> <span class="content">Position State</span></a>
     </ol>
    <li><a href="#the-mediasession-interface"><span class="secno">6</span> <span class="content">The <code class="idl"><span>MediaSession</span></code> interface</span></a>
    <li><a href="#the-mediametadata-interface"><span class="secno">7</span> <span class="content">The <code class="idl"><span>MediaMetadata</span></code> interface</span></a>
    <li><a href="#the-mediaimage-dictionary"><span class="secno">8</span> <span class="content">The <code class="idl"><span>MediaImage</span></code> dictionary</span></a>
    <li><a href="#the-mediapositionstate-dictionary"><span class="secno">9</span> <span class="content">The <code class="idl"><span>MediaPositionState</span></code> dictionary</span></a>
    <li><a href="#the-mediasessionactiondetails-dictionary"><span class="secno">10</span> <span class="content">The <code class="idl"><span>MediaSessionActionDetails</span></code> dictionary</span></a>
    <li><a href="#examples"><span class="secno">11</span> <span class="content">Examples</span></a>
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">Acknowledgments</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>Media is used extensively today, and the Web is one of the primary means of
consuming media content. Many platforms can display media metadata, such as
title, artist, album and album art on various UI elements such as notification,
media control center, device lockscreen and wearable devices. This specification
aims to enable web pages to specify the media metadata to be displayed in
platform UI, and respond to media controls which may come from platform UI or
media keys, thereby improving the user experience.</p>
   <h2 class="heading settled" data-level="2" id="conformance"><span class="secno">2. </span><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p>All diagrams, examples, and notes in this specification are non-normative, as
are all sections explicitly marked non-normative. Everything else in this
specification is normative.</p>
   <p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in RFC 2119. For readability, these
words do not appear in all uppercase letters in this specification. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
   <p>Requirements phrased in the imperative as part of algorithms (such as "strip any
leading space characters" or "return false and terminate these steps") are to be
interpreted with the meaning of the key word ("must", "should", "may", etc) used
in introducing the algorithm.</p>
   <p>Conformance requirements phrased as algorithms or specific steps may be
implemented in any manner, so long as the end result is equivalent. (In
particular, the algorithms defined in this specification are intended to be easy
to follow, and not intended to be performant.)</p>
   <p>User agents may impose implementation-specific limits on otherwise unconstrained
inputs, e.g. to prevent denial of service attacks, to guard against running out
of memory, or to work around platform-specific limitations.</p>
   <p>When a method or an attribute is said to call another method or attribute, the
user agent must invoke its internal API for that attribute or method so that
e.g. the author can’t change the behavior by overriding attributes or methods
with custom properties or functions in JavaScript.</p>
   <p>Unless otherwise stated, string comparisons are done in a <a data-link-type="dfn" href="https://w3c.github.io/i18n-glossary/#dfn-case-sensitive" id="ref-for-dfn-case-sensitive">case-sensitive</a> manner.</p>
   <h2 class="heading settled" data-level="3" id="dependencies"><span class="secno">3. </span><span class="content">Dependencies</span><a class="self-link" href="#dependencies"></a></h2>
   <p>The IDL fragments in this specification must be interpreted as required for
conforming IDL fragments, as described in the Web IDL specification. <a data-link-type="biblio" href="#biblio-webidl" title="Web IDL Standard">[WEBIDL]</a></p>
   <section>
    <h2 class="heading settled" data-level="4" id="security-privacy-considerations"><span class="secno">4. </span><span class="content">Security and Privacy
  Considerations</span><a class="self-link" href="#security-privacy-considerations"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p> The API introduced in this specification has very low impact with regards to
    security and privacy. Part of the API allows a website to expose metadata
    that can be used by the user agent. The user agent obviously needs to use
    this data with care. Another part of the API allows a website to receive
    commands from the user via buttons or other form of controls which might
    sometimes introduce a new input layer between the user and the website. </p>
    <section>
     <h3 class="heading settled" data-level="4.1" id="user-interface-guidelines"><span class="secno">4.1. </span><span class="content">User interface guidelines</span><a class="self-link" href="#user-interface-guidelines"></a></h3>
     <p> The <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata">MediaMetadata</a></code> introduced in this specification allows a website to
      offer more information with regards to what is being played. The user
      agent is meant to use this information in any UI related to media
      playback, either internal to the user agent or within the platform. </p>
     <p> The <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①">MediaMetadata</a></code> are expected to be used in the context of media
      playback, making spoofing harder but because the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②">MediaMetadata</a></code> has
      text fields and image fields, a malicious website could try to spoof
      another website’s identity. It is recommended that the user agent offers a
      way to find the origin or clearly expose the origin of the website which
      the metadata are coming from. </p>
     <p> If a user agent offers a mechanism to go back to a website from a UI
      element created based on the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata③">MediaMetadata</a></code>, it is recommended that the
      action should not be noticeable by the website, thus reducing the chances
      of spoofing. </p>
     <p> In general, all security and privacy considerations related to the display
      of notifications from a website should apply here. It is worth noting that
      the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata④">MediaMetadata</a></code> offer less customization than regular web
      notifications, thus would be harder to spoof. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.2" id="incognito-mode-privacy"><span class="secno">4.2. </span><span class="content">Incognito mode</span><a class="self-link" href="#incognito-mode-privacy"></a></h3>
     <p> For privacy purposes, when in incognito mode, the user agent should be
      careful when sharing the information from <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata⑤">MediaMetadata</a></code> with the
      system and make sure they will not be used in a way that would harm the
      user. Displaying this information in a way that is very visible would be
      against the user’s intent of browsing in incognito mode. When available,
      the UI elements should be advertized as private to the platform. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.3" id="media-session-actions-privacy"><span class="secno">4.3. </span><span class="content">Media Session Actions</span><a class="self-link" href="#media-session-actions-privacy"></a></h3>
     <p> <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action">Media session actions</a> expose a new input layer to the web platform.
      User agents should make sure users are aware that their actions might be
      routed to the website with the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session">active media session</a>. Especially,
      when the actions are coming from remote devices such as a headset or other
      remote device. It is recommended for the user agent to follow the platform
      conventions when listening to these inputs in order to facilitate the user
      understanding. </p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="model"><span class="secno">5. </span><span class="content">Model</span><a class="self-link" href="#model"></a></h2>
    <section>
     <h3 class="heading settled" data-level="5.1" id="playback-state-model"><span class="secno">5.1. </span><span class="content">Playback State</span><a class="self-link" href="#playback-state-model"></a></h3>
     <p> In order to make <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-play" id="ref-for-dom-mediasessionaction-play">play</a> and <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause" id="ref-for-dom-mediasessionaction-pause">pause</a> actions work properly,
      the user agent SHOULD be able to determine if a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context">browsing context</a> of
      the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①">active media session</a> is playing media or not, which is called
      the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="guessed-playback-state">guessed playback state</dfn>. The RECOMMENDED way for determining
      the <a data-link-type="dfn" href="#guessed-playback-state" id="ref-for-guessed-playback-state">guessed playback state</a> is to monitor the media elements whose
      node document’s browsing context is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①">browsing context</a>. The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context②">browsing context</a>’s <a data-link-type="dfn" href="#guessed-playback-state" id="ref-for-guessed-playback-state①">guessed playback state</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-playing" id="ref-for-dom-mediasessionplaybackstate-playing">playing</a> if any of them is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#potentially-playing" id="ref-for-potentially-playing">potentially playing</a> and not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#concept-media-muted" id="ref-for-concept-media-muted">muted</a>, and is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-paused" id="ref-for-dom-mediasessionplaybackstate-paused">paused</a> otherwise. Other information
      SHOULD also be considered, such as WebAudio and plugins. </p>
     <p> The <a class="idl-code" data-link-type="attribute" href="#dom-mediasession-playbackstate" id="ref-for-dom-mediasession-playbackstate">playbackState</a> attribute specifies
      the <a data-link-type="dfn" href="#declared-playback-state" id="ref-for-declared-playback-state">declared playback state</a> from the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context③">browsing context</a>. The
      state is combined with the <a data-link-type="dfn" href="#guessed-playback-state" id="ref-for-guessed-playback-state②">guessed playback state</a> to compute the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="actual-playback-state">actual playback state</dfn>, which is a finalized state and will be
      used for <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-play" id="ref-for-dom-mediasessionaction-play①">play</a> and <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause" id="ref-for-dom-mediasessionaction-pause①">pause</a> actions. </p>
     <p> The <a data-link-type="dfn" href="#actual-playback-state" id="ref-for-actual-playback-state">actual playback state</a> is computed in the following way: </p>
     <ul>
      <li> If the <a data-link-type="dfn" href="#declared-playback-state" id="ref-for-declared-playback-state①">declared playback state</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-playing" id="ref-for-dom-mediasessionplaybackstate-playing①">playing</a>, return <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-playing" id="ref-for-dom-mediasessionplaybackstate-playing②">playing</a>. 
      <li> Otherwise, return the <a data-link-type="dfn" href="#guessed-playback-state" id="ref-for-guessed-playback-state③">guessed playback state</a>. 
     </ul>
     <p></p>
     <p class="note" role="note"> The <code class="idl"><a data-link-type="idl" href="#dom-mediasession-playbackstate" id="ref-for-dom-mediasession-playbackstate①">playbackState</a></code> attribute could be useful when the page
      wants to do some preparation steps when the media is paused but it allows
      the preparation steps to be interrupted by <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause" id="ref-for-dom-mediasessionaction-pause②">pause</a> action. See <a href="#example-set-playbackState">Setting playbackState</a> for example. </p>
     <p> When the <a data-link-type="dfn" href="#actual-playback-state" id="ref-for-actual-playback-state①">actual playback state</a> of the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session②">active media session</a> changes, the user agent MUST run the <a data-link-type="dfn" href="#media-session-actions-update-algorithm" id="ref-for-media-session-actions-update-algorithm">media session actions update
      algorithm</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.2" id="media-session-routing"><span class="secno">5.2. </span><span class="content">Routing</span><a class="self-link" href="#media-session-routing"></a></h3>
     <p>There could be multiple <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession">MediaSession</a></code> objects existing at the same time
    since the user agent could have multiple tabs, each tab could contain a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context">top-level browsing context</a> and multiple <a data-link-type="dfn">nested browsing
    contexts</a>, and each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context④">browsing context</a> could have a <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①">MediaSession</a></code> object.</p>
     <p>The user agent MUST select at most one of the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession②">MediaSession</a></code> objects to
    present to the user, which is called the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="active-media-session">active media session</dfn>.
    The <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session③">active media session</a> may be null. The selection is up to the user
    agent and SHOULD be based on preferred user experience. Note that the <code class="idl"><a data-link-type="idl" href="#dom-mediasession-playbackstate" id="ref-for-dom-mediasession-playbackstate②">playbackState</a></code> attribute MUST not affect media session
    routing. It only takes effect for the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session④">active media session</a>.</p>
     <p>It is RECOMMENDED that the user agent selects the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session⑤">active media
    session</a> by managing <a data-link-type="dfn" href="#audio-focus" id="ref-for-audio-focus">audio focus</a>. A tab or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context⑤">browsing context</a> is said to have <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="audio-focus">audio focus</dfn> if it is currently playing audio or
    the user expects to control the media in it. The AudioFocus API targets this
    area and could be used once it’s finished.</p>
     <p>Whenever the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session⑥">active media session</a> is changed, the user agent MUST run
    the <a data-link-type="dfn" href="#media-session-actions-update-algorithm" id="ref-for-media-session-actions-update-algorithm①">media session actions update algorithm</a> and the <a data-link-type="dfn" href="#update-metadata-algorithm" id="ref-for-update-metadata-algorithm">update metadata
    algorithm</a>.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.3" id="metadata"><span class="secno">5.3. </span><span class="content">Metadata</span><a class="self-link" href="#metadata"></a></h3>
     <p>The media metadata for the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session⑦">active media session</a> MAY be displayed in
    the platform UI depending on platform conventions. Whenever the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session⑧">active
    media session</a> changes or setting <a class="idl-code" data-link-type="attribute" href="#dom-mediasession-metadata" id="ref-for-dom-mediasession-metadata"><code>metadata</code></a> of the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session⑨">active media
    session</a>, the user agent MUST run the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="update metadata algorithm" data-noexport id="update-metadata-algorithm">update metadata
    algorithm</dfn>. The steps are as follows:</p>
     <ol>
      <li> If the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①⓪">active media session</a> is null, unset the media metadata
        presented to the platform, and terminate these steps. 
      <li> If the <a class="idl-code" data-link-type="attribute" href="#dom-mediasession-metadata" id="ref-for-dom-mediasession-metadata①"><code>metadata</code></a> of the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①①">active media session</a> is an <a data-link-type="dfn" href="#empty-metadata" id="ref-for-empty-metadata">empty metadata</a>, unset the media
        metadata presented to the platform, and terminate these steps. 
      <li> Update the media metadata presented to the platform to match the <a class="idl-code" data-link-type="attribute" href="#dom-mediasession-metadata" id="ref-for-dom-mediasession-metadata②"><code>metadata</code></a> for the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①②">active media session</a>. 
      <li> If the user agent wants to display an <a data-link-type="dfn" href="#mediametadata-artwork-images" id="ref-for-mediametadata-artwork-images">artwork image</a>, it is
        RECOMMENDED to run the <a data-link-type="dfn" href="#fetch-image-algorithm" id="ref-for-fetch-image-algorithm">fetch image algorithm</a>. 
     </ol>
     <p>The RECOMMENDED <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fetch-image-algorithm">fetch image algorithm</dfn> is as follows:</p>
     <ol>
      <li> If there are other <a data-link-type="dfn" href="#fetch-image-algorithm" id="ref-for-fetch-image-algorithm①">fetch image algorithms</a> running, cancel
        existing algorithm execution instances. 
      <li> If <var>metadata</var>’s <a class="idl-code" data-link-type="attribute" href="#dom-mediametadata-artwork" id="ref-for-dom-mediametadata-artwork"><code>artwork</code></a> of the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①③">active media
        session</a> is empty, then terminate these steps. 
      <li> If the platform supports displaying media artwork, select a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="preferred-artwork-image">preferred artwork image</dfn> from <var>metadata</var>’s <a class="idl-code" data-link-type="attribute" href="#dom-mediametadata-artwork" id="ref-for-dom-mediametadata-artwork①"><code>artwork</code></a> of the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①④">active
        media session</a>. 
      <li>
        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch" title="fetch">Fetch</a> the <a data-link-type="dfn" href="#preferred-artwork-image" id="ref-for-preferred-artwork-image">preferred artwork image</a>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-src" id="ref-for-dom-mediaimage-src">src</a></code>. 
       <p>Then, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>:</p>
       <ol>
        <li> Wait for the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response">response</a>. 
        <li> If the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response①">response</a>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-internal-response" id="ref-for-concept-internal-response">internal response</a>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-type" id="ref-for-concept-response-type">type</a> is <i>default</i>, attempt to decode the resource as
            an image. 
        <li> If the image format is supported, use the image as the artwork for
            display in platform UI. Otherwise the <a data-link-type="dfn" href="#fetch-image-algorithm" id="ref-for-fetch-image-algorithm②">fetch image algorithm</a> fails and terminates. 
       </ol>
     </ol>
     <p>If no images are fetched in the <a data-link-type="dfn" href="#fetch-image-algorithm" id="ref-for-fetch-image-algorithm③">fetch image algorithm</a>, the user agent
    MAY have fallback behavior such as displaying a default image as artwork.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.4" id="actions-model"><span class="secno">5.4. </span><span class="content">Actions</span><a class="self-link" href="#actions-model"></a></h3>
     <p> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="media-session-action">media session action</dfn> is an action that the page can handle in
      order for the user to interact with the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession③">MediaSession</a></code>. For example, a
      page can handle some actions that will then be triggered when the user
      presses buttons from a headset or other remote device. </p>
     <p> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="media session action source" data-noexport id="media-session-action-source" title="media session action source">media session action
      source</dfn> is a source that might produce a <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action①">media session action</a>.
      Such a source can be the platform or the UI surfaces created by the user
      agent. </p>
     <p> A <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action②">media session action</a> is represented by a <code class="idl"><a data-link-type="idl" href="#enumdef-mediasessionaction" id="ref-for-enumdef-mediasessionaction">MediaSessionAction</a></code> which can have one of the following value: </p>
     <ul>
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;play&quot;|play" id="dom-mediasessionaction-play"><code>play</code></dfn>: the action’s intent
          is to resume the playback. 
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;pause&quot;|pause" id="dom-mediasessionaction-pause"><code>pause</code></dfn>: the action’s intent
          is to pause the currently active playback. 
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;seekbackward&quot;|seekbackward" id="dom-mediasessionaction-seekbackward"><code>seekbackward</code></dfn>: the action’s
          intent is to move the playback time backward by a short period (eg. a
          few seconds). 
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;seekforward&quot;|seekforward" id="dom-mediasessionaction-seekforward"><code>seekforward</code></dfn>: the action’s
          intent is to move the playback time forward by a short period (eg. a
          few seconds). 
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;previoustrack&quot;|previoustrack" id="dom-mediasessionaction-previoustrack"><code>previoustrack</code></dfn>: the action’s
          intent is to either start the current playback from the beginning if
          the playback has a notion of beginning, or move to the previous item
          in the playlist if the playback has a notion of playlist. 
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;nexttrack&quot;|nexttrack" id="dom-mediasessionaction-nexttrack"><code>nexttrack</code></dfn>: the action’s
          intent is to move to the playback to the next item in the playlist if the
          playback has a notion of playlist. 
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;skipad&quot;|skipad" id="dom-mediasessionaction-skipad"><code>skipad</code></dfn>: the action’s intent
          is to skip the advertisement that is currently playing. 
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;stop&quot;|stop" id="dom-mediasessionaction-stop"><code>stop</code></dfn>: the action’s intent
          is to stop the playback and clear the state if appropriate. 
      <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionAction" data-dfn-type="enum-value" data-export data-lt="&quot;seekto&quot;|seekto" id="dom-mediasessionaction-seekto"><code>seekto</code></dfn>: the action’s intent
          is to move the playback time to a specific time. 
     </ul>
     <p></p>
     <p> All <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession④">MediaSession</a></code>s have a map of <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="supported media session actions" data-noexport id="supported-media-session-actions">supported media session
      actions</dfn> with, as a key, a <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action③">media session action</a> and as a value
      a <code class="idl"><a data-link-type="idl" href="#callbackdef-mediasessionactionhandler" id="ref-for-callbackdef-mediasessionactionhandler">MediaSessionActionHandler</a></code>. </p>
     <p> When the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="update-action-handler-algorithm">update action handler algorithm</dfn> on a given <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession⑤">MediaSession</a></code> with <var>action</var> and <var>handler</var> parameters
      is invoked, the user agent MUST run the following steps: </p>
     <ol>
      <li> If <var>handler</var> is <code>null</code>, remove <var>action</var> from the <a data-link-type="dfn" href="#supported-media-session-actions" id="ref-for-supported-media-session-actions">supported media session actions</a> for <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession⑥">MediaSession</a></code> and abort these steps. 
      <li> Add <var>action</var> to the <a data-link-type="dfn" href="#supported-media-session-actions" id="ref-for-supported-media-session-actions①">supported media session actions</a> for <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession⑦">MediaSession</a></code> and associate to it the <var>handler</var>. 
     </ol>
     <p></p>
     <p> When the <a data-link-type="dfn" href="#supported-media-session-actions" id="ref-for-supported-media-session-actions②">supported media session actions</a> are changed, the user
      agent SHOULD run the <a data-link-type="dfn" href="#media-session-actions-update-algorithm" id="ref-for-media-session-actions-update-algorithm②">media session actions update algorithm</a>. The
      user agent MAY <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">queue a task</a> in order to run the <a data-link-type="dfn" href="#media-session-actions-update-algorithm" id="ref-for-media-session-actions-update-algorithm③">media session
      actions update algorithm</a> in order to avoid UI flickering when multiple
      actions are modified in the same event loop. </p>
     <p> When the user agent is notified by a <a data-link-type="dfn" href="#media-session-action-source" id="ref-for-media-session-action-source">media session action source</a> that a <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action④">media session action</a> named <var>action</var> has been triggered,
      the user agent MUST run the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-media-session-action">handle media session action</dfn> steps
      as follows: </p>
     <ol>
      <li> If the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①⑤">active media session</a> is <code>null</code>, abort these
          steps. 
      <li> Let <var>actions</var> be the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①⑥">active media session</a>’s <a data-link-type="dfn" href="#supported-media-session-actions" id="ref-for-supported-media-session-actions③">supported media session actions</a>. 
      <li> If <var>actions</var> does not contain the key <var>action</var>,
          abort these steps. 
      <li> Let <var>handler</var> be the <code class="idl"><a data-link-type="idl" href="#callbackdef-mediasessionactionhandler" id="ref-for-callbackdef-mediasessionactionhandler①">MediaSessionActionHandler</a></code> associated
          with the key <var>action</var> in <var>actions</var>. 
      <li> Run <var>handler</var> with the <var>details</var> parameter set to: <code class="idl"><a data-link-type="idl" href="#dictdef-mediasessionactiondetails" id="ref-for-dictdef-mediasessionactiondetails">MediaSessionActionDetails</a></code>. 
      <li> Run the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification">activation notification</a> steps in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context⑥">browsing context</a> associated with the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①⑦">active media session</a>. 
     </ol>
     <p></p>
     <p> When the user agent receives a joint command for <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-play" id="ref-for-dom-mediasessionaction-play②">play</a> and <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause" id="ref-for-dom-mediasessionaction-pause③">pause</a>, such as a headset button click, it MUST
      run the following steps: </p>
     <ol>
      <li> If the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①⑧">active media session</a> is <code>null</code>, abort these
          steps. 
      <li> Let <var>action</var> be a <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action⑤">media session action</a>. 
      <li> If the <a data-link-type="dfn" href="#actual-playback-state" id="ref-for-actual-playback-state②">actual playback state</a> of the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session①⑨">active media session</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-playing" id="ref-for-dom-mediasessionplaybackstate-playing③">playing</a>, set <var>action</var> to <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause" id="ref-for-dom-mediasessionaction-pause④">pause</a>. 
      <li> Otherwise, set <var>action</var> to <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-play" id="ref-for-dom-mediasessionaction-play③">play</a>. 
      <li> Run the <a data-link-type="dfn" href="#handle-media-session-action" id="ref-for-handle-media-session-action">handle media session action</a> steps with <var>action</var>. 
     </ol>
     <p></p>
     <p> It is RECOMMENDED for user agents to implement a default handler for the <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-play" id="ref-for-dom-mediasessionaction-play④">play</a> and <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause" id="ref-for-dom-mediasessionaction-pause⑤">pause</a> <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action⑥">media session actions</a> if none was
      provided for the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session②⓪">active media session</a>. </p>
     <p class="note" role="note"> A page should only register a <code class="idl"><a data-link-type="idl" href="#callbackdef-mediasessionactionhandler" id="ref-for-callbackdef-mediasessionactionhandler②">MediaSessionActionHandler</a></code> for a <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action⑦">media
      session action</a> when it can handle the action given that the user agent
      will list this as a <a data-link-type="dfn" href="#supported-media-session-actions" id="ref-for-supported-media-session-actions④">supported media session action</a> and update the <a data-link-type="dfn" href="#media-session-action-source" id="ref-for-media-session-action-source①">media session action sources</a>. </p>
     <p> When the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="media-session-actions-update-algorithm">media session actions update algorithm</dfn> is invoked, the
      user agent MUST run the following steps: </p>
     <ol>
      <li> Let <var>available actions</var> be an array of <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action⑧">media session
          actions</a>. 
      <li> If the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session②①">active media session</a> is null, set <var>available
          actions</var> to the empty array. 
      <li> Otherwise, set the <var>available actions</var> to the list of keys
          available in the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session②②">active media session</a>’s <a data-link-type="dfn" href="#supported-media-session-actions" id="ref-for-supported-media-session-actions⑤">supported media
          session actions</a>. 
      <li>
        For each <a data-link-type="dfn" href="#media-session-action-source" id="ref-for-media-session-action-source②">media session action source</a> <var>source</var>, run the
          following substeps: 
       <ol>
        <li>
          Optionally, if the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session②③">active media session</a> is not null: 
         <ol>
          <li> If the <a data-link-type="dfn" href="#active-media-session" id="ref-for-active-media-session②④">active media session</a>’s <a data-link-type="dfn" href="#actual-playback-state" id="ref-for-actual-playback-state③">actual playback
                  state</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-playing" id="ref-for-dom-mediasessionplaybackstate-playing④">playing</a>, remove <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-play" id="ref-for-dom-mediasessionaction-play⑤">play</a> from <var>available
                  actions</var>. 
          <li> Otherwise, remove <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause" id="ref-for-dom-mediasessionaction-pause⑥">pause</a> from <var>available
                  actions</var>. 
         </ol>
        <li> If the <var>source</var> is a UI element created by the user
              agent, it MAY remove some elements from <var>available
              actions</var> if there are too many of them compared to the
              available space. 
        <li> Notify the <var>source</var> with the updated list of <var>available actions</var>. 
       </ol>
     </ol>
     <p></p>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.5" id="position-state"><span class="secno">5.5. </span><span class="content">Position State</span><a class="self-link" href="#position-state"></a></h3>
     <p> A user agent MAY display the <a data-link-type="dfn" href="#current-playback-position" id="ref-for-current-playback-position">current playback position</a> and <a data-link-type="dfn" href="#duration" id="ref-for-duration">duration</a> of a media session in the platform UI depending on platform conventions.
      The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="position-state①">position state</dfn> is the combination of the following: </p>
     <ul>
      <li> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="duration">duration</dfn> of the media in seconds. 
      <li> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="playback-rate">playback rate</dfn> of the media. It is a coefficient. 
      <li> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="last-reported-playback-position">last reported playback position</dfn> of the media. This is
          the playback position of the media in seconds when the <a data-link-type="dfn" href="#position-state①" id="ref-for-position-state①">position
          state</a> was created. 
     </ul>
     <p></p>
     <p> The <a data-link-type="dfn" href="#position-state①" id="ref-for-position-state①①">position state</a> is represented by a <code class="idl"><a data-link-type="idl" href="#dictdef-mediapositionstate" id="ref-for-dictdef-mediapositionstate">MediaPositionState</a></code> which
      MUST always be stored with the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="last-position-updated-time">last position updated time</dfn>. This
      is the time the <a data-link-type="dfn" href="#position-state①" id="ref-for-position-state①②">position state</a> was last updated in seconds. </p>
     <p> The RECOMMENDED way to determine the <a data-link-type="dfn" href="#position-state①" id="ref-for-position-state①③">position state</a> is to monitor
      the media elements whose node document’s browsing context is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context⑦">browsing context</a>. </p>
     <p> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="actual-playback-rate">actual playback rate</dfn> is a coefficient computed in the
      following way: </p>
     <ul>
      <li> If the <a data-link-type="dfn" href="#actual-playback-state" id="ref-for-actual-playback-state④">actual playback state</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-paused" id="ref-for-dom-mediasessionplaybackstate-paused①">paused</a>, then return zero. 
      <li> Return <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate">playback rate</a>. 
     </ul>
     <p></p>
     <p> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="current-playback-position">current playback position</dfn> in seconds is computed in the
      following way: </p>
     <ul>
      <li> Set <var>time elapsed</var> to the system time in seconds minus the <a data-link-type="dfn" href="#last-position-updated-time" id="ref-for-last-position-updated-time">last position updated time</a>. 
      <li> Mutliply <var>time elapsed</var> with <a data-link-type="dfn" href="#actual-playback-rate" id="ref-for-actual-playback-rate">actual playback rate</a>. 
      <li> Set <var>position</var> to <var>time elapsed</var> added to <a data-link-type="dfn" href="#last-reported-playback-position" id="ref-for-last-reported-playback-position">last reported playback position</a>. 
      <li> If <var>position</var> is less than zero, return zero. 
      <li> If <var>position</var> is greater than <a data-link-type="dfn" href="#duration" id="ref-for-duration①">duration</a>, return <a data-link-type="dfn" href="#duration" id="ref-for-duration②">duration</a>. 
      <li> Return <var>position</var>. 
     </ul>
     <p></p>
    </section>
   </section>
   <h2 class="heading settled" data-level="6" id="the-mediasession-interface"><span class="secno">6. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession⑧">MediaSession</a></code> interface</span><a class="self-link" href="#the-mediasession-interface"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator"><c- g>Navigator</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#mediasession" id="ref-for-mediasession⑨"><c- n>MediaSession</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="MediaSession" href="#dom-navigator-mediasession" id="ref-for-dom-navigator-mediasession"><c- g>mediaSession</c-></a>;
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-mediasessionplaybackstate"><code><c- g>MediaSessionPlaybackState</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-none" id="ref-for-dom-mediasessionplaybackstate-none"><c- s>"none"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-paused" id="ref-for-dom-mediasessionplaybackstate-paused②"><c- s>"paused"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-playing" id="ref-for-dom-mediasessionplaybackstate-playing⑤"><c- s>"playing"</c-></a>
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-mediasessionaction"><code><c- g>MediaSessionAction</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-play" id="ref-for-dom-mediasessionaction-play⑥"><c- s>"play"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause" id="ref-for-dom-mediasessionaction-pause⑦"><c- s>"pause"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekbackward" id="ref-for-dom-mediasessionaction-seekbackward"><c- s>"seekbackward"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekforward" id="ref-for-dom-mediasessionaction-seekforward"><c- s>"seekforward"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-previoustrack" id="ref-for-dom-mediasessionaction-previoustrack"><c- s>"previoustrack"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-nexttrack" id="ref-for-dom-mediasessionaction-nexttrack"><c- s>"nexttrack"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-skipad" id="ref-for-dom-mediasessionaction-skipad"><c- s>"skipad"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-stop" id="ref-for-dom-mediasessionaction-stop"><c- s>"stop"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekto" id="ref-for-dom-mediasessionaction-seekto"><c- s>"seekto"</c-></a>
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-mediasessionactionhandler"><code><c- g>MediaSessionActionHandler</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>(<a data-link-type="idl-name" href="#dictdef-mediasessionactiondetails" id="ref-for-dictdef-mediasessionactiondetails①"><c- n>MediaSessionActionDetails</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionActionHandler" data-dfn-type="argument" data-export id="dom-mediasessionactionhandler-details"><code><c- g>details</c-></code></dfn>);

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="mediasession"><code><c- g>MediaSession</c-></code></dfn> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#mediametadata" id="ref-for-mediametadata⑥"><c- n>MediaMetadata</c-></a>? <a class="idl-code" data-link-type="attribute" data-type="MediaMetadata?" href="#dom-mediasession-metadata" id="ref-for-dom-mediasession-metadata③"><c- g>metadata</c-></a>;

  <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-mediasessionplaybackstate" id="ref-for-enumdef-mediasessionplaybackstate"><c- n>MediaSessionPlaybackState</c-></a> <a class="idl-code" data-link-type="attribute" data-type="MediaSessionPlaybackState" href="#dom-mediasession-playbackstate" id="ref-for-dom-mediasession-playbackstate③"><c- g>playbackState</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-mediasession-setactionhandler" id="ref-for-dom-mediasession-setactionhandler"><c- g>setActionHandler</c-></a>(<a data-link-type="idl-name" href="#enumdef-mediasessionaction" id="ref-for-enumdef-mediasessionaction①"><c- n>MediaSessionAction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSession/setActionHandler(action, handler)" data-dfn-type="argument" data-export id="dom-mediasession-setactionhandler-action-handler-action"><code><c- g>action</c-></code></dfn>, <a data-link-type="idl-name" href="#callbackdef-mediasessionactionhandler" id="ref-for-callbackdef-mediasessionactionhandler③"><c- n>MediaSessionActionHandler</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSession/setActionHandler(action, handler)" data-dfn-type="argument" data-export id="dom-mediasession-setactionhandler-action-handler-handler"><code><c- g>handler</c-></code></dfn>);

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-mediasession-setpositionstate" id="ref-for-dom-mediasession-setpositionstate"><c- g>setPositionState</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-mediapositionstate" id="ref-for-dictdef-mediapositionstate①"><c- n>MediaPositionState</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSession/setPositionState(state), MediaSession/setPositionState()" data-dfn-type="argument" data-export id="dom-mediasession-setpositionstate-state-state"><code><c- g>state</c-></code></dfn> = {});
};
</pre>
   <p> A <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①⓪">MediaSession</a></code> object represents a media session for a given document and
  allows a document to communicate to the user agent some information about the
  playback and how to handle it. </p>
   <p> A <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①①">MediaSession</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="MediaSession" data-dfn-type="dfn" data-noexport id="mediasession-metadata">metadata</dfn> object represented by a <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata⑦">MediaMetadata</a></code>. It is initially <code>null</code>. </p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="Navigator" data-dfn-type="attribute" data-export id="dom-navigator-mediasession"><code>mediaSession</code></dfn> attribute
  MUST return the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①②">MediaSession</a></code> instance associated with the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator①">Navigator</a></code> object. </p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSession" data-dfn-type="attribute" data-export id="dom-mediasession-metadata"><code>metadata</code></dfn> attribute
  reflects the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①③">MediaSession</a></code>'s <a data-link-type="dfn" href="#mediasession-metadata" id="ref-for-mediasession-metadata">metadata</a>. On getting,
  it MUST return the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①④">MediaSession</a></code>'s <a data-link-type="dfn" href="#mediasession-metadata" id="ref-for-mediasession-metadata①">metadata</a>. On
  setting, it MUST run the following steps with <var>value</var> being the new
  value being set: </p>
   <ol>
    <li> If the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①⑤">MediaSession</a></code>'s <a data-link-type="dfn" href="#mediasession-metadata" id="ref-for-mediasession-metadata②">metadata</a> is not <code>null</code>, set its <a data-link-type="dfn" href="#mediametadata-media-session" id="ref-for-mediametadata-media-session">media session</a> to <code>null</code>. 
    <li> Set the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①⑥">MediaSession</a></code>'s <a data-link-type="dfn" href="#mediasession-metadata" id="ref-for-mediasession-metadata③">metadata</a> to <var>value</var>. 
    <li> If the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①⑦">MediaSession</a></code>'s <a data-link-type="dfn" href="#mediasession-metadata" id="ref-for-mediasession-metadata④">metadata</a> is not <code>null</code>, set its <a data-link-type="dfn" href="#mediametadata-media-session" id="ref-for-mediametadata-media-session①">media session</a> to the
      current <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①⑧">MediaSession</a></code>. 
    <li> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">In parallel</a>, run the <a data-link-type="dfn" href="#update-metadata-algorithm" id="ref-for-update-metadata-algorithm①">update metadata algorithm</a>. 
   </ol>
   <p></p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSession" data-dfn-type="attribute" data-export id="dom-mediasession-playbackstate"><code>playbackState</code></dfn> attribute represents the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="declared-playback-state">declared playback state</dfn> of the <a data-link-type="dfn" href="#mediametadata-media-session" id="ref-for-mediametadata-media-session②">media
  session</a>, by which the session declares whether its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context⑧">browsing context</a> is playing media or not. The initial value is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-none" id="ref-for-dom-mediasessionplaybackstate-none①">none</a>. On setting, the user agent MUST set
  the IDL attribute to the new value if it is a valid <code class="idl"><a data-link-type="idl" href="#enumdef-mediasessionplaybackstate" id="ref-for-enumdef-mediasessionplaybackstate①">MediaSessionPlaybackState</a></code> value. On getting, the user agent MUST return
  the last valid value that was set. The <code class="idl"><a data-link-type="idl" href="#dom-mediasession-playbackstate" id="ref-for-dom-mediasession-playbackstate④">playbackState</a></code> attribute is a hint for the user agent to determine whether the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context⑨">browsing
  context</a> is playing or paused. </p>
   <p class="note" role="note"> Setting <code class="idl"><a data-link-type="idl" href="#dom-mediasession-playbackstate" id="ref-for-dom-mediasession-playbackstate⑤">playbackState</a></code> may cause the <a data-link-type="dfn" href="#actual-playback-state" id="ref-for-actual-playback-state⑤">actual playback
  state</a> to change and run the <a data-link-type="dfn" href="#media-session-actions-update-algorithm" id="ref-for-media-session-actions-update-algorithm④">media session actions update algorithm</a>. </p>
   <p> The <code class="idl"><a data-link-type="idl" href="#enumdef-mediasessionplaybackstate" id="ref-for-enumdef-mediasessionplaybackstate②">MediaSessionPlaybackState</a></code> enum is used to indicate whether a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①⓪">browsing context</a> is playing media or not, the values are described as
  follows: </p>
   <ul>
    <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionPlaybackState" data-dfn-type="enum-value" data-export data-lt="&quot;none&quot;|none" id="dom-mediasessionplaybackstate-none"><code>none</code></dfn> means the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①①">browsing context</a> does not specify whether it’s playing or paused, it can only be used in
      the <code class="idl"><a data-link-type="idl" href="#dom-mediasession-playbackstate" id="ref-for-dom-mediasession-playbackstate⑥">playbackState</a></code> attribute. 
    <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionPlaybackState" data-dfn-type="enum-value" data-export data-lt="&quot;playing&quot;|playing" id="dom-mediasessionplaybackstate-playing"><code>playing</code></dfn> means the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①②">browsing context</a> is currently playing media and it can be paused. 
    <li> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionPlaybackState" data-dfn-type="enum-value" data-export data-lt="&quot;paused&quot;|paused" id="dom-mediasessionplaybackstate-paused"><code>paused</code></dfn> means the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①③">browsing context</a> has paused media and it can be resumed. 
   </ul>
   <p></p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSession" data-dfn-type="method" data-export id="dom-mediasession-setactionhandler"><code>setActionHandler(action, handler)</code></dfn> method, when
  invoked, MUST run the <a data-link-type="dfn" href="#update-action-handler-algorithm" id="ref-for-update-action-handler-algorithm">update action handler algorithm</a> with <var>action</var> and <var>handler</var> on the <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession①⑨">MediaSession</a></code>. </p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSession" data-dfn-type="method" data-export data-lt="setPositionState(state)|setPositionState()" id="dom-mediasession-setpositionstate"><code>setPositionState(state)</code></dfn> method, when invoked
  MUST perform the following steps: </p>
   <ul>
    <li> If the <var>state</var> is an empty dictionary then clear the <a data-link-type="dfn" href="#position-state①" id="ref-for-position-state①④">position
      state</a>. 
    <li> If the <a class="idl-code" data-link-type="dict-member" href="#dom-mediapositionstate-duration" id="ref-for-dom-mediapositionstate-duration">duration</a> is not present
      or its value is null, throw a <a class="idl-code" data-link-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a>. 
    <li> If the <a class="idl-code" data-link-type="dict-member" href="#dom-mediapositionstate-duration" id="ref-for-dom-mediapositionstate-duration①">duration</a> is negative,
      throw a <a class="idl-code" data-link-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a>. 
    <li> If the <a class="idl-code" data-link-type="dict-member" href="#dom-mediapositionstate-position" id="ref-for-dom-mediapositionstate-position">position</a> is not present
      or its value is null, set it to zero. 
    <li> If the <a class="idl-code" data-link-type="dict-member" href="#dom-mediapositionstate-position" id="ref-for-dom-mediapositionstate-position①">position</a> is negative or
      greater than <a class="idl-code" data-link-type="dict-member" href="#dom-mediapositionstate-duration" id="ref-for-dom-mediapositionstate-duration②">duration</a>, throw a <a class="idl-code" data-link-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a>. 
    <li> If the <a class="idl-code" data-link-type="dict-member" href="#dom-mediapositionstate-playbackrate" id="ref-for-dom-mediapositionstate-playbackrate">playbackRate</a> is not
      present or its value is null, set it to 1.0. 
    <li> If the <a class="idl-code" data-link-type="dict-member" href="#dom-mediapositionstate-playbackrate" id="ref-for-dom-mediapositionstate-playbackrate①">playbackRate</a> is zero
      throw a <a class="idl-code" data-link-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a>. 
    <li> Update the <a data-link-type="dfn" href="#position-state①" id="ref-for-position-state①⑤">position state</a> and <a data-link-type="dfn" href="#last-position-updated-time" id="ref-for-last-position-updated-time①">last position updated time</a>. 
   </ul>
   <p></p>
   <h2 class="heading settled" data-level="7" id="the-mediametadata-interface"><span class="secno">7. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata⑧">MediaMetadata</a></code> interface</span><a class="self-link" href="#the-mediametadata-interface"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="mediametadata"><code><c- g>MediaMetadata</c-></code></dfn> {
  <a class="idl-code" data-link-type="constructor" href="#dom-mediametadata-mediametadata" id="ref-for-dom-mediametadata-mediametadata"><c- g>constructor</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-mediametadatainit" id="ref-for-dictdef-mediametadatainit"><c- n>MediaMetadataInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="MediaMetadata/MediaMetadata(init), MediaMetadata/constructor(init), MediaMetadata/MediaMetadata(), MediaMetadata/constructor()" data-dfn-type="argument" data-export id="dom-mediametadata-mediametadata-init-init"><code><c- g>init</c-></code></dfn> = {});
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-mediametadata-title" id="ref-for-dom-mediametadata-title"><c- g>title</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-mediametadata-artist" id="ref-for-dom-mediametadata-artist"><c- g>artist</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-mediametadata-album" id="ref-for-dom-mediametadata-album"><c- g>album</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage"><c- n>MediaImage</c-></a>> <a class="idl-code" data-link-type="attribute" data-type="FrozenArray<MediaImage>" href="#dom-mediametadata-artwork" id="ref-for-dom-mediametadata-artwork②"><c- g>artwork</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-mediametadatainit"><code><c- g>MediaMetadataInit</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;&quot;" data-dfn-for="MediaMetadataInit" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-mediametadatainit-title"><code><c- g>title</c-></code></dfn> = "";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;&quot;" data-dfn-for="MediaMetadataInit" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-mediametadatainit-artist"><code><c- g>artist</c-></code></dfn> = "";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;&quot;" data-dfn-for="MediaMetadataInit" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-mediametadatainit-album"><code><c- g>album</c-></code></dfn> = "";
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage①"><c- n>MediaImage</c-></a>> <dfn class="dfn-paneled idl-code" data-default="[]" data-dfn-for="MediaMetadataInit" data-dfn-type="dict-member" data-export data-type="sequence<MediaImage>" id="dom-mediametadatainit-artwork"><code><c- g>artwork</c-></code></dfn> = [];
};
</pre>
   <p> A <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata⑨">MediaMetadata</a></code> object is a representation of the metadata associated with
  a <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession②⓪">MediaSession</a></code> that can be used by user agents to provide customized user
  interface. </p>
   <p> A <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①⓪">MediaMetadata</a></code> can have an associated <dfn class="dfn-paneled" data-dfn-for="MediaMetadata" data-dfn-type="dfn" data-lt="media session" data-noexport id="mediametadata-media-session">media
  session</dfn>. </p>
   <p> A <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①①">MediaMetadata</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="MediaMetadata" data-dfn-type="dfn" data-noexport id="mediametadata-title">title</dfn>, <dfn class="dfn-paneled" data-dfn-for="MediaMetadata" data-dfn-type="dfn" data-noexport id="mediametadata-artist">artist</dfn> and <dfn class="dfn-paneled" data-dfn-for="MediaMetadata" data-dfn-type="dfn" data-noexport id="mediametadata-album">album</dfn> which are DOMString. </p>
   <p> A <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①②">MediaMetadata</a></code> has an associated list of <dfn class="dfn-paneled" data-dfn-for="MediaMetadata" data-dfn-type="dfn" data-lt="artwork images" data-noexport id="mediametadata-artwork-images">artwork
  images</dfn>. </p>
   <p> A <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①③">MediaMetadata</a></code> is said to be an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="empty-metadata">empty metadata</dfn> if it is equal
  to <code>null</code> or all the following conditions are true: </p>
   <ul>
    <li>Its <a data-link-type="dfn" href="#mediametadata-title" id="ref-for-mediametadata-title">title</a> is the empty string.
    <li>Its <a data-link-type="dfn" href="#mediametadata-artist" id="ref-for-mediametadata-artist">artist</a> is the empty string.
    <li>Its <a data-link-type="dfn" href="#mediametadata-album" id="ref-for-mediametadata-album">album</a> is the empty string.
    <li>Its <a data-link-type="dfn" href="#mediametadata-artwork-images" id="ref-for-mediametadata-artwork-images①" title="artwork image">artwork images</a> length
    is <code>0</code>.
   </ul>
   <p></p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaMetadata" data-dfn-type="constructor" data-export data-lt="MediaMetadata(init)|constructor(init)|MediaMetadata()|constructor()" id="dom-mediametadata-mediametadata"><code>MediaMetadata(<var>init</var>)</code></dfn> constructor, when invoked, MUST run the following steps: </p>
   <ol>
    <li> Let <var>metadata</var> be a new <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①④">MediaMetadata</a></code> object. 
    <li> Set <var>metadata</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediametadata-title" id="ref-for-dom-mediametadata-title①">title</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediametadatainit-title" id="ref-for-dom-mediametadatainit-title">title</a></code>. 
    <li> Set <var>metadata</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediametadata-artist" id="ref-for-dom-mediametadata-artist①">artist</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediametadatainit-artist" id="ref-for-dom-mediametadatainit-artist">artist</a></code>. 
    <li> Set <var>metadata</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediametadata-album" id="ref-for-dom-mediametadata-album①">album</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediametadatainit-album" id="ref-for-dom-mediametadatainit-album">album</a></code>. 
    <li> Run the <a data-link-type="dfn" href="#convert-artwork-algorithm" id="ref-for-convert-artwork-algorithm">convert artwork algorithm</a> with <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediametadatainit-artwork" id="ref-for-dom-mediametadatainit-artwork">artwork</a></code> as <var>input</var> and set <var>metadata</var>’s <a data-link-type="dfn" href="#mediametadata-artwork-images" id="ref-for-mediametadata-artwork-images②">artwork images</a> as the
      result if it succeeded. 
    <li> Return <var>metadata</var>. 
   </ol>
   <p></p>
   <p>When the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="convert-artwork-algorithm">convert artwork algorithm</dfn> with <var>input</var> parameter is
invoked, the user agent MUST run the following steps:</p>
   <ol>
    <li> Let <var>output</var> be an empty list of type <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage②">MediaImage</a></code>. 
    <li>
      For each <var>entry</var> in <var>input</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediametadatainit-artwork" id="ref-for-dom-mediametadatainit-artwork①">artwork</a></code>, perform the following steps: 
     <ol>
      <li> Let <var>image</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage③">MediaImage</a></code>. 
      <li>Let <var>baseURL</var> be the API base URL specified by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#entry-settings-object" id="ref-for-entry-settings-object">entry
      settings object</a>. 
      <li> <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser">Parse</a> <var>entry</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-src" id="ref-for-dom-mediaimage-src①">src</a></code> using <var>baseURL</var>. If it does not return failure, set <var>image</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-src" id="ref-for-dom-mediaimage-src②">src</a></code> to the return value. Otherwise,
        throw a <a class="idl-code" data-link-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a> and abort these steps. 
      <li> Set <var>image</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-sizes" id="ref-for-dom-mediaimage-sizes">sizes</a></code> to <var>entry</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-sizes" id="ref-for-dom-mediaimage-sizes①">sizes</a></code>. 
      <li> Set <var>image</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-type" id="ref-for-dom-mediaimage-type">type</a></code> to <var>entry</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-type" id="ref-for-dom-mediaimage-type①">type</a></code>. 
      <li> Append <var>image</var> to the <var>output</var>. 
     </ol>
    <li> Return <var>output</var> as result. 
   </ol>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaMetadata" data-dfn-type="attribute" data-export id="dom-mediametadata-title"><code>title</code></dfn> attribute
  reflects the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①⑤">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-title" id="ref-for-mediametadata-title①">title</a>. On getting,
  it MUST return the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①⑥">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-title" id="ref-for-mediametadata-title②">title</a>. On
  setting, it MUST set the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①⑦">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-title" id="ref-for-mediametadata-title③">title</a> to
  the given value. </p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaMetadata" data-dfn-type="attribute" data-export id="dom-mediametadata-artist"><code>artist</code></dfn> attribute
  reflects the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①⑧">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-artist" id="ref-for-mediametadata-artist①">artist</a>. On getting,
  it MUST return the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata①⑨">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-artist" id="ref-for-mediametadata-artist②">artist</a>. On
  setting, it MUST set the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②⓪">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-artist" id="ref-for-mediametadata-artist③">artist</a> to the given value. </p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaMetadata" data-dfn-type="attribute" data-export id="dom-mediametadata-album"><code>album</code></dfn> attribute
  reflects the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②①">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-album" id="ref-for-mediametadata-album①">album</a>. On getting,
  it MUST return the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②②">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-album" id="ref-for-mediametadata-album②">album</a>. On
  setting, it MUST set the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②③">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-album" id="ref-for-mediametadata-album③">album</a> to
  the given value. </p>
   <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaMetadata" data-dfn-type="attribute" data-export id="dom-mediametadata-artwork"><code>artwork</code></dfn> attribute reflects the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②④">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-artwork-images" id="ref-for-mediametadata-artwork-images③">artwork
  images</a>. On getting, it MUST return the result of the following steps: </p>
   <ol>
    <li> Let <var>frozenArtwork</var> be an empty list of type <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage④">MediaImage</a></code>. 
    <li>
      For each <var>entry</var> in the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②⑤">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-artwork-images" id="ref-for-mediametadata-artwork-images④">artwork images</a>, perform the following steps: 
     <ol>
      <li> Let <var>image</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage⑤">MediaImage</a></code>. 
      <li> Set <var>image</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-src" id="ref-for-dom-mediaimage-src③">src</a></code> to <var>entry</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-src" id="ref-for-dom-mediaimage-src④">src</a></code>. 
      <li> Set <var>image</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-sizes" id="ref-for-dom-mediaimage-sizes②">sizes</a></code> to <var>entry</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-sizes" id="ref-for-dom-mediaimage-sizes③">sizes</a></code>. 
      <li> Set <var>image</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-type" id="ref-for-dom-mediaimage-type②">type</a></code> to <var>entry</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-type" id="ref-for-dom-mediaimage-type③">type</a></code>. 
      <li> Call <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object.freeze" id="ref-for-sec-object.freeze">Object.freeze</a> on <var>image</var>, to prevent
          accidental mutation by scripts. 
      <li> Append <var>image</var> to <var>frozenArtwork</var>. 
     </ol>
    <li> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-create-frozen-array" id="ref-for-dfn-create-frozen-array">Create a frozen array</a> from <var>frozenArtwork</var>. 
   </ol>
    On setting, it MUST run the <a data-link-type="dfn" href="#convert-artwork-algorithm" id="ref-for-convert-artwork-algorithm①">convert artwork algorithm</a> with the new value as <var>input</var>, and
  set the <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②⑥">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-artwork-images" id="ref-for-mediametadata-artwork-images⑤">artwork images</a> as the
  result if it succeeded. 
   <p></p>
   <p> When <code class="idl"><a data-link-type="idl" href="#mediametadata" id="ref-for-mediametadata②⑦">MediaMetadata</a></code>'s <a data-link-type="dfn" href="#mediametadata-title" id="ref-for-mediametadata-title④">title</a>, <a data-link-type="dfn" href="#mediametadata-artist" id="ref-for-mediametadata-artist④">artist</a>, <a data-link-type="dfn" href="#mediametadata-album" id="ref-for-mediametadata-album④">album</a> or <a data-link-type="dfn" href="#mediametadata-artwork-images" id="ref-for-mediametadata-artwork-images⑥">artwork images</a> are modified, the user agent MUST run the
  following steps: </p>
   <ol>
    <li> If the instance has no associated <a data-link-type="dfn" href="#mediametadata-media-session" id="ref-for-mediametadata-media-session③">media session</a>,
      abort these steps. 
    <li>
      Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task①">queue a task</a> to run the following substeps: 
     <ol>
      <li> If the instance no longer has an associated <a data-link-type="dfn" href="#mediametadata-media-session" id="ref-for-mediametadata-media-session④">media
          session</a>, abort these steps. 
      <li> Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a>, run the <a data-link-type="dfn" href="#update-metadata-algorithm" id="ref-for-update-metadata-algorithm②">update metadata
          algorithm</a>. 
     </ol>
   </ol>
   <p></p>
   <h2 class="heading settled" data-level="8" id="the-mediaimage-dictionary"><span class="secno">8. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage⑥">MediaImage</a></code> dictionary</span><a class="self-link" href="#the-mediaimage-dictionary"></a></h2>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-mediaimage"><code><c- g>MediaImage</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="USVString" href="#dom-mediaimage-src" id="ref-for-dom-mediaimage-src⑤"><c- g>src</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString" href="#dom-mediaimage-sizes" id="ref-for-dom-mediaimage-sizes④"><c- g>sizes</c-></a> = "";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString" href="#dom-mediaimage-type" id="ref-for-dom-mediaimage-type④"><c- g>type</c-></a> = "";
};
</pre>
   <p class="informative">The <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage⑦">MediaImage</a></code> dictionary members are inspired by <a data-link-type="dfn" href="https://www.w3.org/TR/appmanifest/#dom-imageresource" id="ref-for-dom-imageresource">ImageResource</a> in <a data-link-type="biblio" href="#biblio-appmanifest" title="Web Application Manifest">[AppManifest]</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaImage" data-dfn-type="dict-member" data-export id="dom-mediaimage-src"><code>src</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member">dictionary member</a> is used
to specify the <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage⑧">MediaImage</a></code> object’s <dfn class="dfn-paneled" data-dfn-for="MediaImage" data-dfn-type="dfn" data-noexport id="mediaimage-source">source</dfn>. It is
a URL from which the user agent can fetch the image’s data.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaImage" data-dfn-type="dict-member" data-export id="dom-mediaimage-sizes"><code>sizes</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member①">dictionary member</a> is
used to specify the <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage⑨">MediaImage</a></code> object’s <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-sizes" id="ref-for-dom-mediaimage-sizes⑤">sizes</a></code>. It follows the
spec of <a class="idl-code" data-link-type="attribute" href="https://html.spec.whatwg.org/multipage/semantics.html#dom-link-sizes" id="ref-for-dom-link-sizes"><code>sizes</code></a> attribute in
the HTML <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element"><code>link</code></a> element, which is a string
consisting of an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens" id="ref-for-unordered-set-of-unique-space-separated-tokens">unordered set of unique space-separated tokens</a> which are <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive">ASCII case-insensitive</a> that represents the dimensions of an image. Each
keyword is either an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive①">ASCII case-insensitive</a> match for the string "any",
or a value that consists of two valid non-negative integers that do not have a
leading U+0030 DIGIT ZERO (0) character and that are separated by a single
U+0078 LATIN SMALL LETTER X or U+0058 LATIN CAPITAL LETTER X character. The
keywords represent icon sizes in raw pixels (as opposed to CSS pixels). When
multiple image objects are available, a user agent MAY use the value to decide
which icon is most suitable for a display context (and ignore any that are
inappropriate). The parsing steps for the <code class="idl"><a data-link-type="idl" href="#dom-mediaimage-sizes" id="ref-for-dom-mediaimage-sizes⑥">sizes</a></code> attribute MUST
follow <a class="idl-code" data-link-type="attribute" href="https://html.spec.whatwg.org/multipage/semantics.html#dom-link-sizes" id="ref-for-dom-link-sizes①">the parsing steps for HTML <code>link</code> element <code>sizes</code> attribute</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaImage" data-dfn-type="dict-member" data-export id="dom-mediaimage-type"><code>type</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member②">dictionary member</a> is
used to specify the <code class="idl"><a data-link-type="idl" href="#dictdef-mediaimage" id="ref-for-dictdef-mediaimage①⓪">MediaImage</a></code> object’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type" id="ref-for-mime-type">MIME type</a>. It is a hint as to
the media type of the image. The purpose of this attribute is to allow a user
agent to ignore images of media types it does not support.</p>
   <h2 class="heading settled" data-level="9" id="the-mediapositionstate-dictionary"><span class="secno">9. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dictdef-mediapositionstate" id="ref-for-dictdef-mediapositionstate②">MediaPositionState</a></code> dictionary</span><a class="self-link" href="#the-mediapositionstate-dictionary"></a></h2>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-mediapositionstate"><code><c- g>MediaPositionState</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="double" href="#dom-mediapositionstate-duration" id="ref-for-dom-mediapositionstate-duration③"><c- g>duration</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="double" href="#dom-mediapositionstate-playbackrate" id="ref-for-dom-mediapositionstate-playbackrate②"><c- g>playbackRate</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②"><c- b>double</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="double" href="#dom-mediapositionstate-position" id="ref-for-dom-mediapositionstate-position②"><c- g>position</c-></a>;
};
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#dictdef-mediapositionstate" id="ref-for-dictdef-mediapositionstate③">MediaPositionState</a></code> dictionary is a representation of the current
playback position associated with a <code class="idl"><a data-link-type="idl" href="#mediasession" id="ref-for-mediasession②①">MediaSession</a></code> that can be used by user
agents to provide a user interface that displays the current playback position
and duration.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaPositionState" data-dfn-type="dict-member" data-export id="dom-mediapositionstate-duration"><code>duration</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member③">dictionary
member</a> is used to specify the <a data-link-type="dfn" href="#duration" id="ref-for-duration③">duration</a> in seconds. It should always be positive
and positive infinity can be used to indicate media without a defined end such
as live playback.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaPositionState" data-dfn-type="dict-member" data-export id="dom-mediapositionstate-playbackrate"><code>playbackRate</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member④">dictionary
member</a> is used to specify the <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate①">playback rate</a>. It can be positive to represent
forward playback or negative to represent backwards playback. It should not be
zero.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaPositionState" data-dfn-type="dict-member" data-export id="dom-mediapositionstate-position"><code>position</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member⑤">dictionary
member</a> is used to specify the <a data-link-type="dfn" href="#last-reported-playback-position" id="ref-for-last-reported-playback-position①">last reported playback position</a> in seconds. It
should always be positive.</p>
   <h2 class="heading settled" data-level="10" id="the-mediasessionactiondetails-dictionary"><span class="secno">10. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dictdef-mediasessionactiondetails" id="ref-for-dictdef-mediasessionactiondetails②">MediaSessionActionDetails</a></code> dictionary</span><a class="self-link" href="#the-mediasessionactiondetails-dictionary"></a></h2>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-mediasessionactiondetails"><code><c- g>MediaSessionActionDetails</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-mediasessionaction" id="ref-for-enumdef-mediasessionaction②"><c- n>MediaSessionAction</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="MediaSessionAction" href="#dom-mediasessionactiondetails-action" id="ref-for-dom-mediasessionactiondetails-action"><c- g>action</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double③"><c- b>double</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="double?" href="#dom-mediasessionactiondetails-seekoffset" id="ref-for-dom-mediasessionactiondetails-seekoffset"><c- g>seekOffset</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double④"><c- b>double</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="double?" href="#dom-mediasessionactiondetails-seektime" id="ref-for-dom-mediasessionactiondetails-seektime"><c- g>seekTime</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="boolean?" href="#dom-mediasessionactiondetails-fastseek" id="ref-for-dom-mediasessionactiondetails-fastseek"><c- g>fastSeek</c-></a>;
};
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#callbackdef-mediasessionactionhandler" id="ref-for-callbackdef-mediasessionactionhandler④">MediaSessionActionHandler</a></code> MUST be run with the <var>details</var> parameter which is represented by a dictionary inherited from <code class="idl"><a data-link-type="idl" href="#dictdef-mediasessionactiondetails" id="ref-for-dictdef-mediasessionactiondetails③">MediaSessionActionDetails</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionActionDetails" data-dfn-type="dict-member" data-export id="dom-mediasessionactiondetails-action"><code>action</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member⑥">dictionary
member</a> is used to specify the <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action⑨">media session action</a> that the <code class="idl"><a data-link-type="idl" href="#callbackdef-mediasessionactionhandler" id="ref-for-callbackdef-mediasessionactionhandler⑤">MediaSessionActionHandler</a></code> is associated with.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionActionDetails" data-dfn-type="dict-member" data-export id="dom-mediasessionactiondetails-seekoffset"><code>seekOffset</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member⑦">dictionary member</a> MAY be provided when the <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action①⓪">media session action</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekbackward" id="ref-for-dom-mediasessionaction-seekbackward①">seekbackward</a> or <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekforward" id="ref-for-dom-mediasessionaction-seekforward①">seekforward</a>. It is the time in seconds
to move the playback time by. If it is not provided then the site should choose
a sensible time (e.g. a few seconds).</p>
   <p>When the <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action①①">media session action</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekto" id="ref-for-dom-mediasessionaction-seekto①">seekto</a>:</p>
   <ul>
    <li> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionActionDetails" data-dfn-type="dict-member" data-export id="dom-mediasessionactiondetails-seektime"><code>seekTime</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member⑧">dictionary member</a> MUST be provided and is the time in seconds to
    move the playback time to. 
    <li> The <dfn class="dfn-paneled idl-code" data-dfn-for="MediaSessionActionDetails" data-dfn-type="dict-member" data-export id="dom-mediasessionactiondetails-fastseek"><code>fastSeek</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member⑨">dictionary member</a> MAY be provided and will be true if the <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action①②">action</a> is being called multiple times
    as part of a sequence and this is not the last call in that sequence. 
   </ul>
   <h2 class="heading settled" data-level="11" id="examples"><span class="secno">11. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <div class="example" id="example-setting-metadata">
    <a class="self-link" href="#example-setting-metadata"></a> Setting <a data-link-type="dfn" href="#mediasession-metadata" id="ref-for-mediasession-metadata⑤">metadata</a>: 
<pre class="lang-javascript highlight">navigator<c- p>.</c->mediaSession<c- p>.</c->metadata <c- o>=</c-> <c- ow>new</c-> MediaMetadata<c- p>({</c->
  title<c- o>:</c-> <c- u>"Episode Title"</c-><c- p>,</c->
  artist<c- o>:</c-> <c- u>"Podcast Host"</c-><c- p>,</c->
  album<c- o>:</c-> <c- u>"Podcast Title"</c-><c- p>,</c->
  artwork<c- o>:</c-> <c- p>[{</c->src<c- o>:</c-> <c- u>"podcast.jpg"</c-><c- p>}]</c->
<c- p>});</c->
</pre>
    <p>Alternatively, providing multiple <a data-link-type="dfn" href="#mediametadata-artwork-images" id="ref-for-mediametadata-artwork-images⑦" title="artwork
  image">artwork images</a> in the metadata can let the user agent be able to
  select different artwork images for different display purposes and better fit
  for different screens:</p>
<pre class="lang-javascript highlight">navigator<c- p>.</c->mediaSession<c- p>.</c->metadata <c- o>=</c-> <c- ow>new</c-> MediaMetadata<c- p>({</c->
  title<c- o>:</c-> <c- u>"Episode Title"</c-><c- p>,</c->
  artist<c- o>:</c-> <c- u>"Podcast Host"</c-><c- p>,</c->
  album<c- o>:</c-> <c- u>"Podcast Title"</c-><c- p>,</c->
  artwork<c- o>:</c-> <c- p>[</c->
    <c- p>{</c->src<c- o>:</c-> <c- u>"podcast.jpg"</c-><c- p>,</c-> sizes<c- o>:</c-> <c- u>"128x128"</c-><c- p>,</c-> type<c- o>:</c-> <c- u>"image/jpeg"</c-><c- p>},</c->
    <c- p>{</c->src<c- o>:</c-> <c- u>"podcast_hd.jpg"</c-><c- p>,</c-> sizes<c- o>:</c-> <c- u>"256x256"</c-><c- p>},</c->
    <c- p>{</c->src<c- o>:</c-> <c- u>"podcast_xhd.jpg"</c-><c- p>,</c-> sizes<c- o>:</c-> <c- u>"1024x1024"</c-><c- p>,</c-> type<c- o>:</c-> <c- u>"image/jpeg"</c-><c- p>},</c->
    <c- p>{</c->src<c- o>:</c-> <c- u>"podcast.png"</c-><c- p>,</c-> sizes<c- o>:</c-> <c- u>"128x128"</c-><c- p>,</c-> type<c- o>:</c-> <c- u>"image/png"</c-><c- p>},</c->
    <c- p>{</c->src<c- o>:</c-> <c- u>"podcast_hd.png"</c-><c- p>,</c-> sizes<c- o>:</c-> <c- u>"256x256"</c-><c- p>,</c-> type<c- o>:</c-> <c- u>"image/png"</c-><c- p>},</c->
    <c- p>{</c->src<c- o>:</c-> <c- u>"podcast.ico"</c-><c- p>,</c-> sizes<c- o>:</c-> <c- u>"128x128 256x256"</c-><c- p>,</c-> type<c- o>:</c-> <c- u>"image/x-icon"</c-><c- p>}</c->
  <c- p>]</c->
<c- p>});</c->
</pre>
    <p>For example, if the user agent wants to use an image as icon, it may choose <code>"podcast.jpg"</code> or <code>"podcast.png"</code> for a
  low-pixel-density screen, and <code>"podcast_hd.jpg"</code> or <code>"podcast_hd.png"</code> for a high-pixel-density screen. If the user
  agent wants to use an image for lockscreen background, <code>"podcast_xhd.jpg"</code> will be preferred.</p>
   </div>
   <div class="example" id="example-changing-metadata">
    <a class="self-link" href="#example-changing-metadata"></a> Changing <a data-link-type="dfn" href="#mediasession-metadata" id="ref-for-mediasession-metadata⑥">metadata</a>: 
    <p>For playlists or chapters of an audio book, multiple <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#media-element" id="ref-for-media-element">media elements</a> can
  share a single <a data-link-type="dfn" href="#mediametadata-media-session" id="ref-for-mediametadata-media-session⑤">media session</a>.</p>
<pre class="lang-javascript highlight"><c- a>var</c-> audio1 <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"audio"</c-><c- p>);</c->
audio1<c- p>.</c->src <c- o>=</c-> <c- u>"chapter1.mp3"</c-><c- p>;</c->

<c- a>var</c-> audio2 <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"audio"</c-><c- p>);</c->
audio2<c- p>.</c->src <c- o>=</c-> <c- u>"chapter2.mp3"</c-><c- p>;</c->

audio1<c- p>.</c->play<c- p>();</c->
audio1<c- p>.</c->addEventListener<c- p>(</c-><c- u>"ended"</c-><c- p>,</c-> <c- a>function</c-><c- p>()</c-> <c- p>{</c->
  audio2<c- p>.</c->play<c- p>();</c->
<c- p>});</c->
</pre>
    <p>Because the session is shared, the metadata must be updated to reflect what is
  currently playing.</p>
<pre class="lang-javascript highlight"><c- a>function</c-> updateMetadata<c- p>(</c->event<c- p>)</c-> <c- p>{</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->metadata <c- o>=</c-> <c- ow>new</c-> MediaMetadata<c- p>({</c->
    title<c- o>:</c-> event<c- p>.</c->target <c- o>==</c-> audio1 <c- o>?</c-> <c- u>"Chapter 1"</c-> <c- o>:</c-> <c- u>"Chapter 2"</c-><c- p>,</c->
    artist<c- o>:</c-> <c- u>"An Author"</c-><c- p>,</c->
    album<c- o>:</c-> <c- u>"A Book"</c-><c- p>,</c->
    artwork<c- o>:</c-> <c- p>[{</c->src<c- o>:</c-> <c- u>"cover.jpg"</c-><c- p>}]</c->
  <c- p>});</c->
<c- p>}</c->

audio1<c- p>.</c->addEventListener<c- p>(</c-><c- u>"play"</c-><c- p>,</c-> updateMetadata<c- p>);</c->
audio2<c- p>.</c->addEventListener<c- p>(</c-><c- u>"play"</c-><c- p>,</c-> updateMetadata<c- p>);</c->
</pre>
   </div>
   <div class="example" id="example-media-session-actions">
    <a class="self-link" href="#example-media-session-actions"></a> Handling <a data-link-type="dfn" href="#media-session-action" id="ref-for-media-session-action①③">media session actions</a>: 
<pre class="lang-javascript highlight"><c- a>var</c-> tracks <c- o>=</c-> <c- p>[</c-><c- u>"chapter1.mp3"</c-><c- p>,</c-> <c- u>"chapter2.mp3"</c-><c- p>,</c-> <c- u>"chapter3.mp3"</c-><c- p>];</c->
<c- a>var</c-> trackId <c- o>=</c-> <c- mf>0</c-><c- p>;</c->

<c- a>var</c-> audio <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"audio"</c-><c- p>);</c->
audio<c- p>.</c->src <c- o>=</c-> tracks<c- p>[</c->trackId<c- p>];</c->

<c- a>function</c-> updatePlayingMedia<c- p>()</c-> <c- p>{</c->
  audio<c- p>.</c->src <c- o>=</c-> tracks<c- p>[</c->trackId<c- p>];</c->
  <c- c1>// Update metadata (omitted)</c->
<c- p>}</c->

navigator<c- p>.</c->mediaSession<c- p>.</c->setActionHandler<c- p>(</c-><c- u>"previoustrack"</c-><c- p>,</c-> <c- a>function</c-><c- p>()</c-> <c- p>{</c->
  trackId <c- o>=</c-> <c- p>(</c->trackId <c- o>+</c-> tracks<c- p>.</c->length <c- o>-</c-> <c- mf>1</c-><c- p>)</c-> <c- o>%</c-> tracks<c- p>.</c->length<c- p>;</c->
  updatePlayingMedia<c- p>();</c->
<c- p>});</c->

navigator<c- p>.</c->mediaSession<c- p>.</c->setActionHandler<c- p>(</c-><c- u>"nexttrack"</c-><c- p>,</c-> <c- a>function</c-><c- p>()</c-> <c- p>{</c->
  trackId <c- o>=</c-> <c- p>(</c->trackId <c- o>+</c-> <c- mf>1</c-><c- p>)</c-> <c- o>%</c-> tracks<c- p>.</c->length<c- p>;</c->
  updatePlayingMedia<c- p>();</c->
<c- p>});</c->

navigator<c- p>.</c->mediaSession<c- p>.</c->setActionHandler<c- p>(</c-><c- u>"seekto"</c-><c- p>,</c-> <c- a>function</c-><c- p>(</c->details<c- p>)</c-> <c- p>{</c->
  audio<c- p>.</c->currentTime <c- o>=</c-> details<c- p>.</c->seekTime<c- p>;</c->
<c- p>});</c->
</pre>
   </div>
   <div class="example" id="example-set-playbackState">
    <a class="self-link" href="#example-set-playbackState"></a> Setting <code class="idl"><a data-link-type="idl" href="#dom-mediasession-playbackstate" id="ref-for-dom-mediasession-playbackstate⑦">playbackState</a></code>: 
    <p>When a page pauses its media and plays a third-party ad in an iframe, the UA
  might consider the session as "not playing", however the page wants to allow
  the user to pause the ad playback and cancel the pending playback after the ad
  finishes.</p>
<pre class="lang-javascript highlight"><c- a>var</c-> adFrame<c- p>;</c->
<c- a>var</c-> audio <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"audio"</c-><c- p>);</c->
audio<c- p>.</c->src <c- o>=</c-> <c- u>"foo.mp3"</c-><c- p>;</c->

<c- a>function</c-> resetActionHandlers<c- p>()</c-> <c- p>{</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->setActionHandler<c- p>(</c-><c- u>"play"</c-><c- p>,</c-> _ <c- p>=></c-> audio<c- p>.</c->play<c- p>());</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->setActionHandler<c- p>(</c-><c- u>"pause"</c-><c- p>,</c-> _ <c- p>=></c-> audio<c- p>.</c->pause<c- p>());</c->
<c- p>}</c->

resetActionHandlers<c- p>();</c->

<c- c1>// This method will be called when the page wants to play some ad.</c->
<c- a>function</c-> pauseAudioAndPlayAd<c- p>()</c-> <c- p>{</c->
  audio<c- p>.</c->pause<c- p>();</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->playbackState <c- o>=</c-> <c- u>"playing"</c-><c- p>;</c->
  setUpAdFrame<c- p>();</c->
  adFrame<c- p>.</c->contentWindow<c- p>.</c->postMessage<c- p>(</c-><c- u>"play_ad"</c-><c- p>);</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->setActionHandler<c- p>(</c-><c- u>"pause"</c-><c- p>,</c-> pauseAd<c- p>);</c->
<c- p>}</c->

<c- a>function</c-> pauseAd<c- p>()</c-> <c- p>{</c->
  adFrame<c- p>.</c->contentWindow<c- p>.</c->postMessage<c- p>(</c-><c- u>"pause_ad"</c-><c- p>);</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->playbackState <c- o>=</c-> <c- u>"paused"</c-><c- p>;</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->setActionHandler<c- p>(</c-><c- u>"play"</c-><c- p>,</c-> resumeAd<c- p>);</c->
<c- p>}</c->

<c- a>function</c-> resumeAd<c- p>()</c-> <c- p>{</c->
  adFrame<c- p>.</c->contentWindow<c- p>.</c->postMessage<c- p>(</c-><c- u>"resume_ad"</c-><c- p>);</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->playbackState <c- o>=</c-> <c- u>"playing"</c-><c- p>;</c->
  navigator<c- p>.</c->mediaSession<c- p>.</c->setActionHandler<c- p>(</c-><c- u>"pause"</c-><c- p>,</c-> pauseAd<c- p>);</c->
<c- p>}</c->

window<c- p>.</c->onmessage <c- o>=</c-> <c- a>function</c-><c- p>(</c->e<c- p>)</c-> <c- p>{</c->
  <c- k>if</c-> <c- p>(</c->e<c- p>.</c->data <c- o>===</c-> <c- u>"ad finished"</c-><c- p>)</c-> <c- p>{</c->
    removeAdFrame<c- p>();</c->
    navigator<c- p>.</c->mediaSession<c- p>.</c->playbackState <c- o>=</c-> <c- u>"none"</c-><c- p>;</c->
    resetActionHandlers<c- p>();</c->
  <c- p>}</c->
<c- p>}</c->

<c- a>function</c-> setUpAdFrame<c- p>()</c-> <c- p>{</c->
  adFrame <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"iframe"</c-><c- p>);</c->
  adFrame<c- p>.</c->src <c- o>=</c-> <c- u>"https://example.com/ad-iframe.html"</c-><c- p>;</c->
  document<c- p>.</c->body<c- p>.</c->appendChild<c- p>(</c->adFrame<c- p>);</c->
<c- p>}</c->

<c- a>function</c-> removeAdFrame<c- p>()</c-> <c- p>{</c->
  adFrame<c- p>.</c->remove<c- p>();</c->
<c- p>}</c->
</pre>
   </div>
   <div class="example" id="example-media-position-state">
    <a class="self-link" href="#example-media-position-state"></a> Setting <a data-link-type="dfn" href="#position-state①" id="ref-for-position-state①⑥">position state</a>: 
<pre class="lang-javascript highlight"><c- c1>// Media is loaded, set the duration.</c->
navigator<c- p>.</c->mediaSession<c- p>.</c->setPositionState<c- p>({</c->
  duration<c- o>:</c-> <c- mf>60</c->
<c- p>});</c->

<c- c1>// Media starts playing at the beginning.</c->
navigator<c- p>.</c->mediaSession<c- p>.</c->playbackState <c- o>=</c-> <c- u>"playing"</c-><c- p>;</c->

<c- c1>// Media starts playing at 2x 10 seconds in.</c->
navigator<c- p>.</c->mediaSession<c- p>.</c->setPositionState<c- p>({</c->
  duration<c- o>:</c-> <c- mf>60</c-><c- p>,</c->
  playbackRate<c- o>:</c-> <c- mf>2</c-><c- p>,</c->
  position<c- o>:</c-> <c- mf>10</c->
<c- p>});</c->

<c- c1>// Media is paused.</c->
navigator<c- p>.</c->mediaSession<c- p>.</c->playbackState <c- o>=</c-> <c- u>"paused"</c-><c- p>;</c->

<c- c1>// Media is reset.</c->
navigator<c- p>.</c->mediaSession<c- p>.</c->setPositionState<c- p>(</c-><c- kc>null</c-><c- p>);</c->
</pre>
   </div>
   <h2 class="no-num heading settled" id="acknowledgments"><span class="content">Acknowledgments</span><a class="self-link" href="#acknowledgments"></a></h2>
   <p>The editors would like to thank Paul Adenot, Jake Archibald, Tab Atkins,
Jonathan Bailey, François Beaufort, Marcos Caceres, Domenic Denicola, Ralph
Giles, Anne van Kesteren, Tobie Langel, Michael Mahemoff, Jer Noble, Elliott
Sprehn, Chris Wilson, and Jörn Zaefferer for their participation in technical
discussions that ultimately made this specification possible.</p>
   <p>Special thanks go to Philip Jägenstedt and David Vest for their help in
designing every aspect of media sessions and for their seemingly infinite
patience in working through the initial design issues; Jer Noble for his help in
building a model that also works well within the iOS audio focus model; and
Mounir Lamouri and Anton Vayvod for their early involvement, feedback and
support in making this specification happen.</p>
   <script id="head" src="https://resources.whatwg.org/dfn.js"></script>
  </main>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-mediasessionactiondetails-action">action</a><span>, in § 10</span>
   <li><a href="#active-media-session">active media session</a><span>, in § 5.2</span>
   <li><a href="#actual-playback-rate">actual playback rate</a><span>, in § 5.5</span>
   <li><a href="#actual-playback-state">actual playback state</a><span>, in § 5.1</span>
   <li>
    album
    <ul>
     <li><a href="#dom-mediametadata-album">attribute for MediaMetadata</a><span>, in § 7</span>
     <li><a href="#mediametadata-album">dfn for MediaMetadata</a><span>, in § 7</span>
     <li><a href="#dom-mediametadatainit-album">dict-member for MediaMetadataInit</a><span>, in § 7</span>
    </ul>
   <li>
    artist
    <ul>
     <li><a href="#dom-mediametadata-artist">attribute for MediaMetadata</a><span>, in § 7</span>
     <li><a href="#mediametadata-artist">dfn for MediaMetadata</a><span>, in § 7</span>
     <li><a href="#dom-mediametadatainit-artist">dict-member for MediaMetadataInit</a><span>, in § 7</span>
    </ul>
   <li>
    artwork
    <ul>
     <li><a href="#dom-mediametadata-artwork">attribute for MediaMetadata</a><span>, in § 7</span>
     <li><a href="#dom-mediametadatainit-artwork">dict-member for MediaMetadataInit</a><span>, in § 7</span>
    </ul>
   <li><a href="#mediametadata-artwork-images">artwork images</a><span>, in § 7</span>
   <li><a href="#audio-focus">audio focus</a><span>, in § 5.2</span>
   <li><a href="#dom-mediametadata-mediametadata">constructor()</a><span>, in § 7</span>
   <li><a href="#dom-mediametadata-mediametadata">constructor(init)</a><span>, in § 7</span>
   <li><a href="#convert-artwork-algorithm">convert artwork algorithm</a><span>, in § 7</span>
   <li><a href="#current-playback-position">current playback position</a><span>, in § 5.5</span>
   <li><a href="#declared-playback-state">declared playback state</a><span>, in § 6</span>
   <li>
    duration
    <ul>
     <li><a href="#duration">definition of</a><span>, in § 5.5</span>
     <li><a href="#dom-mediapositionstate-duration">dict-member for MediaPositionState</a><span>, in § 9</span>
    </ul>
   <li><a href="#empty-metadata">empty metadata</a><span>, in § 7</span>
   <li><a href="#dom-mediasessionactiondetails-fastseek">fastSeek</a><span>, in § 10</span>
   <li><a href="#fetch-image-algorithm">fetch image algorithm</a><span>, in § 5.3</span>
   <li><a href="#guessed-playback-state">guessed playback state</a><span>, in § 5.1</span>
   <li><a href="#handle-media-session-action">handle media session action</a><span>, in § 5.4</span>
   <li><a href="#last-position-updated-time">last position updated time</a><span>, in § 5.5</span>
   <li><a href="#last-reported-playback-position">last reported playback position</a><span>, in § 5.5</span>
   <li><a href="#dictdef-mediaimage">MediaImage</a><span>, in § 8</span>
   <li><a href="#mediametadata">MediaMetadata</a><span>, in § 7</span>
   <li><a href="#dom-mediametadata-mediametadata">MediaMetadata()</a><span>, in § 7</span>
   <li><a href="#dom-mediametadata-mediametadata">MediaMetadata(init)</a><span>, in § 7</span>
   <li><a href="#dictdef-mediametadatainit">MediaMetadataInit</a><span>, in § 7</span>
   <li><a href="#dictdef-mediapositionstate">MediaPositionState</a><span>, in § 9</span>
   <li><a href="#mediametadata-media-session">media session</a><span>, in § 7</span>
   <li><a href="#mediasession">MediaSession</a><span>, in § 6</span>
   <li><a href="#dom-navigator-mediasession">mediaSession</a><span>, in § 6</span>
   <li><a href="#media-session-action">media session action</a><span>, in § 5.4</span>
   <li><a href="#enumdef-mediasessionaction">MediaSessionAction</a><span>, in § 6</span>
   <li><a href="#dictdef-mediasessionactiondetails">MediaSessionActionDetails</a><span>, in § 10</span>
   <li><a href="#callbackdef-mediasessionactionhandler">MediaSessionActionHandler</a><span>, in § 6</span>
   <li><a href="#media-session-action-source">media session action source</a><span>, in § 5.4</span>
   <li><a href="#media-session-actions-update-algorithm">media session actions update algorithm</a><span>, in § 5.4</span>
   <li><a href="#enumdef-mediasessionplaybackstate">MediaSessionPlaybackState</a><span>, in § 6</span>
   <li>
    metadata
    <ul>
     <li><a href="#dom-mediasession-metadata">attribute for MediaSession</a><span>, in § 6</span>
     <li><a href="#mediasession-metadata">dfn for MediaSession</a><span>, in § 6</span>
    </ul>
   <li><a href="#dom-mediasessionaction-nexttrack">"nexttrack"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-nexttrack">nexttrack</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionplaybackstate-none">"none"</a><span>, in § 6</span>
   <li><a href="#dom-mediasessionplaybackstate-none">none</a><span>, in § 6</span>
   <li><a href="#dom-mediasessionaction-pause">"pause"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-pause">pause</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionplaybackstate-paused">"paused"</a><span>, in § 6</span>
   <li><a href="#dom-mediasessionplaybackstate-paused">paused</a><span>, in § 6</span>
   <li><a href="#dom-mediasessionaction-play">"play"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-play">play</a><span>, in § 5.4</span>
   <li><a href="#playback-rate">playback rate</a><span>, in § 5.5</span>
   <li><a href="#dom-mediapositionstate-playbackrate">playbackRate</a><span>, in § 9</span>
   <li><a href="#dom-mediasession-playbackstate">playbackState</a><span>, in § 6</span>
   <li><a href="#dom-mediasessionplaybackstate-playing">"playing"</a><span>, in § 6</span>
   <li><a href="#dom-mediasessionplaybackstate-playing">playing</a><span>, in § 6</span>
   <li><a href="#dom-mediapositionstate-position">position</a><span>, in § 9</span>
   <li><a href="#position-state①">position state</a><span>, in § 5.5</span>
   <li><a href="#preferred-artwork-image">preferred artwork image</a><span>, in § 5.3</span>
   <li><a href="#dom-mediasessionaction-previoustrack">"previoustrack"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-previoustrack">previoustrack</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-seekbackward">"seekbackward"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-seekbackward">seekbackward</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-seekforward">"seekforward"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-seekforward">seekforward</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionactiondetails-seekoffset">seekOffset</a><span>, in § 10</span>
   <li><a href="#dom-mediasessionactiondetails-seektime">seekTime</a><span>, in § 10</span>
   <li><a href="#dom-mediasessionaction-seekto">"seekto"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-seekto">seekto</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasession-setactionhandler">setActionHandler(action, handler)</a><span>, in § 6</span>
   <li><a href="#dom-mediasession-setpositionstate">setPositionState()</a><span>, in § 6</span>
   <li><a href="#dom-mediasession-setpositionstate">setPositionState(state)</a><span>, in § 6</span>
   <li><a href="#dom-mediaimage-sizes">sizes</a><span>, in § 8</span>
   <li><a href="#dom-mediasessionaction-skipad">"skipad"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-skipad">skipad</a><span>, in § 5.4</span>
   <li><a href="#mediaimage-source">source</a><span>, in § 8</span>
   <li><a href="#dom-mediaimage-src">src</a><span>, in § 8</span>
   <li><a href="#dom-mediasessionaction-stop">"stop"</a><span>, in § 5.4</span>
   <li><a href="#dom-mediasessionaction-stop">stop</a><span>, in § 5.4</span>
   <li><a href="#supported-media-session-actions">supported media session actions</a><span>, in § 5.4</span>
   <li>
    title
    <ul>
     <li><a href="#dom-mediametadata-title">attribute for MediaMetadata</a><span>, in § 7</span>
     <li><a href="#mediametadata-title">dfn for MediaMetadata</a><span>, in § 7</span>
     <li><a href="#dom-mediametadatainit-title">dict-member for MediaMetadataInit</a><span>, in § 7</span>
    </ul>
   <li><a href="#dom-mediaimage-type">type</a><span>, in § 8</span>
   <li><a href="#update-action-handler-algorithm">update action handler algorithm</a><span>, in § 5.4</span>
   <li><a href="#update-metadata-algorithm">update metadata algorithm</a><span>, in § 5.3</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[AppManifest]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a7f76b2d">imageresource</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a33db89a">fetch</span>
     <li><span class="dfn-paneled" id="9a95489b">internal response</span>
     <li><span class="dfn-paneled" id="ee7bba09">response</span>
     <li><span class="dfn-paneled" id="41923559">response type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="be0c27b2">Navigator</span>
     <li><span class="dfn-paneled" id="36d15a6d">activation notification</span>
     <li><span class="dfn-paneled" id="faf954d6">browsing context</span>
     <li><span class="dfn-paneled" id="d9aeb25e">entry settings object</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="6cfa013d">link</span>
     <li><span class="dfn-paneled" id="03499e48">media element</span>
     <li><span class="dfn-paneled" id="655fdd86">muted</span>
     <li><span class="dfn-paneled" id="049e907d">potentially playing</span>
     <li><span class="dfn-paneled" id="9a517a7d">queue a task</span>
     <li><span class="dfn-paneled" id="d75a73db">sizes</span>
     <li><span class="dfn-paneled" id="ae2a6342">top-level browsing context</span>
     <li><span class="dfn-paneled" id="16cfba2b">unordered set of unique space-separated tokens</span>
    </ul>
   <li>
    <a data-link-type="biblio">[I18N-GLOSSARY]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="86c3e5ca">case-sensitive</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7f9469b5">ascii case-insensitive</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MIMESNIFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="16785ec4">mime type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ca3ca4ae">url parser</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="dcf5fafa">FrozenArray</span>
     <li><span class="dfn-paneled" id="a5c91173">SameObject</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="1641b9ef">create a frozen array</span>
     <li><span class="dfn-paneled" id="6d8611a2">dictionary members</span>
     <li><span class="dfn-paneled" id="8c800cdf">double</span>
     <li><span class="dfn-paneled" id="5a2f390d">freeze</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-i18n-glossary">[I18N-GLOSSARY]
   <dd>Richard Ishida; Addison Phillips. <a href="https://w3c.github.io/i18n-glossary/"><cite>Internationalization Glossary</cite></a>. URL: <a href="https://w3c.github.io/i18n-glossary/">https://w3c.github.io/i18n-glossary/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-mimesniff">[MIMESNIFF]
   <dd>Gordon P. Hemsley. <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Living Standard. URL: <a href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-appmanifest">[AppManifest]
   <dd>Marcos Caceres; et al. <a href="https://w3c.github.io/manifest/"><cite>Web Application Manifest</cite></a>. URL: <a href="https://w3c.github.io/manifest/">https://w3c.github.io/manifest/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"><c- g>Navigator</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#mediasession"><c- n>MediaSession</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="MediaSession" href="#dom-navigator-mediasession"><c- g>mediaSession</c-></a>;
};

<c- b>enum</c-> <a href="#enumdef-mediasessionplaybackstate"><code><c- g>MediaSessionPlaybackState</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-none"><c- s>"none"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-paused"><c- s>"paused"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionplaybackstate-playing"><c- s>"playing"</c-></a>
};

<c- b>enum</c-> <a href="#enumdef-mediasessionaction"><code><c- g>MediaSessionAction</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-play"><c- s>"play"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-pause"><c- s>"pause"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekbackward"><c- s>"seekbackward"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekforward"><c- s>"seekforward"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-previoustrack"><c- s>"previoustrack"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-nexttrack"><c- s>"nexttrack"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-skipad"><c- s>"skipad"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-stop"><c- s>"stop"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-mediasessionaction-seekto"><c- s>"seekto"</c-></a>
};

<c- b>callback</c-> <a href="#callbackdef-mediasessionactionhandler"><code><c- g>MediaSessionActionHandler</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>(<a data-link-type="idl-name" href="#dictdef-mediasessionactiondetails"><c- n>MediaSessionActionDetails</c-></a> <a href="#dom-mediasessionactionhandler-details"><code><c- g>details</c-></code></a>);

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#mediasession"><code><c- g>MediaSession</c-></code></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#mediametadata"><c- n>MediaMetadata</c-></a>? <a class="idl-code" data-link-type="attribute" data-type="MediaMetadata?" href="#dom-mediasession-metadata"><c- g>metadata</c-></a>;

  <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-mediasessionplaybackstate"><c- n>MediaSessionPlaybackState</c-></a> <a class="idl-code" data-link-type="attribute" data-type="MediaSessionPlaybackState" href="#dom-mediasession-playbackstate"><c- g>playbackState</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-mediasession-setactionhandler"><c- g>setActionHandler</c-></a>(<a data-link-type="idl-name" href="#enumdef-mediasessionaction"><c- n>MediaSessionAction</c-></a> <a href="#dom-mediasession-setactionhandler-action-handler-action"><code><c- g>action</c-></code></a>, <a data-link-type="idl-name" href="#callbackdef-mediasessionactionhandler"><c- n>MediaSessionActionHandler</c-></a>? <a href="#dom-mediasession-setactionhandler-action-handler-handler"><code><c- g>handler</c-></code></a>);

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-mediasession-setpositionstate"><c- g>setPositionState</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-mediapositionstate"><c- n>MediaPositionState</c-></a> <a href="#dom-mediasession-setpositionstate-state-state"><code><c- g>state</c-></code></a> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#mediametadata"><code><c- g>MediaMetadata</c-></code></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-mediametadata-mediametadata"><c- g>constructor</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-mediametadatainit"><c- n>MediaMetadataInit</c-></a> <a href="#dom-mediametadata-mediametadata-init-init"><code><c- g>init</c-></code></a> = {});
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-mediametadata-title"><c- g>title</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-mediametadata-artist"><c- g>artist</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-mediametadata-album"><c- g>album</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-mediaimage"><c- n>MediaImage</c-></a>> <a class="idl-code" data-link-type="attribute" data-type="FrozenArray<MediaImage>" href="#dom-mediametadata-artwork"><c- g>artwork</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-mediametadatainit"><code><c- g>MediaMetadataInit</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-default="&quot;&quot;" data-type="DOMString" href="#dom-mediametadatainit-title"><code><c- g>title</c-></code></a> = "";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-default="&quot;&quot;" data-type="DOMString" href="#dom-mediametadatainit-artist"><code><c- g>artist</c-></code></a> = "";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-default="&quot;&quot;" data-type="DOMString" href="#dom-mediametadatainit-album"><code><c- g>album</c-></code></a> = "";
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-mediaimage"><c- n>MediaImage</c-></a>> <a data-default="[]" data-type="sequence<MediaImage>" href="#dom-mediametadatainit-artwork"><code><c- g>artwork</c-></code></a> = [];
};

<c- b>dictionary</c-> <a href="#dictdef-mediaimage"><code><c- g>MediaImage</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="USVString" href="#dom-mediaimage-src"><c- g>src</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString" href="#dom-mediaimage-sizes"><c- g>sizes</c-></a> = "";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString" href="#dom-mediaimage-type"><c- g>type</c-></a> = "";
};

<c- b>dictionary</c-> <a href="#dictdef-mediapositionstate"><code><c- g>MediaPositionState</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="double" href="#dom-mediapositionstate-duration"><c- g>duration</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="double" href="#dom-mediapositionstate-playbackrate"><c- g>playbackRate</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="double" href="#dom-mediapositionstate-position"><c- g>position</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-mediasessionactiondetails"><code><c- g>MediaSessionActionDetails</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-mediasessionaction"><c- n>MediaSessionAction</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="MediaSessionAction" href="#dom-mediasessionactiondetails-action"><c- g>action</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="double?" href="#dom-mediasessionactiondetails-seekoffset"><c- g>seekOffset</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="double?" href="#dom-mediasessionactiondetails-seektime"><c- g>seekTime</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="boolean?" href="#dom-mediasessionactiondetails-fastseek"><c- g>fastSeek</c-></a>;
};

</pre>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"03499e48": {"dfnID":"03499e48","dfnText":"media element","external":true,"refSections":[{"refs":[{"id":"ref-for-media-element"}],"title":"11. Examples"}],"url":"https://html.spec.whatwg.org/multipage/media.html#media-element"},
"049e907d": {"dfnID":"049e907d","dfnText":"potentially playing","external":true,"refSections":[{"refs":[{"id":"ref-for-potentially-playing"}],"title":"5.1. Playback State"}],"url":"https://html.spec.whatwg.org/multipage/media.html#potentially-playing"},
"1641b9ef": {"dfnID":"1641b9ef","dfnText":"create a frozen array","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-create-frozen-array"}],"title":"7. The MediaMetadata interface"}],"url":"https://webidl.spec.whatwg.org/#dfn-create-frozen-array"},
"16785ec4": {"dfnID":"16785ec4","dfnText":"mime type","external":true,"refSections":[{"refs":[{"id":"ref-for-mime-type"}],"title":"8. The MediaImage dictionary"}],"url":"https://mimesniff.spec.whatwg.org/#mime-type"},
"16cfba2b": {"dfnID":"16cfba2b","dfnText":"unordered set of unique space-separated tokens","external":true,"refSections":[{"refs":[{"id":"ref-for-unordered-set-of-unique-space-separated-tokens"}],"title":"8. The MediaImage dictionary"}],"url":"https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens"},
"36d15a6d": {"dfnID":"36d15a6d","dfnText":"activation notification","external":true,"refSections":[{"refs":[{"id":"ref-for-activation-notification"}],"title":"5.4. Actions"}],"url":"https://html.spec.whatwg.org/multipage/interaction.html#activation-notification"},
"41923559": {"dfnID":"41923559","dfnText":"response type","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response-type"}],"title":"5.3. Metadata"}],"url":"https://fetch.spec.whatwg.org/#concept-response-type"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"5a2f390d": {"dfnID":"5a2f390d","dfnText":"freeze","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-object.freeze"}],"title":"7. The MediaMetadata interface"}],"url":"https://tc39.es/ecma262/#sec-object.freeze"},
"5f90bbfb": {"dfnID":"5f90bbfb","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"},{"id":"ref-for-idl-undefined\u2460"},{"id":"ref-for-idl-undefined\u2461"}],"title":"6. The MediaSession interface"}],"url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"655fdd86": {"dfnID":"655fdd86","dfnText":"muted","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-media-muted"}],"title":"5.1. Playback State"}],"url":"https://html.spec.whatwg.org/multipage/media.html#concept-media-muted"},
"6cfa013d": {"dfnID":"6cfa013d","dfnText":"link","external":true,"refSections":[{"refs":[{"id":"ref-for-the-link-element"}],"title":"8. The MediaImage dictionary"}],"url":"https://html.spec.whatwg.org/multipage/semantics.html#the-link-element"},
"6d8611a2": {"dfnID":"6d8611a2","dfnText":"dictionary members","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-dictionary-member"},{"id":"ref-for-dfn-dictionary-member\u2460"},{"id":"ref-for-dfn-dictionary-member\u2461"}],"title":"8. The MediaImage dictionary"},{"refs":[{"id":"ref-for-dfn-dictionary-member\u2462"},{"id":"ref-for-dfn-dictionary-member\u2463"},{"id":"ref-for-dfn-dictionary-member\u2464"}],"title":"9. The MediaPositionState\ndictionary"},{"refs":[{"id":"ref-for-dfn-dictionary-member\u2465"},{"id":"ref-for-dfn-dictionary-member\u2466"},{"id":"ref-for-dfn-dictionary-member\u2467"},{"id":"ref-for-dfn-dictionary-member\u2468"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"https://webidl.spec.whatwg.org/#dfn-dictionary-member"},
"7f9469b5": {"dfnID":"7f9469b5","dfnText":"ascii case-insensitive","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-case-insensitive"},{"id":"ref-for-ascii-case-insensitive\u2460"}],"title":"8. The MediaImage dictionary"}],"url":"https://infra.spec.whatwg.org/#ascii-case-insensitive"},
"82ca3efc": {"dfnID":"82ca3efc","dfnText":"TypeError","external":true,"refSections":[{"refs":[{"id":"ref-for-exceptiondef-typeerror"},{"id":"ref-for-exceptiondef-typeerror\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2462"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2463"}],"title":"7. The MediaMetadata interface"}],"url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"86c3e5ca": {"dfnID":"86c3e5ca","dfnText":"case-sensitive","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-case-sensitive"}],"title":"2. Conformance"}],"url":"https://w3c.github.io/i18n-glossary/#dfn-case-sensitive"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"},{"id":"ref-for-idl-DOMString\u2460"},{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"},{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"}],"title":"7. The MediaMetadata interface"},{"refs":[{"id":"ref-for-idl-DOMString\u2465"},{"id":"ref-for-idl-DOMString\u2466"}],"title":"8. The MediaImage dictionary"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"},{"id":"ref-for-Exposed\u2460"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-Exposed\u2461"}],"title":"7. The MediaMetadata interface"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8c800cdf": {"dfnID":"8c800cdf","dfnText":"double","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-double"},{"id":"ref-for-idl-double\u2460"},{"id":"ref-for-idl-double\u2461"}],"title":"9. The MediaPositionState\ndictionary"},{"refs":[{"id":"ref-for-idl-double\u2462"},{"id":"ref-for-idl-double\u2463"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"https://webidl.spec.whatwg.org/#idl-double"},
"9a517a7d": {"dfnID":"9a517a7d","dfnText":"queue a task","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-a-task"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-queue-a-task\u2460"}],"title":"7. The MediaMetadata interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"},
"9a95489b": {"dfnID":"9a95489b","dfnText":"internal response","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-internal-response"}],"title":"5.3. Metadata"}],"url":"https://fetch.spec.whatwg.org/#concept-internal-response"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"}],"title":"7. The MediaMetadata interface"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"a33db89a": {"dfnID":"a33db89a","dfnText":"fetch","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-fetch"}],"title":"5.3. Metadata"}],"url":"https://fetch.spec.whatwg.org/#concept-fetch"},
"a5c91173": {"dfnID":"a5c91173","dfnText":"SameObject","external":true,"refSections":[{"refs":[{"id":"ref-for-SameObject"}],"title":"6. The MediaSession interface"}],"url":"https://webidl.spec.whatwg.org/#SameObject"},
"a72449dd": {"dfnID":"a72449dd","dfnText":"in parallel","external":true,"refSections":[{"refs":[{"id":"ref-for-in-parallel"}],"title":"5.3. Metadata"},{"refs":[{"id":"ref-for-in-parallel\u2460"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-in-parallel\u2461"}],"title":"7. The MediaMetadata interface"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"a7f76b2d": {"dfnID":"a7f76b2d","dfnText":"imageresource","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-imageresource"}],"title":"8. The MediaImage dictionary"}],"url":"https://www.w3.org/TR/appmanifest/#dom-imageresource"},
"active-media-session": {"dfnID":"active-media-session","dfnText":"active media session","external":false,"refSections":[{"refs":[{"id":"ref-for-active-media-session"}],"title":"4.3. Media Session Actions"},{"refs":[{"id":"ref-for-active-media-session\u2460"},{"id":"ref-for-active-media-session\u2461"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-active-media-session\u2462"},{"id":"ref-for-active-media-session\u2463"},{"id":"ref-for-active-media-session\u2464"},{"id":"ref-for-active-media-session\u2465"}],"title":"5.2. Routing"},{"refs":[{"id":"ref-for-active-media-session\u2466"},{"id":"ref-for-active-media-session\u2467"},{"id":"ref-for-active-media-session\u2468"},{"id":"ref-for-active-media-session\u2460\u24ea"},{"id":"ref-for-active-media-session\u2460\u2460"},{"id":"ref-for-active-media-session\u2460\u2461"},{"id":"ref-for-active-media-session\u2460\u2462"},{"id":"ref-for-active-media-session\u2460\u2463"}],"title":"5.3. Metadata"},{"refs":[{"id":"ref-for-active-media-session\u2460\u2464"},{"id":"ref-for-active-media-session\u2460\u2465"},{"id":"ref-for-active-media-session\u2460\u2466"},{"id":"ref-for-active-media-session\u2460\u2467"},{"id":"ref-for-active-media-session\u2460\u2468"},{"id":"ref-for-active-media-session\u2461\u24ea"},{"id":"ref-for-active-media-session\u2461\u2460"},{"id":"ref-for-active-media-session\u2461\u2461"},{"id":"ref-for-active-media-session\u2461\u2462"},{"id":"ref-for-active-media-session\u2461\u2463"}],"title":"5.4. Actions"}],"url":"#active-media-session"},
"actual-playback-rate": {"dfnID":"actual-playback-rate","dfnText":"actual playback rate","external":false,"refSections":[{"refs":[{"id":"ref-for-actual-playback-rate"}],"title":"5.5. Position State"}],"url":"#actual-playback-rate"},
"actual-playback-state": {"dfnID":"actual-playback-state","dfnText":"actual playback state","external":false,"refSections":[{"refs":[{"id":"ref-for-actual-playback-state"},{"id":"ref-for-actual-playback-state\u2460"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-actual-playback-state\u2461"},{"id":"ref-for-actual-playback-state\u2462"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-actual-playback-state\u2463"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-actual-playback-state\u2464"}],"title":"6. The MediaSession interface"}],"url":"#actual-playback-state"},
"ae2a6342": {"dfnID":"ae2a6342","dfnText":"top-level browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-top-level-browsing-context"}],"title":"5.2. Routing"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"},
"audio-focus": {"dfnID":"audio-focus","dfnText":"audio focus","external":false,"refSections":[{"refs":[{"id":"ref-for-audio-focus"}],"title":"5.2. Routing"}],"url":"#audio-focus"},
"b0d7f3c3": {"dfnID":"b0d7f3c3","dfnText":"USVString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-USVString"}],"title":"8. The MediaImage dictionary"}],"url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"be0c27b2": {"dfnID":"be0c27b2","dfnText":"Navigator","external":true,"refSections":[{"refs":[{"id":"ref-for-navigator"},{"id":"ref-for-navigator\u2460"}],"title":"6. The MediaSession interface"}],"url":"https://html.spec.whatwg.org/multipage/system-state.html#navigator"},
"ca3ca4ae": {"dfnID":"ca3ca4ae","dfnText":"url parser","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-parser"}],"title":"7. The MediaMetadata interface"}],"url":"https://url.spec.whatwg.org/#concept-url-parser"},
"callbackdef-mediasessionactionhandler": {"dfnID":"callbackdef-mediasessionactionhandler","dfnText":"MediaSessionActionHandler","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-mediasessionactionhandler"},{"id":"ref-for-callbackdef-mediasessionactionhandler\u2460"},{"id":"ref-for-callbackdef-mediasessionactionhandler\u2461"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-callbackdef-mediasessionactionhandler\u2462"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-callbackdef-mediasessionactionhandler\u2463"},{"id":"ref-for-callbackdef-mediasessionactionhandler\u2464"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#callbackdef-mediasessionactionhandler"},
"convert-artwork-algorithm": {"dfnID":"convert-artwork-algorithm","dfnText":"convert artwork algorithm","external":false,"refSections":[{"refs":[{"id":"ref-for-convert-artwork-algorithm"},{"id":"ref-for-convert-artwork-algorithm\u2460"}],"title":"7. The MediaMetadata interface"}],"url":"#convert-artwork-algorithm"},
"current-playback-position": {"dfnID":"current-playback-position","dfnText":"current playback position","external":false,"refSections":[{"refs":[{"id":"ref-for-current-playback-position"}],"title":"5.5. Position State"}],"url":"#current-playback-position"},
"d75a73db": {"dfnID":"d75a73db","dfnText":"sizes","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-link-sizes"},{"id":"ref-for-dom-link-sizes\u2460"}],"title":"8. The MediaImage dictionary"}],"url":"https://html.spec.whatwg.org/multipage/semantics.html#dom-link-sizes"},
"d9aeb25e": {"dfnID":"d9aeb25e","dfnText":"entry settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-entry-settings-object"}],"title":"7. The MediaMetadata interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#entry-settings-object"},
"dcf5fafa": {"dfnID":"dcf5fafa","dfnText":"FrozenArray","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-frozen-array"}],"title":"7. The MediaMetadata interface"}],"url":"https://webidl.spec.whatwg.org/#idl-frozen-array"},
"declared-playback-state": {"dfnID":"declared-playback-state","dfnText":"declared playback state","external":false,"refSections":[{"refs":[{"id":"ref-for-declared-playback-state"},{"id":"ref-for-declared-playback-state\u2460"}],"title":"5.1. Playback State"}],"url":"#declared-playback-state"},
"dictdef-mediaimage": {"dfnID":"dictdef-mediaimage","dfnText":"MediaImage","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-mediaimage"},{"id":"ref-for-dictdef-mediaimage\u2460"},{"id":"ref-for-dictdef-mediaimage\u2461"},{"id":"ref-for-dictdef-mediaimage\u2462"},{"id":"ref-for-dictdef-mediaimage\u2463"},{"id":"ref-for-dictdef-mediaimage\u2464"}],"title":"7. The MediaMetadata interface"},{"refs":[{"id":"ref-for-dictdef-mediaimage\u2465"},{"id":"ref-for-dictdef-mediaimage\u2466"},{"id":"ref-for-dictdef-mediaimage\u2467"},{"id":"ref-for-dictdef-mediaimage\u2468"},{"id":"ref-for-dictdef-mediaimage\u2460\u24ea"}],"title":"8. The MediaImage dictionary"}],"url":"#dictdef-mediaimage"},
"dictdef-mediametadatainit": {"dfnID":"dictdef-mediametadatainit","dfnText":"MediaMetadataInit","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-mediametadatainit"}],"title":"7. The MediaMetadata interface"}],"url":"#dictdef-mediametadatainit"},
"dictdef-mediapositionstate": {"dfnID":"dictdef-mediapositionstate","dfnText":"MediaPositionState","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-mediapositionstate"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-dictdef-mediapositionstate\u2460"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dictdef-mediapositionstate\u2461"},{"id":"ref-for-dictdef-mediapositionstate\u2462"}],"title":"9. The MediaPositionState\ndictionary"}],"url":"#dictdef-mediapositionstate"},
"dictdef-mediasessionactiondetails": {"dfnID":"dictdef-mediasessionactiondetails","dfnText":"MediaSessionActionDetails","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-mediasessionactiondetails"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-dictdef-mediasessionactiondetails\u2460"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dictdef-mediasessionactiondetails\u2461"},{"id":"ref-for-dictdef-mediasessionactiondetails\u2462"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#dictdef-mediasessionactiondetails"},
"dom-mediaimage-sizes": {"dfnID":"dom-mediaimage-sizes","dfnText":"sizes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediaimage-sizes"},{"id":"ref-for-dom-mediaimage-sizes\u2460"},{"id":"ref-for-dom-mediaimage-sizes\u2461"},{"id":"ref-for-dom-mediaimage-sizes\u2462"}],"title":"7. The MediaMetadata interface"},{"refs":[{"id":"ref-for-dom-mediaimage-sizes\u2463"},{"id":"ref-for-dom-mediaimage-sizes\u2464"},{"id":"ref-for-dom-mediaimage-sizes\u2465"}],"title":"8. The MediaImage dictionary"}],"url":"#dom-mediaimage-sizes"},
"dom-mediaimage-src": {"dfnID":"dom-mediaimage-src","dfnText":"src","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediaimage-src"}],"title":"5.3. Metadata"},{"refs":[{"id":"ref-for-dom-mediaimage-src\u2460"},{"id":"ref-for-dom-mediaimage-src\u2461"},{"id":"ref-for-dom-mediaimage-src\u2462"},{"id":"ref-for-dom-mediaimage-src\u2463"}],"title":"7. The MediaMetadata interface"},{"refs":[{"id":"ref-for-dom-mediaimage-src\u2464"}],"title":"8. The MediaImage dictionary"}],"url":"#dom-mediaimage-src"},
"dom-mediaimage-type": {"dfnID":"dom-mediaimage-type","dfnText":"type","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediaimage-type"},{"id":"ref-for-dom-mediaimage-type\u2460"},{"id":"ref-for-dom-mediaimage-type\u2461"},{"id":"ref-for-dom-mediaimage-type\u2462"}],"title":"7. The MediaMetadata interface"},{"refs":[{"id":"ref-for-dom-mediaimage-type\u2463"}],"title":"8. The MediaImage dictionary"}],"url":"#dom-mediaimage-type"},
"dom-mediametadata-album": {"dfnID":"dom-mediametadata-album","dfnText":"album","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadata-album"},{"id":"ref-for-dom-mediametadata-album\u2460"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadata-album"},
"dom-mediametadata-artist": {"dfnID":"dom-mediametadata-artist","dfnText":"artist","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadata-artist"},{"id":"ref-for-dom-mediametadata-artist\u2460"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadata-artist"},
"dom-mediametadata-artwork": {"dfnID":"dom-mediametadata-artwork","dfnText":"artwork","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadata-artwork"},{"id":"ref-for-dom-mediametadata-artwork\u2460"}],"title":"5.3. Metadata"},{"refs":[{"id":"ref-for-dom-mediametadata-artwork\u2461"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadata-artwork"},
"dom-mediametadata-mediametadata": {"dfnID":"dom-mediametadata-mediametadata","dfnText":"MediaMetadata(init)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadata-mediametadata"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadata-mediametadata"},
"dom-mediametadata-mediametadata-init-init": {"dfnID":"dom-mediametadata-mediametadata-init-init","dfnText":"init","external":false,"refSections":[],"url":"#dom-mediametadata-mediametadata-init-init"},
"dom-mediametadata-title": {"dfnID":"dom-mediametadata-title","dfnText":"title","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadata-title"},{"id":"ref-for-dom-mediametadata-title\u2460"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadata-title"},
"dom-mediametadatainit-album": {"dfnID":"dom-mediametadatainit-album","dfnText":"album","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadatainit-album"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadatainit-album"},
"dom-mediametadatainit-artist": {"dfnID":"dom-mediametadatainit-artist","dfnText":"artist","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadatainit-artist"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadatainit-artist"},
"dom-mediametadatainit-artwork": {"dfnID":"dom-mediametadatainit-artwork","dfnText":"artwork","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadatainit-artwork"},{"id":"ref-for-dom-mediametadatainit-artwork\u2460"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadatainit-artwork"},
"dom-mediametadatainit-title": {"dfnID":"dom-mediametadatainit-title","dfnText":"title","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediametadatainit-title"}],"title":"7. The MediaMetadata interface"}],"url":"#dom-mediametadatainit-title"},
"dom-mediapositionstate-duration": {"dfnID":"dom-mediapositionstate-duration","dfnText":"duration","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediapositionstate-duration"},{"id":"ref-for-dom-mediapositionstate-duration\u2460"},{"id":"ref-for-dom-mediapositionstate-duration\u2461"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dom-mediapositionstate-duration\u2462"}],"title":"9. The MediaPositionState\ndictionary"}],"url":"#dom-mediapositionstate-duration"},
"dom-mediapositionstate-playbackrate": {"dfnID":"dom-mediapositionstate-playbackrate","dfnText":"playbackRate","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediapositionstate-playbackrate"},{"id":"ref-for-dom-mediapositionstate-playbackrate\u2460"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dom-mediapositionstate-playbackrate\u2461"}],"title":"9. The MediaPositionState\ndictionary"}],"url":"#dom-mediapositionstate-playbackrate"},
"dom-mediapositionstate-position": {"dfnID":"dom-mediapositionstate-position","dfnText":"position","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediapositionstate-position"},{"id":"ref-for-dom-mediapositionstate-position\u2460"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dom-mediapositionstate-position\u2461"}],"title":"9. The MediaPositionState\ndictionary"}],"url":"#dom-mediapositionstate-position"},
"dom-mediasession-metadata": {"dfnID":"dom-mediasession-metadata","dfnText":"metadata","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasession-metadata"},{"id":"ref-for-dom-mediasession-metadata\u2460"},{"id":"ref-for-dom-mediasession-metadata\u2461"}],"title":"5.3. Metadata"},{"refs":[{"id":"ref-for-dom-mediasession-metadata\u2462"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasession-metadata"},
"dom-mediasession-playbackstate": {"dfnID":"dom-mediasession-playbackstate","dfnText":"playbackState","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasession-playbackstate"},{"id":"ref-for-dom-mediasession-playbackstate\u2460"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-dom-mediasession-playbackstate\u2461"}],"title":"5.2. Routing"},{"refs":[{"id":"ref-for-dom-mediasession-playbackstate\u2462"},{"id":"ref-for-dom-mediasession-playbackstate\u2463"},{"id":"ref-for-dom-mediasession-playbackstate\u2464"},{"id":"ref-for-dom-mediasession-playbackstate\u2465"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dom-mediasession-playbackstate\u2466"}],"title":"11. Examples"}],"url":"#dom-mediasession-playbackstate"},
"dom-mediasession-setactionhandler": {"dfnID":"dom-mediasession-setactionhandler","dfnText":"setActionHandler(action, handler)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasession-setactionhandler"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasession-setactionhandler"},
"dom-mediasession-setactionhandler-action-handler-action": {"dfnID":"dom-mediasession-setactionhandler-action-handler-action","dfnText":"action","external":false,"refSections":[],"url":"#dom-mediasession-setactionhandler-action-handler-action"},
"dom-mediasession-setactionhandler-action-handler-handler": {"dfnID":"dom-mediasession-setactionhandler-action-handler-handler","dfnText":"handler","external":false,"refSections":[],"url":"#dom-mediasession-setactionhandler-action-handler-handler"},
"dom-mediasession-setpositionstate": {"dfnID":"dom-mediasession-setpositionstate","dfnText":"setPositionState(state)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasession-setpositionstate"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasession-setpositionstate"},
"dom-mediasession-setpositionstate-state-state": {"dfnID":"dom-mediasession-setpositionstate-state-state","dfnText":"state","external":false,"refSections":[],"url":"#dom-mediasession-setpositionstate-state-state"},
"dom-mediasessionaction-nexttrack": {"dfnID":"dom-mediasessionaction-nexttrack","dfnText":"nexttrack","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-nexttrack"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionaction-nexttrack"},
"dom-mediasessionaction-pause": {"dfnID":"dom-mediasessionaction-pause","dfnText":"pause","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-pause"},{"id":"ref-for-dom-mediasessionaction-pause\u2460"},{"id":"ref-for-dom-mediasessionaction-pause\u2461"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-dom-mediasessionaction-pause\u2462"},{"id":"ref-for-dom-mediasessionaction-pause\u2463"},{"id":"ref-for-dom-mediasessionaction-pause\u2464"},{"id":"ref-for-dom-mediasessionaction-pause\u2465"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-dom-mediasessionaction-pause\u2466"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionaction-pause"},
"dom-mediasessionaction-play": {"dfnID":"dom-mediasessionaction-play","dfnText":"play","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-play"},{"id":"ref-for-dom-mediasessionaction-play\u2460"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-dom-mediasessionaction-play\u2461"},{"id":"ref-for-dom-mediasessionaction-play\u2462"},{"id":"ref-for-dom-mediasessionaction-play\u2463"},{"id":"ref-for-dom-mediasessionaction-play\u2464"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-dom-mediasessionaction-play\u2465"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionaction-play"},
"dom-mediasessionaction-previoustrack": {"dfnID":"dom-mediasessionaction-previoustrack","dfnText":"previoustrack","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-previoustrack"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionaction-previoustrack"},
"dom-mediasessionaction-seekbackward": {"dfnID":"dom-mediasessionaction-seekbackward","dfnText":"seekbackward","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-seekbackward"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dom-mediasessionaction-seekbackward\u2460"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#dom-mediasessionaction-seekbackward"},
"dom-mediasessionaction-seekforward": {"dfnID":"dom-mediasessionaction-seekforward","dfnText":"seekforward","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-seekforward"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dom-mediasessionaction-seekforward\u2460"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#dom-mediasessionaction-seekforward"},
"dom-mediasessionaction-seekto": {"dfnID":"dom-mediasessionaction-seekto","dfnText":"seekto","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-seekto"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-dom-mediasessionaction-seekto\u2460"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#dom-mediasessionaction-seekto"},
"dom-mediasessionaction-skipad": {"dfnID":"dom-mediasessionaction-skipad","dfnText":"skipad","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-skipad"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionaction-skipad"},
"dom-mediasessionaction-stop": {"dfnID":"dom-mediasessionaction-stop","dfnText":"stop","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionaction-stop"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionaction-stop"},
"dom-mediasessionactiondetails-action": {"dfnID":"dom-mediasessionactiondetails-action","dfnText":"action","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionactiondetails-action"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#dom-mediasessionactiondetails-action"},
"dom-mediasessionactiondetails-fastseek": {"dfnID":"dom-mediasessionactiondetails-fastseek","dfnText":"fastSeek","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionactiondetails-fastseek"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#dom-mediasessionactiondetails-fastseek"},
"dom-mediasessionactiondetails-seekoffset": {"dfnID":"dom-mediasessionactiondetails-seekoffset","dfnText":"seekOffset","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionactiondetails-seekoffset"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#dom-mediasessionactiondetails-seekoffset"},
"dom-mediasessionactiondetails-seektime": {"dfnID":"dom-mediasessionactiondetails-seektime","dfnText":"seekTime","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionactiondetails-seektime"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#dom-mediasessionactiondetails-seektime"},
"dom-mediasessionactionhandler-details": {"dfnID":"dom-mediasessionactionhandler-details","dfnText":"details","external":false,"refSections":[],"url":"#dom-mediasessionactionhandler-details"},
"dom-mediasessionplaybackstate-none": {"dfnID":"dom-mediasessionplaybackstate-none","dfnText":"none","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionplaybackstate-none"},{"id":"ref-for-dom-mediasessionplaybackstate-none\u2460"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionplaybackstate-none"},
"dom-mediasessionplaybackstate-paused": {"dfnID":"dom-mediasessionplaybackstate-paused","dfnText":"paused","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionplaybackstate-paused"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-dom-mediasessionplaybackstate-paused\u2460"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-dom-mediasessionplaybackstate-paused\u2461"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionplaybackstate-paused"},
"dom-mediasessionplaybackstate-playing": {"dfnID":"dom-mediasessionplaybackstate-playing","dfnText":"playing","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-mediasessionplaybackstate-playing"},{"id":"ref-for-dom-mediasessionplaybackstate-playing\u2460"},{"id":"ref-for-dom-mediasessionplaybackstate-playing\u2461"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-dom-mediasessionplaybackstate-playing\u2462"},{"id":"ref-for-dom-mediasessionplaybackstate-playing\u2463"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-dom-mediasessionplaybackstate-playing\u2464"}],"title":"6. The MediaSession interface"}],"url":"#dom-mediasessionplaybackstate-playing"},
"dom-navigator-mediasession": {"dfnID":"dom-navigator-mediasession","dfnText":"mediaSession","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-navigator-mediasession"}],"title":"6. The MediaSession interface"}],"url":"#dom-navigator-mediasession"},
"duration": {"dfnID":"duration","dfnText":"duration","external":false,"refSections":[{"refs":[{"id":"ref-for-duration"},{"id":"ref-for-duration\u2460"},{"id":"ref-for-duration\u2461"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-duration\u2462"}],"title":"9. The MediaPositionState\ndictionary"}],"url":"#duration"},
"ee7bba09": {"dfnID":"ee7bba09","dfnText":"response","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response"},{"id":"ref-for-concept-response\u2460"}],"title":"5.3. Metadata"}],"url":"https://fetch.spec.whatwg.org/#concept-response"},
"empty-metadata": {"dfnID":"empty-metadata","dfnText":"empty metadata","external":false,"refSections":[{"refs":[{"id":"ref-for-empty-metadata"}],"title":"5.3. Metadata"}],"url":"#empty-metadata"},
"enumdef-mediasessionaction": {"dfnID":"enumdef-mediasessionaction","dfnText":"MediaSessionAction","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-mediasessionaction"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-enumdef-mediasessionaction\u2460"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-enumdef-mediasessionaction\u2461"}],"title":"10. The\nMediaSessionActionDetails dictionary"}],"url":"#enumdef-mediasessionaction"},
"enumdef-mediasessionplaybackstate": {"dfnID":"enumdef-mediasessionplaybackstate","dfnText":"MediaSessionPlaybackState","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-mediasessionplaybackstate"},{"id":"ref-for-enumdef-mediasessionplaybackstate\u2460"},{"id":"ref-for-enumdef-mediasessionplaybackstate\u2461"}],"title":"6. The MediaSession interface"}],"url":"#enumdef-mediasessionplaybackstate"},
"faf954d6": {"dfnID":"faf954d6","dfnText":"browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-browsing-context"},{"id":"ref-for-browsing-context\u2460"},{"id":"ref-for-browsing-context\u2461"},{"id":"ref-for-browsing-context\u2462"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-browsing-context\u2463"},{"id":"ref-for-browsing-context\u2464"}],"title":"5.2. Routing"},{"refs":[{"id":"ref-for-browsing-context\u2465"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-browsing-context\u2466"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-browsing-context\u2467"},{"id":"ref-for-browsing-context\u2468"},{"id":"ref-for-browsing-context\u2460\u24ea"},{"id":"ref-for-browsing-context\u2460\u2460"},{"id":"ref-for-browsing-context\u2460\u2461"},{"id":"ref-for-browsing-context\u2460\u2462"}],"title":"6. The MediaSession interface"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"},
"fetch-image-algorithm": {"dfnID":"fetch-image-algorithm","dfnText":"fetch image algorithm","external":false,"refSections":[{"refs":[{"id":"ref-for-fetch-image-algorithm"},{"id":"ref-for-fetch-image-algorithm\u2460"},{"id":"ref-for-fetch-image-algorithm\u2461"},{"id":"ref-for-fetch-image-algorithm\u2462"}],"title":"5.3. Metadata"}],"url":"#fetch-image-algorithm"},
"guessed-playback-state": {"dfnID":"guessed-playback-state","dfnText":"guessed playback state","external":false,"refSections":[{"refs":[{"id":"ref-for-guessed-playback-state"},{"id":"ref-for-guessed-playback-state\u2460"},{"id":"ref-for-guessed-playback-state\u2461"},{"id":"ref-for-guessed-playback-state\u2462"}],"title":"5.1. Playback State"}],"url":"#guessed-playback-state"},
"handle-media-session-action": {"dfnID":"handle-media-session-action","dfnText":"handle media session action","external":false,"refSections":[{"refs":[{"id":"ref-for-handle-media-session-action"}],"title":"5.4. Actions"}],"url":"#handle-media-session-action"},
"last-position-updated-time": {"dfnID":"last-position-updated-time","dfnText":"last position updated time","external":false,"refSections":[{"refs":[{"id":"ref-for-last-position-updated-time"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-last-position-updated-time\u2460"}],"title":"6. The MediaSession interface"}],"url":"#last-position-updated-time"},
"last-reported-playback-position": {"dfnID":"last-reported-playback-position","dfnText":"last reported playback position","external":false,"refSections":[{"refs":[{"id":"ref-for-last-reported-playback-position"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-last-reported-playback-position\u2460"}],"title":"9. The MediaPositionState\ndictionary"}],"url":"#last-reported-playback-position"},
"media-session-action": {"dfnID":"media-session-action","dfnText":"media session action","external":false,"refSections":[{"refs":[{"id":"ref-for-media-session-action"}],"title":"4.3. Media Session Actions"},{"refs":[{"id":"ref-for-media-session-action\u2460"},{"id":"ref-for-media-session-action\u2461"},{"id":"ref-for-media-session-action\u2462"},{"id":"ref-for-media-session-action\u2463"},{"id":"ref-for-media-session-action\u2464"},{"id":"ref-for-media-session-action\u2465"},{"id":"ref-for-media-session-action\u2466"},{"id":"ref-for-media-session-action\u2467"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-media-session-action\u2468"},{"id":"ref-for-media-session-action\u2460\u24ea"},{"id":"ref-for-media-session-action\u2460\u2460"},{"id":"ref-for-media-session-action\u2460\u2461"}],"title":"10. The\nMediaSessionActionDetails dictionary"},{"refs":[{"id":"ref-for-media-session-action\u2460\u2462"}],"title":"11. Examples"}],"url":"#media-session-action"},
"media-session-action-source": {"dfnID":"media-session-action-source","dfnText":"media session action\n      source","external":false,"refSections":[{"refs":[{"id":"ref-for-media-session-action-source"},{"id":"ref-for-media-session-action-source\u2460"},{"id":"ref-for-media-session-action-source\u2461"}],"title":"5.4. Actions"}],"url":"#media-session-action-source"},
"media-session-actions-update-algorithm": {"dfnID":"media-session-actions-update-algorithm","dfnText":"media session actions update algorithm","external":false,"refSections":[{"refs":[{"id":"ref-for-media-session-actions-update-algorithm"}],"title":"5.1. Playback State"},{"refs":[{"id":"ref-for-media-session-actions-update-algorithm\u2460"}],"title":"5.2. Routing"},{"refs":[{"id":"ref-for-media-session-actions-update-algorithm\u2461"},{"id":"ref-for-media-session-actions-update-algorithm\u2462"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-media-session-actions-update-algorithm\u2463"}],"title":"6. The MediaSession interface"}],"url":"#media-session-actions-update-algorithm"},
"mediaimage-source": {"dfnID":"mediaimage-source","dfnText":"source","external":false,"refSections":[],"url":"#mediaimage-source"},
"mediametadata": {"dfnID":"mediametadata","dfnText":"MediaMetadata","external":false,"refSections":[{"refs":[{"id":"ref-for-mediametadata"},{"id":"ref-for-mediametadata\u2460"},{"id":"ref-for-mediametadata\u2461"},{"id":"ref-for-mediametadata\u2462"},{"id":"ref-for-mediametadata\u2463"}],"title":"4.1. User interface guidelines"},{"refs":[{"id":"ref-for-mediametadata\u2464"}],"title":"4.2. Incognito mode"},{"refs":[{"id":"ref-for-mediametadata\u2465"},{"id":"ref-for-mediametadata\u2466"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-mediametadata\u2467"},{"id":"ref-for-mediametadata\u2468"},{"id":"ref-for-mediametadata\u2460\u24ea"},{"id":"ref-for-mediametadata\u2460\u2460"},{"id":"ref-for-mediametadata\u2460\u2461"},{"id":"ref-for-mediametadata\u2460\u2462"},{"id":"ref-for-mediametadata\u2460\u2463"},{"id":"ref-for-mediametadata\u2460\u2464"},{"id":"ref-for-mediametadata\u2460\u2465"},{"id":"ref-for-mediametadata\u2460\u2466"},{"id":"ref-for-mediametadata\u2460\u2467"},{"id":"ref-for-mediametadata\u2460\u2468"},{"id":"ref-for-mediametadata\u2461\u24ea"},{"id":"ref-for-mediametadata\u2461\u2460"},{"id":"ref-for-mediametadata\u2461\u2461"},{"id":"ref-for-mediametadata\u2461\u2462"},{"id":"ref-for-mediametadata\u2461\u2463"},{"id":"ref-for-mediametadata\u2461\u2464"},{"id":"ref-for-mediametadata\u2461\u2465"},{"id":"ref-for-mediametadata\u2461\u2466"}],"title":"7. The MediaMetadata interface"}],"url":"#mediametadata"},
"mediametadata-album": {"dfnID":"mediametadata-album","dfnText":"album","external":false,"refSections":[{"refs":[{"id":"ref-for-mediametadata-album"},{"id":"ref-for-mediametadata-album\u2460"},{"id":"ref-for-mediametadata-album\u2461"},{"id":"ref-for-mediametadata-album\u2462"},{"id":"ref-for-mediametadata-album\u2463"}],"title":"7. The MediaMetadata interface"}],"url":"#mediametadata-album"},
"mediametadata-artist": {"dfnID":"mediametadata-artist","dfnText":"artist","external":false,"refSections":[{"refs":[{"id":"ref-for-mediametadata-artist"},{"id":"ref-for-mediametadata-artist\u2460"},{"id":"ref-for-mediametadata-artist\u2461"},{"id":"ref-for-mediametadata-artist\u2462"},{"id":"ref-for-mediametadata-artist\u2463"}],"title":"7. The MediaMetadata interface"}],"url":"#mediametadata-artist"},
"mediametadata-artwork-images": {"dfnID":"mediametadata-artwork-images","dfnText":"artwork\n  images","external":false,"refSections":[{"refs":[{"id":"ref-for-mediametadata-artwork-images"}],"title":"5.3. Metadata"},{"refs":[{"id":"ref-for-mediametadata-artwork-images\u2460"},{"id":"ref-for-mediametadata-artwork-images\u2461"},{"id":"ref-for-mediametadata-artwork-images\u2462"},{"id":"ref-for-mediametadata-artwork-images\u2463"},{"id":"ref-for-mediametadata-artwork-images\u2464"},{"id":"ref-for-mediametadata-artwork-images\u2465"}],"title":"7. The MediaMetadata interface"},{"refs":[{"id":"ref-for-mediametadata-artwork-images\u2466"}],"title":"11. Examples"}],"url":"#mediametadata-artwork-images"},
"mediametadata-media-session": {"dfnID":"mediametadata-media-session","dfnText":"media\n  session","external":false,"refSections":[{"refs":[{"id":"ref-for-mediametadata-media-session"},{"id":"ref-for-mediametadata-media-session\u2460"},{"id":"ref-for-mediametadata-media-session\u2461"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-mediametadata-media-session\u2462"},{"id":"ref-for-mediametadata-media-session\u2463"}],"title":"7. The MediaMetadata interface"},{"refs":[{"id":"ref-for-mediametadata-media-session\u2464"}],"title":"11. Examples"}],"url":"#mediametadata-media-session"},
"mediametadata-title": {"dfnID":"mediametadata-title","dfnText":"title","external":false,"refSections":[{"refs":[{"id":"ref-for-mediametadata-title"},{"id":"ref-for-mediametadata-title\u2460"},{"id":"ref-for-mediametadata-title\u2461"},{"id":"ref-for-mediametadata-title\u2462"},{"id":"ref-for-mediametadata-title\u2463"}],"title":"7. The MediaMetadata interface"}],"url":"#mediametadata-title"},
"mediasession": {"dfnID":"mediasession","dfnText":"MediaSession","external":false,"refSections":[{"refs":[{"id":"ref-for-mediasession"},{"id":"ref-for-mediasession\u2460"},{"id":"ref-for-mediasession\u2461"}],"title":"5.2. Routing"},{"refs":[{"id":"ref-for-mediasession\u2462"},{"id":"ref-for-mediasession\u2463"},{"id":"ref-for-mediasession\u2464"},{"id":"ref-for-mediasession\u2465"},{"id":"ref-for-mediasession\u2466"}],"title":"5.4. Actions"},{"refs":[{"id":"ref-for-mediasession\u2467"},{"id":"ref-for-mediasession\u2468"},{"id":"ref-for-mediasession\u2460\u24ea"},{"id":"ref-for-mediasession\u2460\u2460"},{"id":"ref-for-mediasession\u2460\u2461"},{"id":"ref-for-mediasession\u2460\u2462"},{"id":"ref-for-mediasession\u2460\u2463"},{"id":"ref-for-mediasession\u2460\u2464"},{"id":"ref-for-mediasession\u2460\u2465"},{"id":"ref-for-mediasession\u2460\u2466"},{"id":"ref-for-mediasession\u2460\u2467"},{"id":"ref-for-mediasession\u2460\u2468"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-mediasession\u2461\u24ea"}],"title":"7. The MediaMetadata interface"},{"refs":[{"id":"ref-for-mediasession\u2461\u2460"}],"title":"9. The MediaPositionState\ndictionary"}],"url":"#mediasession"},
"mediasession-metadata": {"dfnID":"mediasession-metadata","dfnText":"metadata","external":false,"refSections":[{"refs":[{"id":"ref-for-mediasession-metadata"},{"id":"ref-for-mediasession-metadata\u2460"},{"id":"ref-for-mediasession-metadata\u2461"},{"id":"ref-for-mediasession-metadata\u2462"},{"id":"ref-for-mediasession-metadata\u2463"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-mediasession-metadata\u2464"},{"id":"ref-for-mediasession-metadata\u2465"}],"title":"11. Examples"}],"url":"#mediasession-metadata"},
"playback-rate": {"dfnID":"playback-rate","dfnText":"playback rate","external":false,"refSections":[{"refs":[{"id":"ref-for-playback-rate"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-playback-rate\u2460"}],"title":"9. The MediaPositionState\ndictionary"}],"url":"#playback-rate"},
"position-state①": {"dfnID":"position-state\u2460","dfnText":"position state","external":false,"refSections":[{"refs":[{"id":"ref-for-position-state\u2460"},{"id":"ref-for-position-state\u2460\u2460"},{"id":"ref-for-position-state\u2460\u2461"},{"id":"ref-for-position-state\u2460\u2462"}],"title":"5.5. Position State"},{"refs":[{"id":"ref-for-position-state\u2460\u2463"},{"id":"ref-for-position-state\u2460\u2464"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-position-state\u2460\u2465"}],"title":"11. Examples"}],"url":"#position-state\u2460"},
"preferred-artwork-image": {"dfnID":"preferred-artwork-image","dfnText":"preferred artwork image","external":false,"refSections":[{"refs":[{"id":"ref-for-preferred-artwork-image"}],"title":"5.3. Metadata"}],"url":"#preferred-artwork-image"},
"supported-media-session-actions": {"dfnID":"supported-media-session-actions","dfnText":"supported media session\n      actions","external":false,"refSections":[{"refs":[{"id":"ref-for-supported-media-session-actions"},{"id":"ref-for-supported-media-session-actions\u2460"},{"id":"ref-for-supported-media-session-actions\u2461"},{"id":"ref-for-supported-media-session-actions\u2462"},{"id":"ref-for-supported-media-session-actions\u2463"},{"id":"ref-for-supported-media-session-actions\u2464"}],"title":"5.4. Actions"}],"url":"#supported-media-session-actions"},
"update-action-handler-algorithm": {"dfnID":"update-action-handler-algorithm","dfnText":"update action handler algorithm","external":false,"refSections":[{"refs":[{"id":"ref-for-update-action-handler-algorithm"}],"title":"6. The MediaSession interface"}],"url":"#update-action-handler-algorithm"},
"update-metadata-algorithm": {"dfnID":"update-metadata-algorithm","dfnText":"update metadata\n    algorithm","external":false,"refSections":[{"refs":[{"id":"ref-for-update-metadata-algorithm"}],"title":"5.2. Routing"},{"refs":[{"id":"ref-for-update-metadata-algorithm\u2460"}],"title":"6. The MediaSession interface"},{"refs":[{"id":"ref-for-update-metadata-algorithm\u2461"}],"title":"7. The MediaMetadata interface"}],"url":"#update-metadata-algorithm"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#active-media-session": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"active media session","type":"dfn","url":"#active-media-session"},
"#actual-playback-rate": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"actual playback rate","type":"dfn","url":"#actual-playback-rate"},
"#actual-playback-state": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"actual playback state","type":"dfn","url":"#actual-playback-state"},
"#audio-focus": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"audio focus","type":"dfn","url":"#audio-focus"},
"#callbackdef-mediasessionactionhandler": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaSessionActionHandler","type":"callback","url":"#callbackdef-mediasessionactionhandler"},
"#convert-artwork-algorithm": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"convert artwork algorithm","type":"dfn","url":"#convert-artwork-algorithm"},
"#current-playback-position": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"current playback position","type":"dfn","url":"#current-playback-position"},
"#declared-playback-state": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"declared playback state","type":"dfn","url":"#declared-playback-state"},
"#dictdef-mediaimage": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaImage","type":"dictionary","url":"#dictdef-mediaimage"},
"#dictdef-mediametadatainit": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaMetadataInit","type":"dictionary","url":"#dictdef-mediametadatainit"},
"#dictdef-mediapositionstate": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaPositionState","type":"dictionary","url":"#dictdef-mediapositionstate"},
"#dictdef-mediasessionactiondetails": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaSessionActionDetails","type":"dictionary","url":"#dictdef-mediasessionactiondetails"},
"#dom-mediaimage-sizes": {"export":true,"for_":["MediaImage"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"sizes","type":"dict-member","url":"#dom-mediaimage-sizes"},
"#dom-mediaimage-src": {"export":true,"for_":["MediaImage"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"src","type":"dict-member","url":"#dom-mediaimage-src"},
"#dom-mediaimage-type": {"export":true,"for_":["MediaImage"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"type","type":"dict-member","url":"#dom-mediaimage-type"},
"#dom-mediametadata-album": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"album","type":"attribute","url":"#dom-mediametadata-album"},
"#dom-mediametadata-artist": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"artist","type":"attribute","url":"#dom-mediametadata-artist"},
"#dom-mediametadata-artwork": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"artwork","type":"attribute","url":"#dom-mediametadata-artwork"},
"#dom-mediametadata-mediametadata": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaMetadata(init)","type":"constructor","url":"#dom-mediametadata-mediametadata"},
"#dom-mediametadata-title": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"title","type":"attribute","url":"#dom-mediametadata-title"},
"#dom-mediametadatainit-album": {"export":true,"for_":["MediaMetadataInit"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"album","type":"dict-member","url":"#dom-mediametadatainit-album"},
"#dom-mediametadatainit-artist": {"export":true,"for_":["MediaMetadataInit"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"artist","type":"dict-member","url":"#dom-mediametadatainit-artist"},
"#dom-mediametadatainit-artwork": {"export":true,"for_":["MediaMetadataInit"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"artwork","type":"dict-member","url":"#dom-mediametadatainit-artwork"},
"#dom-mediametadatainit-title": {"export":true,"for_":["MediaMetadataInit"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"title","type":"dict-member","url":"#dom-mediametadatainit-title"},
"#dom-mediapositionstate-duration": {"export":true,"for_":["MediaPositionState"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"duration","type":"dict-member","url":"#dom-mediapositionstate-duration"},
"#dom-mediapositionstate-playbackrate": {"export":true,"for_":["MediaPositionState"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"playbackRate","type":"dict-member","url":"#dom-mediapositionstate-playbackrate"},
"#dom-mediapositionstate-position": {"export":true,"for_":["MediaPositionState"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"position","type":"dict-member","url":"#dom-mediapositionstate-position"},
"#dom-mediasession-metadata": {"export":true,"for_":["MediaSession"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"metadata","type":"attribute","url":"#dom-mediasession-metadata"},
"#dom-mediasession-playbackstate": {"export":true,"for_":["MediaSession"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"playbackState","type":"attribute","url":"#dom-mediasession-playbackstate"},
"#dom-mediasession-setactionhandler": {"export":true,"for_":["MediaSession"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"setActionHandler(action, handler)","type":"method","url":"#dom-mediasession-setactionhandler"},
"#dom-mediasession-setpositionstate": {"export":true,"for_":["MediaSession"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"setPositionState(state)","type":"method","url":"#dom-mediasession-setpositionstate"},
"#dom-mediasessionaction-nexttrack": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"\"nexttrack\"","type":"enum-value","url":"#dom-mediasessionaction-nexttrack"},
"#dom-mediasessionaction-pause": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"pause","type":"enum-value","url":"#dom-mediasessionaction-pause"},
"#dom-mediasessionaction-play": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"play","type":"enum-value","url":"#dom-mediasessionaction-play"},
"#dom-mediasessionaction-previoustrack": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"\"previoustrack\"","type":"enum-value","url":"#dom-mediasessionaction-previoustrack"},
"#dom-mediasessionaction-seekbackward": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"\"seekbackward\"","type":"enum-value","url":"#dom-mediasessionaction-seekbackward"},
"#dom-mediasessionaction-seekforward": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"\"seekforward\"","type":"enum-value","url":"#dom-mediasessionaction-seekforward"},
"#dom-mediasessionaction-seekto": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"\"seekto\"","type":"enum-value","url":"#dom-mediasessionaction-seekto"},
"#dom-mediasessionaction-skipad": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"\"skipad\"","type":"enum-value","url":"#dom-mediasessionaction-skipad"},
"#dom-mediasessionaction-stop": {"export":true,"for_":["MediaSessionAction"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"\"stop\"","type":"enum-value","url":"#dom-mediasessionaction-stop"},
"#dom-mediasessionactiondetails-action": {"export":true,"for_":["MediaSessionActionDetails"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"action","type":"dict-member","url":"#dom-mediasessionactiondetails-action"},
"#dom-mediasessionactiondetails-fastseek": {"export":true,"for_":["MediaSessionActionDetails"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"fastSeek","type":"dict-member","url":"#dom-mediasessionactiondetails-fastseek"},
"#dom-mediasessionactiondetails-seekoffset": {"export":true,"for_":["MediaSessionActionDetails"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"seekOffset","type":"dict-member","url":"#dom-mediasessionactiondetails-seekoffset"},
"#dom-mediasessionactiondetails-seektime": {"export":true,"for_":["MediaSessionActionDetails"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"seekTime","type":"dict-member","url":"#dom-mediasessionactiondetails-seektime"},
"#dom-mediasessionplaybackstate-none": {"export":true,"for_":["MediaSessionPlaybackState"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"\"none\"","type":"enum-value","url":"#dom-mediasessionplaybackstate-none"},
"#dom-mediasessionplaybackstate-paused": {"export":true,"for_":["MediaSessionPlaybackState"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"paused","type":"enum-value","url":"#dom-mediasessionplaybackstate-paused"},
"#dom-mediasessionplaybackstate-playing": {"export":true,"for_":["MediaSessionPlaybackState"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"playing","type":"enum-value","url":"#dom-mediasessionplaybackstate-playing"},
"#dom-navigator-mediasession": {"export":true,"for_":["Navigator"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"mediaSession","type":"attribute","url":"#dom-navigator-mediasession"},
"#duration": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"duration","type":"dfn","url":"#duration"},
"#empty-metadata": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"empty metadata","type":"dfn","url":"#empty-metadata"},
"#enumdef-mediasessionaction": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaSessionAction","type":"enum","url":"#enumdef-mediasessionaction"},
"#enumdef-mediasessionplaybackstate": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaSessionPlaybackState","type":"enum","url":"#enumdef-mediasessionplaybackstate"},
"#fetch-image-algorithm": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"fetch image algorithm","type":"dfn","url":"#fetch-image-algorithm"},
"#guessed-playback-state": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"guessed playback state","type":"dfn","url":"#guessed-playback-state"},
"#handle-media-session-action": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"handle media session action","type":"dfn","url":"#handle-media-session-action"},
"#last-position-updated-time": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"last position updated time","type":"dfn","url":"#last-position-updated-time"},
"#last-reported-playback-position": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"last reported playback position","type":"dfn","url":"#last-reported-playback-position"},
"#media-session-action": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"media session action","type":"dfn","url":"#media-session-action"},
"#media-session-action-source": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"media session action source","type":"dfn","url":"#media-session-action-source"},
"#media-session-actions-update-algorithm": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"media session actions update algorithm","type":"dfn","url":"#media-session-actions-update-algorithm"},
"#mediametadata": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaMetadata","type":"interface","url":"#mediametadata"},
"#mediametadata-album": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"album","type":"dfn","url":"#mediametadata-album"},
"#mediametadata-artist": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"artist","type":"dfn","url":"#mediametadata-artist"},
"#mediametadata-artwork-images": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"artwork images","type":"dfn","url":"#mediametadata-artwork-images"},
"#mediametadata-media-session": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"media session","type":"dfn","url":"#mediametadata-media-session"},
"#mediametadata-title": {"export":true,"for_":["MediaMetadata"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"title","type":"dfn","url":"#mediametadata-title"},
"#mediasession": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"MediaSession","type":"interface","url":"#mediasession"},
"#mediasession-metadata": {"export":true,"for_":["MediaSession"],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"metadata","type":"dfn","url":"#mediasession-metadata"},
"#playback-rate": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"playback rate","type":"dfn","url":"#playback-rate"},
"#position-state①": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"position state","type":"dfn","url":"#position-state\u2460"},
"#preferred-artwork-image": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"preferred artwork image","type":"dfn","url":"#preferred-artwork-image"},
"#supported-media-session-actions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"supported media session actions","type":"dfn","url":"#supported-media-session-actions"},
"#update-action-handler-algorithm": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"update action handler algorithm","type":"dfn","url":"#update-action-handler-algorithm"},
"#update-metadata-algorithm": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mediasession","spec":"mediasession-1","status":"local","text":"update metadata algorithm","type":"dfn","url":"#update-metadata-algorithm"},
"https://fetch.spec.whatwg.org/#concept-fetch": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fetch","spec":"fetch","status":"anchor-block","text":"fetch","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-fetch"},
"https://fetch.spec.whatwg.org/#concept-internal-response": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fetch","spec":"fetch","status":"anchor-block","text":"internal response","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-internal-response"},
"https://fetch.spec.whatwg.org/#concept-response": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fetch","spec":"fetch","status":"anchor-block","text":"response","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response"},
"https://fetch.spec.whatwg.org/#concept-response-type": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fetch","spec":"fetch","status":"anchor-block","text":"response type","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response-type"},
"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"},
"https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"unordered set of unique space-separated tokens","type":"dfn","url":"https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#unordered-set-of-unique-space-separated-tokens"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"top-level browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"in parallel","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"https://html.spec.whatwg.org/multipage/interaction.html#activation-notification": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"activation notification","type":"dfn","url":"https://html.spec.whatwg.org/multipage/interaction.html#activation-notification"},
"https://html.spec.whatwg.org/multipage/media.html#concept-media-muted": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"muted","type":"dfn","url":"https://html.spec.whatwg.org/multipage/media.html#concept-media-muted"},
"https://html.spec.whatwg.org/multipage/media.html#media-element": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"media element","type":"dfn","url":"https://html.spec.whatwg.org/multipage/media.html#media-element"},
"https://html.spec.whatwg.org/multipage/media.html#potentially-playing": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"potentially playing","type":"dfn","url":"https://html.spec.whatwg.org/multipage/media.html#potentially-playing"},
"https://html.spec.whatwg.org/multipage/semantics.html#dom-link-sizes": {"export":true,"for_":["HTMLLinkElement"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"sizes","type":"attribute","url":"https://html.spec.whatwg.org/multipage/semantics.html#dom-link-sizes"},
"https://html.spec.whatwg.org/multipage/semantics.html#the-link-element": {"export":true,"for_":["HTMLLinkElement"],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"link","type":"dfn","url":"https://html.spec.whatwg.org/multipage/semantics.html#the-link-element"},
"https://html.spec.whatwg.org/multipage/system-state.html#navigator": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Navigator","type":"interface","url":"https://html.spec.whatwg.org/multipage/system-state.html#navigator"},
"https://html.spec.whatwg.org/multipage/webappapis.html#entry-settings-object": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"entry settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#entry-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"queue a task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"},
"https://infra.spec.whatwg.org/#ascii-case-insensitive": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ascii case-insensitive","type":"dfn","url":"https://infra.spec.whatwg.org/#ascii-case-insensitive"},
"https://mimesniff.spec.whatwg.org/#mime-type": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"mime type","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#mime-type"},
"https://tc39.es/ecma262/#sec-object.freeze": {"export":true,"for_":[],"level":"","normative":true,"shortname":"webidl","spec":"webidl","status":"anchor-block","text":"freeze","type":"dfn","url":"https://tc39.es/ecma262/#sec-object.freeze"},
"https://url.spec.whatwg.org/#concept-url-parser": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url parser","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-parser"},
"https://w3c.github.io/i18n-glossary/#dfn-case-sensitive": {"export":true,"for_":[],"level":"1","normative":false,"shortname":"i18n-glossary","spec":"i18n-glossary","status":"current","text":"case-sensitive","type":"dfn","url":"https://w3c.github.io/i18n-glossary/#dfn-case-sensitive"},
"https://webidl.spec.whatwg.org/#Exposed": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#SameObject": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SameObject","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#SameObject"},
"https://webidl.spec.whatwg.org/#dfn-create-frozen-array": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"create a frozen array","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-create-frozen-array"},
"https://webidl.spec.whatwg.org/#dfn-dictionary-member": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"dictionary members","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-dictionary-member"},
"https://webidl.spec.whatwg.org/#exceptiondef-typeerror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"TypeError","type":"exception","url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-USVString": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"USVString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-double": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"double","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-double"},
"https://webidl.spec.whatwg.org/#idl-frozen-array": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"FrozenArray","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-frozen-array"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-undefined": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"undefined","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"https://www.w3.org/TR/appmanifest/#dom-imageresource": {"export":true,"for_":[],"level":"","normative":true,"shortname":"appmanifest","spec":"appmanifest","status":"anchor-block","text":"imageresource","type":"dfn","url":"https://www.w3.org/TR/appmanifest/#dom-imageresource"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>