<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>SVG Marker Level 1</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="http://dev.w3.org/fxtf/motion-1/" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
dl.attrdef-list dl { margin-top: 1em }
dl.attrdef-list > dt { font-weight: normal }

/* Attribute definition tables */
table.attrdef { border-left-color: #888; border-left-width: 0; background-color: #eee; font-size: 90% }
table.attrdef th, table.attrdef td { border-bottom-color: #ccc }

table.attrdef th:first-child,
table.attrdef td:first-child { width: 16em; padding-left: 0 !important }

table.attrdef th:first-child + th,
table.attrdef td:first-child + td { width: auto }

table.attrdef th:first-child + th + th,
table.attrdef td:first-child + td + td { width: 6em }

table.attrdef th:first-child + th + th + th,
table.attrdef td:first-child + td + td + td { width: 6em; padding-right: 0 !important }
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1>SVG Marker Level 1</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="http://dev.w3.org/fxtf/motion-1/">http://dev.w3.org/fxtf/motion-1/</a>
      <dt>Feedback:
      <dd><span><a href="mailto:www-svg@w3.org?subject=%5Bsvg-markers%5D%20YOUR%20TOPIC%20HERE">www-svg@w3.org</a> with subject line “<kbd>[svg-markers] <i data-lt>… message topic …</i></kbd>” (<a href="http://lists.w3.org/Archives/Public/www-svg/" rel="discussion">archives</a>)</span>
      <dt class="editor">Editor:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:cam@mcc.id.au">Cameron McCormack</a> (<span class="p-org org">Mozilla Corporation</span>)
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Markers are graphical objects that are painted at particular positions along a <a data-link-type="element" href="https://svgwg.org/svg2-draft/paths.html#elementdef-path" id="ref-for-elementdef-path">path</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/shapes.html#elementdef-line" id="ref-for-elementdef-line">line</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/shapes.html#elementdef-polyline" id="ref-for-elementdef-polyline">polyline</a> or <a data-link-type="element" href="https://svgwg.org/svg2-draft/shapes.html#elementdef-polygon" id="ref-for-elementdef-polygon">polygon</a> element.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of
	its publication. A list of
	current W3C publications and the latest revision of this technical report
	can be found in the <a href="http://www.w3.org/TR/">W3C technical reports
	index at http://www.w3.org/TR/.</a></em> </p>
   <p> This document is the 1 January 1970 <strong>Editor’s Draft</strong> of SVG Marker Level 1. </p>
   <p> Comments on this Editor’s Draft are welcome. Comments can be sent to <a href="mailto:www-svg@w3.org?Subject=%5Bsvg-markers%5D%20PUT%20SUBJECT%20HERE">www-svg@w3.org</a>,
	the public email list for issues related to vector graphics on the Web. This list is <a href="http://lists.w3.org/Archives/Public/www-svg/">archived</a> and senders must agree to have their message
	publicly archived from their first posting. To subscribe send an email to <a href="mailto:www-svg-request@w3.org?Subject=subscribe">www-svg-request@w3.org</a> with the word <code>subscribe</code> in the subject line. </p>
   <p> This document has been produced by the <a href="https://www.w3.org/groups/wg/svg">SVG Working Group</a> as part of the <a href="http://www.w3.org/Graphics/Activity">Graphics Activity</a> within the <a href="http://www.w3.org/Interaction/">W3C Interaction Domain</a>. The goals of the W3C SVG Working Group are discussed in the <a href="http://www.w3.org/2007/11/SVG_rechartering/SVG-WG-charter.html">W3C SVG Charter</a>. The W3C SVG Working Group maintains a
	public Web page, <a href="http://www.w3.org/Graphics/SVG/">http://www.w3.org/Graphics/SVG/</a>, that contains further
	background information. The authors of this document are the SVG Working Group participants. </p>
   <p> This document was produced by a group operating under
	the <a href="http://www.w3.org/Consortium/Patent-Policy/">W3C Patent Policy</a>.
	W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/19480/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of each group;
	these pages also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> A list of current W3C Recommendations and other technical documents can be found at <a href="http://www.w3.org/TR/">http://www.w3.org/TR/</a>. W3C publications may be updated, replaced, or
	obsoleted by other documents at any time. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#MarkerElement"><span class="secno">2</span> <span class="content">The <span>marker</span> element</span></a>
    <li><a href="#MarkerReferences"><span class="secno">3</span> <span class="content">Referencing <span>marker</span> elements</span></a>
    <li><a href="#VertexMarkerProperties"><span class="secno">4</span> <span class="content">Vertex markers: the <span class="property">marker-start</span>, <span class="property">marker-mid</span> and <span class="property">marker-end</span> properties</span></a>
    <li><a href="#SegmentMarkers"><span class="secno">5</span> <span class="content">Segment markers: the <span class="property">marker-segment</span> property</span></a>
    <li><a href="#RepeatingMarkers"><span class="secno">6</span> <span class="content">Repeating markers: the <span class="property">marker-pattern</span> property</span></a>
    <li><a href="#MarkerShorthand"><span class="secno">7</span> <span class="content">Marker shorthand: the <span class="property">marker</span> property</span></a>
    <li><a href="#MarkerKnockout"><span class="secno">8</span> <span class="content">Knocking out the stroke: the <span class="property">marker-knockout-left</span> and <span class="property">marker-knockout-right</span> properties</span></a>
    <li><a href="#MarkerAlgorithm"><span class="secno">9</span> <span class="content">Details on how markers are rendered</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#property-index"><span class="secno"></span> <span class="content">Property Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p>A marker is a graphical object that is painted at particular positions along
a <a data-link-type="element" href="https://svgwg.org/svg2-draft/paths.html#elementdef-path" id="ref-for-elementdef-path①">path</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/shapes.html#elementdef-line" id="ref-for-elementdef-line①">line</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/shapes.html#elementdef-polyline" id="ref-for-elementdef-polyline①">polyline</a> or <a data-link-type="element" href="https://svgwg.org/svg2-draft/shapes.html#elementdef-polygon" id="ref-for-elementdef-polygon①">polygon</a> element, together known as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport external id="markable-elements">markable elements</dfn>.  There are four ways
markers can be placed on these elements:</p>
   <ul>
    <li>The <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start">marker-start</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end">marker-end</a> properties
  can be used to place markers at the first and last vertex, and the <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid">marker-mid</a> property can be used to place markers at every
  other vertex (aside from the first and last).  The <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start①">marker-start</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end①">marker-end</a> can be used for example to add arrowheads to paths.
  Markers placed using these properties are known as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="vertex-markers">vertex markers</dfn>.
    <li>The <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment">marker-segment</a> property can be used to place markers
  at the center of every path segment. These markers are known as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport external id="segment-markers">segment markers</dfn>.
    <li>The <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern">marker-pattern</a> property can be used to define
  a regular repeating pattern of markers to place along the length of the
  path.  Markers placed with <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern①">marker-pattern</a> are known as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport external id="repeating-markers">repeating markers</dfn>.
    <li>A child <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker">marker</a> element with a <a data-link-type="element-attr" href="#element-attrdef-marker-position" id="ref-for-element-attrdef-marker-position">position</a> attribute
  can be used to place a marker at a particular location along the path.
  Such markers are known as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport external id="positioned-markers">positioned markers</dfn>.
   </ul>
   <p class="issue" id="issue-d6146a12"><a class="self-link" href="#issue-d6146a12"></a> There are probably better terms to use than "vertex" and
"segment" markers.  At least, "vertex" would go more naturally with "edge",
but we should use more natural sounding names.</p>
   <p>The graphics for a marker are defined by a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①">marker</a> element.
The <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start②">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end②">marker-end</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid①">marker-mid</a>, <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment①">marker-segment</a> and <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern②">marker-pattern</a> properties, together known
as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="marker-properties">marker properties</dfn>, reference <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②">marker</a> elements.</p>
   <p>Markers can be animated, and as with <a data-link-type="element" href="https://svgwg.org/svg2-draft/struct.html#elementdef-use" id="ref-for-elementdef-use">use</a> elements, the animated
effects will show on all current uses of the markers within the document.</p>
   <p>Markers on a given element are painted in the following order, from
bottom to top:</p>
   <ul>
    <li data-md>
     <p>any marker specified by <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start③">marker-start</a></p>
    <li data-md>
     <p>alternating <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid②">marker-mid</a> and <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment②">marker-segment</a> markers, in order of their position along the path</p>
    <li data-md>
     <p>any <a data-link-type="dfn" href="#repeating-markers" id="ref-for-repeating-markers">repeating markers</a>, in order of their position along the path</p>
    <li data-md>
     <p>any <a data-link-type="dfn" href="#positioned-markers" id="ref-for-positioned-markers">positioned markers</a>, in document order of the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③">marker</a> element children</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="MarkerElement"><span class="secno">2. </span><span class="content">The <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④">marker</a> element</span><a class="self-link" href="#MarkerElement"></a></h2>
   <table class="def elementdef">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled" data-dfn-type="element" data-export id="elementdef-marker"><code>marker</code></dfn>
     <tr>
      <th>Categories:
      <td> <a data-link-type="dfn" href="https://svgwg.org/svg2-draft/struct.html#container-element" id="ref-for-container-element">Container element</a> 
     <tr>
      <th>Contexts:
      <td>none 
     <tr>
      <th>Content model:
      <td>
        Any number of the following statements, in order: 
       <ul>
        <li><a data-link-type="dfn">animation elements</a>
        <li><a data-link-type="dfn" href="https://svgwg.org/svg2-draft/struct.html#TermDescriptiveElement" id="ref-for-TermDescriptiveElement">descriptive elements</a>
        <li><a data-link-type="dfn" href="https://svgwg.org/svg2-draft/painting.html#TermPaintServerElement" id="ref-for-TermPaintServerElement">paint server elements</a>
        <li><a data-link-type="dfn" href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement" id="ref-for-TermShapeElement">shape elements</a>
        <li><a data-link-type="dfn" href="https://svgwg.org/svg2-draft/struct.html#TermStructuralElement" id="ref-for-TermStructuralElement">structural elements</a>
        <li><a data-link-type="element" href="https://svgwg.org/svg2-draft/linking.html#elementdef-a" id="ref-for-elementdef-a">a</a>, <a data-link-type="element" href="https://drafts.fxtf.org/css-masking-1/#elementdef-clippath" id="ref-for-elementdef-clippath">clipPath</a>, <a data-link-type="element">cursor</a>, <a data-link-type="element" href="https://drafts.fxtf.org/filter-effects-1/#elementdef-filter" id="ref-for-elementdef-filter">filter</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/embedded.html#elementdef-foreignObject" id="ref-for-elementdef-foreignObject">foreignObject</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/embedded.html#elementdef-image" id="ref-for-elementdef-image">image</a>, <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker⑤">marker</a>, <a data-link-type="element" href="https://drafts.fxtf.org/css-masking-1/#elementdef-mask" id="ref-for-elementdef-mask">mask</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/interact.html#elementdef-script" id="ref-for-elementdef-script">script</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/styling.html#elementdef-style" id="ref-for-elementdef-style">style</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/struct.html#elementdef-switch" id="ref-for-elementdef-switch">switch</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/text.html#elementdef-text" id="ref-for-elementdef-text">text</a>, <a data-link-type="element" href="https://svgwg.org/svg2-draft/linking.html#elementdef-view" id="ref-for-elementdef-view">view</a>
       </ul>
     <tr>
      <th>Attributes:
      <td>
       <ul>
        <li><a data-element-attr-group data-link-type="dfn" href="https://svgwg.org/svg2-draft/styling.html#TermPresentationAttribute" id="ref-for-TermPresentationAttribute">presentation attributes</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-refx" id="ref-for-element-attrdef-marker-refx">refX</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-refy" id="ref-for-element-attrdef-marker-refy">refY</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-orient" id="ref-for-element-attrdef-marker-orient">orient</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox">viewBox</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-preserveaspectratio" id="ref-for-element-attrdef-marker-preserveaspectratio">preserveAspectRatio</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-markerunits" id="ref-for-element-attrdef-marker-markerunits">markerUnits</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-markerwidth" id="ref-for-element-attrdef-marker-markerwidth">markerWidth</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-markerheight" id="ref-for-element-attrdef-marker-markerheight">markerHeight</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-position" id="ref-for-element-attrdef-marker-position①">position</a>
        <li><a data-link-type="element-attr" href="#element-attrdef-marker-href" id="ref-for-element-attrdef-marker-href">href</a>
       </ul>
     <tr>
      <th>DOM Interfaces:
      <td> <a class="idl-code" data-link-type="interface" href="https://svgwg.org/svg2-draft/painting.html#InterfaceSVGMarkerElement" id="ref-for-InterfaceSVGMarkerElement">SVGMarkerElement</a> 
   </table>
   <p>The <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker⑥">marker</a> element defines the graphics that are to
be used for drawing markers on a <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements">markable element</a>.</p>
   <p id="MarkerAttributes"><em>Attribute definitions:</em></p>
   <dl class="attrdef-list">
    <dt>
     <table class="attrdef">
      <tbody>
       <tr>
        <th>Name
        <th>Value
        <th>Initial value
        <th>Animatable
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-markerunits"><code>markerUnits</code></dfn>
        <td>strokeWidth | userSpaceOnUse
        <td>strokeWidth
        <td>yes
     </table>
    <dd>
     <p>The <a data-link-type="element-attr" href="#element-attrdef-marker-markerunits" id="ref-for-element-attrdef-marker-markerunits①">markerUnits</a> attribute defines the coordinate system for
  attributes <a data-link-type="element-attr" href="#element-attrdef-marker-markerwidth" id="ref-for-element-attrdef-marker-markerwidth①">markerWidth</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-markerheight" id="ref-for-element-attrdef-marker-markerheight①">markerHeight</a> and the
  contents of the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker⑦">marker</a>.  Values have the
  following meanings:</p>
     <dl>
      <dt><dfn class="dfn-paneled css" data-dfn-for="markerUnits" data-dfn-type="value" data-export id="valdef-markerunits-strokewidth">strokeWidth</dfn>
      <dd><a data-link-type="element-attr" href="#element-attrdef-marker-markerwidth" id="ref-for-element-attrdef-marker-markerwidth②">markerWidth</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-markerheight" id="ref-for-element-attrdef-marker-markerheight②">markerHeight</a> and the contents
    of the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker⑧">marker</a> represent values in a coordinate system
    which has a single unit equal the size in user units of the
    current stroke width (see the <a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width" id="ref-for-propdef-stroke-width">stroke-width</a> property) in
    place for the graphic object referencing the marker.
      <dt><dfn class="dfn-paneled css" data-dfn-for="markerUnits" data-dfn-type="value" data-export id="valdef-markerunits-userspaceonuse">userSpaceOnUse</dfn>
      <dd><a data-link-type="element-attr" href="#element-attrdef-marker-markerwidth" id="ref-for-element-attrdef-marker-markerwidth③">markerWidth</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-markerheight" id="ref-for-element-attrdef-marker-markerheight③">markerHeight</a> and the contents
    of the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker⑨">marker</a> represent values in the current
    user coordinate system in place for the graphic object
    referencing the marker (i.e., the user coordinate system for
    the element referencing the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①⓪">marker</a> element via a <a class="property css" data-link-type="property" href="#propdef-marker" id="ref-for-propdef-marker">marker</a>).
     </dl>
    <dt>
     <table class="attrdef">
      <tbody>
       <tr>
        <th>Name
        <th>Value
        <th>Initial value
        <th>Animatable
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-markerwidth"><code>markerWidth</code></dfn>, <dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-markerheight"><code>markerHeight</code></dfn>
        <td><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value">&lt;number></a>
        <td>3
        <td>yes
     </table>
    <dd> The <a data-link-type="element-attr" href="#element-attrdef-marker-markerwidth" id="ref-for-element-attrdef-marker-markerwidth④">markerWidth</a> and <a data-link-type="element-attr" href="#element-attrdef-marker-markerheight" id="ref-for-element-attrdef-marker-markerheight④">markerHeight</a> attributes
  represent the size of the viewport into which the marker is to
  be fitted according to the <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox①">viewBox</a> and <a data-link-type="element-attr" href="#element-attrdef-marker-preserveaspectratio" id="ref-for-element-attrdef-marker-preserveaspectratio①">preserveAspectRatio</a> attributes.  A value of zero for either
  attribute results in nothing being rendered for the marker.  A negative value
  for either attribute is an error (see <a href="implnote.html#ErrorProcessing">Error processing</a>). 
    <dt>
     <table class="attrdef">
      <tbody>
       <tr>
        <th>Name
        <th>Value
        <th>Initial value
        <th>Animatable
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-refx"><code>refX</code></dfn>
        <td><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①">&lt;number></a> | left | center | right
        <td>0
        <td>yes
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-refy"><code>refY</code></dfn>
        <td><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value②">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value②">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value②">&lt;number></a> | top | center | bottom
        <td>0
        <td>yes
     </table>
    <dd>
     <p class="note" role="note">New in SVG 2: geometric keywords (matches use in <a data-link-type="element" href="https://svgwg.org/svg2-draft/struct.html#elementdef-symbol" id="ref-for-elementdef-symbol">symbol</a>).</p>
     <p class="annotation">We will add top/center/bottom, left/center/right keywords to
  refX/refY on marker/symbol. Resolved at <a href="http://www.w3.org/2014/08/26-svg-minutes.html#item07">LondonF2F</a>.
  Values inspired by <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-position" id="ref-for-propdef-background-position">background-position</a>.</p>
     <p>The <a data-link-type="element-attr" href="#element-attrdef-marker-refx" id="ref-for-element-attrdef-marker-refx①">refX</a> and <a data-link-type="element-attr" href="#element-attrdef-marker-refy" id="ref-for-element-attrdef-marker-refy①">refY</a> attributes define the reference point of the marker which is to be placed exactly
  at the marker’s position on the <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements①">markable element</a>.  They are interpreted as
  being in the coordinate system of the marker contents, after application of the <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox②">viewBox</a> and <a data-link-type="element-attr" href="#element-attrdef-marker-preserveaspectratio" id="ref-for-element-attrdef-marker-preserveaspectratio②">preserveAspectRatio</a> attributes.</p>
    <dt>
     <table class="attrdef">
      <tbody>
       <tr>
        <th>Name
        <th>Value
        <th>Initial value
        <th>Animatable
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-orient"><code>orient</code></dfn>
        <td>auto | auto-start-reverse | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#angle-value" id="ref-for-angle-value">&lt;angle></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value③">&lt;number></a>
        <td>0
        <td>yes (non-additive)
     </table>
    <dd>
     <p>The <a data-link-type="element-attr" href="#element-attrdef-marker-orient" id="ref-for-element-attrdef-marker-orient①">orient</a> attribute indicates how the marker
  is rotated when it is placed at its position on the <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements②">markable element</a>.
  Values have the following meaning:</p>
     <dl>
      <dt><span class="css">auto</span>
      <dd>
       <p>A value of <span class="css">auto</span> indicates that the marker is oriented such that its positive
      x-axis is pointing in the direction of the path at the point
      it is placed.</p>
       <p class="issue" id="issue-2a8a8ee0"><a class="self-link" href="#issue-2a8a8ee0"></a>This needs to reference a definition for how
      directionality of a given start/mid/end vertex is calculated.
      Part of that (which should be moved somewhere more appropriate) is in
      the <a href="implnote.html#PathElementImplementationNotes">path element implementation notes</a>.
      Some wording from SVG 1.1 appears to have been lost, compare with <a href="http://www.w3.org/TR/SVG11/painting.html#OrientAttribute">this</a>. <br><br> Here’s an example that is a bit unclear currently: <code style="white-space:pre"> &lt;svg>
  &lt;marker id="m" orient="auto" overflow="visible">
    &lt;rect x="-1" y="-0.5" width="1" height="1" fill="green"/>
  &lt;/marker>
  &lt;path d="M50,0C50,50 50,100 50,100" marker-end="url(#m)" stroke-width="100" stroke="red"/>
&lt;/svg> </code> <br> The second control point and the endpoint coincide, should this mean that the direction of the endpoint is a) <em>unknown [aka default to 0 degrees]</em> or
    b) <em>that you have to look at the previous segment(s)/command(s) until a direction can be established</em>? </p>
       <p>If the marker is a <a data-link-type="dfn" href="#segment-markers" id="ref-for-segment-markers">segment marker</a>, then
      the direction the marker is oriented is, if considering the
      incoming and outgoing directions as unit vectors, in the
      direction of the sum of these two vectors.  If this sum
      is zero, then the marker is oriented in the incoming direction.</p>
       <p>If the marker is on the first or last vertex of a closed subpath, then the
      incoming direction taken from the final path segment and the outgoing
      direction is taken from:</p>
       <ul>
        <li>the first path segment of the <em>following</em> subpath,
        if the following subpath does not begin with a <a href="paths.html#PathDataMovetoCommands">moveto</a> command, and
        <li>the first path segment of the <em>current</em> subpath,
        if the following subpath does begin with a <a href="paths.html#PathDataMovetoCommands">moveto</a> command
        or if there is no following subpath.
       </ul>
     </dl>
     <dl>
      <dt><span class="css">auto-start-reverse</span>
      <dd>
       <p>A value of <span class="css">auto-start-reverse</span> means the same as <span class="css">auto</span> except that
      for a marker placed by <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start④">marker-start</a>, the orientation is 180°
      different from the orientation as determined by <span class="css">auto</span>.</p>
       <p class="note" role="note">This allows a single arrowhead marker to be defined
      that can be used for both the start and end of a path, point in the right
      directions.</p>
     </dl>
     <dl>
      <dt><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#angle-value" id="ref-for-angle-value①">&lt;angle></a>
      <dt><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value④">&lt;number></a>
      <dd>
       <p>An <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#angle-value" id="ref-for-angle-value②">&lt;angle></a> value represents the angle the marker’s
      positive x-axis makes with the positive x-axis in the user space
      of the <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements③">markable element</a>, and a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value⑤">&lt;number></a> value
      with no unit represents an angle in degrees.  For example, if a value of <span class="css">0</span> is given, then the marker will be drawn
      such that its x-axis will align with the x-axis of the user
      space of the graphic object referencing the marker.
      A value of <span class="css">90deg</span> will result in the
      marker being drawn with its positive x-axis in the direction
      of the positive y-axis of the <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements④">markable element</a>’s user space.</p>
     </dl>
     <p>The orientation occurs after the marker has been fitted into its
  viewport.  See the <a href="#MarkerAlgorithm">Details on how markers are rendered</a> section below for an illustrative example.</p>
    <dt>
     <table class="attrdef">
      <tbody>
       <tr>
        <th>Name
        <th>Value
        <th>Initial value
        <th>Animatable
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-position"><code>position</code></dfn>
        <td><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value③">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value③">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value⑥">&lt;number></a>
        <td>as if not specified
        <td>yes
     </table>
    <dd>
     <p>If the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①①">marker</a> element is a child of a <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements⑤">markable element</a>,
  then the presence of a  attribute indicates that the marker is
  a <a data-link-type="dfn" href="#positioned-markers" id="ref-for-positioned-markers①">positioned marker</a> and that it will be painted at the specified
  distance along the path.  If the value is negative or greater than the length
  of the path, then no marker will be painted.  If this attribute is specified on
  a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①②">marker</a> that is not a child of a <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements⑥">markable element</a>, then
  it has no effect beyond being exposed in the DOM.</p>
     <p class="issue" id="issue-79ea2baa"><a class="self-link" href="#issue-79ea2baa"></a>Should a negative or greater than path length value be
  an "in error" / "unsupported" value?</p>
    <dt>
     <table class="attrdef">
      <tbody>
       <tr>
        <th>Name
        <th>Value
        <th>Initial value
        <th>Animatable
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-href"><code>href</code></dfn>
        <td>URL <a data-link-type="biblio" href="#biblio-url" title="URL Standard">[URL]</a>
        <td>as if not specified
        <td>yes
     </table>
    <dd>
     <p>When a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①③">marker</a> element is being used as a <a data-link-type="dfn" href="#positioned-markers" id="ref-for-positioned-markers②">positioned marker</a>,
  the <a data-link-type="element-attr" href="#element-attrdef-marker-href" id="ref-for-element-attrdef-marker-href①">href</a> attribute indicates that the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①④">marker</a> referenced by the attribute is to be used as the definition of the marker.  The
  graphical content of the referencing <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①⑤">marker</a> element and any of
  its attributes that affect marker processing are ignored.  Authors must not
  place any child graphical content in the referencing <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①⑥">marker</a> or
  specify the <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox③">viewBox</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-preserveaspectratio" id="ref-for-element-attrdef-marker-preserveaspectratio③">preserveAspectRatio</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-refx" id="ref-for-element-attrdef-marker-refx②">refX</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-refy" id="ref-for-element-attrdef-marker-refy②">refY</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-markerunits" id="ref-for-element-attrdef-marker-markerunits②">markerUnits</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-markerwidth" id="ref-for-element-attrdef-marker-markerwidth⑤">markerWidth</a>, <a data-link-type="element-attr" href="#element-attrdef-marker-markerheight" id="ref-for-element-attrdef-marker-markerheight⑤">markerHeight</a> or <a data-link-type="element-attr" href="#element-attrdef-marker-orient" id="ref-for-element-attrdef-marker-orient②">orient</a> attributes on it.</p>
     <p class="issue" id="issue-e5f3570c"><a class="self-link" href="#issue-e5f3570c"></a>We should say something about referencing <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①⑦">marker</a> elements that have an <a data-link-type="element-attr" href="#element-attrdef-marker-href" id="ref-for-element-attrdef-marker-href②">href</a> with the <a data-link-type="dfn" href="#marker-properties" id="ref-for-marker-properties">marker properties</a>.
  I suspect we should just allow this.  Whether we want to allow the full
  element-referencing thing that you can do with gradients, with selective
  overriding of attributes, I’m not sure.</p>
    <dt>
     <table class="attrdef">
      <tbody>
       <tr>
        <th>Name
        <th>Value
        <th>Initial value
        <th>Animatable
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-viewbox"><code>viewBox</code></dfn>
        <td>see prose
        <td>see prose
        <td>see prose
     </table>
    <dd>
     <p>The <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox④">viewBox</a> attribute is defined be SVG. See ‘<a href="http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#PreserveAspectRatioAttribute">The viewBox attribute</a>’ <a data-link-type="biblio" href="#biblio-svg11" title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG11]</a>.</p>
    <dt>
     <table class="attrdef">
      <tbody>
       <tr>
        <th>Name
        <th>Value
        <th>Initial value
        <th>Animatable
       <tr>
        <td><dfn class="dfn-paneled" data-dfn-for="marker" data-dfn-type="element-attr" data-export id="element-attrdef-marker-preserveaspectratio"><code>preserveAspectRatio</code></dfn>
        <td>see prose
        <td>see prose
        <td>see prose
     </table>
    <dd>
     <p>The <a data-link-type="element-attr" href="#element-attrdef-marker-preserveaspectratio" id="ref-for-element-attrdef-marker-preserveaspectratio④">preserveAspectRatio</a> attribute is defined be SVG. See ‘<a href="http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#PreserveAspectRatioAttribute">The preserveAspectRatio attribute</a>’ <a data-link-type="biblio" href="#biblio-svg11" title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG11]</a>.</p>
   </dl>
   <p>The contents of the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①⑧">marker</a> are relative to a new
coordinate system. The <a data-link-type="element-attr" href="#element-attrdef-marker-markerunits" id="ref-for-element-attrdef-marker-markerunits③">markerUnits</a> attribute
determines an initial scale factor for transforming the graphics in the marker
into the user coordinate system for the referencing element. An additional set of
transformations might occur if there is a <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox⑤">viewBox</a> attribute, in which case the coordinate system for the contents of the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker①⑨">marker</a> will be transformed due to the processing of attributes <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox⑥">viewBox</a> and <a data-link-type="element-attr" href="#element-attrdef-marker-preserveaspectratio" id="ref-for-element-attrdef-marker-preserveaspectratio⑤">preserveAspectRatio</a>.
If there is no <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox⑦">viewBox</a> attribute, then the assumed default value for the <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox⑧">viewBox</a> attribute has the origin of the viewBox coincident with the origin
of the viewport and the width/height of the viewBox the same as the
width/height of the viewport.</p>
   <p>The <a href="styling.html#UAStyleSheet">user agent style sheet</a> sets
the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-overflow-3/#propdef-overflow" id="ref-for-propdef-overflow">overflow</a> property for <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②⓪">marker</a> elements to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden" id="ref-for-valdef-overflow-hidden">hidden</a>, which causes a rectangular clipping
path to be created at the bounds of marker’s viewport.  Unless the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-overflow-3/#propdef-overflow" id="ref-for-propdef-overflow①">overflow</a> property is overridden, any graphics within the marker which
goes outside of the marker’s viewport will be clipped.</p>
   <p><a href="styling.html#SVGStylingProperties">Properties</a> inherit into the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②①">marker</a> element from its ancestors; properties do <em>not</em> inherit from the element referencing the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②②">marker</a> element.</p>
   <p class="note" role="note"><span class="marker">Note:</span> By using the <span class="css">context-stroke</span> value for the <a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-fill" id="ref-for-propdef-fill">fill</a> or <a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke" id="ref-for-propdef-stroke">stroke</a> on elements in its definition, a single marker can be designed to match the
style of the element referencing the marker.</p>
   <p><a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②③">marker</a> elements are only rendered directly
when they are used as children of a <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements⑦">markable element</a> and have a <a data-link-type="element-attr" href="#element-attrdef-marker-position" id="ref-for-element-attrdef-marker-position②">position</a> attribute specified.  This causes the
marker to be painted as a <a data-link-type="dfn" href="#positioned-markers" id="ref-for-positioned-markers③">positioned marker</a>.  All other <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②④">marker</a> elements are not rendered directly
and must be referenced by one of the <a data-link-type="dfn" href="#marker-properties" id="ref-for-marker-properties①">marker properties</a> to be rendered.  The <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-display-4/#propdef-display" id="ref-for-propdef-display">display</a> property does not apply to the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②⑤">marker</a> element; thus, <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②⑥">marker</a> elements are not
directly rendered even if the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-display-4/#propdef-display" id="ref-for-propdef-display①">display</a> property is
set to a value other than <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-4/#valdef-display-none" id="ref-for-valdef-display-none">none</a>, and <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②⑦">marker</a> elements are available for referencing even when the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-display-4/#propdef-display" id="ref-for-propdef-display②">display</a> property on the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②⑧">marker</a> element or any of its
ancestors is set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-4/#valdef-display-none" id="ref-for-valdef-display-none①">none</a>. <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker②⑨">marker</a> elements that are used as <a data-link-type="dfn" href="#positioned-markers" id="ref-for-positioned-markers④">positioned markers</a> can simultaneously be referenced
by the <a data-link-type="dfn" href="#marker-properties" id="ref-for-marker-properties②">marker properties</a> to be used as <a data-link-type="dfn" href="#segment-markers" id="ref-for-segment-markers①">segment markers</a> and <a data-link-type="dfn" href="#repeating-markers" id="ref-for-repeating-markers①">repeating markers</a>.</p>
   <p><a href="interact.html#EventAttributes">Event attributes</a> and <a href="svgdom.html#EventListeners">event listeners</a> attached
to the contents of a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③⓪">marker</a> element are not processed;
only the rendering aspects of <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③①">marker</a> elements are
processed.</p>
   <p class="issue" id="issue-cbf39201"><a class="self-link" href="#issue-cbf39201"></a> Make interaction work on <a data-link-type="dfn" href="#positioned-markers" id="ref-for-positioned-markers⑤">positioned markers</a>.</p>
   <div class="example" id="example-57d2cf19">
    <a class="self-link" href="#example-57d2cf19"></a> 
    <p>The following example shows the use of <a data-link-type="dfn" href="#positioned-markers" id="ref-for-positioned-markers⑥">positioned markers</a> to
  place symbols at particular distances along a path.</p>
<pre><code class="html">&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="600" height="200" viewBox="0 0 600 200">

   &lt;defs>
     &lt;marker id="Square" markerWidth="10" markerHeight="10"
             refX="5" refY="5" orient="auto">
       &lt;path d="M 5,1 L 9,5 5,9 1,5 z" fill="#6a9100"/>
     &lt;/marker>
     &lt;marker id="Circle" markerWidth="10" markerHeight="10"
             refX="5" refY="5" orient="auto">
       &lt;circle cx="5" cy="5" r="2" fill="dodgerblue"/>
     &lt;/marker>
   &lt;/defs>

   &lt;path d="M 100,50 C 100,250 500,-50 300,150"
         fill="none" stroke="deeppink" stroke-width="3">
     &lt;marker href="#Square" position="0"/>
     &lt;marker href="#Square" position="100%"/>
     &lt;marker href="#Circle" position="50px"/>
     &lt;marker href="#Circle" position="calc(100% - 50px)"/>
     &lt;marker refX="5" refY="5" position="50%">
       &lt;!-- the cross -->
       &lt;path d="M 3,3 L 7,7 M 3,7 L 7,3"
             fill="none" stroke="black" stroke-width="2"/>
     &lt;/marker>
   &lt;/path>
&lt;/svg>
</code></pre>
    <div class="figure">
      <img alt="Image showing the use of positioned markers." class="bordered" src="images/markers-positioned.svg"> 
     <p class="caption">Child <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③②">marker</a> elements are used to position
    two square and two circular markers.  The cross marker is defined inline
    and does not need an ID.</p>
    </div>
   </div>
   <h2 class="heading settled" data-level="3" id="MarkerReferences"><span class="secno">3. </span><span class="content">Referencing <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③③">marker</a> elements</span><a class="self-link" href="#MarkerReferences"></a></h2>
   <p>A number of marker properties allow specifying a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③④">marker</a> using a <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef">&lt;marker-ref></a> value.</p>
   <div class="definition">
     <dfn class="dfn-paneled css" data-dfn-type="type" data-export id="DataTypeMarkerRef">&lt;marker-ref></dfn> =<br> 
    <div style="margin-left: 2em"> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#url-value" id="ref-for-url-value">&lt;url></a> |<br> child |<br> <a class="production css" data-link-type="type" href="#typedef-child-selector" id="ref-for-typedef-child-selector">&lt;child-selector></a> </div>
   </div>
   <p>where:</p>
   <div class="definition">
     <dfn class="dfn-paneled css" data-dfn-type="type" data-export id="typedef-child-selector">&lt;child-selector></dfn> = 
    <div style="margin-left: 4em">select(<a href="http://www.w3.org/TR/selectors4/#compound">&lt;compound selector></a> #)</div>
   </div>
   <p>Values have the following meaning</p>
   <dl>
    <dt><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#url-value" id="ref-for-url-value①">&lt;url></a>
    <dd>Indicates that the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③⑤">marker</a> element referenced
  by the <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#url-value" id="ref-for-url-value②">&lt;url></a> value will be used.
  If the <a href="linking.html#URLReference">URL reference</a> is not valid
  (e.g., it points to an object that is undefined or the object is not
  a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③⑥">marker</a> element), then the marker reference is also not
  valid.
    <dt><a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-speech-1/#valdef-voice-family-child" id="ref-for-valdef-voice-family-child">child</a>
    <dd>Indicates that the last child <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③⑦">marker</a> element of the
  element where the property is specified will be used.
  If there is no such element, then the reference is not valid.
    <dt><a class="production css" data-link-type="type" href="#typedef-child-selector" id="ref-for-typedef-child-selector①">&lt;child-selector></a>
    <dd>Indicates that the first matching descendent <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③⑧">marker</a> specified by the <a class="production css" data-link-type="type" href="#typedef-child-selector" id="ref-for-typedef-child-selector②">&lt;child-selector></a>, applied in the context of the
  element where the property is specified, will be used.
  If no element matches any of the selectors contained in the <a class="production css" data-link-type="type" href="#typedef-child-selector" id="ref-for-typedef-child-selector③">&lt;child-selector></a>>, or the first match is not a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker③⑨">marker</a>, then the reference is not valid.
   </dl>
   <h2 class="heading settled" data-level="4" id="VertexMarkerProperties"><span class="secno">4. </span><span class="content">Vertex markers: the <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start⑤">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid③">marker-mid</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end③">marker-end</a> properties</span><a class="self-link" href="#VertexMarkerProperties"></a></h2>
   <table class="def propdef" data-link-for-hint="marker-start">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-marker-start">marker-start</dfn>, <dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-marker-mid">marker-mid</dfn>, <dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-marker-end">marker-end</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">none <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one">|</a> <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①">&lt;marker-ref></a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements⑧">markable elements</a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>yes
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>n/a
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified, but with <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#url-value" id="ref-for-url-value③">&lt;url></a> values (that are part of a <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef②">&lt;marker-ref></a>) made absolute
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar
     <tr>
      <th>Media:
      <td>visual
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animatable:</a>
      <td>yes
   </table>
   <p>The <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start⑥">marker-start</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end④">marker-end</a> properties are used
to specify the marker that will be drawn at the first and last vertices
of the given <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements⑨">markable element</a>, respectively. <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid④">marker-mid</a> is used to specify the marker that will be drawn at all other vertices
(i.e., every vertex except the first and last).
Possible values for <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start⑦">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid⑤">marker-mid</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end⑤">marker-end</a> are:</p>
   <dl>
    <dt><dfn class="dfn-paneled css" data-dfn-for="marker-start" data-dfn-type="value" data-export id="valdef-marker-start-none">none</dfn>
    <dd>Indicates that no marker symbol will be drawn at the given
  vertex or vertices.
    <dt><dfn class="dfn-paneled css" data-dfn-for="marker-start" data-dfn-type="value" data-export id="valdef-marker-start-marker-ref">&lt;marker-ref></dfn>
    <dd>Indicates that the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④⓪">marker</a> element referenced
  by the <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef③">&lt;marker-ref></a> value will be drawn at the given vertex or
  vertices.
  If the reference is not valid, then no marker will be drawn at the given
  vertex or vertices.
   </dl>
   <p>For <a data-link-type="element" href="https://svgwg.org/svg2-draft/shapes.html#elementdef-polygon" id="ref-for-elementdef-polygon②">polygon</a> elements, the last vertex is the same as the first
vertex, and for <a data-link-type="element" href="https://svgwg.org/svg2-draft/paths.html#elementdef-path" id="ref-for-elementdef-path②">path</a> elements that end with a closed subpath, the last
vertex is the same as the first vertex of that final subpath.
In this case, if the value of <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end⑥">marker-end</a> is not <a class="css" data-link-type="maybe" href="#valdef-marker-start-none" id="ref-for-valdef-marker-start-none">none</a>, then it is possible that two markers
will be rendered on that final vertex.</p>
   <p class="note" role="note"><span class="marker">Note:</span> <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start⑧">marker-start</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end⑦">marker-end</a> refer to the first and last vertex of the entire path, not each subpath.</p>
   <div class="example" id="example-afed451f">
    <a class="self-link" href="#example-afed451f"></a> 
    <p>The following example shows a triangular marker symbol used as a <a data-link-type="dfn" href="#vertex-markers" id="ref-for-vertex-markers">vertex marker</a> to form an arrowhead at the end of two paths.</p>
<pre><code class="html">&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="275" height="200" viewBox="0 0 275 200">
  &lt;defs>
    &lt;marker id="Triangle" viewBox="0 0 10 10" refX="1" refY="5"
            markerUnits="strokeWidth" markerWidth="4" markerHeight="3"
            orient="auto">
      &lt;path d="M 0 0 L 10 5 L 0 10 z" fill="context-stroke"/>
    &lt;/marker>
  &lt;/defs>

  &lt;g fill="none" stroke-width="10" marker-end="url(#Triangle)">
    &lt;path stroke="crimson" d="M 100,75 C 125,50 150,50 175,75"/>
    &lt;path stroke="olivedrab" d="M 175,125 C 150,150 125,150 100,125"/>
  &lt;/g>
&lt;/svg>
</code></pre>
    <div class="figure">
      <img alt="Image showing the use of an automatically oriented marker." class="bordered" src="images/marker-rendering.svg"> 
     <p class="caption">The triangle is placed at the end of the path and
    oriented automatically so that it points in the right direction.
    The use of <span class="css">context-stroke</span> ensures
    the fill of the triangle matches the stroke of each <a data-link-type="element" href="https://svgwg.org/svg2-draft/paths.html#elementdef-path" id="ref-for-elementdef-path③">path</a>.</p>
    </div>
   </div>
   <h2 class="heading settled" data-level="5" id="SegmentMarkers"><span class="secno">5. </span><span class="content">Segment markers: the <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment③">marker-segment</a> property</span><a class="self-link" href="#SegmentMarkers"></a></h2>
   <table class="def propdef" data-link-for-hint="marker-segment">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-marker-segment">marker-segment</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">none <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef④">&lt;marker-ref></a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements①⓪">markable elements</a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>yes
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>n/a
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified, but with <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#url-value" id="ref-for-url-value④">&lt;url></a> values (that are part of a <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef⑤">&lt;marker-ref></a>) made absolute
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar
     <tr>
      <th>Media:
      <td>visual
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animatable:</a>
      <td>yes
   </table>
   <p class="note" role="note"><span class="marker">Note:</span> New in SVG 2. Added to allow automatically placing marker symbols
on path edges, as is common in for example line graphs.</p>
   <p>The <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment④">marker-segment</a> property is used to specify the marker that will
be drawn at the center of each length path segment.  Possible values
are:</p>
   <dl>
    <dt><dfn class="dfn-paneled css" data-dfn-for="marker-segment" data-dfn-type="value" data-export id="valdef-marker-segment-none">none</dfn>
    <dd>Indicates that no marker symbol will be drawn at the given
  vertex or vertices.
    <dt><dfn class="dfn-paneled css" data-dfn-for="marker-segment" data-dfn-type="value" data-export id="valdef-marker-segment-marker-ref">&lt;marker-ref></dfn>
    <dd>Indicates that the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④①">marker</a> element referenced
  by the <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef⑥">&lt;marker-ref></a> value will be drawn at the center
  of each path segment.
  If the reference is not valid, then no marker will be drawn at the path
  segment centers.
   </dl>
   <div class="example" id="example-3a5dbc22">
    <a class="self-link" href="#example-3a5dbc22"></a> 
    <p>The following example shows the use of both <a data-link-type="dfn" href="#vertex-markers" id="ref-for-vertex-markers①">vertex markers</a> and <a data-link-type="dfn" href="#segment-markers" id="ref-for-segment-markers②">segment markers</a> to construct a line graph.</p>
<pre><code class="html">&lt;svg xmlns="http://www.w3.org/2000/svg" width="400" height="200">

  &lt;marker id="Circle" markerWidth="8" markerHeight="8" refX="4" refY="4"
          markerUnits="userSpaceOnUse">
    &lt;circle cx="4" cy="4" r="3" fill="deeppink"/>
  &lt;/marker>

  &lt;marker id="Cross" markerWidth="10" markerHeight="10" refX="0" refY="0"
          viewBox="-5 -5 10 10" markerUnits="userSpaceOnUse"
          fill="none">
    &lt;path d="M -4,-4 L 4,4 M -4,4 L 4,-4" stroke="white" stroke-width="4"/>
    &lt;path d="M -4,-4 L 4,4 M -4,4 L 4,-4" stroke="black" stroke-width="2"/>
  &lt;/marker>

  &lt;!-- grid lines -->
  &lt;path stroke="#888" d="M 40,20 360,20 M 40,40 360,40 M 40,60 360,60
                         M 40,80 360,80 M 40,100 360,100 M 40,120 360,120
                         M 40,140 360,140 M 40,160 360,160 M 40,180 360,180"/>

  &lt;!-- the graph line -->
  &lt;polyline points="50,100 100,20 150,50 200,130 250,80 300,170 350,100"
            fill="none" stroke="deeppink" stroke-width="2"
            marker="url(#Circle)" marker-segment="url(#Cross)"/>
&lt;/svg>
</code></pre>
    <div class="figure">
      <img alt="Image showing the use of segment markers." class="bordered" src="images/markers-segment.svg"> 
     <p class="caption">Segment markers are used to place crosses at the center
    of each line segment in the line graph.</p>
    </div>
   </div>
   <h2 class="heading settled" data-level="6" id="RepeatingMarkers"><span class="secno">6. </span><span class="content">Repeating markers: the <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern③">marker-pattern</a> property</span><a class="self-link" href="#RepeatingMarkers"></a></h2>
   <table class="def propdef" data-link-for-hint="marker-pattern">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-marker-pattern">marker-pattern</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod"><a class="production css" data-link-type="type" href="#typedef-marker-gap" id="ref-for-typedef-marker-gap">&lt;marker-gap></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a> <a class="production css" data-link-type="type" href="#typedef-marker-ref-group" id="ref-for-typedef-marker-ref-group">&lt;marker-ref-group></a> [ <a class="production css" data-link-type="type" href="#typedef-marker-gap" id="ref-for-typedef-marker-gap①">&lt;marker-gap></a> <a class="production css" data-link-type="type" href="#typedef-marker-gap" id="ref-for-typedef-marker-gap②">&lt;marker-gap></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-zero-plus" id="ref-for-mult-zero-plus">*</a> <a class="production css" data-link-type="type" href="#typedef-marker-gap" id="ref-for-typedef-marker-gap③">&lt;marker-gap></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①">?</a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements①①">markable elements</a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>yes
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>n/a
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified, but with <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#url-value" id="ref-for-url-value⑤">&lt;url></a> values (that are part of a <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef⑦">&lt;marker-ref></a>) made absolute
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar
     <tr>
      <th>Media:
      <td>visual
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animatable:</a>
      <td>yes
   </table>
   <p>where:</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-marker-gap">&lt;marker-gap></dfn> = <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value④">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value④">&lt;percentage></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value⑦">&lt;number></a></pre>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-marker-ref-group">&lt;marker-ref-group></dfn> = <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none">none</a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one④">|</a> <a class="production" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef⑧">&lt;marker-ref></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus">+</a></pre>
   <p class="note" role="note"><span class="marker">Note:</span> New in SVG 2. Added to allow markers to be placed along a path
at positions unrelated to the segments used to form the path.</p>
   <p>The <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern④">marker-pattern</a> property is used to specify a pattern
of markers and gaps to be repeated along the length of the <a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements①②">markable element</a>.
Values have the following meanings:</p>
   <dl>
    <dt><dfn class="dfn-paneled css" data-dfn-for="marker-pattern" data-dfn-type="value" data-export id="valdef-marker-pattern-none">none</dfn>
    <dd>Indicates that no marker will be painted at the current
  position along the path.
    <dt><a class="production css" data-link-type="type" href="#typedef-marker-gap" id="ref-for-typedef-marker-gap④">&lt;marker-gap></a>
    <dd>Indicates the length of a gap in the repeated
  pattern of markers.
    <dt><a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef⑨">&lt;marker-ref></a>
    <dd>A reference to a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④②">marker</a> that will be placed at the
  current position along the path.  If the reference is not valid, then no
  marker for that <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①⓪">&lt;marker-ref></a> will be painted.
   </dl>
   <p>If a value other than <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none①">none</a> is given,
and the sum of the <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value⑤">&lt;length></a>s, <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑤">&lt;percentage></a>s
and <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value⑧">&lt;number></a>s is not positive, then it is an <a href="http://www.w3.org/TR/SVG2/intro.html#TermInvalidValue">invalid value</a>.</p>
   <p></p>
   <p>Unlike <a data-link-type="dfn" href="#vertex-markers" id="ref-for-vertex-markers②">vertex markers</a>, the orientation of an <span class="css">orient="auto"</span> <a data-link-type="dfn" href="#repeating-markers" id="ref-for-repeating-markers②">repeating marker</a> that happens to lie on a vertex does not take into
account the incoming and outgoing directions.  Instead, it is simply oriented
such that its positive x-axis is aligned with the direction of the path
at its position.</p>
   <div class="example" id="example-b321fc99">
    <a class="self-link" href="#example-b321fc99"></a> 
    <p>The following example shows the use of the <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern⑤">marker-pattern</a> property
  to specify a repeating pattern of two different markers spaced along a
  path.</p>
<pre><code class="html">&lt;svg xmlns="http://www.w3.org/2000/svg" width="600" height="200">

  &lt;marker id="DoubleDash" markerWidth="8" markerHeight="12" refX="0" refY="0"
          viewBox="-4 -6 8 12" markerUnits="userSpaceOnUse" orient="auto">
    &lt;rect x="-3" y="-5" width="2" height="10"/>
    &lt;rect x="1" y="-5" width="2" height="10"/>
  &lt;/marker>
  &lt;marker id="SingleDash" markerWidth="4" markerHeight="12" refX="0" refY="0"
          viewBox="-2 -6 4 12" markerUnits="userSpaceOnUse" orient="auto">
    &lt;rect x="-1" y="-5" width="2" height="10"/>
  &lt;/marker>

  &lt;path d="M 50,100 S 100,132 150,86 200,173 250,76 300,81
                      350,136 400,87 450,166 500,87 550,96"
        stroke="deeppink" stroke-width="2" fill="none"
        marker-pattern="40 url(#DoubleDash) 40 url(#SingleDash)"/>
&lt;/svg>
</code></pre>
    <div class="figure">
      <img alt="Image showing the use of repeating markers." class="bordered" src="images/markers-repeating.svg"> 
     <p class="caption">Markers specified with the <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern⑥">marker-pattern</a> property
    are placed along the path at fixed distances, not relative to the path
    vertices.</p>
    </div>
   </div>
   <h2 class="heading settled" data-level="7" id="MarkerShorthand"><span class="secno">7. </span><span class="content">Marker shorthand: the <a class="property css" data-link-type="property" href="#propdef-marker" id="ref-for-propdef-marker①">marker</a> property</span><a class="self-link" href="#MarkerShorthand"></a></h2>
   <table class="def propdef" data-link-for-hint="marker">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-marker">marker</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">
       <div>[ none <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑤">|</a> <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①①">&lt;marker-ref></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-num-range" id="ref-for-mult-num-range">{1,4}</a> [ / <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern⑦">marker-pattern</a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt②">?</a> </div>
       <div style="margin-left: 2em"> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑥">|</a> <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①②">&lt;marker-ref></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-num-range" id="ref-for-mult-num-range①">{0,4}</a> [ <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value⑥">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑦">|</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑥">&lt;percentage></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑧">|</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value⑨">&lt;number></a> ] [ <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value⑦">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑨">|</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑦">&lt;percentage></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⓪">|</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①⓪">&lt;number></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①①">|</a> <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①③">&lt;marker-ref></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-zero-plus" id="ref-for-mult-zero-plus①">*</a></div>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a data-link-type="dfn" href="#markable-elements" id="ref-for-markable-elements①③">markable elements</a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>see individual properties
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>see individual properties
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar
     <tr>
      <th>Media:
      <td>visual
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animatable:</a>
      <td>see individual properties
   </table>
   <p>The <a class="property css" data-link-type="property" href="#propdef-marker" id="ref-for-propdef-marker②">marker</a> property sets values for the <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start⑨">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid⑥">marker-mid</a>, <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end⑧">marker-end</a>, <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment⑤">marker-segment</a> and <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern⑧">marker-pattern</a> properties.
Values for have the following meanings:</p>
   <dl>
    <dt><a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none②">none</a> | <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①④">&lt;marker-ref></a>
    <dd>Sets <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start①⓪">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid⑦">marker-mid</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end⑨">marker-end</a> to the specified value, and sets <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment⑥">marker-segment</a> and <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern⑨">marker-pattern</a> to <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none③">none</a>.
    <dt>[ <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none④">none</a> | <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①⑤">&lt;marker-ref></a> ]{2}
    <dd>Sets <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start①①">marker-start</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end①⓪">marker-end</a> to the two
  values specified, and sets <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid⑧">marker-mid</a>, <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment⑦">marker-segment</a> and <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern①⓪">marker-pattern</a> to <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none⑤">none</a>.
    <dt>[ <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none⑥">none</a> | <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①⑥">&lt;marker-ref></a> ]{3}
    <dd>Sets <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start①②">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid⑨">marker-mid</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end①①">marker-end</a> to
  the three values specified, and sets <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment⑧">marker-segment</a> and <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern①①">marker-pattern</a> to <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none⑦">none</a>.
    <dt>[ <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none⑧">none</a> | <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①⑦">&lt;marker-ref></a> ]{4}
    <dd>Sets <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start①③">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment⑨">marker-segment</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid①⓪">marker-mid</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end①②">marker-end</a> to the four <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①⑧">&lt;marker-ref></a> values
  specified, and sets <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern①②">marker-pattern</a> to <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none⑨">none</a>.
    <dt>[ <a class="css" data-link-type="maybe" href="#valdef-marker-pattern-none" id="ref-for-valdef-marker-pattern-none①⓪">none</a> | <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef①⑨">&lt;marker-ref></a> ]{1,4} / <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern①③">marker-pattern</a>
    <dd>Sets <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start①④">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment①⓪">marker-segment</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid①①">marker-mid</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end①③">marker-end</a> to the four <a class="production css" data-link-type="type" href="#DataTypeMarkerRef" id="ref-for-DataTypeMarkerRef②⓪">&lt;marker-ref></a> values
  specified before the slash, and sets <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern①④">marker-pattern</a> to
  the value after the slash.
    <dt>anything else
    <dd>Sets <a class="property css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start①⑤">marker-start</a>, <a class="property css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment①①">marker-segment</a>, <a class="property css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid①②">marker-mid</a> and <a class="property css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end①④">marker-end</a> to <a class="css" data-link-type="maybe" href="#valdef-marker-start-none" id="ref-for-valdef-marker-start-none①">none</a>,
  and sets <a class="property css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern①⑤">marker-pattern</a> to the specified value.
   </dl>
   <h2 class="heading settled" data-level="8" id="MarkerKnockout"><span class="secno">8. </span><span class="content">Knocking out the stroke: the <a class="property css" data-link-type="property" href="#propdef-marker-knockout-left" id="ref-for-propdef-marker-knockout-left">marker-knockout-left</a> and <a class="property css" data-link-type="property" href="#propdef-marker-knockout-right" id="ref-for-propdef-marker-knockout-right">marker-knockout-right</a> properties</span><a class="self-link" href="#MarkerKnockout"></a></h2>
   <p class="issue" id="issue-37a27154"><a class="self-link" href="#issue-37a27154"></a> The marker knockout properties are still under heavy development
and are subject to change. Feedback on how authors might prefer to specify marker
knockout shapes is welcome.</p>
   <table class="def propdef" data-link-for-hint="marker-knockout-left">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-marker-knockout-left">marker-knockout-left</dfn>, <dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-marker-knockout-right">marker-knockout-right</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod"><a class="production css" data-link-type="type" href="#typedef-knockout-offset" id="ref-for-typedef-knockout-offset">&lt;knockout-offset></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①②">|</a> <a class="production css" data-link-type="type" href="#typedef-knockout-shape" id="ref-for-typedef-knockout-shape">&lt;knockout-shape></a> [ at <a class="production css" data-link-type="type" href="#typedef-knockout-offset" id="ref-for-typedef-knockout-offset①">&lt;knockout-offset></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt③">?</a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>0
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④③">marker</a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>see prose
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar
     <tr>
      <th>Media:
      <td>visual
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animatable:</a>
      <td>yes
   </table>
   <p>where:</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-knockout-offset">&lt;knockout-offset></dfn> = <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value⑧">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①③">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑧">&lt;percentage></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①④">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①①">&lt;number></a></pre>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-knockout-shape">&lt;knockout-shape></dfn> =[ <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value⑨">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑤">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑨">&lt;percentage></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑥">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①②">&lt;number></a> ] inverted<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt④">?</a> circle <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑦">|</a>
[ <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①⓪">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑧">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⓪">&lt;percentage></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑨">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①③">&lt;number></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-num" id="ref-for-mult-num">{2}</a> inverted<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt⑤">?</a> ellipse <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⓪">|</a>
[ <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①①">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②①">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①①">&lt;percentage></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②②">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①④">&lt;number></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-num-range" id="ref-for-mult-num-range②">{1,2}</a> inverted<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt⑥">?</a> [ rectangle <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②③">|</a> triangle ]
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> New in SVG 2.  Added to allow authors to specify
parts of a stroke that should be clipped away when a marker is
placed on a path.  This helps with arrowheads, where the stroke
must not be visible behind the pointy end, and with hollow markers
as seen in metro maps, where the center of a marker is transparent
and the stroke should not show through.</p>
   <p>When specified on a <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④④">marker</a> element, the <a class="property css" data-link-type="property" href="#propdef-marker-knockout-left" id="ref-for-propdef-marker-knockout-left①">marker-knockout-left</a> and <a class="property css" data-link-type="property" href="#propdef-marker-knockout-right" id="ref-for-propdef-marker-knockout-right①">marker-knockout-right</a> properties
together specify a shape to clip away when when painting the stroke of an
element that uses the marker. <a class="property css" data-link-type="property" href="#propdef-marker-knockout-left" id="ref-for-propdef-marker-knockout-left②">marker-knockout-left</a> specifies the
left side of the shape and <a class="property css" data-link-type="property" href="#propdef-marker-knockout-right" id="ref-for-propdef-marker-knockout-right②">marker-knockout-right</a> the right side.
These two sides are joined together with straight lines.</p>
   <p>The <a class="production css" data-link-type="type" href="#typedef-knockout-offset" id="ref-for-typedef-knockout-offset②">&lt;knockout-offset></a> part of the value, if specified,
is the offset from the marker position, outwards, along the tangent,
that the knockout shape side is placed at.  This is the <em>knockout shape
side position</em>.  If it is omitted, then the offset is assumed to be zero.
The value can be negative.  Percentage values refer to the width of the marker
contents viewport.</p>
   <p>The <a class="production css" data-link-type="type" href="#typedef-knockout-shape" id="ref-for-typedef-knockout-shape①">&lt;knockout-shape></a> part of the value, if specified,
is the left or right side of the knockout shape. Values have the
following meanings:</p>
   <dl>
    <dt>[ <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①②">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①②">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①⑤">&lt;number></a> ]{2} inverted? ellipse
    <dd>
     <p>The knockout shape side is an arc.  The lengths or percentages specified
    are the x-radius and y-radius of the ellipse from which the arc is taken.
    A length is interpreted as being in the marker contents coordinate system.
    If the first value is a percentage, then it refers to the width of the
    marker contents viewport, and if the second value is a percentage then
    it refers to the height of the marker contents viewport.</p>
     <p>If the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted" id="ref-for-valdef-media-inverted-colors-inverted">inverted</a> keyword is not specified,
    then the arc is constructed by placing the center of the ellipse at the knockout
    shape side position.  First we consider only the 180° arc of the ellipse which
    points in the direction of the start of the start of the path, if this is
    the left knockout shape side, or the end of the path if this is the right knockout
    shape side.  If the y-radius is less than or equal to half of the stroke width of
    the path the marker is on, then this 180° arc is the final knockout shape side.
    Otherwise, we intersect the arc with the two lines that are offset, by half
    of the stroke width, from the tangent to the marker orientation.
    The resulting arc with its start and end points on these two lines is the
    final knockout shape side.</p>
     <p>If the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted" id="ref-for-valdef-media-inverted-colors-inverted①">inverted</a> keyword <em>is</em> specified,
    then the arc is constructed by placing the center of the ellipse at a distance
    of two times its x-radius along the tangent to the marker orientation,
    in the direction of the start of the path if this is the left knockout shape
    side, or the end of the path if this is the right knockout shape side.
    We consider only the 180° arc of the ellipse that is pointing in the opposite
    direction.  If the y-radius is less or equal to half of the stroke width
    of the path the marker is on, then this 180° arc is the final knockout shape
    side.  Otherwise, we intersect the arc with the two lines that are offset,
    by half of the stroke width, from the tangent to the marker orientation.
    The resulting arc with its side and end points on these two lines
    is the final knockout shape side.</p>
    <dt>[ <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①③">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①③">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①⑥">&lt;number></a> ] inverted? circle
    <dd>
     <p>The knockout shape side is an arc.  The shape is computed in the same
    way as the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-images-3/#valdef-radial-shape-ellipse" id="ref-for-valdef-radial-shape-ellipse">ellipse</a> shape, but with
    both radii of the ellipse being the specified length or percentage,
    and with a percentage referring to the size of the marker contents viewport.</p>
    <dt>[ <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①④">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①④">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①⑦">&lt;number></a> ]{1,2} inverted? rectangle
    <dd>
     <p>The knockout shape side comprises one or two rectangles.  These
    rectangles are aligned such that their top and bottom edges are
    parallel to the tangent to the marker orientation.
    The length or percentage is a width and the second, if specified,
    is a height.  Percentage values here refer to the width and height
    of the marker contents viewport, respectively.</p>
     <p>If the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted" id="ref-for-valdef-media-inverted-colors-inverted②">inverted</a> keyword is not specified,
    then the knockout shape side is a single rectangle.  The width of the
    rectangle is the specified width value.  The height of the rectangle is the maximum
    of the stroke width of the path on which the marker exists and the specified
    height value, if it is specified.  If it is not specified, then the height of the
    rectangle is just the stroke width.
    The rectangle is posisioned such that the center of its right hand edge
    is positioned at the knockout shape side position
    and the extent of its width is in the direction of the start of the path,
    if this is the left knockout shape side, or the end of the path if this
    is the right knockout shape side.</p>
     <p>If the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted" id="ref-for-valdef-media-inverted-colors-inverted③">inverted</a> keyword is specified,
    then the knockout shape side comprises two rectangles.  If the specified
    height is greater than or equal to the stroke width, then the height
    of these rectangles is zero; otherwise, their heights are half of the
    difference between the stroke width and the specified height.  The
    top edge of one of the rectangles is half of the stroke width away
    from the marker orientation tangent line, with its bottom edge closer to the tangent line.
    The other rectangle has its bottom edge half of the stroke width
    away from the tangent line and its top edge closer to the tangent line.
    The right edges of the rectangles are aligned with each other and
    also with the line perpendicular to the marker orientation tangent line.
    The extent of the widths of the rectangles is in the direction
    of the start of the path, if this is the left knockout shape side,
    or the end of the path if this is the right knockout shape side.</p>
    <dt>[ <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①⑤">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⑤">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①⑧">&lt;number></a> ]{1,2} inverted? [ rectangle | triangle ]
    <dd>
     <p>The knockout shape side comprises one or two rectangles.  These
    rectangles are aligned such that their top and bottom edges are
    parallel to the tangent to the marker orientation.
    The length or percentage is a width and the second, if specified,
    is a height.  Percentage values here refer to the width and height
    of the marker contents viewport, respectively.</p>
     <p>If the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted" id="ref-for-valdef-media-inverted-colors-inverted④">inverted</a> keyword is not specified,
    then the knockout shape side is a single rectangle.  The width of the
    rectangle is the specified width value.  The height of the rectangle is the maximum
    of the stroke width of the path on which the marker exists and the specified
    height value, if it is specified.  If it is not specified, then the height of the
    rectangle is just the stroke width.
    The rectangle is positioned such that the center of its right hand edge
    is positioned at the knockout shape side position
    and the extent of its width is in the direction of the start of the path,
    if this is the left knockout shape side, or the end of the path if this
    is the right knockout shape side.</p>
     <p>If the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted" id="ref-for-valdef-media-inverted-colors-inverted⑤">inverted</a> keyword is specified,
    then the knockout shape side comprises two rectangles.  If the specified
    height is greater than or equal to the stroke width, then the height
    of these rectangles is zero; otherwise, their heights are half of the
    difference between the stroke width and the specified height.  The
    top edge of one of the rectangles is half of the stroke width away
    from the marker orientation tangent line, with its bottom edge closer to the tangent line.
    The other rectangle has its bottom edge half of the stroke width
    away from the tangent line and its top edge closer to the tangent line.
    The right edges of the rectangles are aligned with each other and
    also with the line perpendicular to the marker orientation tangent line.
    The extent of the widths of the rectangles is in the direction
    of the start of the path, if this is the left knockout shape side,
    or the end of the path if this is the right knockout shape side.</p>
    <dt>[ <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①⑥">&lt;length></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⑥">&lt;percentage></a> | <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①⑨">&lt;number></a> ]{1,2} inverted? triangle
    <dd>
     <p class="issue" id="issue-2f43b42f"><a class="self-link" href="#issue-2f43b42f"></a>...</p>
   </dl>
   <p class="issue" id="issue-f84fbb3f"><a class="self-link" href="#issue-f84fbb3f"></a> A diagram showing the construction of these shapes
would be helpful.</p>
   <p class="issue" id="issue-fcb1a084"><a class="self-link" href="#issue-fcb1a084"></a> Need to define how the two shape sides are joined together.
It’s taking the top and bottom points from both shapes, drawing vertical
lines to the edge of the stroke shape, then drawing two horizontal lines
to join them together.</p>
   <p>The two knockout shape sides must not intersect, although they may
touch.  If they do intersect, then no knockout is performed for that
marker when painting the stroke.</p>
   <p class="note" role="note"><span class="marker">Note:</span> For example, using <span class="css">8px inverted triangle at -4px</span> for <a class="property css" data-link-type="property" href="#propdef-marker-knockout-left" id="ref-for-propdef-marker-knockout-left③">marker-knockout-left</a> and <span class="css">8px triangle</span> for <a class="property css" data-link-type="property" href="#propdef-marker-knockout-right" id="ref-for-propdef-marker-knockout-right③">marker-knockout-right</a> is allowed, as the two straight lines that form the left shape side do not intersect
with either of the two straight lines that form the right shape side.
However, using <span class="css">8px triangle at -4px</span> for
both properties would obviously cause an intersection, and so would not
be allowed.</p>
   <p></p>
   <div class="figure">
     <img alt="Image showing various marker knockout shapes." class="bordered" src="images/knockout-shapes.svg" style="max-width: none"> 
    <p class="caption">An illustration of the use of inverted and non-inverted circle,
  rectangle and triangle knockout shapes, at both 0px and 10px offsets.
  The value beneath each pink stroke is used for both <a class="property css" data-link-type="property" href="#propdef-marker-knockout-left" id="ref-for-propdef-marker-knockout-left④">marker-knockout-left</a> and <a class="property css" data-link-type="property" href="#propdef-marker-knockout-right" id="ref-for-propdef-marker-knockout-right④">marker-knockout-right</a>.  (The marker itself here has no
  content and does not render anything.)</p>
   </div>
   <div class="issue" id="issue-cb08f5ff">
    <a class="self-link" href="#issue-cb08f5ff"></a> 
    <p>While this is nice for straight line segments, if the
  path is curved at the marker position then it might be preferable to
  have the knockout shapes aligned with the tangent at the knockout shape
  side position, rather than with the marker orientation.  Especially
  if the knockout is being used as a fancy dash pattern.  Then we would
  likely want to join the left and right sides of the shape with a curved
  shape (along the stroke) and not just a rectangle.  If we allow this,
  then computing that shape is going to be hard, and will mean that
  determining whether the left and right sides of the knockout shape
  intersect, and determining what the intersections of all of the knockout shapes
  on a path are, is also going to be hard.  Perhaps that can be handled by
  extending dashing line caps with these shapes rather than here?  Regardless of
  whether it is handled by marker knockouts or new line caps, it’s going
  to be non-trivial to compute the right shapes.</p>
    <p>Another thing to note is that knockouts here are like setting up
  a clipping path to remove parts of the stroke when it’s painted.  That
  means that if the stroke intersects itself over the knockout areas,
  it’s going to be knocked out of all bits of the stroke that go
  through those areas.  That may or may not be fine depending on
  your use cases.</p>
   </div>
   <h2 class="heading settled" data-level="9" id="MarkerAlgorithm"><span class="secno">9. </span><span class="content">Details on how markers are rendered</span><a class="self-link" href="#MarkerAlgorithm"></a></h2>
   <p>Markers are drawn after the given object is filled and stroked.</p>
   <p>For each marker that is drawn, a temporary new user coordinate
system is established so that the marker will be positioned and sized
correctly, as follows:</p>
   <ul>
    <li>The axes of the temporary new user coordinate system are aligned
  according to the <a data-link-type="element-attr" href="#element-attrdef-marker-orient" id="ref-for-element-attrdef-marker-orient③">orient</a> attribute on the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④⑤">marker</a> element and the slope of the curve at the given vertex.
  (Note: if there is a discontinuity at a vertex, the slope is the
  average of the slopes of the two segments of the curve that join
  at the given vertex. If a slope cannot be determined, the slope is
  assumed to be zero.)
    <li>A temporary new coordinate system is established by attribute <a data-link-type="element-attr" href="#element-attrdef-marker-markerunits" id="ref-for-element-attrdef-marker-markerunits④">markerUnits</a>. If <a data-link-type="element-attr" href="#element-attrdef-marker-markerunits" id="ref-for-element-attrdef-marker-markerunits⑤">markerUnits</a> equals <a class="css" data-link-type="maybe" href="#valdef-markerunits-strokewidth" id="ref-for-valdef-markerunits-strokewidth">strokeWidth</a>, then the temporary new
  user coordinate system is the result of scaling the current
  user coordinate system by the current value of property <a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width" id="ref-for-propdef-stroke-width①">stroke-width</a>. If <a data-link-type="element-attr" href="#element-attrdef-marker-markerunits" id="ref-for-element-attrdef-marker-markerunits⑥">markerUnits</a> equals <a class="css" data-link-type="maybe" href="#valdef-markerunits-userspaceonuse" id="ref-for-valdef-markerunits-userspaceonuse">userSpaceOnUse</a>, then no extra scale transformation is applied.
    <li>An additional set of transformations might occur if the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④⑥">marker</a> element includes a <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox⑨">viewBox</a> attribute, in
  which case additional transformations are set up to produce the necessary
  result due to attributes <a data-link-type="element-attr" href="#element-attrdef-marker-viewbox" id="ref-for-element-attrdef-marker-viewbox①⓪">viewBox</a> and <a data-link-type="element-attr" href="#element-attrdef-marker-preserveaspectratio" id="ref-for-element-attrdef-marker-preserveaspectratio⑥">preserveAspectRatio</a>.
    <li>If the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-overflow-3/#propdef-overflow" id="ref-for-propdef-overflow②">overflow</a> property on the <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④⑦">marker</a> element
  indicates that the marker needs to be clipped to its viewport, then an
  implicit clipping path is established at the bounds of the viewport.
   </ul>
   <p>The rendering effect of a marker is as if the contents of the
referenced <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④⑧">marker</a> element were deeply cloned
into a separate non-exposed DOM tree for each instance of the
marker. Because the cloned DOM tree is non-exposed, the SVG DOM
does not show the cloned instance of the marker.</p>
   <p>For user agents that support <a href="styling.html#StylingWithCSS">Styling
with CSS</a>, the conceptual deep cloning of the referenced <a data-link-type="element" href="#elementdef-marker" id="ref-for-elementdef-marker④⑨">marker</a> element into a non-exposed DOM tree also
copies any property values resulting from <a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html">the CSS cascade</a> ([<a href="refs.html#ref-CSS21">CSS21</a>], chapter 6) and
property inheritance on the referenced element and its contents. CSS 2.1
selectors can be applied to the original (i.e., referenced) elements
because they are part of the formal document structure. CSS 2.1 selectors
cannot be applied to the (conceptually) cloned DOM tree because its
contents are not part of the formal document structure.</p>
   <div class="example" id="example-df91dd43">
    <a class="self-link" href="#example-df91dd43"></a> 
    <p>For illustrative purposes, we’ll repeat the marker example shown earlier:</p>
<pre><code class="html">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="4in" height="2in"
     viewBox="0 0 4000 2000"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;marker id="Triangle"
      viewBox="0 0 10 10" refX="0" refY="5"
      markerUnits="strokeWidth"
      markerWidth="4" markerHeight="3"
      orient="auto">
      &lt;path d="M 0 0 L 10 5 L 0 10 z" />
    &lt;/marker>
  &lt;/defs>
  &lt;rect x="10" y="10" width="3980" height="1980"
       fill="none" stroke="blue" stroke-width="10" />
  &lt;desc>Placing an arrowhead at the end of a path.
  &lt;/desc>
  &lt;path d="M 1000 750 L 2000 750 L 2500 1250"
        fill="none" stroke="black" stroke-width="100"
        marker-end="url(#Triangle)"  />
&lt;/svg>
</code></pre>
   </div>
   <div class="example" id="example-cf4c8f84">
    <a class="self-link" href="#example-cf4c8f84"></a> 
    <p>The rendering effect of the above file will be visually identical to
  the following:</p>
<pre><code class="html">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="4in" height="2in"
     viewBox="0 0 4000 2000"
     xmlns="http://www.w3.org/2000/svg">
  &lt;desc>File which produces the same effect
      as the marker example file, but without
      using markers.
  &lt;/desc>
  &lt;rect x="10" y="10" width="3980" height="1980"
       fill="none" stroke="blue" stroke-width="10" />
  &lt;!-- The path draws as before, but without the marker properties -->
  &lt;path d="M 1000 750 L 2000 750 L 2500 1250"
        fill="none" stroke="black" stroke-width="100"  />
  &lt;!-- The following logic simulates drawing a marker
       at final vertex of the path. -->
  &lt;!-- First off, move the origin of the user coordinate system
       so that the origin is now aligned with the end point of the path. -->
  <strong>&lt;g transform="translate(2500,1250)" ></strong>
    &lt;!-- Rotate the coordinate system 45 degrees because
         the marker specified orient="auto" and the final segment
         of the path is going in the direction of 45 degrees. -->
    <strong>&lt;g transform="rotate(45)" ></strong>
      &lt;!-- Scale the coordinate system to match the coordinate system
           indicated by the 'markerUnits' attributes, which in this case has
           a value of 'strokeWidth'. Therefore, scale the coordinate system
           by the current value of the 'stroke-width' property, which is 100. -->
      <strong>&lt;g transform="scale(100)" ></strong>
        &lt;!-- Translate the coordinate system by
             (-refX*viewBoxToMarkerUnitsScaleX, -refY*viewBoxToMarkerUnitsScaleY)
             in order that (refX,refY) within the marker will align with the vertex.
             In this case, we use the default value for preserveAspectRatio
             ('xMidYMid meet'), which means find a uniform scale factor
             (i.e., viewBoxToMarkerUnitsScaleX=viewBoxToMarkerUnitsScaleY)
             such that the viewBox fits entirely within the viewport ('meet') and
             is center-aligned ('xMidYMid'). In this case, the uniform scale factor
             is markerHeight/viewBoxHeight=3/10=.3. Therefore, translate by
             (-refX*.3,-refY*.3)=(0*.3,-5*.3)=(0,-1.5). -->
        <strong>&lt;g transform="translate(0,-1.5)" ></strong>
          &lt;!-- There is an implicit clipping path because the user agent style
               sheet says that the 'overflow' property for markers has the value
               'hidden'. To achieve this, create a clipping path at the bounds
               of the viewport. Note that in this case the viewport extends
               0.5 units to the left and right of the viewBox due to
               a uniform scale factor, different ratios for markerWidth/viewBoxWidth
               and markerHeight/viewBoxHeight, and 'xMidYMid' alignment -->
          <strong>&lt;clipPath id="cp1" >
            &lt;rect x="-0.5" y="0" width="4" height="3" />
          &lt;/clipPath></strong>
          <strong>&lt;g clip-path="url(#cp1)" ></strong>
            &lt;!-- Scale the coordinate system by the uniform scale factor
                 markerHeight/viewBoxHeight=3/10=.3 to set the coordinate
                 system to viewBox units. -->
            <strong>&lt;g transform="scale(.3)" ></strong>
              &lt;!-- This 'g' element carries all property values that result from
                   cascading and inheritance of properties on the original 'marker' element.
                   In this example, neither fill nor stroke was specified on the 'marker'
                   element or any ancestors of the 'marker', so the initial values of
                   "black" and "none" are used, respectively. -->
             <strong>&lt;g fill="black" stroke="none" ></strong>
                &lt;!-- Expand out the contents of the 'marker' element. -->
                <strong>&lt;path d="M 0 0 L 10 5 L 0 10 z" /></strong>
              <strong>&lt;/g></strong>
            <strong>&lt;/g></strong>
          <strong>&lt;/g></strong>
        <strong>&lt;/g></strong>
      <strong>&lt;/g></strong>
    <strong>&lt;/g></strong>
  <strong>&lt;/g></strong>
&lt;/svg>
</code></pre>
    <p class="view-as-svg"><a href="images/marker-simulated.svg">View this example as SVG (SVG-enabled browsers only)</a></p>
   </div>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <section>
    <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
    <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
    <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
   </section>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#typedef-child-selector">&lt;child-selector></a><span>, in § 3</span>
   <li><a href="#element-attrdef-marker-href">href</a><span>, in § 2</span>
   <li><a href="#typedef-knockout-offset">&lt;knockout-offset></a><span>, in § 8</span>
   <li><a href="#typedef-knockout-shape">&lt;knockout-shape></a><span>, in § 8</span>
   <li><a href="#markable-elements">markable elements</a><span>, in § 1</span>
   <li>
    marker
    <ul>
     <li><a href="#elementdef-marker">(element)</a><span>, in § 2</span>
     <li><a href="#propdef-marker">(property)</a><span>, in § 7</span>
    </ul>
   <li><a href="#propdef-marker-end">marker-end</a><span>, in § 4</span>
   <li><a href="#typedef-marker-gap">&lt;marker-gap></a><span>, in § 6</span>
   <li><a href="#element-attrdef-marker-markerheight">markerHeight</a><span>, in § 2</span>
   <li><a href="#propdef-marker-knockout-left">marker-knockout-left</a><span>, in § 8</span>
   <li><a href="#propdef-marker-knockout-right">marker-knockout-right</a><span>, in § 8</span>
   <li><a href="#propdef-marker-mid">marker-mid</a><span>, in § 4</span>
   <li><a href="#propdef-marker-pattern">marker-pattern</a><span>, in § 6</span>
   <li><a href="#marker-properties">marker properties</a><span>, in § 1</span>
   <li>
    &lt;marker-ref>
    <ul>
     <li><a href="#DataTypeMarkerRef">(type)</a><span>, in § 3</span>
     <li><a href="#valdef-marker-segment-marker-ref">value for marker-segment</a><span>, in § 5</span>
     <li><a href="#valdef-marker-start-marker-ref">value for marker-start</a><span>, in § 4</span>
    </ul>
   <li><a href="#typedef-marker-ref-group">&lt;marker-ref-group></a><span>, in § 6</span>
   <li><a href="#propdef-marker-segment">marker-segment</a><span>, in § 5</span>
   <li><a href="#propdef-marker-start">marker-start</a><span>, in § 4</span>
   <li><a href="#element-attrdef-marker-markerunits">markerUnits</a><span>, in § 2</span>
   <li><a href="#element-attrdef-marker-markerwidth">markerWidth</a><span>, in § 2</span>
   <li>
    none
    <ul>
     <li><a href="#valdef-marker-pattern-none">value for marker-pattern</a><span>, in § 6</span>
     <li><a href="#valdef-marker-segment-none">value for marker-segment</a><span>, in § 5</span>
     <li><a href="#valdef-marker-start-none">value for marker-start</a><span>, in § 4</span>
    </ul>
   <li><a href="#element-attrdef-marker-orient">orient</a><span>, in § 2</span>
   <li><a href="#element-attrdef-marker-position">position</a><span>, in § 2</span>
   <li><a href="#positioned-markers">positioned markers</a><span>, in § 1</span>
   <li><a href="#element-attrdef-marker-preserveaspectratio">preserveAspectRatio</a><span>, in § 2</span>
   <li><a href="#element-attrdef-marker-refx">refX</a><span>, in § 2</span>
   <li><a href="#element-attrdef-marker-refy">refY</a><span>, in § 2</span>
   <li><a href="#repeating-markers">repeating markers</a><span>, in § 1</span>
   <li><a href="#segment-markers">segment markers</a><span>, in § 1</span>
   <li><a href="#valdef-markerunits-strokewidth">strokeWidth</a><span>, in § 2</span>
   <li><a href="#valdef-markerunits-userspaceonuse">userSpaceOnUse</a><span>, in § 2</span>
   <li><a href="#vertex-markers">vertex markers</a><span>, in § 1</span>
   <li><a href="#element-attrdef-marker-viewbox">viewBox</a><span>, in § 2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSS-BACKGROUNDS-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d27a809f">background-position</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-DISPLAY-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="e7f0dd6c">display</span>
     <li><span class="dfn-paneled" id="55e8f5de">none</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-IMAGES-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="44be0cef">ellipse</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-MASKING-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="f00710cb">clippath</span>
     <li><span class="dfn-paneled" id="37a35a4b">mask</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-OVERFLOW-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="e8907287">hidden</span>
     <li><span class="dfn-paneled" id="86928bde">overflow</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-SPEECH-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="e3683f07">child</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="68150e76">*</span>
     <li><span class="dfn-paneled" id="bedd9d42">+</span>
     <li><span class="dfn-paneled" id="3559c926">&lt;angle></span>
     <li><span class="dfn-paneled" id="fb030e6c">&lt;length></span>
     <li><span class="dfn-paneled" id="16310992">&lt;number></span>
     <li><span class="dfn-paneled" id="15f5b381">&lt;percentage></span>
     <li><span class="dfn-paneled" id="fa293cdd">&lt;url></span>
     <li><span class="dfn-paneled" id="537cf076">?</span>
     <li><span class="dfn-paneled" id="938ba280">{a,b}</span>
     <li><span class="dfn-paneled" id="b0d8ebd9">{a}</span>
     <li><span class="dfn-paneled" id="6ec67710">|</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FILL-STROKE-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="890a8358">fill</span>
     <li><span class="dfn-paneled" id="de9e224f">stroke</span>
     <li><span class="dfn-paneled" id="63544174">stroke-width</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FILTER-EFFECTS-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5dd880c8">filter</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIAQUERIES-5]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="3b3e8d30">inverted</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SVG2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c56d959e">SVGMarkerElement</span>
     <li><span class="dfn-paneled" id="1179e969">a</span>
     <li><span class="dfn-paneled" id="793853ba">container element</span>
     <li><span class="dfn-paneled" id="94c55d9f">descriptive element</span>
     <li><span class="dfn-paneled" id="511b3636">foreignobject</span>
     <li><span class="dfn-paneled" id="11a8832d">image</span>
     <li><span class="dfn-paneled" id="f861d7f6">line</span>
     <li><span class="dfn-paneled" id="33f830f2">paint server element</span>
     <li><span class="dfn-paneled" id="0c48b9b1">path</span>
     <li><span class="dfn-paneled" id="fe8a389a">polygon</span>
     <li><span class="dfn-paneled" id="ff5047e4">polyline</span>
     <li><span class="dfn-paneled" id="409e2104">presentation attributes</span>
     <li><span class="dfn-paneled" id="21000c7a">script</span>
     <li><span class="dfn-paneled" id="3a660536">shape elements</span>
     <li><span class="dfn-paneled" id="235a22ce">structural element</span>
     <li><span class="dfn-paneled" id="696393c9">style</span>
     <li><span class="dfn-paneled" id="c400bde8">switch</span>
     <li><span class="dfn-paneled" id="653040a2">symbol</span>
     <li><span class="dfn-paneled" id="09b0661c">text</span>
     <li><span class="dfn-paneled" id="f24162b9">use</span>
     <li><span class="dfn-paneled" id="a82a381d">view</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
   <dd>Elika Etemad; Brad Kemper. <a href="https://drafts.csswg.org/css-backgrounds/"><cite>CSS Backgrounds and Borders Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-backgrounds/">https://drafts.csswg.org/css-backgrounds/</a>
   <dt id="biblio-css-display-4">[CSS-DISPLAY-4]
   <dd><a href="https://drafts.csswg.org/css-display-4/"><cite>CSS Display Module Level 4</cite></a>. Editor's Draft. URL: <a href="https://drafts.csswg.org/css-display-4/">https://drafts.csswg.org/css-display-4/</a>
   <dt id="biblio-css-images-3">[CSS-IMAGES-3]
   <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a href="https://drafts.csswg.org/css-images-3/"><cite>CSS Images Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-images-3/">https://drafts.csswg.org/css-images-3/</a>
   <dt id="biblio-css-masking-1">[CSS-MASKING-1]
   <dd>Dirk Schulze; Brian Birtles; Tab Atkins Jr.. <a href="https://drafts.fxtf.org/css-masking-1/"><cite>CSS Masking Module Level 1</cite></a>. URL: <a href="https://drafts.fxtf.org/css-masking-1/">https://drafts.fxtf.org/css-masking-1/</a>
   <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
   <dd>Elika Etemad; Florian Rivoal. <a href="https://drafts.csswg.org/css-overflow-3/"><cite>CSS Overflow Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-overflow-3/">https://drafts.csswg.org/css-overflow-3/</a>
   <dt id="biblio-css-speech-1">[CSS-SPEECH-1]
   <dd>Léonie Watson; Elika Etemad. <a href="https://drafts.csswg.org/css-speech-1/"><cite>CSS Speech Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-speech-1/">https://drafts.csswg.org/css-speech-1/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-4/"><cite>CSS Values and Units Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
   <dt id="biblio-fill-stroke-3">[FILL-STROKE-3]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.fxtf.org/fill-stroke/"><cite>CSS Fill and Stroke Module Level 3</cite></a>. URL: <a href="https://drafts.fxtf.org/fill-stroke/">https://drafts.fxtf.org/fill-stroke/</a>
   <dt id="biblio-filter-effects-1">[FILTER-EFFECTS-1]
   <dd>Dirk Schulze; Dean Jackson. <a href="https://drafts.fxtf.org/filter-effects-1/"><cite>Filter Effects Module Level 1</cite></a>. URL: <a href="https://drafts.fxtf.org/filter-effects-1/">https://drafts.fxtf.org/filter-effects-1/</a>
   <dt id="biblio-mediaqueries-5">[MEDIAQUERIES-5]
   <dd>Dean Jackson; et al. <a href="https://drafts.csswg.org/mediaqueries-5/"><cite>Media Queries Level 5</cite></a>. URL: <a href="https://drafts.csswg.org/mediaqueries-5/">https://drafts.csswg.org/mediaqueries-5/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-svg11">[SVG11]
   <dd>Erik Dahlström; et al. <a href="https://www.w3.org/TR/SVG11/"><cite>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</cite></a>. 16 August 2011. REC. URL: <a href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
   <dt id="biblio-svg2">[SVG2]
   <dd>Amelia Bellamy-Royds; et al. <a href="https://svgwg.org/svg2-draft/"><cite>Scalable Vector Graphics (SVG) 2</cite></a>. URL: <a href="https://svgwg.org/svg2-draft/">https://svgwg.org/svg2-draft/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">Property Index</span><a class="self-link" href="#property-index"></a></h2>
  <div class="big-element-wrapper">
   <table class="index">
    <thead>
     <tr>
      <th scope="col">Name
      <th scope="col">Value
      <th scope="col">Initial
      <th scope="col">Applies to
      <th scope="col">Inh.
      <th scope="col">%ages
      <th scope="col">Ani­mat­able
      <th scope="col">Canonical order
      <th scope="col">Com­puted value
      <th scope="col">Media
    <tbody>
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-marker" id="ref-for-propdef-marker③">marker</a>
      <td>[ none | &lt;marker-ref> ]{1,4} [ / marker-pattern ]?  | &lt;marker-ref>{0,4} [ &lt;length> | &lt;percentage> | &lt;number> ] [ &lt;length> | &lt;percentage> | &lt;number> | &lt;marker-ref> ]*
      <td>none
      <td>markable elements
      <td>no
      <td>see individual properties
      <td>see individual properties
      <td>per grammar
      <td>see individual properties
      <td>visual
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-marker-end" id="ref-for-propdef-marker-end①⑤">marker-end</a>
      <td>none | &lt;marker-ref>
      <td>none
      <td>markable elements
      <td>yes
      <td>n/a
      <td>yes
      <td>per grammar
      <td>as specified, but with &lt;url> values (that are part of a &lt;marker-ref>) made absolute
      <td>visual
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-marker-knockout-left" id="ref-for-propdef-marker-knockout-left⑤">marker-knockout-left</a>
      <td>&lt;knockout-offset> | &lt;knockout-shape> [ at &lt;knockout-offset> ]?
      <td>0
      <td>marker
      <td>no
      <td>see prose
      <td>yes
      <td>per grammar
      <td>as specified
      <td>visual
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-marker-knockout-right" id="ref-for-propdef-marker-knockout-right⑤">marker-knockout-right</a>
      <td>&lt;knockout-offset> | &lt;knockout-shape> [ at &lt;knockout-offset> ]?
      <td>0
      <td>marker
      <td>no
      <td>see prose
      <td>yes
      <td>per grammar
      <td>as specified
      <td>visual
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-marker-mid" id="ref-for-propdef-marker-mid①③">marker-mid</a>
      <td>none | &lt;marker-ref>
      <td>none
      <td>markable elements
      <td>yes
      <td>n/a
      <td>yes
      <td>per grammar
      <td>as specified, but with &lt;url> values (that are part of a &lt;marker-ref>) made absolute
      <td>visual
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-marker-pattern" id="ref-for-propdef-marker-pattern①⑥">marker-pattern</a>
      <td>&lt;marker-gap>? &lt;marker-ref-group> [ &lt;marker-gap> &lt;marker-gap> ]* &lt;marker-gap>?
      <td>none
      <td>markable elements
      <td>yes
      <td>n/a
      <td>yes
      <td>per grammar
      <td>as specified, but with &lt;url> values (that are part of a &lt;marker-ref>) made absolute
      <td>visual
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-marker-segment" id="ref-for-propdef-marker-segment①②">marker-segment</a>
      <td>none | &lt;marker-ref>
      <td>none
      <td>markable elements
      <td>yes
      <td>n/a
      <td>yes
      <td>per grammar
      <td>as specified, but with &lt;url> values (that are part of a &lt;marker-ref>) made absolute
      <td>visual
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-marker-start" id="ref-for-propdef-marker-start①⑥">marker-start</a>
      <td>none | &lt;marker-ref>
      <td>none
      <td>markable elements
      <td>yes
      <td>n/a
      <td>yes
      <td>per grammar
      <td>as specified, but with &lt;url> values (that are part of a &lt;marker-ref>) made absolute
      <td>visual
   </table>
  </div>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> There are probably better terms to use than "vertex" and
"segment" markers.  At least, "vertex" would go more naturally with "edge",
but we should use more natural sounding names. <a class="issue-return" href="#issue-d6146a12" title="Jump to section">↵</a></div>
   <div class="issue">This needs to reference a definition for how
      directionality of a given start/mid/end vertex is calculated.
      Part of that (which should be moved somewhere more appropriate) is in
      the <a href="implnote.html#PathElementImplementationNotes">path element implementation notes</a>.
      Some wording from SVG 1.1 appears to have been lost, compare with <a href="http://www.w3.org/TR/SVG11/painting.html#OrientAttribute">this</a>. <br><br> Here’s an example that is a bit unclear currently: <code style="white-space:pre"> &lt;svg>
  &lt;marker id="m" orient="auto" overflow="visible">
    &lt;rect x="-1" y="-0.5" width="1" height="1" fill="green"/>
  &lt;/marker>
  &lt;path d="M50,0C50,50 50,100 50,100" marker-end="url(#m)" stroke-width="100" stroke="red"/>
&lt;/svg> </code> <br> The second control point and the endpoint coincide, should this mean that the direction of the endpoint is a) <em>unknown [aka default to 0 degrees]</em> or
    b) <em>that you have to look at the previous segment(s)/command(s) until a direction can be established</em>? <a class="issue-return" href="#issue-2a8a8ee0" title="Jump to section">↵</a></div>
   <div class="issue">Should a negative or greater than path length value be
  an "in error" / "unsupported" value? <a class="issue-return" href="#issue-79ea2baa" title="Jump to section">↵</a></div>
   <div class="issue">We should say something about referencing <a data-link-type="element" href="#elementdef-marker">marker</a> elements that have an <a data-link-type="element-attr" href="#element-attrdef-marker-href">href</a> with the <a data-link-type="dfn" href="#marker-properties">marker properties</a>.
  I suspect we should just allow this.  Whether we want to allow the full
  element-referencing thing that you can do with gradients, with selective
  overriding of attributes, I’m not sure. <a class="issue-return" href="#issue-e5f3570c" title="Jump to section">↵</a></div>
   <div class="issue"> Make interaction work on <a data-link-type="dfn" href="#positioned-markers">positioned markers</a>. <a class="issue-return" href="#issue-cbf39201" title="Jump to section">↵</a></div>
   <div class="issue"> The marker knockout properties are still under heavy development
and are subject to change. Feedback on how authors might prefer to specify marker
knockout shapes is welcome. <a class="issue-return" href="#issue-37a27154" title="Jump to section">↵</a></div>
   <div class="issue">... <a class="issue-return" href="#issue-2f43b42f" title="Jump to section">↵</a></div>
   <div class="issue"> A diagram showing the construction of these shapes
would be helpful. <a class="issue-return" href="#issue-f84fbb3f" title="Jump to section">↵</a></div>
   <div class="issue"> Need to define how the two shape sides are joined together.
It’s taking the top and bottom points from both shapes, drawing vertical
lines to the edge of the stroke shape, then drawing two horizontal lines
to join them together. <a class="issue-return" href="#issue-fcb1a084" title="Jump to section">↵</a></div>
   <div class="issue">
    <p>While this is nice for straight line segments, if the
  path is curved at the marker position then it might be preferable to
  have the knockout shapes aligned with the tangent at the knockout shape
  side position, rather than with the marker orientation.  Especially
  if the knockout is being used as a fancy dash pattern.  Then we would
  likely want to join the left and right sides of the shape with a curved
  shape (along the stroke) and not just a rectangle.  If we allow this,
  then computing that shape is going to be hard, and will mean that
  determining whether the left and right sides of the knockout shape
  intersect, and determining what the intersections of all of the knockout shapes
  on a path are, is also going to be hard.  Perhaps that can be handled by
  extending dashing line caps with these shapes rather than here?  Regardless of
  whether it is handled by marker knockouts or new line caps, it’s going
  to be non-trivial to compute the right shapes.</p>
    <p>Another thing to note is that knockouts here are like setting up
  a clipping path to remove parts of the stroke when it’s painted.  That
  means that if the stroke intersects itself over the knockout areas,
  it’s going to be knocked out of all bits of the stroke that go
  through those areas.  That may or may not be fine depending on
  your use cases.</p>
     <a class="issue-return" href="#issue-cb08f5ff" title="Jump to section">↵</a>
   </div>
  </div>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"09b0661c": {"dfnID":"09b0661c","dfnText":"text","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-text"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/text.html#elementdef-text"},
"0c48b9b1": {"dfnID":"0c48b9b1","dfnText":"path","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-path"}],"title":"Unnumbered Section"},{"refs":[{"id":"ref-for-elementdef-path\u2460"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-elementdef-path\u2461"},{"id":"ref-for-elementdef-path\u2462"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"}],"url":"https://svgwg.org/svg2-draft/paths.html#elementdef-path"},
"1179e969": {"dfnID":"1179e969","dfnText":"a","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-a"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/linking.html#elementdef-a"},
"11a8832d": {"dfnID":"11a8832d","dfnText":"image","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-image"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/embedded.html#elementdef-image"},
"15f5b381": {"dfnID":"15f5b381","dfnText":"<percentage>","external":true,"refSections":[{"refs":[{"id":"ref-for-percentage-value"},{"id":"ref-for-percentage-value\u2460"},{"id":"ref-for-percentage-value\u2461"},{"id":"ref-for-percentage-value\u2462"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-percentage-value\u2463"},{"id":"ref-for-percentage-value\u2464"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-percentage-value\u2465"},{"id":"ref-for-percentage-value\u2466"}],"title":"7. Marker shorthand: the marker property"},{"refs":[{"id":"ref-for-percentage-value\u2467"},{"id":"ref-for-percentage-value\u2468"},{"id":"ref-for-percentage-value\u2460\u24ea"},{"id":"ref-for-percentage-value\u2460\u2460"},{"id":"ref-for-percentage-value\u2460\u2461"},{"id":"ref-for-percentage-value\u2460\u2462"},{"id":"ref-for-percentage-value\u2460\u2463"},{"id":"ref-for-percentage-value\u2460\u2464"},{"id":"ref-for-percentage-value\u2460\u2465"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/css-values-4/#percentage-value"},
"16310992": {"dfnID":"16310992","dfnText":"<number>","external":true,"refSections":[{"refs":[{"id":"ref-for-number-value"},{"id":"ref-for-number-value\u2460"},{"id":"ref-for-number-value\u2461"},{"id":"ref-for-number-value\u2462"},{"id":"ref-for-number-value\u2463"},{"id":"ref-for-number-value\u2464"},{"id":"ref-for-number-value\u2465"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-number-value\u2466"},{"id":"ref-for-number-value\u2467"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-number-value\u2468"},{"id":"ref-for-number-value\u2460\u24ea"}],"title":"7. Marker shorthand: the marker property"},{"refs":[{"id":"ref-for-number-value\u2460\u2460"},{"id":"ref-for-number-value\u2460\u2461"},{"id":"ref-for-number-value\u2460\u2462"},{"id":"ref-for-number-value\u2460\u2463"},{"id":"ref-for-number-value\u2460\u2464"},{"id":"ref-for-number-value\u2460\u2465"},{"id":"ref-for-number-value\u2460\u2466"},{"id":"ref-for-number-value\u2460\u2467"},{"id":"ref-for-number-value\u2460\u2468"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/css-values-4/#number-value"},
"21000c7a": {"dfnID":"21000c7a","dfnText":"script","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-script"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/interact.html#elementdef-script"},
"235a22ce": {"dfnID":"235a22ce","dfnText":"structural element","external":true,"refSections":[{"refs":[{"id":"ref-for-TermStructuralElement"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/struct.html#TermStructuralElement"},
"33f830f2": {"dfnID":"33f830f2","dfnText":"paint server element","external":true,"refSections":[{"refs":[{"id":"ref-for-TermPaintServerElement"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/painting.html#TermPaintServerElement"},
"3559c926": {"dfnID":"3559c926","dfnText":"<angle>","external":true,"refSections":[{"refs":[{"id":"ref-for-angle-value"},{"id":"ref-for-angle-value\u2460"},{"id":"ref-for-angle-value\u2461"}],"title":"2. The marker element"}],"url":"https://drafts.csswg.org/css-values-4/#angle-value"},
"37a35a4b": {"dfnID":"37a35a4b","dfnText":"mask","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-mask"}],"title":"2. The marker element"}],"url":"https://drafts.fxtf.org/css-masking-1/#elementdef-mask"},
"3a660536": {"dfnID":"3a660536","dfnText":"shape elements","external":true,"refSections":[{"refs":[{"id":"ref-for-TermShapeElement"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/shapes.html#TermShapeElement"},
"3b3e8d30": {"dfnID":"3b3e8d30","dfnText":"inverted","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-media-inverted-colors-inverted"},{"id":"ref-for-valdef-media-inverted-colors-inverted\u2460"},{"id":"ref-for-valdef-media-inverted-colors-inverted\u2461"},{"id":"ref-for-valdef-media-inverted-colors-inverted\u2462"},{"id":"ref-for-valdef-media-inverted-colors-inverted\u2463"},{"id":"ref-for-valdef-media-inverted-colors-inverted\u2464"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted"},
"409e2104": {"dfnID":"409e2104","dfnText":"presentation attributes","external":true,"refSections":[{"refs":[{"id":"ref-for-TermPresentationAttribute"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/styling.html#TermPresentationAttribute"},
"44be0cef": {"dfnID":"44be0cef","dfnText":"ellipse","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-radial-shape-ellipse"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/css-images-3/#valdef-radial-shape-ellipse"},
"511b3636": {"dfnID":"511b3636","dfnText":"foreignobject","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-foreignObject"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/embedded.html#elementdef-foreignObject"},
"537cf076": {"dfnID":"537cf076","dfnText":"?","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-opt"},{"id":"ref-for-mult-opt\u2460"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-mult-opt\u2461"}],"title":"7. Marker shorthand: the marker property"},{"refs":[{"id":"ref-for-mult-opt\u2462"},{"id":"ref-for-mult-opt\u2463"},{"id":"ref-for-mult-opt\u2464"},{"id":"ref-for-mult-opt\u2465"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/css-values-4/#mult-opt"},
"55e8f5de": {"dfnID":"55e8f5de","dfnText":"none","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-display-none"},{"id":"ref-for-valdef-display-none\u2460"}],"title":"2. The marker element"}],"url":"https://drafts.csswg.org/css-display-4/#valdef-display-none"},
"5dd880c8": {"dfnID":"5dd880c8","dfnText":"filter","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-filter"}],"title":"2. The marker element"}],"url":"https://drafts.fxtf.org/filter-effects-1/#elementdef-filter"},
"63544174": {"dfnID":"63544174","dfnText":"stroke-width","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-stroke-width"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-propdef-stroke-width\u2460"}],"title":"9. Details on how markers are rendered"}],"url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width"},
"653040a2": {"dfnID":"653040a2","dfnText":"symbol","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-symbol"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/struct.html#elementdef-symbol"},
"68150e76": {"dfnID":"68150e76","dfnText":"*","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-zero-plus"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-mult-zero-plus\u2460"}],"title":"7. Marker shorthand: the marker property"}],"url":"https://drafts.csswg.org/css-values-4/#mult-zero-plus"},
"696393c9": {"dfnID":"696393c9","dfnText":"style","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-style"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/styling.html#elementdef-style"},
"6ec67710": {"dfnID":"6ec67710","dfnText":"|","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-one"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-comb-one\u2460"}],"title":"5. Segment markers: the marker-segment property"},{"refs":[{"id":"ref-for-comb-one\u2461"},{"id":"ref-for-comb-one\u2462"},{"id":"ref-for-comb-one\u2463"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-comb-one\u2464"},{"id":"ref-for-comb-one\u2465"},{"id":"ref-for-comb-one\u2466"},{"id":"ref-for-comb-one\u2467"},{"id":"ref-for-comb-one\u2468"},{"id":"ref-for-comb-one\u2460\u24ea"},{"id":"ref-for-comb-one\u2460\u2460"}],"title":"7. Marker shorthand: the marker property"},{"refs":[{"id":"ref-for-comb-one\u2460\u2461"},{"id":"ref-for-comb-one\u2460\u2462"},{"id":"ref-for-comb-one\u2460\u2463"},{"id":"ref-for-comb-one\u2460\u2464"},{"id":"ref-for-comb-one\u2460\u2465"},{"id":"ref-for-comb-one\u2460\u2466"},{"id":"ref-for-comb-one\u2460\u2467"},{"id":"ref-for-comb-one\u2460\u2468"},{"id":"ref-for-comb-one\u2461\u24ea"},{"id":"ref-for-comb-one\u2461\u2460"},{"id":"ref-for-comb-one\u2461\u2461"},{"id":"ref-for-comb-one\u2461\u2462"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"793853ba": {"dfnID":"793853ba","dfnText":"container element","external":true,"refSections":[{"refs":[{"id":"ref-for-container-element"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/struct.html#container-element"},
"86928bde": {"dfnID":"86928bde","dfnText":"overflow","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-overflow"},{"id":"ref-for-propdef-overflow\u2460"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-propdef-overflow\u2461"}],"title":"9. Details on how markers are rendered"}],"url":"https://drafts.csswg.org/css-overflow-3/#propdef-overflow"},
"890a8358": {"dfnID":"890a8358","dfnText":"fill","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-fill"}],"title":"2. The marker element"}],"url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-fill"},
"938ba280": {"dfnID":"938ba280","dfnText":"{a,b}","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-num-range"},{"id":"ref-for-mult-num-range\u2460"}],"title":"7. Marker shorthand: the marker property"},{"refs":[{"id":"ref-for-mult-num-range\u2461"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/css-values-4/#mult-num-range"},
"94c55d9f": {"dfnID":"94c55d9f","dfnText":"descriptive element","external":true,"refSections":[{"refs":[{"id":"ref-for-TermDescriptiveElement"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/struct.html#TermDescriptiveElement"},
"DataTypeMarkerRef": {"dfnID":"DataTypeMarkerRef","dfnText":"<marker-ref>","external":false,"refSections":[{"refs":[{"id":"ref-for-DataTypeMarkerRef"}],"title":"3. Referencing marker elements"},{"refs":[{"id":"ref-for-DataTypeMarkerRef\u2460"},{"id":"ref-for-DataTypeMarkerRef\u2461"},{"id":"ref-for-DataTypeMarkerRef\u2462"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-DataTypeMarkerRef\u2463"},{"id":"ref-for-DataTypeMarkerRef\u2464"},{"id":"ref-for-DataTypeMarkerRef\u2465"}],"title":"5. Segment markers: the marker-segment property"},{"refs":[{"id":"ref-for-DataTypeMarkerRef\u2466"},{"id":"ref-for-DataTypeMarkerRef\u2467"},{"id":"ref-for-DataTypeMarkerRef\u2468"},{"id":"ref-for-DataTypeMarkerRef\u2460\u24ea"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-DataTypeMarkerRef\u2460\u2460"},{"id":"ref-for-DataTypeMarkerRef\u2460\u2461"},{"id":"ref-for-DataTypeMarkerRef\u2460\u2462"},{"id":"ref-for-DataTypeMarkerRef\u2460\u2463"},{"id":"ref-for-DataTypeMarkerRef\u2460\u2464"},{"id":"ref-for-DataTypeMarkerRef\u2460\u2465"},{"id":"ref-for-DataTypeMarkerRef\u2460\u2466"},{"id":"ref-for-DataTypeMarkerRef\u2460\u2467"},{"id":"ref-for-DataTypeMarkerRef\u2460\u2468"},{"id":"ref-for-DataTypeMarkerRef\u2461\u24ea"}],"title":"7. Marker shorthand: the marker property"}],"url":"#DataTypeMarkerRef"},
"a82a381d": {"dfnID":"a82a381d","dfnText":"view","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-view"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/linking.html#elementdef-view"},
"b0d8ebd9": {"dfnID":"b0d8ebd9","dfnText":"{a}","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-num"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/css-values-4/#mult-num"},
"bedd9d42": {"dfnID":"bedd9d42","dfnText":"+","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-one-plus"}],"title":"6. Repeating markers: the marker-pattern property"}],"url":"https://drafts.csswg.org/css-values-4/#mult-one-plus"},
"c400bde8": {"dfnID":"c400bde8","dfnText":"switch","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-switch"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/struct.html#elementdef-switch"},
"c56d959e": {"dfnID":"c56d959e","dfnText":"SVGMarkerElement","external":true,"refSections":[{"refs":[{"id":"ref-for-InterfaceSVGMarkerElement"}],"title":"2. The marker element"}],"url":"https://svgwg.org/svg2-draft/painting.html#InterfaceSVGMarkerElement"},
"d27a809f": {"dfnID":"d27a809f","dfnText":"background-position","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-background-position"}],"title":"2. The marker element"}],"url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-position"},
"de9e224f": {"dfnID":"de9e224f","dfnText":"stroke","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-stroke"}],"title":"2. The marker element"}],"url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke"},
"e3683f07": {"dfnID":"e3683f07","dfnText":"child","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-voice-family-child"}],"title":"3. Referencing marker elements"}],"url":"https://drafts.csswg.org/css-speech-1/#valdef-voice-family-child"},
"e7f0dd6c": {"dfnID":"e7f0dd6c","dfnText":"display","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-display"},{"id":"ref-for-propdef-display\u2460"},{"id":"ref-for-propdef-display\u2461"}],"title":"2. The marker element"}],"url":"https://drafts.csswg.org/css-display-4/#propdef-display"},
"e8907287": {"dfnID":"e8907287","dfnText":"hidden","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-overflow-hidden"}],"title":"2. The marker element"}],"url":"https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden"},
"element-attrdef-marker-href": {"dfnID":"element-attrdef-marker-href","dfnText":"href","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-href"},{"id":"ref-for-element-attrdef-marker-href\u2460"},{"id":"ref-for-element-attrdef-marker-href\u2461"}],"title":"2. The marker element"}],"url":"#element-attrdef-marker-href"},
"element-attrdef-marker-markerheight": {"dfnID":"element-attrdef-marker-markerheight","dfnText":"markerHeight","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-markerheight"},{"id":"ref-for-element-attrdef-marker-markerheight\u2460"},{"id":"ref-for-element-attrdef-marker-markerheight\u2461"},{"id":"ref-for-element-attrdef-marker-markerheight\u2462"},{"id":"ref-for-element-attrdef-marker-markerheight\u2463"},{"id":"ref-for-element-attrdef-marker-markerheight\u2464"}],"title":"2. The marker element"}],"url":"#element-attrdef-marker-markerheight"},
"element-attrdef-marker-markerunits": {"dfnID":"element-attrdef-marker-markerunits","dfnText":"markerUnits","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-markerunits"},{"id":"ref-for-element-attrdef-marker-markerunits\u2460"},{"id":"ref-for-element-attrdef-marker-markerunits\u2461"},{"id":"ref-for-element-attrdef-marker-markerunits\u2462"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-element-attrdef-marker-markerunits\u2463"},{"id":"ref-for-element-attrdef-marker-markerunits\u2464"},{"id":"ref-for-element-attrdef-marker-markerunits\u2465"}],"title":"9. Details on how markers are rendered"}],"url":"#element-attrdef-marker-markerunits"},
"element-attrdef-marker-markerwidth": {"dfnID":"element-attrdef-marker-markerwidth","dfnText":"markerWidth","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-markerwidth"},{"id":"ref-for-element-attrdef-marker-markerwidth\u2460"},{"id":"ref-for-element-attrdef-marker-markerwidth\u2461"},{"id":"ref-for-element-attrdef-marker-markerwidth\u2462"},{"id":"ref-for-element-attrdef-marker-markerwidth\u2463"},{"id":"ref-for-element-attrdef-marker-markerwidth\u2464"}],"title":"2. The marker element"}],"url":"#element-attrdef-marker-markerwidth"},
"element-attrdef-marker-orient": {"dfnID":"element-attrdef-marker-orient","dfnText":"orient","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-orient"},{"id":"ref-for-element-attrdef-marker-orient\u2460"},{"id":"ref-for-element-attrdef-marker-orient\u2461"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-element-attrdef-marker-orient\u2462"}],"title":"9. Details on how markers are rendered"}],"url":"#element-attrdef-marker-orient"},
"element-attrdef-marker-position": {"dfnID":"element-attrdef-marker-position","dfnText":"position","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-position"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-element-attrdef-marker-position\u2460"},{"id":"ref-for-element-attrdef-marker-position\u2461"}],"title":"2. The marker element"}],"url":"#element-attrdef-marker-position"},
"element-attrdef-marker-preserveaspectratio": {"dfnID":"element-attrdef-marker-preserveaspectratio","dfnText":"preserveAspectRatio","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-preserveaspectratio"},{"id":"ref-for-element-attrdef-marker-preserveaspectratio\u2460"},{"id":"ref-for-element-attrdef-marker-preserveaspectratio\u2461"},{"id":"ref-for-element-attrdef-marker-preserveaspectratio\u2462"},{"id":"ref-for-element-attrdef-marker-preserveaspectratio\u2463"},{"id":"ref-for-element-attrdef-marker-preserveaspectratio\u2464"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-element-attrdef-marker-preserveaspectratio\u2465"}],"title":"9. Details on how markers are rendered"}],"url":"#element-attrdef-marker-preserveaspectratio"},
"element-attrdef-marker-refx": {"dfnID":"element-attrdef-marker-refx","dfnText":"refX","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-refx"},{"id":"ref-for-element-attrdef-marker-refx\u2460"},{"id":"ref-for-element-attrdef-marker-refx\u2461"}],"title":"2. The marker element"}],"url":"#element-attrdef-marker-refx"},
"element-attrdef-marker-refy": {"dfnID":"element-attrdef-marker-refy","dfnText":"refY","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-refy"},{"id":"ref-for-element-attrdef-marker-refy\u2460"},{"id":"ref-for-element-attrdef-marker-refy\u2461"}],"title":"2. The marker element"}],"url":"#element-attrdef-marker-refy"},
"element-attrdef-marker-viewbox": {"dfnID":"element-attrdef-marker-viewbox","dfnText":"viewBox","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-marker-viewbox"},{"id":"ref-for-element-attrdef-marker-viewbox\u2460"},{"id":"ref-for-element-attrdef-marker-viewbox\u2461"},{"id":"ref-for-element-attrdef-marker-viewbox\u2462"},{"id":"ref-for-element-attrdef-marker-viewbox\u2463"},{"id":"ref-for-element-attrdef-marker-viewbox\u2464"},{"id":"ref-for-element-attrdef-marker-viewbox\u2465"},{"id":"ref-for-element-attrdef-marker-viewbox\u2466"},{"id":"ref-for-element-attrdef-marker-viewbox\u2467"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-element-attrdef-marker-viewbox\u2468"},{"id":"ref-for-element-attrdef-marker-viewbox\u2460\u24ea"}],"title":"9. Details on how markers are rendered"}],"url":"#element-attrdef-marker-viewbox"},
"elementdef-marker": {"dfnID":"elementdef-marker","dfnText":"marker","external":false,"refSections":[{"refs":[{"id":"ref-for-elementdef-marker"},{"id":"ref-for-elementdef-marker\u2460"},{"id":"ref-for-elementdef-marker\u2461"},{"id":"ref-for-elementdef-marker\u2462"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-elementdef-marker\u2463"},{"id":"ref-for-elementdef-marker\u2464"},{"id":"ref-for-elementdef-marker\u2465"},{"id":"ref-for-elementdef-marker\u2466"},{"id":"ref-for-elementdef-marker\u2467"},{"id":"ref-for-elementdef-marker\u2468"},{"id":"ref-for-elementdef-marker\u2460\u24ea"},{"id":"ref-for-elementdef-marker\u2460\u2460"},{"id":"ref-for-elementdef-marker\u2460\u2461"},{"id":"ref-for-elementdef-marker\u2460\u2462"},{"id":"ref-for-elementdef-marker\u2460\u2463"},{"id":"ref-for-elementdef-marker\u2460\u2464"},{"id":"ref-for-elementdef-marker\u2460\u2465"},{"id":"ref-for-elementdef-marker\u2460\u2466"},{"id":"ref-for-elementdef-marker\u2460\u2467"},{"id":"ref-for-elementdef-marker\u2460\u2468"},{"id":"ref-for-elementdef-marker\u2461\u24ea"},{"id":"ref-for-elementdef-marker\u2461\u2460"},{"id":"ref-for-elementdef-marker\u2461\u2461"},{"id":"ref-for-elementdef-marker\u2461\u2462"},{"id":"ref-for-elementdef-marker\u2461\u2463"},{"id":"ref-for-elementdef-marker\u2461\u2464"},{"id":"ref-for-elementdef-marker\u2461\u2465"},{"id":"ref-for-elementdef-marker\u2461\u2466"},{"id":"ref-for-elementdef-marker\u2461\u2467"},{"id":"ref-for-elementdef-marker\u2461\u2468"},{"id":"ref-for-elementdef-marker\u2462\u24ea"},{"id":"ref-for-elementdef-marker\u2462\u2460"},{"id":"ref-for-elementdef-marker\u2462\u2461"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-elementdef-marker\u2462\u2462"},{"id":"ref-for-elementdef-marker\u2462\u2463"},{"id":"ref-for-elementdef-marker\u2462\u2464"},{"id":"ref-for-elementdef-marker\u2462\u2465"},{"id":"ref-for-elementdef-marker\u2462\u2466"},{"id":"ref-for-elementdef-marker\u2462\u2467"},{"id":"ref-for-elementdef-marker\u2462\u2468"}],"title":"3. Referencing marker elements"},{"refs":[{"id":"ref-for-elementdef-marker\u2463\u24ea"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-elementdef-marker\u2463\u2460"}],"title":"5. Segment markers: the marker-segment property"},{"refs":[{"id":"ref-for-elementdef-marker\u2463\u2461"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-elementdef-marker\u2463\u2462"},{"id":"ref-for-elementdef-marker\u2463\u2463"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"},{"refs":[{"id":"ref-for-elementdef-marker\u2463\u2464"},{"id":"ref-for-elementdef-marker\u2463\u2465"},{"id":"ref-for-elementdef-marker\u2463\u2466"},{"id":"ref-for-elementdef-marker\u2463\u2467"},{"id":"ref-for-elementdef-marker\u2463\u2468"}],"title":"9. Details on how markers are rendered"}],"url":"#elementdef-marker"},
"f00710cb": {"dfnID":"f00710cb","dfnText":"clippath","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-clippath"}],"title":"2. The marker element"}],"url":"https://drafts.fxtf.org/css-masking-1/#elementdef-clippath"},
"f24162b9": {"dfnID":"f24162b9","dfnText":"use","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-use"}],"title":"1. Introduction"}],"url":"https://svgwg.org/svg2-draft/struct.html#elementdef-use"},
"f861d7f6": {"dfnID":"f861d7f6","dfnText":"line","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-line"}],"title":"Unnumbered Section"},{"refs":[{"id":"ref-for-elementdef-line\u2460"}],"title":"1. Introduction"}],"url":"https://svgwg.org/svg2-draft/shapes.html#elementdef-line"},
"fa293cdd": {"dfnID":"fa293cdd","dfnText":"<url>","external":true,"refSections":[{"refs":[{"id":"ref-for-url-value"},{"id":"ref-for-url-value\u2460"},{"id":"ref-for-url-value\u2461"}],"title":"3. Referencing marker elements"},{"refs":[{"id":"ref-for-url-value\u2462"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-url-value\u2463"}],"title":"5. Segment markers: the marker-segment property"},{"refs":[{"id":"ref-for-url-value\u2464"}],"title":"6. Repeating markers: the marker-pattern property"}],"url":"https://drafts.csswg.org/css-values-4/#url-value"},
"fb030e6c": {"dfnID":"fb030e6c","dfnText":"<length>","external":true,"refSections":[{"refs":[{"id":"ref-for-length-value"},{"id":"ref-for-length-value\u2460"},{"id":"ref-for-length-value\u2461"},{"id":"ref-for-length-value\u2462"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-length-value\u2463"},{"id":"ref-for-length-value\u2464"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-length-value\u2465"},{"id":"ref-for-length-value\u2466"}],"title":"7. Marker shorthand: the marker property"},{"refs":[{"id":"ref-for-length-value\u2467"},{"id":"ref-for-length-value\u2468"},{"id":"ref-for-length-value\u2460\u24ea"},{"id":"ref-for-length-value\u2460\u2460"},{"id":"ref-for-length-value\u2460\u2461"},{"id":"ref-for-length-value\u2460\u2462"},{"id":"ref-for-length-value\u2460\u2463"},{"id":"ref-for-length-value\u2460\u2464"},{"id":"ref-for-length-value\u2460\u2465"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"https://drafts.csswg.org/css-values-4/#length-value"},
"fe8a389a": {"dfnID":"fe8a389a","dfnText":"polygon","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-polygon"}],"title":"Unnumbered Section"},{"refs":[{"id":"ref-for-elementdef-polygon\u2460"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-elementdef-polygon\u2461"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"}],"url":"https://svgwg.org/svg2-draft/shapes.html#elementdef-polygon"},
"ff5047e4": {"dfnID":"ff5047e4","dfnText":"polyline","external":true,"refSections":[{"refs":[{"id":"ref-for-elementdef-polyline"}],"title":"Unnumbered Section"},{"refs":[{"id":"ref-for-elementdef-polyline\u2460"}],"title":"1. Introduction"}],"url":"https://svgwg.org/svg2-draft/shapes.html#elementdef-polyline"},
"markable-elements": {"dfnID":"markable-elements","dfnText":"markable elements","external":false,"refSections":[{"refs":[{"id":"ref-for-markable-elements"},{"id":"ref-for-markable-elements\u2460"},{"id":"ref-for-markable-elements\u2461"},{"id":"ref-for-markable-elements\u2462"},{"id":"ref-for-markable-elements\u2463"},{"id":"ref-for-markable-elements\u2464"},{"id":"ref-for-markable-elements\u2465"},{"id":"ref-for-markable-elements\u2466"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-markable-elements\u2467"},{"id":"ref-for-markable-elements\u2468"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-markable-elements\u2460\u24ea"}],"title":"5. Segment markers: the marker-segment property"},{"refs":[{"id":"ref-for-markable-elements\u2460\u2460"},{"id":"ref-for-markable-elements\u2460\u2461"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-markable-elements\u2460\u2462"}],"title":"7. Marker shorthand: the marker property"}],"url":"#markable-elements"},
"marker-properties": {"dfnID":"marker-properties","dfnText":"marker properties","external":false,"refSections":[{"refs":[{"id":"ref-for-marker-properties"},{"id":"ref-for-marker-properties\u2460"},{"id":"ref-for-marker-properties\u2461"}],"title":"2. The marker element"}],"url":"#marker-properties"},
"positioned-markers": {"dfnID":"positioned-markers","dfnText":"positioned markers","external":false,"refSections":[{"refs":[{"id":"ref-for-positioned-markers"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-positioned-markers\u2460"},{"id":"ref-for-positioned-markers\u2461"},{"id":"ref-for-positioned-markers\u2462"},{"id":"ref-for-positioned-markers\u2463"},{"id":"ref-for-positioned-markers\u2464"},{"id":"ref-for-positioned-markers\u2465"}],"title":"2. The marker element"}],"url":"#positioned-markers"},
"propdef-marker": {"dfnID":"propdef-marker","dfnText":"marker","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-marker"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-propdef-marker\u2460"},{"id":"ref-for-propdef-marker\u2461"}],"title":"7. Marker shorthand: the marker property"}],"url":"#propdef-marker"},
"propdef-marker-end": {"dfnID":"propdef-marker-end","dfnText":"marker-end","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-marker-end"},{"id":"ref-for-propdef-marker-end\u2460"},{"id":"ref-for-propdef-marker-end\u2461"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-propdef-marker-end\u2462"},{"id":"ref-for-propdef-marker-end\u2463"},{"id":"ref-for-propdef-marker-end\u2464"},{"id":"ref-for-propdef-marker-end\u2465"},{"id":"ref-for-propdef-marker-end\u2466"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-propdef-marker-end\u2467"},{"id":"ref-for-propdef-marker-end\u2468"},{"id":"ref-for-propdef-marker-end\u2460\u24ea"},{"id":"ref-for-propdef-marker-end\u2460\u2460"},{"id":"ref-for-propdef-marker-end\u2460\u2461"},{"id":"ref-for-propdef-marker-end\u2460\u2462"},{"id":"ref-for-propdef-marker-end\u2460\u2463"}],"title":"7. Marker shorthand: the marker property"}],"url":"#propdef-marker-end"},
"propdef-marker-knockout-left": {"dfnID":"propdef-marker-knockout-left","dfnText":"marker-knockout-left","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-marker-knockout-left"},{"id":"ref-for-propdef-marker-knockout-left\u2460"},{"id":"ref-for-propdef-marker-knockout-left\u2461"},{"id":"ref-for-propdef-marker-knockout-left\u2462"},{"id":"ref-for-propdef-marker-knockout-left\u2463"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"#propdef-marker-knockout-left"},
"propdef-marker-knockout-right": {"dfnID":"propdef-marker-knockout-right","dfnText":"marker-knockout-right","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-marker-knockout-right"},{"id":"ref-for-propdef-marker-knockout-right\u2460"},{"id":"ref-for-propdef-marker-knockout-right\u2461"},{"id":"ref-for-propdef-marker-knockout-right\u2462"},{"id":"ref-for-propdef-marker-knockout-right\u2463"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"#propdef-marker-knockout-right"},
"propdef-marker-mid": {"dfnID":"propdef-marker-mid","dfnText":"marker-mid","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-marker-mid"},{"id":"ref-for-propdef-marker-mid\u2460"},{"id":"ref-for-propdef-marker-mid\u2461"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-propdef-marker-mid\u2462"},{"id":"ref-for-propdef-marker-mid\u2463"},{"id":"ref-for-propdef-marker-mid\u2464"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-propdef-marker-mid\u2465"},{"id":"ref-for-propdef-marker-mid\u2466"},{"id":"ref-for-propdef-marker-mid\u2467"},{"id":"ref-for-propdef-marker-mid\u2468"},{"id":"ref-for-propdef-marker-mid\u2460\u24ea"},{"id":"ref-for-propdef-marker-mid\u2460\u2460"},{"id":"ref-for-propdef-marker-mid\u2460\u2461"}],"title":"7. Marker shorthand: the marker property"}],"url":"#propdef-marker-mid"},
"propdef-marker-pattern": {"dfnID":"propdef-marker-pattern","dfnText":"marker-pattern","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-marker-pattern"},{"id":"ref-for-propdef-marker-pattern\u2460"},{"id":"ref-for-propdef-marker-pattern\u2461"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-propdef-marker-pattern\u2462"},{"id":"ref-for-propdef-marker-pattern\u2463"},{"id":"ref-for-propdef-marker-pattern\u2464"},{"id":"ref-for-propdef-marker-pattern\u2465"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-propdef-marker-pattern\u2466"},{"id":"ref-for-propdef-marker-pattern\u2467"},{"id":"ref-for-propdef-marker-pattern\u2468"},{"id":"ref-for-propdef-marker-pattern\u2460\u24ea"},{"id":"ref-for-propdef-marker-pattern\u2460\u2460"},{"id":"ref-for-propdef-marker-pattern\u2460\u2461"},{"id":"ref-for-propdef-marker-pattern\u2460\u2462"},{"id":"ref-for-propdef-marker-pattern\u2460\u2463"},{"id":"ref-for-propdef-marker-pattern\u2460\u2464"}],"title":"7. Marker shorthand: the marker property"}],"url":"#propdef-marker-pattern"},
"propdef-marker-segment": {"dfnID":"propdef-marker-segment","dfnText":"marker-segment","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-marker-segment"},{"id":"ref-for-propdef-marker-segment\u2460"},{"id":"ref-for-propdef-marker-segment\u2461"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-propdef-marker-segment\u2462"},{"id":"ref-for-propdef-marker-segment\u2463"}],"title":"5. Segment markers: the marker-segment property"},{"refs":[{"id":"ref-for-propdef-marker-segment\u2464"},{"id":"ref-for-propdef-marker-segment\u2465"},{"id":"ref-for-propdef-marker-segment\u2466"},{"id":"ref-for-propdef-marker-segment\u2467"},{"id":"ref-for-propdef-marker-segment\u2468"},{"id":"ref-for-propdef-marker-segment\u2460\u24ea"},{"id":"ref-for-propdef-marker-segment\u2460\u2460"}],"title":"7. Marker shorthand: the marker property"}],"url":"#propdef-marker-segment"},
"propdef-marker-start": {"dfnID":"propdef-marker-start","dfnText":"marker-start","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-marker-start"},{"id":"ref-for-propdef-marker-start\u2460"},{"id":"ref-for-propdef-marker-start\u2461"},{"id":"ref-for-propdef-marker-start\u2462"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-propdef-marker-start\u2463"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-propdef-marker-start\u2464"},{"id":"ref-for-propdef-marker-start\u2465"},{"id":"ref-for-propdef-marker-start\u2466"},{"id":"ref-for-propdef-marker-start\u2467"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-propdef-marker-start\u2468"},{"id":"ref-for-propdef-marker-start\u2460\u24ea"},{"id":"ref-for-propdef-marker-start\u2460\u2460"},{"id":"ref-for-propdef-marker-start\u2460\u2461"},{"id":"ref-for-propdef-marker-start\u2460\u2462"},{"id":"ref-for-propdef-marker-start\u2460\u2463"},{"id":"ref-for-propdef-marker-start\u2460\u2464"}],"title":"7. Marker shorthand: the marker property"}],"url":"#propdef-marker-start"},
"repeating-markers": {"dfnID":"repeating-markers","dfnText":"repeating markers","external":false,"refSections":[{"refs":[{"id":"ref-for-repeating-markers"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-repeating-markers\u2460"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-repeating-markers\u2461"}],"title":"6. Repeating markers: the marker-pattern property"}],"url":"#repeating-markers"},
"segment-markers": {"dfnID":"segment-markers","dfnText":"segment markers","external":false,"refSections":[{"refs":[{"id":"ref-for-segment-markers"},{"id":"ref-for-segment-markers\u2460"}],"title":"2. The marker element"},{"refs":[{"id":"ref-for-segment-markers\u2461"}],"title":"5. Segment markers: the marker-segment property"}],"url":"#segment-markers"},
"typedef-child-selector": {"dfnID":"typedef-child-selector","dfnText":"<child-selector>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-child-selector"},{"id":"ref-for-typedef-child-selector\u2460"},{"id":"ref-for-typedef-child-selector\u2461"},{"id":"ref-for-typedef-child-selector\u2462"}],"title":"3. Referencing marker elements"}],"url":"#typedef-child-selector"},
"typedef-knockout-offset": {"dfnID":"typedef-knockout-offset","dfnText":"<knockout-offset>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-knockout-offset"},{"id":"ref-for-typedef-knockout-offset\u2460"},{"id":"ref-for-typedef-knockout-offset\u2461"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"#typedef-knockout-offset"},
"typedef-knockout-shape": {"dfnID":"typedef-knockout-shape","dfnText":"<knockout-shape>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-knockout-shape"},{"id":"ref-for-typedef-knockout-shape\u2460"}],"title":"8. Knocking out the stroke: the marker-knockout-left and marker-knockout-right properties"}],"url":"#typedef-knockout-shape"},
"typedef-marker-gap": {"dfnID":"typedef-marker-gap","dfnText":"<marker-gap>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-marker-gap"},{"id":"ref-for-typedef-marker-gap\u2460"},{"id":"ref-for-typedef-marker-gap\u2461"},{"id":"ref-for-typedef-marker-gap\u2462"},{"id":"ref-for-typedef-marker-gap\u2463"}],"title":"6. Repeating markers: the marker-pattern property"}],"url":"#typedef-marker-gap"},
"typedef-marker-ref-group": {"dfnID":"typedef-marker-ref-group","dfnText":"<marker-ref-group>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-marker-ref-group"}],"title":"6. Repeating markers: the marker-pattern property"}],"url":"#typedef-marker-ref-group"},
"valdef-marker-pattern-none": {"dfnID":"valdef-marker-pattern-none","dfnText":"none","external":false,"refSections":[{"refs":[{"id":"ref-for-valdef-marker-pattern-none"},{"id":"ref-for-valdef-marker-pattern-none\u2460"}],"title":"6. Repeating markers: the marker-pattern property"},{"refs":[{"id":"ref-for-valdef-marker-pattern-none\u2461"},{"id":"ref-for-valdef-marker-pattern-none\u2462"},{"id":"ref-for-valdef-marker-pattern-none\u2463"},{"id":"ref-for-valdef-marker-pattern-none\u2464"},{"id":"ref-for-valdef-marker-pattern-none\u2465"},{"id":"ref-for-valdef-marker-pattern-none\u2466"},{"id":"ref-for-valdef-marker-pattern-none\u2467"},{"id":"ref-for-valdef-marker-pattern-none\u2468"},{"id":"ref-for-valdef-marker-pattern-none\u2460\u24ea"}],"title":"7. Marker shorthand: the marker property"}],"url":"#valdef-marker-pattern-none"},
"valdef-marker-segment-marker-ref": {"dfnID":"valdef-marker-segment-marker-ref","dfnText":"<marker-ref>","external":false,"refSections":[],"url":"#valdef-marker-segment-marker-ref"},
"valdef-marker-segment-none": {"dfnID":"valdef-marker-segment-none","dfnText":"none","external":false,"refSections":[],"url":"#valdef-marker-segment-none"},
"valdef-marker-start-marker-ref": {"dfnID":"valdef-marker-start-marker-ref","dfnText":"<marker-ref>","external":false,"refSections":[],"url":"#valdef-marker-start-marker-ref"},
"valdef-marker-start-none": {"dfnID":"valdef-marker-start-none","dfnText":"none","external":false,"refSections":[{"refs":[{"id":"ref-for-valdef-marker-start-none"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-valdef-marker-start-none\u2460"}],"title":"7. Marker shorthand: the marker property"}],"url":"#valdef-marker-start-none"},
"valdef-markerunits-strokewidth": {"dfnID":"valdef-markerunits-strokewidth","dfnText":"strokeWidth","external":false,"refSections":[{"refs":[{"id":"ref-for-valdef-markerunits-strokewidth"}],"title":"9. Details on how markers are rendered"}],"url":"#valdef-markerunits-strokewidth"},
"valdef-markerunits-userspaceonuse": {"dfnID":"valdef-markerunits-userspaceonuse","dfnText":"userSpaceOnUse","external":false,"refSections":[{"refs":[{"id":"ref-for-valdef-markerunits-userspaceonuse"}],"title":"9. Details on how markers are rendered"}],"url":"#valdef-markerunits-userspaceonuse"},
"vertex-markers": {"dfnID":"vertex-markers","dfnText":"vertex markers","external":false,"refSections":[{"refs":[{"id":"ref-for-vertex-markers"}],"title":"4. Vertex markers: the marker-start,\nmarker-mid and marker-end properties"},{"refs":[{"id":"ref-for-vertex-markers\u2460"}],"title":"5. Segment markers: the marker-segment property"},{"refs":[{"id":"ref-for-vertex-markers\u2461"}],"title":"6. Repeating markers: the marker-pattern property"}],"url":"#vertex-markers"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-link-titles */
"use strict";
{
let linkTitleData = {
"https://drafts.csswg.org/css-values-4/#angle-value": "Expands to: deg | grad | rad | turn",
"https://drafts.csswg.org/css-values-4/#length-value": "Expands to: advance measure | cap | ch | cm | dvb | dvh | dvi | dvmax | dvmin | dvw | em | ex | ic | in | lh | lvb | lvh | lvi | lvmax | lvmin | lvw | mm | pc | pt | px | q | rcap | rch | rem | rex | ric | rlh | svb | svh | svi | svmax | svmin | svw | vb | vh | vi | vmax | vmin | vw",
"https://drafts.csswg.org/css-values-4/#url-value": "Expands to: local url flag",
};

function setTypeTitles() {
	for(let el of document.querySelectorAll("a[href]")) {
		if(el.href in linkTitleData && !el.hasAttribute("title")) {
			el.setAttribute("title", linkTitleData[el.href]);
		}
	}
}

document.addEventListener("DOMContentLoaded", setTypeTitles);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#DataTypeMarkerRef": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"<marker-ref>","type":"type","url":"#DataTypeMarkerRef"},
"#element-attrdef-marker-href": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"href","type":"element-attr","url":"#element-attrdef-marker-href"},
"#element-attrdef-marker-markerheight": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"markerheight","type":"element-attr","url":"#element-attrdef-marker-markerheight"},
"#element-attrdef-marker-markerunits": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"markerunits","type":"element-attr","url":"#element-attrdef-marker-markerunits"},
"#element-attrdef-marker-markerwidth": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"markerwidth","type":"element-attr","url":"#element-attrdef-marker-markerwidth"},
"#element-attrdef-marker-orient": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"orient","type":"element-attr","url":"#element-attrdef-marker-orient"},
"#element-attrdef-marker-position": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"position","type":"element-attr","url":"#element-attrdef-marker-position"},
"#element-attrdef-marker-preserveaspectratio": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"preserveaspectratio","type":"element-attr","url":"#element-attrdef-marker-preserveaspectratio"},
"#element-attrdef-marker-refx": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"refx","type":"element-attr","url":"#element-attrdef-marker-refx"},
"#element-attrdef-marker-refy": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"refy","type":"element-attr","url":"#element-attrdef-marker-refy"},
"#element-attrdef-marker-viewbox": {"export":true,"for_":["marker"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"viewbox","type":"element-attr","url":"#element-attrdef-marker-viewbox"},
"#elementdef-marker": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker","type":"element","url":"#elementdef-marker"},
"#markable-elements": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"markable elements","type":"dfn","url":"#markable-elements"},
"#marker-properties": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker properties","type":"dfn","url":"#marker-properties"},
"#positioned-markers": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"positioned markers","type":"dfn","url":"#positioned-markers"},
"#propdef-marker": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker","type":"property","url":"#propdef-marker"},
"#propdef-marker-end": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker-end","type":"property","url":"#propdef-marker-end"},
"#propdef-marker-knockout-left": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker-knockout-left","type":"property","url":"#propdef-marker-knockout-left"},
"#propdef-marker-knockout-right": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker-knockout-right","type":"property","url":"#propdef-marker-knockout-right"},
"#propdef-marker-mid": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker-mid","type":"property","url":"#propdef-marker-mid"},
"#propdef-marker-pattern": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker-pattern","type":"property","url":"#propdef-marker-pattern"},
"#propdef-marker-segment": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker-segment","type":"property","url":"#propdef-marker-segment"},
"#propdef-marker-start": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"marker-start","type":"property","url":"#propdef-marker-start"},
"#repeating-markers": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"repeating markers","type":"dfn","url":"#repeating-markers"},
"#segment-markers": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"segment markers","type":"dfn","url":"#segment-markers"},
"#typedef-child-selector": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"<child-selector>","type":"type","url":"#typedef-child-selector"},
"#typedef-knockout-offset": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"<knockout-offset>","type":"type","url":"#typedef-knockout-offset"},
"#typedef-knockout-shape": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"<knockout-shape>","type":"type","url":"#typedef-knockout-shape"},
"#typedef-marker-gap": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"<marker-gap>","type":"type","url":"#typedef-marker-gap"},
"#typedef-marker-ref-group": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"<marker-ref-group>","type":"type","url":"#typedef-marker-ref-group"},
"#valdef-marker-pattern-none": {"export":true,"for_":["marker-pattern"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"none","type":"value","url":"#valdef-marker-pattern-none"},
"#valdef-marker-start-none": {"export":true,"for_":["marker-start"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"none","type":"value","url":"#valdef-marker-start-none"},
"#valdef-markerunits-strokewidth": {"export":true,"for_":["markerUnits"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"strokewidth","type":"value","url":"#valdef-markerunits-strokewidth"},
"#valdef-markerunits-userspaceonuse": {"export":true,"for_":["markerUnits"],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"userspaceonuse","type":"value","url":"#valdef-markerunits-userspaceonuse"},
"#vertex-markers": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"svg-markers","spec":"svg-markers-1","status":"local","text":"vertex markers","type":"dfn","url":"#vertex-markers"},
"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-position": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-backgrounds","spec":"css-backgrounds-3","status":"current","text":"background-position","type":"property","url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-position"},
"https://drafts.csswg.org/css-display-4/#propdef-display": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"display","type":"property","url":"https://drafts.csswg.org/css-display-4/#propdef-display"},
"https://drafts.csswg.org/css-display-4/#valdef-display-none": {"export":true,"for_":["display","<display-box>"],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"none","type":"value","url":"https://drafts.csswg.org/css-display-4/#valdef-display-none"},
"https://drafts.csswg.org/css-images-3/#valdef-radial-shape-ellipse": {"export":true,"for_":["<radial-shape>"],"level":"3","normative":true,"shortname":"css-images","spec":"css-images-3","status":"current","text":"ellipse","type":"value","url":"https://drafts.csswg.org/css-images-3/#valdef-radial-shape-ellipse"},
"https://drafts.csswg.org/css-overflow-3/#propdef-overflow": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-overflow","spec":"css-overflow-3","status":"current","text":"overflow","type":"property","url":"https://drafts.csswg.org/css-overflow-3/#propdef-overflow"},
"https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden": {"export":true,"for_":["overflow","overflow-x","overflow-y"],"level":"3","normative":true,"shortname":"css-overflow","spec":"css-overflow-3","status":"current","text":"hidden","type":"value","url":"https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden"},
"https://drafts.csswg.org/css-speech-1/#valdef-voice-family-child": {"export":true,"for_":["voice-family"],"level":"1","normative":true,"shortname":"css-speech","spec":"css-speech-1","status":"current","text":"child","type":"value","url":"https://drafts.csswg.org/css-speech-1/#valdef-voice-family-child"},
"https://drafts.csswg.org/css-values-4/#angle-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<angle>","type":"type","url":"https://drafts.csswg.org/css-values-4/#angle-value"},
"https://drafts.csswg.org/css-values-4/#comb-one": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"|","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"https://drafts.csswg.org/css-values-4/#length-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<length>","type":"type","url":"https://drafts.csswg.org/css-values-4/#length-value"},
"https://drafts.csswg.org/css-values-4/#mult-num": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"{a}","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-num"},
"https://drafts.csswg.org/css-values-4/#mult-num-range": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"{a,b}","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-num-range"},
"https://drafts.csswg.org/css-values-4/#mult-one-plus": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"+","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-one-plus"},
"https://drafts.csswg.org/css-values-4/#mult-opt": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"?","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-opt"},
"https://drafts.csswg.org/css-values-4/#mult-zero-plus": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"*","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-zero-plus"},
"https://drafts.csswg.org/css-values-4/#number-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<number>","type":"type","url":"https://drafts.csswg.org/css-values-4/#number-value"},
"https://drafts.csswg.org/css-values-4/#percentage-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<percentage>","type":"type","url":"https://drafts.csswg.org/css-values-4/#percentage-value"},
"https://drafts.csswg.org/css-values-4/#url-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<url>","type":"type","url":"https://drafts.csswg.org/css-values-4/#url-value"},
"https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted": {"export":true,"for_":["@media/inverted-colors"],"level":"5","normative":true,"shortname":"mediaqueries","spec":"mediaqueries-5","status":"current","text":"inverted","type":"value","url":"https://drafts.csswg.org/mediaqueries-5/#valdef-media-inverted-colors-inverted"},
"https://drafts.fxtf.org/css-masking-1/#elementdef-clippath": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-masking","spec":"css-masking-1","status":"current","text":"clippath","type":"element","url":"https://drafts.fxtf.org/css-masking-1/#elementdef-clippath"},
"https://drafts.fxtf.org/css-masking-1/#elementdef-mask": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-masking","spec":"css-masking-1","status":"current","text":"mask","type":"element","url":"https://drafts.fxtf.org/css-masking-1/#elementdef-mask"},
"https://drafts.fxtf.org/fill-stroke-3/#propdef-fill": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"fill-stroke","spec":"fill-stroke-3","status":"current","text":"fill","type":"property","url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-fill"},
"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"fill-stroke","spec":"fill-stroke-3","status":"current","text":"stroke","type":"property","url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke"},
"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"fill-stroke","spec":"fill-stroke-3","status":"current","text":"stroke-width","type":"property","url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width"},
"https://drafts.fxtf.org/filter-effects-1/#elementdef-filter": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"filter-effects","spec":"filter-effects-1","status":"current","text":"filter","type":"element","url":"https://drafts.fxtf.org/filter-effects-1/#elementdef-filter"},
"https://svgwg.org/svg2-draft/embedded.html#elementdef-foreignObject": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"foreignobject","type":"element","url":"https://svgwg.org/svg2-draft/embedded.html#elementdef-foreignObject"},
"https://svgwg.org/svg2-draft/embedded.html#elementdef-image": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"image","type":"element","url":"https://svgwg.org/svg2-draft/embedded.html#elementdef-image"},
"https://svgwg.org/svg2-draft/interact.html#elementdef-script": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"script","type":"element","url":"https://svgwg.org/svg2-draft/interact.html#elementdef-script"},
"https://svgwg.org/svg2-draft/linking.html#elementdef-a": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"a","type":"element","url":"https://svgwg.org/svg2-draft/linking.html#elementdef-a"},
"https://svgwg.org/svg2-draft/linking.html#elementdef-view": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"view","type":"element","url":"https://svgwg.org/svg2-draft/linking.html#elementdef-view"},
"https://svgwg.org/svg2-draft/painting.html#InterfaceSVGMarkerElement": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"SVGMarkerElement","type":"interface","url":"https://svgwg.org/svg2-draft/painting.html#InterfaceSVGMarkerElement"},
"https://svgwg.org/svg2-draft/painting.html#TermPaintServerElement": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"paint server element","type":"dfn","url":"https://svgwg.org/svg2-draft/painting.html#TermPaintServerElement"},
"https://svgwg.org/svg2-draft/paths.html#elementdef-path": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"path","type":"element","url":"https://svgwg.org/svg2-draft/paths.html#elementdef-path"},
"https://svgwg.org/svg2-draft/shapes.html#TermShapeElement": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"shape elements","type":"dfn","url":"https://svgwg.org/svg2-draft/shapes.html#TermShapeElement"},
"https://svgwg.org/svg2-draft/shapes.html#elementdef-line": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"line","type":"element","url":"https://svgwg.org/svg2-draft/shapes.html#elementdef-line"},
"https://svgwg.org/svg2-draft/shapes.html#elementdef-polygon": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"polygon","type":"element","url":"https://svgwg.org/svg2-draft/shapes.html#elementdef-polygon"},
"https://svgwg.org/svg2-draft/shapes.html#elementdef-polyline": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"polyline","type":"element","url":"https://svgwg.org/svg2-draft/shapes.html#elementdef-polyline"},
"https://svgwg.org/svg2-draft/struct.html#TermDescriptiveElement": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"descriptive element","type":"dfn","url":"https://svgwg.org/svg2-draft/struct.html#TermDescriptiveElement"},
"https://svgwg.org/svg2-draft/struct.html#TermStructuralElement": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"structural element","type":"dfn","url":"https://svgwg.org/svg2-draft/struct.html#TermStructuralElement"},
"https://svgwg.org/svg2-draft/struct.html#container-element": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"container element","type":"dfn","url":"https://svgwg.org/svg2-draft/struct.html#container-element"},
"https://svgwg.org/svg2-draft/struct.html#elementdef-switch": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"switch","type":"element","url":"https://svgwg.org/svg2-draft/struct.html#elementdef-switch"},
"https://svgwg.org/svg2-draft/struct.html#elementdef-symbol": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"symbol","type":"element","url":"https://svgwg.org/svg2-draft/struct.html#elementdef-symbol"},
"https://svgwg.org/svg2-draft/struct.html#elementdef-use": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"use","type":"element","url":"https://svgwg.org/svg2-draft/struct.html#elementdef-use"},
"https://svgwg.org/svg2-draft/styling.html#TermPresentationAttribute": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"presentation attributes","type":"dfn","url":"https://svgwg.org/svg2-draft/styling.html#TermPresentationAttribute"},
"https://svgwg.org/svg2-draft/styling.html#elementdef-style": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"style","type":"element","url":"https://svgwg.org/svg2-draft/styling.html#elementdef-style"},
"https://svgwg.org/svg2-draft/text.html#elementdef-text": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"svg","spec":"svg2","status":"current","text":"text","type":"element","url":"https://svgwg.org/svg2-draft/text.html#elementdef-text"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>