<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>CSS Pseudo-Elements Module Level 4</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/TR/css-pseudo-4/" rel="canonical">
  <link href="https://drafts.csswg.org/csslogo.ico" rel="icon">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
<style>/* Boilerplate: style-wpt */
:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">CSS Pseudo-Elements Module Level 4</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://drafts.csswg.org/css-pseudo-4/">https://drafts.csswg.org/css-pseudo-4/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/css-pseudo-4/">https://www.w3.org/TR/css-pseudo-4/</a>
      <dt>Previous Versions:
      <dd><a href="https://www.w3.org/TR/2020/WD-css-pseudo-4-20201231/" rel="prev">https://www.w3.org/TR/2020/WD-css-pseudo-4-20201231/</a>
      <dd><a href="https://www.w3.org/TR/2019/WD-css-pseudo-4-20190225/" rel="prev">https://www.w3.org/TR/2019/WD-css-pseudo-4-20190225/</a>
      <dd><a href="https://www.w3.org/TR/2016/WD-css-pseudo-4-20160607/" rel="prev">https://www.w3.org/TR/2016/WD-css-pseudo-4-20160607/</a>
      <dd><a href="https://www.w3.org/TR/2015/WD-css-pseudo-4-20150115/" rel="prev">https://www.w3.org/TR/2015/WD-css-pseudo-4-20150115/</a>
      <dt>Feedback:
      <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-pseudo-4">CSSWG Issues Repository</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="13329"><span class="p-name fn">Daniel Glazman</span> (<span class="p-org org">Disruptive Innovations</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="35400"><a class="p-name fn u-url url" href="http://fantasai.inkedblade.net/contact">Elika J. Etemad / fantasai</a> (<span class="p-org org">Invited Expert</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="46659"><a class="p-name fn u-email email" href="mailto:stearns@adobe.com">Alan Stearns</a> (<span class="p-org org">Adobe Systems Inc.</span>)
      <dt>Suggest an Edit for this Spec:
      <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-pseudo-4/Overview.bs">GitHub Editor</a>
      <dt>Issues List:
      <dd><a href="https://drafts.csswg.org/css-pseudo/#issues-index">Tracked in Editor’s Draft</a>
      <dt>Test Suite:
      <dd class="wpt-overview"><a href="https://wpt.fyi/results/css/css-pseudo/">https://wpt.fyi/results/css/css-pseudo/</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This CSS module defines pseudo-elements, abstract elements that represent portions of the CSS render tree that can be selected and styled.</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a> is a language for describing the rendering of structured documents
(such as HTML and XML)
on screen, on paper, etc. 
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p>Please send feedback
	by <a href="https://github.com/w3c/csswg-drafts/issues">filing issues in GitHub</a> (preferred),
	including the spec code “css-pseudo” in the title, like this:
	“[css-pseudo] <i>…summary of comment…</i>”.
	All issues and comments are <a href="https://lists.w3.org/Archives/Public/public-css-archive/">archived</a>.
	Alternately, feedback can be sent to the (<a href="https://lists.w3.org/Archives/Public/www-style/">archived</a>) public mailing list <a href="mailto:www-style@w3.org?Subject=%5Bcss-pseudo%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#typographic-pseudos"><span class="secno">2</span> <span class="content"> Typographic Pseudo-elements</span></a>
     <ol class="toc">
      <li>
       <a href="#first-line-pseudo"><span class="secno">2.1</span> <span class="content"> The ::first-line pseudo-element</span></a>
       <ol class="toc">
        <li><a href="#first-text-line"><span class="secno">2.1.1</span> <span class="content"> Finding the First Formatted Line</span></a>
        <li><a href="#first-line-styling"><span class="secno">2.1.2</span> <span class="content"> Styling the First Line Pseudo-element</span></a>
        <li><a href="#first-line-inheritance"><span class="secno">2.1.3</span> <span class="content"> Inheritance and the <span class="css">::first-line</span> Pseudo-element</span></a>
       </ol>
      <li>
       <a href="#first-letter-pseudo"><span class="secno">2.2</span> <span class="content"> The ::first-letter pseudo-element</span></a>
       <ol class="toc">
        <li><a href="#first-letter-application"><span class="secno">2.2.1</span> <span class="content"> Finding the First Letter Text</span></a>
        <li><a href="#first-letter-tree"><span class="secno">2.2.2</span> <span class="content"> Inheritance and Box Tree Structure of the <span class="css">::first-letter</span> Pseudo-element</span></a>
        <li><a href="#first-letter-styling"><span class="secno">2.2.3</span> <span class="content"> Styling the <span class="css">::first-letter</span> Pseudo-element</span></a>
       </ol>
     </ol>
    <li>
     <a href="#highlight-pseudos"><span class="secno">3</span> <span class="content"> Highlight Pseudo-elements</span></a>
     <ol class="toc">
      <li><a href="#highlight-selectors"><span class="secno">3.1</span> <span class="content"> Selecting Highlighted Content: the <span class="css">::selection</span>, <span class="css">::target-text</span>, <span class="css">::spelling-error</span>, and <span class="css">::grammar-error</span> pseudo-elements</span></a>
      <li><a href="#highlight-styling"><span class="secno">3.2</span> <span class="content"> Styling Highlights</span></a>
      <li><a href="#highlight-ua-styles"><span class="secno">3.3</span> <span class="content"> Default UA Styles</span></a>
      <li><a href="#highlight-bounds"><span class="secno">3.4</span> <span class="content"> Area of a Highlight</span></a>
      <li><a href="#highlight-cascade"><span class="secno">3.5</span> <span class="content"> Cascading and Per-Element Highlight Styles</span></a>
      <li>
       <a href="#highlight-painting"><span class="secno">3.6</span> <span class="content"> Painting the Highlight</span></a>
       <ol class="toc">
        <li><a href="#highlight-backgrounds"><span class="secno">3.6.1</span> <span class="content"> Backgrounds</span></a>
        <li><a href="#highlight-shadows"><span class="secno">3.6.2</span> <span class="content"> Shadows</span></a>
        <li><a href="#highlight-text"><span class="secno">3.6.3</span> <span class="content"> Text and Text Decorations</span></a>
        <li><a href="#highlight-replaced"><span class="secno">3.6.4</span> <span class="content"> Replaced Elements</span></a>
       </ol>
      <li><a href="#highlight-security"><span class="secno">3.7</span> <span class="content"> Security and Privacy Considerations</span></a>
     </ol>
    <li>
     <a href="#treelike"><span class="secno">4</span> <span class="content"> Tree-Abiding Pseudo-elements</span></a>
     <ol class="toc">
      <li><a href="#generated-content"><span class="secno">4.1</span> <span class="content"> Generated Content Pseudo-elements: <span class="css">::before</span> and <span class="css">::after</span></span></a>
      <li><a href="#marker-pseudo"><span class="secno">4.2</span> <span class="content"> List Markers: the <span class="css">::marker</span> pseudo-element</span></a>
      <li><a href="#placeholder-pseudo"><span class="secno">4.3</span> <span class="content"> Placeholder Input: the <span class="css">::placeholder</span> pseudo-element</span></a>
      <li><a href="#file-selector-button-pseudo"><span class="secno">4.4</span> <span class="content"> File Selector Button: the <span class="css">::file-selector-button</span> pseudo-element</span></a>
     </ol>
    <li><a href="#interactions"><span class="secno">5</span> <span class="content"> Overlapping Pseudo-element Interactions</span></a>
    <li>
     <a href="#cssom"><span class="secno">6</span> <span class="content"> Additions to the CSS Object Model</span></a>
     <ol class="toc">
      <li><a href="#CSSPseudoElement-interface"><span class="secno">6.1</span> <span class="content"> <code class="idl"><span>CSSPseudoElement</span></code> Interface</span></a>
      <li><a href="#window-interface"><span class="secno">6.2</span> <span class="content"> <code class="idl"><span>pseudo()</span></code> method of the <code class="idl"><span>Element</span></code> interface</span></a>
     </ol>
    <li><a href="#css2-compat"><span class="secno">7</span> <span class="content"> Compatibility Syntax</span></a>
    <li><a href="#changes"><span class="secno"></span> <span class="content"> Changes</span></a>
    <li><a href="#acknowledgements"><span class="secno"></span> <span class="content"> Acknowledgements</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> Document conventions</span></a>
      <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content"> Conformance classes</span></a>
      <li>
       <a href="#w3c-partial"><span class="secno"></span> <span class="content"> Partial implementations</span></a>
       <ol class="toc">
        <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span class="content"> Implementations of Unstable and Proprietary Features</span></a>
       </ol>
      <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> Non-experimental implementations</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p><em>This section is informative.</em></p>
   <p><a data-link-type="dfn" href="https://www.w3.org/TR/CSS21/selector.html#x22" id="ref-for-x22">Pseudo-elements</a> represent abstract elements of the document
  beyond those elements explicitly created by the document language.
  Since they are not restricted to fitting into the document tree,
  they can be used to select and style portions of the document
  that do not necessarily map to the document’s tree structure.
  For instance, the <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line">::first-line</a> pseudo-element can
  select content on the first formatted line of an element <em>after</em> text wrapping,
  allowing just that line to be styled differently
  from the rest of the paragraph.</p>
   <p>Each pseudo-element is associated with an <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element">originating element</a> and has syntax of the form <span class="css">::name-of-pseudo</span>.
  This module defines the pseudo-elements that exist in CSS
  and how they can be styled.
  For more information on pseudo-elements in general,
  and on their syntax and interaction with other <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#selector" id="ref-for-selector">selectors</a>,
  see <a data-link-type="biblio" href="#biblio-selectors-4" title="Selectors Level 4">[SELECTORS-4]</a>.</p>
   <h2 class="heading settled" data-level="2" id="typographic-pseudos"><span class="secno">2. </span><span class="content"> Typographic Pseudo-elements</span><a class="self-link" href="#typographic-pseudos"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="first-line-pseudo"><span class="secno">2.1. </span><span class="content"> The ::first-line pseudo-element</span><a class="self-link" href="#first-line-pseudo"></a></h3>
   <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-first-line">::first-line</dfn> <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-element" id="ref-for-pseudo-element">pseudo-element</a> represents
  the contents of the <a data-link-type="dfn" href="#first-formatted-line" id="ref-for-first-formatted-line">first formatted line</a> of its <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①">originating element</a>.</p>
   <div class="example" id="example-fb83f35a">
    <a class="self-link" href="#example-fb83f35a"></a> The rule below means
    “change the letters of the first line of every <code class="highlight">p</code> element to uppercase”: 
<pre class="lang-css highlight"><c- k>p</c-><c- p>:</c->:first-line <c- p>{</c-> <c- k>text-transform</c-><c- p>:</c-> uppercase <c- p>}</c-></pre>
    <p>The selector <span class="css">p::first-line</span> does not match any real document element.
    It instead matches a pseudo-element
    that the user agent will automatically insert
    at the beginning of every <code class="highlight">p</code> element.</p>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> Note that the length of the first line depends on a number of factors,
  including the width of the page, the font size, etc.</p>
   <div class="example" id="first-line-example">
    <a class="self-link" href="#first-line-example"></a> For example, given an ordinary HTML <a data-link-type="biblio" href="#biblio-html5" title="HTML5">[HTML5]</a> paragraph such as: 
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>P</c-><c- p>></c->This is a somewhat long HTML paragraph
that will be broken into several lines.
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.<c- p>&lt;/</c-><c- f>P</c-><c- p>></c->
</pre>
    <p>Depending on the width of the element,
    its lines might be broken as follows:</p>
<pre class="figure highlight">THIS IS A SOMEWHAT LONG HTML PARAGRAPH THAT
will be broken into several lines. The
first line will be by the ‘::first-line’
pseudo-element. The other lines will be
treated as ordinary lines in the paragraph.
</pre>
    <p>or alternately as follows:</p>
<pre class="figure highlight">THIS IS A SOMEWHAT LONG
HTML paragraph that will
be broken into several
lines. The first line will
be by the ‘::first-line’
pseudo-element. The other
lines will be treated as
ordinary lines in the
paragraph.
</pre>
   </div>
   <h4 class="heading settled" data-level="2.1.1" id="first-text-line"><span class="secno">2.1.1. </span><span class="content"> Finding the First Formatted Line</span><a class="self-link" href="#first-text-line"></a></h4>
   <p>In CSS, the <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①">::first-line</a> pseudo-element
  can only have an effect when attached to a <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-container" id="ref-for-block-container">block container</a>:</p>
   <ul>
    <li data-md>
     <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="first-formatted-line">first formatted line</dfn> of
a <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-container" id="ref-for-block-container①">block container</a> that establishes an <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#inline-formatting-context" id="ref-for-inline-formatting-context">inline formatting context</a> contains the <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#inline-level" id="ref-for-inline-level">inline-level</a> content of its first <a data-link-type="dfn" href="https://drafts.csswg.org/css-inline-3/#line-box" id="ref-for-line-box">line box</a>.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#first-formatted-line" id="ref-for-first-formatted-line①">first formatted line</a> of
a <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-container" id="ref-for-block-container②">block container</a> or <a data-link-type="dfn" href="https://drafts.csswg.org/css-multicol-1/#multi-column-container" id="ref-for-multi-column-container">multi-column container</a> that contains <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-level" id="ref-for-block-level">block-level</a> content
(and is not a <a data-link-type="dfn" href="https://drafts.csswg.org/css-tables-3/#table-wrapper-box" id="ref-for-table-wrapper-box">table wrapper box</a>)
is the <span id="ref-for-first-formatted-line②">first formatted line</span> of
its first <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#in-flow" id="ref-for-in-flow">in-flow</a> <span id="ref-for-block-level①">block-level</span> child.
If no such line exists,
it has no <span id="ref-for-first-formatted-line③">first formatted line</span>.</p>
   </ul>
   <p class="note" role="note"><span class="marker">Note:</span> The <a data-link-type="dfn" href="#first-formatted-line" id="ref-for-first-formatted-line④">first formatted line</a> can be an empty line.
  For example, the first line of the <code class="highlight">p</code> in <code class="lang-markup highlight"><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>br</c-><c- p>></c->First…</code> doesn’t contain any letters.
  Thus the word “First” is not on the first formatted line,
  and will not be affected by <span class="css">p::first-line</span>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The first line of a <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-container" id="ref-for-block-container③">block container</a> that does not participate in a <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-formatting-context" id="ref-for-block-formatting-context">block formatting context</a> cannot be the first formatted line of an ancestor element.
  Thus, in <code class="lang-markup highlight"><c- p>&lt;</c-><c- f>DIV</c-><c- p>>&lt;</c-><c- f>P</c-> <c- e>STYLE</c-><c- o>=</c-><c- s>"display: inline-block"</c-><c- p>></c->Hello<c- p>&lt;</c-><c- f>BR</c-><c- p>></c->Goodbye<c- p>&lt;/</c-><c- f>P</c-><c- p>></c-> etcetera<c- p>&lt;/</c-><c- f>DIV</c-><c- p>></c-></code> the first formatted line of the <code class="highlight">DIV</code> is not the line “Hello”,
  but rather the (otherwise empty) line that contains that entire inline block.</p>
   <p>When a <a data-link-type="dfn" href="#first-formatted-line" id="ref-for-first-formatted-line⑤">first formatted line</a> is represented
  by multiple <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line②">::first-line</a> pseudo-elements,
  they are nested in the same order as their <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element②">originating elements</a>.</p>
   <div class="example" id="example-7499991d">
    <a class="self-link" href="#example-7499991d"></a> Consider the following markup: 
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>DIV</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>P</c-><c- p>></c->First paragraph<c- p>&lt;/</c-><c- f>P</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>P</c-><c- p>></c->Second paragraph<c- p>&lt;/</c-><c- f>P</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>DIV</c-><c- p>></c->
</pre>
    <p>If we assume a <a data-link-type="dfn" href="#fictional-tag-sequence" id="ref-for-fictional-tag-sequence">fictional tag sequence</a> to represent
    the elements’ <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line③">::first-line</a> pseudo elements,
    it would be something like:</p>
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>DIV</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>P</c-><c- p>>&lt;</c-><c- f>DIV::first-line</c-><c- p>>&lt;</c-><c- f>P::first-line</c-><c- p>></c->First paragraph<c- p>&lt;/</c-><c- f>P::first-line</c-><c- p>>&lt;/</c-><c- f>DIV::first-line</c-><c- p>>&lt;/</c-><c- f>P</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>P</c-><c- p>>&lt;</c-><c- f>P::first-line</c-><c- p>></c->Second paragraph<c- p>&lt;/</c-><c- f>P::first-line</c-><c- p>>&lt;/</c-><c- f>P</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>DIV</c-><c- p>></c->
</pre>
   </div>
   <h4 class="heading settled" data-level="2.1.2" id="first-line-styling"><span class="secno">2.1.2. </span><span class="content"> Styling the First Line Pseudo-element</span><a class="self-link" href="#first-line-styling"></a></h4>
   <p>The <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line④">::first-line</a> pseudo-element’s generated box
  behaves similar to that of an inline-level element, but with certain restrictions.
  The following CSS properties apply to a <span class="css" id="ref-for-selectordef-first-line⑤">::first-line</span> pseudo-element:</p>
   <ul>
    <li>all font properties (see <a data-link-type="biblio" href="#biblio-css-fonts-3" title="CSS Fonts Module Level 3">[CSS-FONTS-3]</a>) 
    <li>the <a class="property css" data-link-type="property">color</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-color-4/#propdef-opacity" id="ref-for-propdef-opacity">opacity</a> properties (see <a data-link-type="biblio" href="#biblio-css-color-3" title="CSS Color Module Level 3">[CSS-COLOR-3]</a>) 
    <li>all background properties (see <a data-link-type="biblio" href="#biblio-css-backgrounds-3" title="CSS Backgrounds and Borders Module Level 3">[CSS-BACKGROUNDS-3]</a>) 
    <li>any typesetting properties that apply to inline elements (see <a data-link-type="biblio" href="#biblio-css-text-3" title="CSS Text Module Level 3">[CSS-TEXT-3]</a>) 
    <li>all text decoration properties (see <a data-link-type="biblio" href="#biblio-css-text-decor-3" title="CSS Text Decoration Module Level 3">[CSS-TEXT-DECOR-3]</a>) 
    <li>the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-ruby-1/#propdef-ruby-position" id="ref-for-propdef-ruby-position">ruby-position</a> property (see <a data-link-type="biblio" href="#biblio-css-ruby-1" title="CSS Ruby Annotation Layout Module Level 1">[CSS-RUBY-1]</a>) 
    <li>any inline layout properties that apply to inline elements (see <a data-link-type="biblio" href="#biblio-css-inline-3" title="CSS Inline Layout Module Level 3">[CSS-INLINE-3]</a>) 
    <li>any other properties defined to apply to <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line⑥">::first-line</a> by their respective specifications 
   </ul>
   <p>User agents may apply other properties as well except for
  the following excluded properties:</p>
   <ul>
    <li><a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode">writing-mode</a> 
    <li><a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction">direction</a> 
    <li><a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-text-orientation" id="ref-for-propdef-text-orientation">text-orientation</a> 
   </ul>
   <h4 class="heading settled" data-level="2.1.3" id="first-line-inheritance"><span class="secno">2.1.3. </span><span class="content"> Inheritance and the <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line⑦">::first-line</a> Pseudo-element</span><a class="self-link" href="#first-line-inheritance"></a></h4>
   <p>During CSS <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#css-inheritance" id="ref-for-css-inheritance">inheritance</a>,
  the <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#box-fragment" id="ref-for-box-fragment">fragment</a> of a child that occurs on the first line
  inherits any standard <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#inherited-property" id="ref-for-inherited-property">inherited properties</a>—​except the properties excluded above—​from the <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line⑧">::first-line</a> pseudo-element.
  For all other properties,
  including all <a data-link-type="dfn" href="https://drafts.csswg.org/css-variables-2/#custom-property" id="ref-for-custom-property">custom properties</a> <a data-link-type="biblio" href="#biblio-css-variables-1" title="CSS Custom Properties for Cascading Variables Module Level 1">[CSS-VARIABLES-1]</a>,
  inheritance is
  from the non-pseudo parent.
  (The portion of a child element that does not occur on the first line
  always inherits from the non-pseudo parent.)</p>
   <div class="example" id="example-62ec3857">
    <a class="self-link" href="#example-62ec3857"></a> In the common case (of standard inherited CSS properties), <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#css-inheritance" id="ref-for-css-inheritance①">inheritance</a> into and from a <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line⑨">::first-line</a> pseudo-element
    can be understood by writing out a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fictional-tag-sequence">fictional tag sequence</dfn> to represent <span class="css" id="ref-for-selectordef-first-line①⓪">::first-line</span>.
    Consider the <a href="#first-line-example">earlier example</a>;
    in case of the first rendering, the fictional tag sequence would be: 
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>P</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>p::first-line</c-><c- p>></c-></strong>This is a somewhat long HTML paragraph
that<strong><c- p>&lt;/</c-><c- f>p::first-line</c-><c- p>></c-></strong> will be broken into several lines.
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
</pre>
    <p>And in the case of the second rendering:</p>
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>p::first-line</c-><c- p>></c-></strong>This is a somewhat long<strong><c- p>&lt;/</c-><c- f>p::first-line</c-><c- p>></c-></strong> HTML paragraph
that will be broken into several lines.
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
</pre>
   </div>
   <div class="example" id="example-fce77ea8">
    <a class="self-link" href="#example-fce77ea8"></a> If a pseudo-element breaks up a real element,
    the effect can often be described
    by a <a data-link-type="dfn" href="#fictional-tag-sequence" id="ref-for-fictional-tag-sequence①">fictional tag sequence</a> that closes and then re-opens the element.
    Suppose we mark up the earlier example
    with a <code class="highlight">span</code> element encompassing the first sentence: 
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>span</c-><c- p>></c-></strong>This is a somewhat long HTML paragraph
that will be broken into several lines.<strong><c- p>&lt;/</c-><c- f>span</c-><c- p>></c-></strong>
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
</pre>
    <p>The effect of the first rendering
    would be similar to the following <a data-link-type="dfn" href="#fictional-tag-sequence" id="ref-for-fictional-tag-sequence②">fictional tag sequence</a>:</p>
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>p::first-line</c-><c- p>>&lt;</c-><c- f>span</c-><c- p>></c-></strong>This is a somewhat long HTML paragraph
that<strong><c- p>&lt;/</c-><c- f>span</c-><c- p>>&lt;/</c-><c- f>p::first-line</c-><c- p>>&lt;</c-><c- f>span</c-><c- p>></c-></strong> will be broken into several lines.<strong><c- p>&lt;/</c-><c- f>span</c-><c- p>></c-></strong>
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
</pre>
   </div>
   <h3 class="heading settled" data-level="2.2" id="first-letter-pseudo"><span class="secno">2.2. </span><span class="content"> The ::first-letter pseudo-element</span><a class="self-link" href="#first-letter-pseudo"></a></h3>
   <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-first-letter">::first-letter</dfn> pseudo-element represents
  the first <a data-link-type="dfn" href="https://drafts.csswg.org/css-text-4/#typographic-letter-unit" id="ref-for-typographic-letter-unit">typographic letter unit</a> <a data-link-type="biblio" href="#biblio-css-text-3" title="CSS Text Module Level 3">[CSS-TEXT-3]</a> on the <a data-link-type="dfn" href="#first-formatted-line" id="ref-for-first-formatted-line⑥">first formatted line</a> of its <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element③">originating element</a>,
  its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="first-letter-text">first-letter text</dfn>.
  The <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter">::first-letter</a> pseudo-element can be used
  to create “initial caps” and “drop caps”,
  which are common typographic effects.</p>
   <div class="example" id="example-b4ed8f23">
    <a class="self-link" href="#example-b4ed8f23"></a> For example, the following rule creates a 2-line drop-letter
    on every paragraph following a level-2 header,
    using the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter" id="ref-for-propdef-initial-letter">initial-letter</a> property defined in <a data-link-type="biblio" href="#biblio-css-inline-3" title="CSS Inline Layout Module Level 3">[CSS-INLINE-3]</a>: 
<pre class="lang-css highlight">h2 + p::first-letter <c- p>{</c-> <c- k>initial-letter</c-><c- p>:</c-> <c- m>2</c-><c- p>;</c-> <c- p>}</c-></pre>
   </div>
   <p>As explained in <a data-link-type="biblio" href="#biblio-css-text-3" title="CSS Text Module Level 3">[CSS-TEXT-3]</a>,
  a <a data-link-type="dfn" href="https://drafts.csswg.org/css-text-4/#typographic-letter-unit" id="ref-for-typographic-letter-unit①">typographic letter unit</a> can include more than one Unicode codepoint.
  For example, combining characters must be kept with their base character.
  Also, languages may have additional rules
  about how to treat certain letter combinations.
  In Dutch, for example, if the letter combination "ij" appears at the beginning of an element,
  both letters should be considered within the <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①">::first-letter</a> pseudo-element. <a data-link-type="biblio" href="#biblio-uax29" title="Unicode Text Segmentation">[UAX29]</a> When selecting the <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text">first-letter text</a>,
  the UA should tailor its definition of <span id="ref-for-typographic-letter-unit②">typographic letter unit</span> to reflect the first-letter traditions of the <span class="css" id="ref-for-selectordef-first-letter②">::first-letter</span> pseudo-element’s <em>containing block</em>’s content language.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Note that the first <a data-link-type="dfn" href="https://drafts.csswg.org/css-text-4/#typographic-letter-unit" id="ref-for-typographic-letter-unit③">typographic letter unit</a> may in fact
  be a digit, e.g., the “6” in “67 million dollars is a lot of money.”</p>
   <p>Punctuation (i.e, characters that belong to the Punctuation (<code class="highlight">P*</code>) <a data-link-type="dfn">Unicode general category</a> <a data-link-type="biblio" href="#biblio-uax44" title="Unicode Character Database">[UAX44]</a>)
  that precedes or follows the first <a data-link-type="dfn" href="https://drafts.csswg.org/css-text-4/#typographic-letter-unit" id="ref-for-typographic-letter-unit④">typographic letter unit</a> and any intervening space separators
  (characters that belong to the <code class="highlight">Zs</code> Unicode general category <span title="Unicode Character Database">[UAX44]</span>)
  must also be included as part of the <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text①">first-letter text</a> in the <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter③">::first-letter</a> pseudo-element.</p>
   <div class="figure"> <img alt="Quotes that precede the first letter should be included." src="images/first-letter2.gif"> </div>
   <h4 class="heading settled" data-level="2.2.1" id="first-letter-application"><span class="secno">2.2.1. </span><span class="content"> Finding the First Letter Text</span><a class="self-link" href="#first-letter-application"></a></h4>
   <p>As with <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①①">::first-line</a>,
  the <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter④">::first-letter</a> pseudo-element
  can only have an effect when attached to a <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-container" id="ref-for-block-container④">block container</a>.
  Its <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text②">first-letter text</a> is the first such <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#inline-level" id="ref-for-inline-level①">inline-level content</a> participating in the <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#inline-formatting-context" id="ref-for-inline-formatting-context①">inline formatting context</a> of its <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element④">originating element</a>’s <a data-link-type="dfn" href="#first-formatted-line" id="ref-for-first-formatted-line⑦">first formatted line</a>,
  if it is not preceded by any other in-flow content
  (such as images or inline tables) on its line.</p>
   <p>For this purpose, any <a data-link-type="dfn" href="https://drafts.csswg.org/css-lists-3/#marker" id="ref-for-marker">marker boxes</a> are ignored,
  as if they were out-of-flow.
  However, if an element has in-flow <a class="css" data-link-type="maybe" href="#selectordef-before" id="ref-for-selectordef-before">::before</a> or <a class="css" data-link-type="maybe" href="#selectordef-after" id="ref-for-selectordef-after">::after</a> content,
  the <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text③">first-letter text</a> is selected from the content of the element <em>including</em> that generated content.</p>
   <div class="example" id="example-179a5087"><a class="self-link" href="#example-179a5087"></a> Example:
    After the rule <code class="lang-css highlight"><c- k>p</c-><c- p>:</c->:before <c- p>{</c-><c- k>content</c-><c- p>:</c-> <c- s>"Note: "</c-><c- p>}</c-></code>, the
    selector <span class="css">p::first-letter</span> matches the "N" of "Note". </div>
   <p>If no such text exists,
  then there is no <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text④">first-letter text</a> and no <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter⑤">::first-letter</a> pseudo-element.</p>
   <p class="note" role="note"><span class="marker">Note:</span> When the <a data-link-type="dfn" href="#first-formatted-line" id="ref-for-first-formatted-line⑧">first formatted line</a> is empty, <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter⑥">::first-letter</a> will not match anything.
  For example, in this HTML fragment: <code class="lang-markup highlight"><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>br</c-><c- p>></c->First...</code> the first line doesn’t contain any letters,
  so <span class="css" id="ref-for-selectordef-first-letter⑦">::first-letter</span> doesn’t match anything.
  In particular, it does not match the “F” of “First”,
  which is on the second line.</p>
   <p class="note" role="note"><span class="marker">Note:</span> As with <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①②">::first-line</a>,
  the <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text⑤">first-letter text</a> of a <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-container" id="ref-for-block-container⑤">block container</a> that does not participate in a <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#block-formatting-context" id="ref-for-block-formatting-context①">block formatting context</a> cannot be the <span id="ref-for-first-letter-text⑥">first-letter text</span> of an ancestor element.
  Thus, in <code class="lang-markup highlight"><c- p>&lt;</c-><c- f>DIV</c-><c- p>>&lt;</c-><c- f>P</c-> <c- e>STYLE</c-><c- o>=</c-><c- s>"display: inline-block"</c-><c- p>></c->Hello<c- p>&lt;</c-><c- f>BR</c-><c- p>></c->Goodbye<c- p>&lt;/</c-><c- f>P</c-><c- p>></c-> etcetera<c- p>&lt;/</c-><c- f>DIV</c-><c- p>></c-></code> the first letter of the <code class="highlight">DIV</code> is not the letter “H”.
  In fact, the <code class="highlight">DIV</code> doesn’t have a first letter,
  as its <a data-link-type="dfn" href="#first-formatted-line" id="ref-for-first-formatted-line⑨">first formatted line</a> contains no content besides the inline block.</p>
   <h4 class="heading settled" data-level="2.2.2" id="first-letter-tree"><span class="secno">2.2.2. </span><span class="content"> Inheritance and Box Tree Structure of the <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter⑧">::first-letter</a> Pseudo-element</span><a class="self-link" href="#first-letter-tree"></a></h4>
   <p>The <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter⑨">::first-letter</a> pseudo-element is wrapped
  immediately around the <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text⑦">first-letter text</a> it represents,
  even if that text is in a descendant.
  When a <span id="ref-for-first-letter-text⑧">first-letter text</span> is represented by multiple <span class="css" id="ref-for-selectordef-first-letter①⓪">::first-letter</span> pseudo-elements,
  they are nested in the same order as their <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element⑤">originating elements</a>. <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#css-inheritance" id="ref-for-css-inheritance②">Inheritance</a> behaves accordingly.</p>
   <div class="example" id="example-fd33f595">
    <a class="self-link" href="#example-fd33f595"></a> Consider the following markup: 
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>span</c-><c- p>></c->The first few words<c- p>&lt;/</c-><c- f>span</c-><c- p>></c->
  and the rest of the paragraph.
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
    <p>If we assume a <a data-link-type="dfn" href="#fictional-tag-sequence" id="ref-for-fictional-tag-sequence③">fictional tag sequence</a> to represent the elements’ <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①①">::first-letter</a> pseudo-elements,
    it would be something like:</p>
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>span</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>div::first-letter</c-><c- p>>&lt;</c-><c- f>p::first-letter</c-><c- p>></c-></strong>T<strong>&lt;/…>&lt;/…></strong>he first few words<c- p>&lt;/</c-><c- f>span</c-><c- p>></c->
  and the rest of the paragraph.
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
   </div>
   <p>If the characters that would form the <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text⑨">first-letter text</a> are not all in the same element
  (as the <code class="highlight">‘T</code> in <code class="lang-css highlight">&lt;p>‘&lt;em>T...</code>),
  the user agent may create a <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①②">::first-letter</a> pseudo-element
  from one of the elements, or all elements,
  or simply not create a pseudo-element.
  Additionally, if the <span id="ref-for-first-letter-text①⓪">first-letter text</span> is not at the start of the line
  (for example due to bidirectional reordering,
  or due to a <a data-link-type="dfn" href="https://drafts.csswg.org/css-lists-3/#list-item" id="ref-for-list-item">list item</a> <a data-link-type="dfn" href="https://aomediacodec.github.io/av1-isobmff/#marker" id="ref-for-marker①">marker</a> with <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-lists-3/#propdef-list-style-position" id="ref-for-propdef-list-style-position">list-style-position: inside</a>),
  then the user agent is not required to create the pseudo-element(s).</p>
   <p>A <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①③">::first-letter</a> pseudo-element is contained within
  any <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①③">::first-line</a> pseudo-elements,
  and thus inherits (potentially indirectly) from <span class="css" id="ref-for-selectordef-first-line①④">::first-line</span>,
  the same as any <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#inline-box" id="ref-for-inline-box">inline box</a> on the same line.</p>
   <h4 class="heading settled" data-level="2.2.3" id="first-letter-styling"><span class="secno">2.2.3. </span><span class="content"> Styling the <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①④">::first-letter</a> Pseudo-element</span><a class="self-link" href="#first-letter-styling"></a></h4>
   <p>In CSS a ::first-letter pseudo-element is similar to an <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#inline-box" id="ref-for-inline-box①">inline box</a>.
  The following properties that apply to <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①⑤">::first-letter</a> pseudo-elements:</p>
   <ul>
    <li>all font properties (see <a data-link-type="biblio" href="#biblio-css-fonts-3" title="CSS Fonts Module Level 3">[CSS-FONTS-3]</a>) 
    <li>the <a class="property css" data-link-type="property">color</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-color-4/#propdef-opacity" id="ref-for-propdef-opacity①">opacity</a> properties (see <a data-link-type="biblio" href="#biblio-css-color-3" title="CSS Color Module Level 3">[CSS-COLOR-3]</a>) 
    <li>all background properties (see <a data-link-type="biblio" href="#biblio-css-backgrounds-3" title="CSS Backgrounds and Borders Module Level 3">[CSS-BACKGROUNDS-3]</a>) 
    <li>any typesetting properties that apply to inline elements (see <a data-link-type="biblio" href="#biblio-css-text-3" title="CSS Text Module Level 3">[CSS-TEXT-3]</a>) 
    <li>all text decoration properties (see <a data-link-type="biblio" href="#biblio-css-text-decor-3" title="CSS Text Decoration Module Level 3">[CSS-TEXT-DECOR-3]</a>) 
    <li>any inline layout properties that apply to inline elements (see <a data-link-type="biblio" href="#biblio-css-inline-3" title="CSS Inline Layout Module Level 3">[CSS-INLINE-3]</a>) 
    <li>margin and padding properties (see <a data-link-type="biblio" href="#biblio-css2" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>) 
    <li>border properties and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-box-shadow" id="ref-for-propdef-box-shadow">box-shadow</a> (see <a data-link-type="biblio" href="#biblio-css-backgrounds-3" title="CSS Backgrounds and Borders Module Level 3">[CSS-BACKGROUNDS-3]</a>) 
    <li>any other properties defined to apply to <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①⑥">::first-letter</a> by their respective specifications 
   </ul>
   <p>User agents may apply other properties as well.
  However,
  in no case may the application of such unlisted properties to <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①⑦">::first-letter</a> change
  what <a data-link-type="dfn" href="#first-letter-text" id="ref-for-first-letter-text①①">first-letter text</a> is represented by that <span class="css" id="ref-for-selectordef-first-letter①⑧">::first-letter</span>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> In previous levels of CSS,
  user agents were allowed to choose a line height, width, and height
  based on the shape of the letter,
  to approximate font sizes;
  and to take the glyph outline into account when performing layout.
  The possibility of such loosely-defined magic has been intentionally removed,
  as it proved to be a poor solution for the intended use case (drop caps and raised caps),
  yet caused interoperability problems.
  See <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter" id="ref-for-propdef-initial-letter①">initial-letter</a> in <a data-link-type="biblio" href="#biblio-css-inline-3" title="CSS Inline Layout Module Level 3">[CSS-INLINE-3]</a> for explicitly handling drop caps and raised caps.</p>
   <h2 class="heading settled" data-level="3" id="highlight-pseudos"><span class="secno">3. </span><span class="content"> Highlight Pseudo-elements</span><a class="self-link" href="#highlight-pseudos"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="highlight-selectors"><span class="secno">3.1. </span><span class="content"> Selecting Highlighted Content: the <a class="css" data-link-type="maybe" href="#selectordef-selection" id="ref-for-selectordef-selection">::selection</a>, <a class="css" data-link-type="maybe" href="#selectordef-target-text" id="ref-for-selectordef-target-text">::target-text</a>, <a class="css" data-link-type="maybe" href="#selectordef-spelling-error" id="ref-for-selectordef-spelling-error">::spelling-error</a>, and <a class="css" data-link-type="maybe" href="#selectordef-grammar-error" id="ref-for-selectordef-grammar-error">::grammar-error</a> pseudo-elements</span><a class="self-link" href="#highlight-selectors"></a></h3>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="highlight pseudo-element" id="highlight-pseudo-element">highlight pseudo-elements</dfn> represent portions of a document that have been given a particular status
  and are typically styled differently to indicate that status to the user.
  For example,
  selected portions of the document are typically highlighted
  (given alternate background and foreground colors, or a color wash)
  to indicate their selected status.
  The following <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element">highlight pseudo-elements</a> are defined:</p>
   <dl>
    <dt>
     <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-selection">::selection</dfn> 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><span class="wpt-name">active-selection-001-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-001-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">active-selection-002-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-002-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">active-selection-004-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-004-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-011.html" title="css/css-pseudo/active-selection-011.html">active-selection-011.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-011.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-012.html" title="css/css-pseudo/active-selection-012.html">active-selection-012.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-012.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-012.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-014.html" title="css/css-pseudo/active-selection-014.html">active-selection-014.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-014.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-014.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-016.html" title="css/css-pseudo/active-selection-016.html">active-selection-016.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-016.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-016.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-018.html" title="css/css-pseudo/active-selection-018.html">active-selection-018.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-018.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-018.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-025.html" title="css/css-pseudo/active-selection-025.html">active-selection-025.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-025.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-025.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-027.html" title="css/css-pseudo/active-selection-027.html">active-selection-027.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-027.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-027.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-056.html" title="css/css-pseudo/active-selection-056.html">active-selection-056.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-056.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-056.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-057.html" title="css/css-pseudo/active-selection-057.html">active-selection-057.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-057.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-057.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-063.html" title="css/css-pseudo/active-selection-063.html">active-selection-063.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-063.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-063.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/selection-contenteditable-011.html" title="css/css-pseudo/selection-contenteditable-011.html">selection-contenteditable-011.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/selection-contenteditable-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/selection-contenteditable-011.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/selection-input-011.html" title="css/css-pseudo/selection-input-011.html">selection-input-011.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/selection-input-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/selection-input-011.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/selection-textarea-011.html" title="css/css-pseudo/selection-textarea-011.html">selection-textarea-011.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/selection-textarea-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/selection-textarea-011.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/textpath-selection-011.html" title="css/css-pseudo/textpath-selection-011.html">textpath-selection-011.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/textpath-selection-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/textpath-selection-011.html"><small>(source)</small></a>
      </ul>
     </details>
    <dd> The <a class="css" data-link-type="maybe" href="#selectordef-selection" id="ref-for-selectordef-selection①">::selection</a> pseudo-element represents
      the portion of a document that has been selected
      as the target or object of some possible future user-agent operation(s).
      It applies, for example, to selected text within an editable text field,
      which would be copied by a copy operation or replaced by a paste operation. 
    <dt><dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-target-text">::target-text</dfn> 
    <dd>
      The <a class="css" data-link-type="maybe" href="#selectordef-target-text" id="ref-for-selectordef-target-text①">::target-text</a> pseudo-element represents text
      directly targeted by the document URL’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment" id="ref-for-concept-url-fragment">fragment</a>, if any. 
     <p class="note" role="note"><span class="marker">Note:</span> When a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment" id="ref-for-concept-url-fragment①">URL fragment</a> targets an element,
      the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-4/#target-pseudo" id="ref-for-target-pseudo">:target</a> pseudo-element can be used to select it,
      but <a class="css" data-link-type="maybe" href="#selectordef-target-text" id="ref-for-selectordef-target-text②">::target-text</a> does not match anything.
      It only matches text that is itself targeted by the [<span id="ref-for-concept-url-fragment②">fragment</span>].</p>
    <dt><dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-spelling-error">::spelling-error</dfn> 
    <dd>
      The <a class="css" data-link-type="maybe" href="#selectordef-spelling-error" id="ref-for-selectordef-spelling-error①">::spelling-error</a> pseudo-element represents
      a portion of text that has been flagged by the user agent as misspelled. 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/spelling-error-001.html" title="css/css-pseudo/spelling-error-001.html">spelling-error-001.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/spelling-error-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/spelling-error-001.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">spelling-error-002-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/spelling-error-002-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">spelling-error-003-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/spelling-error-003-manual.html"><small>(source)</small></a>
      </ul>
     </details>
    <dt><dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-grammar-error">::grammar-error</dfn> 
    <dd>
      The <a class="css" data-link-type="maybe" href="#selectordef-grammar-error" id="ref-for-selectordef-grammar-error①">::grammar-error</a> pseudo-element represents
      a portion of text that has been flagged by the user agent as grammatically incorrect. 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/grammar-error-001.html" title="css/css-pseudo/grammar-error-001.html">grammar-error-001.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/grammar-error-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/grammar-error-001.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">grammar-error-002-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/grammar-error-002-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">grammar-error-003-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/grammar-error-003-manual.html"><small>(source)</small></a>
      </ul>
     </details>
   </dl>
   <p>The <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element①">highlight pseudo-elements</a> do not necessarily fit into the element tree,
  and can arbitrarily cross element boundaries without honoring its nesting structure.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A future level of CSS may introduce ways to create
  custom highlight pseudo-elements.</p>
   <h3 class="heading settled" data-level="3.2" id="highlight-styling"><span class="secno">3.2. </span><span class="content"> Styling Highlights</span><a class="self-link" href="#highlight-styling"></a></h3>
   <p>The <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element②">highlight pseudo-elements</a> can only be styled
  by a limited set of properties that do not affect layout
  and can be applied performantly in a highly dynamic environment—​and additionally (to ensure interoperability)
  whose rendering within the <a href="#highlight-bounds">required area</a> is not dependent on the exact (UA-determined) bounds
  of the <a data-link-type="dfn" href="#highlight-overlay" id="ref-for-highlight-overlay">highlight overlay</a>.
  The following properties apply to the <span id="ref-for-highlight-pseudo-element③">highlight pseudo-elements</span>:</p>
   <ul>
    <li>
     <a class="property css" data-link-type="property">color</a> 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><span class="wpt-name">active-selection-001-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-001-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-011.html" title="css/css-pseudo/active-selection-011.html">active-selection-011.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-011.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-016.html" title="css/css-pseudo/active-selection-016.html">active-selection-016.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-016.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-016.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-018.html" title="css/css-pseudo/active-selection-018.html">active-selection-018.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-018.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-018.html"><small>(source)</small></a>
      </ul>
     </details>
    <li>
     <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-color" id="ref-for-propdef-background-color">background-color</a> 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><span class="wpt-name">active-selection-002-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-002-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-012.html" title="css/css-pseudo/active-selection-012.html">active-selection-012.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-012.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-012.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-031.html" title="css/css-pseudo/active-selection-031.html">active-selection-031.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-031.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-031.html"><small>(source)</small></a>
      </ul>
     </details>
    <li>
     <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-text-decor-4/#propdef-text-decoration" id="ref-for-propdef-text-decoration">text-decoration</a> and its associated properties 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><span class="wpt-name">active-selection-004-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-004-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-014.html" title="css/css-pseudo/active-selection-014.html">active-selection-014.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-014.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-014.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-021.html" title="css/css-pseudo/active-selection-021.html">active-selection-021.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-021.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-021.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/grammar-error-001.html" title="css/css-pseudo/grammar-error-001.html">grammar-error-001.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/grammar-error-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/grammar-error-001.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">grammar-error-002-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/grammar-error-002-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">grammar-error-003-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/grammar-error-003-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/spelling-error-001.html" title="css/css-pseudo/spelling-error-001.html">spelling-error-001.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/spelling-error-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/spelling-error-001.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">spelling-error-002-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/spelling-error-002-manual.html"><small>(source)</small></a>
       <li class="wpt-test"><span class="wpt-name">spelling-error-003-manual.html (manual test) </span><a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/spelling-error-003-manual.html"><small>(source)</small></a>
      </ul>
     </details>
    <li><a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-text-decor-4/#propdef-text-shadow" id="ref-for-propdef-text-shadow">text-shadow</a> 
    <li>
     <a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-color" id="ref-for-propdef-stroke-color">stroke-color</a>, <a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-fill-color" id="ref-for-propdef-fill-color">fill-color</a>, and <a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width" id="ref-for-propdef-stroke-width">stroke-width</a> 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/textpath-selection-011.html" title="css/css-pseudo/textpath-selection-011.html">textpath-selection-011.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/textpath-selection-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/textpath-selection-011.html"><small>(source)</small></a>
      </ul>
     </details>
   </ul>
   <p class="issue" id="issue-6ca196f5"><a class="self-link" href="#issue-6ca196f5"></a> Are there any other properties that should be included here?</p>
   <p>The <a class="property css" data-link-type="property">color</a> property specifies the color of both the text
  and all line decorations (underline, overline, line-through)
  and emphasis marks (<a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-text-decor-4/#propdef-text-emphasis" id="ref-for-propdef-text-emphasis">text-emphasis</a>)
  applied to the text
  by the <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element⑥">originating element</a> and its ancestors and descendants.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Historically (and at the time of writing)
  only <a class="property css" data-link-type="property">color</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-color" id="ref-for-propdef-background-color①">background-color</a> have been interoperably supported.</p>
   <h3 class="heading settled" data-level="3.3" id="highlight-ua-styles"><span class="secno">3.3. </span><span class="content"> Default UA Styles</span><a class="self-link" href="#highlight-ua-styles"></a></h3>
   <p>The following additions are recommended for the default UA stylesheet:</p>
<pre class="lang-css highlight"><c- c>/* Represent default spelling/grammar error styling in an adjustable way */</c->
:root::spelling-error <c- p>{</c-> <c- k>text-decoration-line</c-><c- p>:</c-> spelling-error<c- p>;</c-> <c- p>}</c->
:root::grammar-error  <c- p>{</c-> <c- k>text-decoration-line</c-><c- p>:</c-> grammar-error<c- p>;</c-> <c- p>}</c->
<c- c>/* Highlight targeted text */</c->
:root::target-text    <c- p>{</c-> <c- k>color</c-><c- p>:</c-> MarkText<c- p>;</c-> <c- k>background</c-><c- p>:</c-> Mark<c- p>;</c-> <c- p>}</c->
</pre>
   <p>UAs may apply additional effects to enhance the presentation
  of highlighted content,
  for example dimming content other than the highlighted text
  or transitioning out a highlight style based on user interactions or timing.
  These are not controlled by CSS.</p>
   <h3 class="heading settled" data-level="3.4" id="highlight-bounds"><span class="secno">3.4. </span><span class="content"> Area of a Highlight</span><a class="self-link" href="#highlight-bounds"></a></h3>
   <p>For each type of highlighting (see <a href="#highlight-selectors">§ 3.1 Selecting Highlighted Content: the ::selection,  ::target-text, ::spelling-error, and ::grammar-error pseudo-elements</a>)
  there exists a single <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="highlight-overlay">highlight overlay</dfn> for the entire document,
  the active portions of which are represented
  by the corresponding <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element④">highlight pseudo-element</a>.
  Each box owns the piece of the overlay corresponding to any text or replaced content
  directly contained by the box. </p>
   <ul>
    <li>
      For text, the corresponding overlay must cover at least the entire em box
      and may extend further above/below the em box to the line box edges.
      Spacing between two characters may also be part of the overlay area,
      in which case it belongs to the innermost element that contains both characters
      and is selected when both characters are selected. 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/selection-intercharacter-011.html" title="css/css-pseudo/selection-intercharacter-011.html">selection-intercharacter-011.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/selection-intercharacter-011.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/selection-intercharacter-011.html"><small>(source)</small></a>
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/selection-intercharacter-012.html" title="css/css-pseudo/selection-intercharacter-012.html">selection-intercharacter-012.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/selection-intercharacter-012.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/selection-intercharacter-012.html"><small>(source)</small></a>
      </ul>
     </details>
    <li>
      For replaced content, the associated overlay must cover at least the entire replaced object,
      and may extend outward to include the element’s entire content box. 
     <details class="wpt-tests-block" dir="ltr" lang="en">
      <summary>Tests</summary>
      <ul class="wpt-tests-list">
       <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-043.html" title="css/css-pseudo/active-selection-043.html">active-selection-043.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-043.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-043.html"><small>(source)</small></a>
      </ul>
     </details>
    <li> The overlay may also include other areas within the border-box of an element;
      in this case, those areas belong to the innermost such element that contains the area. 
    <li> For an <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#inline-level-box" id="ref-for-inline-level-box">inline-level box</a>, the overlay may extend outside its border edges
      in the <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#block-axis" id="ref-for-block-axis">block axis</a> as far as the edges of its <a data-link-type="dfn" href="https://drafts.csswg.org/css-inline-3/#line-box" id="ref-for-line-box①">line box</a>. 
   </ul>
   <p class="issue" id="issue-13b80e20"><a class="self-link" href="#issue-13b80e20"></a> See <a href="http://lists.w3.org/Archives/Public/www-style/2008Nov/0022.html">F2F minutes</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2008Oct/0268.html">dbaron’s message</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2010May/0247.html">Daniel’s thread</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2010May/0261.html">Gecko notes</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2010May/0366.html">Opera notes</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2010May/0280.html">Webkit notes</a></p>
   <p class="issue" id="issue-271a1b90"><a class="self-link" href="#issue-271a1b90"></a> Not sure if this is the correct way of describing the way things work.</p>
   <h3 class="heading settled" data-level="3.5" id="highlight-cascade"><span class="secno">3.5. </span><span class="content"> Cascading and Per-Element Highlight Styles</span><a class="self-link" href="#highlight-cascade"></a></h3>
   <p>Each element draws its own active portions of the <a data-link-type="dfn" href="#highlight-overlay" id="ref-for-highlight-overlay①">highlight overlays</a>,
  which receives the styles specified by
  the corresponding <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element⑤">highlight pseudo-element</a> styles
  for which that element is the <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element⑦">originating element</a>.
  When multiple styles conflict,
  the winning style is determined by the cascade.
  When any supported property is not given a value by the cascade,
  it’s value is determined by inheritance from
  the corresponding <span id="ref-for-highlight-pseudo-element⑥">highlight pseudo-element</span> of its <span id="ref-for-originating-element⑧">originating element</span>’s parent element
  (regardless of whether that property is an <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#inherited-property" id="ref-for-inherited-property①">inherited property</a>).</p>
   <details class="wpt-tests-block" dir="ltr" lang="en">
    <summary>Tests</summary>
    <ul class="wpt-tests-list">
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-051.html" title="css/css-pseudo/active-selection-051.html">active-selection-051.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-051.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-051.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-052.html" title="css/css-pseudo/active-selection-052.html">active-selection-052.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-052.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-052.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-053.html" title="css/css-pseudo/active-selection-053.html">active-selection-053.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-053.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-053.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-054.html" title="css/css-pseudo/active-selection-054.html">active-selection-054.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-054.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-054.html"><small>(source)</small></a>
    </ul>
   </details>
   <div class="example" id="example-c35bf49a">
    <a class="self-link" href="#example-c35bf49a"></a> For example, if the following rules were applied: 
<pre class="lang-css highlight"><c- k>p</c-><c- p>:</c->:selection      <c- p>{</c-> <c- k>color</c-><c- p>:</c-> yellow<c- p>;</c-> <c- k>background</c-><c- p>:</c-> green<c- p>;</c-> <c- p>}</c->
p > em::selection <c- p>{</c-> <c- k>color</c-><c- p>:</c-> orange<c- p>;</c-> <c- p>}</c->
em::selection     <c- p>{</c-> <c- k>color</c-><c- p>:</c->    red<c- p>;</c-> <c- p>}</c->
</pre>
    <p>to the following markup:</p>
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>p</c-><c- p>></c->Highlight this <c- p>&lt;</c-><c- f>em</c-><c- p>></c->and this<c- p>&lt;/</c-><c- f>em</c-><c- p>></c->.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
</pre>
    <p>The selection highlight would be green throughout,
    with yellow text outside the <code class="highlight">&lt;em></code> element
    and orange text inside it.</p>
   </div>
   <details class="wpt-tests-block" dir="ltr" lang="en">
    <summary>Tests</summary>
    <ul class="wpt-tests-list"></ul>
   </details>
   <p class="advisement"> Authors wanting multiple selections styles should use <strong><span class="css">:root::selection</span></strong> for their document-wide selection style,
  since this will allow clean overriding in descendants. <a class="css" data-link-type="maybe" href="#selectordef-selection" id="ref-for-selectordef-selection②">::selection</a> alone applies to every element in the tree,
  overriding the more specific styles of any ancestors. </p>
   <div class="example" id="example-97480f68">
    <a class="self-link" href="#example-97480f68"></a> For example, if an author specified 
<pre class="lang-css highlight">::selection          <c- p>{</c-> <c- k>background</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
p.warning::selection <c- p>{</c-> <c- k>background</c-><c- p>:</c->  red<c- p>;</c-> <c- p>}</c->
</pre>
    <p>and the document included</p>
<pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>p</c-> <c- e>class</c-><c- o>=</c-><c- s>"warning"</c-><c- p>></c->Some <c- p>&lt;</c-><c- f>strong</c-><c- p>></c->very important information<c- p>&lt;/</c-><c- f>strong</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
</pre>
    <p>The highlight would be blue over “very important information”
    because the <code class="highlight">&lt;strong></code> element´s <a class="css" data-link-type="maybe" href="#selectordef-selection" id="ref-for-selectordef-selection③">::selection</a> also matches the <span class="css">::selection { background: blue; }</span> rule.
    (Remember that <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-3/#x" id="ref-for-x">*</a> is implied when a tag selector is missing.)
    The style rules that would give the intended behavior
    (red highlight within <code class="highlight">p.warning</code>, blue elsewhere) are</p>
<pre class="lang-css highlight">:root::selection     <c- p>{</c-> <c- k>background</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
p.warning::selection <c- p>{</c-> <c- k>background</c-><c- p>:</c->  red<c- p>;</c-> <c- p>}</c->
</pre>
   </div>
   <details class="wpt-tests-block" dir="ltr" lang="en">
    <summary>Tests</summary>
    <ul class="wpt-tests-list"></ul>
   </details>
   <p>The UA must use its own highlight colors for <a class="css" data-link-type="maybe" href="#selectordef-selection" id="ref-for-selectordef-selection④">::selection</a> only
  when neither <a class="property css" data-link-type="property">color</a> nor <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-color" id="ref-for-propdef-background-color②">background-color</a> has been specified by the author.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This paired-cascading behavior
  does not allow using the normal cascade
  (i.g. <span class="css">:root::selection</span> rules in the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#cascade-origin-ua" id="ref-for-cascade-origin-ua">UA style sheet</a>)
  to represent the OS default selection colors.
  However it has been interoperably implemented in browsers
  and is thus probably a Web-compatibility requirement.</p>
   <h3 class="heading settled" data-level="3.6" id="highlight-painting"><span class="secno">3.6. </span><span class="content"> Painting the Highlight</span><a class="self-link" href="#highlight-painting"></a></h3>
   <details class="wpt-tests-block" dir="ltr" lang="en">
    <summary>Tests</summary>
    <ul class="wpt-tests-list">
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-014.html" title="css/css-pseudo/active-selection-014.html">active-selection-014.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-014.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-014.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-041.html" title="css/css-pseudo/active-selection-041.html">active-selection-041.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-041.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-041.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/active-selection-045.html" title="css/css-pseudo/active-selection-045.html">active-selection-045.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/active-selection-045.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/active-selection-045.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/highlight-painting-001.html" title="css/css-pseudo/highlight-painting-001.html">highlight-painting-001.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/highlight-painting-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/highlight-painting-001.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/highlight-painting-002.html" title="css/css-pseudo/highlight-painting-002.html">highlight-painting-002.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/highlight-painting-002.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/highlight-painting-002.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/highlight-painting-003.html" title="css/css-pseudo/highlight-painting-003.html">highlight-painting-003.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/highlight-painting-003.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/highlight-painting-003.html"><small>(source)</small></a>
    </ul>
   </details>
   <h4 class="heading settled" data-level="3.6.1" id="highlight-backgrounds"><span class="secno">3.6.1. </span><span class="content"> Backgrounds</span><a class="self-link" href="#highlight-backgrounds"></a></h4>
   <p>Each <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element⑦">highlight pseudo-element</a> draws its background
  over the corresponding portion of the <a data-link-type="dfn" href="#highlight-overlay" id="ref-for-highlight-overlay②">highlight overlay</a>,
  painting it
  immediately below any positioned descendants
  (i.e. just before step 8 in <a href="https://www.w3.org/TR/CSS22/zindex.html#painting-order">CSS2.2§E.2</a>).
  The <a class="css" data-link-type="maybe" href="#selectordef-selection" id="ref-for-selectordef-selection⑤">::selection</a> overlay is drawn
  over the <a class="css" data-link-type="maybe" href="#selectordef-target-text" id="ref-for-selectordef-target-text③">::target-text</a> overlay which is drawn
  over the <a class="css" data-link-type="maybe" href="#selectordef-spelling-error" id="ref-for-selectordef-spelling-error②">::spelling-error</a> overlay
  which is drawn over the <a class="css" data-link-type="maybe" href="#selectordef-grammar-error" id="ref-for-selectordef-grammar-error②">::grammar-error</a> overlay.</p>
   <details class="wpt-tests-block" dir="ltr" lang="en">
    <summary>Tests</summary>
    <ul class="wpt-tests-list">
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/selection-overlay-and-grammar-001.html" title="css/css-pseudo/selection-overlay-and-grammar-001.html">selection-overlay-and-grammar-001.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/selection-overlay-and-grammar-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/selection-overlay-and-grammar-001.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/selection-overlay-and-spelling-001.html" title="css/css-pseudo/selection-overlay-and-spelling-001.html">selection-overlay-and-spelling-001.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/selection-overlay-and-spelling-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/selection-overlay-and-spelling-001.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/highlight-z-index-001.html" title="css/css-pseudo/highlight-z-index-001.html">highlight-z-index-001.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/highlight-z-index-001.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/highlight-z-index-001.html"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/highlight-z-index-002.html" title="css/css-pseudo/highlight-z-index-002.html">highlight-z-index-002.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/highlight-z-index-002.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/highlight-z-index-002.html"><small>(source)</small></a>
    </ul>
   </details>
   <h4 class="heading settled" data-level="3.6.2" id="highlight-shadows"><span class="secno">3.6.2. </span><span class="content"> Shadows</span><a class="self-link" href="#highlight-shadows"></a></h4>
   <p>Any <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-text-decor-4/#propdef-text-shadow" id="ref-for-propdef-text-shadow①">text-shadow</a> applying to a <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element⑧">highlight pseudo-element</a> is drawn over its corresponding <a data-link-type="dfn" href="#highlight-overlay" id="ref-for-highlight-overlay③">highlight overlay</a> background.
  Such text shadows also stack over each other
  (and over any original <span class="property" id="ref-for-propdef-text-shadow②">text-shadow</span> applied to the text and its decorations,
  which continues to apply).</p>
   <p class="note" role="note"><span class="marker">Note:</span> Since each <a data-link-type="dfn" href="#highlight-overlay" id="ref-for-highlight-overlay④">highlight overlay</a> background
  is drawn over any shadows belonging to the layer(s) below,
  a <span id="ref-for-highlight-overlay⑤">highlight overlay</span> background can obscure lower-level shadows.</p>
   <h4 class="heading settled" data-level="3.6.3" id="highlight-text"><span class="secno">3.6.3. </span><span class="content"> Text and Text Decorations</span><a class="self-link" href="#highlight-text"></a></h4>
   <p>A <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element⑨">highlight pseudo-element</a> suppresses the normal drawing of any associated text
  (and the text decorations that had been applied to that text).
  Instead the topmost active <a data-link-type="dfn" href="#highlight-overlay" id="ref-for-highlight-overlay⑥">highlight overlay</a> redraws that text
  (and those decorations)
  over the <span id="ref-for-highlight-overlay⑦">highlight overlay</span> backgrounds
  using the highlight’s own <a class="property css" data-link-type="property">color</a>.</p>
   <p>For this purpose, <span class="css">currentColor</span> on a <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element①⓪">highlight pseudo-element</a>’s <a class="property css" data-link-type="property">color</a> property represents
  the <span class="property">color</span> of the next <span id="ref-for-highlight-pseudo-element①①">highlight pseudo-element</span> layer below,
  falling back finally to the colors that would otherwise have been used
  (those applied by the <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element⑨">originating element</a> or
  an intervening <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-element" id="ref-for-pseudo-element①">pseudo-element</a> such as <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①⑤">::first-line</a> or <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter①⑨">::first-letter</a>).</p>
   <p>Any text decorations introduced by each <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element①②">highlight pseudo-element</a> are stacked in the same order as their backgrounds
  over the text’s original decorations
  and are all drawn, each decoration in its own color.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The element’s own text decorations
  (both <a href="https://www.w3.org/TR/css-text-decor/#line-decoration">line decorations</a> and <a href="https://www.w3.org/TR/css-text-decor/#emphasis-marks">emphasis marks</a>)
  are thus drawn in the pseudo-element’s own <a class="property css" data-link-type="property">color</a> when that is not <span class="css">currentColor</span>,
  regardless of their original color or fill specifications.</p>
   <h4 class="heading settled" data-level="3.6.4" id="highlight-replaced"><span class="secno">3.6.4. </span><span class="content"> Replaced Elements</span><a class="self-link" href="#highlight-replaced"></a></h4>
   <p>For non-replaced content, the UA must honor the <a class="property css" data-link-type="property">color</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-color" id="ref-for-propdef-background-color③">background-color</a> (including their alpha channels) as specified.
  However, for replaced content, the UA should create a semi-transparent wash
  to coat the content so that it can show through the selection.
  This wash should be of the specified <span class="property" id="ref-for-propdef-background-color④">background-color</span> if that is not <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-4/#valdef-color-transparent" id="ref-for-valdef-color-transparent">transparent</a>,
  else of the specified <span class="property">color</span>;
  however the UA may adjust the alpha channel.</p>
   <details class="wpt-tests-block" dir="ltr" lang="en">
    <summary>Tests</summary>
    <ul class="wpt-tests-list">
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/css/css-pseudo/selection-paint-image.html" title="css/css-pseudo/selection-paint-image.html">selection-paint-image.html</a> <a class="wpt-live" href="http://wpt.live/css/css-pseudo/selection-paint-image.html"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/css/css-pseudo/selection-paint-image.html"><small>(source)</small></a>
    </ul>
   </details>
   <h3 class="heading settled" data-level="3.7" id="highlight-security"><span class="secno">3.7. </span><span class="content"> Security and Privacy Considerations</span><a class="self-link" href="#highlight-security"></a></h3>
   <p>Because the styling of spelling and grammar errors
  can leak information about the contents of a user’s dictionary
  (which can include the user’s name and even includes the contents of his/her address book!)
  UAs that implement <a class="css" data-link-type="maybe" href="#selectordef-spelling-error" id="ref-for-selectordef-spelling-error③">::spelling-error</a> and <a class="css" data-link-type="maybe" href="#selectordef-grammar-error" id="ref-for-selectordef-grammar-error③">::grammar-error</a> must prevent pages from being able to read
  the styling of such highlighted segments.</p>
   <h2 class="heading settled" data-level="4" id="treelike"><span class="secno">4. </span><span class="content"> Tree-Abiding Pseudo-elements</span><a class="self-link" href="#treelike"></a></h2>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="tree-abiding|tree-abiding pseudo-element" id="tree-abiding">Tree-abiding pseudo-elements</dfn> always fit within the box tree.
  They <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#css-inheritance" id="ref-for-css-inheritance③">inherit</a> any inheritable properties from their <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①⓪">originating element</a>;
  non-inheritable properties take their <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#initial-value" id="ref-for-initial-value">initial values</a> as usual. <a data-link-type="biblio" href="#biblio-css-cascade-4" title="CSS Cascading and Inheritance Level 4">[CSS-CASCADE-4]</a></p>
   <h3 class="heading settled" data-level="4.1" id="generated-content"><span class="secno">4.1. </span><span class="content"> Generated Content Pseudo-elements: <a class="css" data-link-type="maybe" href="#selectordef-before" id="ref-for-selectordef-before①">::before</a> and <a class="css" data-link-type="maybe" href="#selectordef-after" id="ref-for-selectordef-after①">::after</a></span><a class="self-link" href="#generated-content"></a></h3>
   <p>When their computed <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-content-3/#propdef-content" id="ref-for-propdef-content">content</a> value is not <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-content-3/#valdef-content-none" id="ref-for-valdef-content-none">none</a>,
  these pseudo-elements generate boxes
  as if they were immediate children of their <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①①">originating element</a>,
  with content as specified by <span class="property" id="ref-for-propdef-content①">content</span>.</p>
   <dl>
    <dt><dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-before">::before</dfn> 
    <dd>Represents a styleable child pseudo-element
    immediately before the <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①②">originating element</a>’s actual content. 
    <dt><dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-after">::after</dfn> 
    <dd>Represents a styleable child pseudo-element
    immediately after the <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①③">originating element</a>’s actual content. 
   </dl>
   <p>These pseudo-elements can be styled
  exactly like any normal document-sourced element in the document tree;
  all properties that apply to a normal element
  likewise apply to <a class="css" data-link-type="maybe" href="#selectordef-before" id="ref-for-selectordef-before②">::before</a> and <a class="css" data-link-type="maybe" href="#selectordef-after" id="ref-for-selectordef-after②">::after</a>.</p>
   <div class="example" id="example-1db24d2c">
    <a class="self-link" href="#example-1db24d2c"></a> For example, the following rule inserts the string “Note: ”
    before the content of every <code class="highlight">&lt;p></code> element
    whose <code class="highlight">class</code> attribute has the value <code class="highlight">note</code>: 
<pre class="lang-css highlight">p.note::before <c- p>{</c-> <c- k>content</c-><c- p>:</c-> <c- s>"Note: "</c-> <c- p>}</c-></pre>
    <p>Since the initial value of <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-display-4/#propdef-display" id="ref-for-propdef-display">display</a> is <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-4/#valdef-display-inline" id="ref-for-valdef-display-inline">inline</a>,
    this will generate an inline box.
    Like other inline children of <code class="highlight">&lt;p></code>,
    it will participate in <code class="highlight">&lt;p></code>’s inline formatting context,
    potentially sharing a line with other content.</p>
   </div>
   <p>As with the content of regular elements,
  the generated content of <a class="css" data-link-type="maybe" href="#selectordef-before" id="ref-for-selectordef-before③">::before</a> and <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css2/#selectordef-after" id="ref-for-selectordef-after③">:after</a> pseudo-elements
  can form part of any <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①⑥">::first-line</a> and <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter②⓪">::first-letter</a> pseudo-elements
  applied to its <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①④">originating element</a>.</p>
   <h3 class="heading settled" data-level="4.2" id="marker-pseudo"><span class="secno">4.2. </span><span class="content"> List Markers: the <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker">::marker</a> pseudo-element</span><a class="self-link" href="#marker-pseudo"></a></h3>
   <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-marker">::marker</dfn> pseudo-element represents
  the automatically generated <a data-link-type="dfn" href="https://drafts.csswg.org/css-lists-3/#marker" id="ref-for-marker②">marker box</a> of a <a data-link-type="dfn" href="https://drafts.csswg.org/css-lists-3/#list-item" id="ref-for-list-item①">list item</a>.
  (See <a data-link-type="biblio" href="#biblio-css-display-3" title="CSS Display Module Level 3">[CSS-DISPLAY-3]</a> and <a data-link-type="biblio" href="#biblio-css-lists-3" title="CSS Lists and Counters Module Level 3">[CSS-LISTS-3]</a>.)</p>
   <p>The contents of a <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker①">::marker</a> are ignored (not selected) by <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter②①">::first-letter</a>.</p>
   <p class="issue" id="issue-c80e7017"><a class="self-link" href="#issue-c80e7017"></a> Interaction of <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker②">::marker</a> and <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①⑦">::first-line</a> is currently under discussion in <a href="https://github.com/w3c/csswg-drafts/issues/4506">Issue 4506</a>.</p>
   <p>Only a limited set of properties can be used on the <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker③">::marker</a> pseudo-element.
  This list is defined in <a href="https://drafts.csswg.org/css-lists-3/#marker-properties"><cite>CSS Lists 3</cite> § 3.1.1 Properties Applying to ::marker</a>.</p>
   <p>The <span class="css">::before::marker</span> or <span class="css">::after::marker</span> selectors
  are valid and
  can be used to represent the <a data-link-type="dfn" href="https://drafts.csswg.org/css-lists-3/#marker" id="ref-for-marker③">marker boxes</a> of <a class="css" data-link-type="maybe" href="#selectordef-before" id="ref-for-selectordef-before④">::before</a> or <a class="css" data-link-type="maybe" href="#selectordef-after" id="ref-for-selectordef-after④">::after</a> pseudo-elements that happen to be <a data-link-type="dfn" href="https://drafts.csswg.org/css-lists-3/#list-item" id="ref-for-list-item②">list items</a>.
  However <span class="css">::marker::marker</span> is invalid,
  and the computed value of <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-display-4/#propdef-display" id="ref-for-propdef-display①">display</a> on <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker④">::marker</a> loses its <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-4/#valdef-display-list-item" id="ref-for-valdef-display-list-item">list-item</a> aspect.</p>
   <h3 class="heading settled" data-level="4.3" id="placeholder-pseudo"><span class="secno">4.3. </span><span class="content"> Placeholder Input: the <a class="css" data-link-type="maybe" href="#selectordef-placeholder" id="ref-for-selectordef-placeholder">::placeholder</a> pseudo-element</span><a class="self-link" href="#placeholder-pseudo"></a></h3>
   <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-placeholder">::placeholder</dfn> pseudo-element represents
  placeholder text in an input field:
  text that represents the input
  and provides a hint to the user on how to fill out the form.
  For example, a date-input field
  might have the placeholder text “YYYY/MM/DD”
  to clarify that numeric dates are to be entered in year-month-day order.</p>
   <p class="note" role="note"><span class="marker">Note:</span> There also exists a <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-4/#placeholder-shown-pseudo" id="ref-for-placeholder-shown-pseudo">:placeholder-shown</a> pseudo-<em>class</em>,
  which applies to (real) elements while they are showing placeholder text,
  and can be used to style such elements specially. <a class="css" data-link-type="maybe" href="#selectordef-placeholder" id="ref-for-selectordef-placeholder①">::placeholder</a> specifically selects
  a pseudo-element representing the placeholder <em>text</em>,
  and is thus relatively limited in its abilities.</p>
   <p>All properties that apply to the <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①⑧">::first-line</a> pseudo-element
  also apply to the <a class="css" data-link-type="maybe" href="#selectordef-placeholder" id="ref-for-selectordef-placeholder②">::placeholder</a> pseudo-element.</p>
   <p>In interactive media, placeholder text is often hidden once the user has entered input;
  however this is not a requirement, and both the input value and the placeholder text may be visible simultaneously.
  The exact behavior is UA-defined.
  Note that in static media (such as print)
  placeholder text will be present even after the user has entered input.</p>
   <p class="issue" id="issue-1631f2fa"><a class="self-link" href="#issue-1631f2fa"></a> Authors seem to want <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-text-3/#propdef-text-align" id="ref-for-propdef-text-align">text-align</a> on the list of supported properties.
  See e.g. <a href="http://css-tricks.com/almanac/selectors/p/placeholder/">comments here</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> It’s been requested that <a class="css" data-link-type="maybe" href="#selectordef-placeholder" id="ref-for-selectordef-placeholder③">::placeholder</a> also refer to
  a placeholder which has a corresponding element in the element tree.
  It’s not clear how this should work, but it may be worth doing.
  See <a href="https://github.com/w3c/csswg-drafts/issues/2517">Issue 2417</a>.</p>
   <h3 class="heading settled" data-level="4.4" id="file-selector-button-pseudo"><span class="secno">4.4. </span><span class="content"> File Selector Button: the <a class="css" data-link-type="maybe" href="#selectordef-file-selector-button" id="ref-for-selectordef-file-selector-button">::file-selector-button</a> pseudo-element</span><a class="self-link" href="#file-selector-button-pseudo"></a></h3>
   <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-file-selector-button">::file-selector-button</dfn> pseudo-element targets the <span class="css">&lt;button></span> inside an <span class="css">&lt;input></span> element with <code class="highlight">type=file</code>, if the UA
  renders such a button.</p>
   <p>There is no restriction on which properties apply to the <a class="css" data-link-type="maybe" href="#selectordef-file-selector-button" id="ref-for-selectordef-file-selector-button①">::file-selector-button</a> pseudo-element.</p>
   <div class="example" id="file-selector-button-example">
    <a class="self-link" href="#file-selector-button-example"></a> For example, the following example should show a green border around the
    file selector button: 
<pre class="lang-css highlight">::file-selector-button <c- p>{</c-> <c- k>border</c-><c- p>:</c-> <c- m>3</c-><c- k>px</c-> solid green <c- p>}</c-></pre>
   </div>
   <h2 class="heading settled" data-level="5" id="interactions"><span class="secno">5. </span><span class="content"> Overlapping Pseudo-element Interactions</span><a class="self-link" href="#interactions"></a></h2>
   <div class="example" id="overlapping-example">
    <a class="self-link" href="#overlapping-example"></a> Recall that 
    <ul>
     <li> the contents of <a class="css" data-link-type="maybe" href="#selectordef-before" id="ref-for-selectordef-before⑤">::before</a> and <a class="css" data-link-type="maybe" href="#selectordef-after" id="ref-for-selectordef-after⑤">::after</a> are selected
        exactly as if they were normal elements in the document source tree 
     <li> the <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter②②">::first-letter</a> boundaries are tightly wrapped around the first letter text,
        and <span class="css" id="ref-for-selectordef-first-letter②③">::first-letter</span> is constrained to exist solely on the first formatted line. 
     <li> the <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line①⑨">::first-line</a> start is inserted just inside the containing block’s element boundary,
        and its end after the close of all content on the line 
    </ul>
    <p>The following CSS and HTML example
    illustrates how overlapping pseudo-elements interact:</p>
<pre class="lang-html highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- f>p</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> <c- kc>red</c-><c- p>;</c-> <c- k>font-size</c-><c- p>:</c-> <c- mi>12</c-><c- b>pt</c-> <c- p>}</c->
<c- f>p</c-><c- p>::</c-><c- nd>first-letter</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> <c- kc>green</c-><c- p>;</c-> <c- k>font-size</c-><c- p>:</c-> <c- mi>200</c-><c- b>%</c-> <c- p>}</c->
<c- f>p</c-><c- p>::</c-><c- nd>first-line</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> <c- kc>blue</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>p</c-><c- p>></c->Some text that ends up on two lines<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
</pre>
    <p>The first letter of each P element will be green with a font size of ’24pt'.
    The rest of the first formatted line will be blue
    while the rest of the paragraph will be red.</p>
    <p>Assuming that a line break will occur before the word "ends",
    the <a data-link-type="dfn" href="#fictional-tag-sequence" id="ref-for-fictional-tag-sequence④">fictional tag sequence</a> for this fragment might be:</p>
<pre class="lang-html highlight"><c- p>&lt;</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p::first-line</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>p::first-letter</c-><c- p>></c->
      S
    <c- p>&lt;/</c-><c- f>p::first-letter</c-><c- p>></c->
    ome text that
  <c- p>&lt;/</c-><c- f>p::first-line</c-><c- p>></c->
  ends up on two lines
<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
</pre>
   </div>
   <h2 class="heading settled" data-level="6" id="cssom"><span class="secno">6. </span><span class="content"> Additions to the CSS Object Model</span><a class="self-link" href="#cssom"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="CSSPseudoElement-interface"><span class="secno">6.1. </span><span class="content"> <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement">CSSPseudoElement</a></code> Interface</span><a class="self-link" href="#CSSPseudoElement-interface"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement①">CSSPseudoElement</a></code> interface
  allows pseudo-elements to be event targets.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="csspseudoelement"><code class="highlight"><c- g>CSSPseudoElement</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#dom-csspseudoelement-type" id="ref-for-dom-csspseudoelement-type"><c- g>type</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-csspseudoelement-element" id="ref-for-dom-csspseudoelement-element"><c- g>element</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="CSSPseudoElement" data-dfn-type="attribute" data-export id="dom-csspseudoelement-type"><code class="highlight">type</code></dfn> attribute
  is a string representing the type of the pseudo-element.
  This can be one of the following values:</p>
   <dl>
    <dt><code class="highlight"><c- s>"::before"</c-></code> 
    <dd>Represents the <a class="css" data-link-type="maybe" href="#selectordef-before" id="ref-for-selectordef-before⑥">::before</a> pseudo-element. 
    <dt><code class="highlight"><c- s>"::after"</c-></code> 
    <dd>Represents the <a class="css" data-link-type="maybe" href="#selectordef-after" id="ref-for-selectordef-after⑥">::after</a> pseudo-element. 
    <dt><code class="highlight"><c- s>"::marker"</c-></code> 
    <dd>Represents the <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker⑤">::marker</a> pseudo-element. 
   </dl>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="CSSPseudoElement" data-dfn-type="attribute" data-export id="dom-csspseudoelement-element"><code class="highlight">element</code></dfn> attribute is the <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①⑤">originating element</a> of the pseudo-element.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This interface may be extended in the future
  to other pseudo-element types
  and/or to allow setting style information
  through a <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-1/#cssstyledeclaration" id="ref-for-cssstyledeclaration">CSSStyleDeclaration</a></code> <code class="highlight">style</code> attribute.
  The current functionality is limited
  to that which is needed to support <a data-link-type="biblio" href="#biblio-web-animations-1" title="Web Animations">[web-animations-1]</a>.</p>
   <h3 class="heading settled" data-level="6.2" id="window-interface"><span class="secno">6.2. </span><span class="content"> <code class="idl"><a data-link-type="idl" href="#dom-element-pseudo" id="ref-for-dom-element-pseudo">pseudo()</a></code> method of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code> interface</span><a class="self-link" href="#window-interface"></a></h3>
   <p>A new method is added to the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code> interface to retrieve
  pseudo-elements created by a given element for a given type:</p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③"><c- g>Element</c-></a> {
  <a data-link-type="idl-name" href="#csspseudoelement" id="ref-for-csspseudoelement②"><c- n>CSSPseudoElement</c-></a>? <a class="idl-code" data-link-type="method" href="#dom-element-pseudo" id="ref-for-dom-element-pseudo①"><c- g>pseudo</c-></a>(<a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring①"><c- n>CSSOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element/pseudo(type)" data-dfn-type="argument" data-export id="dom-element-pseudo-type-type"><code class="highlight"><c- g>type</c-></code></dfn>);
};
</pre>
   <div class="algorithm" data-algorithm="pseudo(CSSOMString type)" data-algorithm-for="Element">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export data-lt="pseudo(type)" id="dom-element-pseudo" title="pseudo(type)"><code class="highlight"><c- nf>pseudo</c-><c- p>(</c->CSSOMString type<c- p>)</c-></code></dfn> method
    is used to retrieve the <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement③">CSSPseudoElement</a></code> instance
    of the type matching <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-element-pseudo-type-type" id="ref-for-dom-element-pseudo-type-type">type</a></code> associated with the element.
    When it is called,
    execute the following steps: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://drafts.csswg.org/css-syntax-3/#css-parse-something-according-to-a-css-grammar" id="ref-for-css-parse-something-according-to-a-css-grammar">Parse</a> the <code class="idl"><a class="idl-code" data-link-type="argument" href="#dom-element-pseudo-type-type" id="ref-for-dom-element-pseudo-type-type①">type</a></code> argument as a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/selectors-4/#typedef-pseudo-element-selector" id="ref-for-typedef-pseudo-element-selector">&lt;pseudo-element-selector></a>,
and let <var>type</var> be the result.</p>
     <li data-md>
      <p>If <var>type</var> is failure,
return null.</p>
     <li data-md>
      <p>Otherwise, return the <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement④">CSSPseudoElement</a></code> object
representing the pseudo-element
that would match the selector <var>type</var> with <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a> as its <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①⑥">originating element</a>.</p>
    </ol>
   </div>
   <p>Return values that represent the same <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-element" id="ref-for-pseudo-element②">pseudo-element</a> on the same <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#originating-element" id="ref-for-originating-element①⑦">originating element</a> must be, insofar as observable,
  always the same <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement⑤">CSSPseudoElement</a></code> object.
  (The UA may drop or regenerate the object for convenience or performance
  if this is not observable.)</p>
   <p class="issue" id="issue-302461e7"><a class="self-link" href="#issue-302461e7"></a> The identity, lifetime, and nullness of the return value
  (and potential error cases)
  of the <code class="idl"><a data-link-type="idl" href="#dom-element-pseudo" id="ref-for-dom-element-pseudo②">pseudo()</a></code> method is still under discussion.
  See <a href="https://github.com/w3c/csswg-drafts/issues/3607">Issue 3607</a> and <a href="https://github.com/w3c/csswg-drafts/issues/3603">Issue 3603</a>.</p>
   <h2 class="heading settled" data-level="7" id="css2-compat"><span class="secno">7. </span><span class="content"> Compatibility Syntax</span><a class="self-link" href="#css2-compat"></a></h2>
   <p>For compatibility with existing style sheets written against CSS Level 2 <a data-link-type="biblio" href="#biblio-css2" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>,
  user agents must also accept the previous one-colon notation
  (<code class="highlight">:before</code>, <code class="highlight">:after</code>, <code class="highlight">:first-letter</code>, <code class="highlight">:first-line</code>)
  for the <a class="css" data-link-type="maybe" href="#selectordef-before" id="ref-for-selectordef-before⑦">::before</a>, <a class="css" data-link-type="maybe" href="#selectordef-after" id="ref-for-selectordef-after⑦">::after</a>, <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter②④">::first-letter</a>, and <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line②⓪">::first-line</a> pseudo-elements. </p>
   <h2 class="no-num heading settled" id="changes"><span class="content"> Changes</span><a class="self-link" href="#changes"></a></h2>
   <p>Significant changes since the <a href="https://www.w3.org/TR/2019/WD-css-pseudo-4-20190225/">25 February 2019 Working Draft</a> include:</p>
   <ul>
    <li>Added <a class="css" data-link-type="maybe" href="#selectordef-target-text" id="ref-for-selectordef-target-text④">::target-text</a> pseudo-element.
    (<a href="https://github.com/w3c/csswg-drafts/issues/5522">Issue 5522</a>) 
    <li>Removed <span class="css">::inactive-selection</span>.
    (<a href="https://github.com/w3c/csswg-drafts/issues/4579">Issue 4579</a>) 
    <li>Added <span class="css">::file-selectors-button</span> pseudo-element.
    (<a href="https://github.com/w3c/csswg-drafts/issues/5049">Issue 5049</a>) 
    <li>Adjusted rules for inheritance of properties from <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line②①">::first-line</a> to handle inheritable vs non-inheritable properties differently,
    specifically excluded applicability of properties that control <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#writing-mode" id="ref-for-writing-mode">writing mode</a> because they affect the cascade,
    and defined interaction with custom properties.
    (<a href="https://github.com/w3c/csswg-drafts/issues/1097">Issue 1097</a>) 
    <li>Added <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-ruby-1/#propdef-ruby-position" id="ref-for-propdef-ruby-position①">ruby-position</a> to properties allowed on <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line②②">::first-line</a>,
    analogous with <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-text-decor-4/#propdef-text-emphasis-position" id="ref-for-propdef-text-emphasis-position">text-emphasis-position</a>.
    (<a href="https://github.com/w3c/csswg-drafts/issues/2998">Issue 2998</a>) 
    <li>Included spaces between the first letter and its surrounding punctuation in <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter②⑤">::first-letter</a>.
    (<a href="https://github.com/w3c/csswg-drafts/issues/5154">Issue 5154</a>) 
    <li>Defined interaction of <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker⑥">::marker</a> and <a class="css" data-link-type="maybe" href="#selectordef-first-letter" id="ref-for-selectordef-first-letter②⑥">::first-letter</a>. 
    <li>Made <span class="css">::before::marker</span> and <span class="css">::after::marker</span> valid.
    (<a href="https://github.com/w3c/csswg-drafts/issues/1793">Issue 1793</a>) 
    <li>Moved the <a href="https://www.w3.org/TR/css-lists-3/#marker-properties">list of properties</a> applying to <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker⑦">::marker</a> to <a data-link-type="biblio" href="#biblio-css-lists-3" title="CSS Lists and Counters Module Level 3">[CSS-LISTS-3]</a> (also adding <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-content-3/#propdef-content" id="ref-for-propdef-content②">content</a>, <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-unicode-bidi" id="ref-for-propdef-unicode-bidi">unicode-bidi</a>, and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction①">direction</a>). 
    <li>Added <a class="css" data-link-type="maybe" href="#selectordef-marker" id="ref-for-selectordef-marker⑧">::marker</a> to types allowed for <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement⑥">CSSPseudoElement</a></code> interface.
    (<a href="https://github.com/w3c/csswg-drafts/issues/3763">Issue 3763</a>) 
    <li>Clarified return value of <code class="idl"><a data-link-type="idl" href="#dom-element-pseudo" id="ref-for-dom-element-pseudo③">pseudo()</a></code>.
    (Issues <a href="https://github.com/w3c/csswg-drafts/issues/3603">3603</a> and <a href="https://github.com/w3c/csswg-drafts/issues/3607">3607</a>) 
    <li>Allowed highlight overlay of inline-level boxes to extend to the line box edges.
    (Issues <a href="https://github.com/w3c/csswg-drafts/issues/5395">5395</a> and <a href="https://github.com/w3c/csswg-drafts/issues/4624">4624</a>) 
    <li>Clarified that <span class="css">currentColor</span> on a <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element①③">highlight pseudo-element</a> uses the color that would be used if the text were not “highlighted”,
    even if that color was provided by a pseudo-element like <a class="css" data-link-type="maybe" href="#selectordef-first-line" id="ref-for-selectordef-first-line②③">::first-line</a>.
    (<a href="https://github.com/w3c/csswg-drafts/issues/4625">Issue 4625</a>) 
    <li>Defined how <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-text-decor-4/#propdef-text-shadow" id="ref-for-propdef-text-shadow③">text-shadow</a> interacts with <a data-link-type="dfn" href="#highlight-pseudo-element" id="ref-for-highlight-pseudo-element①④">highlight pseudo-elements</a>.
    (<a href="https://github.com/w3c/csswg-drafts/issues/3932">Issue 3932</a>) 
    <li>Improved the <a href="#highlight-ua-styles">default UA style sheet</a> rules applying to highlight pseudo-elements. 
   </ul>
   <p>Changes since the <a href="https://www.w3.org/TR/2016/WD-css-pseudo-4-20160607/">7 June 2016 Working Draft</a> include:</p>
   <ul>
    <li>Specified <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-decor-4/#valdef-text-decoration-line-spelling-error" id="ref-for-valdef-text-decoration-line-spelling-error">spelling-error</a> and <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-decor-4/#valdef-text-decoration-line-grammar-error" id="ref-for-valdef-text-decoration-line-grammar-error">grammar-error</a> with <a class="css" data-link-type="maybe" href="#selectordef-spelling-error" id="ref-for-selectordef-spelling-error④">::spelling-error</a> and <a class="css" data-link-type="maybe" href="#selectordef-grammar-error" id="ref-for-selectordef-grammar-error④">::grammar-error</a> in the UA stylesheet. 
    <li>Redefined value propagation between parent/child highlight pseudo-elements to use inheritance rather than cascading. See discussion in and linked from <a href="https://github.com/w3c/csswg-drafts/issues/2474">Issue 2474</a>. 
    <li>Refined list of supported properties for highlight pseudo-elements, e.g. adding <a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-color" id="ref-for-propdef-stroke-color①">stroke-color</a>/<a class="property css" data-link-type="property" href="https://drafts.fxtf.org/fill-stroke-3/#propdef-fill-color" id="ref-for-propdef-fill-color①">fill-color</a>, removing <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-ui-4/#propdef-outline" id="ref-for-propdef-outline">outline</a>, etc. 
    <li>Clarified how text and text decoration colors are painted for highlight pseudo-elements. 
    <li>Added the <code class="idl"><a data-link-type="idl" href="#dom-csspseudoelement-element" id="ref-for-dom-csspseudoelement-element①">element</a></code> attribute to the <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement⑦">CSSPseudoElement</a></code> interface. 
    <li>Changed the values of the <code class="idl"><a data-link-type="idl" href="#dom-csspseudoelement-type" id="ref-for-dom-csspseudoelement-type①">type</a></code> attribute on the <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement⑧">CSSPseudoElement</a></code> interface to match the corresponding pseudo-elements. 
    <li>Reduced supported types of <code class="idl"><a data-link-type="idl" href="#csspseudoelement" id="ref-for-csspseudoelement⑨">CSSPseudoElement</a></code> and removed unimplemented <code class="highlight">style</code> attribute. 
    <li>Changed <code class="highlight">window.<c- nf>getPseudoElements</c-><c- p>(</c->elem<c- p>,</c->type<c- p>)</c-></code> to <code class="highlight">Element.<c- nf>pseudo</c-><c- p>(</c->type<c- p>)</c-></code>. 
    <li>Miscellaneous minor clarifications and fixes. 
   </ul>
   <h2 class="no-num heading settled" id="acknowledgements"><span class="content"> Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>The editors would like to specifically thank the following individuals for their
  contributions to this specification:
  Tab Atkins,
  David Baron,
  Oriol Brufau,
  Razvan Caliman,
  Chris Coyier,
  Anders Grimsrud,
  Vincent Hardy,
  François Remy.</p>
  </main>
  <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
  <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code class="highlight">class=<c- s>"example"</c-></code>,
    like this: </p>
  <div class="example" id="w3c-example">
   <a class="self-link" href="#w3c-example"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code class="highlight">class=<c- s>"note"</c-></code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code class="highlight">&lt;strong class=<c- s>"advisement"</c->></code>, like
    this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong></p>
  <details class="wpt-tests-block" dir="ltr" lang="en" open>
   <summary>Tests</summary>
   <p>Tests relating to the content of this specification
                     may be documented in “Tests” blocks like this one.
                     Any such block is non-normative.</p>
   <ul class="wpt-tests-list"></ul>
   <hr>
  </details>
  <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> Conformance classes</span><a class="self-link" href="#w3c-conformance-classes"></a></h3>
  <p>Conformance to this specification
    is defined for three conformance classes: </p>
  <dl>
   <dt>style sheet 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
            style sheet</a>. 
   <dt>renderer 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets the semantics of a style sheet and renders
            documents that use them. 
   <dt>authoring tool 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a style sheet. 
  </dl>
  <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module. </p>
  <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.) </p>
  <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module. </p>
  <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> Partial implementations</span><a class="self-link" href="#w3c-partial"></a></h3>
  <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong> treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>
  <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> Implementations of Unstable and Proprietary Features</span><a class="self-link" href="#w3c-conform-future-proofing"></a></h4>
  <p>To avoid clashes with future stable CSS features,
        the CSSWG recommends <a href="http://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the implementation of <a href="http://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a href="http://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
  <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> Non-experimental implementations</span><a class="self-link" href="#w3c-testing"></a></h3>
  <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec. </p>
  <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group. </p>
  <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing list.</p>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#selectordef-after">::after</a><span>, in § 4.1</span>
   <li><a href="#selectordef-before">::before</a><span>, in § 4.1</span>
   <li><a href="#csspseudoelement">CSSPseudoElement</a><span>, in § 6.1</span>
   <li><a href="#dom-csspseudoelement-element">element</a><span>, in § 6.1</span>
   <li><a href="#fictional-tag-sequence">fictional tag sequence</a><span>, in § 2.1.3</span>
   <li><a href="#selectordef-file-selector-button">::file-selector-button</a><span>, in § 4.4</span>
   <li><a href="#first-formatted-line">first formatted line</a><span>, in § 2.1.1</span>
   <li><a href="#selectordef-first-letter">::first-letter</a><span>, in § 2.2</span>
   <li><a href="#first-letter-text">first-letter text</a><span>, in § 2.2</span>
   <li><a href="#selectordef-first-line">::first-line</a><span>, in § 2.1</span>
   <li><a href="#selectordef-grammar-error">::grammar-error</a><span>, in § 3.1</span>
   <li><a href="#highlight-overlay">highlight overlay</a><span>, in § 3.4</span>
   <li><a href="#highlight-pseudo-element">highlight pseudo-element</a><span>, in § 3.1</span>
   <li><a href="#selectordef-marker">::marker</a><span>, in § 4.2</span>
   <li><a href="#selectordef-placeholder">::placeholder</a><span>, in § 4.3</span>
   <li><a href="#dom-element-pseudo">pseudo(type)</a><span>, in § 6.2</span>
   <li><a href="#selectordef-selection">::selection</a><span>, in § 3.1</span>
   <li><a href="#selectordef-spelling-error">::spelling-error</a><span>, in § 3.1</span>
   <li><a href="#selectordef-target-text">::target-text</a><span>, in § 3.1</span>
   <li><a href="#tree-abiding">tree-abiding</a><span>, in § 4</span>
   <li><a href="#tree-abiding">tree-abiding pseudo-element</a><span>, in § 4</span>
   <li><a href="#dom-csspseudoelement-type">type</a><span>, in § 6.1</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[AV1-ISOBMFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="1da081a0">marker</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-BACKGROUNDS-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="11fb4d5b">background-color</span>
     <li><span class="dfn-paneled" id="6916104d">box-shadow</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-BREAK-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c3bd6e1d">box fragment</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-CASCADE-5]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="20fff200">inheritance</span>
     <li><span class="dfn-paneled" id="2496f7a0">inherited property</span>
     <li><span class="dfn-paneled" id="9ea6bed2">initial value</span>
     <li><span class="dfn-paneled" id="64747b41">ua style sheet</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-COLOR-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="91bfbe18">opacity</span>
     <li><span class="dfn-paneled" id="313bb160">transparent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-CONTENT-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2467179e">content</span>
     <li><span class="dfn-paneled" id="991145b0">none</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-DISPLAY-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9f3d4f17">block container</span>
     <li><span class="dfn-paneled" id="ca960d4f">block formatting context</span>
     <li><span class="dfn-paneled" id="8379845e">block-level</span>
     <li><span class="dfn-paneled" id="e7f0dd6c">display</span>
     <li><span class="dfn-paneled" id="99cabd32">in-flow</span>
     <li><span class="dfn-paneled" id="c02f5d57">inline</span>
     <li><span class="dfn-paneled" id="083ffe5f">inline box</span>
     <li><span class="dfn-paneled" id="b8f126f1">inline formatting context</span>
     <li><span class="dfn-paneled" id="d7fa3e1c">inline-level</span>
     <li><span class="dfn-paneled" id="54d48ea2">inline-level box</span>
     <li><span class="dfn-paneled" id="e77a37fc">inline-level content</span>
     <li><span class="dfn-paneled" id="96626f55">list-item</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-INLINE-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="12cf38c9">initial-letter</span>
     <li><span class="dfn-paneled" id="e34548f4">line box</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-LISTS-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ac8c80fa">list item</span>
     <li><span class="dfn-paneled" id="16d57f47">list-style-position</span>
     <li><span class="dfn-paneled" id="61656631">marker box</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-MULTICOL-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="521eb6d4">multi-column container</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-RUBY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="dd21c139">ruby-position</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-SYNTAX-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="76c4403d">parse</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-TABLES-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="994d0e36">table wrapper box</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-TEXT-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="4356bfe3">text-align</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-TEXT-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="16b27b2a">typographic letter unit</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-TEXT-DECOR-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d3129b15">grammar-error</span>
     <li><span class="dfn-paneled" id="4462edae">spelling-error</span>
     <li><span class="dfn-paneled" id="5bc3d0ec">text-decoration</span>
     <li><span class="dfn-paneled" id="557f5d97">text-emphasis</span>
     <li><span class="dfn-paneled" id="19119b4f">text-emphasis-position</span>
     <li><span class="dfn-paneled" id="f338a9f0">text-shadow</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-UI-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="355da394">outline</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VARIABLES-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="198f1537">custom property</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-WRITING-MODES-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5bc8bd12">direction</span>
     <li><span class="dfn-paneled" id="982e17a3">unicode-bidi</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-WRITING-MODES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="e1ab41b7">block axis</span>
     <li><span class="dfn-paneled" id="3bd4bbe9">text-orientation</span>
     <li><span class="dfn-paneled" id="a73617e0">writing mode</span>
     <li><span class="dfn-paneled" id="385326d7">writing-mode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2161cf2b">pseudo-elements</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS22]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="689ef56c">:after</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSSOM-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5fced98b">CSSOMString</span>
     <li><span class="dfn-paneled" id="a82a20ef">CSSStyleDeclaration</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FILL-STROKE-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b04f4c83">fill-color</span>
     <li><span class="dfn-paneled" id="f2a0f55a">stroke-color</span>
     <li><span class="dfn-paneled" id="63544174">stroke-width</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SELECTORS-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53a193f1">*</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SELECTORS-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a20bf8d2">:placeholder-shown</span>
     <li><span class="dfn-paneled" id="efe16f32">:target</span>
     <li><span class="dfn-paneled" id="ad337600">&lt;pseudo-element-selector></span>
     <li><span class="dfn-paneled" id="82805a4e">originating element</span>
     <li><span class="dfn-paneled" id="9bfc28f6">pseudo-element</span>
     <li><span class="dfn-paneled" id="33cbcfca">selector</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ed948033">fragment</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-av1-isobmff">[AV1-ISOBMFF]
   <dd><a href="https://aomediacodec.github.io/av1-isobmff/"><cite>AV1 Codec ISO Media File Format Binding</cite></a>. Draft Deliverable. URL: <a href="https://aomediacodec.github.io/av1-isobmff/">https://aomediacodec.github.io/av1-isobmff/</a>
   <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
   <dd>Elika Etemad; Brad Kemper. <a href="https://drafts.csswg.org/css-backgrounds/"><cite>CSS Backgrounds and Borders Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-backgrounds/">https://drafts.csswg.org/css-backgrounds/</a>
   <dt id="biblio-css-break-4">[CSS-BREAK-4]
   <dd>Rossen Atanassov; Elika Etemad. <a href="https://drafts.csswg.org/css-break-4/"><cite>CSS Fragmentation Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-break-4/">https://drafts.csswg.org/css-break-4/</a>
   <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
   <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-cascade-5/"><cite>CSS Cascading and Inheritance Level 5</cite></a>. URL: <a href="https://drafts.csswg.org/css-cascade-5/">https://drafts.csswg.org/css-cascade-5/</a>
   <dt id="biblio-css-color-4">[CSS-COLOR-4]
   <dd>Chris Lilley; Tab Atkins Jr.; Lea Verou. <a href="https://drafts.csswg.org/css-color-4/"><cite>CSS Color Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-color-4/">https://drafts.csswg.org/css-color-4/</a>
   <dt id="biblio-css-content-3">[CSS-CONTENT-3]
   <dd>Elika Etemad; Dave Cramer. <a href="https://drafts.csswg.org/css-content-3/"><cite>CSS Generated Content Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-content-3/">https://drafts.csswg.org/css-content-3/</a>
   <dt id="biblio-css-display-4">[CSS-DISPLAY-4]
   <dd><a href="https://drafts.csswg.org/css-display-4/"><cite>CSS Display Module Level 4</cite></a>. Editor's Draft. URL: <a href="https://drafts.csswg.org/css-display-4/">https://drafts.csswg.org/css-display-4/</a>
   <dt id="biblio-css-inline-3">[CSS-INLINE-3]
   <dd>Elika Etemad. <a href="https://drafts.csswg.org/css-inline-3/"><cite>CSS Inline Layout Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-inline-3/">https://drafts.csswg.org/css-inline-3/</a>
   <dt id="biblio-css-lists-3">[CSS-LISTS-3]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-lists-3/"><cite>CSS Lists and Counters Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-lists-3/">https://drafts.csswg.org/css-lists-3/</a>
   <dt id="biblio-css-multicol-1">[CSS-MULTICOL-1]
   <dd>Florian Rivoal; Rachel Andrew. <a href="https://drafts.csswg.org/css-multicol/"><cite>CSS Multi-column Layout Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-multicol/">https://drafts.csswg.org/css-multicol/</a>
   <dt id="biblio-css-ruby-1">[CSS-RUBY-1]
   <dd>Elika Etemad; et al. <a href="https://drafts.csswg.org/css-ruby-1/"><cite>CSS Ruby Annotation Layout Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-ruby-1/">https://drafts.csswg.org/css-ruby-1/</a>
   <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
   <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://drafts.csswg.org/css-syntax/"><cite>CSS Syntax Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-syntax/">https://drafts.csswg.org/css-syntax/</a>
   <dt id="biblio-css-tables-3">[CSS-TABLES-3]
   <dd>François Remy; Greg Whitworth; David Baron. <a href="https://drafts.csswg.org/css-tables-3/"><cite>CSS Table Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-tables-3/">https://drafts.csswg.org/css-tables-3/</a>
   <dt id="biblio-css-text-3">[CSS-TEXT-3]
   <dd>Elika Etemad; Koji Ishii; Florian Rivoal. <a href="https://drafts.csswg.org/css-text-3/"><cite>CSS Text Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-text-3/">https://drafts.csswg.org/css-text-3/</a>
   <dt id="biblio-css-text-4">[CSS-TEXT-4]
   <dd>Elika Etemad; et al. <a href="https://drafts.csswg.org/css-text-4/"><cite>CSS Text Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-text-4/">https://drafts.csswg.org/css-text-4/</a>
   <dt id="biblio-css-text-decor-4">[CSS-TEXT-DECOR-4]
   <dd>Elika Etemad; Koji Ishii. <a href="https://drafts.csswg.org/css-text-decor-4/"><cite>CSS Text Decoration Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-text-decor-4/">https://drafts.csswg.org/css-text-decor-4/</a>
   <dt id="biblio-css-ui-4">[CSS-UI-4]
   <dd>Florian Rivoal. <a href="https://drafts.csswg.org/css-ui-4/"><cite>CSS Basic User Interface Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-ui-4/">https://drafts.csswg.org/css-ui-4/</a>
   <dt id="biblio-css-variables-1">[CSS-VARIABLES-1]
   <dd>Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-variables/"><cite>CSS Custom Properties for Cascading Variables Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-variables/">https://drafts.csswg.org/css-variables/</a>
   <dt id="biblio-css-variables-2">[CSS-VARIABLES-2]
   <dd><a href="https://drafts.csswg.org/css-variables-2/"><cite>CSS Custom Properties for Cascading Variables Module Level 2</cite></a>. Editor's Draft. URL: <a href="https://drafts.csswg.org/css-variables-2/">https://drafts.csswg.org/css-variables-2/</a>
   <dt id="biblio-css-writing-modes-3">[CSS-WRITING-MODES-3]
   <dd>Elika Etemad; Koji Ishii. <a href="https://drafts.csswg.org/css-writing-modes-3/"><cite>CSS Writing Modes Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-writing-modes-3/">https://drafts.csswg.org/css-writing-modes-3/</a>
   <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
   <dd>Elika Etemad; Koji Ishii. <a href="https://drafts.csswg.org/css-writing-modes-4/"><cite>CSS Writing Modes Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-writing-modes-4/">https://drafts.csswg.org/css-writing-modes-4/</a>
   <dt id="biblio-css2">[CSS2]
   <dd>Bert Bos; et al. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-css22">[CSS22]
   <dd>Bert Bos. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 2 (CSS 2.2) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-cssom-1">[CSSOM-1]
   <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://drafts.csswg.org/cssom/"><cite>CSS Object Model (CSSOM)</cite></a>. URL: <a href="https://drafts.csswg.org/cssom/">https://drafts.csswg.org/cssom/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-fill-stroke-3">[FILL-STROKE-3]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.fxtf.org/fill-stroke/"><cite>CSS Fill and Stroke Module Level 3</cite></a>. URL: <a href="https://drafts.fxtf.org/fill-stroke/">https://drafts.fxtf.org/fill-stroke/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-selectors-4">[SELECTORS-4]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/selectors/"><cite>Selectors Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/selectors/">https://drafts.csswg.org/selectors/</a>
   <dt id="biblio-uax44">[UAX44]
   <dd>Ken Whistler. <a href="https://www.unicode.org/reports/tr44/tr44-32.html"><cite>Unicode Character Database</cite></a>. 6 September 2023. Unicode Standard Annex #44. URL: <a href="https://www.unicode.org/reports/tr44/tr44-32.html">https://www.unicode.org/reports/tr44/tr44-32.html</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-css-cascade-4">[CSS-CASCADE-4]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-cascade-4/"><cite>CSS Cascading and Inheritance Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-cascade-4/">https://drafts.csswg.org/css-cascade-4/</a>
   <dt id="biblio-css-color-3">[CSS-COLOR-3]
   <dd>Tantek Çelik; Chris Lilley; David Baron. <a href="https://drafts.csswg.org/css-color-3/"><cite>CSS Color Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-color-3/">https://drafts.csswg.org/css-color-3/</a>
   <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-display/"><cite>CSS Display Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-display/">https://drafts.csswg.org/css-display/</a>
   <dt id="biblio-css-fonts-3">[CSS-FONTS-3]
   <dd>John Daggett; Myles Maxfield; Chris Lilley. <a href="https://drafts.csswg.org/css-fonts-3/"><cite>CSS Fonts Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-fonts-3/">https://drafts.csswg.org/css-fonts-3/</a>
   <dt id="biblio-css-text-decor-3">[CSS-TEXT-DECOR-3]
   <dd>Elika Etemad; Koji Ishii. <a href="https://drafts.csswg.org/css-text-decor-3/"><cite>CSS Text Decoration Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-text-decor-3/">https://drafts.csswg.org/css-text-decor-3/</a>
   <dt id="biblio-html5">[HTML5]
   <dd>Ian Hickson; et al. <a href="https://www.w3.org/html/wg/drafts/html/master/"><cite>HTML5</cite></a>. URL: <a href="https://www.w3.org/html/wg/drafts/html/master/">https://www.w3.org/html/wg/drafts/html/master/</a>
   <dt id="biblio-selectors-3">[SELECTORS-3]
   <dd>Tantek Çelik; et al. <a href="https://drafts.csswg.org/selectors-3/"><cite>Selectors Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/selectors-3/">https://drafts.csswg.org/selectors-3/</a>
   <dt id="biblio-uax29">[UAX29]
   <dd>Josh Hadley. <a href="https://www.unicode.org/reports/tr29/tr29-43.html"><cite>Unicode Text Segmentation</cite></a>. 16 August 2023. Unicode Standard Annex #29. URL: <a href="https://www.unicode.org/reports/tr29/tr29-43.html">https://www.unicode.org/reports/tr29/tr29-43.html</a>
   <dt id="biblio-web-animations-1">[WEB-ANIMATIONS-1]
   <dd>Brian Birtles; et al. <a href="https://drafts.csswg.org/web-animations-1/"><cite>Web Animations</cite></a>. URL: <a href="https://drafts.csswg.org/web-animations-1/">https://drafts.csswg.org/web-animations-1/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#csspseudoelement"><code class="highlight"><c- g>CSSPseudoElement</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#dom-csspseudoelement-type"><c- g>type</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-csspseudoelement-element"><c- g>element</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element"><c- g>Element</c-></a> {
  <a data-link-type="idl-name" href="#csspseudoelement"><c- n>CSSPseudoElement</c-></a>? <a class="idl-code" data-link-type="method" href="#dom-element-pseudo"><c- g>pseudo</c-></a>(<a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a href="#dom-element-pseudo-type-type"><code class="highlight"><c- g>type</c-></code></a>);
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Are there any other properties that should be included here? <a class="issue-return" href="#issue-6ca196f5" title="Jump to section">↵</a></div>
   <div class="issue"> See <a href="http://lists.w3.org/Archives/Public/www-style/2008Nov/0022.html">F2F minutes</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2008Oct/0268.html">dbaron’s message</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2010May/0247.html">Daniel’s thread</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2010May/0261.html">Gecko notes</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2010May/0366.html">Opera notes</a>, <a href="http://lists.w3.org/Archives/Public/www-style/2010May/0280.html">Webkit notes</a> <a class="issue-return" href="#issue-13b80e20" title="Jump to section">↵</a></div>
   <div class="issue"> Not sure if this is the correct way of describing the way things work. <a class="issue-return" href="#issue-271a1b90" title="Jump to section">↵</a></div>
   <div class="issue"> Interaction of <a class="css" data-link-type="maybe" href="#selectordef-marker">::marker</a> and <a class="css" data-link-type="maybe" href="#selectordef-first-line">::first-line</a> is currently under discussion in <a href="https://github.com/w3c/csswg-drafts/issues/4506">Issue 4506</a>. <a class="issue-return" href="#issue-c80e7017" title="Jump to section">↵</a></div>
   <div class="issue"> Authors seem to want <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-text-3/#propdef-text-align">text-align</a> on the list of supported properties.
  See e.g. <a href="http://css-tricks.com/almanac/selectors/p/placeholder/">comments here</a>. <a class="issue-return" href="#issue-1631f2fa" title="Jump to section">↵</a></div>
   <div class="issue"> The identity, lifetime, and nullness of the return value
  (and potential error cases)
  of the <code class="idl"><a data-link-type="idl" href="#dom-element-pseudo">pseudo()</a></code> method is still under discussion.
  See <a href="https://github.com/w3c/csswg-drafts/issues/3607">Issue 3607</a> and <a href="https://github.com/w3c/csswg-drafts/issues/3603">Issue 3603</a>. <a class="issue-return" href="#issue-302461e7" title="Jump to section">↵</a></div>
  </div>
  <details class="mdn-anno unpositioned" data-anno-for="dom-csspseudoelement-element">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSPseudoElement/element" title="The element read-only property of the CSSPseudoElement interface returns a reference to the originating element of the pseudo-element, in other words its parent element.">CSSPseudoElement/element</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 75+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome no"><span>Chrome</span><span>None</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink no"><span>Edge</span><span>None</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-csspseudoelement-type">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSPseudoElement/type" title="The type read-only property of the CSSPseudoElement interface returns the type of the pseudo-element as a string, represented in the form of a CSS selector.">CSSPseudoElement/type</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 75+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome no"><span>Chrome</span><span>None</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink no"><span>Edge</span><span>None</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="CSSPseudoElement-interface">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSPseudoElement" title="The CSSPseudoElement interface represents a pseudo-element that may be the target of an event or animated using the Web Animations API. Instances of this interface may be obtained by calling Element.pseudo().">CSSPseudoElement</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 75+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome no"><span>Chrome</span><span>None</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink no"><span>Edge</span><span>None</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="generated-content">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::after" title="In CSS, ::after creates a pseudo-element that is the last child of the selected element. It is often used to add cosmetic content to an element with the content property. It is inline by default.">::after</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>7+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>9+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>10.1+</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::before" title="In CSS, ::before creates a pseudo-element that is the first child of the selected element. It is often used to add cosmetic content to an element with the content property. It is inline by default.">::before</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>7+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>9+</span></span>
     <hr>
     <span class="firefox_android yes"><span>Firefox for Android</span><span>4+</span></span><span class="safari_ios yes"><span>iOS Safari</span><span>3+</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>10.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="file-selector-button-pseudo">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::file-selector-button" title="The ::file-selector-button CSS pseudo-element represents the button of an <input> of type=&quot;file&quot;.">::file-selector-button</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>82+</span></span><span class="safari yes"><span>Safari</span><span>14.1+</span></span><span class="chrome yes"><span>Chrome</span><span>89+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>89+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios yes"><span>iOS Safari</span><span>14.5+</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="first-letter-pseudo">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::first-letter" title="The ::first-letter CSS pseudo-element applies styles to the first letter of the first line of a block-level element, but only when not preceded by other content (such as images or inline tables).">::first-letter</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>7+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>9+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>10.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="first-line-pseudo">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::first-line" title="The ::first-line CSS pseudo-element applies styles to the first line of a block-level element.">::first-line</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>7+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>9+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>10.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="selectordef-grammar-error">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::grammar-error" title="The ::grammar-error CSS pseudo-element represents a text segment which the user agent has flagged as grammatically incorrect.">::grammar-error</a></p>
    <p class="less-than-two-engines-text">In no current engines.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome no"><span>Chrome</span><span>None</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink no"><span>Edge</span><span>None</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="marker-pseudo">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::marker" title="The ::marker CSS pseudo-element selects the marker box of a list item, which typically contains a bullet or number. It works on any element or pseudo-element set to display: list-item, such as the <li> and <summary> elements.">::marker</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>68+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="placeholder-pseudo">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::placeholder" title="The ::placeholder CSS pseudo-element represents the placeholder text in an <input> or <textarea> element.">::placeholder</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>51+</span></span><span class="safari yes"><span>Safari</span><span>10.1+</span></span><span class="chrome yes"><span>Chrome</span><span>57+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>57+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="selectordef-selection">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::selection" title="The ::selection CSS pseudo-element applies styles to the part of a document that has been highlighted by the user (such as clicking and dragging the mouse across text).">::selection</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>62+</span></span><span class="safari yes"><span>Safari</span><span>1.1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>9.5+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>9+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="selectordef-spelling-error">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::spelling-error" title="The ::spelling-error CSS pseudo-element represents a text segment which the user agent has flagged as incorrectly spelled.">::spelling-error</a></p>
    <p class="less-than-two-engines-text">In no current engines.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome no"><span>Chrome</span><span>None</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink no"><span>Edge</span><span>None</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="selectordef-target-text">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::target-text" title="The ::target-text CSS pseudo-element represents the text that has been scrolled to if the browser supports text fragments. It allows authors to choose how to highlight that section of text.">::target-text</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>89+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>89+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"083ffe5f": {"dfnID":"083ffe5f","dfnText":"inline box","external":true,"refSections":[{"refs":[{"id":"ref-for-inline-box"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-inline-box\u2460"}],"title":"2.2.3. \nStyling the ::first-letter Pseudo-element"}],"url":"https://drafts.csswg.org/css-display-4/#inline-box"},
"11fb4d5b": {"dfnID":"11fb4d5b","dfnText":"background-color","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-background-color"},{"id":"ref-for-propdef-background-color\u2460"}],"title":"3.2. \nStyling Highlights"},{"refs":[{"id":"ref-for-propdef-background-color\u2461"}],"title":"3.5. \nCascading and Per-Element Highlight Styles"},{"refs":[{"id":"ref-for-propdef-background-color\u2462"},{"id":"ref-for-propdef-background-color\u2463"}],"title":"3.6.4. \nReplaced Elements"}],"url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-color"},
"12cf38c9": {"dfnID":"12cf38c9","dfnText":"initial-letter","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-initial-letter"}],"title":"2.2. \nThe ::first-letter pseudo-element"},{"refs":[{"id":"ref-for-propdef-initial-letter\u2460"}],"title":"2.2.3. \nStyling the ::first-letter Pseudo-element"}],"url":"https://drafts.csswg.org/css-inline-3/#propdef-initial-letter"},
"16b27b2a": {"dfnID":"16b27b2a","dfnText":"typographic letter unit","external":true,"refSections":[{"refs":[{"id":"ref-for-typographic-letter-unit"},{"id":"ref-for-typographic-letter-unit\u2460"},{"id":"ref-for-typographic-letter-unit\u2461"},{"id":"ref-for-typographic-letter-unit\u2462"},{"id":"ref-for-typographic-letter-unit\u2463"}],"title":"2.2. \nThe ::first-letter pseudo-element"}],"url":"https://drafts.csswg.org/css-text-4/#typographic-letter-unit"},
"16d57f47": {"dfnID":"16d57f47","dfnText":"list-style-position","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-list-style-position"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"}],"url":"https://drafts.csswg.org/css-lists-3/#propdef-list-style-position"},
"19119b4f": {"dfnID":"19119b4f","dfnText":"text-emphasis-position","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-text-emphasis-position"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-text-decor-4/#propdef-text-emphasis-position"},
"198f1537": {"dfnID":"198f1537","dfnText":"custom property","external":true,"refSections":[{"refs":[{"id":"ref-for-custom-property"}],"title":"2.1.3. \nInheritance and the ::first-line Pseudo-element"}],"url":"https://drafts.csswg.org/css-variables-2/#custom-property"},
"1da081a0": {"dfnID":"1da081a0","dfnText":"marker","external":true,"refSections":[{"refs":[{"id":"ref-for-marker\u2460"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"}],"url":"https://aomediacodec.github.io/av1-isobmff/#marker"},
"20fff200": {"dfnID":"20fff200","dfnText":"inheritance","external":true,"refSections":[{"refs":[{"id":"ref-for-css-inheritance"},{"id":"ref-for-css-inheritance\u2460"}],"title":"2.1.3. \nInheritance and the ::first-line Pseudo-element"},{"refs":[{"id":"ref-for-css-inheritance\u2461"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-css-inheritance\u2462"}],"title":"4. \nTree-Abiding Pseudo-elements"}],"url":"https://drafts.csswg.org/css-cascade-5/#css-inheritance"},
"2161cf2b": {"dfnID":"2161cf2b","dfnText":"pseudo-elements","external":true,"refSections":[{"refs":[{"id":"ref-for-x22"}],"title":"1. Introduction"}],"url":"https://www.w3.org/TR/CSS21/selector.html#x22"},
"2467179e": {"dfnID":"2467179e","dfnText":"content","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-content"},{"id":"ref-for-propdef-content\u2460"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"},{"refs":[{"id":"ref-for-propdef-content\u2461"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-content-3/#propdef-content"},
"2496f7a0": {"dfnID":"2496f7a0","dfnText":"inherited property","external":true,"refSections":[{"refs":[{"id":"ref-for-inherited-property"}],"title":"2.1.3. \nInheritance and the ::first-line Pseudo-element"},{"refs":[{"id":"ref-for-inherited-property\u2460"}],"title":"3.5. \nCascading and Per-Element Highlight Styles"}],"url":"https://drafts.csswg.org/css-cascade-5/#inherited-property"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-element\u2460"},{"id":"ref-for-element\u2461"},{"id":"ref-for-element\u2462"}],"title":"6.2. \npseudo() method of the Element interface"}],"url":"https://dom.spec.whatwg.org/#element"},
"2bc0cdf4": {"dfnID":"2bc0cdf4","dfnText":"EventTarget","external":true,"refSections":[{"refs":[{"id":"ref-for-eventtarget"}],"title":"6.1. \nCSSPseudoElement Interface"}],"url":"https://dom.spec.whatwg.org/#eventtarget"},
"313bb160": {"dfnID":"313bb160","dfnText":"transparent","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-color-transparent"}],"title":"3.6.4. \nReplaced Elements"}],"url":"https://drafts.csswg.org/css-color-4/#valdef-color-transparent"},
"33cbcfca": {"dfnID":"33cbcfca","dfnText":"selector","external":true,"refSections":[{"refs":[{"id":"ref-for-selector"}],"title":"1. Introduction"}],"url":"https://drafts.csswg.org/selectors-4/#selector"},
"355da394": {"dfnID":"355da394","dfnText":"outline","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-outline"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-ui-4/#propdef-outline"},
"385326d7": {"dfnID":"385326d7","dfnText":"writing-mode","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-writing-mode"}],"title":"2.1.2. \nStyling the First Line Pseudo-element"}],"url":"https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode"},
"3bd4bbe9": {"dfnID":"3bd4bbe9","dfnText":"text-orientation","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-text-orientation"}],"title":"2.1.2. \nStyling the First Line Pseudo-element"}],"url":"https://drafts.csswg.org/css-writing-modes-4/#propdef-text-orientation"},
"4013a022": {"dfnID":"4013a022","dfnText":"this","external":true,"refSections":[{"refs":[{"id":"ref-for-this"}],"title":"6.2. \npseudo() method of the Element interface"}],"url":"https://webidl.spec.whatwg.org/#this"},
"4356bfe3": {"dfnID":"4356bfe3","dfnText":"text-align","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-text-align"}],"title":"4.3. \nPlaceholder Input: the ::placeholder pseudo-element"}],"url":"https://drafts.csswg.org/css-text-3/#propdef-text-align"},
"4462edae": {"dfnID":"4462edae","dfnText":"spelling-error","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-text-decoration-line-spelling-error"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-text-decor-4/#valdef-text-decoration-line-spelling-error"},
"521eb6d4": {"dfnID":"521eb6d4","dfnText":"multi-column container","external":true,"refSections":[{"refs":[{"id":"ref-for-multi-column-container"}],"title":"2.1.1. \nFinding the First Formatted Line"}],"url":"https://drafts.csswg.org/css-multicol-1/#multi-column-container"},
"53a193f1": {"dfnID":"53a193f1","dfnText":"*","external":true,"refSections":[{"refs":[{"id":"ref-for-x"}],"title":"3.5. \nCascading and Per-Element Highlight Styles"}],"url":"https://drafts.csswg.org/selectors-3/#x"},
"54d48ea2": {"dfnID":"54d48ea2","dfnText":"inline-level box","external":true,"refSections":[{"refs":[{"id":"ref-for-inline-level-box"}],"title":"3.4. \nArea of a Highlight"}],"url":"https://drafts.csswg.org/css-display-4/#inline-level-box"},
"557f5d97": {"dfnID":"557f5d97","dfnText":"text-emphasis","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-text-emphasis"}],"title":"3.2. \nStyling Highlights"}],"url":"https://drafts.csswg.org/css-text-decor-4/#propdef-text-emphasis"},
"5bc3d0ec": {"dfnID":"5bc3d0ec","dfnText":"text-decoration","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-text-decoration"}],"title":"3.2. \nStyling Highlights"}],"url":"https://drafts.csswg.org/css-text-decor-4/#propdef-text-decoration"},
"5bc8bd12": {"dfnID":"5bc8bd12","dfnText":"direction","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-direction"}],"title":"2.1.2. \nStyling the First Line Pseudo-element"},{"refs":[{"id":"ref-for-propdef-direction\u2460"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-writing-modes-3/#propdef-direction"},
"5fced98b": {"dfnID":"5fced98b","dfnText":"CSSOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-cssomstring"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-cssomstring\u2460"}],"title":"6.2. \npseudo() method of the Element interface"}],"url":"https://drafts.csswg.org/cssom-1/#cssomstring"},
"61656631": {"dfnID":"61656631","dfnText":"marker box","external":true,"refSections":[{"refs":[{"id":"ref-for-marker"}],"title":"2.2.1. \nFinding the First Letter Text"},{"refs":[{"id":"ref-for-marker\u2461"},{"id":"ref-for-marker\u2462"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"}],"url":"https://drafts.csswg.org/css-lists-3/#marker"},
"63544174": {"dfnID":"63544174","dfnText":"stroke-width","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-stroke-width"}],"title":"3.2. \nStyling Highlights"}],"url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width"},
"64747b41": {"dfnID":"64747b41","dfnText":"ua style sheet","external":true,"refSections":[{"refs":[{"id":"ref-for-cascade-origin-ua"}],"title":"3.5. \nCascading and Per-Element Highlight Styles"}],"url":"https://drafts.csswg.org/css-cascade-5/#cascade-origin-ua"},
"689ef56c": {"dfnID":"689ef56c","dfnText":":after","external":true,"refSections":[{"refs":[{"id":"ref-for-selectordef-after\u2462"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"}],"url":"https://drafts.csswg.org/css2/#selectordef-after"},
"6916104d": {"dfnID":"6916104d","dfnText":"box-shadow","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-box-shadow"}],"title":"2.2.3. \nStyling the ::first-letter Pseudo-element"}],"url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-box-shadow"},
"76c4403d": {"dfnID":"76c4403d","dfnText":"parse","external":true,"refSections":[{"refs":[{"id":"ref-for-css-parse-something-according-to-a-css-grammar"}],"title":"6.2. \npseudo() method of the Element interface"}],"url":"https://drafts.csswg.org/css-syntax-3/#css-parse-something-according-to-a-css-grammar"},
"82805a4e": {"dfnID":"82805a4e","dfnText":"originating element","external":true,"refSections":[{"refs":[{"id":"ref-for-originating-element"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-originating-element\u2460"}],"title":"2.1. \nThe ::first-line pseudo-element"},{"refs":[{"id":"ref-for-originating-element\u2461"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-originating-element\u2462"}],"title":"2.2. \nThe ::first-letter pseudo-element"},{"refs":[{"id":"ref-for-originating-element\u2463"}],"title":"2.2.1. \nFinding the First Letter Text"},{"refs":[{"id":"ref-for-originating-element\u2464"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-originating-element\u2465"}],"title":"3.2. \nStyling Highlights"},{"refs":[{"id":"ref-for-originating-element\u2466"},{"id":"ref-for-originating-element\u2467"}],"title":"3.5. \nCascading and Per-Element Highlight Styles"},{"refs":[{"id":"ref-for-originating-element\u2468"}],"title":"3.6.3. \nText and Text Decorations"},{"refs":[{"id":"ref-for-originating-element\u2460\u24ea"}],"title":"4. \nTree-Abiding Pseudo-elements"},{"refs":[{"id":"ref-for-originating-element\u2460\u2460"},{"id":"ref-for-originating-element\u2460\u2461"},{"id":"ref-for-originating-element\u2460\u2462"},{"id":"ref-for-originating-element\u2460\u2463"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"},{"refs":[{"id":"ref-for-originating-element\u2460\u2464"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-originating-element\u2460\u2465"},{"id":"ref-for-originating-element\u2460\u2466"}],"title":"6.2. \npseudo() method of the Element interface"}],"url":"https://drafts.csswg.org/selectors-4/#originating-element"},
"8379845e": {"dfnID":"8379845e","dfnText":"block-level","external":true,"refSections":[{"refs":[{"id":"ref-for-block-level"},{"id":"ref-for-block-level\u2460"}],"title":"2.1.1. \nFinding the First Formatted Line"}],"url":"https://drafts.csswg.org/css-display-4/#block-level"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"6.1. \nCSSPseudoElement Interface"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"91bfbe18": {"dfnID":"91bfbe18","dfnText":"opacity","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-opacity"}],"title":"2.1.2. \nStyling the First Line Pseudo-element"},{"refs":[{"id":"ref-for-propdef-opacity\u2460"}],"title":"2.2.3. \nStyling the ::first-letter Pseudo-element"}],"url":"https://drafts.csswg.org/css-color-4/#propdef-opacity"},
"96626f55": {"dfnID":"96626f55","dfnText":"list-item","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-display-list-item"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"}],"url":"https://drafts.csswg.org/css-display-4/#valdef-display-list-item"},
"982e17a3": {"dfnID":"982e17a3","dfnText":"unicode-bidi","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-unicode-bidi"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-writing-modes-3/#propdef-unicode-bidi"},
"991145b0": {"dfnID":"991145b0","dfnText":"none","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-content-none"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"}],"url":"https://drafts.csswg.org/css-content-3/#valdef-content-none"},
"994d0e36": {"dfnID":"994d0e36","dfnText":"table wrapper box","external":true,"refSections":[{"refs":[{"id":"ref-for-table-wrapper-box"}],"title":"2.1.1. \nFinding the First Formatted Line"}],"url":"https://drafts.csswg.org/css-tables-3/#table-wrapper-box"},
"99cabd32": {"dfnID":"99cabd32","dfnText":"in-flow","external":true,"refSections":[{"refs":[{"id":"ref-for-in-flow"}],"title":"2.1.1. \nFinding the First Formatted Line"}],"url":"https://drafts.csswg.org/css-display-4/#in-flow"},
"9bfc28f6": {"dfnID":"9bfc28f6","dfnText":"pseudo-element","external":true,"refSections":[{"refs":[{"id":"ref-for-pseudo-element"}],"title":"2.1. \nThe ::first-line pseudo-element"},{"refs":[{"id":"ref-for-pseudo-element\u2460"}],"title":"3.6.3. \nText and Text Decorations"},{"refs":[{"id":"ref-for-pseudo-element\u2461"}],"title":"6.2. \npseudo() method of the Element interface"}],"url":"https://drafts.csswg.org/selectors-4/#pseudo-element"},
"9ea6bed2": {"dfnID":"9ea6bed2","dfnText":"initial value","external":true,"refSections":[{"refs":[{"id":"ref-for-initial-value"}],"title":"4. \nTree-Abiding Pseudo-elements"}],"url":"https://drafts.csswg.org/css-cascade-5/#initial-value"},
"9f3d4f17": {"dfnID":"9f3d4f17","dfnText":"block container","external":true,"refSections":[{"refs":[{"id":"ref-for-block-container"},{"id":"ref-for-block-container\u2460"},{"id":"ref-for-block-container\u2461"},{"id":"ref-for-block-container\u2462"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-block-container\u2463"},{"id":"ref-for-block-container\u2464"}],"title":"2.2.1. \nFinding the First Letter Text"}],"url":"https://drafts.csswg.org/css-display-4/#block-container"},
"a20bf8d2": {"dfnID":"a20bf8d2","dfnText":":placeholder-shown","external":true,"refSections":[{"refs":[{"id":"ref-for-placeholder-shown-pseudo"}],"title":"4.3. \nPlaceholder Input: the ::placeholder pseudo-element"}],"url":"https://drafts.csswg.org/selectors-4/#placeholder-shown-pseudo"},
"a73617e0": {"dfnID":"a73617e0","dfnText":"writing mode","external":true,"refSections":[{"refs":[{"id":"ref-for-writing-mode"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-writing-modes-4/#writing-mode"},
"a82a20ef": {"dfnID":"a82a20ef","dfnText":"CSSStyleDeclaration","external":true,"refSections":[{"refs":[{"id":"ref-for-cssstyledeclaration"}],"title":"6.1. \nCSSPseudoElement Interface"}],"url":"https://drafts.csswg.org/cssom-1/#cssstyledeclaration"},
"ac8c80fa": {"dfnID":"ac8c80fa","dfnText":"list item","external":true,"refSections":[{"refs":[{"id":"ref-for-list-item"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-list-item\u2460"},{"id":"ref-for-list-item\u2461"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"}],"url":"https://drafts.csswg.org/css-lists-3/#list-item"},
"ad337600": {"dfnID":"ad337600","dfnText":"<pseudo-element-selector>","external":true,"refSections":[{"refs":[{"id":"ref-for-typedef-pseudo-element-selector"}],"title":"6.2. \npseudo() method of the Element interface"}],"url":"https://drafts.csswg.org/selectors-4/#typedef-pseudo-element-selector"},
"b04f4c83": {"dfnID":"b04f4c83","dfnText":"fill-color","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-fill-color"}],"title":"3.2. \nStyling Highlights"},{"refs":[{"id":"ref-for-propdef-fill-color\u2460"}],"title":"\nChanges"}],"url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-fill-color"},
"b8f126f1": {"dfnID":"b8f126f1","dfnText":"inline formatting context","external":true,"refSections":[{"refs":[{"id":"ref-for-inline-formatting-context"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-inline-formatting-context\u2460"}],"title":"2.2.1. \nFinding the First Letter Text"}],"url":"https://drafts.csswg.org/css-display-4/#inline-formatting-context"},
"c02f5d57": {"dfnID":"c02f5d57","dfnText":"inline","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-display-inline"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"}],"url":"https://drafts.csswg.org/css-display-4/#valdef-display-inline"},
"c3bd6e1d": {"dfnID":"c3bd6e1d","dfnText":"box fragment","external":true,"refSections":[{"refs":[{"id":"ref-for-box-fragment"}],"title":"2.1.3. \nInheritance and the ::first-line Pseudo-element"}],"url":"https://drafts.csswg.org/css-break-4/#box-fragment"},
"ca960d4f": {"dfnID":"ca960d4f","dfnText":"block formatting context","external":true,"refSections":[{"refs":[{"id":"ref-for-block-formatting-context"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-block-formatting-context\u2460"}],"title":"2.2.1. \nFinding the First Letter Text"}],"url":"https://drafts.csswg.org/css-display-4/#block-formatting-context"},
"csspseudoelement": {"dfnID":"csspseudoelement","dfnText":"CSSPseudoElement","external":false,"refSections":[{"refs":[{"id":"ref-for-csspseudoelement"},{"id":"ref-for-csspseudoelement\u2460"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-csspseudoelement\u2461"},{"id":"ref-for-csspseudoelement\u2462"},{"id":"ref-for-csspseudoelement\u2463"},{"id":"ref-for-csspseudoelement\u2464"}],"title":"6.2. \npseudo() method of the Element interface"},{"refs":[{"id":"ref-for-csspseudoelement\u2465"},{"id":"ref-for-csspseudoelement\u2466"},{"id":"ref-for-csspseudoelement\u2467"},{"id":"ref-for-csspseudoelement\u2468"}],"title":"\nChanges"}],"url":"#csspseudoelement"},
"d3129b15": {"dfnID":"d3129b15","dfnText":"grammar-error","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-text-decoration-line-grammar-error"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-text-decor-4/#valdef-text-decoration-line-grammar-error"},
"d7fa3e1c": {"dfnID":"d7fa3e1c","dfnText":"inline-level","external":true,"refSections":[{"refs":[{"id":"ref-for-inline-level"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-inline-level\u2460"}],"title":"2.2.1. \nFinding the First Letter Text"}],"url":"https://drafts.csswg.org/css-display-4/#inline-level"},
"dd21c139": {"dfnID":"dd21c139","dfnText":"ruby-position","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-ruby-position"}],"title":"2.1.2. \nStyling the First Line Pseudo-element"},{"refs":[{"id":"ref-for-propdef-ruby-position\u2460"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-ruby-1/#propdef-ruby-position"},
"dom-csspseudoelement-element": {"dfnID":"dom-csspseudoelement-element","dfnText":"element","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-csspseudoelement-element"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-dom-csspseudoelement-element\u2460"}],"title":"\nChanges"}],"url":"#dom-csspseudoelement-element"},
"dom-csspseudoelement-type": {"dfnID":"dom-csspseudoelement-type","dfnText":"type","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-csspseudoelement-type"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-dom-csspseudoelement-type\u2460"}],"title":"\nChanges"}],"url":"#dom-csspseudoelement-type"},
"dom-element-pseudo": {"dfnID":"dom-element-pseudo","dfnText":"pseudo(CSSOMString type)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-element-pseudo"},{"id":"ref-for-dom-element-pseudo\u2460"},{"id":"ref-for-dom-element-pseudo\u2461"}],"title":"6.2. \npseudo() method of the Element interface"},{"refs":[{"id":"ref-for-dom-element-pseudo\u2462"}],"title":"\nChanges"}],"url":"#dom-element-pseudo"},
"dom-element-pseudo-type-type": {"dfnID":"dom-element-pseudo-type-type","dfnText":"type","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-element-pseudo-type-type"},{"id":"ref-for-dom-element-pseudo-type-type\u2460"}],"title":"6.2. \npseudo() method of the Element interface"}],"url":"#dom-element-pseudo-type-type"},
"e1ab41b7": {"dfnID":"e1ab41b7","dfnText":"block axis","external":true,"refSections":[{"refs":[{"id":"ref-for-block-axis"}],"title":"3.4. \nArea of a Highlight"}],"url":"https://drafts.csswg.org/css-writing-modes-4/#block-axis"},
"e34548f4": {"dfnID":"e34548f4","dfnText":"line box","external":true,"refSections":[{"refs":[{"id":"ref-for-line-box"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-line-box\u2460"}],"title":"3.4. \nArea of a Highlight"}],"url":"https://drafts.csswg.org/css-inline-3/#line-box"},
"e77a37fc": {"dfnID":"e77a37fc","dfnText":"inline-level content","external":true,"refSections":[{"refs":[{"id":"ref-for-inline-level"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-inline-level\u2460"}],"title":"2.2.1. \nFinding the First Letter Text"}],"url":"https://drafts.csswg.org/css-display-4/#inline-level"},
"e7f0dd6c": {"dfnID":"e7f0dd6c","dfnText":"display","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-display"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"},{"refs":[{"id":"ref-for-propdef-display\u2460"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"}],"url":"https://drafts.csswg.org/css-display-4/#propdef-display"},
"ed948033": {"dfnID":"ed948033","dfnText":"fragment","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-fragment"},{"id":"ref-for-concept-url-fragment\u2460"},{"id":"ref-for-concept-url-fragment\u2461"}],"title":"3.1. \nSelecting Highlighted Content: the ::selection,  ::target-text, ::spelling-error, and ::grammar-error pseudo-elements"}],"url":"https://url.spec.whatwg.org/#concept-url-fragment"},
"efe16f32": {"dfnID":"efe16f32","dfnText":":target","external":true,"refSections":[{"refs":[{"id":"ref-for-target-pseudo"}],"title":"3.1. \nSelecting Highlighted Content: the ::selection,  ::target-text, ::spelling-error, and ::grammar-error pseudo-elements"}],"url":"https://drafts.csswg.org/selectors-4/#target-pseudo"},
"f2a0f55a": {"dfnID":"f2a0f55a","dfnText":"stroke-color","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-stroke-color"}],"title":"3.2. \nStyling Highlights"},{"refs":[{"id":"ref-for-propdef-stroke-color\u2460"}],"title":"\nChanges"}],"url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-color"},
"f338a9f0": {"dfnID":"f338a9f0","dfnText":"text-shadow","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-text-shadow"}],"title":"3.2. \nStyling Highlights"},{"refs":[{"id":"ref-for-propdef-text-shadow\u2460"},{"id":"ref-for-propdef-text-shadow\u2461"}],"title":"3.6.2. \nShadows"},{"refs":[{"id":"ref-for-propdef-text-shadow\u2462"}],"title":"\nChanges"}],"url":"https://drafts.csswg.org/css-text-decor-4/#propdef-text-shadow"},
"fictional-tag-sequence": {"dfnID":"fictional-tag-sequence","dfnText":"fictional tag sequence","external":false,"refSections":[{"refs":[{"id":"ref-for-fictional-tag-sequence"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-fictional-tag-sequence\u2460"},{"id":"ref-for-fictional-tag-sequence\u2461"}],"title":"2.1.3. \nInheritance and the ::first-line Pseudo-element"},{"refs":[{"id":"ref-for-fictional-tag-sequence\u2462"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-fictional-tag-sequence\u2463"}],"title":"5. \nOverlapping Pseudo-element Interactions"}],"url":"#fictional-tag-sequence"},
"first-formatted-line": {"dfnID":"first-formatted-line","dfnText":"first formatted line","external":false,"refSections":[{"refs":[{"id":"ref-for-first-formatted-line"}],"title":"2.1. \nThe ::first-line pseudo-element"},{"refs":[{"id":"ref-for-first-formatted-line\u2460"},{"id":"ref-for-first-formatted-line\u2461"},{"id":"ref-for-first-formatted-line\u2462"},{"id":"ref-for-first-formatted-line\u2463"},{"id":"ref-for-first-formatted-line\u2464"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-first-formatted-line\u2465"}],"title":"2.2. \nThe ::first-letter pseudo-element"},{"refs":[{"id":"ref-for-first-formatted-line\u2466"},{"id":"ref-for-first-formatted-line\u2467"},{"id":"ref-for-first-formatted-line\u2468"}],"title":"2.2.1. \nFinding the First Letter Text"}],"url":"#first-formatted-line"},
"first-letter-text": {"dfnID":"first-letter-text","dfnText":"first-letter text","external":false,"refSections":[{"refs":[{"id":"ref-for-first-letter-text"},{"id":"ref-for-first-letter-text\u2460"}],"title":"2.2. \nThe ::first-letter pseudo-element"},{"refs":[{"id":"ref-for-first-letter-text\u2461"},{"id":"ref-for-first-letter-text\u2462"},{"id":"ref-for-first-letter-text\u2463"},{"id":"ref-for-first-letter-text\u2464"},{"id":"ref-for-first-letter-text\u2465"}],"title":"2.2.1. \nFinding the First Letter Text"},{"refs":[{"id":"ref-for-first-letter-text\u2466"},{"id":"ref-for-first-letter-text\u2467"},{"id":"ref-for-first-letter-text\u2468"},{"id":"ref-for-first-letter-text\u2460\u24ea"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-first-letter-text\u2460\u2460"}],"title":"2.2.3. \nStyling the ::first-letter Pseudo-element"}],"url":"#first-letter-text"},
"highlight-overlay": {"dfnID":"highlight-overlay","dfnText":"highlight overlay","external":false,"refSections":[{"refs":[{"id":"ref-for-highlight-overlay"}],"title":"3.2. \nStyling Highlights"},{"refs":[{"id":"ref-for-highlight-overlay\u2460"}],"title":"3.5. \nCascading and Per-Element Highlight Styles"},{"refs":[{"id":"ref-for-highlight-overlay\u2461"}],"title":"3.6.1. \nBackgrounds"},{"refs":[{"id":"ref-for-highlight-overlay\u2462"},{"id":"ref-for-highlight-overlay\u2463"},{"id":"ref-for-highlight-overlay\u2464"}],"title":"3.6.2. \nShadows"},{"refs":[{"id":"ref-for-highlight-overlay\u2465"},{"id":"ref-for-highlight-overlay\u2466"}],"title":"3.6.3. \nText and Text Decorations"}],"url":"#highlight-overlay"},
"highlight-pseudo-element": {"dfnID":"highlight-pseudo-element","dfnText":"highlight pseudo-elements","external":false,"refSections":[{"refs":[{"id":"ref-for-highlight-pseudo-element"},{"id":"ref-for-highlight-pseudo-element\u2460"}],"title":"3.1. \nSelecting Highlighted Content: the ::selection,  ::target-text, ::spelling-error, and ::grammar-error pseudo-elements"},{"refs":[{"id":"ref-for-highlight-pseudo-element\u2461"},{"id":"ref-for-highlight-pseudo-element\u2462"}],"title":"3.2. \nStyling Highlights"},{"refs":[{"id":"ref-for-highlight-pseudo-element\u2463"}],"title":"3.4. \nArea of a Highlight"},{"refs":[{"id":"ref-for-highlight-pseudo-element\u2464"},{"id":"ref-for-highlight-pseudo-element\u2465"}],"title":"3.5. \nCascading and Per-Element Highlight Styles"},{"refs":[{"id":"ref-for-highlight-pseudo-element\u2466"}],"title":"3.6.1. \nBackgrounds"},{"refs":[{"id":"ref-for-highlight-pseudo-element\u2467"}],"title":"3.6.2. \nShadows"},{"refs":[{"id":"ref-for-highlight-pseudo-element\u2468"},{"id":"ref-for-highlight-pseudo-element\u2460\u24ea"},{"id":"ref-for-highlight-pseudo-element\u2460\u2460"},{"id":"ref-for-highlight-pseudo-element\u2460\u2461"}],"title":"3.6.3. \nText and Text Decorations"},{"refs":[{"id":"ref-for-highlight-pseudo-element\u2460\u2462"},{"id":"ref-for-highlight-pseudo-element\u2460\u2463"}],"title":"\nChanges"}],"url":"#highlight-pseudo-element"},
"selectordef-after": {"dfnID":"selectordef-after","dfnText":"::after","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-after"}],"title":"2.2.1. \nFinding the First Letter Text"},{"refs":[{"id":"ref-for-selectordef-after\u2460"},{"id":"ref-for-selectordef-after\u2461"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"},{"refs":[{"id":"ref-for-selectordef-after\u2463"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"},{"refs":[{"id":"ref-for-selectordef-after\u2464"}],"title":"5. \nOverlapping Pseudo-element Interactions"},{"refs":[{"id":"ref-for-selectordef-after\u2465"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-selectordef-after\u2466"}],"title":"7. \nCompatibility Syntax"}],"url":"#selectordef-after"},
"selectordef-before": {"dfnID":"selectordef-before","dfnText":"::before","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-before"}],"title":"2.2.1. \nFinding the First Letter Text"},{"refs":[{"id":"ref-for-selectordef-before\u2460"},{"id":"ref-for-selectordef-before\u2461"},{"id":"ref-for-selectordef-before\u2462"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"},{"refs":[{"id":"ref-for-selectordef-before\u2463"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"},{"refs":[{"id":"ref-for-selectordef-before\u2464"}],"title":"5. \nOverlapping Pseudo-element Interactions"},{"refs":[{"id":"ref-for-selectordef-before\u2465"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-selectordef-before\u2466"}],"title":"7. \nCompatibility Syntax"}],"url":"#selectordef-before"},
"selectordef-file-selector-button": {"dfnID":"selectordef-file-selector-button","dfnText":"::file-selector-button","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-file-selector-button"},{"id":"ref-for-selectordef-file-selector-button\u2460"}],"title":"4.4. \nFile Selector Button: the ::file-selector-button pseudo-element"}],"url":"#selectordef-file-selector-button"},
"selectordef-first-letter": {"dfnID":"selectordef-first-letter","dfnText":"::first-letter","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-first-letter"},{"id":"ref-for-selectordef-first-letter\u2460"},{"id":"ref-for-selectordef-first-letter\u2461"},{"id":"ref-for-selectordef-first-letter\u2462"}],"title":"2.2. \nThe ::first-letter pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2463"},{"id":"ref-for-selectordef-first-letter\u2464"},{"id":"ref-for-selectordef-first-letter\u2465"},{"id":"ref-for-selectordef-first-letter\u2466"}],"title":"2.2.1. \nFinding the First Letter Text"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2467"},{"id":"ref-for-selectordef-first-letter\u2468"},{"id":"ref-for-selectordef-first-letter\u2460\u24ea"},{"id":"ref-for-selectordef-first-letter\u2460\u2460"},{"id":"ref-for-selectordef-first-letter\u2460\u2461"},{"id":"ref-for-selectordef-first-letter\u2460\u2462"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2460\u2463"},{"id":"ref-for-selectordef-first-letter\u2460\u2464"},{"id":"ref-for-selectordef-first-letter\u2460\u2465"},{"id":"ref-for-selectordef-first-letter\u2460\u2466"},{"id":"ref-for-selectordef-first-letter\u2460\u2467"}],"title":"2.2.3. \nStyling the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2460\u2468"}],"title":"3.6.3. \nText and Text Decorations"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2461\u24ea"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2461\u2460"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2461\u2461"},{"id":"ref-for-selectordef-first-letter\u2461\u2462"}],"title":"5. \nOverlapping Pseudo-element Interactions"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2461\u2463"}],"title":"7. \nCompatibility Syntax"},{"refs":[{"id":"ref-for-selectordef-first-letter\u2461\u2464"},{"id":"ref-for-selectordef-first-letter\u2461\u2465"}],"title":"\nChanges"}],"url":"#selectordef-first-letter"},
"selectordef-first-line": {"dfnID":"selectordef-first-line","dfnText":"::first-line","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-first-line"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-selectordef-first-line\u2460"},{"id":"ref-for-selectordef-first-line\u2461"},{"id":"ref-for-selectordef-first-line\u2462"}],"title":"2.1.1. \nFinding the First Formatted Line"},{"refs":[{"id":"ref-for-selectordef-first-line\u2463"},{"id":"ref-for-selectordef-first-line\u2464"},{"id":"ref-for-selectordef-first-line\u2465"}],"title":"2.1.2. \nStyling the First Line Pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-line\u2466"},{"id":"ref-for-selectordef-first-line\u2467"},{"id":"ref-for-selectordef-first-line\u2468"},{"id":"ref-for-selectordef-first-line\u2460\u24ea"}],"title":"2.1.3. \nInheritance and the ::first-line Pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-line\u2460\u2460"},{"id":"ref-for-selectordef-first-line\u2460\u2461"}],"title":"2.2.1. \nFinding the First Letter Text"},{"refs":[{"id":"ref-for-selectordef-first-line\u2460\u2462"},{"id":"ref-for-selectordef-first-line\u2460\u2463"}],"title":"2.2.2. \nInheritance and Box Tree Structure of the ::first-letter Pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-line\u2460\u2464"}],"title":"3.6.3. \nText and Text Decorations"},{"refs":[{"id":"ref-for-selectordef-first-line\u2460\u2465"}],"title":"4.1. \nGenerated Content Pseudo-elements: ::before and ::after"},{"refs":[{"id":"ref-for-selectordef-first-line\u2460\u2466"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-line\u2460\u2467"}],"title":"4.3. \nPlaceholder Input: the ::placeholder pseudo-element"},{"refs":[{"id":"ref-for-selectordef-first-line\u2460\u2468"}],"title":"5. \nOverlapping Pseudo-element Interactions"},{"refs":[{"id":"ref-for-selectordef-first-line\u2461\u24ea"}],"title":"7. \nCompatibility Syntax"},{"refs":[{"id":"ref-for-selectordef-first-line\u2461\u2460"},{"id":"ref-for-selectordef-first-line\u2461\u2461"},{"id":"ref-for-selectordef-first-line\u2461\u2462"}],"title":"\nChanges"}],"url":"#selectordef-first-line"},
"selectordef-grammar-error": {"dfnID":"selectordef-grammar-error","dfnText":"::grammar-error","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-grammar-error"},{"id":"ref-for-selectordef-grammar-error\u2460"}],"title":"3.1. \nSelecting Highlighted Content: the ::selection,  ::target-text, ::spelling-error, and ::grammar-error pseudo-elements"},{"refs":[{"id":"ref-for-selectordef-grammar-error\u2461"}],"title":"3.6.1. \nBackgrounds"},{"refs":[{"id":"ref-for-selectordef-grammar-error\u2462"}],"title":"3.7. \nSecurity and Privacy Considerations"},{"refs":[{"id":"ref-for-selectordef-grammar-error\u2463"}],"title":"\nChanges"}],"url":"#selectordef-grammar-error"},
"selectordef-marker": {"dfnID":"selectordef-marker","dfnText":"::marker","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-marker"},{"id":"ref-for-selectordef-marker\u2460"},{"id":"ref-for-selectordef-marker\u2461"},{"id":"ref-for-selectordef-marker\u2462"},{"id":"ref-for-selectordef-marker\u2463"}],"title":"4.2. \nList Markers: the ::marker pseudo-element"},{"refs":[{"id":"ref-for-selectordef-marker\u2464"}],"title":"6.1. \nCSSPseudoElement Interface"},{"refs":[{"id":"ref-for-selectordef-marker\u2465"},{"id":"ref-for-selectordef-marker\u2466"},{"id":"ref-for-selectordef-marker\u2467"}],"title":"\nChanges"}],"url":"#selectordef-marker"},
"selectordef-placeholder": {"dfnID":"selectordef-placeholder","dfnText":"::placeholder","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-placeholder"},{"id":"ref-for-selectordef-placeholder\u2460"},{"id":"ref-for-selectordef-placeholder\u2461"},{"id":"ref-for-selectordef-placeholder\u2462"}],"title":"4.3. \nPlaceholder Input: the ::placeholder pseudo-element"}],"url":"#selectordef-placeholder"},
"selectordef-selection": {"dfnID":"selectordef-selection","dfnText":"::selection","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-selection"},{"id":"ref-for-selectordef-selection\u2460"}],"title":"3.1. \nSelecting Highlighted Content: the ::selection,  ::target-text, ::spelling-error, and ::grammar-error pseudo-elements"},{"refs":[{"id":"ref-for-selectordef-selection\u2461"},{"id":"ref-for-selectordef-selection\u2462"},{"id":"ref-for-selectordef-selection\u2463"}],"title":"3.5. \nCascading and Per-Element Highlight Styles"},{"refs":[{"id":"ref-for-selectordef-selection\u2464"}],"title":"3.6.1. \nBackgrounds"}],"url":"#selectordef-selection"},
"selectordef-spelling-error": {"dfnID":"selectordef-spelling-error","dfnText":"::spelling-error","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-spelling-error"},{"id":"ref-for-selectordef-spelling-error\u2460"}],"title":"3.1. \nSelecting Highlighted Content: the ::selection,  ::target-text, ::spelling-error, and ::grammar-error pseudo-elements"},{"refs":[{"id":"ref-for-selectordef-spelling-error\u2461"}],"title":"3.6.1. \nBackgrounds"},{"refs":[{"id":"ref-for-selectordef-spelling-error\u2462"}],"title":"3.7. \nSecurity and Privacy Considerations"},{"refs":[{"id":"ref-for-selectordef-spelling-error\u2463"}],"title":"\nChanges"}],"url":"#selectordef-spelling-error"},
"selectordef-target-text": {"dfnID":"selectordef-target-text","dfnText":"::target-text","external":false,"refSections":[{"refs":[{"id":"ref-for-selectordef-target-text"},{"id":"ref-for-selectordef-target-text\u2460"},{"id":"ref-for-selectordef-target-text\u2461"}],"title":"3.1. \nSelecting Highlighted Content: the ::selection,  ::target-text, ::spelling-error, and ::grammar-error pseudo-elements"},{"refs":[{"id":"ref-for-selectordef-target-text\u2462"}],"title":"3.6.1. \nBackgrounds"},{"refs":[{"id":"ref-for-selectordef-target-text\u2463"}],"title":"\nChanges"}],"url":"#selectordef-target-text"},
"tree-abiding": {"dfnID":"tree-abiding","dfnText":"Tree-abiding pseudo-elements","external":false,"refSections":[],"url":"#tree-abiding"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#csspseudoelement": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"CSSPseudoElement","type":"interface","url":"#csspseudoelement"},
"#dom-csspseudoelement-element": {"export":true,"for_":["CSSPseudoElement"],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"element","type":"attribute","url":"#dom-csspseudoelement-element"},
"#dom-csspseudoelement-type": {"export":true,"for_":["CSSPseudoElement"],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"type","type":"attribute","url":"#dom-csspseudoelement-type"},
"#dom-element-pseudo": {"export":true,"for_":["Element"],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"pseudo(type)","type":"method","url":"#dom-element-pseudo"},
"#dom-element-pseudo-type-type": {"export":true,"for_":["Element/pseudo(type)"],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"type","type":"argument","url":"#dom-element-pseudo-type-type"},
"#fictional-tag-sequence": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"fictional tag sequence","type":"dfn","url":"#fictional-tag-sequence"},
"#first-formatted-line": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"first formatted line","type":"dfn","url":"#first-formatted-line"},
"#first-letter-text": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"first-letter text","type":"dfn","url":"#first-letter-text"},
"#highlight-overlay": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"highlight overlay","type":"dfn","url":"#highlight-overlay"},
"#highlight-pseudo-element": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"highlight pseudo-element","type":"dfn","url":"#highlight-pseudo-element"},
"#selectordef-after": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::after","type":"selector","url":"#selectordef-after"},
"#selectordef-before": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::before","type":"selector","url":"#selectordef-before"},
"#selectordef-file-selector-button": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::file-selector-button","type":"selector","url":"#selectordef-file-selector-button"},
"#selectordef-first-letter": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::first-letter","type":"selector","url":"#selectordef-first-letter"},
"#selectordef-first-line": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::first-line","type":"selector","url":"#selectordef-first-line"},
"#selectordef-grammar-error": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::grammar-error","type":"selector","url":"#selectordef-grammar-error"},
"#selectordef-marker": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::marker","type":"selector","url":"#selectordef-marker"},
"#selectordef-placeholder": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::placeholder","type":"selector","url":"#selectordef-placeholder"},
"#selectordef-selection": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::selection","type":"selector","url":"#selectordef-selection"},
"#selectordef-spelling-error": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::spelling-error","type":"selector","url":"#selectordef-spelling-error"},
"#selectordef-target-text": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-pseudo","spec":"css-pseudo-4","status":"local","text":"::target-text","type":"selector","url":"#selectordef-target-text"},
"https://aomediacodec.github.io/av1-isobmff/#marker": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"av1-isobmff","spec":"av1-isobmff","status":"current","text":"marker","type":"dfn","url":"https://aomediacodec.github.io/av1-isobmff/#marker"},
"https://dom.spec.whatwg.org/#element": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://dom.spec.whatwg.org/#eventtarget": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"EventTarget","type":"interface","url":"https://dom.spec.whatwg.org/#eventtarget"},
"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-color": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-backgrounds","spec":"css-backgrounds-3","status":"current","text":"background-color","type":"property","url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-color"},
"https://drafts.csswg.org/css-backgrounds-3/#propdef-box-shadow": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-backgrounds","spec":"css-backgrounds-3","status":"current","text":"box-shadow","type":"property","url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-box-shadow"},
"https://drafts.csswg.org/css-break-4/#box-fragment": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-break","spec":"css-break-4","status":"current","text":"box fragment","type":"dfn","url":"https://drafts.csswg.org/css-break-4/#box-fragment"},
"https://drafts.csswg.org/css-cascade-5/#cascade-origin-ua": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-cascade","spec":"css-cascade-5","status":"current","text":"ua style sheet","type":"dfn","url":"https://drafts.csswg.org/css-cascade-5/#cascade-origin-ua"},
"https://drafts.csswg.org/css-cascade-5/#css-inheritance": {"export":true,"for_":["CSS"],"level":"5","normative":true,"shortname":"css-cascade","spec":"css-cascade-5","status":"current","text":"inheritance","type":"dfn","url":"https://drafts.csswg.org/css-cascade-5/#css-inheritance"},
"https://drafts.csswg.org/css-cascade-5/#inherited-property": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-cascade","spec":"css-cascade-5","status":"current","text":"inherited property","type":"dfn","url":"https://drafts.csswg.org/css-cascade-5/#inherited-property"},
"https://drafts.csswg.org/css-cascade-5/#initial-value": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-cascade","spec":"css-cascade-5","status":"current","text":"initial value","type":"dfn","url":"https://drafts.csswg.org/css-cascade-5/#initial-value"},
"https://drafts.csswg.org/css-color-4/#propdef-opacity": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"opacity","type":"property","url":"https://drafts.csswg.org/css-color-4/#propdef-opacity"},
"https://drafts.csswg.org/css-color-4/#valdef-color-transparent": {"export":true,"for_":["<color>"],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"transparent","type":"value","url":"https://drafts.csswg.org/css-color-4/#valdef-color-transparent"},
"https://drafts.csswg.org/css-content-3/#propdef-content": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-content","spec":"css-content-3","status":"current","text":"content","type":"property","url":"https://drafts.csswg.org/css-content-3/#propdef-content"},
"https://drafts.csswg.org/css-content-3/#valdef-content-none": {"export":true,"for_":["content"],"level":"3","normative":true,"shortname":"css-content","spec":"css-content-3","status":"current","text":"none","type":"value","url":"https://drafts.csswg.org/css-content-3/#valdef-content-none"},
"https://drafts.csswg.org/css-display-4/#block-container": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"block container","type":"dfn","url":"https://drafts.csswg.org/css-display-4/#block-container"},
"https://drafts.csswg.org/css-display-4/#block-formatting-context": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"block formatting context","type":"dfn","url":"https://drafts.csswg.org/css-display-4/#block-formatting-context"},
"https://drafts.csswg.org/css-display-4/#block-level": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"block-level","type":"dfn","url":"https://drafts.csswg.org/css-display-4/#block-level"},
"https://drafts.csswg.org/css-display-4/#in-flow": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"in-flow","type":"dfn","url":"https://drafts.csswg.org/css-display-4/#in-flow"},
"https://drafts.csswg.org/css-display-4/#inline-box": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"inline box","type":"dfn","url":"https://drafts.csswg.org/css-display-4/#inline-box"},
"https://drafts.csswg.org/css-display-4/#inline-formatting-context": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"inline formatting context","type":"dfn","url":"https://drafts.csswg.org/css-display-4/#inline-formatting-context"},
"https://drafts.csswg.org/css-display-4/#inline-level": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"inline-level","type":"dfn","url":"https://drafts.csswg.org/css-display-4/#inline-level"},
"https://drafts.csswg.org/css-display-4/#inline-level-box": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"inline-level box","type":"dfn","url":"https://drafts.csswg.org/css-display-4/#inline-level-box"},
"https://drafts.csswg.org/css-display-4/#propdef-display": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"display","type":"property","url":"https://drafts.csswg.org/css-display-4/#propdef-display"},
"https://drafts.csswg.org/css-display-4/#valdef-display-inline": {"export":true,"for_":["display","<display-outside>"],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"inline","type":"value","url":"https://drafts.csswg.org/css-display-4/#valdef-display-inline"},
"https://drafts.csswg.org/css-display-4/#valdef-display-list-item": {"export":true,"for_":["display","<display-list-item>"],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"list-item","type":"value","url":"https://drafts.csswg.org/css-display-4/#valdef-display-list-item"},
"https://drafts.csswg.org/css-inline-3/#line-box": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-inline","spec":"css-inline-3","status":"current","text":"line box","type":"dfn","url":"https://drafts.csswg.org/css-inline-3/#line-box"},
"https://drafts.csswg.org/css-inline-3/#propdef-initial-letter": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-inline","spec":"css-inline-3","status":"current","text":"initial-letter","type":"property","url":"https://drafts.csswg.org/css-inline-3/#propdef-initial-letter"},
"https://drafts.csswg.org/css-lists-3/#list-item": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-lists","spec":"css-lists-3","status":"current","text":"list item","type":"dfn","url":"https://drafts.csswg.org/css-lists-3/#list-item"},
"https://drafts.csswg.org/css-lists-3/#marker": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-lists","spec":"css-lists-3","status":"current","text":"marker box","type":"dfn","url":"https://drafts.csswg.org/css-lists-3/#marker"},
"https://drafts.csswg.org/css-lists-3/#propdef-list-style-position": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-lists","spec":"css-lists-3","status":"current","text":"list-style-position","type":"property","url":"https://drafts.csswg.org/css-lists-3/#propdef-list-style-position"},
"https://drafts.csswg.org/css-multicol-1/#multi-column-container": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-multicol","spec":"css-multicol-1","status":"current","text":"multi-column container","type":"dfn","url":"https://drafts.csswg.org/css-multicol-1/#multi-column-container"},
"https://drafts.csswg.org/css-ruby-1/#propdef-ruby-position": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-ruby","spec":"css-ruby-1","status":"current","text":"ruby-position","type":"property","url":"https://drafts.csswg.org/css-ruby-1/#propdef-ruby-position"},
"https://drafts.csswg.org/css-syntax-3/#css-parse-something-according-to-a-css-grammar": {"export":true,"for_":["CSS"],"level":"3","normative":true,"shortname":"css-syntax","spec":"css-syntax-3","status":"current","text":"parse","type":"dfn","url":"https://drafts.csswg.org/css-syntax-3/#css-parse-something-according-to-a-css-grammar"},
"https://drafts.csswg.org/css-tables-3/#table-wrapper-box": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-tables","spec":"css-tables-3","status":"current","text":"table wrapper box","type":"dfn","url":"https://drafts.csswg.org/css-tables-3/#table-wrapper-box"},
"https://drafts.csswg.org/css-text-3/#propdef-text-align": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-text","spec":"css-text-3","status":"current","text":"text-align","type":"property","url":"https://drafts.csswg.org/css-text-3/#propdef-text-align"},
"https://drafts.csswg.org/css-text-4/#typographic-letter-unit": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-text","spec":"css-text-4","status":"current","text":"typographic letter unit","type":"dfn","url":"https://drafts.csswg.org/css-text-4/#typographic-letter-unit"},
"https://drafts.csswg.org/css-text-decor-4/#propdef-text-decoration": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-text-decor","spec":"css-text-decor-4","status":"current","text":"text-decoration","type":"property","url":"https://drafts.csswg.org/css-text-decor-4/#propdef-text-decoration"},
"https://drafts.csswg.org/css-text-decor-4/#propdef-text-emphasis": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-text-decor","spec":"css-text-decor-4","status":"current","text":"text-emphasis","type":"property","url":"https://drafts.csswg.org/css-text-decor-4/#propdef-text-emphasis"},
"https://drafts.csswg.org/css-text-decor-4/#propdef-text-emphasis-position": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-text-decor","spec":"css-text-decor-4","status":"current","text":"text-emphasis-position","type":"property","url":"https://drafts.csswg.org/css-text-decor-4/#propdef-text-emphasis-position"},
"https://drafts.csswg.org/css-text-decor-4/#propdef-text-shadow": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-text-decor","spec":"css-text-decor-4","status":"current","text":"text-shadow","type":"property","url":"https://drafts.csswg.org/css-text-decor-4/#propdef-text-shadow"},
"https://drafts.csswg.org/css-text-decor-4/#valdef-text-decoration-line-grammar-error": {"export":true,"for_":["text-decoration-line"],"level":"4","normative":true,"shortname":"css-text-decor","spec":"css-text-decor-4","status":"current","text":"grammar-error","type":"value","url":"https://drafts.csswg.org/css-text-decor-4/#valdef-text-decoration-line-grammar-error"},
"https://drafts.csswg.org/css-text-decor-4/#valdef-text-decoration-line-spelling-error": {"export":true,"for_":["text-decoration-line"],"level":"4","normative":true,"shortname":"css-text-decor","spec":"css-text-decor-4","status":"current","text":"spelling-error","type":"value","url":"https://drafts.csswg.org/css-text-decor-4/#valdef-text-decoration-line-spelling-error"},
"https://drafts.csswg.org/css-ui-4/#propdef-outline": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-ui","spec":"css-ui-4","status":"current","text":"outline","type":"property","url":"https://drafts.csswg.org/css-ui-4/#propdef-outline"},
"https://drafts.csswg.org/css-variables-2/#custom-property": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"css-variables","spec":"css-variables-2","status":"current","text":"custom property","type":"dfn","url":"https://drafts.csswg.org/css-variables-2/#custom-property"},
"https://drafts.csswg.org/css-writing-modes-3/#propdef-direction": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-3","status":"current","text":"direction","type":"property","url":"https://drafts.csswg.org/css-writing-modes-3/#propdef-direction"},
"https://drafts.csswg.org/css-writing-modes-3/#propdef-unicode-bidi": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-3","status":"current","text":"unicode-bidi","type":"property","url":"https://drafts.csswg.org/css-writing-modes-3/#propdef-unicode-bidi"},
"https://drafts.csswg.org/css-writing-modes-4/#block-axis": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-4","status":"current","text":"block axis","type":"dfn","url":"https://drafts.csswg.org/css-writing-modes-4/#block-axis"},
"https://drafts.csswg.org/css-writing-modes-4/#propdef-text-orientation": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-4","status":"current","text":"text-orientation","type":"property","url":"https://drafts.csswg.org/css-writing-modes-4/#propdef-text-orientation"},
"https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-4","status":"current","text":"writing-mode","type":"property","url":"https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode"},
"https://drafts.csswg.org/css-writing-modes-4/#writing-mode": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-4","status":"current","text":"writing mode","type":"dfn","url":"https://drafts.csswg.org/css-writing-modes-4/#writing-mode"},
"https://drafts.csswg.org/css2/#selectordef-after": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css22","status":"current","text":":after","type":"selector","url":"https://drafts.csswg.org/css2/#selectordef-after"},
"https://drafts.csswg.org/cssom-1/#cssomstring": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"cssom","spec":"cssom-1","status":"current","text":"CSSOMString","type":"interface","url":"https://drafts.csswg.org/cssom-1/#cssomstring"},
"https://drafts.csswg.org/cssom-1/#cssstyledeclaration": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"cssom","spec":"cssom-1","status":"current","text":"CSSStyleDeclaration","type":"interface","url":"https://drafts.csswg.org/cssom-1/#cssstyledeclaration"},
"https://drafts.csswg.org/selectors-3/#x": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"selectors","spec":"selectors-3","status":"current","text":"*","type":"selector","url":"https://drafts.csswg.org/selectors-3/#x"},
"https://drafts.csswg.org/selectors-4/#originating-element": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"originating element","type":"dfn","url":"https://drafts.csswg.org/selectors-4/#originating-element"},
"https://drafts.csswg.org/selectors-4/#placeholder-shown-pseudo": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":":placeholder-shown","type":"selector","url":"https://drafts.csswg.org/selectors-4/#placeholder-shown-pseudo"},
"https://drafts.csswg.org/selectors-4/#pseudo-element": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"pseudo-element","type":"dfn","url":"https://drafts.csswg.org/selectors-4/#pseudo-element"},
"https://drafts.csswg.org/selectors-4/#selector": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"selector","type":"dfn","url":"https://drafts.csswg.org/selectors-4/#selector"},
"https://drafts.csswg.org/selectors-4/#target-pseudo": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":":target","type":"selector","url":"https://drafts.csswg.org/selectors-4/#target-pseudo"},
"https://drafts.csswg.org/selectors-4/#typedef-pseudo-element-selector": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"<pseudo-element-selector>","type":"type","url":"https://drafts.csswg.org/selectors-4/#typedef-pseudo-element-selector"},
"https://drafts.fxtf.org/fill-stroke-3/#propdef-fill-color": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"fill-stroke","spec":"fill-stroke-3","status":"current","text":"fill-color","type":"property","url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-fill-color"},
"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-color": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"fill-stroke","spec":"fill-stroke-3","status":"current","text":"stroke-color","type":"property","url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-color"},
"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"fill-stroke","spec":"fill-stroke-3","status":"current","text":"stroke-width","type":"property","url":"https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width"},
"https://url.spec.whatwg.org/#concept-url-fragment": {"export":true,"for_":["url"],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"fragment","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-fragment"},
"https://webidl.spec.whatwg.org/#Exposed": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#this": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"this","type":"dfn","url":"https://webidl.spec.whatwg.org/#this"},
"https://www.w3.org/TR/CSS21/selector.html#x22": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css2","status":"current","text":"pseudo-elements","type":"dfn","url":"https://www.w3.org/TR/CSS21/selector.html#x22"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>
<script>/* Boilerplate: script-wpt */
"use strict";
{
let wptData = {
"paths": ["/css/css-pseudo/"],
};

document.addEventListener("DOMContentLoaded", async ()=>{
    if(wptData.paths.length == 0) return;

    const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
    const runs = await (await fetch(runsUrl)).json();

    let testResults = [];
    for(const pathPrefix of wptData.paths) {
        const pathResults = await (await fetch("https://wpt.fyi/api/search", {
            method:"POST",
            headers:{
                "Content-Type":"application/json",
            },
            body: JSON.stringify({
                "run_ids": runs.map(x=>x.id),
                "query": {"path": pathPrefix},
            })
        })).json();
        testResults = testResults.concat(pathResults.results);
    }

    const browsers = runs.map(x=>({name:x.browser_name, version:x.browser_version, passes:0, total: 0}));
    const resultsFromPath = new Map(testResults.map(result=>{
        const testPath = result.test;
        const passes = result.legacy_status.map(x=>[x.passes, x.total]);
        return [testPath, passes];
    }));
    const seenTests = new Set();
    document.querySelectorAll(".wpt-name").forEach(nameEl=>{
        const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
        if(!passData) {
            console.log("Couldn't find test in results:", nameEl);
            return
        }
        const numTests = passData[0][1];
        if(numTests > 1) {
            nameEl.insertAdjacentElement("beforeend",
                mk.small({}, ` (${numTests} tests)`));
        }
        if(passData == undefined) return;
        const resultsEl = mk.span({"class":"wpt-results"},
            ...passData.map((p,i) => mk.span(
            {
                "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                "class": "wpt-result",
                "style": `background: conic-gradient(forestgreen ${p[0]/p[1]*360}deg, darkred 0deg);`,
            })),
        );
        nameEl.insertAdjacentElement("afterend", resultsEl);

        // Only update the summary pass/total count if we haven't seen this
        // test before, to support authors listing the same test multiple times
        // in a spec.
        if (!seenTests.has(nameEl.getAttribute("title"))) {
            seenTests.add(nameEl.getAttribute("title"));
            passData.forEach((p,i) => {
                browsers[i].passes += p[0];
                browsers[i].total += p[1];
            });
        }
    });
    const overview = document.querySelector(".wpt-overview");
    if(overview) {
        overview.appendChild(mk.ul({}, ...browsers.map(formatWptResult)));
        document.head.appendChild(mk.style({},
            `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
    }
});

function formatWptResult({name, version, passes, total}) {
    const passRate = passes/total;
    let passClass = "";
    if(passRate == 0)      passClass = "passes-none";
    else if(passRate < .2) passClass = "passes-hardly";
    else if(passRate < .4) passClass = "passes-a-few";
    else if(passRate < .6) passClass = "passes-half";
    else if(passRate < .8) passClass = "passes-lots";
    else if(passRate < 1)  passClass = "passes-most";
    else                   passClass = "passes-all";

    name = name[0].toUpperCase() + name.slice(1);
    const shortVersion = /^\d+/.exec(version);
    const icon = []

    if(name == "Chrome") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/chrome_64x64.png"}));
    if(name == "Edge") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/edge_64x64.png"}));
    if(name == "Safari") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/safari_64x64.png"}));
    if(name == "Firefox") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/firefox_64x64.png"}));

    return mk.li({"class":passClass},
        mk.nobr({'class':'browser'}, ...icon, ` ${name} ${shortVersion}`),
        mk.br(),
        mk.nobr({'class':'pass-rate'}, `${passes}/${total}`)
    );
}
}
</script>