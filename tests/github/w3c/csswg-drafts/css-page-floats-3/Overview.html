<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>CSS Page Floats</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/TR/css-page-floats-3/" rel="canonical">
  <link href="https://drafts.csswg.org/csslogo.ico" rel="icon">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-wpt */
:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">CSS Page Floats</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://drafts.csswg.org/css-page-floats/">https://drafts.csswg.org/css-page-floats/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/css-page-floats-3/">https://www.w3.org/TR/css-page-floats-3/</a>
      <dt>Previous Versions:
      <dd><a href="https://www.w3.org/TR/2015/WD-css-page-floats-3-20150915/" rel="prev">https://www.w3.org/TR/2015/WD-css-page-floats-3-20150915/</a>
      <dt>Feedback:
      <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-page-floats-3">CSSWG Issues Repository</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="76051"><a class="p-name fn u-email email" href="mailto:johanneswilm@vivliostyle.com">Johannes Wilm</a> (<span class="p-org org">Vivliostyle</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="43241"><a class="p-name fn u-url url" href="https://florian.rivoal.net">Florian Rivoal</a> (<span class="p-org org">Invited Expert</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="81117"><a class="p-name fn u-url url" href="https://rachelandrew.co.uk">Rachel Andrew</a> (<span class="p-org org">Invited Expert</span>)
      <dt class="editor">Former Editor:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:howcome@opera.com">Håkon Wium Lie</a> (<span class="p-org org">Opera Software</span>)
      <dt>Suggest an Edit for this Spec:
      <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-page-floats-3/Overview.bs">GitHub Editor</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document describes floats that move to the top or bottom of content
passages. This feature has traditionally been used in print
publications in which figures and photos are moved to the top or bottom
of columns or pages, along with their captions.
This draft describes how to achieve this effects for floats within pages,
columns, regions and elements.</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a> is a language for describing the rendering of structured documents
(such as HTML and XML)
on screen, on paper, etc. 
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p>Please send feedback
	by <a href="https://github.com/w3c/csswg-drafts/issues">filing issues in GitHub</a> (preferred),
	including the spec code “css-page-floats” in the title, like this:
	“[css-page-floats] <i>…summary of comment…</i>”.
	All issues and comments are <a href="https://lists.w3.org/Archives/Public/public-css-archive/">archived</a>.
	Alternately, feedback can be sent to the (<a href="https://lists.w3.org/Archives/Public/www-style/">archived</a>) public mailing list <a href="mailto:www-style@w3.org?Subject=%5Bcss-page-floats%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
   <p>Some of the features in this draft were previously published in <cite>CSS Generated Content for Paged Media Module</cite> <a data-link-type="biblio" href="#biblio-css3gcpm" title="CSS Generated Content for Paged Media Module">[CSS3GCPM]</a>.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#overview"><span class="secno">1</span> <span class="content">Overview</span></a>
     <ol class="toc">
      <li><a href="#values"><span class="secno">1.1</span> <span class="content">Value Definitions</span></a>
     </ol>
    <li><a href="#terms"><span class="secno">2</span> <span class="content"> Terminology</span></a>
    <li>
     <a href="#floating"><span class="secno">3</span> <span class="content"> Floating to the inline-start/inline-end and block-start/block-end</span></a>
     <ol class="toc">
      <li><a href="#float-reference-property"><span class="secno">3.1</span> <span class="content">The <span class="property">float-reference</span> property</span></a>
      <li><a href="#float-property"><span class="secno">3.2</span> <span class="content">The <span class="property">float</span> property</span></a>
     </ol>
    <li><a href="#clearing_page_floats"><span class="secno">4</span> <span class="content"> The <span class="property">clear</span> property</span></a>
    <li>
     <a href="#deferring_floats"><span class="secno">5</span> <span class="content">Deferring page floats</span></a>
     <ol class="toc">
      <li><a href="#float-defer-property"><span class="secno">5.1</span> <span class="content">The <span class="property">float-defer</span> property</span></a>
     </ol>
    <li><a href="#wrapping-around-page-floats"><span class="secno">6</span> <span class="content">Wrapping around page floats</span></a>
    <li><a href="#the-float_offset-property"><span class="secno">7</span> <span class="content">The <span class="property">float-offset</span> property</span></a>
    <li>
     <a href="#page-float-placement"><span class="secno">8</span> <span class="content">Page float placement</span></a>
     <ol class="toc">
      <li><a href="#float-reference-growth"><span class="secno">8.1</span> <span class="content">Float reference growth</span></a>
      <li><a href="#float-stacking"><span class="secno">8.2</span> <span class="content">Rules for page float stacking</span></a>
     </ol>
    <li>
     <a href="#relation_to_absolutely_positioned_exclusions"><span class="secno">9</span> <span class="content"> Floats and absolutely positioned exclusions</span></a>
     <ol class="toc">
      <li><a href="#inline_floats_and_absolutely_positioned_exclusions"><span class="secno">9.1</span> <span class="content"> Differences between inline floats and absolutely positioned elements</span></a>
     </ol>
    <li><a href="#overconstrained-page-floats"><span class="secno">10</span> <span class="content">Overconstrained floats</span></a>
    <li><a href="#acks"><span class="secno"></span> <span class="content"> Acknowledgments</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> Document conventions</span></a>
      <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content"> Conformance classes</span></a>
      <li>
       <a href="#w3c-partial"><span class="secno"></span> <span class="content"> Partial implementations</span></a>
       <ol class="toc">
        <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span class="content"> Implementations of Unstable and Proprietary Features</span></a>
       </ol>
      <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> Non-experimental implementations</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#property-index"><span class="secno"></span> <span class="content">Property Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="overview"><span class="secno">1. </span><span class="content">Overview</span><a class="self-link" href="#overview"></a></h2>
   <p><em>This section is not normative.</em></p>
   <p>This specification adds new keywords on the <a class="property css" data-link-type="property" href="#propdef-float" id="ref-for-propdef-float">float</a> property.</p>
   <p>This document allows to specify whether a <a data-link-type="dfn" href="#float" id="ref-for-float">float</a> floats to align with a <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference">float reference</a> inline box, column, region or page. In the case of floats
  with a reference <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container">fragmentation container</a>, placement can be deferred to a
  subsequent <span id="ref-for-fragmentation-container①">fragmentation container</span> with the <em>float-defer</em> properties.</p>
   <p>New values on the <a class="property css" data-link-type="property" href="#propdef-clear" id="ref-for-propdef-clear">clear</a> property add further ways of refining layouts.</p>
   <p>The way contents wrap around floats can be controlled by changing the value of
  the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-exclusions-1/#propdef-wrap-flow" id="ref-for-propdef-wrap-flow">wrap-flow</a> property which initially is set to <a class="property css" data-link-type="property">both</a> for page floats.</p>
   <p class="issue" id="issue-f0d0f60c"><a class="self-link" href="#issue-f0d0f60c"></a> Page floats as defined here work with different types of fragmentation types
    (columns, regions, pages) as well as container elements. The specification
    is no longer specific to print or to pages.
    At the same time, inline floats and page floats differ in many ways, and it may
    (or may not) be a good idea to separate the two entirely.
    Therefore, the name <em>CSS Page Floats</em> should probably be replaced with
    a more appropriate name. </p>
   <h3 class="heading settled" data-level="1.1" id="values"><span class="secno">1.1. </span><span class="content">Value Definitions</span><a class="self-link" href="#values"></a></h3>
   <p>This specification follows the <a href="https://www.w3.org/TR/CSS2/about.html#property-defs">CSS property definition conventions</a> from <a data-link-type="biblio" href="#biblio-css2" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a> using the <a href="https://www.w3.org/TR/css-values-3/#value-defs">value definition syntax</a> from <a data-link-type="biblio" href="#biblio-css-values-3" title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</a>.
  Value types not defined in this specification are defined in CSS Values &amp; Units <span title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</span>.
  Combination with other CSS modules may expand the definitions of these value types.</p>
   <p>In addition to the property-specific values listed in their definitions,
  all properties defined in this specification
  also accept the <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#css-wide-keywords" id="ref-for-css-wide-keywords">CSS-wide keywords</a> as their property value.
  For readability they have not been repeated explicitly.</p>
   <h2 class="heading settled" data-level="2" id="terms"><span class="secno">2. </span><span class="content"> Terminology</span><a class="self-link" href="#terms"></a></h2>
   <dl>
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="float">Float</dfn> 
    <dd> An element which has float set to something else than none. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="inline-float">Inline float</dfn> 
    <dd> A float which has float set to inline. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="page-float">Page float</dfn> 
    <dd> A float which has float set to something else than inline or none. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="float-block-formatting-context">Float block formatting context</dfn> 
    <dd> The block formatting context which is generated by a float and which contains
      its contents. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="float-anchor">Float anchor</dfn> 
    <dd> The float anchor is the point in the flow where the float had appeared had
      it not been a float and instead had been an empty inline element with no
      margins, borders or padding. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="float-containing-block-formatting-context">Float containing block formatting context</dfn> 
    <dd> The block formatting context inside of which an float is embedded. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="initial-float-reference">Initial float reference</dfn> 
    <dd> The entity to which the float is aligned initially, before float
        placement takes place. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="float-reference">Float reference</dfn> 
    <dd> The entity to which the float is aligned. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="not-overlapping">Not overlapping</dfn> 
    <dd> Two elements are not overlapping if the margin box of one element is not
      overlapping the margin box of the other element. 
   </dl>
   <h2 class="heading settled" data-level="3" id="floating"><span class="secno">3. </span><span class="content"> Floating to the inline-start/inline-end and block-start/block-end</span><a class="self-link" href="#floating"></a></h2>
   <p> Floating elements can float to the start or end of the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor">float anchor</a>’s line or
    block, specified by the <a class="property css" data-link-type="property" href="#propdef-float" id="ref-for-propdef-float①">float</a> attribute. The floats are aligning to the start
    or end of a <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference①">float reference</a>, specified by the <a class="property css" data-link-type="property" href="#propdef-float-reference" id="ref-for-propdef-float-reference">float-reference</a> attribute. The <span id="ref-for-float-reference②">float reference</span> can be the <span id="ref-for-float-anchor①">float anchor</span>’s line box, column, region or page. </p>
   <h3 class="heading settled" data-level="3.1" id="float-reference-property"><span class="secno">3.1. </span><span class="content">The <a class="property css" data-link-type="property" href="#propdef-float-reference" id="ref-for-propdef-float-reference①">float-reference</a> property</span><a class="self-link" href="#float-reference-property"></a></h3>
   <table class="def propdef" data-link-for-hint="float-reference">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-float-reference">float-reference</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">inline <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one">|</a> column <span id="ref-for-comb-one①">|</span> region <span id="ref-for-comb-one②">|</span> page 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>inline 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td>all elements. 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>specified keyword 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>discrete 
   </table>
   <dl>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float-reference" data-dfn-type="value" data-export id="valdef-float-reference-inline">inline</dfn> 
    <dd>
      The <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference③">float reference</a> is the line box of the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor②">float anchor</a>. 
     <p>The <a data-link-type="dfn" href="#float-containing-block-formatting-context" id="ref-for-float-containing-block-formatting-context">float containing block formatting context</a> is the same as that of the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor③">float anchor</a>.</p>
     <p>The float is an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float">inline float</a>.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float-reference" data-dfn-type="value" data-export id="valdef-float-reference-column">column</dfn> 
    <dd>
      The <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference④">float reference</a> is the column in a multi column environment in
      which the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor④">float anchor</a> is placed. If the <span id="ref-for-float-anchor⑤">float anchor</span> is not
      inside a column, the <span id="ref-for-float-reference⑤">float reference</span> is the line box of the <span id="ref-for-float-anchor⑥">float
      anchor</span>. 
     <p>The <a data-link-type="dfn" href="#float-containing-block-formatting-context" id="ref-for-float-containing-block-formatting-context①">float containing block formatting context</a> is a new block formatting
      context with the same dimensions and placement as the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference⑥">float reference</a>.</p>
     <p>The float is a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float">page float</a>.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float-reference" data-dfn-type="value" data-export id="valdef-float-reference-region">region</dfn> 
    <dd>
      The <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference⑦">float reference</a> is the region in a region-chain within which the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor⑦">float anchor</a> is placed. If the <span id="ref-for-float-anchor⑧">float anchor</span> is not inside a
      region, the <span id="ref-for-float-reference⑧">float reference</span> is the line box of the <span id="ref-for-float-anchor⑨">float
      anchor</span>. 
     <p>The <a data-link-type="dfn" href="#float-containing-block-formatting-context" id="ref-for-float-containing-block-formatting-context②">float containing block formatting context</a> is a new block formatting
      context with the same dimensions and placement as the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference⑨">float reference</a>.</p>
     <p>The float is a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float①">page float</a>.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float-reference" data-dfn-type="value" data-export id="valdef-float-reference-page">page</dfn> 
    <dd>
      The <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference①⓪">float reference</a> of the float is the page within which the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor①⓪">float
      anchor</a> is placed. If the <span id="ref-for-float-anchor①①">float anchor</span> is not inside a page, the <span id="ref-for-float-reference①①">float reference</span> is the line box of the <span id="ref-for-float-anchor①②">float anchor</span>. 
     <p>The <a data-link-type="dfn" href="#float-containing-block-formatting-context" id="ref-for-float-containing-block-formatting-context③">float containing block formatting context</a> is a new block formatting
      context with the same dimensions and placement as the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference①②">float reference</a>.</p>
     <p>The float is a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float②">page float</a>.</p>
   </dl>
   <div class="issue" id="issue-08bce5eb"><a class="self-link" href="#issue-08bce5eb"></a> The <a data-link-type="dfn" href="#float-containing-block-formatting-context" id="ref-for-float-containing-block-formatting-context④">float containing block formatting context</a> having the same dimensions
    as the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference①③">float reference</a> means that all floats that are not inline floats
    cannot move outside of their float references. Is this wanted? </div>
   <div class="issue" id="issue-f5d44217">
    <a class="self-link" href="#issue-f5d44217"></a> It is not possible to specify a block element which element to use as the
    reference element. This has been requested. 
    <p>Maybe something like:</p>
<pre><code>&lt;style>
.float {
float-reference: float-container;
}

#container {
float-container: true;
}
&lt;/style>

&lt;div id="container">
&lt;p>First paragraph&lt;span class="float">FLOAT&lt;/span>&lt;/p>

&lt;p>Second paragraph
&lt;span class="inline-block">[&lt;span class="float">FLOAT&lt;/span>] &lt;/span>
And some more text&lt;/p>
&lt;/div>
</code></pre>
    <p>This should float both floats with reference to the &lt;div id="container">
    element, rather than the &lt;P> and inline &lt;SPAN> elements.</p>
   </div>
   <h3 class="heading settled" data-level="3.2" id="float-property"><span class="secno">3.2. </span><span class="content">The <a class="property css" data-link-type="property" href="#propdef-float" id="ref-for-propdef-float②">float</a> property</span><a class="self-link" href="#float-property"></a></h3>
   <table class="def propdef" data-link-for-hint="float">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-float">float</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">block-start <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> block-end <span id="ref-for-comb-one④">|</span> inline-start <span id="ref-for-comb-one⑤">|</span> inline-end <span id="ref-for-comb-one⑥">|</span> snap-block <span id="ref-for-comb-one⑦">|</span> <a class="production css" data-link-type="function" href="#funcdef-float-snap-block" id="ref-for-funcdef-float-snap-block">&lt;snap-block()></a> <span id="ref-for-comb-one⑧">|</span> snap-inline <span id="ref-for-comb-one⑨">|</span> <a class="production css" data-link-type="function" href="#funcdef-float-snap-inline" id="ref-for-funcdef-float-snap-inline">&lt;snap-inline()></a> <span id="ref-for-comb-one①⓪">|</span> left <span id="ref-for-comb-one①①">|</span> right <span id="ref-for-comb-one①②">|</span> top <span id="ref-for-comb-one①③">|</span> bottom <span id="ref-for-comb-one①④">|</span> none
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td>all elements.
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>by computed value type
   </table>
   <dl>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-inline-start">inline-start</dfn> 
    <dd>
      If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference①④">float reference</a> is a line box, the element generates a box that
    is floated to the line-start outer edge of the <span id="ref-for-float-reference①⑤">float reference</span> and
    content flows on the line-end side of the box. 
     <p>If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference①⑥">float reference</a> is not a line box, the element generates a box
    that is floated to the line-start and block-start outer edges of the <span id="ref-for-float-reference①⑦">float
    reference</span>.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-inline-end">inline-end</dfn> 
    <dd>
      If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference①⑧">float reference</a> is a line box, the element generates a box that
    is floated to the line-ebd  outer edge of the <span id="ref-for-float-reference①⑨">float reference</span> and
    content flows on the line-start side of the box. 
     <p>If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference②⓪">float reference</a> is not a line box, the element generates a box
    that is floated to the line-end and block-end outer edges of the <span id="ref-for-float-reference②①">float
    reference</span>.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-block-start">block-start</dfn> 
    <dd>
      If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference②②">float reference</a> is a line box, block-start behaves like
    inline-start. 
     <p>If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference②③">float reference</a> is not a line box, the element generates a box
    that is floated to the block-start and line-start outer edges of the <span id="ref-for-float-reference②④">float
    reference</span>.</p>
     <p>The initial value of the <a data-link-type="dfn" href="https://www.w3.org/TR/CSS22/visudet.html#propdef-max-width" id="ref-for-propdef-max-width">max-width</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/CSS22/visudet.html#propdef-max-height" id="ref-for-propdef-max-height">max-height</a> property that
    refers to the <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#inline-size" id="ref-for-inline-size">inline size</a> of the float is '100%'.</p>
     <p>Content flows on the block-end side of the box.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-block-end">block-end</dfn> 
    <dd>
      If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference②⑤">float reference</a> is a line box, block-end behaves like inline-end. 
     <p>If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference②⑥">float reference</a> is not a line box, the element generates a box
    that is floated to the block-end and line-end outer edges of the <span id="ref-for-float-reference②⑦">float
    reference</span>.</p>
     <p>The initial value of the <a data-link-type="dfn" href="https://www.w3.org/TR/CSS22/visudet.html#propdef-max-width" id="ref-for-propdef-max-width①">max-width</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/CSS22/visudet.html#propdef-max-height" id="ref-for-propdef-max-height①">max-height</a> property that
    refers to the <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#inline-size" id="ref-for-inline-size①">inline size</a> of the float is '100%'.</p>
     <p>Content flows on the block-start side of the box.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-left">left</dfn> 
    <dd>
      If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference②⑧">float reference</a> is a line box, behaves like inline-start or
    inline-end, whichever corresponds to line-left for the float reference. 
     <p>Otherwise, behaves like block-end, inline-start or inline-end depending on
    the float containing block’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction">direction</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode">writing-mode</a>.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-right">right</dfn> 
    <dd>
      If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference②⑨">float reference</a> is a line box, behaves like inline-start or
    inline-end, whichever corresponds to line-right for the float reference. 
     <p>Otherwise, behaves like block-start, inline-start or inline-end depending on
    the float containing block’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction①">direction</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode①">writing-mode</a>.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-top">top</dfn> 
    <dd> Behave like block-start or inline-start depending on the float
    containing block’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction②">direction</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode②">writing-mode</a>. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-bottom">bottom</dfn> 
    <dd> Behave like block-end or inline-end depending on the float
    containing block’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction③">direction</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode③">writing-mode</a>. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="function" data-export id="funcdef-float-snap-block">snap-block()</dfn> 
    <dd>
      The <a class="css" data-link-type="maybe" href="#funcdef-float-snap-block" id="ref-for-funcdef-float-snap-block①">snap-block()</a> function is defined as: 
<pre class="prod">snap-block() = snap-block( <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-comma" id="ref-for-comb-comma">,</a> [ start <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑤">|</a> end <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑥">|</a> near ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a> )
</pre>
     <p>Has no effect if the element is an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float①">inline float</a>.</p>
     <p>If the element is a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float③">page float</a>, it makes the element float to the
      start or the end of the block if it naturally appears within a certain
      distance from either one. The length value(s) specifies the maximum
      distance from the start/end that an element must be within in order to be
      floated; one length value specifies the distance from both the start and
      the end, two length values specify the distance from the start and end,
      respectively.</p>
     <p>The optional keyword value specifies where the element is floated: start,
      end, or the nearest of the two. The initial value is <a class="property css" data-link-type="property">near</a>. If <span class="property">near</span> is in effect and the element is within the specified distance both from
      the start and the end, end wins.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-snap-block">snap-block</dfn> 
    <dd>Behaves as <code>snap-block(2em, near)</code> 
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="function" data-export id="funcdef-float-snap-inline">snap-inline()</dfn> 
    <dd>
      The <a class="css" data-link-type="maybe" href="#funcdef-float-snap-inline" id="ref-for-funcdef-float-snap-inline①">snap-inline()</a> function is defined as: 
<pre class="prod">snap-inline() = snap-inline( <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value①">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-comma" id="ref-for-comb-comma①">,</a> [ left <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑦">|</a> right <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑧">|</a> near ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①">?</a> )
</pre>
     <p>Has no effect if the element is an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float②">inline float</a>.</p>
     <p>If the element is a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float④">page float</a>, it makes the element float to the
      line start or line end if it naturally appears within a certain distance
      from the start or end of the line. The length value(s) specifies the
      maximum distance from the start/end that an element must be within in
      order to be floated; one length value specifies the distance from both the
      start and the end, two length values specify the distance from the start
      and end, respectively.</p>
     <p>The optional keyword value specifies where the element is floated: line
      start, line end, or the nearest of the two. The initial value is <a class="property css" data-link-type="property">near</a>.
      If <span class="property">near</span> is in effect and the element is within the specified distance
      both from the start and the end, end wins.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-snap-inline">snap-inline</dfn> 
    <dd>same as <code>snap-inline(2em, near)</code> 
    <dt><dfn class="dfn-paneled css" data-dfn-for="float" data-dfn-type="value" data-export id="valdef-float-none">none</dfn> 
    <dd>The box is not floated. 
   </dl>
   <div class="issue" id="issue-fc8e173d"><a class="self-link" href="#issue-fc8e173d"></a> There is currently no way to float into a combination of directions (top right,
  right top, left bottom, bottom left, etc.). </div>
   <div class="example" id="example-57303dbe">
    <a class="self-link" href="#example-57303dbe"></a> Float figure to top of reference column: 
<pre>.figure { float-reference: column; float: top }
</pre>
    <p><img alt="sample rendering" src="images/7.png"></p>
   </div>
   <div class="example" id="example-a4310bcb">
    <a class="self-link" href="#example-a4310bcb"></a> In this example a block-start float that does not fill the entire <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#inline-size" id="ref-for-inline-size②">inline size</a> of the float reference is placed at the start of the block and line. 
<pre>.figure { float-reference: column; float: block-start; width: 50% }
</pre>
    <p><img alt="sample rendering" src="images/block_line_start.png"></p>
   </div>
   <div class="example" id="example-3b9c038b">
    <a class="self-link" href="#example-3b9c038b"></a> In this example, a figure naturally appears close to a column break. There is
  not enough space for the figure in the first column, and it is therefore placed
  in the second column, leaving white space at the bottom of the first column. 
    <p><img alt="sample rendering" src="images/23.png"></p>
    <p>To avoid the white space, the image can be floated to the nearest edge (in the
  block direction):</p>
<pre>.figure { float-reference: column; float: snap-block }
</pre>
    <p>In this example, the figure is already at the nearest edge, so it does not
  move. However, floats allow subsequent content to be displayed before the
  float and the white space can therefore be filled:</p>
    <p><img alt="sample rendering" src="images/7.png"></p>
   </div>
   <div class="example" id="example-a00920d6">
    <a class="self-link" href="#example-a00920d6"></a> 
    <p>In this example, two figures naturally appear in the text flow:</p>
    <p><img alt="sample rendering" src="images/20.png"></p>
    <p>A typographer would typically try to avoid single lines of text above/below
  figures, which can be achieved with:</p>
<pre>div.figure { float-reference: column; float: snap-block(1.5em) }
</pre>
    <p>The length value specifies the reach of the snap function; in this example the
  second figure is affected, but not the first.</p>
   </div>
   <div class="example" id="example-8da0b3d8">
    <a class="self-link" href="#example-8da0b3d8"></a> 
    <p>In this example, two figures naturally appear in the text flow:</p>
    <p><img alt="sample rendering" src="images/20.png"></p>
    <p>To make the figures snap to the nearest edges, this code can be applied:</p>
<pre>div.figure { float-reference: column; float: snap-block(2.5em) }
</pre>
    <p>The resultant rendering is:</p>
    <p><img alt="sample rendering" src="images/22.png"></p>
   </div>
   <div class="example" id="example-18f08fd9">
    <a class="self-link" href="#example-18f08fd9"></a> In this example, tables will snap to the top/bottom if the top/bottom of the
  border box is closer than <a class="property css" data-link-type="property">3em</a> from the top/bottom of the float-reference
  which is a block element. 
<pre>table { float: snap }
table { float: snap-block(3em) }
table { float: snap-block(3em, bottom) }
table { float: snap-block(3em 2em, bottom) }
</pre>
   </div>
   <div class="note" role="note"> More examples with regions as <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference③⓪">float reference</a>s needed. </div>
   <h2 class="heading settled" data-level="4" id="clearing_page_floats"><span class="secno">4. </span><span class="content"> The <a class="property css" data-link-type="property" href="#propdef-clear" id="ref-for-propdef-clear①">clear</a> property</span><a class="self-link" href="#clearing_page_floats"></a></h2>
   <table class="def propdef" data-link-for-hint="clear">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-clear">clear</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">inline-start <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑨">|</a> inline-end <span id="ref-for-comb-one②⓪">|</span> block-start <span id="ref-for-comb-one②①">|</span> block-end <span id="ref-for-comb-one②②">|</span> left <span id="ref-for-comb-one②③">|</span> right <span id="ref-for-comb-one②④">|</span> top <span id="ref-for-comb-one②⑤">|</span> bottom <span id="ref-for-comb-one②⑥">|</span> none 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td>block-level elements, floats, regions, pages 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>specified keyword 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>discrete 
   </table>
   <p>To prevent stacking of floats, the <a class="property css" data-link-type="property" href="#propdef-clear" id="ref-for-propdef-clear②">clear</a> property can be used:</p>
   <dl>
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-inline-start">inline-start</dfn> 
    <dd>
      If applied to an inline float, requires that the block-start outer edge of
      the box comes after the block-end outer edge of any inline-start-floats
      with an inline-start-float-reference that resulted from elements earlier
      in the source document. 
     <p>If applied to a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float⑤">page float</a>, the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference③①">float reference</a> in which the
      page float is placed will be seen as full when determining whether it can
      host subsequent page floats that float in the inline-start direction.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-inline-end">inline-end</dfn> 
    <dd>
      If applied to a block-level element or an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float③">inline float</a>, requires
      that the block-start outer edge of the box comes after the block-end outer
      edge of any inline-end-floats with an inline-end-float-reference that
      resulted from elements earlier in the source document. 
     <p>If applied to a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float⑥">page float</a>, the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference③②">float reference</a> in which the
      page float is placed will be seen as full when determining whether it can
      host subsequent page floats that float in the inline-end direction.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-block-start">block-start</dfn> 
    <dd>
      If applied to a block-level element or an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float④">inline float</a>, behaves like
      inline-start. 
     <p>If applied to a page float, the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference③③">float reference</a> in which the page
      float is placed will be seen as full when determining whether it can host
      subsequent page floats that float in the block-start direction.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-block-end">block-end</dfn> 
    <dd>
      If applied to a block-level element or an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float⑤">inline float</a>, behaves
      like inline-end. 
     <p>If applied to a page float, the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference③④">float reference</a> in which the page float
      is placed will be seen as full when determining whether it can host
      subsequent page floats that float in the block-end direction.</p>
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-left">left</dfn> 
    <dd> Behave like block-end, inline-start or inline-end depending on the float
      containing block’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction④">direction</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode④">writing-mode</a>. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-right">right</dfn> 
    <dd> Behave like block-start, inline-start or inline-end depending on the float
      containing block’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction⑤">direction</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode⑤">writing-mode</a>. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-top">top</dfn> 
    <dd> Behave like block-start or inline-start depending on the float
      containing block’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction⑥">direction</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode⑥">writing-mode</a>. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-bottom">bottom</dfn> 
    <dd> Behave like block-end or inline-end depending on the float
      containing block’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction" id="ref-for-propdef-direction⑦">direction</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode" id="ref-for-propdef-writing-mode⑦">writing-mode</a>. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-both-inline">both-inline</dfn> 
    <dd> Behave like inline-start and inline-end. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-both-block">both-block</dfn> 
    <dd> Behave like block-start and block-end. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-both">both</dfn> 
    <dd> Behave like both-inline. 
    <dt><dfn class="dfn-paneled css" data-dfn-for="clear" data-dfn-type="value" data-export id="valdef-clear-all">all</dfn> 
    <dd> Behave like both-block and both-inline. 
   </dl>
   <div class="example" id="example-79002a2c">
    <a class="self-link" href="#example-79002a2c"></a> In this example, the two figures may appear in the same column: 
<pre>.figure { float-reference: column; float: bottom; clear: none }

&lt;div class=figure>&lt;/div>
&lt;div class=figure>&lt;/div>
</pre>
    <p><img alt="sample rendering" src="images/16.png"></p>
   </div>
   <div class="example" id="example-27321d7c">
    <a class="self-link" href="#example-27321d7c"></a> In this example, the two figures will appear in different columns: 
<pre>.figure { float-reference: column; float: bottom; clear: bottom }

&lt;div class=figure>&lt;/div>
&lt;div class=figure>&lt;/div>
</pre>
    <p><img alt="sample rendering" src="images/17.png"></p>
   </div>
   <div class="example" id="example-c48b5f18">
    <a class="self-link" href="#example-c48b5f18"></a> In this example, the two figures may appear at the bottom of the same column
    due to clearing only at the top: 
<pre>.figure { float-reference: column; float: bottom; clear: top }

&lt;div class=figure>&lt;/div>
&lt;div class=figure>&lt;/div>
</pre>
    <p><img alt="sample rendering" src="images/16.png"></p>
   </div>
   <div class="example" id="example-33e247dc">
    <a class="self-link" href="#example-33e247dc"></a> In this example, the two figures will appear in different columns due to
    clearing at the bottom: 
<pre>.figure { float-reference: column; float: bottom; clear: bottom }

&lt;div class=figure>&lt;/div>
&lt;div class=figure>&lt;/div>
</pre>
    <p><img alt="sample rendering" src="images/17.png"></p>
   </div>
   <div class="example" id="example-17226e58">
    <a class="self-link" href="#example-17226e58"></a> In this example, the two figures end up the top corner of two different
    pages: 
<pre>.figure { float-reference: page; float: top; clear: top }

&lt;div class=figure>&lt;/div>
&lt;div class=figure>&lt;/div>
</pre>
   </div>
   <div class="example" id="example-16b550af">
    <a class="self-link" href="#example-16b550af"></a> In this example, the two figures request different positions, and they may
    therefore end up in the same column: 
<pre>.figure.one { float-reference: column; float: top; clear: top }
.figure.two { float-reference: column; float: bottom; clear: bottom }

&lt;div class="figure one">&lt;/div>
&lt;div class="figure two">&lt;/div>
</pre>
   </div>
   <h2 class="heading settled" data-level="5" id="deferring_floats"><span class="secno">5. </span><span class="content">Deferring page floats</span><a class="self-link" href="#deferring_floats"></a></h2>
   <p>Users can influence the placement of a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float⑦">page float</a> by deferring them to
  another <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container②">fragmentation container</a> than where the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor①③">float anchor</a> is
  placed.</p>
   <p>A float that is an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float⑥">inline float</a> cannot be deferred.</p>
   <p>Float deferring assigns an <a data-link-type="dfn" href="#initial-float-reference" id="ref-for-initial-float-reference">initial float reference</a>, yet float stacking
  can lead page floats being moved to a subsequent <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container③">fragmentation container</a> if their <span id="ref-for-initial-float-reference①">initial float reference</span> lacks the space to host them.</p>
   <p>The <a class="property css" data-link-type="property" href="#propdef-float-defer" id="ref-for-propdef-float-defer">float-defer</a> property is introduced to control deferring floats:</p>
   <h3 class="heading settled" data-level="5.1" id="float-defer-property"><span class="secno">5.1. </span><span class="content">The <a class="property css" data-link-type="property" href="#propdef-float-defer" id="ref-for-propdef-float-defer①">float-defer</a> property</span><a class="self-link" href="#float-defer-property"></a></h3>
   <table class="def propdef" data-link-for-hint="float-defer">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-float-defer">float-defer</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">&lt;integer> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⑦">|</a> last <span id="ref-for-comb-one②⑧">|</span> none 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td>floats 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>specified keyword or integer 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>discrete 
   </table>
   <p>This property specifies whether the <a data-link-type="dfn" href="#initial-float-reference" id="ref-for-initial-float-reference②">initial float reference</a> of a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float⑧">page
    float</a> is the <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container④">fragmentation container</a> in which the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor①④">float anchor</a> is placed after previous page floats have been placed, or in another one.</p>
   <p>This property is ignored if the element is an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float⑦">inline float</a>.</p>
   <p>Values are:</p>
   <dl>
    <dt>none 
    <dd>The <a data-link-type="dfn" href="#initial-float-reference" id="ref-for-initial-float-reference③">initial float reference</a> is the <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container⑤">fragmentation container</a> in which the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor①⑤">float anchor</a> is placed after all previous page floats have been placed. 
    <dt>&lt;integer> 
    <dd>
      A positive integer value indicates that the <a data-link-type="dfn" href="#initial-float-reference" id="ref-for-initial-float-reference④">initial float reference</a> of
        the page float should be Nth <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container⑥">fragmentation container</a> of the `fragmentation
        flow`, where N is the value of the `float-defer` property plus the order
        number of the <span id="ref-for-fragmentation-container⑦">fragmentation container</span> in which the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor①⑥">float anchor</a> is placed
        after all previous page floats have been placed within the given <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-context" id="ref-for-fragmentation-context">fragmentation context</a>. If N is larger than the order number of the last <span id="ref-for-fragmentation-container⑧">fragmentation container</span> within the given <span id="ref-for-fragmentation-context①">fragmentation context</span> at the time of
        assignment, then N is the order number of the last <span id="ref-for-fragmentation-container⑨">fragmentation container</span> within the given <span id="ref-for-fragmentation-context②">fragmentation context</span>. 
     <p>A negative integer value indicates that the <a data-link-type="dfn" href="#initial-float-reference" id="ref-for-initial-float-reference⑤">initial float reference</a> of
        the page float should be a <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container①⓪">fragmentation container</a> of the <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-context" id="ref-for-fragmentation-context③">fragmentation context</a>, counting backward from the end, so that -1
        is the last <span id="ref-for-fragmentation-container①①">fragmentation container</span>, -2 is the next-to-last, etc. .
        In the case of a negative integer value, the <span id="ref-for-initial-float-reference⑥">initial float reference</span> is the
        Nth <span id="ref-for-fragmentation-container①②">fragmentation container</span> of the <span id="ref-for-fragmentation-context④">fragmentation context</span>, where N is 1
        plus the order number of the last <span id="ref-for-fragmentation-container①③">fragmentation container</span> within the given <span id="ref-for-fragmentation-context⑤">fragmentation context</span> after all previous page floats have been placed plus
        the value of the `float-defer` property.</p>
     <p>Zero is the same as `none`.</p>
     <p>If the value of the `float-defer` property would cause the <a data-link-type="dfn" href="#initial-float-reference" id="ref-for-initial-float-reference⑦">initial float
        reference</a> to be an inexistent <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container①④">fragmentation container</a>, the property
        is interpreted as if it were zero.</p>
     <p class="note" role="note"> Negative float-defer values put the initial float reference a certain number
          to be a certain amount of fragmentation containers from the last fragmentation
          container at the time of the placement. Subsequent page float stacking
          can mean that a page float is being placed in a later fragmentation container
          (a page float with float-defer set to -3 can end up being placed in the
          last fragmentation container), and later page floats may mean that new
          fragmentation containers are added, so that the a fragmentation container
          that previously was Nth last fragmentation container within a fragmentation
          context now is the N+Xth last. Additional fragmentation container(s) that
          are added after the page float was placed, will not cause the page float
          to be moved. </p>
    <dt>last 
    <dd> The <a data-link-type="dfn" href="#initial-float-reference" id="ref-for-initial-float-reference⑧">initial float reference</a> is the last <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container①⑤">fragmentation container</a> within
        the given <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-context" id="ref-for-fragmentation-context⑥">fragmentation context</a> after all previous page floats have been
        placed. 
   </dl>
   <div class="example" id="example-0df119df">
    <a class="self-link" href="#example-0df119df"></a> Float figure to the top of the region that follows the region in which
      the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor①⑦">float anchor</a> is placed: 
<pre>.figure { float-reference: region }
.figure { float: top }
.figure { float-defer: 1 }
</pre>
   </div>
   <div class="example" id="example-59a3e2bb">
    <a class="self-link" href="#example-59a3e2bb"></a> Float figure to the top of the next-to-last column: 
<pre>.figure { float-reference: column; float: top; float-defer: -2 }
</pre>
    <p><img alt="sample rendering" src="images/7.png"></p>
   </div>
   <div class="example" id="example-6d752e53">
    <a class="self-link" href="#example-6d752e53"></a> Float figure to the top of the last page: 
<pre>.figure { float-reference: page }
.figure { float: top }
.figure { float-defer: -1 }
</pre>
   </div>
   <div class="example" id="example-448b1f4f">
    <a class="self-link" href="#example-448b1f4f"></a> Float figure to the top of the last column: 
<pre>.figure { float-reference: column }
.figure { float: top }
.figure { float-defer: last }
</pre>
   </div>
   <div class="example" id="example-ad269d3e">
    <a class="self-link" href="#example-ad269d3e"></a> Float figure to top of the last column: 
<pre>.figure { float-reference: column; float: top; float-defer: last }
</pre>
    <p><img alt="sample rendering" src="images/6.png"></p>
   </div>
   <h2 class="heading settled" data-level="6" id="wrapping-around-page-floats"><span class="secno">6. </span><span class="content">Wrapping around page floats</span><a class="self-link" href="#wrapping-around-page-floats"></a></h2>
   <p>Page floats have their <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-exclusions-1/#propdef-wrap-flow" id="ref-for-propdef-wrap-flow①">wrap-flow</a> property set to <a class="property css" data-link-type="property">both</a> initially and are
  treated like exclusions. This specification does not make any further
  specification about wrapping contents around page floats.</p>
   <div class="issue" id="issue-3c63489c"><a class="self-link" href="#issue-3c63489c"></a> Should the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-exclusions-1/#propdef-wrap-flow" id="ref-for-propdef-wrap-flow②">wrap-flow</a> really be set to both, or should the flow be restricted
    to only be on one side? </div>
   <h2 class="heading settled" data-level="7" id="the-float_offset-property"><span class="secno">7. </span><span class="content">The <a class="property css" data-link-type="property" href="#propdef-float-offset" id="ref-for-propdef-float-offset">float-offset</a> property</span><a class="self-link" href="#the-float_offset-property"></a></h2>
   <table class="def propdef" data-link-for-hint="float-offset">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-float-offset">float-offset</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod"><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value②">&lt;length></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⑨">|</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value">&lt;percentage></a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>0 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td>floats 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>see prose 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>computed <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#typedef-length-percentage" id="ref-for-typedef-length-percentage">&lt;length-percentage></a> value 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>by computed value type 
   </table>
   <p>This property pushes a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float⑨">page float</a> in direction opposite of the where it has been
  floated with <a class="property css" data-link-type="property" href="#propdef-float" id="ref-for-propdef-float③">float</a>.</p>
   <p>If the element is an <a data-link-type="dfn" href="#inline-float" id="ref-for-inline-float⑧">inline float</a>, this property is ignored.</p>
   <p>This property can only influence a <a data-link-type="dfn" href="#page-float" id="ref-for-page-float①⓪">page float</a> along an axis along which
  it has been floated.</p>
   <dl>
    <dt><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①">&lt;percentage></a>
    <dd>
      Percentage values are computed according to this formula: 
<pre>(containing-block-width - float-width) * percentage
(containing-block-height - float-height) * percentage
</pre>
   </dl>
   <div class="example" id="example-eddf978c">
    <a class="self-link" href="#example-eddf978c"></a> 
<pre>img {
  float-reference: column;
  float: left;
  float-offset: 2em;
}
</pre>
    <p>In this example, the image is floated to the left. Therefore, <a class="property css" data-link-type="property" href="#propdef-float-offset" id="ref-for-propdef-float-offset①">float-offset</a> may only push the element to the right.</p>
   </div>
   <div class="example" id="example-4f721f7d">
    <a class="self-link" href="#example-4f721f7d"></a> 
<pre>img {
  float-reference: column;
  float: right;
  float-offset: 5px;
}
</pre>
    <p><img alt="sample rendering" src="images/14.png"></p>
   </div>
   <h2 class="heading settled" data-level="8" id="page-float-placement"><span class="secno">8. </span><span class="content">Page float placement</span><a class="self-link" href="#page-float-placement"></a></h2>
   <p>The order of page floats placement is determined by the following rules:</p>
   <ol>
    <li> All page floats with <a class="property css" data-link-type="property" href="#propdef-float-reference" id="ref-for-propdef-float-reference②">float-reference</a> set to `page` are placed, in
      document order, before those with <span class="property" id="ref-for-propdef-float-reference③">float-reference</span> set to `region` and
      `column`. 
    <li> Thereafter, page floats with <a class="property css" data-link-type="property" href="#propdef-float-reference" id="ref-for-propdef-float-reference④">float-reference</a> set to `column` and `region`
      are placed in document order. 
   </ol>
   <p>The placement of a single page float is a process that has to be terminated
  entirely before the placement of a subsequent page float can be initiated. The
  placement process consists of the following steps:</p>
   <ol>
    <li>Determine the <a data-link-type="dfn" href="#initial-float-reference" id="ref-for-initial-float-reference⑨">initial float reference</a> by considering the <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container①⑥">fragmentation container</a> in which the <a data-link-type="dfn" href="#float-anchor" id="ref-for-float-anchor①⑧">float anchor</a> is placed and
    the `float-defer` property of the page float. The <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference③⑤">float reference</a> is
    initially set to be the same as the <span id="ref-for-initial-float-reference①⓪">initial float reference</span>.
    <li>Determine if the given <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference③⑥">float reference</a> has enough space or can be
    expanded to host the page float, if the rules of <a href="#float-stacking"> float stacking</a> and <a href="#float-reference-growth">float reference
    growth</a> are to be followed. If this is not the case, and the <span id="ref-for-float-reference③⑦">float
    reference</span> is not the last <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container①⑦">fragmentation container</a> within the given <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-context" id="ref-for-fragmentation-context⑦">fragmentation context</a>, then make the following <span id="ref-for-fragmentation-container①⑧">fragmentation
    container</span> within the given <span id="ref-for-fragmentation-context⑧">fragmentation context</span> the <span id="ref-for-float-reference③⑧">float
    reference</span>. Repeat this step until the <span id="ref-for-float-reference③⑨">float reference</span> can be
    expanded enough to host the page float or it is the last <span id="ref-for-fragmentation-container①⑨">fragmentation
    container</span> within the given <span id="ref-for-fragmentation-context⑨">fragmentation context</span>.
    <li>If the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference④⓪">float reference</a> is the last <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container②⓪">fragmentation container</a> within
    the given <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-context" id="ref-for-fragmentation-context①⓪">fragmentation context</a>, and it has not enough space and cannot be
    expanded to host the page float, then do the following:
    <ol>
     <li>If the <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-context" id="ref-for-fragmentation-context①①">fragmentation context</a> allows for the addition of another <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container②①">fragmentation container</a> and an additional <span id="ref-for-fragmentation-container②②">fragmentation container</span> would have the needed size to host the page float, a new <span id="ref-for-fragmentation-container②③">fragmentation
      container</span> is added to the end of the <span id="ref-for-fragmentation-context①②">fragmentation context</span>. The <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference④①">float reference</a> is set the newly created <span id="ref-for-fragmentation-container②④">fragmentation
      container</span>.
     <li>Otherwise, if the <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-container" id="ref-for-fragmentation-container②⑤">fragmentation container</a> is a region, then the
      'regionOverset` attribute of the <span id="ref-for-fragmentation-container②⑥">fragmentation container</span> is set to
      `overset`. 
    </ol>
    <li>The page float is placed in the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference④②">float reference</a> according to the rules
    of 'float stacking' and 'float reference growth'.
   </ol>
   <h3 class="heading settled" data-level="8.1" id="float-reference-growth"><span class="secno">8.1. </span><span class="content">Float reference growth</span><a class="self-link" href="#float-reference-growth"></a></h3>
   <p>Float references can grow up to the their `max-height` and `max-width` or their
`available size`, whichever is the lowest, in order to accommodate page floats.</p>
   <h3 class="heading settled" data-level="8.2" id="float-stacking"><span class="secno">8.2. </span><span class="content">Rules for page float stacking</span><a class="self-link" href="#float-stacking"></a></h3>
   <p>Page floats are stacked within a given <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference④③">float reference</a> in the order of their
placement and in the direction of the inline- and flow-directions of the <a data-link-type="dfn" href="https://drafts.csswg.org/css-break-4/#fragmentation-context" id="ref-for-fragmentation-context①③">fragmentation context</a> while <a data-link-type="dfn" href="#not-overlapping" id="ref-for-not-overlapping">not overlapping</a> with any other page
floats with the same <span id="ref-for-float-reference④④">float reference</span> and by keeping a distance N between
the page float’s margin edge and the padding edge of the <span id="ref-for-float-reference④⑤">float reference</span> as well as between the page float’s margin edge and the margin edge of the last
previously placed page float with the same <span id="ref-for-float-reference④⑥">float reference</span> and the same <a class="property css" data-link-type="property" href="#propdef-float" id="ref-for-propdef-float④">float</a> value, where N is the <a class="property css" data-link-type="property" href="#propdef-float-offset" id="ref-for-propdef-float-offset②">float-offset</a> value of the page float.</p>
   <p>For the purpose of calculating whether enough space is available for a page floats
within the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference④⑦">float reference</a>, it is assumed that the page floats in the block
directions fill the entire line size of the <span id="ref-for-float-reference④⑧">float reference</span> and page floats
in the inline direction fill the entire block size of the <span id="ref-for-float-reference④⑨">float reference</span>.</p>
   <p>For the purpose of placement, page floats in the block-start direction are also
placed at the inline-start edge of the float reference and vice versa, and page
floats in the block-end direction are placed at the inline-end edge of the float
reference and vice versa.</p>
   <p>If the page float has a defined <a class="property css" data-link-type="property" href="#propdef-clear" id="ref-for-propdef-clear③">clear</a>-value, then the <a data-link-type="dfn" href="#float-reference" id="ref-for-float-reference⑤⓪">float reference</a> in
which the page float is placed is closed for all subsequent page floats that
floating in the direction specified by the <span class="property" id="ref-for-propdef-clear④">clear</span>-value.</p>
   <p class="issue" id="issue-329c073e"><a class="self-link" href="#issue-329c073e"></a> We can effectively currently float to two corners: inline-start/block-start and
  inline-end/block-end. We should augment this with the option to have a secondary
  float direction to allow basic 2D floating. </p>
   <h2 class="heading settled" data-level="9" id="relation_to_absolutely_positioned_exclusions"><span class="secno">9. </span><span class="content"> Floats and absolutely positioned exclusions</span><a class="self-link" href="#relation_to_absolutely_positioned_exclusions"></a></h2>
   <p>Floats and absolutely positioned exclusions share some common traits, but in the
case of inline floats they are not the same. Floats that are not inline floats
should behave the same as absolutely positioned exclusions with positions and
sizes manually set to prevent overlap between floats and to prevent floats from
moving beyond the edges of the float reference, with the float reference being
grown as much as needed up to its maximum extend to accommodate all containing
floats.</p>
   <h3 class="heading settled" data-level="9.1" id="inline_floats_and_absolutely_positioned_exclusions"><span class="secno">9.1. </span><span class="content"> Differences between inline floats and absolutely positioned elements</span><a class="self-link" href="#inline_floats_and_absolutely_positioned_exclusions"></a></h3>
   <p><em>This section is not normative.</em></p>
   <p> Inline floats and absolutely positioned elements are both out-of-flow elements.
    Absolutely positioned elements that are also exclusions can imitate many of
    the features of floats. </p>
   <p> However, in the case of inline floats, the block formatting context that
    contains them (the <a data-link-type="dfn" href="#float-containing-block-formatting-context" id="ref-for-float-containing-block-formatting-context⑤">float containing block formatting context</a>) is
    required to include the area occupied by the float, which is not a requirement
    for absolutely positioned elements. </p>
   <div class="example" id="example-7d39b010">
    <a class="self-link" href="#example-7d39b010"></a> An inline float inside a <a data-link-type="dfn" href="#float-containing-block-formatting-context" id="ref-for-float-containing-block-formatting-context⑥">float containing block formatting context</a> given
    by a display-inline-block element. The element, which has a green border, is
    expanded to include the brown float. 
<pre><code>&lt;style>
.float {
  float: left;
  margin: 5px;
}
.border {
    border: 3px solid black;
    margin: 5px;
}
#outer {
    border: 1px solid green;
    display: inline-block;
}
canvas {
    background-color: brown;
}
p {
  margin: 5px;
}
&lt;/style>
&lt;div id="outer">
    &lt;p class="border">
        &lt;span class="float border">
            &lt;canvas width="100" height="100"/>
        &lt;/span>
        First paragraph.
    &lt;/p>
    &lt;p class="border">
        Second paragraph and some more text.
    &lt;/p>
&lt;/div>
</code></pre>
    <p><img alt="sample rendering" src="images/float_containing_context.png"></p>
    <p>In comparison, the below is the same HTML, but the float is replaced by an
    absolutely positioned element that is also an exclusion. The <a data-link-type="dfn" href="#float-containing-block-formatting-context" id="ref-for-float-containing-block-formatting-context⑦">float
    containing block formatting context</a> is still given by a
    display-inline-block element. However, the element, marked by a green border,
    does not expand to include the brown, absolutely positioned element.</p>
<pre><code>&lt;style>
.float {
    position: absolute;
    top: 8px;
    left: 8px;
    wrap-flow: both;
}
.border {
    border: 3px solid black;
    margin: 5px;
}
#outer {
    border: 1px solid green;
    display: inline-block;
    position: relative;
}
canvas {
    background-color: brown;
}
&lt;/style>
&lt;div id="outer">
    &lt;p class="border">
        &lt;span class="float border">
            &lt;canvas width="100" height="100"/>
        &lt;/span>
        First paragraph.
    &lt;/p>
    &lt;p class="border">
        Second paragraph and some more text.
    &lt;/p>
&lt;/div>
</code></pre>
    <p><img alt="sample rendering" src="images/positioned_containing_context.png"></p>
   </div>
   <h2 class="heading settled" data-level="10" id="overconstrained-page-floats"><span class="secno">10. </span><span class="content">Overconstrained floats</span><a class="self-link" href="#overconstrained-page-floats"></a></h2>
   <p>In many cases, the specified values on these properties cannot be honored.</p>
   <div class="example" id="example-bf15b5e5">
    <a class="self-link" href="#example-bf15b5e5"></a> 
    <p>The number of columns is limited, and high values therefore cannot be honored:</p>
<pre>.figure { float-reference: column; float: top; float-defer: 1000 }
</pre>
   </div>
   <div class="example" id="example-1d05f4ec">
    <a class="self-link" href="#example-1d05f4ec"></a> A narrow screen may only have room for one column, in which case this request
    cannot be honored: 
<pre>.figure { float-reference: column; float: top; float-defer: -5 }
</pre>
   </div>
   <div class="example" id="example-c4f8d915">
    <a class="self-link" href="#example-c4f8d915"></a> In long documents, all content cannot fit on the last page, and this rule
    therefore cannot be honored: 
<pre>p { float-reference: page; float: top; float-defer: last }
</pre>
   </div>
   <p>Floats are processed in the order they appear in the source. However, the
  visual order of floats may not be the same as the source order.</p>
   <div class="example" id="example-89237a4e">
    <a class="self-link" href="#example-89237a4e"></a> Consider this code: 
<pre>.one { float-reference: page; float: top; float-defer: last }
.two { float-reference: column; float: top; clear: column }

&lt;div class=one>&lt;/div>
&lt;div class=two>&lt;/div>
</pre>
    <p>In this example, the first element requests to appear on the last page, while
    the second element requests to appear in the natural column. If the natural
    column of the second element appears on a page before the last page, the second
    element will appear visually before the first.</p>
   </div>
   <div class="example" id="example-b5a76a9b">
    <a class="self-link" href="#example-b5a76a9b"></a> 
    <p>Consider this code:</p>
<pre>.one { float-reference: page; float: top; float-defer: last }
.two { float-reference: page; float: top; clear: page; }

&lt;div class=one>&lt;/div>
&lt;div class=two>&lt;/div>
</pre>
    <p>If all content can fit on one page, the first page will also be the last page.
    The first element is processed first and is placed on top of the first page.
    Then the second element is processed. It requests a clear top, something which is
    not possible on the first page. Therefore, a second page is created and the
    first element is moved there. Even if the first element requests to be on the
    last page, it will not appear there.</p>
   </div>
   <p>When resolving over-constrained layouts, the order of importance for defined
  goals are:</p>
   <ol>
    <li>honor 'clear: top/bottom' 
    <li>honor <a class="property css" data-link-type="property" href="#propdef-float-defer" id="ref-for-propdef-float-defer②">float-defer</a> 
    <li>honor 'float: top/bottom' 
    <li>display all content (as described by other CSS properties) 
    <li>keep the number of pages to a minimum 
   </ol>
   <h2 class="no-num heading settled" id="acks"><span class="content"> Acknowledgments</span><a class="self-link" href="#acks"></a></h2>
   <p>This specification is made possible by input from
  Rossen Atanassov,
  Tab Atkins Jr.,
  David Baron,
  Lars Erik Bolstad,
  Bert Bos,
  Mike Bremford,
  Dave Cramer,
  Michael Day,
  Werner Donné,
  Brady Duga,
  James Elmore,
  Elika Etemad,
  Michel Fortin,
  Daniel Glazman,
  Melinda Grant,
  Ian Hickson,
  Laurens Holst,
  Brad Kemper,
  Toru Kawakubo,
  Rune Lillesveen,
  Peter Linss,
  Cameron McCormack,
  Paul E. Merrell,
  Del Merritt,
  Markus Mielke,
  Kelly Miller,
  Alex Mogilevsky,
  Peter Moulder,
  Shinyu Murakami,
  Michel Onoff,
  Anton Prowse,
  Liam R E Quin,
  Jacob Grundtvig Refstrup,
  Florian Rivoal,
  Christian Roth,
  Allan Sandfeld Jensen,
  Simon Sapin,
  Alan Stearns,
  Morten Stenshorne,
  Philip Taylor,
  Ian Tindale,
  Ladd Van Tol,
  Lea Verou,
  Tarquin (Mark) Wilton-Jones,
  Steve Zilles,
  Tantek Çelik
  and the CSS Working Group members.</p>
  </main>
  <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
  <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="w3c-example">
   <a class="self-link" href="#w3c-example"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
    this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong></p>
  <details class="wpt-tests-block" dir="ltr" lang="en" open>
   <summary>Tests</summary>
   <p>Tests relating to the content of this specification
                     may be documented in “Tests” blocks like this one.
                     Any such block is non-normative.</p>
   <ul class="wpt-tests-list"></ul>
   <hr>
  </details>
  <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> Conformance classes</span><a class="self-link" href="#w3c-conformance-classes"></a></h3>
  <p>Conformance to this specification
    is defined for three conformance classes: </p>
  <dl>
   <dt>style sheet 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
            style sheet</a>. 
   <dt>renderer 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets the semantics of a style sheet and renders
            documents that use them. 
   <dt>authoring tool 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a style sheet. 
  </dl>
  <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module. </p>
  <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.) </p>
  <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module. </p>
  <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> Partial implementations</span><a class="self-link" href="#w3c-partial"></a></h3>
  <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong> treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>
  <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> Implementations of Unstable and Proprietary Features</span><a class="self-link" href="#w3c-conform-future-proofing"></a></h4>
  <p>To avoid clashes with future stable CSS features,
        the CSSWG recommends <a href="http://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the implementation of <a href="http://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a href="http://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
  <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> Non-experimental implementations</span><a class="self-link" href="#w3c-testing"></a></h3>
  <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec. </p>
  <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group. </p>
  <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing list.</p>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#valdef-clear-all">all</a><span>, in § 4</span>
   <li>
    block-end
    <ul>
     <li><a href="#valdef-clear-block-end">value for clear</a><span>, in § 4</span>
     <li><a href="#valdef-float-block-end">value for float</a><span>, in § 3.2</span>
    </ul>
   <li>
    block-start
    <ul>
     <li><a href="#valdef-clear-block-start">value for clear</a><span>, in § 4</span>
     <li><a href="#valdef-float-block-start">value for float</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#valdef-clear-both">both</a><span>, in § 4</span>
   <li><a href="#valdef-clear-both-block">both-block</a><span>, in § 4</span>
   <li><a href="#valdef-clear-both-inline">both-inline</a><span>, in § 4</span>
   <li>
    bottom
    <ul>
     <li><a href="#valdef-clear-bottom">value for clear</a><span>, in § 4</span>
     <li><a href="#valdef-float-bottom">value for float</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#propdef-clear">clear</a><span>, in § 4</span>
   <li><a href="#valdef-float-reference-column">column</a><span>, in § 3.1</span>
   <li><a href="#float">Float</a><span>, in § 2</span>
   <li><a href="#propdef-float">float</a><span>, in § 3.2</span>
   <li><a href="#float-anchor">Float anchor</a><span>, in § 2</span>
   <li><a href="#float-block-formatting-context">Float block formatting context</a><span>, in § 2</span>
   <li><a href="#float-containing-block-formatting-context">Float containing block formatting context</a><span>, in § 2</span>
   <li><a href="#propdef-float-defer">float-defer</a><span>, in § 5.1</span>
   <li><a href="#propdef-float-offset">float-offset</a><span>, in § 7</span>
   <li><a href="#float-reference">Float reference</a><span>, in § 2</span>
   <li><a href="#propdef-float-reference">float-reference</a><span>, in § 3.1</span>
   <li><a href="#initial-float-reference">Initial float reference</a><span>, in § 2</span>
   <li><a href="#valdef-float-reference-inline">inline</a><span>, in § 3.1</span>
   <li>
    inline-end
    <ul>
     <li><a href="#valdef-clear-inline-end">value for clear</a><span>, in § 4</span>
     <li><a href="#valdef-float-inline-end">value for float</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#inline-float">Inline float</a><span>, in § 2</span>
   <li>
    inline-start
    <ul>
     <li><a href="#valdef-clear-inline-start">value for clear</a><span>, in § 4</span>
     <li><a href="#valdef-float-inline-start">value for float</a><span>, in § 3.2</span>
    </ul>
   <li>
    left
    <ul>
     <li><a href="#valdef-clear-left">value for clear</a><span>, in § 4</span>
     <li><a href="#valdef-float-left">value for float</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#valdef-float-none">none</a><span>, in § 3.2</span>
   <li><a href="#not-overlapping">Not overlapping</a><span>, in § 2</span>
   <li><a href="#valdef-float-reference-page">page</a><span>, in § 3.1</span>
   <li><a href="#page-float">Page float</a><span>, in § 2</span>
   <li><a href="#valdef-float-reference-region">region</a><span>, in § 3.1</span>
   <li>
    right
    <ul>
     <li><a href="#valdef-clear-right">value for clear</a><span>, in § 4</span>
     <li><a href="#valdef-float-right">value for float</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#valdef-float-snap-block">snap-block</a><span>, in § 3.2</span>
   <li><a href="#funcdef-float-snap-block">snap-block()</a><span>, in § 3.2</span>
   <li><a href="#valdef-float-snap-inline">snap-inline</a><span>, in § 3.2</span>
   <li><a href="#funcdef-float-snap-inline">snap-inline()</a><span>, in § 3.2</span>
   <li>
    top
    <ul>
     <li><a href="#valdef-clear-top">value for clear</a><span>, in § 4</span>
     <li><a href="#valdef-float-top">value for float</a><span>, in § 3.2</span>
    </ul>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSS-BREAK-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="40060954">fragmentation container</span>
     <li><span class="dfn-paneled" id="a270c80d">fragmentation context</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9f9120ff">,</span>
     <li><span class="dfn-paneled" id="18222566">&lt;length-percentage></span>
     <li><span class="dfn-paneled" id="fb030e6c">&lt;length></span>
     <li><span class="dfn-paneled" id="15f5b381">&lt;percentage></span>
     <li><span class="dfn-paneled" id="537cf076">?</span>
     <li><span class="dfn-paneled" id="358fd6ff">css-wide keywords</span>
     <li><span class="dfn-paneled" id="6ec67710">|</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-WRITING-MODES-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5bc8bd12">direction</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-WRITING-MODES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="37f0daea">inline size</span>
     <li><span class="dfn-paneled" id="385326d7">writing-mode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS22]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="1c876efa">max-height</span>
     <li><span class="dfn-paneled" id="db7285a8">max-width</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS3-EXCLUSIONS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0d754b3e">wrap-flow</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-break-4">[CSS-BREAK-4]
   <dd>Rossen Atanassov; Elika Etemad. <a href="https://drafts.csswg.org/css-break-4/"><cite>CSS Fragmentation Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-break-4/">https://drafts.csswg.org/css-break-4/</a>
   <dt id="biblio-css-values-3">[CSS-VALUES-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-3/"><cite>CSS Values and Units Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-3/">https://drafts.csswg.org/css-values-3/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-4/"><cite>CSS Values and Units Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
   <dt id="biblio-css-writing-modes-3">[CSS-WRITING-MODES-3]
   <dd>Elika Etemad; Koji Ishii. <a href="https://drafts.csswg.org/css-writing-modes-3/"><cite>CSS Writing Modes Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-writing-modes-3/">https://drafts.csswg.org/css-writing-modes-3/</a>
   <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
   <dd>Elika Etemad; Koji Ishii. <a href="https://drafts.csswg.org/css-writing-modes-4/"><cite>CSS Writing Modes Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-writing-modes-4/">https://drafts.csswg.org/css-writing-modes-4/</a>
   <dt id="biblio-css2">[CSS2]
   <dd>Bert Bos; et al. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-css22">[CSS22]
   <dd>Bert Bos. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 2 (CSS 2.2) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-css3-exclusions">[CSS3-EXCLUSIONS]
   <dd>Rossen Atanassov; Vincent Hardy; Alan Stearns. <a href="https://drafts.csswg.org/css-exclusions/"><cite>CSS Exclusions Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-exclusions/">https://drafts.csswg.org/css-exclusions/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-css3gcpm">[CSS3GCPM]
   <dd>Rachel Andrew; Mike Bremford. <a href="https://drafts.csswg.org/css-gcpm/"><cite>CSS Generated Content for Paged Media Module</cite></a>. URL: <a href="https://drafts.csswg.org/css-gcpm/">https://drafts.csswg.org/css-gcpm/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">Property Index</span><a class="self-link" href="#property-index"></a></h2>
  <div class="big-element-wrapper">
   <table class="index">
    <thead>
     <tr>
      <th scope="col">Name
      <th scope="col">Value
      <th scope="col">Initial
      <th scope="col">Applies to
      <th scope="col">Inh.
      <th scope="col">%ages
      <th scope="col">Anim­ation type
      <th scope="col">Canonical order
      <th scope="col">Com­puted value
    <tbody>
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-clear" id="ref-for-propdef-clear⑤">clear</a>
      <td>inline-start | inline-end | block-start | block-end | left | right | top | bottom | none
      <td>none
      <td>block-level elements, floats, regions, pages
      <td>no
      <td>N/A
      <td>discrete
      <td>per grammar
      <td>specified keyword
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-float" id="ref-for-propdef-float⑤">float</a>
      <td>block-start | block-end | inline-start | inline-end | snap-block | &lt;snap-block()> | snap-inline | &lt;snap-inline()> | left | right | top | bottom | none
      <td>none
      <td>all elements.
      <td>no
      <td>N/A
      <td>by computed value type
      <td>per grammar
      <td>as specified
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-float-defer" id="ref-for-propdef-float-defer③">float-defer</a>
      <td>&lt;integer> | last | none
      <td>none
      <td>floats
      <td>no
      <td>N/A
      <td>discrete
      <td>per grammar
      <td>specified keyword or integer
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-float-offset" id="ref-for-propdef-float-offset③">float-offset</a>
      <td>&lt;length> | &lt;percentage>
      <td>0
      <td>floats
      <td>no
      <td>see prose
      <td>by computed value type
      <td>per grammar
      <td>computed &lt;length-percentage> value
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-float-reference" id="ref-for-propdef-float-reference⑤">float-reference</a>
      <td>inline | column | region | page
      <td>inline
      <td>all elements.
      <td>no
      <td>N/A
      <td>discrete
      <td>per grammar
      <td>specified keyword
   </table>
  </div>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Page floats as defined here work with different types of fragmentation types
    (columns, regions, pages) as well as container elements. The specification
    is no longer specific to print or to pages.
    At the same time, inline floats and page floats differ in many ways, and it may
    (or may not) be a good idea to separate the two entirely.
    Therefore, the name <em>CSS Page Floats</em> should probably be replaced with
    a more appropriate name. <a class="issue-return" href="#issue-f0d0f60c" title="Jump to section">↵</a></div>
   <div class="issue"> The <a data-link-type="dfn" href="#float-containing-block-formatting-context">float containing block formatting context</a> having the same dimensions
    as the <a data-link-type="dfn" href="#float-reference">float reference</a> means that all floats that are not inline floats
    cannot move outside of their float references. Is this wanted? <a class="issue-return" href="#issue-08bce5eb" title="Jump to section">↵</a></div>
   <div class="issue">
     It is not possible to specify a block element which element to use as the
    reference element. This has been requested. 
    <p>Maybe something like:</p>
<pre><code>&lt;style>
.float {
float-reference: float-container;
}

#container {
float-container: true;
}
&lt;/style>

&lt;div id="container">
&lt;p>First paragraph&lt;span class="float">FLOAT&lt;/span>&lt;/p>

&lt;p>Second paragraph
&lt;span class="inline-block">[&lt;span class="float">FLOAT&lt;/span>] &lt;/span>
And some more text&lt;/p>
&lt;/div>
</code></pre>
    <p>This should float both floats with reference to the &lt;div id="container">
    element, rather than the &lt;P> and inline &lt;SPAN> elements.</p>
     <a class="issue-return" href="#issue-f5d44217" title="Jump to section">↵</a>
   </div>
   <div class="issue"> There is currently no way to float into a combination of directions (top right,
  right top, left bottom, bottom left, etc.). <a class="issue-return" href="#issue-fc8e173d" title="Jump to section">↵</a></div>
   <div class="issue"> Should the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-exclusions-1/#propdef-wrap-flow">wrap-flow</a> really be set to both, or should the flow be restricted
    to only be on one side? <a class="issue-return" href="#issue-3c63489c" title="Jump to section">↵</a></div>
   <div class="issue"> We can effectively currently float to two corners: inline-start/block-start and
  inline-end/block-end. We should augment this with the option to have a secondary
  float direction to allow basic 2D floating. <a class="issue-return" href="#issue-329c073e" title="Jump to section">↵</a></div>
  </div>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"0d754b3e": {"dfnID":"0d754b3e","dfnText":"wrap-flow","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-wrap-flow"}],"title":"1. Overview"},{"refs":[{"id":"ref-for-propdef-wrap-flow\u2460"},{"id":"ref-for-propdef-wrap-flow\u2461"}],"title":"6. Wrapping around page floats"}],"url":"https://drafts.csswg.org/css-exclusions-1/#propdef-wrap-flow"},
"15f5b381": {"dfnID":"15f5b381","dfnText":"<percentage>","external":true,"refSections":[{"refs":[{"id":"ref-for-percentage-value"},{"id":"ref-for-percentage-value\u2460"}],"title":"7. The float-offset property"}],"url":"https://drafts.csswg.org/css-values-4/#percentage-value"},
"18222566": {"dfnID":"18222566","dfnText":"<length-percentage>","external":true,"refSections":[{"refs":[{"id":"ref-for-typedef-length-percentage"}],"title":"7. The float-offset property"}],"url":"https://drafts.csswg.org/css-values-4/#typedef-length-percentage"},
"1c876efa": {"dfnID":"1c876efa","dfnText":"max-height","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-max-height"},{"id":"ref-for-propdef-max-height\u2460"}],"title":"3.2. The float property"}],"url":"https://www.w3.org/TR/CSS22/visudet.html#propdef-max-height"},
"358fd6ff": {"dfnID":"358fd6ff","dfnText":"css-wide keywords","external":true,"refSections":[{"refs":[{"id":"ref-for-css-wide-keywords"}],"title":"1.1. Value Definitions"}],"url":"https://drafts.csswg.org/css-values-4/#css-wide-keywords"},
"37f0daea": {"dfnID":"37f0daea","dfnText":"inline size","external":true,"refSections":[{"refs":[{"id":"ref-for-inline-size"},{"id":"ref-for-inline-size\u2460"},{"id":"ref-for-inline-size\u2461"}],"title":"3.2. The float property"}],"url":"https://drafts.csswg.org/css-writing-modes-4/#inline-size"},
"385326d7": {"dfnID":"385326d7","dfnText":"writing-mode","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-writing-mode"},{"id":"ref-for-propdef-writing-mode\u2460"},{"id":"ref-for-propdef-writing-mode\u2461"},{"id":"ref-for-propdef-writing-mode\u2462"}],"title":"3.2. The float property"},{"refs":[{"id":"ref-for-propdef-writing-mode\u2463"},{"id":"ref-for-propdef-writing-mode\u2464"},{"id":"ref-for-propdef-writing-mode\u2465"},{"id":"ref-for-propdef-writing-mode\u2466"}],"title":"4. \nThe clear property"}],"url":"https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode"},
"40060954": {"dfnID":"40060954","dfnText":"fragmentation container","external":true,"refSections":[{"refs":[{"id":"ref-for-fragmentation-container"},{"id":"ref-for-fragmentation-container\u2460"}],"title":"1. Overview"},{"refs":[{"id":"ref-for-fragmentation-container\u2461"},{"id":"ref-for-fragmentation-container\u2462"}],"title":"5. Deferring page floats"},{"refs":[{"id":"ref-for-fragmentation-container\u2463"},{"id":"ref-for-fragmentation-container\u2464"},{"id":"ref-for-fragmentation-container\u2465"},{"id":"ref-for-fragmentation-container\u2466"},{"id":"ref-for-fragmentation-container\u2467"},{"id":"ref-for-fragmentation-container\u2468"},{"id":"ref-for-fragmentation-container\u2460\u24ea"},{"id":"ref-for-fragmentation-container\u2460\u2460"},{"id":"ref-for-fragmentation-container\u2460\u2461"},{"id":"ref-for-fragmentation-container\u2460\u2462"},{"id":"ref-for-fragmentation-container\u2460\u2463"},{"id":"ref-for-fragmentation-container\u2460\u2464"}],"title":"5.1. The float-defer property"},{"refs":[{"id":"ref-for-fragmentation-container\u2460\u2465"},{"id":"ref-for-fragmentation-container\u2460\u2466"},{"id":"ref-for-fragmentation-container\u2460\u2467"},{"id":"ref-for-fragmentation-container\u2460\u2468"},{"id":"ref-for-fragmentation-container\u2461\u24ea"},{"id":"ref-for-fragmentation-container\u2461\u2460"},{"id":"ref-for-fragmentation-container\u2461\u2461"},{"id":"ref-for-fragmentation-container\u2461\u2462"},{"id":"ref-for-fragmentation-container\u2461\u2463"},{"id":"ref-for-fragmentation-container\u2461\u2464"},{"id":"ref-for-fragmentation-container\u2461\u2465"}],"title":"8. Page float placement"}],"url":"https://drafts.csswg.org/css-break-4/#fragmentation-container"},
"537cf076": {"dfnID":"537cf076","dfnText":"?","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-opt"},{"id":"ref-for-mult-opt\u2460"}],"title":"3.2. The float property"}],"url":"https://drafts.csswg.org/css-values-4/#mult-opt"},
"5bc8bd12": {"dfnID":"5bc8bd12","dfnText":"direction","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-direction"},{"id":"ref-for-propdef-direction\u2460"},{"id":"ref-for-propdef-direction\u2461"},{"id":"ref-for-propdef-direction\u2462"}],"title":"3.2. The float property"},{"refs":[{"id":"ref-for-propdef-direction\u2463"},{"id":"ref-for-propdef-direction\u2464"},{"id":"ref-for-propdef-direction\u2465"},{"id":"ref-for-propdef-direction\u2466"}],"title":"4. \nThe clear property"}],"url":"https://drafts.csswg.org/css-writing-modes-3/#propdef-direction"},
"6ec67710": {"dfnID":"6ec67710","dfnText":"|","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-one"},{"id":"ref-for-comb-one\u2460"},{"id":"ref-for-comb-one\u2461"}],"title":"3.1. The float-reference property"},{"refs":[{"id":"ref-for-comb-one\u2462"},{"id":"ref-for-comb-one\u2463"},{"id":"ref-for-comb-one\u2464"},{"id":"ref-for-comb-one\u2465"},{"id":"ref-for-comb-one\u2466"},{"id":"ref-for-comb-one\u2467"},{"id":"ref-for-comb-one\u2468"},{"id":"ref-for-comb-one\u2460\u24ea"},{"id":"ref-for-comb-one\u2460\u2460"},{"id":"ref-for-comb-one\u2460\u2461"},{"id":"ref-for-comb-one\u2460\u2462"},{"id":"ref-for-comb-one\u2460\u2463"},{"id":"ref-for-comb-one\u2460\u2464"},{"id":"ref-for-comb-one\u2460\u2465"},{"id":"ref-for-comb-one\u2460\u2466"},{"id":"ref-for-comb-one\u2460\u2467"}],"title":"3.2. The float property"},{"refs":[{"id":"ref-for-comb-one\u2460\u2468"},{"id":"ref-for-comb-one\u2461\u24ea"},{"id":"ref-for-comb-one\u2461\u2460"},{"id":"ref-for-comb-one\u2461\u2461"},{"id":"ref-for-comb-one\u2461\u2462"},{"id":"ref-for-comb-one\u2461\u2463"},{"id":"ref-for-comb-one\u2461\u2464"},{"id":"ref-for-comb-one\u2461\u2465"}],"title":"4. \nThe clear property"},{"refs":[{"id":"ref-for-comb-one\u2461\u2466"},{"id":"ref-for-comb-one\u2461\u2467"}],"title":"5.1. The float-defer property"},{"refs":[{"id":"ref-for-comb-one\u2461\u2468"}],"title":"7. The float-offset property"}],"url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"9f9120ff": {"dfnID":"9f9120ff","dfnText":",","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-comma"},{"id":"ref-for-comb-comma\u2460"}],"title":"3.2. The float property"}],"url":"https://drafts.csswg.org/css-values-4/#comb-comma"},
"a270c80d": {"dfnID":"a270c80d","dfnText":"fragmentation context","external":true,"refSections":[{"refs":[{"id":"ref-for-fragmentation-context"},{"id":"ref-for-fragmentation-context\u2460"},{"id":"ref-for-fragmentation-context\u2461"},{"id":"ref-for-fragmentation-context\u2462"},{"id":"ref-for-fragmentation-context\u2463"},{"id":"ref-for-fragmentation-context\u2464"},{"id":"ref-for-fragmentation-context\u2465"}],"title":"5.1. The float-defer property"},{"refs":[{"id":"ref-for-fragmentation-context\u2466"},{"id":"ref-for-fragmentation-context\u2467"},{"id":"ref-for-fragmentation-context\u2468"},{"id":"ref-for-fragmentation-context\u2460\u24ea"},{"id":"ref-for-fragmentation-context\u2460\u2460"},{"id":"ref-for-fragmentation-context\u2460\u2461"}],"title":"8. Page float placement"},{"refs":[{"id":"ref-for-fragmentation-context\u2460\u2462"}],"title":"8.2. Rules for page float stacking"}],"url":"https://drafts.csswg.org/css-break-4/#fragmentation-context"},
"db7285a8": {"dfnID":"db7285a8","dfnText":"max-width","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-max-width"},{"id":"ref-for-propdef-max-width\u2460"}],"title":"3.2. The float property"}],"url":"https://www.w3.org/TR/CSS22/visudet.html#propdef-max-width"},
"fb030e6c": {"dfnID":"fb030e6c","dfnText":"<length>","external":true,"refSections":[{"refs":[{"id":"ref-for-length-value"},{"id":"ref-for-length-value\u2460"}],"title":"3.2. The float property"},{"refs":[{"id":"ref-for-length-value\u2461"}],"title":"7. The float-offset property"}],"url":"https://drafts.csswg.org/css-values-4/#length-value"},
"float": {"dfnID":"float","dfnText":"Float","external":false,"refSections":[{"refs":[{"id":"ref-for-float"}],"title":"1. Overview"}],"url":"#float"},
"float-anchor": {"dfnID":"float-anchor","dfnText":"Float anchor","external":false,"refSections":[{"refs":[{"id":"ref-for-float-anchor"},{"id":"ref-for-float-anchor\u2460"}],"title":"3. \nFloating to the inline-start/inline-end and block-start/block-end"},{"refs":[{"id":"ref-for-float-anchor\u2461"},{"id":"ref-for-float-anchor\u2462"},{"id":"ref-for-float-anchor\u2463"},{"id":"ref-for-float-anchor\u2464"},{"id":"ref-for-float-anchor\u2465"},{"id":"ref-for-float-anchor\u2466"},{"id":"ref-for-float-anchor\u2467"},{"id":"ref-for-float-anchor\u2468"},{"id":"ref-for-float-anchor\u2460\u24ea"},{"id":"ref-for-float-anchor\u2460\u2460"},{"id":"ref-for-float-anchor\u2460\u2461"}],"title":"3.1. The float-reference property"},{"refs":[{"id":"ref-for-float-anchor\u2460\u2462"}],"title":"5. Deferring page floats"},{"refs":[{"id":"ref-for-float-anchor\u2460\u2463"},{"id":"ref-for-float-anchor\u2460\u2464"},{"id":"ref-for-float-anchor\u2460\u2465"},{"id":"ref-for-float-anchor\u2460\u2466"}],"title":"5.1. The float-defer property"},{"refs":[{"id":"ref-for-float-anchor\u2460\u2467"}],"title":"8. Page float placement"}],"url":"#float-anchor"},
"float-block-formatting-context": {"dfnID":"float-block-formatting-context","dfnText":"Float block formatting context","external":false,"refSections":[],"url":"#float-block-formatting-context"},
"float-containing-block-formatting-context": {"dfnID":"float-containing-block-formatting-context","dfnText":"Float containing block formatting context","external":false,"refSections":[{"refs":[{"id":"ref-for-float-containing-block-formatting-context"},{"id":"ref-for-float-containing-block-formatting-context\u2460"},{"id":"ref-for-float-containing-block-formatting-context\u2461"},{"id":"ref-for-float-containing-block-formatting-context\u2462"},{"id":"ref-for-float-containing-block-formatting-context\u2463"}],"title":"3.1. The float-reference property"},{"refs":[{"id":"ref-for-float-containing-block-formatting-context\u2464"},{"id":"ref-for-float-containing-block-formatting-context\u2465"},{"id":"ref-for-float-containing-block-formatting-context\u2466"}],"title":"9.1. \nDifferences between inline floats and absolutely positioned elements"}],"url":"#float-containing-block-formatting-context"},
"float-reference": {"dfnID":"float-reference","dfnText":"Float reference","external":false,"refSections":[{"refs":[{"id":"ref-for-float-reference"}],"title":"1. Overview"},{"refs":[{"id":"ref-for-float-reference\u2460"},{"id":"ref-for-float-reference\u2461"}],"title":"3. \nFloating to the inline-start/inline-end and block-start/block-end"},{"refs":[{"id":"ref-for-float-reference\u2462"},{"id":"ref-for-float-reference\u2463"},{"id":"ref-for-float-reference\u2464"},{"id":"ref-for-float-reference\u2465"},{"id":"ref-for-float-reference\u2466"},{"id":"ref-for-float-reference\u2467"},{"id":"ref-for-float-reference\u2468"},{"id":"ref-for-float-reference\u2460\u24ea"},{"id":"ref-for-float-reference\u2460\u2460"},{"id":"ref-for-float-reference\u2460\u2461"},{"id":"ref-for-float-reference\u2460\u2462"}],"title":"3.1. The float-reference property"},{"refs":[{"id":"ref-for-float-reference\u2460\u2463"},{"id":"ref-for-float-reference\u2460\u2464"},{"id":"ref-for-float-reference\u2460\u2465"},{"id":"ref-for-float-reference\u2460\u2466"},{"id":"ref-for-float-reference\u2460\u2467"},{"id":"ref-for-float-reference\u2460\u2468"},{"id":"ref-for-float-reference\u2461\u24ea"},{"id":"ref-for-float-reference\u2461\u2460"},{"id":"ref-for-float-reference\u2461\u2461"},{"id":"ref-for-float-reference\u2461\u2462"},{"id":"ref-for-float-reference\u2461\u2463"},{"id":"ref-for-float-reference\u2461\u2464"},{"id":"ref-for-float-reference\u2461\u2465"},{"id":"ref-for-float-reference\u2461\u2466"},{"id":"ref-for-float-reference\u2461\u2467"},{"id":"ref-for-float-reference\u2461\u2468"},{"id":"ref-for-float-reference\u2462\u24ea"}],"title":"3.2. The float property"},{"refs":[{"id":"ref-for-float-reference\u2462\u2460"},{"id":"ref-for-float-reference\u2462\u2461"},{"id":"ref-for-float-reference\u2462\u2462"},{"id":"ref-for-float-reference\u2462\u2463"}],"title":"4. \nThe clear property"},{"refs":[{"id":"ref-for-float-reference\u2462\u2464"},{"id":"ref-for-float-reference\u2462\u2465"},{"id":"ref-for-float-reference\u2462\u2466"},{"id":"ref-for-float-reference\u2462\u2467"},{"id":"ref-for-float-reference\u2462\u2468"},{"id":"ref-for-float-reference\u2463\u24ea"},{"id":"ref-for-float-reference\u2463\u2460"},{"id":"ref-for-float-reference\u2463\u2461"}],"title":"8. Page float placement"},{"refs":[{"id":"ref-for-float-reference\u2463\u2462"},{"id":"ref-for-float-reference\u2463\u2463"},{"id":"ref-for-float-reference\u2463\u2464"},{"id":"ref-for-float-reference\u2463\u2465"},{"id":"ref-for-float-reference\u2463\u2466"},{"id":"ref-for-float-reference\u2463\u2467"},{"id":"ref-for-float-reference\u2463\u2468"},{"id":"ref-for-float-reference\u2464\u24ea"}],"title":"8.2. Rules for page float stacking"}],"url":"#float-reference"},
"funcdef-float-snap-block": {"dfnID":"funcdef-float-snap-block","dfnText":"snap-block()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-float-snap-block"},{"id":"ref-for-funcdef-float-snap-block\u2460"}],"title":"3.2. The float property"}],"url":"#funcdef-float-snap-block"},
"funcdef-float-snap-inline": {"dfnID":"funcdef-float-snap-inline","dfnText":"snap-inline()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-float-snap-inline"},{"id":"ref-for-funcdef-float-snap-inline\u2460"}],"title":"3.2. The float property"}],"url":"#funcdef-float-snap-inline"},
"initial-float-reference": {"dfnID":"initial-float-reference","dfnText":"Initial float reference","external":false,"refSections":[{"refs":[{"id":"ref-for-initial-float-reference"},{"id":"ref-for-initial-float-reference\u2460"}],"title":"5. Deferring page floats"},{"refs":[{"id":"ref-for-initial-float-reference\u2461"},{"id":"ref-for-initial-float-reference\u2462"},{"id":"ref-for-initial-float-reference\u2463"},{"id":"ref-for-initial-float-reference\u2464"},{"id":"ref-for-initial-float-reference\u2465"},{"id":"ref-for-initial-float-reference\u2466"},{"id":"ref-for-initial-float-reference\u2467"}],"title":"5.1. The float-defer property"},{"refs":[{"id":"ref-for-initial-float-reference\u2468"},{"id":"ref-for-initial-float-reference\u2460\u24ea"}],"title":"8. Page float placement"}],"url":"#initial-float-reference"},
"inline-float": {"dfnID":"inline-float","dfnText":"Inline float","external":false,"refSections":[{"refs":[{"id":"ref-for-inline-float"}],"title":"3.1. The float-reference property"},{"refs":[{"id":"ref-for-inline-float\u2460"},{"id":"ref-for-inline-float\u2461"}],"title":"3.2. The float property"},{"refs":[{"id":"ref-for-inline-float\u2462"},{"id":"ref-for-inline-float\u2463"},{"id":"ref-for-inline-float\u2464"}],"title":"4. \nThe clear property"},{"refs":[{"id":"ref-for-inline-float\u2465"}],"title":"5. Deferring page floats"},{"refs":[{"id":"ref-for-inline-float\u2466"}],"title":"5.1. The float-defer property"},{"refs":[{"id":"ref-for-inline-float\u2467"}],"title":"7. The float-offset property"}],"url":"#inline-float"},
"not-overlapping": {"dfnID":"not-overlapping","dfnText":"Not overlapping","external":false,"refSections":[{"refs":[{"id":"ref-for-not-overlapping"}],"title":"8.2. Rules for page float stacking"}],"url":"#not-overlapping"},
"page-float": {"dfnID":"page-float","dfnText":"Page float","external":false,"refSections":[{"refs":[{"id":"ref-for-page-float"},{"id":"ref-for-page-float\u2460"},{"id":"ref-for-page-float\u2461"}],"title":"3.1. The float-reference property"},{"refs":[{"id":"ref-for-page-float\u2462"},{"id":"ref-for-page-float\u2463"}],"title":"3.2. The float property"},{"refs":[{"id":"ref-for-page-float\u2464"},{"id":"ref-for-page-float\u2465"}],"title":"4. \nThe clear property"},{"refs":[{"id":"ref-for-page-float\u2466"}],"title":"5. Deferring page floats"},{"refs":[{"id":"ref-for-page-float\u2467"}],"title":"5.1. The float-defer property"},{"refs":[{"id":"ref-for-page-float\u2468"},{"id":"ref-for-page-float\u2460\u24ea"}],"title":"7. The float-offset property"}],"url":"#page-float"},
"propdef-clear": {"dfnID":"propdef-clear","dfnText":"clear","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-clear"}],"title":"1. Overview"},{"refs":[{"id":"ref-for-propdef-clear\u2460"},{"id":"ref-for-propdef-clear\u2461"}],"title":"4. \nThe clear property"},{"refs":[{"id":"ref-for-propdef-clear\u2462"},{"id":"ref-for-propdef-clear\u2463"}],"title":"8.2. Rules for page float stacking"}],"url":"#propdef-clear"},
"propdef-float": {"dfnID":"propdef-float","dfnText":"float","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-float"}],"title":"1. Overview"},{"refs":[{"id":"ref-for-propdef-float\u2460"}],"title":"3. \nFloating to the inline-start/inline-end and block-start/block-end"},{"refs":[{"id":"ref-for-propdef-float\u2461"}],"title":"3.2. The float property"},{"refs":[{"id":"ref-for-propdef-float\u2462"}],"title":"7. The float-offset property"},{"refs":[{"id":"ref-for-propdef-float\u2463"}],"title":"8.2. Rules for page float stacking"}],"url":"#propdef-float"},
"propdef-float-defer": {"dfnID":"propdef-float-defer","dfnText":"float-defer","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-float-defer"}],"title":"5. Deferring page floats"},{"refs":[{"id":"ref-for-propdef-float-defer\u2460"}],"title":"5.1. The float-defer property"},{"refs":[{"id":"ref-for-propdef-float-defer\u2461"}],"title":"10. Overconstrained floats"}],"url":"#propdef-float-defer"},
"propdef-float-offset": {"dfnID":"propdef-float-offset","dfnText":"float-offset","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-float-offset"},{"id":"ref-for-propdef-float-offset\u2460"}],"title":"7. The float-offset property"},{"refs":[{"id":"ref-for-propdef-float-offset\u2461"}],"title":"8.2. Rules for page float stacking"}],"url":"#propdef-float-offset"},
"propdef-float-reference": {"dfnID":"propdef-float-reference","dfnText":"float-reference","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-float-reference"}],"title":"3. \nFloating to the inline-start/inline-end and block-start/block-end"},{"refs":[{"id":"ref-for-propdef-float-reference\u2460"}],"title":"3.1. The float-reference property"},{"refs":[{"id":"ref-for-propdef-float-reference\u2461"},{"id":"ref-for-propdef-float-reference\u2462"},{"id":"ref-for-propdef-float-reference\u2463"}],"title":"8. Page float placement"}],"url":"#propdef-float-reference"},
"valdef-clear-all": {"dfnID":"valdef-clear-all","dfnText":"all","external":false,"refSections":[],"url":"#valdef-clear-all"},
"valdef-clear-block-end": {"dfnID":"valdef-clear-block-end","dfnText":"block-end","external":false,"refSections":[],"url":"#valdef-clear-block-end"},
"valdef-clear-block-start": {"dfnID":"valdef-clear-block-start","dfnText":"block-start","external":false,"refSections":[],"url":"#valdef-clear-block-start"},
"valdef-clear-both": {"dfnID":"valdef-clear-both","dfnText":"both","external":false,"refSections":[],"url":"#valdef-clear-both"},
"valdef-clear-both-block": {"dfnID":"valdef-clear-both-block","dfnText":"both-block","external":false,"refSections":[],"url":"#valdef-clear-both-block"},
"valdef-clear-both-inline": {"dfnID":"valdef-clear-both-inline","dfnText":"both-inline","external":false,"refSections":[],"url":"#valdef-clear-both-inline"},
"valdef-clear-bottom": {"dfnID":"valdef-clear-bottom","dfnText":"bottom","external":false,"refSections":[],"url":"#valdef-clear-bottom"},
"valdef-clear-inline-end": {"dfnID":"valdef-clear-inline-end","dfnText":"inline-end","external":false,"refSections":[],"url":"#valdef-clear-inline-end"},
"valdef-clear-inline-start": {"dfnID":"valdef-clear-inline-start","dfnText":"inline-start","external":false,"refSections":[],"url":"#valdef-clear-inline-start"},
"valdef-clear-left": {"dfnID":"valdef-clear-left","dfnText":"left","external":false,"refSections":[],"url":"#valdef-clear-left"},
"valdef-clear-right": {"dfnID":"valdef-clear-right","dfnText":"right","external":false,"refSections":[],"url":"#valdef-clear-right"},
"valdef-clear-top": {"dfnID":"valdef-clear-top","dfnText":"top","external":false,"refSections":[],"url":"#valdef-clear-top"},
"valdef-float-block-end": {"dfnID":"valdef-float-block-end","dfnText":"block-end","external":false,"refSections":[],"url":"#valdef-float-block-end"},
"valdef-float-block-start": {"dfnID":"valdef-float-block-start","dfnText":"block-start","external":false,"refSections":[],"url":"#valdef-float-block-start"},
"valdef-float-bottom": {"dfnID":"valdef-float-bottom","dfnText":"bottom","external":false,"refSections":[],"url":"#valdef-float-bottom"},
"valdef-float-inline-end": {"dfnID":"valdef-float-inline-end","dfnText":"inline-end","external":false,"refSections":[],"url":"#valdef-float-inline-end"},
"valdef-float-inline-start": {"dfnID":"valdef-float-inline-start","dfnText":"inline-start","external":false,"refSections":[],"url":"#valdef-float-inline-start"},
"valdef-float-left": {"dfnID":"valdef-float-left","dfnText":"left","external":false,"refSections":[],"url":"#valdef-float-left"},
"valdef-float-none": {"dfnID":"valdef-float-none","dfnText":"none","external":false,"refSections":[],"url":"#valdef-float-none"},
"valdef-float-reference-column": {"dfnID":"valdef-float-reference-column","dfnText":"column","external":false,"refSections":[],"url":"#valdef-float-reference-column"},
"valdef-float-reference-inline": {"dfnID":"valdef-float-reference-inline","dfnText":"inline","external":false,"refSections":[],"url":"#valdef-float-reference-inline"},
"valdef-float-reference-page": {"dfnID":"valdef-float-reference-page","dfnText":"page","external":false,"refSections":[],"url":"#valdef-float-reference-page"},
"valdef-float-reference-region": {"dfnID":"valdef-float-reference-region","dfnText":"region","external":false,"refSections":[],"url":"#valdef-float-reference-region"},
"valdef-float-right": {"dfnID":"valdef-float-right","dfnText":"right","external":false,"refSections":[],"url":"#valdef-float-right"},
"valdef-float-snap-block": {"dfnID":"valdef-float-snap-block","dfnText":"snap-block","external":false,"refSections":[],"url":"#valdef-float-snap-block"},
"valdef-float-snap-inline": {"dfnID":"valdef-float-snap-inline","dfnText":"snap-inline","external":false,"refSections":[],"url":"#valdef-float-snap-inline"},
"valdef-float-top": {"dfnID":"valdef-float-top","dfnText":"top","external":false,"refSections":[],"url":"#valdef-float-top"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-link-titles */
"use strict";
{
let linkTitleData = {
"https://drafts.csswg.org/css-values-4/#length-value": "Expands to: advance measure | cap | ch | cm | dvb | dvh | dvi | dvmax | dvmin | dvw | em | ex | ic | in | lh | lvb | lvh | lvi | lvmax | lvmin | lvw | mm | pc | pt | px | q | rcap | rch | rem | rex | ric | rlh | svb | svh | svi | svmax | svmin | svw | vb | vh | vi | vmax | vmin | vw",
};

function setTypeTitles() {
	for(let el of document.querySelectorAll("a[href]")) {
		if(el.href in linkTitleData && !el.hasAttribute("title")) {
			el.setAttribute("title", linkTitleData[el.href]);
		}
	}
}

document.addEventListener("DOMContentLoaded", setTypeTitles);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#float": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"float","type":"dfn","url":"#float"},
"#float-anchor": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"float anchor","type":"dfn","url":"#float-anchor"},
"#float-containing-block-formatting-context": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"float containing block formatting context","type":"dfn","url":"#float-containing-block-formatting-context"},
"#float-reference": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"float reference","type":"dfn","url":"#float-reference"},
"#funcdef-float-snap-block": {"export":true,"for_":["float"],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"snap-block()","type":"function","url":"#funcdef-float-snap-block"},
"#funcdef-float-snap-inline": {"export":true,"for_":["float"],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"snap-inline()","type":"function","url":"#funcdef-float-snap-inline"},
"#initial-float-reference": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"initial float reference","type":"dfn","url":"#initial-float-reference"},
"#inline-float": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"inline float","type":"dfn","url":"#inline-float"},
"#not-overlapping": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"not overlapping","type":"dfn","url":"#not-overlapping"},
"#page-float": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"page float","type":"dfn","url":"#page-float"},
"#propdef-clear": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"clear","type":"property","url":"#propdef-clear"},
"#propdef-float": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"float","type":"property","url":"#propdef-float"},
"#propdef-float-defer": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"float-defer","type":"property","url":"#propdef-float-defer"},
"#propdef-float-offset": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"float-offset","type":"property","url":"#propdef-float-offset"},
"#propdef-float-reference": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-page-floats","spec":"css-page-floats-3","status":"local","text":"float-reference","type":"property","url":"#propdef-float-reference"},
"https://drafts.csswg.org/css-break-4/#fragmentation-container": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-break","spec":"css-break-4","status":"current","text":"fragmentation container","type":"dfn","url":"https://drafts.csswg.org/css-break-4/#fragmentation-container"},
"https://drafts.csswg.org/css-break-4/#fragmentation-context": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-break","spec":"css-break-4","status":"current","text":"fragmentation context","type":"dfn","url":"https://drafts.csswg.org/css-break-4/#fragmentation-context"},
"https://drafts.csswg.org/css-exclusions-1/#propdef-wrap-flow": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-exclusions","spec":"css3-exclusions","status":"current","text":"wrap-flow","type":"property","url":"https://drafts.csswg.org/css-exclusions-1/#propdef-wrap-flow"},
"https://drafts.csswg.org/css-values-4/#comb-comma": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":",","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-comma"},
"https://drafts.csswg.org/css-values-4/#comb-one": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"|","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"https://drafts.csswg.org/css-values-4/#css-wide-keywords": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"css-wide keywords","type":"dfn","url":"https://drafts.csswg.org/css-values-4/#css-wide-keywords"},
"https://drafts.csswg.org/css-values-4/#length-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<length>","type":"type","url":"https://drafts.csswg.org/css-values-4/#length-value"},
"https://drafts.csswg.org/css-values-4/#mult-opt": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"?","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-opt"},
"https://drafts.csswg.org/css-values-4/#percentage-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<percentage>","type":"type","url":"https://drafts.csswg.org/css-values-4/#percentage-value"},
"https://drafts.csswg.org/css-values-4/#typedef-length-percentage": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<length-percentage>","type":"type","url":"https://drafts.csswg.org/css-values-4/#typedef-length-percentage"},
"https://drafts.csswg.org/css-writing-modes-3/#propdef-direction": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-3","status":"current","text":"direction","type":"property","url":"https://drafts.csswg.org/css-writing-modes-3/#propdef-direction"},
"https://drafts.csswg.org/css-writing-modes-4/#inline-size": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-4","status":"current","text":"inline size","type":"dfn","url":"https://drafts.csswg.org/css-writing-modes-4/#inline-size"},
"https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-writing-modes","spec":"css-writing-modes-4","status":"current","text":"writing-mode","type":"property","url":"https://drafts.csswg.org/css-writing-modes-4/#propdef-writing-mode"},
"https://www.w3.org/TR/CSS22/visudet.html#propdef-max-height": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css22","status":"snapshot","text":"max-height","type":"dfn","url":"https://www.w3.org/TR/CSS22/visudet.html#propdef-max-height"},
"https://www.w3.org/TR/CSS22/visudet.html#propdef-max-width": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css22","status":"snapshot","text":"max-width","type":"dfn","url":"https://www.w3.org/TR/CSS22/visudet.html#propdef-max-width"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>