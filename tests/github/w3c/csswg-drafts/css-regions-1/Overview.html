<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>CSS Regions Module Level 1</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/TR/css-regions-1/" rel="canonical">
  <link href="https://drafts.csswg.org/csslogo.ico" rel="icon">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-wpt */
:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">CSS Regions Module Level 1</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://drafts.csswg.org/css-regions/">https://drafts.csswg.org/css-regions/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/css-regions-1/">https://www.w3.org/TR/css-regions-1/</a>
      <dt>Previous Versions:
      <dd><a href="https://www.w3.org/TR/2014/WD-css-regions-1-20141009/" rel="prev">https://www.w3.org/TR/2014/WD-css-regions-1-20141009/</a>
      <dd><a href="https://www.w3.org/TR/2014/WD-css3-regions-20140218/" rel="prev">https://www.w3.org/TR/2014/WD-css3-regions-20140218/</a>
      <dt>Feedback:
      <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-regions-1">CSSWG Issues Repository</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="49885"><a class="p-name fn u-email email" href="mailto:ratan@microsoft.com">Rossen Atanassov</a> (<span class="p-org org">Microsoft Corporation</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="46659"><a class="p-name fn u-email email" href="mailto:stearns@adobe.com">Alan Stearns</a> (<span class="p-org org">Adobe Systems, Inc.</span>)
      <dt class="editor">Former Editor:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:vhardy@adobe.com">Vincent Hardy</a> (<span class="p-org org">Adobe Systems, Inc.</span>)
      <dt>Suggest an Edit for this Spec:
      <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-regions-1/Overview.bs">GitHub Editor</a>
      <dt>Issues list:
      <dd><a href="https://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;product=CSS&amp;component=Regions&amp;resolution=---&amp;cmdtype=doit">In Bugzilla</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The CSS Regions module allows content from one or more elements to flow through one or more boxes called CSS Regions, fragmented as defined in <a data-link-type="biblio" href="#biblio-css3-break" title="CSS Fragmentation Module Level 3">[CSS3-BREAK]</a>. This module also defines CSSOM to expose both the inputs and outputs of this fragmentation.</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a> is a language for describing the rendering of structured documents
(such as HTML and XML)
on screen, on paper, etc. 
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p>Please send feedback
	by <a href="https://github.com/w3c/csswg-drafts/issues">filing issues in GitHub</a> (preferred),
	including the spec code “css-regions” in the title, like this:
	“[css-regions] <i>…summary of comment…</i>”.
	All issues and comments are <a href="https://lists.w3.org/Archives/Public/public-css-archive/">archived</a>.
	Alternately, feedback can be sent to the (<a href="https://lists.w3.org/Archives/Public/www-style/">archived</a>) public mailing list <a href="mailto:www-style@w3.org?Subject=%5Bcss-regions%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content"> Introduction</span></a>
     <ol class="toc">
      <li><a href="#values"><span class="secno">1.1</span> <span class="content"> Value Definitions</span></a>
     </ol>
    <li>
     <a href="#css-regions-concepts"><span class="secno">2</span> <span class="content"> CSS Regions concepts</span></a>
     <ol class="toc">
      <li><a href="#regions"><span class="secno">2.1</span> <span class="content"> Regions</span></a>
      <li><a href="#region-chain-section"><span class="secno">2.2</span> <span class="content"> Region chain</span></a>
      <li><a href="#last-region"><span class="secno">2.3</span> <span class="content"> Last region</span></a>
      <li><a href="#named-flow-section"><span class="secno">2.4</span> <span class="content"> Named flows</span></a>
      <li><a href="#regions-flow-breaking-rules"><span class="secno">2.5</span> <span class="content"> Regions flow breaking rules</span></a>
     </ol>
    <li>
     <a href="#properties"><span class="secno">3</span> <span class="content"> Properties</span></a>
     <ol class="toc">
      <li><a href="#the-flow-into-property"><span class="secno">3.1</span> <span class="content"> The <span class="property">flow-into</span> property</span></a>
      <li>
       <a href="#flow-from"><span class="secno">3.2</span> <span class="content"> The <span class="property">flow-from</span> property</span></a>
       <ol class="toc">
        <li><a href="#circular-dependencies"><span class="secno">3.2.1</span> <span class="content"> Cycle Detection</span></a>
        <li><a href="#fragmenting-regions"><span class="secno">3.2.2</span> <span class="content"> Nested fragmentation contexts</span></a>
       </ol>
      <li><a href="#region-flow-break"><span class="secno">3.3</span> <span class="content"> Controlling Region Flow Breaks</span></a>
      <li><a href="#the-region-fragment-property"><span class="secno">3.4</span> <span class="content"> The region-fragment property</span></a>
     </ol>
    <li>
     <a href="#cssom_view_and_css_regions"><span class="secno">4</span> <span class="content"> CSSOM</span></a>
     <ol class="toc">
      <li><a href="#the-namedflow-interface"><span class="secno">4.1</span> <span class="content"> The NamedFlow interface</span></a>
      <li><a href="#the-region-interface"><span class="secno">4.2</span> <span class="content"> The Region mixin</span></a>
      <li><a href="#named-flow-events"><span class="secno">4.3</span> <span class="content"> Named flow events</span></a>
      <li>
       <a href="#cssomview-and-regions"><span class="secno">4.4</span> <span class="content"> Clarifications on pre-existing APIs</span></a>
       <ol class="toc">
        <li><a href="#cssomview-getclientrects-and-getboundingclientrect"><span class="secno">4.4.1</span> <span class="content"> <code class="idl">getClientRects()</code> and <code>getBoundingClientRect()</code></span></a>
        <li><a href="#cssomview-offset-attributes"><span class="secno">4.4.2</span> <span class="content"> <code class="idl">offsetTop</code>, <code class="idl">offsetLeft</code>, <code class="idl">offsetWidth</code>, <code class="idl">offsetHeight</code> and <code class="idl">offsetParent</code></span></a>
       </ol>
     </ol>
    <li><a href="#multi-column-regions"><span class="secno">5</span> <span class="content"> Multi-column regions</span></a>
    <li><a href="#pseudo_elements"><span class="secno">6</span> <span class="content"> Pseudo-elements</span></a>
    <li>
     <a href="#regions-visual-formatting-details"><span class="secno">7</span> <span class="content"> Regions visual formatting details</span></a>
     <ol class="toc">
      <li><a href="#processing-model"><span class="secno">7.1</span> <span class="content"> Processing model</span></a>
      <li>
       <a href="#regions-flow-content-box"><span class="secno">7.2</span> <span class="content"> The Region Flow Content Box (RFCB)</span></a>
       <ol class="toc">
        <li><a href="#rfcb-width-resolution"><span class="secno">7.2.1</span> <span class="content"> RFCB <span class="property">width</span> resolution</span></a>
       </ol>
      <li>
       <a href="#regions-visual-formatting-steps"><span class="secno">7.3</span> <span class="content"> Regions visual formatting steps</span></a>
       <ol class="toc">
        <li>
         <a href="#rfcb-flow-fragment-height-resolution"><span class="secno">7.3.1</span> <span class="content"> Step 1: RFCB flow fragment height resolution</span></a>
         <ol class="toc">
          <li><a href="#rfcb-flow-fragment-height-resolution-phase-1"><span class="secno">7.3.1.1</span> <span class="content"> RFCB flow fragment height resolution, Phase 1</span></a>
          <li><a href="#rfcb-flow-fragment-height-resolution-phase-2"><span class="secno">7.3.1.2</span> <span class="content"> RFCB flow fragment height resolution, Phase 2</span></a>
         </ol>
        <li><a href="#regions-boxes-layout"><span class="secno">7.3.2</span> <span class="content"> Step 2: region boxes layout</span></a>
        <li><a href="#named-flows-layout"><span class="secno">7.3.3</span> <span class="content"> Step 3: named flows layout</span></a>
       </ol>
      <li><a href="#regions-visual-formatting-implementation-note"><span class="secno">7.4</span> <span class="content"> Regions visual formatting: implementation note</span></a>
      <li>
       <a href="#regions-visual-formatting-examples"><span class="secno">7.5</span> <span class="content"> Regions visual formatting example</span></a>
       <ol class="toc">
        <li><a href="#step1-phase1-example"><span class="secno">7.5.1</span> <span class="content"> Step 1 - Phase 1: Laying out RFCBs with used height of zero</span></a>
        <li><a href="#step1-phase2-example"><span class="secno">7.5.2</span> <span class="content"> Step 1 - Phase 2: Layout flow to compute the RFCBs' flow fragments heights</span></a>
        <li><a href="#step2-example"><span class="secno">7.5.3</span> <span class="content"> Step 2: Layout document and regions without named flows</span></a>
        <li><a href="#step3-example"><span class="secno">7.5.4</span> <span class="content"> Step 3: named flows layout</span></a>
       </ol>
     </ol>
    <li><a href="#relation-to-document-events"><span class="secno">8</span> <span class="content"> Relation to document events</span></a>
    <li><a href="#relation-to-other-specifications"><span class="secno">9</span> <span class="content"> Relation to other specifications</span></a>
    <li><a href="#usecases"><span class="secno">10</span> <span class="content"> Use Cases</span></a>
    <li>
     <a href="#changes"><span class="secno">11</span> <span class="content"> Changes</span></a>
     <ol class="toc">
      <li><a href="#changes_from_Oct_9_2014"><span class="secno">11.1</span> <span class="content"> Changes from <span>October 9<sup>th</sup> 2014</span> version</span></a>
      <li><a href="#changes_from_Feb_18_2014"><span class="secno">11.2</span> <span class="content"> Changes from <span>February 18<sup>th</sup> 2014</span> version</span></a>
      <li><a href="#changes_from_May_28_2013"><span class="secno">11.3</span> <span class="content"> Changes from <span>May 28<sup>th</sup> 2013</span> version</span></a>
      <li><a href="#changes_from_Aug_28_2012"><span class="secno">11.4</span> <span class="content"> Changes from <span>August 28<sup>th</sup> 2012</span> version</span></a>
      <li><a href="#changes_from_May_03_2012"><span class="secno">11.5</span> <span class="content"> Changes from <span>May 3<sup>rd</sup> 2012</span> version</span></a>
      <li><a href="#older_changes"><span class="secno">11.6</span> <span class="content">Older Changes</span></a>
     </ol>
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content"> Acknowledgments</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> Document conventions</span></a>
      <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content"> Conformance classes</span></a>
      <li>
       <a href="#w3c-partial"><span class="secno"></span> <span class="content"> Partial implementations</span></a>
       <ol class="toc">
        <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span class="content"> Implementations of Unstable and Proprietary Features</span></a>
       </ol>
      <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> Non-experimental implementations</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#property-index"><span class="secno"></span> <span class="content">Property Index</span></a>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content"> Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>The core concept behind CSS Regions
	is the ability to say,
	"Display <em>this</em> content (a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow">named flow</a>)
	over <em>there</em> (a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain">region chain</a>)."
	The simplest example is:</p>
   <div class="example" id="example-4d2695ea">
    <a class="self-link" href="#example-4d2695ea"></a> 
<pre><code>#this {
  flow-into: my-flow;
}

#there {
  flow-from: my-flow;
}
</code></pre>
   </div>
   <p>These two declarations will take
	the element that matches <code>#this</code>,
	put it into a flow named "my-flow",
	and display the contents of "my-flow"
	in the box from the element that matches <code>#there</code>.
	This example has a single content source for the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①">named flow</a>,
	and a single box for the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain①">region chain</a>. <span id="ref-for-named-flow②">Named flows</span> can also have multiple sources
	and use multiple boxes for the <span id="ref-for-region-chain②">region chain</span>.</p>
   <p>The <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow③">named flow</a> mechanism can be used
	in several different ways -
	some of which are
	custom overflow handling,
	aggregating content,
	linked display boxes,
	magazine-style layout,
	and flowing content through areas in a paginated view.</p>
   <div class="example" id="example-8cf70305">
    <a class="self-link" href="#example-8cf70305"></a> Linked display boxes can be created
		to display article content above and below
		other content on a page.
		Given markup like this: 
<pre><code class="html">&lt;article> ...some content... &lt;/article>
&lt;aside> ad or image content &lt;/aside>
</code></pre>
    <p>The &lt;aside> content will be displayed
		below all of the article content.
		On a large screen the page might display without scrolling,
		but on a small screen the &lt;aside> content
		might not be visible until the view scrolls.
		If it’s important to show at least some
		of the &lt;aside> content in the initial view,
		CSS Regions can fragment the article content across two boxes -
		one above the &lt;aside> and one below.</p>
    <p>In this example (for simplicity’s sake)
		we create the boxes with additional elements:</p>
<pre><code class="html">&lt;article> ...some content... &lt;/article>

&lt;div class="top region">&lt;/div>
&lt;aside> ad or image content &lt;/aside>
&lt;div class="region">&lt;/div>
</code></pre>
<pre><code>article {
  flow-into: article-flow;
}
.region {
  flow-from: article-flow;
}
.top {
  max-height: 80vh;
}
</code></pre>
    <p>So the top box in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain③">region chain</a> is limited to 80% of the viewport height.
		If the article content doesn’t fit in that box,
		the article will continue
		in the second box after the &lt;aside> content.</p>
    <figure style="float:left; margin:1em;">
      <img alt="Article and aside rendering without CSS Regions" src="images/linked-boxes-before.png"> 
     <figcaption> Rendering without CSS Regions </figcaption>
    </figure>
    <figure style="float:left; margin:1em;">
      <img alt="Article and aside rendering with CSS Regions" src="images/linked-boxes-after.png"> 
     <figcaption> Rendering with CSS Regions </figcaption>
    </figure>
    <p style="clear:left;">In the images above,
			the gray area represents
			the content below the screen edge
			in the initial view. </p>
    <p>This example links just two boxes together,
		but more boxes could be added to the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain④">region chain</a> to regularly interleave other content with the article.</p>
   </div>
   <div class="example" id="example-f605d07f">
    <a class="self-link" href="#example-f605d07f"></a> 
    <p>Custom overflow handling can be accomplished by linking a separate overflow box. In this example, the overflow box is nestled inside a menu in the markup, and only displays if the menu is toggled.</p>
<pre><code class="html">&lt;nav> ...some links... &lt;/nav>

&lt;div class="menu">
  &lt;nav>&lt;/nav>
  ...some more links...
&lt;/div>
</code></pre>
    <p>If the links in the main nav element are placed in a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow④">named flow</a>, that flow can be directed through both the main nav element and the overflow nav box in the menu:</p>
<pre><code>nav a {
  flow-into: nav-link-flow;
}
nav {
  flow-from: nav-link-flow;
}
</code></pre>
    <p>Then the main nav element and the menu can be arranged with constraints such that when the screen is too narrow for the main nav element to display all of the navigation links, the overflow moves to the menu.</p>
    <figure>
      <img alt="Wide nav bar showing all of the links" src="images/menu-wide.png"> 
     <figcaption> Wide rendering with menu shown </figcaption>
    </figure>
    <figure>
      <img alt="Narrow nav bar with some of the links in the menu" src="images/menu-narrow.png"> 
     <figcaption> Narrow rendering with menu shown </figcaption>
    </figure>
   </div>
   <div class="example" id="example-ee40b35e">
    <a class="self-link" href="#example-ee40b35e"></a> 
    <p>Since content is assigned to a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤">named flow</a> using a CSS selector, the content can come from multiple sources. The resulting aggregation can be displayed in a single box or flowed through multiple boxes as above.</p>
    <p>So given this markup:</p>
<pre><code class="html">&lt;div class="breaking-news">&lt;/div>

&lt;article>News story&lt;/article>
&lt;article class="breaking">Sports story&lt;/article>
&lt;article>News story&lt;/article>
&lt;article class="breaking">Entertainment story&lt;/article>
&lt;article>Sports story&lt;/article>
</code></pre>
    <p>You can take the "breaking" stories and display them above all the others using two lines of CSS:</p>
<pre><code>.breaking {
  flow-into: breaking-news;
}
.breaking-news {
  flow-from: breaking-news;
}
</code></pre>
    <p>Given more data accessible to CSS selectors, you could rearrange the articles in other ways (sports on top, etc.) depending on the user’s preferences.</p>
   </div>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p><strong><a data-link-type="dfn" href="#css-region" id="ref-for-css-region">CSS Regions</a> are independent from layout</strong></p>
    <p>Any of the CSS layout facilities can be used
		to create, position and size boxes that can become <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①">CSS Regions</a>.</p>
    <p>The CSS Regions module does not
		define a layout mechanism
		and is meant to integrate
		with existing and future CSS layout facilities.</p>
   </div>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p><strong><a data-link-type="dfn" href="#css-region" id="ref-for-css-region②">CSS Regions</a> do not have to be elements</strong></p>
    <p>The CSS Regions module is independent
		of the layout of boxes and
		the mechanisms used to create them.</p>
    <p>For simplicity,
		our examples tend to
		use elements to define the boxes.
		Any other mechanism available
		in markup or style
		to create stylable boxes could be used instead,
		such as pseudo-elements
		or the @slot rule proposed
		by the CSS Page Template Module <a data-link-type="biblio" href="#biblio-css3-page-template" title="CSS Pagination Templates Module Level 3">[CSS3-PAGE-TEMPLATE]</a>.</p>
    <p>The only requirement
		for box to become a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region③">CSS Region</a> is that the <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from">flow-from</a> property applies to the box.</p>
   </div>
   <h3 class="heading settled" data-level="1.1" id="values"><span class="secno">1.1. </span><span class="content"> Value Definitions</span><a class="self-link" href="#values"></a></h3>
   <p>This specification follows the <a href="https://www.w3.org/TR/CSS2/about.html#property-defs">CSS property definition conventions</a> from <a data-link-type="biblio" href="#biblio-css2" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a> using the <a href="https://www.w3.org/TR/css-values-3/#value-defs">value definition syntax</a> from <a data-link-type="biblio" href="#biblio-css-values-3" title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</a>.
	Value types not defined in this specification are defined in CSS Values &amp; Units <span title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</span>.
	Combination with other CSS modules may expand the definitions of these value types.</p>
   <p>In addition to the property-specific values listed in their definitions,
	all properties defined in this specification
	also accept the <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#css-wide-keywords" id="ref-for-css-wide-keywords">CSS-wide keywords</a> as their property value.
	For readability they have not been repeated explicitly.</p>
   <h2 class="heading settled" data-level="2" id="css-regions-concepts"><span class="secno">2. </span><span class="content"> CSS Regions concepts</span><a class="self-link" href="#css-regions-concepts"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="regions"><span class="secno">2.1. </span><span class="content"> Regions</span><a class="self-link" href="#regions"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="css-region">CSS Region</dfn> is a block container
	that has an associated <em><a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑥">named flow</a></em> (see the <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from①">flow-from</a> property).</p>
   <h3 class="heading settled" data-level="2.2" id="region-chain-section"><span class="secno">2.2. </span><span class="content"> Region chain</span><a class="self-link" href="#region-chain-section"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="region-chain">region chain</dfn> is the sequence of regions
	that are associated with
	a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑦">named flow</a>. <a data-link-type="dfn" href="#css-region" id="ref-for-css-region④">CSS Regions</a> in a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain⑤">region chain</a> receive content from the <span id="ref-for-named-flow⑧">named flow</span> following their order in the chain. <span id="ref-for-css-region⑤">CSS Regions</span> are organized
	into a <span id="ref-for-region-chain⑥">region chain</span> according to the document order.</p>
   <h3 class="heading settled" data-level="2.3" id="last-region"><span class="secno">2.3. </span><span class="content"> Last region</span><a class="self-link" href="#last-region"></a></h3>
   <p>A <a data-link-type="dfn" href="#css-region" id="ref-for-css-region⑥">CSS region</a> is deemed to be the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="last usable region | last usable CSS region" data-noexport id="last-usable-region">last usable region</dfn> in a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain⑦">region chain</a> if it is the first region in that chain to have <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#layout-containment" id="ref-for-layout-containment">layout containment</a>,
	or the last region in the chain if none of them have <span id="ref-for-layout-containment①">layout containment</span> (See <a data-link-type="biblio" href="#biblio-css-contain-1" title="CSS Containment Module Level 1">[CSS-CONTAIN-1]</a>).</p>
   <h3 class="heading settled" data-level="2.4" id="named-flow-section"><span class="secno">2.4. </span><span class="content"> Named flows</span><a class="self-link" href="#named-flow-section"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="named-flow">named flow</dfn> is the ordered sequence of content
	associated with a flow with a given identifier.
	Contents in a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑨">named flow</a> are ordered
	according to the document order.</p>
   <p>Content is placed into a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⓪">named flow</a> with the <a class="property css" data-link-type="property" href="#propdef-flow-into" id="ref-for-propdef-flow-into">flow-into</a> property.
	The content in a <span id="ref-for-named-flow①①">named flow</span> is laid out
	in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain⑧">region chain</a> that is associated with this <span id="ref-for-named-flow①②">named flow</span> using the <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from②">flow-from</a> property.</p>
   <p>Content from a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①③">named flow</a> is broken up between regions
	according to the regions flow breaking rules.</p>
   <p>A <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①④">named flow</a> is created when
	some content is moved
	into the flow with the given identifier
	or when at least one <a data-link-type="dfn" href="#css-region" id="ref-for-css-region⑦">CSS Region</a> requests content from that flow.</p>
   <h3 class="heading settled" data-level="2.5" id="regions-flow-breaking-rules"><span class="secno">2.5. </span><span class="content"> Regions flow breaking rules</span><a class="self-link" href="#regions-flow-breaking-rules"></a></h3>
   <p>Breaking a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⑤">named flow</a> across a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain⑨">region chain</a> is similar to breaking a document’s content across pages
	(see <a data-link-type="biblio" href="#biblio-css3page" title="CSS Paged Media Module Level 3">[CSS3PAGE]</a>)
	or a multi-column container’s content across column boxes
	(see <a data-link-type="biblio" href="#biblio-css3col" title="CSS Multi-column Layout Module Level 1">[CSS3COL]</a>).
	One difference is that page boxes are generated
	based on the available content
	whereas a <span id="ref-for-region-chain①⓪">region chain</span> is a set of recipient boxes
	for the <span id="ref-for-named-flow①⑥">named flow</span> content
	whose dynamic generation is not in the scope
	of this specification.</p>
   <p>Each <a data-link-type="dfn" href="#css-region" id="ref-for-css-region⑧">CSS Region</a> in turn
	consumes content from its associated <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⑦">named flow</a>.
	The <span id="ref-for-named-flow①⑧">named flow</span> content is positioned
	in the current region
	until a natural or forced region break occurs,
	at which point the next region
	in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain①①">region chain</a> becomes the current region.
	If there are no more usable <span id="ref-for-css-region⑨">CSS Regions</span> in the <span id="ref-for-region-chain①②">region chain</span> and there is still content in the flow,
	the positioning of the remaining content
	is controlled by the <a class="property css" data-link-type="property" href="#propdef-region-fragment" id="ref-for-propdef-region-fragment">region-fragment</a> property
	on the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region">last usable CSS Region</a> in the chain.</p>
   <p>The CSS regions module follows
	the fragmentation rules defined
	in the CSS Fragmentation Module Level 3
	(see <a data-link-type="biblio" href="#biblio-css3-break" title="CSS Fragmentation Module Level 3">[CSS3-BREAK]</a>).</p>
   <h2 class="heading settled" data-level="3" id="properties"><span class="secno">3. </span><span class="content"> Properties</span><a class="self-link" href="#properties"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="the-flow-into-property"><span class="secno">3.1. </span><span class="content"> The <a class="property css" data-link-type="property" href="#propdef-flow-into" id="ref-for-propdef-flow-into①">flow-into</a> property</span><a class="self-link" href="#the-flow-into-property"></a></h3>
   <div class="issue-marker wrapper">
    <div class="issue-marker">
      <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=16527">Issue-16527</a> 
     <div class="issue-details">
      <p class="short-desc">[Shadow]: getFlowByName and shadow DOM</p>
     </div>
    </div>
   </div>
   <p>The ‘flow-into’ property can place an element
	or its contents
	into a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⑨">named flow</a>.
	Content that belongs to the same flow
	is laid out in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain①③">region chain</a> associated with that flow.</p>
   <table class="def propdef" data-link-for-hint="flow-into">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-flow-into">flow-into</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">none <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one">|</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#typedef-ident" id="ref-for-typedef-ident">&lt;ident></a> [element<span id="ref-for-comb-one①">|</span>content]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td>All elements, but not <a href="https://www.w3.org/TR/selectors/#pseudo-elements">pseudo-elements</a> such as <code>::first-line</code>, <code>::first-letter</code>, <code>::before</code> or <code>::after</code>. 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>n/a 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>not animatable 
   </table>
   <dl>
    <dt>none
    <dd> The element is not moved
			to a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow②⓪">named flow</a> and normal CSS processing takes place. 
    <dt><a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a>
    <dd> If the keyword <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="element">element</dfn> is present
			or neither keyword is present,
			then the element is taken out
			of its parent’s flow
			and placed into the flow
			with the name '<a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a>'.
			If the keyword <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="content">content</dfn> is present,
			then only the element’s contents
			are placed into the named flow.
			The element or content is said to have
			a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="specified-flow">specified flow</dfn>.
			The values <code class="css">none</code>, <code class="css">inherit</code>, <code class="css">default</code>, <code class="css">auto</code> and <code class="css">initial</code> are invalid flow names. 
   </dl>
   <p>The <a class="property css" data-link-type="property" href="#propdef-flow-into" id="ref-for-propdef-flow-into②">flow-into</a> property affects
	the visual formatting of elements or contents
	placed into a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow②①">named flow</a> and of the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain①④">region chain</a> laying out content
	from a <span id="ref-for-named-flow②②">named flow</span>.
	The <span class="property" id="ref-for-propdef-flow-into③">flow-into</span> property does not affect
	the CSS cascade and inheritance
	for the elements on which it is specified.
	The <span class="property" id="ref-for-propdef-flow-into④">flow-into</span> property does not affect the <a href="https://www.w3.org/TR/2012/WD-dom-20120405/#introduction-to-the-dom">DOM</a> <a data-link-type="biblio" href="#biblio-dom" title="DOM Standard">[DOM]</a> position of an element or its contents.
	The <span class="property" id="ref-for-propdef-flow-into⑤">flow-into</span> property does not affect ordering
	in non-visual media
	(such as <a href="https://www.w3.org/TR/css3-speech/">speech</a>).
	Likewise, <span class="property" id="ref-for-propdef-flow-into⑥">flow-into</span> does not affect
	the default traversal order
	of sequential navigation modes
	(such as cycling through links,
	see e.g. <a href="https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex"><code>tabindex</code></a> <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a>).</p>
   <p>A <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow②③">named flow</a> needs to be associated
	with a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain①⑤">region chain</a> (one or more <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①⓪">CSS Regions</a>)
	for its content to be visually formatted.
	If no <span id="ref-for-region-chain①⑥">region chain</span> is associated
	with a given <span id="ref-for-named-flow②④">named flow</span>,
	the content in the <span id="ref-for-named-flow②⑤">named flow</span> is not rendered:
	it does not generate boxes
	and is not displayed.</p>
   <p>The children of an element or content
	with a specified flow
	may themselves have a specified flow,
	in which case they become
	the next sibling of the latest element
	or content collected in that flow.
	In some cases,
	the child can become the next sibling
	for one of its ancestors in the same flow.</p>
   <p>Content in a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow②⑥">named flow</a> is sequenced in document order.
	The visual formatting model
	uses the relationships between content
	in the named flow as input,
	rather than the contents’ position
	in the DOM.</p>
   <p>Each <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①①">CSS Region</a> in a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain①⑦">region chain</a> establishes a containing block for absolutely positioned
	elements in the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow②⑦">named flow</a> (see <a data-link-type="biblio" href="#biblio-css21" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>).
	That first <span id="ref-for-css-region①②">CSS Region</span> in a <span id="ref-for-region-chain①⑧">region chain</span> establishes the initial containing block for such absolutely
	positioned elements. <span>Regions</span> don’t establish a containing block for
	fixed positioned elements in the <span id="ref-for-named-flow②⑧">named flow</span>.
	Such fixed positioned elements are still positioned relative
	to the viewport or the page area even if they have been
	redirected into a named flow</p>
   <p>The first region defines the principal <a href="https://www.w3.org/TR/css3-writing-modes/#writing-mode">writing mode</a> for the entire flow.
	The writing mode
	on subsequent regions is ignored.</p>
   <p>If an element has <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#style-containment" id="ref-for-style-containment">style containment</a> (See <a data-link-type="biblio" href="#biblio-css-contain-1" title="CSS Containment Module Level 1">[CSS-CONTAIN-1]</a>),
	then the <a class="property css" data-link-type="property" href="#propdef-flow-into" id="ref-for-propdef-flow-into⑦">flow-into</a> property must be <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#property-scoped" id="ref-for-property-scoped">scoped</a> to that element.</p>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>The <a class="property css" data-link-type="property" href="#propdef-flow-into" id="ref-for-propdef-flow-into⑧">flow-into</a> property moves an element into the flow
		and the interplay with selectors should be considered carefully.</p>
    <p>For example,</p>
<pre>table {flow-into: table-content}</pre>
    <p>will move all tables in the "table-content" <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow②⑨">named flow</a>.
		However, the</p>
<pre>table > * {flow-into: table-content} ...</pre>
    <p>selector will move all immediate children
		of all table elements
		into the "table-content" <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow③⓪">named flow</a> (which may be useful as it will usually result,
		if the immediate children are rows,
		in merging rows of multiple tables),
		but the</p>
<pre>table * {flow-into: table-content}</pre>
    <p>selector will move all descendants
		of table elements into the "table-content" <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow③①">named flow</a>,
		transforming the element tree
		into a flat list in order of opening tags
		(which is probably not intentional).
		This will make all the descendants
		of table elements siblings
		in the <span id="ref-for-named-flow③②">named flow</span>.
		Having the descendants become siblings
		in the <span id="ref-for-named-flow③③">named flow</span> results in a different processing
		(see <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/tables.html#anonymous-boxes">CSS 2.1’s anonymous table objects</a>).
		This note illustrates how authors must exercise caution
		when choosing a particular selector
		for setting the <a class="property css" data-link-type="property" href="#propdef-flow-into" id="ref-for-propdef-flow-into⑨">flow-into</a> property
		to avoid unintended results.</p>
   </div>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>Another consequence of moving elements
		into <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow③④">named flows</a> is that surrounding whitespace
		is not moved into the named flow.
		If you have code like this:</p>
<pre>span {flow-into: span-content}
&lt;span>one&lt;/span>
&lt;span>two&lt;/span>
</pre>
    <p>Then the "span-content" named flow contents
		will contain this:</p>
<pre>&lt;span>one&lt;/span>&lt;span>two&lt;/span>
</pre>
    <p>Which will change the display
		from "one two" to "onetwo".
		If whitespace is significant,
		then moving the parent
		that contains the whitespace
		to the named flow
		is required.</p>
   </div>
   <h3 class="heading settled" data-level="3.2" id="flow-from"><span class="secno">3.2. </span><span class="content"> The <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from③">flow-from</a> property</span><a class="self-link" href="#flow-from"></a></h3>
   <p>The <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from④">flow-from</a> property makes
	a block container a region
	and associates it with
	a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow③⑤">named flow</a>.</p>
   <table class="def propdef" data-link-for-hint="flow-from">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-flow-from">flow-from</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod"><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#typedef-ident" id="ref-for-typedef-ident①">&lt;ident></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②">|</a> none 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>none 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td>Non-replaced <a href="https://www.w3.org/TR/CSS21/visuren.html#block-boxes">block containers</a>. <br> This might be expanded in future versions of the specification to allow other types of containers to receive flow content. 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>n/a 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>not animatable 
   </table>
   <dl>
    <dt><strong>none</strong>
    <dd> The block container is not a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①③">CSS Region</a>. 
    <dt><strong><a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a></strong>
    <dd> The block container becomes a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①④">CSS Region</a> (except as detailed in the text below),
			and is ordered in a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain①⑨">region chain</a> according to its document order.
			The content from the flow
			with the <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a> name will be <a href="#region-flow-break">broken
			into fragments</a> and visually formatted in the <a href="https://www.w3.org/TR/CSS21/visuren.html#principal-box">principal boxes</a> of the <span>regions</span> in the <span id="ref-for-region-chain②⓪">region chain</span>. <br> If there is no flow with name <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a>,
			then the block container does not
			format any content visually. 
   </dl>
   <p>If the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-content-3/#propdef-content" id="ref-for-propdef-content">content</a> property computes
	to something else than <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-content-3/#valdef-content-normal" id="ref-for-valdef-content-normal">normal</a> (or <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-content-3/#valdef-content-none" id="ref-for-valdef-content-none">none</a> for a pseudo-element),
	the block container does not become
	a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①⑤">CSS Region</a>.
	If the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-display-4/#propdef-display" id="ref-for-propdef-display">display</a> property
	of the block container
	or one of its ancestors
	computes to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-4/#valdef-display-none" id="ref-for-valdef-display-none">none</a>,
	the block container does not become
	a <span id="ref-for-css-region①⑥">CSS Region</span>.</p>
   <p>A <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①⑦">CSS Region</a>’s document children
	are not visually formatted
	unless they are directed
	to a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow③⑥">named flow</a> with an associated <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain②①">region chain</a>.</p>
   <p>Block container pseudo-elements where
	the value of <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from⑤">flow-from</a> computes to an <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a> and the value of <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-content-3/#propdef-content" id="ref-for-propdef-content①">content</a> computes to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-content-3/#valdef-content-none" id="ref-for-valdef-content-none①">none</a> are generated as <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①⑧">CSS Regions</a>,
	which is an update to the behavior
	described in <a data-link-type="biblio" href="#biblio-css2" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>.</p>
   <p>If an element has <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#style-containment" id="ref-for-style-containment①">style containment</a> (See <a data-link-type="biblio" href="#biblio-css-contain-1" title="CSS Containment Module Level 1">[CSS-CONTAIN-1]</a>),
	then the <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from⑥">flow-from</a> property must be <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#property-scoped" id="ref-for-property-scoped①">scoped</a> to that element.</p>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>A block container becomes a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region①⑨">CSS Region</a> when its <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from⑦">flow-from</a> property is set
		to a valid <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a> value,
		even if there is no content contributing
		to the referenced flow.
		For example:</p>
<pre>&lt;style>
.article{
    flow-into: thread;
}
.region{
    flow-from: thread;
}
&lt;/style>
&lt;html>
&lt;body>
  &lt;div class=region>div content&lt;/div>
&lt;/body>
&lt;/html>
</pre>
    <p>There is no element matching
		the <code>.article</code> selector
		and therefore no content
		in the <code>thread</code> flow.
		However, the block container matching
		the <code>.region</code> selector
		is still associated with
		that empty <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow③⑦">named flow</a> and, consequently,
		its children are not formatted visually.</p>
   </div>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>At the time of this note-writing, the <code>display</code> values that
		always result in a non-replaced block container include <code>block</code>, <code>inline-block</code>, <code>table-cell</code>, <code>table-caption</code>, and <code>list-item</code>. All of these
		display values work as regions with non-replaced elements.</p>
    <p>The <code>flex</code> and <code>grid</code> display values do not
		result in block containers (they are defined as flex containers and grid
		elements, respectively). So ‘<a href="#flow-from"><code class="property">flow-from</code></a>’ combined with those display values
		does not result in a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region②⓪">CSS Region</a>.</p>
   </div>
   <p><a data-link-type="dfn" href="#css-region" id="ref-for-css-region②①">CSS Regions</a> create a new <a href="https://www.w3.org/TR/CSS2/visuren.html#z-index">stacking context</a>. <span id="ref-for-css-region②②">CSS Regions</span> establish a new <a href="https://www.w3.org/TR/CSS2/visuren.html#block-formatting">block formatting Context</a>.
	Exclusions (see <a data-link-type="biblio" href="#biblio-css3-exclusions" title="CSS Exclusions Module Level 1">[CSS3-EXCLUSIONS]</a>)
	potentially impact the content
	laid out in <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain②②">region chains</a>,
	just as for non-regions.</p>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>With <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain②③">region chains</a>,
		an element may be split across multiple boxes
		and these boxes may overlap
		(for example if they are absolutely positioned).
		So fragments of the same element
		can overlap each other.
		Since each element has a single z-index,
		it would be required to find another mechanism
		to decide in which order
		the fragments are rendered.
		Since each <a data-link-type="dfn" href="#css-region" id="ref-for-css-region②③">CSS Region</a> creates
		a new stacking context,
		it is clear that each fragment is rendered separately
		and their rendering order follows
		the regular CSS rendering model.</p>
    <p>Fragments rendering separately
		is also relevant to elements that might normally
		be rendered as a unit
		(for example,
		an element with its own stacking context,
		or with transparency).
		Each fragment of these elements
		is separately contained in the stacking context
		created by the <a data-link-type="dfn" href="#css-region" id="ref-for-css-region②④">CSS Region</a>,
		so each fragment of these elements
		is rendered separately.</p>
   </div>
   <p>See the <a href="#regions-visual-formatting-details">regions visual formatting details</a> section for a description of how <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width">width</a> and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height">height</a> values are resolved
	for <a data-link-type="dfn" href="#css-region" id="ref-for-css-region②⑤">CSS Region</a> boxes.</p>
   <h4 class="heading settled" data-level="3.2.1" id="circular-dependencies"><span class="secno">3.2.1. </span><span class="content"> Cycle Detection</span><a class="self-link" href="#circular-dependencies"></a></h4>
   <p><a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow③⑧">named flows</a> containing elements
	where the value of <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from⑧">flow-from</a> computes to an <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a> can produce nonsensical circular relationships,
	such as a <span id="ref-for-named-flow③⑨">named flow</span> containing <a data-link-type="dfn" href="#css-region" id="ref-for-css-region②⑥">CSS Regions</a> in its own <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain②④">region chain</a>.
	These relationships can be easily
	and reliably detected and resolved, however,
	by keeping track of a dependency graph
	and using common cycle-detection algorithms.</p>
   <p>The dependency graph consists of edges such that:</p>
   <ul>
    <li> Every <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow④⓪">named flow</a> depends on its elements
		where the value of <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from⑨">flow-from</a> computes to an <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a>. 
    <li> Every element in a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow④①">named flow</a> where the value of <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from①⓪">flow-from</a> computes to an <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a> depends on the <span id="ref-for-named-flow④②">named flow</span> with the <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a> name. 
   </ul>
   <p>If the graph contains a cycle,
	any elements where the value of <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from①①">flow-from</a> computes to an <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident></a> participating in the cycle
	do not become <a data-link-type="dfn" href="#css-region" id="ref-for-css-region②⑦">CSS Regions</a>.</p>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>For example, styling like this:</p>
<pre>#id {
  flow-into: foolish;
  flow-from: foolish;
}
</pre>
    <p>would move the <code>#id</code> element to a "foolish" <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow④③">named flow</a>,
		and try to make the <code>#id</code> element
		a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region②⑧">CSS Region</a> for the "foolish" <span id="ref-for-named-flow④④">named flow</span>.
		The "foolish" <span id="ref-for-named-flow④⑤">named flow</span> would then contain its own region,
		creating a cycle.
		So the <code>#id</code> element does not become a <span id="ref-for-css-region②⑨">CSS Region</span>.</p>
   </div>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>The content keyword can be used to break cycles in some circumstances:</p>
<pre>#id {
  flow-into: not-so-foolish content;
  flow-from: not-so-foolish;
}
</pre>
    <p>Here only the contents of the <code>#id</code> element are moved to the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow④⑥">named flow</a>, and the box for the <code>#id</code> element <em>does</em> become a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region③⓪">CSS Region</a>. Since the <span id="ref-for-named-flow④⑦">named flow</span> does not contain the element itself, there is no cycle. With this declaration the <code>#id</code> element becomes a single-box <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain②⑤">region chain</a> for its contents, and other boxes could be added to the chain to customize overflow.</p>
   </div>
   <h4 class="heading settled" data-level="3.2.2" id="fragmenting-regions"><span class="secno">3.2.2. </span><span class="content"> Nested fragmentation contexts</span><a class="self-link" href="#fragmenting-regions"></a></h4>
   <p>A <a data-link-type="dfn" href="#css-region" id="ref-for-css-region③①">CSS Region</a> that contains
	a fragment of a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow④⑧">named flow</a> can itself be fragmented if it is nested
	within a fragmentation context <a data-link-type="biblio" href="#biblio-css3-break" title="CSS Fragmentation Module Level 3">[CSS3-BREAK]</a>,
	such as when a layout
	using a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain②⑥">region chain</a> is printed.
	In these cases break opportunities
	in the named flow fragment
	contained by the <span id="ref-for-css-region③②">CSS Region</span> are determined using the standard <a href="https://www.w3.org/TR/css3-break/">fragmentation rules</a>.
	In other words,
	each region box and its associated fragment
	should break as if it were a simple div
	containing the fragment contents.
	This can be controlled by using
	an avoid break value on the <span id="ref-for-css-region③③">CSS Region</span>,
	if that is desired.</p>
   <p>A <a data-link-type="dfn" href="#css-region" id="ref-for-css-region③④">CSS Region</a> can be part
	of the contents of a separate named flow,
	as long as there are no cycles broken
	by the <a href="#circular-dependencies">Cycle Detection</a> described above.
	This case is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="nested-region-context">nested region context</dfn>,
	which has an effect
	on the <a href="#regions-visual-formatting-steps">Visual Formatting Steps</a> described below.</p>
   <h3 class="heading settled" data-level="3.3" id="region-flow-break"><span class="secno">3.3. </span><span class="content"> Controlling Region Flow Breaks</span><a class="self-link" href="#region-flow-break"></a></h3>
   <p>Fragmentation across regions can be controlled with the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-break-3/#propdef-break-inside" id="ref-for-propdef-break-inside">break-inside</a>, <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-break-3/#propdef-break-before" id="ref-for-propdef-break-before">break-before</a>, and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-break-3/#propdef-break-after" id="ref-for-propdef-break-after">break-after</a> properties:
	the generic values <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-break-4/#valdef-break-before-auto" id="ref-for-valdef-break-before-auto">auto</a>, <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-break-4/#valdef-break-before-always" id="ref-for-valdef-break-before-always">always</a>, and <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-break-4/#valdef-break-before-avoid" id="ref-for-valdef-break-before-avoid">avoid</a> affect content flowed through regions just as they do content flowed through columns or pages,
	and the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-break-4/#valdef-break-before-region" id="ref-for-valdef-break-before-region">region</a> and <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-break-4/#valdef-break-before-avoid-region" id="ref-for-valdef-break-before-avoid-region">avoid-region</a> values
	provide region-specific breaking controls.
	See <a data-link-type="biblio" href="#biblio-css3-break" title="CSS Fragmentation Module Level 3">[CSS3-BREAK]</a> for details.</p>
   <h3 class="heading settled" data-level="3.4" id="the-region-fragment-property"><span class="secno">3.4. </span><span class="content"> The region-fragment property</span><a class="self-link" href="#the-region-fragment-property"></a></h3>
   <table class="def propdef" data-link-for-hint="region-fragment">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-region-fragment">region-fragment</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">auto <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> break 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>auto 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a data-link-type="dfn" href="#css-region" id="ref-for-css-region③⑤">CSS Regions</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>n/a 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>specified keyword 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>discrete 
   </table>
   <p class="issue" id="issue-e3598b8f"><a class="self-link" href="#issue-e3598b8f"></a> The <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-overflow-4/#propdef-continue" id="ref-for-propdef-continue">continue</a> property in <a data-link-type="biblio" href="#biblio-css-overflow-3" title="CSS Overflow Module Level 3">[css-overflow-3]</a> is likely to replace this property.</p>
   <p>The <a class="property css" data-link-type="property" href="#propdef-region-fragment" id="ref-for-propdef-region-fragment①">region-fragment</a> property controls the behavior
	of the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region①">last usable region</a> associated with a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow④⑨">named flow</a>.</p>
   <dl>
    <dt>auto
    <dd> Content flows as it would in a regular content box.
			If the content exceeds the container box,
			it is subject to the <a href="https://www.w3.org/TR/CSS21/visufx.html#propdef-overflow">overflow</a> property’s computed value on the <a data-link-type="dfn" href="#css-region" id="ref-for-css-region③⑥">CSS Region</a>.
			Region breaks must be ignored on the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region②">last usable region</a>. 
    <dt>break
    <dd>
     <p>If the content fits within the <a data-link-type="dfn" href="#css-region" id="ref-for-css-region③⑦">CSS Region</a>,
			then this property has no effect.
			If the content does not fit within the <span id="ref-for-css-region③⑧">CSS Region</span>,
			the content breaks as if flow was going to continue in a subsequent region.
			See the <a href="#regions-flow-breaking-rules">breaking rules</a> section.
			A forced region break takes precedence over a natural break point.</p>
     <p>Flow content that follows the last break in the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region③">last usable region</a> is not rendered.</p>
   </dl>
   <p>The <a class="property css" data-link-type="property" href="#propdef-region-fragment" id="ref-for-propdef-region-fragment②">region-fragment</a> property does not influence
	the size of the region it applies to.</p>
   <p>The following code sample illustrates
	the usage of the <a class="property css" data-link-type="property" href="#propdef-region-fragment" id="ref-for-propdef-region-fragment③">region-fragment</a> property.</p>
   <div class="example" id="example-0bff9c90">
    <a class="self-link" href="#example-0bff9c90"></a> 
<pre>&lt;style>
  article {
    flow-into: article-flow;
  }
  #region-1, #region-2 {
    flow-from: article-flow;
    <strong>region-fragment: break;</strong> /* or auto */
    <strong>overflow: visible;</strong> /* or hidden */
  }
&lt;/style>

&lt;body>
  &lt;article>...&lt;/article>
  &lt;div id="region-1">&lt;/div>
  &lt;div id="region-2">&lt;/div>
&lt;/body>
</pre>
   </div>
   <figure>
    <table style="border: 1px solid gray;width: 100%;">
     <tbody>
      <tr>
       <td>article with two<br> overflowing lines
       <td><code>region-fragment: break<br> overflow: visible</code>
       <td><code>region-fragment: auto<br> overflow: visible</code>
      <tr>
       <td rowspan="3" style="vertical-align: top;"><img alt="flow content rendering" src="images/region-overflow-flow.png">
       <td><img alt="rendering with region-fragment:break and overflow:visible" src="images/region-overflow-break-visible.png">
       <td><img alt="rendering with region-fragment:auto and overflow:visible" src="images/region-overflow-auto-visible.png">
      <tr>
       <td><code>region-fragment: break<br> overflow: hidden</code>
       <td><code>region-fragment: auto<br> overflow: hidden</code>
      <tr>
       <td><img alt="rendering with region-fragment:break and overflow:hidden" src="images/region-overflow-break-hidden.png">
       <td><img alt="rendering with region-fragment:auto and overflow:hidden" src="images/region-overflow-auto-hidden.png">
    </table>
    <figcaption> Combinations of region-fragment and overflow. </figcaption>
   </figure>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>The <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-overflow-3/#propdef-overflow" id="ref-for-propdef-overflow">overflow</a> property is honored on a region:
		if region content overflows,
		such as the borders of elements
		on the last line,
		the <span class="property" id="ref-for-propdef-overflow①">overflow</span> property controls
		the visibility of the overflowing content.
		See the <span class="property" id="ref-for-propdef-overflow②">overflow</span> property definition (<a data-link-type="biblio" href="#biblio-css21" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>).</p>
   </div>
   <h2 class="heading settled" data-level="4" id="cssom_view_and_css_regions"><span class="secno">4. </span><span class="content"> CSSOM</span><a class="self-link" href="#cssom_view_and_css_regions"></a></h2>
   <p>Since content may flow into multiple regions,
	authors need a way to determine if there are enough regions
	to flow all the content from a named flow.
	This is especially important considering that the size of regions
	or the size of the content may change depending on the display context.
	For example,
	flowing the same content on a mobile phone with a small screen
	may require more regions than on a large desktop display.
	Another example is the user changing
	the font size of text flowing through regions.
	Depending on the change,
	new regions may be needed to accommodate for the additional space required
	to fit the larger text or some regions may need to be removed for smaller text.</p>
   <h3 class="heading settled" data-level="4.1" id="the-namedflow-interface"><span class="secno">4.1. </span><span class="content"> The NamedFlow interface</span><a class="self-link" href="#the-namedflow-interface"></a></h3>
   <p>The following APIs allow scripts
	to reference a <a data-link-type="idl" href="#namedflow" id="ref-for-namedflow">NamedFlow</a> object representation of a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤⓪">named flow</a>.</p>
   <p>An additional attribute on the <a href="https://www.w3.org/TR/dom/#interface-document"> <code class="idl">Document</code></a> interface provide access to <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤①">named flows</a>.</p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document"><c- g>Document</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#namedflowmap" id="ref-for-namedflowmap"><c- n>NamedFlowMap</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="NamedFlowMap" href="#dom-document-namedflows" id="ref-for-dom-document-namedflows"><c- g>namedFlows</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-namedflows"><code class="idl">namedFlows</code></dfn> attribute on the <a href="https://www.w3.org/TR/dom/#interface-document"> <code class="idl">Document</code> </a> interface returns a static snapshot
	of all the current <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤②">named flows</a> in the document.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="dom-document-namedflows"><code class="idl">namedFlows</code></dfn> map must include all <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤③">named flows</a> that are currently in the <code>CREATED</code> state.
	The list must not include <span id="ref-for-named-flow⑤④">named flows</span> that are in the <code>NULL</code> state.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#namedflowmap" id="ref-for-namedflowmap①">NamedFlowMap</a></code> interface provides a map of current <a data-link-type="idl" href="#namedflow" id="ref-for-namedflow①">NamedFlow</a> instances
	in the document.
	The <a data-link-type="idl" href="#namedflowmap" id="ref-for-namedflowmap②">NamedFlowMap</a> object
	is a snapshot of the data,
	and is read-only.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="namedflowmap"><code><c- g>NamedFlowMap</c-></code></dfn> {
  <c- b>maplike</c->&lt;<a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring"><c- n>CSSOMString</c-></a>, <a data-link-type="idl-name" href="#namedflow" id="ref-for-namedflow②"><c- n>NamedFlow</c-></a>>;
};
</pre>
   <p>The map entries in a <a data-link-type="idl" href="#namedflowmap" id="ref-for-namedflowmap③">NamedFlowMap</a> object
	are the named flow idents
	paired with their <a data-link-type="idl" href="#namedflow" id="ref-for-namedflow③">NamedFlow</a> objects.
	The <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlowMap" data-dfn-type="method" data-export id="dom-namedflowmap-get"><code>get()</code></dfn> and <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlowMap" data-dfn-type="method" data-export id="dom-namedflowmap-has"><code>has()</code></dfn> methods return null and false respectively
	if there is no <span id="ref-for-namedflow④">NamedFlow</span> with the given ident.
	The <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlowMap" data-dfn-type="method" data-export id="dom-namedflowmap-set"><code>set()</code></dfn> and <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlowMap" data-dfn-type="method" data-export id="dom-namedflowmap-delete"><code>delete()</code></dfn> methods always throw an <code>InvalidAccessError</code> exception,
	as this map is read-only.
	The <span id="ref-for-namedflowmap④">NamedFlowMap</span> interface
	uses the rest of the default map <a href="http://dev.w3.org/2006/webapi/WebIDL/#es-map-members">class methods</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#namedflow" id="ref-for-namedflow⑤">NamedFlow</a></code> interface offers a representation
	of a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤⑤">named flow</a> instance.</p>
   <p>The <a data-link-type="idl" href="#namedflow" id="ref-for-namedflow⑥">NamedFlow</a> interface
	can be used for different purposes.
	For example, the <code>getRegionsByContent()</code> method
	can help navigate by bookmark:
	a script can find the <a data-link-type="dfn" href="#css-region" id="ref-for-css-region③⑨">CSS Regions</a> that display a particular anchor
	and bring them to view.</p>
   <p>Likewise, the interface allows authors
	to check if all content has been fitted
	into existing regions.
	If it has, the <a data-link-type="idl" href="#dom-namedflow-overset" id="ref-for-dom-namedflow-overset">overset</a> attribute
	would be false.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="namedflow"><code><c- g>NamedFlow</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring①"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#dom-namedflow-name" id="ref-for-dom-namedflow-name"><c- g>name</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-namedflow-overset" id="ref-for-dom-namedflow-overset①"><c- g>overset</c-></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#region" id="ref-for-region"><c- n>Region</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-namedflow-getregions" id="ref-for-dom-namedflow-getregions"><c- g>getRegions</c-></a>();
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-short" id="ref-for-idl-short"><c- b>short</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="short" href="#dom-namedflow-firstemptyregionindex" id="ref-for-dom-namedflow-firstemptyregionindex"><c- g>firstEmptyRegionIndex</c-></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node"><c- n>Node</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-namedflow-getcontent" id="ref-for-dom-namedflow-getcontent"><c- g>getContent</c-></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#region" id="ref-for-region①"><c- n>Region</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlow" data-dfn-type="method" data-export data-lt="getRegionsByContent(node)" id="dom-namedflow-getregionsbycontent"><code><c- g>getRegionsByContent</c-></code></dfn>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node①"><c- n>Node</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlow/getRegionsByContent(node)" data-dfn-type="argument" data-export id="dom-namedflow-getregionsbycontent-node-node"><code><c- g>node</c-></code></dfn>);
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlow" data-dfn-type="attribute" data-export id="dom-namedflow-name"><code class="idl">name</code></dfn> attribute
	returns the name of the <a data-link-type="idl" href="#namedflow" id="ref-for-namedflow⑦">NamedFlow</a> instance.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlow" data-dfn-type="attribute" data-export id="dom-namedflow-overset"><code class="idl">overset</code></dfn> attribute returns true
	if there are <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤⑥">named flow</a> fragments
	that do not fit
	in the associated <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain②⑦">region chain</a> (including the case where
	there are <span id="ref-for-named-flow⑤⑦">named flow</span> fragments
	but no regions in the <span id="ref-for-region-chain②⑧">region chain</span>).
	Otherwise, it returns false.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlow" data-dfn-type="method" data-export id="dom-namedflow-getregions"><code class="idl">getRegions()</code></dfn> method returns the sequence
	of regions in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain②⑨">region chain</a> associated with the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤⑧">named flow</a>.
	Regions after the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region④">last usable region</a>, if any, are included.
	Note that the returned values
	is a static sequence
	in document order.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlow" data-dfn-type="attribute" data-export id="dom-namedflow-firstemptyregionindex"><code>firstEmptyRegionIndex</code></dfn> is the index of the first region
	in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain③⓪">region chain</a> with the <code>regionOverset</code> attribute
	set to <code>empty</code>.
	If all regions have the <code>regionOverset</code> attribute
	set to <code>fit</code> or <code>overset</code>,
	the value for <code>firstEmptyRegionIndex</code> is <code>-1</code>.
	If there are no regions in the <span id="ref-for-region-chain③①">region chain</span>,
	the value is <code>-1</code> as well.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlow" data-dfn-type="method" data-export id="dom-namedflow-getcontent"><code>getContent()</code></dfn> method returns an ordered collection
	of nodes that constitute the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑤⑨">named flow</a>.
	The returned list is a static snapshot
	of the <span id="ref-for-named-flow⑥⓪">named flow</span> content
	at the time the method is invoked.
	This list contains the contents
	that were moved to the <span id="ref-for-named-flow⑥①">named flow</span> by the flow-into property
	but not any descendants
	(unless the descendants are themselves
	moved to the <span id="ref-for-named-flow⑥②">named flow</span>).</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="NamedFlow" data-dfn-type="method" data-export id="dom-namedflow-getregionsbycontent①"><code>getRegionsByContent()</code></dfn> method returns the sequence of regions
	that contain at least part
	of the target content node
	if it belongs to the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑥③">named flow</a> directly
	or one of its ancestors belongs to the <span id="ref-for-named-flow⑥④">named flow</span>.
	Otherwise, the method returns
	an empty sequence.
	The returned value
	is a static sequence
	in document order.</p>
   <p>The <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑥⑤">named flow</a> states are :</p>
   <ul>
    <li> <code class="idl">NULL</code>: the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑥⑥">named flow</a> contains no content and has no <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain③②">region chain</a>. 
    <li> <code class="idl">CREATED</code>: the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑥⑦">named flow</a> either contains content or has a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain③③">region chain</a>. 
   </ul>
   <p>A <a data-link-type="idl" href="#namedflow" id="ref-for-namedflow⑧">NamedFlow</a> object is live:
	it always represents the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑥⑧">named flow</a> with the corresponding name even if
	that <span id="ref-for-named-flow⑥⑨">named flow</span> has transitioned
	to the <code>NULL</code> state.</p>
   <h3 class="heading settled" data-level="4.2" id="the-region-interface"><span class="secno">4.2. </span><span class="content"> The Region mixin</span><a class="self-link" href="#the-region-interface"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="#region" id="ref-for-region②">Region</a></code> is a <a href="https://heycam.github.io/webidl/#idl-interface-mixins">mixin</a> which must be included by all interfaces
	(<a href="https://www.w3.org/TR/dom/#interface-element"> <code class="idl">Elements</code></a>,
	pseudo-elements or other CSS constructs
	such as <a href="https://drafts.csswg.org/css3-page-template/#templates-and-slots">slots</a>) in an implementation which can be <a data-link-type="dfn" href="#css-region" id="ref-for-css-region④⓪">CSS Regions</a>.</p>
<pre class="idl highlight def"><c- b>interface</c-> <c- b>mixin</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="region"><code><c- g>Region</c-></code></dfn> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring②"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#dom-region-regionoverset" id="ref-for-dom-region-regionoverset"><c- g>regionOverset</c-></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#range" id="ref-for-range"><c- n>Range</c-></a>>? <a class="idl-code" data-link-type="method" href="#dom-region-getregionflowranges" id="ref-for-dom-region-getregionflowranges"><c- g>getRegionFlowRanges</c-></a>();
};

<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element"><c- n>Element</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#region" id="ref-for-region③"><c- n>Region</c-></a>;
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Region" data-dfn-type="attribute" data-export id="dom-region-regionoverset"><code class="idl">regionOverset</code></dfn> attribute returns one of the following values:</p>
   <dl>
    <dt><span class="css">overset</span>
    <dd> The region is the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region⑤">last usable region</a> in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain③④">region chain</a> and
			not able to fit the remaining content from the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑦⓪">named flow</a>.
			Note that the region’s <a href="https://www.w3.org/TR/CSS21/visufx.html#overflow"> <code class="idl">overflow</code></a> property value can be used to control the
			visibility of the overflowing content and the <a class="property css" data-link-type="property" href="#propdef-region-fragment" id="ref-for-propdef-region-fragment④">region-fragment</a> property controls whether or not fragmentation happens
			on the content that overflows the <span id="ref-for-last-usable-region⑥">last usable region</span>. 
    <dt><span class="css">fit</span>
    <dd> The region’s flow fragment content
			fits into the region’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-4/#content-box" id="ref-for-content-box">content box</a>.
			If the region is the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region⑦">last usable region</a> in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain③⑤">region chain</a>,
			it means that the content
			fits without overflowing.
			If the region is not the <span id="ref-for-last-usable-region⑧">last usable region</span> in the <span id="ref-for-region-chain③⑥">region chain</span>,
			that means the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑦①">named flow</a> content
			may be further fitted in subsequent regions.
			In this last case,
			note that the <span id="ref-for-named-flow⑦②">named flow</span> fragment may be empty
			(for example if the region is too small
			to accommodate any content).
			This value is returned if the <a data-link-type="idl" href="#region" id="ref-for-region④">Region</a> object
			is not (or no longer) a region. 
    <dt><span class="css">empty</span>
    <dd> All content from the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑦③">named flow</a> was fitted in prior regions. 
   </dl>
   <p>If there is no content
	in the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑦④">named flow</a>,
	all regions associated
	with that <span id="ref-for-named-flow⑦⑤">named flow</span> should have their <a data-link-type="idl" href="#dom-region-regionoverset" id="ref-for-dom-region-regionoverset①">regionOverset</a> attribute return <span class="css">empty</span>.
	If there is content in the flow
	but that content does not
	generate any box for visual formatting,
	the <span class="css">overset</span> attribute on the first region
	in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain③⑦">region chain</a> associated
	with the flow will return <span class="css">fit</span>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Region" data-dfn-type="method" data-export id="dom-region-getregionflowranges"><code>getRegionFlowRanges()</code></dfn> method
	returns an array of <a href="https://www.w3.org/TR/dom/#interface-range">Range</a> instances corresponding to fragment
	from the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑦⑥">named flow</a> that is laid out in the region.
	If the region has not received a fragment
	because it is too small to accommodate any,
	the method returns a single <a data-link-type="idl" href="https://dom.spec.whatwg.org/#range" id="ref-for-range①">Range</a> where the <code>startContainer</code> and <code>startOffset</code> have the same values as
	the <code>endContainer</code> and <code>endOffset</code> and therefore the collapsed attribute
	on the <span id="ref-for-range②">Range</span> is true.
	In that situation,
	if the region is the first
	in the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain③⑧">region chain</a>,
	the <code>startContainer</code> is the first <code>Node</code> in the <span id="ref-for-named-flow⑦⑦">named flow</span> and the <code>startOffset</code> is zero.
	If the region is the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region⑨">last usable region</a> in the <span id="ref-for-region-chain③⑨">region chain</span> (but not the first and only one),
	the <code>startContainer</code> and <code>startOffset</code> are the same values as
	the <code>endContainer</code> and <code>endOffset</code> on the previous region
	in the <span id="ref-for-region-chain④⓪">region chain</span>.
	The method returns null
	if the <span>region</span> object
	is not (or no longer) a region.</p>
   <p>A <a data-link-type="idl" href="#region" id="ref-for-region⑤">Region</a> instance
	may represent an object
	that is no longer a <span>region</span>.
	This may happen for example
	if the <a class="property css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from①②">flow-from</a> property
	on the corresponding pseudo-element,
	element or other construct
	becomes <span class="css">none</span> but a script is still holding
	a reference to the <span id="ref-for-region⑥">Region</span> object.</p>
   <h3 class="heading settled" data-level="4.3" id="named-flow-events"><span class="secno">4.3. </span><span class="content"> Named flow events</span><a class="self-link" href="#named-flow-events"></a></h3>
   <p><a data-link-type="idl" href="#namedflow" id="ref-for-namedflow⑨">NamedFlow</a> objects are <a href="https://www.w3.org/TR/dom/#interface-eventtarget">EventTargets</a> which dispatch the following events
	for their respective triggers.
	These events are asynchronous,
	and fire at the end of the <a href="#named-flows-layout">regions visual formatting</a> steps.</p>
   <p>The regionfragmentchange event is dispatched
	on any change to a named flow’s fragmentation through its <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain④①">region chain</a>,
	including changes to any overset fragment.</p>
   <table class="event-desc" style="border: 1px solid gray">
    <tbody>
     <tr class="assert must">
      <th>Type
      <td class="eventname"><strong><code>regionfragmentchange</code></strong>
     <tr class="assert must">
      <th>Interface
      <td><code><a href="https://www.w3.org/TR/DOM-Level-3-Events/#events-uievents">UIEvent</a></code> (see <a data-link-type="biblio" href="#biblio-dom-level-3-events" title="UI Events">[DOM-LEVEL-3-EVENTS]</a>)
     <tr class="assert must">
      <th>Sync / Async
      <td>Async
     <tr class="assert must">
      <th>Bubbles
      <td>No
     <tr class="assert must">
      <th>Target
      <td><a data-link-type="idl" href="#namedflow" id="ref-for-namedflow①⓪">NamedFlow</a>
     <tr class="assert must">
      <th>Cancelable
      <td>Yes
     <tr class="assert must">
      <th>Default action
      <td>none
     <tr class="assert must">
      <th>Context info
      <td>
       <ul>
        <li><code class="attribute-name">Event.target</code>: <a data-link-type="idl" href="#namedflow" id="ref-for-namedflow①①">NamedFlow</a> whose fragmentation has changed. 
       </ul>
   </table>
   <p>The regionoversetchange event is dispatched
	if any of the regionOverset values change
	in a named flow’s <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain④②">region chain</a>,
	including when regions are added or removed from the chain.</p>
   <table class="event-desc" style="border: 1px solid gray">
    <tbody>
     <tr class="assert must">
      <th>Type
      <td class="eventname"><strong><code>regionoversetchange</code></strong>
     <tr class="assert must">
      <th>Interface
      <td><code><a href="https://www.w3.org/TR/DOM-Level-3-Events/#events-UIEvent">UIEvent</a></code> (see <a data-link-type="biblio" href="#biblio-dom-level-3-events" title="UI Events">[DOM-LEVEL-3-EVENTS]</a>)
     <tr class="assert must">
      <th>Sync / Async
      <td>Async
     <tr class="assert must">
      <th>Bubbles
      <td>No
     <tr class="assert must">
      <th>Target
      <td><a data-link-type="idl" href="#namedflow" id="ref-for-namedflow①②">NamedFlow</a>
     <tr class="assert must">
      <th>Cancelable
      <td>Yes
     <tr class="assert must">
      <th>Default action
      <td>none
     <tr class="assert must">
      <th>Context info
      <td>
       <ul>
        <li><code class="attribute-name">Event.target</code>: <a data-link-type="idl" href="#namedflow" id="ref-for-namedflow①③">NamedFlow</a> whose <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain④③">region chain</a> has regionOverset values that have changed. 
       </ul>
   </table>
   <h3 class="heading settled" data-level="4.4" id="cssomview-and-regions"><span class="secno">4.4. </span><span class="content"> Clarifications on pre-existing APIs</span><a class="self-link" href="#cssomview-and-regions"></a></h3>
   <h4 class="heading settled" data-level="4.4.1" id="cssomview-getclientrects-and-getboundingclientrect"><span class="secno">4.4.1. </span><span class="content"> <code class="idl">getClientRects()</code> and <code>getBoundingClientRect()</code></span><a class="self-link" href="#cssomview-getclientrects-and-getboundingclientrect"></a></h4>
   <p>The <a href="https://www.w3.org/TR/cssom-view/">CSSOM View Module</a> defines how user agents compute
	the bounding client rectangle
	for an element (<code class="idl">getBoundingClientRect()</code>)
	and its generated boxes (<code class="idl">getClientRects()</code>).</p>
   <p>This definition applies to
	the (possibly) multiple boxes
	generated for an element in a named flow
	flowing through a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain④④">region chain</a>.
	The <code class="idl">getClientRects()</code> method
	returns the list of boxes generated
	for each of the element fragments
	laid out in different regions.
	The <code>getBoundingClientRect()</code> method
	operates as specified in the <a href="https://www.w3.org/TR/cssom-view/">CSSOM View Module</a> as well and is computed
	from the set of rectangles
	returned by <code class="idl">getClientRects()</code>.</p>
   <h4 class="heading settled" data-level="4.4.2" id="cssomview-offset-attributes"><span class="secno">4.4.2. </span><span class="content"> <code class="idl">offsetTop</code>, <code class="idl">offsetLeft</code>, <code class="idl">offsetWidth</code>, <code class="idl">offsetHeight</code> and <code class="idl">offsetParent</code></span><a class="self-link" href="#cssomview-offset-attributes"></a></h4>
   <p>The computation of the <a href="https://drafts.csswg.org/cssom-view/#extensions-to-the-htmlelement-interface">offset attributes</a> for elements laid out in a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑦⑧">named flow</a> follow the <a href="https://drafts.csswg.org/cssom-view/#extensions-to-the-htmlelement-interface">specification</a> <a data-link-type="biblio" href="#biblio-cssom" title="CSS Object Model (CSSOM)">[CSSOM]</a>.
	For the purpose of these algorithms,
	the <em>first CSS layout box</em> associated
	with an element laid out in a <span id="ref-for-named-flow⑦⑨">named flow</span> is the first box generated for the first region the element is laid out into.
	In the offsetParent algorithm,
	the nearest ancestor search skips
	from the topmost named flow elements directly to the body element.</p>
   <h2 class="heading settled" data-level="5" id="multi-column-regions"><span class="secno">5. </span><span class="content"> Multi-column regions</span><a class="self-link" href="#multi-column-regions"></a></h2>
   <p>A <a href="https://drafts.csswg.org/css3-multicol/#multi-column-element">multi-column</a> <a data-link-type="biblio" href="#biblio-css3col" title="CSS Multi-column Layout Module Level 1">[CSS3COL]</a> element can be
	assigned to a <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain④⑤">region chain</a>.
	The element becomes part
	of the <span id="ref-for-region-chain④⑥">region chain</span> for the associated <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧⓪">named flow</a>,
	and flows its content fragments
	through columns according to
	the multi-column specification <span title="CSS Multi-column Layout Module Level 1">[CSS3COL]</span>.
	In particular,
	when computing the <a href="#rfcb-flow-fragment-height-resolution">flow fragment height</a> of a multi-column container
	that is associated with a <em><a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧①">named flow</a></em>,
	the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-multicol-1/#propdef-column-fill" id="ref-for-propdef-column-fill">column-fill</a> <span title="CSS Multi-column Layout Module Level 1">[CSS3COL]</span> property is honored
	to balance the fragments of content
	that would flow through
	its columns.</p>
   <p>Overflow of multicol regions
	is mostly handled
	according to the same rules
	as other <a data-link-type="dfn" href="#css-region" id="ref-for-css-region④①">CSS Regions</a>.
	If the remainder of the named flow
	does not fit
	in the multicol region,
	then the rest
	of the content flows into
	the remaining <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain④⑦">region chain</a>.
	However,
	if a multicol region
	is the <a data-link-type="dfn" href="#last-usable-region" id="ref-for-last-usable-region①⓪">last usable region</a> in a <span id="ref-for-region-chain④⑧">region chain</span>,
	then the multicol region must follow the <a href="https://drafts.csswg.org/css3-multicol/#overflow-columns">overflow column rules</a> <a data-link-type="biblio" href="#biblio-css3col" title="CSS Multi-column Layout Module Level 1">[CSS3COL]</a>.</p>
   <div class="example" id="example-b3d3d94a">
    <a class="self-link" href="#example-b3d3d94a"></a> 
    <p>The following example:</p>
<pre>&lt;style>
  article {
      flow-into: article-flow;
  }

  #multi-col {
      column-count: 2;
      flow-from: article;
      height: 6em;
      column-gap: 1em;
  }

  #remainder {
      flow-from: article;
      height: auto;
  }
&lt;/style>

&lt;body>
  &lt;article>...&lt;/article>
  &lt;div id="multicol">&lt;/div>
  &lt;div id="remainder">&lt;/div>
&lt;/body>
</pre>
    <p>is equivalent in rendering to, for example:</p>
<pre>&lt;style>
  article {
      flow-into: article-flow;
  }

  #flex {
      display: flex;
      flex-pack: justify;
      height: 6em;
  }

  #flex > div {
      flow-from: article;
      width: calc(50% - 0.5em);
  }

  #remainder {
      flow-from: article;
      height: auto;
  }
&lt;/style>

&lt;body>
  &lt;article>...&lt;/article>
  &lt;div id="flex">
    &lt;div />
    &lt;div />
  &lt;/div>
  &lt;div id="remainder">&lt;/div>
&lt;/body>
</pre>
   </div>
   <h2 class="heading settled" data-level="6" id="pseudo_elements"><span class="secno">6. </span><span class="content"> Pseudo-elements</span><a class="self-link" href="#pseudo_elements"></a></h2>
   <p>It can be useful
	to visually mark the content
	to highlight that a content thread
	is flowing through the <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain④⑨">region chain</a>.
	For example, a marker
	such as <em>'continued below'</em> clearly indicates,
	at the end of a <a data-link-type="dfn" href="#css-region" id="ref-for-css-region④②">CSS Region</a>,
	that there is more content in the flow
	which can be found by scrolling past
	whatever content interrupts the <span id="ref-for-region-chain⑤⓪">region chain</span>.</p>
   <p>The '::before' and '::after' pseudo-elements (see <a data-link-type="biblio" href="#biblio-select" title="Selectors Level 3">[SELECT]</a>)
	let content authors mark the beginning
	and end of a region with such markers.</p>
   <h2 class="heading settled" data-level="7" id="regions-visual-formatting-details"><span class="secno">7. </span><span class="content"> Regions visual formatting details</span><a class="self-link" href="#regions-visual-formatting-details"></a></h2>
   <p>Regions are laid out by CSS and take part in the normal box model and other layout models
	offered by CSS modules such as flexible boxes (<a data-link-type="biblio" href="#biblio-css3-flexbox" title="CSS Flexible Box Layout Module Level 1">[CSS3-FLEXBOX]</a>). However, <span>regions</span> lay out a fragment of their <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧②">named flow</a> instead of laying out descendant content as happens with other
	boxes.</p>
   <p>This section describes the model for laying out <span>regions</span> and for laying out <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧③">named flow</a> content into regions.
	The descriptions in this section are biased towards a horizontal writing mode,
	using <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-anchor-position-1/#valdef-anchor-size-width" id="ref-for-valdef-anchor-size-width">width</a> for logical width (or measure)
	and <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-anchor-position-1/#valdef-anchor-size-height" id="ref-for-valdef-anchor-size-height">height</a> for logical height (or extent)
	as <a href="https://www.w3.org/TR/css3-writing-modes/#abstract-dimensions">defined</a> in the CSS Writing Modes Module <a data-link-type="biblio" href="#biblio-css3-writing-modes" title="CSS Writing Modes Level 3">[CSS3-WRITING-MODES]</a>).
	To use this model in a vertical writing mode apply the principles <a href="https://www.w3.org/TR/css3-writing-modes/#vertical-layout">described</a> in that specification.</p>
   <h3 class="heading settled" data-level="7.1" id="processing-model"><span class="secno">7.1. </span><span class="content"> Processing model</span><a class="self-link" href="#processing-model"></a></h3>
   <p>The '::before' content is laid out
	in the region prior to
	any other content coming from the flow.</p>
   <p>The '::after' content is laid out
	in the region after laying out
	the flow fragment content into the <span>RFCB</span>.
	Then, flow content is removed from the fragment
	to accommodate the '::after' content.
	Accommodating means that the '::after' content
	is laid out without overflowing the region.</p>
   <p>If there is not enough room to accommodate
	the ::before content,
	the '::after' content after removing all flow fragment content,
	or a combination of the two,
	then the ::before and/or ::after content overflows that region.</p>
   <h3 class="heading settled" data-level="7.2" id="regions-flow-content-box"><span class="secno">7.2. </span><span class="content"> The Region Flow Content Box (RFCB)</span><a class="self-link" href="#regions-flow-content-box"></a></h3>
   <p>A region box lays out the following boxes:</p>
   <ul>
    <li> The boxes generated by its <code>::before</code> and <code>::after</code> pseudo-elements, if any. 
    <li> The anonymous <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="region-flow-content-box">region flow content box</dfn> (called <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="rfcb">RFCB</dfn> in this document)
			which contains the fragment of the <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧④">named flow</a> that the region receives. 
   </ul>
   <figure>
     <img alt="The ::before, RFCB and ::after boxes contained in the Region Box" src="images/RFCB.svg" width="600"> 
    <figcaption> The Region Flow Content Box (RFCB) </figcaption>
   </figure>
   <p>Laying out a <span>region</span> box follows the same processing rules
	as for any other <a href="https://www.w3.org/TR/CSS2/visuren.html#block-boxes">block container box</a>.</p>
   <p>The <span>RFCB</span> is a <a href="https://www.w3.org/TR/CSS21/visuren.html#block-boxes">block container box</a> with a computed <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width①">width</a> of <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-sizing-3/#valdef-width-auto" id="ref-for-valdef-width-auto">auto</a> and whose used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height①">height</a> is resolved as detailed below.</p>
   <p>Since the <span>RFCB</span> is a <a href="https://www.w3.org/TR/CSS21/visuren.html#block-boxes">block container box</a>, the ::before box and ::after box will also be block containers, though the contents of ::before and ::after may be inline within those boxes.</p>
   <h4 class="heading settled" data-level="7.2.1" id="rfcb-width-resolution"><span class="secno">7.2.1. </span><span class="content"> RFCB <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width②">width</a> resolution</span><a class="self-link" href="#rfcb-width-resolution"></a></h4>
   <p>At various points in the visual formatting of documents containing regions,
	the used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width③">width</a> of RFCBs and regions need to be resolved.
	In all cases, the resolution is done following the rules for <a href="https://www.w3.org/TR/CSS2/visudet.html#Computing_widths_and_margins">calculating widths and margins</a> (see <a data-link-type="biblio" href="#biblio-css2" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a>).
	Sometimes, resolving the used <span class="property" id="ref-for-propdef-width④">width</span> value requires
	measuring the content’s <code>min-content</code> and <code>max-content</code> values
	(as <a href="https://www.w3.org/TR/css3-writing-modes/#orthogonal-auto">defined</a> in the CSS Writing Modes Module <a data-link-type="biblio" href="#biblio-css3-writing-modes" title="CSS Writing Modes Level 3">[CSS3-WRITING-MODES]</a>).
	or an RFCB, <strong>these measures are made
	on the <em>entire</em> associated <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧⑤">named flow</a> content</strong>.</p>
   <p>As a consequence,
	all <span>RFCBs</span> of <span>regions</span> associated
	with a given <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧⑥">named flow</a> share the same <code>min-content</code> and <code>max-content</code> measures.</p>
   <p>This approach is consistent with the <a href="https://www.w3.org/TR/css3-break/#varying-size-boxes">box model for breaking</a> (<a data-link-type="biblio" href="#biblio-css3-break" title="CSS Fragmentation Module Level 3">[CSS3-BREAK]</a>).</p>
   <h3 class="heading settled" data-level="7.3" id="regions-visual-formatting-steps"><span class="secno">7.3. </span><span class="content"> Regions visual formatting steps</span><a class="self-link" href="#regions-visual-formatting-steps"></a></h3>
   <p>Formatting documents that contain <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧⑦">named flows</a> laid out in regions
	is a three-step process:</p>
   <ul>
    <li> <em>Step 1: RFCB <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="flow-fragment-height">flow fragment height</dfn> resolution</em>.
			In this step, the heights of fragments fitting in the regions' RFCBs are resolved. 
    <li> <em>Step 2: document and regions layout</em>.
			In this step, the document content and regions are laid out.
			However, <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧⑧">named flow</a> content is not laid out in regions yet. 
    <li> <em>Step 3: <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑧⑨">named flow</a> layout</em>.
			In this step, the content of <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑨⓪">named flows</a> is laid out in their respective <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain⑤①">region chains</a>. 
   </ul>
   <figure>
     <img alt="visual representation of the three-step process" src="images/regions-layout-three-steps.svg" width="600"> 
    <figcaption> Regions visual formatting steps </figcaption>
   </figure>
   <h4 class="heading settled" data-level="7.3.1" id="rfcb-flow-fragment-height-resolution"><span class="secno">7.3.1. </span><span class="content"> Step 1: RFCB flow fragment height resolution</span><a class="self-link" href="#rfcb-flow-fragment-height-resolution"></a></h4>
   <p>Conceptually, resolving the flow fragment height is a two phase process.</p>
   <h5 class="heading settled" data-level="7.3.1.1" id="rfcb-flow-fragment-height-resolution-phase-1"><span class="secno">7.3.1.1. </span><span class="content"> RFCB flow fragment height resolution, Phase 1</span><a class="self-link" href="#rfcb-flow-fragment-height-resolution-phase-1"></a></h5>
   <p>The document is laid out with a <a href="https://www.w3.org/TR/CSS2/cascade.html#used-value">used</a> height of zero
	for all <span>RFCB</span>s. In this phase, the content of <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑨①">named flows</a> is not laid out in <span>regions</span>. This phase yields resolved position and sizes for all regions and
	their RFCBs in the document.</p>
   <h5 class="heading settled" data-level="7.3.1.2" id="rfcb-flow-fragment-height-resolution-phase-2"><span class="secno">7.3.1.2. </span><span class="content"> RFCB flow fragment height resolution, Phase 2</span><a class="self-link" href="#rfcb-flow-fragment-height-resolution-phase-2"></a></h5>
   <p><a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑨②">named flows</a> are laid out in <span>regions</span>.
	The user agent resolves
	the <em><span>flow fragment height</span></em> for the <span>RFCB</span>s
	using the remainder of the flow
	and accounting for <a href="https://www.w3.org/TR/css3-break/">fragmentation rules</a>.
	This process accounts for constraints
	such as the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height②">height</a> or <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/visudet.html#propdef-max-height" id="ref-for-propdef-max-height">max-height</a> values,
	as described in the CSS 2.1 section
	on <a href="https://www.w3.org/TR/CSS2/visudet.html#Computing_heights_and_margins">calculating heights and margins</a> (see the <a href="https://www.w3.org/TR/CSS2/visudet.html#normal-block">Block-level non-replaced elements in normal flow...</a> section and the <a href="https://www.w3.org/TR/CSS2/visudet.html#block-root-margin">complicated cases</a> section).
	During this phase,
	generated content is laid out
	according to the <a href="#processing-model">rules</a> described earlier in this document.</p>
   <p>In a <a data-link-type="dfn" href="#nested-region-context" id="ref-for-nested-region-context">nested region context</a>,
	this phase will trigger
	the beginning of Step 1
	for any inner <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑨③">named flows</a> whose regions are contained
	in the outer <span id="ref-for-named-flow⑨④">named flow</span>.
	All of Step 1 for inner flows
	must recursively complete before Step 1
	for an outer flow completes.</p>
   <h4 class="heading settled" data-level="7.3.2" id="regions-boxes-layout"><span class="secno">7.3.2. </span><span class="content"> Step 2: region boxes layout</span><a class="self-link" href="#regions-boxes-layout"></a></h4>
   <p>In this step, the document is laid out according to the normal CSS layout rules.</p>
   <p>If a measure of the content is required to resolve the used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width⑤">width</a> of the region box,
	the value is resolved as described in the <a href="#rfcb-width-resolution">RFCB width resolution</a> section.</p>
   <p>If a measure of the content is required to resolve the used height of the RFCB
	(for example if the region box is absolutely positioned),
	the <span>flow fragment height</span> resolved in Step 1 is used
	for the vertical content measure of the RFCB.</p>
   <p>At the end of this step,
	regions are laid out and ready to receive content
	from their associated <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑨⑤">named flows</a>.</p>
   <h4 class="heading settled" data-level="7.3.3" id="named-flows-layout"><span class="secno">7.3.3. </span><span class="content"> Step 3: named flows layout</span><a class="self-link" href="#named-flows-layout"></a></h4>
   <p>In this final step,
	the content of <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑨⑥">named flows</a> is laid out in the <span>regions</span>' RFCBs
	along with the generated content boxes.</p>
   <p>The used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width⑥">width</a> for RFCBs is resolved <a href="#rfcb-width-resolution">as described before</a>.</p>
   <p>The used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height③">height</a> of RFCBs is resolved
	such that none of the boxes
	in the region box’s normal flow
	overflow the region’s box.
	In other words,
	the RFCB boxes are stretched vertically
	to accommodate as much
	of the flow as possible
	without overflowing the region box
	and accounting for <a href="https://www.w3.org/TR/css3-break/">fragmentation rules</a> and generated content boxes.</p>
   <p>During this phase,
	generated content is laid out
	according to the <a href="#processing-model">rules</a> described earlier in this document.</p>
   <p>In a <a data-link-type="dfn" href="#nested-region-context" id="ref-for-nested-region-context①">nested region context</a>,
	this step will trigger Step 2
	for inner <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow⑨⑦">named flows</a> whose regions are contained
	in the outer <span id="ref-for-named-flow⑨⑧">named flow</span>.
	Fragmentation of the inner regions
	may result as they are laid out
	in the outer <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain⑤②">region chain</a>.
	Once Step 3 for an outer named flow is complete,
	Step 3 for the inner <span id="ref-for-named-flow⑨⑨">named flows</span> recursively begins.</p>
   <p>Once Step 3 for a named flow is complete,
	The conditions for the <a href="#named-flow-events">named flow events</a> are checked,
	and if the triggers are met
	the events dispatch at this point.</p>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>The model for resolving auto sized regions will cause,
		under certain circumstances,
		the flow content to be overset or underset.
		In other words,
		it will not fit tightly.
		The model prevents having circular dependencies
		in the layout model.
		Implementations may decide to apply
		further layout steps
		to ensure that the whole flow content
		is displayed to the user,
		even in edge cases.</p>
   </div>
   <h3 class="heading settled" data-level="7.4" id="regions-visual-formatting-implementation-note"><span class="secno">7.4. </span><span class="content"> Regions visual formatting: implementation note</span><a class="self-link" href="#regions-visual-formatting-implementation-note"></a></h3>
   <p>The process for resolving an RFCB’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height④">height</a> and the three-step process used to
	lay out documents containing regions and <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⓪⓪">named flows</a> are <em>conceptual</em> descriptions of what the layout
	should yield and implementations should optimize to reduce the number of
	steps and phases necessary wherever possible.</p>
   <h3 class="heading settled" data-level="7.5" id="regions-visual-formatting-examples"><span class="secno">7.5. </span><span class="content"> Regions visual formatting example</span><a class="self-link" href="#regions-visual-formatting-examples"></a></h3>
   <p>This section is non-normative.</p>
   <p>This example considers a document where content flows between three regions,
	and region boxes are intermixed with the normal document content.</p>
   <div class="example" id="example-5a116191">
    <a class="self-link" href="#example-5a116191"></a> 
<pre>&lt;style>
  article {
      flow-into: article;
  }

  #rA, #rB, #rC {
      flow-from: article;
      height: auto;

      margin: 1em 1em 0em 1em;
      padding: 1em;
      border: 3px solid #46A4E9;
  }

  #rA {
      width: auto;
  }

  #rB {
      float: left;
      width: 15em;
      max-height: 150px;
  }

  #rC {
      float: right;
      width: 12em;
  }

  #main-flow {
      padding: 0em 1em 0em 1em;
  }
&lt;/style>

&lt;body>
    &lt;article>
        &lt;p style="break-after:region;">I am not a ... &lt;/p>
        &lt;p>...&lt;/p>
    &lt;/article>

    &lt;div id="rA">&lt;/div>
    &lt;div id="rB">&lt;/div>
    &lt;div id="rC">&lt;/div>

    &lt;div id="main-flow">
        &lt;p>Lorem ipsum dolor ...&lt;/p>
    &lt;/div>
&lt;/body>
</pre>
   </div>
   <p>The following sections and figures illustrate the intermediate results
	for the visual formatting process.
	In the following, we call RFCB-A, RFCB-B and RFCB-C
	the <span>RFCBs</span> for regions rA, rB and rC respectively.</p>
   <h4 class="heading settled" data-level="7.5.1" id="step1-phase1-example"><span class="secno">7.5.1. </span><span class="content"> Step 1 - Phase 1: Laying out RFCBs with used height of zero</span><a class="self-link" href="#step1-phase1-example"></a></h4>
   <p>Applying the rules for Step 1, Phase 1,
	the computed <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-sizing-3/#valdef-width-auto" id="ref-for-valdef-width-auto①">auto</a> <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width⑦">width</a> values for the RFCBs are resolved
	to used values according to the normal <a href="https://www.w3.org/TR/CSS2/visudet.html#Computing_widths_and_margins">CSS layout rules</a> meaning they stretch to the width
	of their containing block’s content box.</p>
   <ol>
    <li>
     RFCB-A: stretches to fit the rA content box. 
     <p>Since rA also has an <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-sizing-3/#valdef-width-auto" id="ref-for-valdef-width-auto②">auto</a> <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width⑧">width</a>, its own used <span class="property" id="ref-for-propdef-width⑨">width</span> is stretched to fit the <code>&lt;body></code> content box.</p>
    <li>RFCB-B: stretches to fit the <code>rB</code> content box.
    <li>RFCB-C: stretches to fit the <code>rC</code> content box.
   </ol>
   <p>Also applying the rules for Step 1, Phase 1,
	the used values for the RFCBs <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height⑤">height</a> properties are all zero.</p>
   <p>Conceptually, this produces the layout illustrated below.</p>
   <figure>
     <img alt="Step 1 - Phase 1: Layout RFCBs with used heights of 0" src="images/flow-fragment-height-phase-1.png" width="500"> 
    <figcaption> Step 1 - Phase 1: Layout RFCBs with used heights of 0 </figcaption>
   </figure>
   <h4 class="heading settled" data-level="7.5.2" id="step1-phase2-example"><span class="secno">7.5.2. </span><span class="content"> Step 1 - Phase 2: Layout flow to compute the RFCBs' flow fragments heights</span><a class="self-link" href="#step1-phase2-example"></a></h4>
   <p>In this second phase of Step 1,
	the named flow is laid out in <span>regions</span> and the height of each fragment falling in each RFCB is computed.</p>
   <p>The user agent lays out as much
	of the flow into an area with RFCB-A’s used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width①⓪">width</a>.
	rA’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height⑥">height</a> computes to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-sizing-3/#valdef-width-auto" id="ref-for-valdef-width-auto③">auto</a> and there is no vertical maximum height for RFCA’s <span class="property" id="ref-for-propdef-height⑦">height</span>.
	However, because there is a break after the first paragraph
	in the "article" <code>named flow</code>,
	only this first paragraph is laid out
	in RFCB-A and FH-A (the flow fragment height for RFCB-A)
	is resolved by laying out this first paragraph in the used <span class="property" id="ref-for-propdef-width①①">width</span>.</p>
   <p>At this point, the user agent lays out as much
	of the remaining flow as possible in RFCB-B.
	Because rB’s <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/visudet.html#propdef-max-height" id="ref-for-propdef-max-height①">max-height</a> computed value is "150px",
	the user agent only lays out the "article" named flow
	using RFCB-B’s used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width①②">width</a> until the point where
	laying out additional content would cause RFCB-B to overflow rB’s box.
	The fragment height for RFCB-B is resolved: FH-B (<code>150px</code>).</p>
   <p>Finally, the user agent lays out the remainder of the flow in RFCB-C.
	Because rC has no other constraints and no region breaks,
	the remaining content is laid out in RFCB-C’s used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width①③">width</a>.
	This results in a resolved flow fragment height: FH-C.</p>
   <figure>
     <img alt="Step 1 - Phase 2: Measure flow fragments heights" src="images/flow-fragment-height-phase-2.png" width="370"> 
    <figcaption> Step 1 - Phase 2: Measure flow fragments heights </figcaption>
   </figure>
   <h4 class="heading settled" data-level="7.5.3" id="step2-example"><span class="secno">7.5.3. </span><span class="content"> Step 2: Layout document and regions without named flows</span><a class="self-link" href="#step2-example"></a></h4>
   <p>The used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width①④">width</a> of RFCB-A, RFCB-B and RFCB-C
	are resolved as in the previous step.
	However, the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height⑧">height</a> is resolved differently.</p>
   <p>Resolving the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height⑨">height</a> of rA <a href="https://www.w3.org/TR/CSS2/visudet.html#normal-block">requires a content measure</a> which is FH-A (the flow fragment height for RFCB-A).</p>
   <p>The <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height①⓪">height</a> of rB results from first computing its <a href="https://www.w3.org/TR/CSS2/visudet.html#block-root-margin">content measure</a> and then applying the <a href="https://www.w3.org/TR/CSS2/visudet.html#min-max-heights">rules for max-height</a>.
	Here, the vertical content measure evaluates to FH-B.
	After applying the rules for <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/visudet.html#propdef-max-height" id="ref-for-propdef-max-height②">max-height</a> and accounting for margins, padding and borders,
	the used <span class="property" id="ref-for-propdef-height①①">height</span> of rB is resolved to LH-B
	(<code>150px</code>).</p>
   <p>The <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height①②">height</a> of rC’s box results from <a href="https://www.w3.org/TR/CSS2/visudet.html#block-root-margin">calculating its content measure</a>:
	FH-C becomes rC’s used <span class="property" id="ref-for-propdef-height①③">height</span>.</p>
   <figure>
     <img alt="Step 2: Layout document and regions without named flows" src="images/regions-visual-formatting-step-2.png" width="370"> 
    <figcaption> Step 2: Layout document and regions without <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⓪①">named flows</a> </figcaption>
   </figure>
   <h4 class="heading settled" data-level="7.5.4" id="step3-example"><span class="secno">7.5.4. </span><span class="content"> Step 3: named flows layout</span><a class="self-link" href="#step3-example"></a></h4>
   <p>In this final step,
	the <code>article</code> <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⓪②">named flow</a> is laid out in its <a data-link-type="dfn" href="#region-chain" id="ref-for-region-chain⑤③">region chain</a>.
	The used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width①⑤">width</a> for each of the RFCB
	is resolved as in step 1 above.</p>
   <p>The used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height①④">height</a> for the RFCB is a result
	of laying out the as much of the content
	in the <span>region</span> without overflowing its content box
	and following the <a href="https://www.w3.org/TR/css3-break/">fragmentation rules</a>.</p>
   <p>Because the computed <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-width" id="ref-for-propdef-width①⑥">width</a> of the RFCB has not changed
	and the fragmentation rules applied are the same as in Phase 1, Step 2,
	the used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height①⑤">height</a> for RFCB-A, RFCB-B and RFCB-C
	are LH-A, LH-B and LH-C, respectively.</p>
   <p>There may be situations where the used <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-sizing-3/#propdef-height" id="ref-for-propdef-height①⑥">height</a> of RFCBs resolved in Step 3 are different
	from the <span>flow fragment height</span> computed in Step 1 Phase 2.</p>
   <figure>
     <img alt="Step 3: Final result after laying out named flows in regions" src="images/regions-visual-formatting-step-3.png" width="370"> 
    <figcaption> Step 3: Final result after laying out <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⓪③">named flows</a> in regions </figcaption>
   </figure>
   <h2 class="heading settled" data-level="8" id="relation-to-document-events"><span class="secno">8. </span><span class="content"> Relation to document events</span><a class="self-link" href="#relation-to-document-events"></a></h2>
   <p>The CSS Regions module does not alter
	the normal processing of events
	in the document tree.
	In particular,
	if an event occurs on an element
	that is part of a <a data-link-type="dfn" href="#named-flow" id="ref-for-named-flow①⓪④">named flow</a>,
	the <a href="https://www.w3.org/TR/dom/#events">event’s bubble and capture phases</a> happen following the document tree order.</p>
   <div class="note" role="note">
    <span class="note-prefix">Note </span> 
    <p>This means that in most cases <a data-link-type="dfn" href="#css-region" id="ref-for-css-region④③">CSS Regions</a> will not receive user events
		that trigger on their named flow content.
		Event handlers for named flow content can check <code><a href="https://drafts.csswg.org/cssom-view/#extensions-to-the-document-interface">getElementsFromPoint()</a></code> <a data-link-type="biblio" href="#biblio-cssom-view" title="CSSOM View Module">[CSSOM-VIEW]</a> to find the <span id="ref-for-css-region④④">CSS Region</span> where the user event occurred.
		Future versions of CSS-UI may provide
		a more general solution for user event bubbling
		where the stack of elements
		at the event coordinates</p>
   </div>
   <h2 class="heading settled" data-level="9" id="relation-to-other-specifications"><span class="secno">9. </span><span class="content"> Relation to other specifications</span><a class="self-link" href="#relation-to-other-specifications"></a></h2>
   <p>This specification is related to other specifications
	as described in the references section.
	In addition, it is related to the following specifications:</p>
   <ol>
    <li> CSS Fragmentation Module Level 3 <a data-link-type="biblio" href="#biblio-css3-break" title="CSS Fragmentation Module Level 3">[CSS3-BREAK]</a>.
			This module defines the rules for fragmenting content over multiple containers
			and applies to <a data-link-type="dfn" href="#css-region" id="ref-for-css-region④⑤">CSS Regions</a> in addition to applying to multi-column and <a data-link-type="dfn" href="https://drafts.csswg.org/mediaqueries-5/#paged-media" id="ref-for-paged-media">paged media</a>. 
    <li> CSS Pagination Templates Module Level 3 <a data-link-type="biblio" href="#biblio-css3-page-template" title="CSS Pagination Templates Module Level 3">[CSS3-PAGE-TEMPLATE]</a>.
			This module defines a syntax to define layout templates
			which can be used when paginating content.
			The page templates use regions. 
    <li> CSS Exclusions Module <a data-link-type="biblio" href="#biblio-css3-exclusions" title="CSS Exclusions Module Level 1">[CSS3-EXCLUSIONS]</a>.
			This module defines a generic way to define exclusions
			around which content can flow.
			This can be seen as an extension to CSS floats.
			In advanced layout designs,
			it is expected that the CSS Exclusions module
			will be commonly combined with the CSS Regions module. 
    <li> CSS Line Grid Module <a data-link-type="biblio" href="#biblio-css3-line-grid" title="CSS Line Grid Module Level 1">[CSS3-LINE-GRID]</a>.
			This module defines a concept of line grid
			to align the position of lines in different elements.
			The line grid functionality is related and needed
			for aligning content flowing in separate regions. 
   </ol>
   <h2 class="heading settled" data-level="10" id="usecases"><span class="secno">10. </span><span class="content"> Use Cases</span><a class="self-link" href="#usecases"></a></h2>
   <p>Use cases are described on <a href="http://wiki.csswg.org/spec/css3-regions/regions-use-cases">these</a> <a href="http://wiki.csswg.org/spec/css3-regions/regions-print-use-cases">pages</a>.</p>
   <h2 class="heading settled" data-level="11" id="changes"><span class="secno">11. </span><span class="content"> Changes</span><a class="self-link" href="#changes"></a></h2>
   <h3 class="heading settled" data-level="11.1" id="changes_from_Oct_9_2014"><span class="secno">11.1. </span><span class="content"> Changes from <a href="https://www.w3.org/TR/2014/WD-css-regions-1-20141009/">October 9<sup>th</sup> 2014</a> version</span><a class="self-link" href="#changes_from_Oct_9_2014"></a></h3>
   <ul>
    <li>Add animation type lines
    <li>Remove definition of break properties, since they’re already defined in <a data-link-type="biblio" href="#biblio-css3-break" title="CSS Fragmentation Module Level 3">[CSS3-BREAK]</a>.
    <li>Mention effects of containment on regions.
   </ul>
   <h3 class="heading settled" data-level="11.2" id="changes_from_Feb_18_2014"><span class="secno">11.2. </span><span class="content"> Changes from <a href="https://www.w3.org/TR/2014/WD-css3-regions-20140218/">February 18<sup>th</sup> 2014</a> version</span><a class="self-link" href="#changes_from_Feb_18_2014"></a></h3>
   <ul>
    <li>Added three simpler examples to the introduction
    <li>Moved complex example to the <a href="http://wiki.csswg.org/spec/css3-regions/complex-layout-example">CSSWG wiki</a>
    <li>Moved the effects of CSS containment to this specification from <a data-link-type="biblio" href="#biblio-css-contain-1" title="CSS Containment Module Level 1">[CSS-CONTAIN-1]</a>. 
   </ul>
   <h3 class="heading settled" data-level="11.3" id="changes_from_May_28_2013"><span class="secno">11.3. </span><span class="content"> Changes from <a href="https://www.w3.org/TR/2013/WD-css3-regions-20130528/">May 28<sup>th</sup> 2013</a> version</span><a class="self-link" href="#changes_from_May_28_2013"></a></h3>
   <ul>
    <li>Removed region styling from this level
    <li>Changed ::region() to ::region
    <li>display:none elements do not become CSS Regions
    <li>Clarify accessibility interactions with flow-into
    <li>Change NamedFlowCollection to NamedFlowMap
    <li>Remove mention of run-in and clarify ::before and ::after block containers
    <li>Removed custom element syntax from examples
    <li>Changed NamedFlowCollection getters back to null when there is no NamedFlow.
    <li>Removed issue on user events and added note describing solution(s)
    <li>Changed type of NamedFlow.getContent() from NodeList to sequence&lt;Node>
   </ul>
   <h3 class="heading settled" data-level="11.4" id="changes_from_Aug_28_2012"><span class="secno">11.4. </span><span class="content"> Changes from <a href="https://www.w3.org/TR/2012/WD-css3-regions-20120823/">August 28<sup>th</sup> 2012</a> version</span><a class="self-link" href="#changes_from_Aug_28_2012"></a></h3>
   <ul>
    <li>Changed @region rule to ::region() functional pseudo-element
    <li>Removed CSSRegionStyleRule (see above)
    <li>Tied named flow event triggers to visual processing model
    <li>Described how visual formatting of nested regions works
    <li>Added content and element keywords to flow-into
    <li>Added regionoversetchange event
    <li>renamed regionlayoutupdate to regionfragmentchange
    <li>Defined offsetParent interaction
    <li>Removed implication of DOM manipulation
    <li>Changed Appendix A to use custom element layout.
    <li>Noted change in pseudo-element generation with flow-from.
    <li>Changed case of regionlayoutupdate to match other events in <a data-link-type="biblio" href="#biblio-dom-level-3-events" title="UI Events">[DOM-LEVEL-3-EVENTS]</a>.
    <li>Added section on fragmenting the fragmenters.
    <li>Added section on handling circular flow-from and flow-into situations.
    <li>Added alignment and justification to region styling properties.
    <li>Added timing for regionLayoutUpdate event.
    <li>Clarified interaction between content and flow-from for pseudo-elements.
    <li>Changed NamedFlowCollection getters to return undefined when there is no NamedFlow.
    <li>Changed region-overflow property to region-fragment.
   </ul>
   <h3 class="heading settled" data-level="11.5" id="changes_from_May_03_2012"><span class="secno">11.5. </span><span class="content"> Changes from <a href="https://www.w3.org/TR/2012/WD-css3-regions-20120503/">May 3<sup>rd</sup> 2012</a> version</span><a class="self-link" href="#changes_from_May_03_2012"></a></h3>
   <ul>
    <li>Removed exceptions from the Region interface.
    <li>Changed NamedFlowCollection from live to a static snapshot.
    <li>Changed NamedFlow to inherit from EventTarget.
    <li>Removed flowFrom from Region interface and changed method name to getComputedRegionStyle().
    <li>Region interface is now a supplemental interface with the [NoInterfaceObject] extended attribute.
    <li>Added note for regionLayoutUpdate dispatching in nested flows.
    <li>Removed Document.getFlowByName() in favor of NamedFlowCollection.namedItem().
    <li>Changed to overset:false for NULL NamedFlow.
    <li>Changed regionLayoutUpdate to not bubble.
   </ul>
   <h3 class="heading settled" data-level="11.6" id="older_changes"><span class="secno">11.6. </span><span class="content">Older Changes</span><a class="self-link" href="#older_changes"></a></h3>
   <p>Older changelogs are <a href="http://wiki.csswg.org/spec/css3-regions/older-changelogs">archived</a> on the CSSWG wiki.</p>
   <h2 class="no-num heading settled" id="acknowledgments"><span class="content"> Acknowledgments</span><a class="self-link" href="#acknowledgments"></a></h2>
   <p>The editors are grateful to the CSS working group
	for their feedback and help with the genesis of this specification.</p>
   <p>In addition, the editors would like to thank
	the following individuals for their contributions,
	either during the conception of CSS Regions
	or during its development and specification review process:</p>
   <p>Erik Arvidsson,
	Tab Atkins,
	Catalin Badea,
	Mihai Balan,
	Andrei Bucur,
	Razvan Caliman,
	Alexandru Chiculita,
	Phil Cupp,
	Arron Eicholz,
	John Jansen,
	CJ Gammon,
	Dimitri Glazkov,
	Daniel Glazman,
	Arno Gourdol,
	Catalin Grigoroscuta,
	David Hyatt,
	Brian Heuston,
	Ian Hickson,
	Jonathan Hoersch,
	Michael Jolson,
	Brad Kemper,
	Håkon Wium Lie,
	Kang-Hao (Kenny) Lu,
	Mihai Maerean,
	Markus Mielke,
	Robert O’Callahan,
	Theresa O’Connor,
	Mihnea Ovidenie,
	Virgil Palanciuc,
	Olga Popiv,
	Christoph Päper,
	Anton Prowse,
	Florian Rivoal,
	Peter Sorotokin,
	Elliott Sprehn,
	Radu Stavila,
	Christian Stockwell,
	Eugene Veselov,
	Boris Zbarsky,
	Stephen Zilles
	and the CSS Working Group members.</p>
  </main>
  <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
  <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="w3c-example">
   <a class="self-link" href="#w3c-example"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
    this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong></p>
  <details class="wpt-tests-block" dir="ltr" lang="en" open>
   <summary>Tests</summary>
   <p>Tests relating to the content of this specification
                     may be documented in “Tests” blocks like this one.
                     Any such block is non-normative.</p>
   <ul class="wpt-tests-list"></ul>
   <hr>
  </details>
  <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> Conformance classes</span><a class="self-link" href="#w3c-conformance-classes"></a></h3>
  <p>Conformance to this specification
    is defined for three conformance classes: </p>
  <dl>
   <dt>style sheet 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
            style sheet</a>. 
   <dt>renderer 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets the semantics of a style sheet and renders
            documents that use them. 
   <dt>authoring tool 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a style sheet. 
  </dl>
  <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module. </p>
  <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.) </p>
  <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module. </p>
  <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> Partial implementations</span><a class="self-link" href="#w3c-partial"></a></h3>
  <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong> treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>
  <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> Implementations of Unstable and Proprietary Features</span><a class="self-link" href="#w3c-conform-future-proofing"></a></h4>
  <p>To avoid clashes with future stable CSS features,
        the CSSWG recommends <a href="http://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the implementation of <a href="http://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a href="http://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
  <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> Non-experimental implementations</span><a class="self-link" href="#w3c-testing"></a></h3>
  <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec. </p>
  <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group. </p>
  <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing list.</p>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#content">content</a><span>, in § 3.1</span>
   <li><a href="#css-region">CSS Region</a><span>, in § 2.1</span>
   <li><a href="#dom-namedflowmap-delete">delete()</a><span>, in § 4.1</span>
   <li><a href="#element">element</a><span>, in § 3.1</span>
   <li><a href="#dom-namedflow-firstemptyregionindex">firstEmptyRegionIndex</a><span>, in § 4.1</span>
   <li><a href="#flow-fragment-height">flow fragment height</a><span>, in § 7.3</span>
   <li><a href="#propdef-flow-from">flow-from</a><span>, in § 3.2</span>
   <li><a href="#propdef-flow-into">flow-into</a><span>, in § 3.1</span>
   <li><a href="#dom-namedflowmap-get">get()</a><span>, in § 4.1</span>
   <li><a href="#dom-namedflow-getcontent">getContent()</a><span>, in § 4.1</span>
   <li><a href="#dom-region-getregionflowranges">getRegionFlowRanges()</a><span>, in § 4.2</span>
   <li><a href="#dom-namedflow-getregions">getRegions()</a><span>, in § 4.1</span>
   <li><a href="#dom-namedflow-getregionsbycontent①">getRegionsByContent()</a><span>, in § 4.1</span>
   <li><a href="#dom-namedflow-getregionsbycontent">getRegionsByContent(node)</a><span>, in § 4.1</span>
   <li><a href="#dom-namedflowmap-has">has()</a><span>, in § 4.1</span>
   <li><a href="#last-usable-region">last usable CSS region</a><span>, in § 2.3</span>
   <li><a href="#last-usable-region">last usable region</a><span>, in § 2.3</span>
   <li><a href="#dom-namedflow-name">name</a><span>, in § 4.1</span>
   <li><a href="#named-flow">named flow</a><span>, in § 2.4</span>
   <li><a href="#namedflow">NamedFlow</a><span>, in § 4.1</span>
   <li><a href="#namedflowmap">NamedFlowMap</a><span>, in § 4.1</span>
   <li>
    namedFlows
    <ul>
     <li><a href="#dom-document-namedflows">attribute for Document</a><span>, in § 4.1</span>
     <li><a href="#document-namedflows">definition of</a><span>, in § 4.1</span>
    </ul>
   <li><a href="#nested-region-context">nested region context</a><span>, in § 3.2.2</span>
   <li><a href="#dom-namedflow-overset">overset</a><span>, in § 4.1</span>
   <li><a href="#region">Region</a><span>, in § 4.2</span>
   <li><a href="#region-chain">region chain</a><span>, in § 2.2</span>
   <li><a href="#region-flow-content-box">region flow content box</a><span>, in § 7.2</span>
   <li><a href="#propdef-region-fragment">region-fragment</a><span>, in § 3.4</span>
   <li><a href="#dom-region-regionoverset">regionOverset</a><span>, in § 4.2</span>
   <li><a href="#rfcb">RFCB</a><span>, in § 7.2</span>
   <li><a href="#dom-namedflowmap-set">set()</a><span>, in § 4.1</span>
   <li><a href="#specified-flow">specified flow</a><span>, in § 3.1</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSS-ANCHOR-POSITION-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c17ce735">height</span>
     <li><span class="dfn-paneled" id="a5010638">width</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-BOX-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="46c6a718">content box</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-BREAK-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5d80a0f7">always</span>
     <li><span class="dfn-paneled" id="8ec7e78b">auto</span>
     <li><span class="dfn-paneled" id="a6126efb">avoid</span>
     <li><span class="dfn-paneled" id="4b2f642a">avoid-region</span>
     <li><span class="dfn-paneled" id="d3914900">region</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-CONTAIN-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="34b77623">layout containment</span>
     <li><span class="dfn-paneled" id="d1d73cbf">scoped</span>
     <li><span class="dfn-paneled" id="9b54ada7">style containment</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-CONTENT-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2467179e">content</span>
     <li><span class="dfn-paneled" id="991145b0">none</span>
     <li><span class="dfn-paneled" id="d4d68fad">normal</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-DISPLAY-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="e7f0dd6c">display</span>
     <li><span class="dfn-paneled" id="55e8f5de">none</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-OVERFLOW-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="86928bde">overflow</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-OVERFLOW-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="4e6dbe9d">continue</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-SIZING-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0e5cedd7">auto</span>
     <li><span class="dfn-paneled" id="68019d7a">height</span>
     <li><span class="dfn-paneled" id="88643fe0">width</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9213678e">&lt;ident></span>
     <li><span class="dfn-paneled" id="537cf076">?</span>
     <li><span class="dfn-paneled" id="358fd6ff">css-wide keywords</span>
     <li><span class="dfn-paneled" id="6ec67710">|</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="f80bfcde">max-height</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS3-BREAK]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0a52b385">break-after</span>
     <li><span class="dfn-paneled" id="c1654d36">break-before</span>
     <li><span class="dfn-paneled" id="9522389e">break-inside</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS3COL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="35c362d1">column-fill</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSSOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5fced98b">CSSOMString</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
     <li><span class="dfn-paneled" id="96c16e60">Node</span>
     <li><span class="dfn-paneled" id="d2bd0bce">Range</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIAQUERIES-5]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="758665a5">paged media</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="47574099">short</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-anchor-position-1">[CSS-ANCHOR-POSITION-1]
   <dd>Tab Atkins Jr.; Elika Etemad; Ian Kilpatrick. <a href="https://drafts.csswg.org/css-anchor-position-1/"><cite>CSS Anchor Positioning</cite></a>. URL: <a href="https://drafts.csswg.org/css-anchor-position-1/">https://drafts.csswg.org/css-anchor-position-1/</a>
   <dt id="biblio-css-box-4">[CSS-BOX-4]
   <dd>Elika Etemad. <a href="https://drafts.csswg.org/css-box-4/"><cite>CSS Box Model Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-box-4/">https://drafts.csswg.org/css-box-4/</a>
   <dt id="biblio-css-break-4">[CSS-BREAK-4]
   <dd>Rossen Atanassov; Elika Etemad. <a href="https://drafts.csswg.org/css-break-4/"><cite>CSS Fragmentation Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-break-4/">https://drafts.csswg.org/css-break-4/</a>
   <dt id="biblio-css-contain-1">[CSS-CONTAIN-1]
   <dd>Tab Atkins Jr.; Florian Rivoal. <a href="https://drafts.csswg.org/css-contain-1/"><cite>CSS Containment Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-contain-1/">https://drafts.csswg.org/css-contain-1/</a>
   <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
   <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://drafts.csswg.org/css-contain-2/"><cite>CSS Containment Module Level 2</cite></a>. URL: <a href="https://drafts.csswg.org/css-contain-2/">https://drafts.csswg.org/css-contain-2/</a>
   <dt id="biblio-css-content-3">[CSS-CONTENT-3]
   <dd>Elika Etemad; Dave Cramer. <a href="https://drafts.csswg.org/css-content-3/"><cite>CSS Generated Content Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-content-3/">https://drafts.csswg.org/css-content-3/</a>
   <dt id="biblio-css-display-4">[CSS-DISPLAY-4]
   <dd><a href="https://drafts.csswg.org/css-display-4/"><cite>CSS Display Module Level 4</cite></a>. Editor's Draft. URL: <a href="https://drafts.csswg.org/css-display-4/">https://drafts.csswg.org/css-display-4/</a>
   <dt id="biblio-css-overflow-4">[CSS-OVERFLOW-4]
   <dd>David Baron; Florian Rivoal; Elika Etemad. <a href="https://drafts.csswg.org/css-overflow-4/"><cite>CSS Overflow Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-overflow-4/">https://drafts.csswg.org/css-overflow-4/</a>
   <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-sizing-3/"><cite>CSS Box Sizing Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-sizing-3/">https://drafts.csswg.org/css-sizing-3/</a>
   <dt id="biblio-css-values-3">[CSS-VALUES-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-3/"><cite>CSS Values and Units Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-3/">https://drafts.csswg.org/css-values-3/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-4/"><cite>CSS Values and Units Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
   <dt id="biblio-css2">[CSS2]
   <dd>Bert Bos; et al. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-css2①">[CSS2]
   <dd>Bert Bos; et al. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-css3-break">[CSS3-BREAK]
   <dd>Rossen Atanassov; Elika Etemad. <a href="https://drafts.csswg.org/css-break/"><cite>CSS Fragmentation Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-break/">https://drafts.csswg.org/css-break/</a>
   <dt id="biblio-css3-writing-modes">[CSS3-WRITING-MODES]
   <dd>Elika Etemad; Koji Ishii. <a href="https://drafts.csswg.org/css-writing-modes-3/"><cite>CSS Writing Modes Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-writing-modes-3/">https://drafts.csswg.org/css-writing-modes-3/</a>
   <dt id="biblio-css3col">[CSS3COL]
   <dd>Florian Rivoal; Rachel Andrew. <a href="https://drafts.csswg.org/css-multicol/"><cite>CSS Multi-column Layout Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-multicol/">https://drafts.csswg.org/css-multicol/</a>
   <dt id="biblio-cssom">[CSSOM]
   <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://drafts.csswg.org/cssom/"><cite>CSS Object Model (CSSOM)</cite></a>. URL: <a href="https://drafts.csswg.org/cssom/">https://drafts.csswg.org/cssom/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-dom-level-3-events">[DOM-LEVEL-3-EVENTS]
   <dd>Gary Kacmarcik; Travis Leithead. <a href="https://w3c.github.io/uievents/"><cite>UI Events</cite></a>. URL: <a href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
   <dt id="biblio-mediaqueries-5">[MEDIAQUERIES-5]
   <dd>Dean Jackson; et al. <a href="https://drafts.csswg.org/mediaqueries-5/"><cite>Media Queries Level 5</cite></a>. URL: <a href="https://drafts.csswg.org/mediaqueries-5/">https://drafts.csswg.org/mediaqueries-5/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-select">[SELECT]
   <dd>Tantek Çelik; et al. <a href="https://drafts.csswg.org/selectors-3/"><cite>Selectors Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/selectors-3/">https://drafts.csswg.org/selectors-3/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
   <dd>Elika Etemad; Florian Rivoal. <a href="https://drafts.csswg.org/css-overflow-3/"><cite>CSS Overflow Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-overflow-3/">https://drafts.csswg.org/css-overflow-3/</a>
   <dt id="biblio-css3-exclusions">[CSS3-EXCLUSIONS]
   <dd>Rossen Atanassov; Vincent Hardy; Alan Stearns. <a href="https://drafts.csswg.org/css-exclusions/"><cite>CSS Exclusions Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-exclusions/">https://drafts.csswg.org/css-exclusions/</a>
   <dt id="biblio-css3-flexbox">[CSS3-FLEXBOX]
   <dd>Tab Atkins Jr.; et al. <a href="https://drafts.csswg.org/css-flexbox-1/"><cite>CSS Flexible Box Layout Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-flexbox-1/">https://drafts.csswg.org/css-flexbox-1/</a>
   <dt id="biblio-css3-line-grid">[CSS3-LINE-GRID]
   <dd>Elika Etemad; Koji Ishii; Alan Stearns. <a href="https://drafts.csswg.org/css-line-grid/"><cite>CSS Line Grid Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-line-grid/">https://drafts.csswg.org/css-line-grid/</a>
   <dt id="biblio-css3-page-template">[CSS3-PAGE-TEMPLATE]
   <dd>Alan Stearns. <a href="https://drafts.csswg.org/css-page-template-1/"><cite>CSS Pagination Templates Module Level 3</cite></a>. Proposal for a CSS module. URL: <a href="https://drafts.csswg.org/css-page-template-1/">https://drafts.csswg.org/css-page-template-1/</a>
   <dt id="biblio-css3page">[CSS3PAGE]
   <dd>Elika Etemad. <a href="https://drafts.csswg.org/css-page-3/"><cite>CSS Paged Media Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-page-3/">https://drafts.csswg.org/css-page-3/</a>
   <dt id="biblio-cssom-view">[CSSOM-VIEW]
   <dd>Simon Pieters. <a href="https://drafts.csswg.org/cssom-view/"><cite>CSSOM View Module</cite></a>. URL: <a href="https://drafts.csswg.org/cssom-view/">https://drafts.csswg.org/cssom-view/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">Property Index</span><a class="self-link" href="#property-index"></a></h2>
  <div class="big-element-wrapper">
   <table class="index">
    <thead>
     <tr>
      <th scope="col">Name
      <th scope="col">Value
      <th scope="col">Initial
      <th scope="col">Applies to
      <th scope="col">Inh.
      <th scope="col">%ages
      <th scope="col">Anim­ation type
      <th scope="col">Canonical order
      <th scope="col">Com­puted value
    <tbody>
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-flow-from" id="ref-for-propdef-flow-from①③">flow-from</a>
      <td>&lt;ident> | none
      <td>none
      <td>Non-replaced block containers.  This might be expanded in future versions of the specification to allow other types of containers to receive flow content.
      <td>no
      <td>n/a
      <td>not animatable
      <td>per grammar
      <td>as specified
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-flow-into" id="ref-for-propdef-flow-into①⓪">flow-into</a>
      <td>none | &lt;ident> [element|content]?
      <td>none
      <td>All elements, but not pseudo-elements such as ::first-line, ::first-letter, ::before or ::after.
      <td>no
      <td>n/a
      <td>not animatable
      <td>per grammar
      <td>as specified
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-region-fragment" id="ref-for-propdef-region-fragment⑤">region-fragment</a>
      <td>auto | break
      <td>auto
      <td>CSS Regions
      <td>no
      <td>n/a
      <td>discrete
      <td>per grammar
      <td>specified keyword
   </table>
  </div>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#namedflowmap"><c- n>NamedFlowMap</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="NamedFlowMap" href="#dom-document-namedflows"><c- g>namedFlows</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#namedflowmap"><code><c- g>NamedFlowMap</c-></code></a> {
  <c- b>maplike</c->&lt;<a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a>, <a data-link-type="idl-name" href="#namedflow"><c- n>NamedFlow</c-></a>>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#namedflow"><code><c- g>NamedFlow</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#dom-namedflow-name"><c- g>name</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-namedflow-overset"><c- g>overset</c-></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#region"><c- n>Region</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-namedflow-getregions"><c- g>getRegions</c-></a>();
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-short"><c- b>short</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="short" href="#dom-namedflow-firstemptyregionindex"><c- g>firstEmptyRegionIndex</c-></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node"><c- n>Node</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-namedflow-getcontent"><c- g>getContent</c-></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#region"><c- n>Region</c-></a>> <a href="#dom-namedflow-getregionsbycontent"><code><c- g>getRegionsByContent</c-></code></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node"><c- n>Node</c-></a> <a href="#dom-namedflow-getregionsbycontent-node-node"><code><c- g>node</c-></code></a>);
};

<c- b>interface</c-> <c- b>mixin</c-> <a href="#region"><code><c- g>Region</c-></code></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#dom-region-regionoverset"><c- g>regionOverset</c-></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#range"><c- n>Range</c-></a>>? <a class="idl-code" data-link-type="method" href="#dom-region-getregionflowranges"><c- g>getRegionFlowRanges</c-></a>();
};

<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#region"><c- n>Region</c-></a>;

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> The <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-overflow-4/#propdef-continue">continue</a> property in <a data-link-type="biblio" href="#biblio-css-overflow-3" title="CSS Overflow Module Level 3">[css-overflow-3]</a> is likely to replace this property. <a class="issue-return" href="#issue-e3598b8f" title="Jump to section">↵</a></div>
  </div>
  <details class="mdn-anno unpositioned" data-anno-for="region-flow-break">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/break-after" title="The break-after CSS property sets how page, column, or region breaks should behave after a generated box. If there is no generated box, the property is ignored.">break-after</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>65+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>50+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>37+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>37+</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/break-before" title="The break-before CSS property sets how page, column, or region breaks should behave before a generated box. If there is no generated box, the property is ignored.">break-before</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>65+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>50+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>37+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>37+</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/break-inside" title="The break-inside CSS property sets how page, column, or region breaks should behave inside a generated box. If there is no generated box, the property is ignored.">break-inside</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>65+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>50+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>37+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>37+</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"0a52b385": {"dfnID":"0a52b385","dfnText":"break-after","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-break-after"}],"title":"3.3. \nControlling Region Flow Breaks"}],"url":"https://drafts.csswg.org/css-break-3/#propdef-break-after"},
"0e5cedd7": {"dfnID":"0e5cedd7","dfnText":"auto","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-width-auto"}],"title":"7.2. \nThe Region Flow Content Box (RFCB)"},{"refs":[{"id":"ref-for-valdef-width-auto\u2460"},{"id":"ref-for-valdef-width-auto\u2461"}],"title":"7.5.1. \nStep 1 - Phase 1: Laying out RFCBs with used height of zero"},{"refs":[{"id":"ref-for-valdef-width-auto\u2462"}],"title":"7.5.2. \nStep 1 - Phase 2: Layout flow to compute the RFCBs' flow fragments heights"}],"url":"https://drafts.csswg.org/css-sizing-3/#valdef-width-auto"},
"2467179e": {"dfnID":"2467179e","dfnText":"content","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-content"},{"id":"ref-for-propdef-content\u2460"}],"title":"3.2. \nThe flow-from property"}],"url":"https://drafts.csswg.org/css-content-3/#propdef-content"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"}],"title":"4.2. \nThe Region mixin"}],"url":"https://dom.spec.whatwg.org/#element"},
"2bc0cdf4": {"dfnID":"2bc0cdf4","dfnText":"EventTarget","external":true,"refSections":[{"refs":[{"id":"ref-for-eventtarget"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"https://dom.spec.whatwg.org/#eventtarget"},
"34b77623": {"dfnID":"34b77623","dfnText":"layout containment","external":true,"refSections":[{"refs":[{"id":"ref-for-layout-containment"},{"id":"ref-for-layout-containment\u2460"}],"title":"2.3. \nLast region"}],"url":"https://drafts.csswg.org/css-contain-2/#layout-containment"},
"358fd6ff": {"dfnID":"358fd6ff","dfnText":"css-wide keywords","external":true,"refSections":[{"refs":[{"id":"ref-for-css-wide-keywords"}],"title":"1.1. \nValue Definitions"}],"url":"https://drafts.csswg.org/css-values-4/#css-wide-keywords"},
"35c362d1": {"dfnID":"35c362d1","dfnText":"column-fill","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-column-fill"}],"title":"5. \nMulti-column regions"}],"url":"https://drafts.csswg.org/css-multicol-1/#propdef-column-fill"},
"46c6a718": {"dfnID":"46c6a718","dfnText":"content box","external":true,"refSections":[{"refs":[{"id":"ref-for-content-box"}],"title":"4.2. \nThe Region mixin"}],"url":"https://drafts.csswg.org/css-box-4/#content-box"},
"47574099": {"dfnID":"47574099","dfnText":"short","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-short"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"https://webidl.spec.whatwg.org/#idl-short"},
"4b2f642a": {"dfnID":"4b2f642a","dfnText":"avoid-region","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-break-before-avoid-region"}],"title":"3.3. \nControlling Region Flow Breaks"}],"url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-avoid-region"},
"4e6dbe9d": {"dfnID":"4e6dbe9d","dfnText":"continue","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-continue"}],"title":"3.4. \nThe region-fragment property"}],"url":"https://drafts.csswg.org/css-overflow-4/#propdef-continue"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"537cf076": {"dfnID":"537cf076","dfnText":"?","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-opt"}],"title":"3.1. \nThe flow-into property"}],"url":"https://drafts.csswg.org/css-values-4/#mult-opt"},
"55e8f5de": {"dfnID":"55e8f5de","dfnText":"none","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-display-none"}],"title":"3.2. \nThe flow-from property"}],"url":"https://drafts.csswg.org/css-display-4/#valdef-display-none"},
"5d80a0f7": {"dfnID":"5d80a0f7","dfnText":"always","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-break-before-always"}],"title":"3.3. \nControlling Region Flow Breaks"}],"url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-always"},
"5fced98b": {"dfnID":"5fced98b","dfnText":"CSSOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-cssomstring"},{"id":"ref-for-cssomstring\u2460"}],"title":"4.1. \nThe NamedFlow interface"},{"refs":[{"id":"ref-for-cssomstring\u2461"}],"title":"4.2. \nThe Region mixin"}],"url":"https://drafts.csswg.org/cssom-1/#cssomstring"},
"68019d7a": {"dfnID":"68019d7a","dfnText":"height","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-height"}],"title":"3.2. \nThe flow-from property"},{"refs":[{"id":"ref-for-propdef-height\u2460"}],"title":"7.2. \nThe Region Flow Content Box (RFCB)"},{"refs":[{"id":"ref-for-propdef-height\u2461"}],"title":"7.3.1.2. \nRFCB flow fragment height resolution, Phase 2"},{"refs":[{"id":"ref-for-propdef-height\u2462"}],"title":"7.3.3. \nStep 3: named flows layout"},{"refs":[{"id":"ref-for-propdef-height\u2463"}],"title":"7.4. \nRegions visual formatting: implementation note"},{"refs":[{"id":"ref-for-propdef-height\u2464"}],"title":"7.5.1. \nStep 1 - Phase 1: Laying out RFCBs with used height of zero"},{"refs":[{"id":"ref-for-propdef-height\u2465"},{"id":"ref-for-propdef-height\u2466"}],"title":"7.5.2. \nStep 1 - Phase 2: Layout flow to compute the RFCBs' flow fragments heights"},{"refs":[{"id":"ref-for-propdef-height\u2467"},{"id":"ref-for-propdef-height\u2468"},{"id":"ref-for-propdef-height\u2460\u24ea"},{"id":"ref-for-propdef-height\u2460\u2460"},{"id":"ref-for-propdef-height\u2460\u2461"},{"id":"ref-for-propdef-height\u2460\u2462"}],"title":"7.5.3. \nStep 2: Layout document and regions without named flows"},{"refs":[{"id":"ref-for-propdef-height\u2460\u2463"},{"id":"ref-for-propdef-height\u2460\u2464"},{"id":"ref-for-propdef-height\u2460\u2465"}],"title":"7.5.4. \nStep 3: named flows layout"}],"url":"https://drafts.csswg.org/css-sizing-3/#propdef-height"},
"6ec67710": {"dfnID":"6ec67710","dfnText":"|","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-one"},{"id":"ref-for-comb-one\u2460"}],"title":"3.1. \nThe flow-into property"},{"refs":[{"id":"ref-for-comb-one\u2461"}],"title":"3.2. \nThe flow-from property"},{"refs":[{"id":"ref-for-comb-one\u2462"}],"title":"3.4. \nThe region-fragment property"}],"url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"758665a5": {"dfnID":"758665a5","dfnText":"paged media","external":true,"refSections":[{"refs":[{"id":"ref-for-paged-media"}],"title":"9. \nRelation to other specifications"}],"url":"https://drafts.csswg.org/mediaqueries-5/#paged-media"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"https://dom.spec.whatwg.org/#document"},
"86928bde": {"dfnID":"86928bde","dfnText":"overflow","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-overflow"},{"id":"ref-for-propdef-overflow\u2460"},{"id":"ref-for-propdef-overflow\u2461"}],"title":"3.4. \nThe region-fragment property"}],"url":"https://drafts.csswg.org/css-overflow-3/#propdef-overflow"},
"88643fe0": {"dfnID":"88643fe0","dfnText":"width","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-width"}],"title":"3.2. \nThe flow-from property"},{"refs":[{"id":"ref-for-propdef-width\u2460"}],"title":"7.2. \nThe Region Flow Content Box (RFCB)"},{"refs":[{"id":"ref-for-propdef-width\u2461"},{"id":"ref-for-propdef-width\u2462"},{"id":"ref-for-propdef-width\u2463"}],"title":"7.2.1. \nRFCB width resolution"},{"refs":[{"id":"ref-for-propdef-width\u2464"}],"title":"7.3.2. \nStep 2: region boxes layout"},{"refs":[{"id":"ref-for-propdef-width\u2465"}],"title":"7.3.3. \nStep 3: named flows layout"},{"refs":[{"id":"ref-for-propdef-width\u2466"},{"id":"ref-for-propdef-width\u2467"},{"id":"ref-for-propdef-width\u2468"}],"title":"7.5.1. \nStep 1 - Phase 1: Laying out RFCBs with used height of zero"},{"refs":[{"id":"ref-for-propdef-width\u2460\u24ea"},{"id":"ref-for-propdef-width\u2460\u2460"},{"id":"ref-for-propdef-width\u2460\u2461"},{"id":"ref-for-propdef-width\u2460\u2462"}],"title":"7.5.2. \nStep 1 - Phase 2: Layout flow to compute the RFCBs' flow fragments heights"},{"refs":[{"id":"ref-for-propdef-width\u2460\u2463"}],"title":"7.5.3. \nStep 2: Layout document and regions without named flows"},{"refs":[{"id":"ref-for-propdef-width\u2460\u2464"},{"id":"ref-for-propdef-width\u2460\u2465"}],"title":"7.5.4. \nStep 3: named flows layout"}],"url":"https://drafts.csswg.org/css-sizing-3/#propdef-width"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"},{"id":"ref-for-Exposed\u2460"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8ec7e78b": {"dfnID":"8ec7e78b","dfnText":"auto","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-break-before-auto"}],"title":"3.3. \nControlling Region Flow Breaks"}],"url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-auto"},
"9213678e": {"dfnID":"9213678e","dfnText":"<ident>","external":true,"refSections":[{"refs":[{"id":"ref-for-typedef-ident"}],"title":"3.1. \nThe flow-into property"},{"refs":[{"id":"ref-for-typedef-ident\u2460"}],"title":"3.2. \nThe flow-from property"}],"url":"https://drafts.csswg.org/css-values-4/#typedef-ident"},
"9522389e": {"dfnID":"9522389e","dfnText":"break-inside","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-break-inside"}],"title":"3.3. \nControlling Region Flow Breaks"}],"url":"https://drafts.csswg.org/css-break-3/#propdef-break-inside"},
"96c16e60": {"dfnID":"96c16e60","dfnText":"Node","external":true,"refSections":[{"refs":[{"id":"ref-for-node"},{"id":"ref-for-node\u2460"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"https://dom.spec.whatwg.org/#node"},
"991145b0": {"dfnID":"991145b0","dfnText":"none","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-content-none"},{"id":"ref-for-valdef-content-none\u2460"}],"title":"3.2. \nThe flow-from property"}],"url":"https://drafts.csswg.org/css-content-3/#valdef-content-none"},
"9b54ada7": {"dfnID":"9b54ada7","dfnText":"style containment","external":true,"refSections":[{"refs":[{"id":"ref-for-style-containment"}],"title":"3.1. \nThe flow-into property"},{"refs":[{"id":"ref-for-style-containment\u2460"}],"title":"3.2. \nThe flow-from property"}],"url":"https://drafts.csswg.org/css-contain-2/#style-containment"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"},{"id":"ref-for-idl-sequence\u2460"},{"id":"ref-for-idl-sequence\u2461"}],"title":"4.1. \nThe NamedFlow interface"},{"refs":[{"id":"ref-for-idl-sequence\u2462"}],"title":"4.2. \nThe Region mixin"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"a5010638": {"dfnID":"a5010638","dfnText":"width","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-anchor-size-width"}],"title":"7. \nRegions visual formatting details"}],"url":"https://drafts.csswg.org/css-anchor-position-1/#valdef-anchor-size-width"},
"a6126efb": {"dfnID":"a6126efb","dfnText":"avoid","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-break-before-avoid"}],"title":"3.3. \nControlling Region Flow Breaks"}],"url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-avoid"},
"c1654d36": {"dfnID":"c1654d36","dfnText":"break-before","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-break-before"}],"title":"3.3. \nControlling Region Flow Breaks"}],"url":"https://drafts.csswg.org/css-break-3/#propdef-break-before"},
"c17ce735": {"dfnID":"c17ce735","dfnText":"height","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-anchor-size-height"}],"title":"7. \nRegions visual formatting details"}],"url":"https://drafts.csswg.org/css-anchor-position-1/#valdef-anchor-size-height"},
"content": {"dfnID":"content","dfnText":"content","external":false,"refSections":[],"url":"#content"},
"css-region": {"dfnID":"css-region","dfnText":"CSS Region","external":false,"refSections":[{"refs":[{"id":"ref-for-css-region"},{"id":"ref-for-css-region\u2460"},{"id":"ref-for-css-region\u2461"},{"id":"ref-for-css-region\u2462"}],"title":"1. \nIntroduction"},{"refs":[{"id":"ref-for-css-region\u2463"},{"id":"ref-for-css-region\u2464"}],"title":"2.2. \nRegion chain"},{"refs":[{"id":"ref-for-css-region\u2465"}],"title":"2.3. \nLast region"},{"refs":[{"id":"ref-for-css-region\u2466"}],"title":"2.4. \nNamed flows"},{"refs":[{"id":"ref-for-css-region\u2467"},{"id":"ref-for-css-region\u2468"}],"title":"2.5. \nRegions flow breaking rules"},{"refs":[{"id":"ref-for-css-region\u2460\u24ea"},{"id":"ref-for-css-region\u2460\u2460"},{"id":"ref-for-css-region\u2460\u2461"}],"title":"3.1. \nThe flow-into property"},{"refs":[{"id":"ref-for-css-region\u2460\u2462"},{"id":"ref-for-css-region\u2460\u2463"},{"id":"ref-for-css-region\u2460\u2464"},{"id":"ref-for-css-region\u2460\u2465"},{"id":"ref-for-css-region\u2460\u2466"},{"id":"ref-for-css-region\u2460\u2467"},{"id":"ref-for-css-region\u2460\u2468"},{"id":"ref-for-css-region\u2461\u24ea"},{"id":"ref-for-css-region\u2461\u2460"},{"id":"ref-for-css-region\u2461\u2461"},{"id":"ref-for-css-region\u2461\u2462"},{"id":"ref-for-css-region\u2461\u2463"},{"id":"ref-for-css-region\u2461\u2464"}],"title":"3.2. \nThe flow-from property"},{"refs":[{"id":"ref-for-css-region\u2461\u2465"},{"id":"ref-for-css-region\u2461\u2466"},{"id":"ref-for-css-region\u2461\u2467"},{"id":"ref-for-css-region\u2461\u2468"},{"id":"ref-for-css-region\u2462\u24ea"}],"title":"3.2.1. \nCycle Detection"},{"refs":[{"id":"ref-for-css-region\u2462\u2460"},{"id":"ref-for-css-region\u2462\u2461"},{"id":"ref-for-css-region\u2462\u2462"},{"id":"ref-for-css-region\u2462\u2463"}],"title":"3.2.2. \nNested fragmentation contexts"},{"refs":[{"id":"ref-for-css-region\u2462\u2464"},{"id":"ref-for-css-region\u2462\u2465"},{"id":"ref-for-css-region\u2462\u2466"},{"id":"ref-for-css-region\u2462\u2467"}],"title":"3.4. \nThe region-fragment property"},{"refs":[{"id":"ref-for-css-region\u2462\u2468"}],"title":"4.1. \nThe NamedFlow interface"},{"refs":[{"id":"ref-for-css-region\u2463\u24ea"}],"title":"4.2. \nThe Region mixin"},{"refs":[{"id":"ref-for-css-region\u2463\u2460"}],"title":"5. \nMulti-column regions"},{"refs":[{"id":"ref-for-css-region\u2463\u2461"}],"title":"6. \nPseudo-elements"},{"refs":[{"id":"ref-for-css-region\u2463\u2462"},{"id":"ref-for-css-region\u2463\u2463"}],"title":"8. \nRelation to document events"},{"refs":[{"id":"ref-for-css-region\u2463\u2464"}],"title":"9. \nRelation to other specifications"}],"url":"#css-region"},
"d1d73cbf": {"dfnID":"d1d73cbf","dfnText":"scoped","external":true,"refSections":[{"refs":[{"id":"ref-for-property-scoped"}],"title":"3.1. \nThe flow-into property"},{"refs":[{"id":"ref-for-property-scoped\u2460"}],"title":"3.2. \nThe flow-from property"}],"url":"https://drafts.csswg.org/css-contain-2/#property-scoped"},
"d2bd0bce": {"dfnID":"d2bd0bce","dfnText":"Range","external":true,"refSections":[{"refs":[{"id":"ref-for-range"},{"id":"ref-for-range\u2460"},{"id":"ref-for-range\u2461"}],"title":"4.2. \nThe Region mixin"}],"url":"https://dom.spec.whatwg.org/#range"},
"d3914900": {"dfnID":"d3914900","dfnText":"region","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-break-before-region"}],"title":"3.3. \nControlling Region Flow Breaks"}],"url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-region"},
"d4d68fad": {"dfnID":"d4d68fad","dfnText":"normal","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-content-normal"}],"title":"3.2. \nThe flow-from property"}],"url":"https://drafts.csswg.org/css-content-3/#valdef-content-normal"},
"document-namedflows": {"dfnID":"document-namedflows","dfnText":"namedFlows","external":false,"refSections":[],"url":"#document-namedflows"},
"dom-document-namedflows": {"dfnID":"dom-document-namedflows","dfnText":"namedFlows","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-document-namedflows"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"#dom-document-namedflows"},
"dom-namedflow-firstemptyregionindex": {"dfnID":"dom-namedflow-firstemptyregionindex","dfnText":"firstEmptyRegionIndex","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-namedflow-firstemptyregionindex"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"#dom-namedflow-firstemptyregionindex"},
"dom-namedflow-getcontent": {"dfnID":"dom-namedflow-getcontent","dfnText":"getContent()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-namedflow-getcontent"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"#dom-namedflow-getcontent"},
"dom-namedflow-getregions": {"dfnID":"dom-namedflow-getregions","dfnText":"getRegions()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-namedflow-getregions"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"#dom-namedflow-getregions"},
"dom-namedflow-getregionsbycontent": {"dfnID":"dom-namedflow-getregionsbycontent","dfnText":"getRegionsByContent","external":false,"refSections":[],"url":"#dom-namedflow-getregionsbycontent"},
"dom-namedflow-getregionsbycontent-node-node": {"dfnID":"dom-namedflow-getregionsbycontent-node-node","dfnText":"node","external":false,"refSections":[],"url":"#dom-namedflow-getregionsbycontent-node-node"},
"dom-namedflow-getregionsbycontent①": {"dfnID":"dom-namedflow-getregionsbycontent\u2460","dfnText":"getRegionsByContent()","external":false,"refSections":[],"url":"#dom-namedflow-getregionsbycontent\u2460"},
"dom-namedflow-name": {"dfnID":"dom-namedflow-name","dfnText":"name","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-namedflow-name"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"#dom-namedflow-name"},
"dom-namedflow-overset": {"dfnID":"dom-namedflow-overset","dfnText":"overset","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-namedflow-overset"},{"id":"ref-for-dom-namedflow-overset\u2460"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"#dom-namedflow-overset"},
"dom-namedflowmap-delete": {"dfnID":"dom-namedflowmap-delete","dfnText":"delete()","external":false,"refSections":[],"url":"#dom-namedflowmap-delete"},
"dom-namedflowmap-get": {"dfnID":"dom-namedflowmap-get","dfnText":"get()","external":false,"refSections":[],"url":"#dom-namedflowmap-get"},
"dom-namedflowmap-has": {"dfnID":"dom-namedflowmap-has","dfnText":"has()","external":false,"refSections":[],"url":"#dom-namedflowmap-has"},
"dom-namedflowmap-set": {"dfnID":"dom-namedflowmap-set","dfnText":"set()","external":false,"refSections":[],"url":"#dom-namedflowmap-set"},
"dom-region-getregionflowranges": {"dfnID":"dom-region-getregionflowranges","dfnText":"getRegionFlowRanges()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-region-getregionflowranges"}],"title":"4.2. \nThe Region mixin"}],"url":"#dom-region-getregionflowranges"},
"dom-region-regionoverset": {"dfnID":"dom-region-regionoverset","dfnText":"regionOverset","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-region-regionoverset"},{"id":"ref-for-dom-region-regionoverset\u2460"}],"title":"4.2. \nThe Region mixin"}],"url":"#dom-region-regionoverset"},
"e7f0dd6c": {"dfnID":"e7f0dd6c","dfnText":"display","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-display"}],"title":"3.2. \nThe flow-from property"}],"url":"https://drafts.csswg.org/css-display-4/#propdef-display"},
"element": {"dfnID":"element","dfnText":"element","external":false,"refSections":[],"url":"#element"},
"f80bfcde": {"dfnID":"f80bfcde","dfnText":"max-height","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-max-height"}],"title":"7.3.1.2. \nRFCB flow fragment height resolution, Phase 2"},{"refs":[{"id":"ref-for-propdef-max-height\u2460"}],"title":"7.5.2. \nStep 1 - Phase 2: Layout flow to compute the RFCBs' flow fragments heights"},{"refs":[{"id":"ref-for-propdef-max-height\u2461"}],"title":"7.5.3. \nStep 2: Layout document and regions without named flows"}],"url":"https://www.w3.org/TR/CSS21/visudet.html#propdef-max-height"},
"flow-fragment-height": {"dfnID":"flow-fragment-height","dfnText":"flow fragment height","external":false,"refSections":[],"url":"#flow-fragment-height"},
"last-usable-region": {"dfnID":"last-usable-region","dfnText":"last usable region","external":false,"refSections":[{"refs":[{"id":"ref-for-last-usable-region"}],"title":"2.5. \nRegions flow breaking rules"},{"refs":[{"id":"ref-for-last-usable-region\u2460"},{"id":"ref-for-last-usable-region\u2461"},{"id":"ref-for-last-usable-region\u2462"}],"title":"3.4. \nThe region-fragment property"},{"refs":[{"id":"ref-for-last-usable-region\u2463"}],"title":"4.1. \nThe NamedFlow interface"},{"refs":[{"id":"ref-for-last-usable-region\u2464"},{"id":"ref-for-last-usable-region\u2465"},{"id":"ref-for-last-usable-region\u2466"},{"id":"ref-for-last-usable-region\u2467"},{"id":"ref-for-last-usable-region\u2468"}],"title":"4.2. \nThe Region mixin"},{"refs":[{"id":"ref-for-last-usable-region\u2460\u24ea"}],"title":"5. \nMulti-column regions"}],"url":"#last-usable-region"},
"named-flow": {"dfnID":"named-flow","dfnText":"named flow","external":false,"refSections":[{"refs":[{"id":"ref-for-named-flow"},{"id":"ref-for-named-flow\u2460"},{"id":"ref-for-named-flow\u2461"},{"id":"ref-for-named-flow\u2462"},{"id":"ref-for-named-flow\u2463"},{"id":"ref-for-named-flow\u2464"}],"title":"1. \nIntroduction"},{"refs":[{"id":"ref-for-named-flow\u2465"}],"title":"2.1. \nRegions"},{"refs":[{"id":"ref-for-named-flow\u2466"},{"id":"ref-for-named-flow\u2467"}],"title":"2.2. \nRegion chain"},{"refs":[{"id":"ref-for-named-flow\u2468"},{"id":"ref-for-named-flow\u2460\u24ea"},{"id":"ref-for-named-flow\u2460\u2460"},{"id":"ref-for-named-flow\u2460\u2461"},{"id":"ref-for-named-flow\u2460\u2462"},{"id":"ref-for-named-flow\u2460\u2463"}],"title":"2.4. \nNamed flows"},{"refs":[{"id":"ref-for-named-flow\u2460\u2464"},{"id":"ref-for-named-flow\u2460\u2465"},{"id":"ref-for-named-flow\u2460\u2466"},{"id":"ref-for-named-flow\u2460\u2467"}],"title":"2.5. \nRegions flow breaking rules"},{"refs":[{"id":"ref-for-named-flow\u2460\u2468"},{"id":"ref-for-named-flow\u2461\u24ea"},{"id":"ref-for-named-flow\u2461\u2460"},{"id":"ref-for-named-flow\u2461\u2461"},{"id":"ref-for-named-flow\u2461\u2462"},{"id":"ref-for-named-flow\u2461\u2463"},{"id":"ref-for-named-flow\u2461\u2464"},{"id":"ref-for-named-flow\u2461\u2465"},{"id":"ref-for-named-flow\u2461\u2466"},{"id":"ref-for-named-flow\u2461\u2467"},{"id":"ref-for-named-flow\u2461\u2468"},{"id":"ref-for-named-flow\u2462\u24ea"},{"id":"ref-for-named-flow\u2462\u2460"},{"id":"ref-for-named-flow\u2462\u2461"},{"id":"ref-for-named-flow\u2462\u2462"},{"id":"ref-for-named-flow\u2462\u2463"}],"title":"3.1. \nThe flow-into property"},{"refs":[{"id":"ref-for-named-flow\u2462\u2464"},{"id":"ref-for-named-flow\u2462\u2465"},{"id":"ref-for-named-flow\u2462\u2466"}],"title":"3.2. \nThe flow-from property"},{"refs":[{"id":"ref-for-named-flow\u2462\u2467"},{"id":"ref-for-named-flow\u2462\u2468"},{"id":"ref-for-named-flow\u2463\u24ea"},{"id":"ref-for-named-flow\u2463\u2460"},{"id":"ref-for-named-flow\u2463\u2461"},{"id":"ref-for-named-flow\u2463\u2462"},{"id":"ref-for-named-flow\u2463\u2463"},{"id":"ref-for-named-flow\u2463\u2464"},{"id":"ref-for-named-flow\u2463\u2465"},{"id":"ref-for-named-flow\u2463\u2466"}],"title":"3.2.1. \nCycle Detection"},{"refs":[{"id":"ref-for-named-flow\u2463\u2467"}],"title":"3.2.2. \nNested fragmentation contexts"},{"refs":[{"id":"ref-for-named-flow\u2463\u2468"}],"title":"3.4. \nThe region-fragment property"},{"refs":[{"id":"ref-for-named-flow\u2464\u24ea"},{"id":"ref-for-named-flow\u2464\u2460"},{"id":"ref-for-named-flow\u2464\u2461"},{"id":"ref-for-named-flow\u2464\u2462"},{"id":"ref-for-named-flow\u2464\u2463"},{"id":"ref-for-named-flow\u2464\u2464"},{"id":"ref-for-named-flow\u2464\u2465"},{"id":"ref-for-named-flow\u2464\u2466"},{"id":"ref-for-named-flow\u2464\u2467"},{"id":"ref-for-named-flow\u2464\u2468"},{"id":"ref-for-named-flow\u2465\u24ea"},{"id":"ref-for-named-flow\u2465\u2460"},{"id":"ref-for-named-flow\u2465\u2461"},{"id":"ref-for-named-flow\u2465\u2462"},{"id":"ref-for-named-flow\u2465\u2463"},{"id":"ref-for-named-flow\u2465\u2464"},{"id":"ref-for-named-flow\u2465\u2465"},{"id":"ref-for-named-flow\u2465\u2466"},{"id":"ref-for-named-flow\u2465\u2467"},{"id":"ref-for-named-flow\u2465\u2468"}],"title":"4.1. \nThe NamedFlow interface"},{"refs":[{"id":"ref-for-named-flow\u2466\u24ea"},{"id":"ref-for-named-flow\u2466\u2460"},{"id":"ref-for-named-flow\u2466\u2461"},{"id":"ref-for-named-flow\u2466\u2462"},{"id":"ref-for-named-flow\u2466\u2463"},{"id":"ref-for-named-flow\u2466\u2464"},{"id":"ref-for-named-flow\u2466\u2465"},{"id":"ref-for-named-flow\u2466\u2466"}],"title":"4.2. \nThe Region mixin"},{"refs":[{"id":"ref-for-named-flow\u2466\u2467"},{"id":"ref-for-named-flow\u2466\u2468"}],"title":"4.4.2. \noffsetTop, offsetLeft,\noffsetWidth, offsetHeight and offsetParent"},{"refs":[{"id":"ref-for-named-flow\u2467\u24ea"},{"id":"ref-for-named-flow\u2467\u2460"}],"title":"5. \nMulti-column regions"},{"refs":[{"id":"ref-for-named-flow\u2467\u2461"},{"id":"ref-for-named-flow\u2467\u2462"}],"title":"7. \nRegions visual formatting details"},{"refs":[{"id":"ref-for-named-flow\u2467\u2463"}],"title":"7.2. \nThe Region Flow Content Box (RFCB)"},{"refs":[{"id":"ref-for-named-flow\u2467\u2464"},{"id":"ref-for-named-flow\u2467\u2465"}],"title":"7.2.1. \nRFCB width resolution"},{"refs":[{"id":"ref-for-named-flow\u2467\u2466"},{"id":"ref-for-named-flow\u2467\u2467"},{"id":"ref-for-named-flow\u2467\u2468"},{"id":"ref-for-named-flow\u2468\u24ea"}],"title":"7.3. \nRegions visual formatting steps"},{"refs":[{"id":"ref-for-named-flow\u2468\u2460"}],"title":"7.3.1.1. \nRFCB flow fragment height resolution, Phase 1"},{"refs":[{"id":"ref-for-named-flow\u2468\u2461"},{"id":"ref-for-named-flow\u2468\u2462"},{"id":"ref-for-named-flow\u2468\u2463"}],"title":"7.3.1.2. \nRFCB flow fragment height resolution, Phase 2"},{"refs":[{"id":"ref-for-named-flow\u2468\u2464"}],"title":"7.3.2. \nStep 2: region boxes layout"},{"refs":[{"id":"ref-for-named-flow\u2468\u2465"},{"id":"ref-for-named-flow\u2468\u2466"},{"id":"ref-for-named-flow\u2468\u2467"},{"id":"ref-for-named-flow\u2468\u2468"}],"title":"7.3.3. \nStep 3: named flows layout"},{"refs":[{"id":"ref-for-named-flow\u2460\u24ea\u24ea"}],"title":"7.4. \nRegions visual formatting: implementation note"},{"refs":[{"id":"ref-for-named-flow\u2460\u24ea\u2460"}],"title":"7.5.3. \nStep 2: Layout document and regions without named flows"},{"refs":[{"id":"ref-for-named-flow\u2460\u24ea\u2461"},{"id":"ref-for-named-flow\u2460\u24ea\u2462"}],"title":"7.5.4. \nStep 3: named flows layout"},{"refs":[{"id":"ref-for-named-flow\u2460\u24ea\u2463"}],"title":"8. \nRelation to document events"}],"url":"#named-flow"},
"namedflow": {"dfnID":"namedflow","dfnText":"NamedFlow","external":false,"refSections":[{"refs":[{"id":"ref-for-namedflow"},{"id":"ref-for-namedflow\u2460"},{"id":"ref-for-namedflow\u2461"},{"id":"ref-for-namedflow\u2462"},{"id":"ref-for-namedflow\u2463"},{"id":"ref-for-namedflow\u2464"},{"id":"ref-for-namedflow\u2465"},{"id":"ref-for-namedflow\u2466"},{"id":"ref-for-namedflow\u2467"}],"title":"4.1. \nThe NamedFlow interface"},{"refs":[{"id":"ref-for-namedflow\u2468"},{"id":"ref-for-namedflow\u2460\u24ea"},{"id":"ref-for-namedflow\u2460\u2460"},{"id":"ref-for-namedflow\u2460\u2461"},{"id":"ref-for-namedflow\u2460\u2462"}],"title":"4.3. \nNamed flow events"}],"url":"#namedflow"},
"namedflowmap": {"dfnID":"namedflowmap","dfnText":"NamedFlowMap","external":false,"refSections":[{"refs":[{"id":"ref-for-namedflowmap"},{"id":"ref-for-namedflowmap\u2460"},{"id":"ref-for-namedflowmap\u2461"},{"id":"ref-for-namedflowmap\u2462"},{"id":"ref-for-namedflowmap\u2463"}],"title":"4.1. \nThe NamedFlow interface"}],"url":"#namedflowmap"},
"nested-region-context": {"dfnID":"nested-region-context","dfnText":"nested region context","external":false,"refSections":[{"refs":[{"id":"ref-for-nested-region-context"}],"title":"7.3.1.2. \nRFCB flow fragment height resolution, Phase 2"},{"refs":[{"id":"ref-for-nested-region-context\u2460"}],"title":"7.3.3. \nStep 3: named flows layout"}],"url":"#nested-region-context"},
"propdef-flow-from": {"dfnID":"propdef-flow-from","dfnText":"flow-from","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-flow-from"}],"title":"1. \nIntroduction"},{"refs":[{"id":"ref-for-propdef-flow-from\u2460"}],"title":"2.1. \nRegions"},{"refs":[{"id":"ref-for-propdef-flow-from\u2461"}],"title":"2.4. \nNamed flows"},{"refs":[{"id":"ref-for-propdef-flow-from\u2462"},{"id":"ref-for-propdef-flow-from\u2463"},{"id":"ref-for-propdef-flow-from\u2464"},{"id":"ref-for-propdef-flow-from\u2465"},{"id":"ref-for-propdef-flow-from\u2466"}],"title":"3.2. \nThe flow-from property"},{"refs":[{"id":"ref-for-propdef-flow-from\u2467"},{"id":"ref-for-propdef-flow-from\u2468"},{"id":"ref-for-propdef-flow-from\u2460\u24ea"},{"id":"ref-for-propdef-flow-from\u2460\u2460"}],"title":"3.2.1. \nCycle Detection"},{"refs":[{"id":"ref-for-propdef-flow-from\u2460\u2461"}],"title":"4.2. \nThe Region mixin"}],"url":"#propdef-flow-from"},
"propdef-flow-into": {"dfnID":"propdef-flow-into","dfnText":"flow-into","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-flow-into"}],"title":"2.4. \nNamed flows"},{"refs":[{"id":"ref-for-propdef-flow-into\u2460"},{"id":"ref-for-propdef-flow-into\u2461"},{"id":"ref-for-propdef-flow-into\u2462"},{"id":"ref-for-propdef-flow-into\u2463"},{"id":"ref-for-propdef-flow-into\u2464"},{"id":"ref-for-propdef-flow-into\u2465"},{"id":"ref-for-propdef-flow-into\u2466"},{"id":"ref-for-propdef-flow-into\u2467"},{"id":"ref-for-propdef-flow-into\u2468"}],"title":"3.1. \nThe flow-into property"}],"url":"#propdef-flow-into"},
"propdef-region-fragment": {"dfnID":"propdef-region-fragment","dfnText":"region-fragment","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-region-fragment"}],"title":"2.5. \nRegions flow breaking rules"},{"refs":[{"id":"ref-for-propdef-region-fragment\u2460"},{"id":"ref-for-propdef-region-fragment\u2461"},{"id":"ref-for-propdef-region-fragment\u2462"}],"title":"3.4. \nThe region-fragment property"},{"refs":[{"id":"ref-for-propdef-region-fragment\u2463"}],"title":"4.2. \nThe Region mixin"}],"url":"#propdef-region-fragment"},
"region": {"dfnID":"region","dfnText":"Region","external":false,"refSections":[{"refs":[{"id":"ref-for-region"},{"id":"ref-for-region\u2460"}],"title":"4.1. \nThe NamedFlow interface"},{"refs":[{"id":"ref-for-region\u2461"},{"id":"ref-for-region\u2462"},{"id":"ref-for-region\u2463"},{"id":"ref-for-region\u2464"},{"id":"ref-for-region\u2465"}],"title":"4.2. \nThe Region mixin"}],"url":"#region"},
"region-chain": {"dfnID":"region-chain","dfnText":"region chain","external":false,"refSections":[{"refs":[{"id":"ref-for-region-chain"},{"id":"ref-for-region-chain\u2460"},{"id":"ref-for-region-chain\u2461"},{"id":"ref-for-region-chain\u2462"},{"id":"ref-for-region-chain\u2463"}],"title":"1. \nIntroduction"},{"refs":[{"id":"ref-for-region-chain\u2464"},{"id":"ref-for-region-chain\u2465"}],"title":"2.2. \nRegion chain"},{"refs":[{"id":"ref-for-region-chain\u2466"}],"title":"2.3. \nLast region"},{"refs":[{"id":"ref-for-region-chain\u2467"}],"title":"2.4. \nNamed flows"},{"refs":[{"id":"ref-for-region-chain\u2468"},{"id":"ref-for-region-chain\u2460\u24ea"},{"id":"ref-for-region-chain\u2460\u2460"},{"id":"ref-for-region-chain\u2460\u2461"}],"title":"2.5. \nRegions flow breaking rules"},{"refs":[{"id":"ref-for-region-chain\u2460\u2462"},{"id":"ref-for-region-chain\u2460\u2463"},{"id":"ref-for-region-chain\u2460\u2464"},{"id":"ref-for-region-chain\u2460\u2465"},{"id":"ref-for-region-chain\u2460\u2466"},{"id":"ref-for-region-chain\u2460\u2467"}],"title":"3.1. \nThe flow-into property"},{"refs":[{"id":"ref-for-region-chain\u2460\u2468"},{"id":"ref-for-region-chain\u2461\u24ea"},{"id":"ref-for-region-chain\u2461\u2460"},{"id":"ref-for-region-chain\u2461\u2461"},{"id":"ref-for-region-chain\u2461\u2462"}],"title":"3.2. \nThe flow-from property"},{"refs":[{"id":"ref-for-region-chain\u2461\u2463"},{"id":"ref-for-region-chain\u2461\u2464"}],"title":"3.2.1. \nCycle Detection"},{"refs":[{"id":"ref-for-region-chain\u2461\u2465"}],"title":"3.2.2. \nNested fragmentation contexts"},{"refs":[{"id":"ref-for-region-chain\u2461\u2466"},{"id":"ref-for-region-chain\u2461\u2467"},{"id":"ref-for-region-chain\u2461\u2468"},{"id":"ref-for-region-chain\u2462\u24ea"},{"id":"ref-for-region-chain\u2462\u2460"},{"id":"ref-for-region-chain\u2462\u2461"},{"id":"ref-for-region-chain\u2462\u2462"}],"title":"4.1. \nThe NamedFlow interface"},{"refs":[{"id":"ref-for-region-chain\u2462\u2463"},{"id":"ref-for-region-chain\u2462\u2464"},{"id":"ref-for-region-chain\u2462\u2465"},{"id":"ref-for-region-chain\u2462\u2466"},{"id":"ref-for-region-chain\u2462\u2467"},{"id":"ref-for-region-chain\u2462\u2468"},{"id":"ref-for-region-chain\u2463\u24ea"}],"title":"4.2. \nThe Region mixin"},{"refs":[{"id":"ref-for-region-chain\u2463\u2460"},{"id":"ref-for-region-chain\u2463\u2461"},{"id":"ref-for-region-chain\u2463\u2462"}],"title":"4.3. \nNamed flow events"},{"refs":[{"id":"ref-for-region-chain\u2463\u2463"}],"title":"4.4.1. \ngetClientRects() and getBoundingClientRect()"},{"refs":[{"id":"ref-for-region-chain\u2463\u2464"},{"id":"ref-for-region-chain\u2463\u2465"},{"id":"ref-for-region-chain\u2463\u2466"},{"id":"ref-for-region-chain\u2463\u2467"}],"title":"5. \nMulti-column regions"},{"refs":[{"id":"ref-for-region-chain\u2463\u2468"},{"id":"ref-for-region-chain\u2464\u24ea"}],"title":"6. \nPseudo-elements"},{"refs":[{"id":"ref-for-region-chain\u2464\u2460"}],"title":"7.3. \nRegions visual formatting steps"},{"refs":[{"id":"ref-for-region-chain\u2464\u2461"}],"title":"7.3.3. \nStep 3: named flows layout"},{"refs":[{"id":"ref-for-region-chain\u2464\u2462"}],"title":"7.5.4. \nStep 3: named flows layout"}],"url":"#region-chain"},
"region-flow-content-box": {"dfnID":"region-flow-content-box","dfnText":"region flow content box","external":false,"refSections":[],"url":"#region-flow-content-box"},
"rfcb": {"dfnID":"rfcb","dfnText":"RFCB","external":false,"refSections":[],"url":"#rfcb"},
"specified-flow": {"dfnID":"specified-flow","dfnText":"specified flow","external":false,"refSections":[],"url":"#specified-flow"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#css-region": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"css region","type":"dfn","url":"#css-region"},
"#dom-document-namedflows": {"export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"namedFlows","type":"attribute","url":"#dom-document-namedflows"},
"#dom-namedflow-firstemptyregionindex": {"export":true,"for_":["NamedFlow"],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"firstEmptyRegionIndex","type":"attribute","url":"#dom-namedflow-firstemptyregionindex"},
"#dom-namedflow-getcontent": {"export":true,"for_":["NamedFlow"],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"getContent()","type":"method","url":"#dom-namedflow-getcontent"},
"#dom-namedflow-getregions": {"export":true,"for_":["NamedFlow"],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"getRegions()","type":"method","url":"#dom-namedflow-getregions"},
"#dom-namedflow-name": {"export":true,"for_":["NamedFlow"],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"name","type":"attribute","url":"#dom-namedflow-name"},
"#dom-namedflow-overset": {"export":true,"for_":["NamedFlow"],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"overset","type":"attribute","url":"#dom-namedflow-overset"},
"#dom-region-getregionflowranges": {"export":true,"for_":["Region"],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"getRegionFlowRanges()","type":"method","url":"#dom-region-getregionflowranges"},
"#dom-region-regionoverset": {"export":true,"for_":["Region"],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"regionOverset","type":"attribute","url":"#dom-region-regionoverset"},
"#last-usable-region": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"last usable css region","type":"dfn","url":"#last-usable-region"},
"#named-flow": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"named flow","type":"dfn","url":"#named-flow"},
"#namedflow": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"NamedFlow","type":"interface","url":"#namedflow"},
"#namedflowmap": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"NamedFlowMap","type":"interface","url":"#namedflowmap"},
"#nested-region-context": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"nested region context","type":"dfn","url":"#nested-region-context"},
"#propdef-flow-from": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"flow-from","type":"property","url":"#propdef-flow-from"},
"#propdef-flow-into": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"flow-into","type":"property","url":"#propdef-flow-into"},
"#propdef-region-fragment": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"region-fragment","type":"property","url":"#propdef-region-fragment"},
"#region": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"Region","type":"interface","url":"#region"},
"#region-chain": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-regions","spec":"css-regions-1","status":"local","text":"region chain","type":"dfn","url":"#region-chain"},
"https://dom.spec.whatwg.org/#document": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#element": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://dom.spec.whatwg.org/#eventtarget": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"EventTarget","type":"interface","url":"https://dom.spec.whatwg.org/#eventtarget"},
"https://dom.spec.whatwg.org/#node": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Node","type":"interface","url":"https://dom.spec.whatwg.org/#node"},
"https://dom.spec.whatwg.org/#range": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Range","type":"interface","url":"https://dom.spec.whatwg.org/#range"},
"https://drafts.csswg.org/css-anchor-position-1/#valdef-anchor-size-height": {"export":true,"for_":["anchor-size()"],"level":"1","normative":true,"shortname":"css-anchor-position","spec":"css-anchor-position-1","status":"current","text":"height","type":"value","url":"https://drafts.csswg.org/css-anchor-position-1/#valdef-anchor-size-height"},
"https://drafts.csswg.org/css-anchor-position-1/#valdef-anchor-size-width": {"export":true,"for_":["anchor-size()"],"level":"1","normative":true,"shortname":"css-anchor-position","spec":"css-anchor-position-1","status":"current","text":"width","type":"value","url":"https://drafts.csswg.org/css-anchor-position-1/#valdef-anchor-size-width"},
"https://drafts.csswg.org/css-box-4/#content-box": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-box","spec":"css-box-4","status":"current","text":"content box","type":"dfn","url":"https://drafts.csswg.org/css-box-4/#content-box"},
"https://drafts.csswg.org/css-break-3/#propdef-break-after": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-break","spec":"css-break-3","status":"current","text":"break-after","type":"property","url":"https://drafts.csswg.org/css-break-3/#propdef-break-after"},
"https://drafts.csswg.org/css-break-3/#propdef-break-before": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-break","spec":"css-break-3","status":"current","text":"break-before","type":"property","url":"https://drafts.csswg.org/css-break-3/#propdef-break-before"},
"https://drafts.csswg.org/css-break-3/#propdef-break-inside": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-break","spec":"css-break-3","status":"current","text":"break-inside","type":"property","url":"https://drafts.csswg.org/css-break-3/#propdef-break-inside"},
"https://drafts.csswg.org/css-break-4/#valdef-break-before-always": {"export":true,"for_":["break-before","break-after"],"level":"4","normative":true,"shortname":"css-break","spec":"css-break-4","status":"current","text":"always","type":"value","url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-always"},
"https://drafts.csswg.org/css-break-4/#valdef-break-before-auto": {"export":true,"for_":["break-before","break-after"],"level":"4","normative":true,"shortname":"css-break","spec":"css-break-4","status":"current","text":"auto","type":"value","url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-auto"},
"https://drafts.csswg.org/css-break-4/#valdef-break-before-avoid": {"export":true,"for_":["break-before","break-after"],"level":"4","normative":true,"shortname":"css-break","spec":"css-break-4","status":"current","text":"avoid","type":"value","url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-avoid"},
"https://drafts.csswg.org/css-break-4/#valdef-break-before-avoid-region": {"export":true,"for_":["break-before","break-after"],"level":"4","normative":true,"shortname":"css-break","spec":"css-break-4","status":"current","text":"avoid-region","type":"value","url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-avoid-region"},
"https://drafts.csswg.org/css-break-4/#valdef-break-before-region": {"export":true,"for_":["break-before","break-after"],"level":"4","normative":true,"shortname":"css-break","spec":"css-break-4","status":"current","text":"region","type":"value","url":"https://drafts.csswg.org/css-break-4/#valdef-break-before-region"},
"https://drafts.csswg.org/css-contain-2/#layout-containment": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"css-contain","spec":"css-contain-2","status":"current","text":"layout containment","type":"dfn","url":"https://drafts.csswg.org/css-contain-2/#layout-containment"},
"https://drafts.csswg.org/css-contain-2/#property-scoped": {"export":true,"for_":["property"],"level":"2","normative":true,"shortname":"css-contain","spec":"css-contain-2","status":"current","text":"scoped","type":"dfn","url":"https://drafts.csswg.org/css-contain-2/#property-scoped"},
"https://drafts.csswg.org/css-contain-2/#style-containment": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"css-contain","spec":"css-contain-2","status":"current","text":"style containment","type":"dfn","url":"https://drafts.csswg.org/css-contain-2/#style-containment"},
"https://drafts.csswg.org/css-content-3/#propdef-content": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-content","spec":"css-content-3","status":"current","text":"content","type":"property","url":"https://drafts.csswg.org/css-content-3/#propdef-content"},
"https://drafts.csswg.org/css-content-3/#valdef-content-none": {"export":true,"for_":["content"],"level":"3","normative":true,"shortname":"css-content","spec":"css-content-3","status":"current","text":"none","type":"value","url":"https://drafts.csswg.org/css-content-3/#valdef-content-none"},
"https://drafts.csswg.org/css-content-3/#valdef-content-normal": {"export":true,"for_":["content"],"level":"3","normative":true,"shortname":"css-content","spec":"css-content-3","status":"current","text":"normal","type":"value","url":"https://drafts.csswg.org/css-content-3/#valdef-content-normal"},
"https://drafts.csswg.org/css-display-4/#propdef-display": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"display","type":"property","url":"https://drafts.csswg.org/css-display-4/#propdef-display"},
"https://drafts.csswg.org/css-display-4/#valdef-display-none": {"export":true,"for_":["display","<display-box>"],"level":"4","normative":true,"shortname":"css-display","spec":"css-display-4","status":"current","text":"none","type":"value","url":"https://drafts.csswg.org/css-display-4/#valdef-display-none"},
"https://drafts.csswg.org/css-multicol-1/#propdef-column-fill": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-multicol","spec":"css-multicol-1","status":"current","text":"column-fill","type":"property","url":"https://drafts.csswg.org/css-multicol-1/#propdef-column-fill"},
"https://drafts.csswg.org/css-overflow-3/#propdef-overflow": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-overflow","spec":"css-overflow-3","status":"current","text":"overflow","type":"property","url":"https://drafts.csswg.org/css-overflow-3/#propdef-overflow"},
"https://drafts.csswg.org/css-overflow-4/#propdef-continue": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-overflow","spec":"css-overflow-4","status":"current","text":"continue","type":"property","url":"https://drafts.csswg.org/css-overflow-4/#propdef-continue"},
"https://drafts.csswg.org/css-sizing-3/#propdef-height": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-sizing","spec":"css-sizing-3","status":"current","text":"height","type":"property","url":"https://drafts.csswg.org/css-sizing-3/#propdef-height"},
"https://drafts.csswg.org/css-sizing-3/#propdef-width": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-sizing","spec":"css-sizing-3","status":"current","text":"width","type":"property","url":"https://drafts.csswg.org/css-sizing-3/#propdef-width"},
"https://drafts.csswg.org/css-sizing-3/#valdef-width-auto": {"export":true,"for_":["width","height","min-width","min-height"],"level":"3","normative":true,"shortname":"css-sizing","spec":"css-sizing-3","status":"current","text":"auto","type":"value","url":"https://drafts.csswg.org/css-sizing-3/#valdef-width-auto"},
"https://drafts.csswg.org/css-values-4/#comb-one": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"|","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"https://drafts.csswg.org/css-values-4/#css-wide-keywords": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"css-wide keywords","type":"dfn","url":"https://drafts.csswg.org/css-values-4/#css-wide-keywords"},
"https://drafts.csswg.org/css-values-4/#mult-opt": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"?","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-opt"},
"https://drafts.csswg.org/css-values-4/#typedef-ident": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<ident>","type":"type","url":"https://drafts.csswg.org/css-values-4/#typedef-ident"},
"https://drafts.csswg.org/cssom-1/#cssomstring": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"cssom","spec":"cssom-1","status":"current","text":"CSSOMString","type":"interface","url":"https://drafts.csswg.org/cssom-1/#cssomstring"},
"https://drafts.csswg.org/mediaqueries-5/#paged-media": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"mediaqueries","spec":"mediaqueries-5","status":"current","text":"paged media","type":"dfn","url":"https://drafts.csswg.org/mediaqueries-5/#paged-media"},
"https://webidl.spec.whatwg.org/#Exposed": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-short": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"short","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-short"},
"https://www.w3.org/TR/CSS21/visudet.html#propdef-max-height": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css2","status":"current","text":"max-height","type":"property","url":"https://www.w3.org/TR/CSS21/visudet.html#propdef-max-height"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>