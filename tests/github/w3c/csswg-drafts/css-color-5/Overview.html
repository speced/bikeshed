<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>CSS Color Module Level 5</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/TR/css-color-5/" rel="canonical">
  <link href="https://drafts.csswg.org/csslogo.ico" rel="icon">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
  <link href="style.css" rel="stylesheet">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-wpt */
:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">CSS Color Module Level 5</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://drafts.csswg.org/css-color-5/">https://drafts.csswg.org/css-color-5/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/css-color-5/">https://www.w3.org/TR/css-color-5/</a>
      <dt>Previous Versions:
      <dd><a href="https://www.w3.org/TR/2020/WD-css-color-5-20200303/" rel="prev">https://www.w3.org/TR/2020/WD-css-color-5-20200303/</a>
      <dt>Feedback:
      <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-color-5">CSSWG Issues Repository</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="1438"><a class="p-name fn u-email email" href="mailto:chris@w3.org">Chris Lilley</a> (<span class="p-org org">W3C</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="115525"><a class="p-name fn u-url url" href="https://una.im">Una Kravets</a> (<span class="p-org org">Google</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="52258"><a class="p-name fn u-url url" href="http://lea.verou.me/about">Lea Verou</a> (<span class="p-org org">Invited Expert</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="112669"><a class="p-name fn u-url url" href="https://nerdy.dev">Adam Argyle</a> (<span class="p-org org">Google</span>)
      <dt>Suggest an Edit for this Spec:
      <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-color-5/Overview.bs">GitHub Editor</a>
      <dt>Delta Spec:
      <dd>yes
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This module extends CSS Color <a data-link-type="biblio" href="#biblio-css-color-4" title="CSS Color Module Level 4">[css-color-4]</a> to add color modification functions.</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a> is a language for describing the rendering of structured documents
(such as HTML and XML)
on screen, on paper, etc. 
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p>Please send feedback
	by <a href="https://github.com/w3c/csswg-drafts/issues">filing issues in GitHub</a> (preferred),
	including the spec code “css-color” in the title, like this:
	“[css-color] <i>…summary of comment…</i>”.
	All issues and comments are <a href="https://lists.w3.org/Archives/Public/public-css-archive/">archived</a>.
	Alternately, feedback can be sent to the (<a href="https://lists.w3.org/Archives/Public/www-style/">archived</a>) public mailing list <a href="mailto:www-style@w3.org?Subject=%5Bcss-color%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#color-spaces-color-spaces-section"><span class="secno">2</span> <span class="content">color spaces {#color spaces-section}</span></a>
    <li><a href="#color-mix"><span class="secno">3</span> <span class="content">Mixing colors: the <span class="css">color-mix()</span> function</span></a>
    <li><a href="#colorcontrast"><span class="secno">4</span> <span class="content">Selecting the most contrasting color: the <span class="css">color-contrast()</span> function</span></a>
    <li>
     <a href="#colormodify"><span class="secno">5</span> <span class="content">Modifying colors</span></a>
     <ol class="toc">
      <li><a href="#coloradjust"><span class="secno">5.1</span> <span class="content">Adjusting colors: the <span class="css">color-adjust</span> function</span></a>
      <li>
       <a href="#relative-colors"><span class="secno">5.2</span> <span class="content">Relative color syntax</span></a>
       <ol class="toc">
        <li><a href="#relative-RGB"><span class="secno">5.2.1</span> <span class="content">Relative RGB colors</span></a>
        <li><a href="#relative-HSL"><span class="secno">5.2.2</span> <span class="content">Relative HSL colors</span></a>
        <li><a href="#relative-HWB"><span class="secno">5.2.3</span> <span class="content">Relative HWB colors</span></a>
        <li><a href="#relative-Lab"><span class="secno">5.2.4</span> <span class="content">Relative Lab colors</span></a>
        <li><a href="#relative-LCH"><span class="secno">5.2.5</span> <span class="content">Relative LCH colors</span></a>
       </ol>
     </ol>
    <li><a href="#priv-sec"><span class="secno">6</span> <span class="content">Security and Privacy Considerations</span></a>
    <li><a href="#a11y"><span class="secno">7</span> <span class="content">Accessibility Considerations</span></a>
    <li>
     <a href="#changes"><span class="secno">8</span> <span class="content">Changes</span></a>
     <ol class="toc">
      <li><a href="#changes-20200303"><span class="secno">8.1</span> <span class="content">Since the <span>FPWD of 10 June 2020</span></span></a>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> Document conventions</span></a>
      <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content"> Conformance classes</span></a>
      <li>
       <a href="#w3c-partial"><span class="secno"></span> <span class="content"> Partial implementations</span></a>
       <ol class="toc">
        <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span class="content"> Implementations of Unstable and Proprietary Features</span></a>
       </ol>
      <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> Non-experimental implementations</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p><em>This section is not normative.</em></p>
   <p>Web developers, design tools and design system developers
	often use color functions to assist in scaling the design
	of their component color relations.
	With the increasing usage of design systems that support multiple platforms
	and multiple user preferences, like the increased capability of Dark Mode in UI,
	this becomes even more useful to not need to manually set color,
	and to instead have a single source from which schemes are calculated.</p>
   <figure>
    <p><img alt="LC color picker" src="images/LC-picker-scale.png" style="width: 40vmin"><br> <img alt="chloropleth map of the US" src="images/LC-picker-map2.png" style="width: 48vmin"></p>
    <figcaption>Above, a color picker operating in LCH space.
			Here, a pair of colors are being used
			to define a color scale
			on the Chroma-Lightness plane (constant Hue).
			Below, the color scale in use on a chloropleth map. </figcaption>
   </figure>
   <p>Currently Sass, calc() on HSL values, or PostCSS is used to do this.
	However, preprocessors are unable to work on dynamically adjusted colors;
	all current solutions are restricted to the sRGB gamut
	and to the perceptual limitations of HSL
	(colors are bunched up in the color wheel,
	and two colors with visually different lightness,
	like yellow and blue, can have the same HSL lightness).</p>
   <p>This module adds three functions: <a class="css" data-link-type="maybe" href="#funcdef-color-mix" id="ref-for-funcdef-color-mix">color-mix()</a>, <a class="css" data-link-type="maybe" href="#funcdef-color-contrast" id="ref-for-funcdef-color-contrast">color-contrast()</a>,
	and <a href="#colormodify">a way to modify colors</a>.</p>
   <p>The perceptually uniform ``lch()`` color space
	is used for mixing by default,
	as this has no gamut restrictions
	and colors are evenly distributed.
	However, other color spaces can be specified,
	including ``hsl()`` or ``srgb`` if desired.</p>
   <h2 class="heading settled" data-level="2" id="color-spaces-color-spaces-section"><span class="secno">2. </span><span class="content">color spaces {#color spaces-section}</span><a class="self-link" href="#color-spaces-color-spaces-section"></a></h2>
   <p>Mixing or otherwise combining colors
has different results depending on the color space used.
In some cases, the result of physically mixing two colored lights is desired
(in that case, the CIE XYZ color space is appropriate, because it is linear in light intensity).
In other cases, colors which are evenly spaced perceptually are desired
(in which case, the CIE Lab color space is designed to be perceptually uniform).
Alternatively, maximizing chroma so that color mixtures follow along the hue wheel is wanted
(CIE LCH works well for this).
Lastly, compatibility with legacy Web content may be the most important consideration.
(the sRGB color space, which is neither linear-light nor perceptually uniform, is the choice here).</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-color-space">&lt;color space></dfn> = srgb <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one">|</a> hsl <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> hwb <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②">|</a> xyz <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> lab <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one④">|</a> lch
</pre>
   <p>When no <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-4/#color-space" id="ref-for-color-space">color space</a> is specified,
the mixing is done in the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-4/#valdef-lch-lch" id="ref-for-valdef-lch-lch">lch</a> color space.
The <a data-link-type="dfn">xyz</a> color space is CIE XYZ, with a D50 whitepoint, and allows computation to be done
in a linear-light-intensity space.</p>
   <h2 class="heading settled" data-level="3" id="color-mix"><span class="secno">3. </span><span class="content">Mixing colors: the <a class="css" data-link-type="maybe" href="#funcdef-color-mix" id="ref-for-funcdef-color-mix①">color-mix()</a> function</span><a class="self-link" href="#color-mix"></a></h2>
   <p>This function takes two <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color">&lt;color></a> specifications
	and returns the result of mixing them,
	in a given <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-4/#color-space" id="ref-for-color-space①">color space</a>,
	by a specified amount.</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-color-mix">color-mix()</dfn> = color-mix( in <span class="production">&lt;&lt;color space>></span> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-comma" id="ref-for-comb-comma">,</a> [ <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color①">&lt;color></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-all" id="ref-for-comb-all">&amp;&amp;</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value">&lt;percentage></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-comma" id="ref-for-mult-comma">#{2}</a>)
</pre>
   <p>The percentages are normalized as follows:</p>
   <ol>
    <li data-md>
     <p>Let <var>p1</var> be the first percentage and <var>p2</var> the second one.</p>
    <li data-md>
     <p>If both percentages are omitted, they each default to 50% (an equal mix of the two colors).</p>
    <li data-md>
     <p>Otherwise, if <var>p2</var> is omitted, it becomes 100% - <var>p1</var></p>
    <li data-md>
     <p>Otherwise, if <var>p1</var> is omitted, it becomes 100% - <var>p2</var></p>
    <li data-md>
     <p>If the percentages sum to zero <em>do something, tbd</em></p>
    <li data-md>
     <p>Otherwise, if both are provided but do not add up to 100%,
	they are scaled accordingly so that they add up to 100%.</p>
   </ol>
   <p>This means that <var>p1</var> becomes <var>p1</var> / (<var>p1</var> + <var>p2</var>)
	and <var>p2</var> becomes <var>p2</var> / (<var>p1</var> + <var>p2</var>).</p>
   <p class="issue" id="issue-9293c6a9"><a class="self-link" href="#issue-9293c6a9"></a> Should we handle p1 + p2 &lt; 100% differently? E.g. a mix with `transparent`?</p>
   <p>After normalizing both percentages, the result is produced via the following algorithm:</p>
   <ol>
    <li data-md>
     <p>Both colors are converted to the specified <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-4/#color-space" id="ref-for-color-space②">color space</a>.
If the specified color space has a smaller gamut
than the one in which the color to be adjusted is specified,
gamut mapping will occur.</p>
    <li data-md>
     <p>Colors are then <a href="../css-color-4/#interpolation">interpolated in the 		specified color space</a>.</p>
   </ol>
   <p>The result of mixing is the color at the specified percentage along the progression
of the second color to the first color.</p>
   <p class="note" role="note"><span class="marker">Note:</span> As a corrollary, a percentage of 0% just returns the other color converted to the specified color space,
and a percentage of 100% returns the same color converted to the specified color space.</p>
   <div class="example" id="example-3d612424">
    <a class="self-link" href="#example-3d612424"></a> This example produces a mixture of 40% <span class="swatch" style="--color: peru"></span> peru
	and 60% <span class="swatch" style="--color: palegoldenrod"></span> palegoldenrod. 
<pre class="lang-css highlight"><c- nf>color-mix</c-><c- p>(</c->in lch<c- p>,</c-> peru <c- m>40</c-><c- k>%</c-><c- p>,</c-> palegoldenrod<c- p>)</c-></pre>
    <p>The mixing is done in <a class="css" data-link-type="maybe" href="#funcdef-lch" id="ref-for-funcdef-lch">lch()</a> color space.
	Here is a top-down view, looking along the neutral L axis:</p>
    <figure>
      <img src="images/CH-mixing.svg" style="width: 50vmin"> 
     <figcaption>Mixtures of peru and palegoldenrod.
			Peru has a hue angle, measured from the positive a axis,
			of 63.677 degrees
			while palegoldenrod has a hue angle of 98.834 degrees.
			Peru has a chroma, or distance from the central neutral axis, of 54.011
			while palegoldenrod has a chroma of 31.406.
			Mixtures lie along the curve. A 40%/60% mixture is shown. </figcaption>
    </figure>
    <p>The calculation is as follows:</p>
    <ul>
     <li data-md>
      <p><span class="swatch" style="--color: peru"></span> peru is lch(62.253% 54.011 63.677)</p>
     <li data-md>
      <p><span class="swatch" style="--color: palegoldenrod"></span> palegoldenrod is lch(91.374% 31.406 98.834)</p>
     <li data-md>
      <p>the mixed lightness is 62.253 * 40/100 + 91.374 * (100-40)/100 = 79.7256</p>
     <li data-md>
      <p>the mixed chroma is 54.011 * 40/100 + 31.406 * (100-40)/100 = 40.448</p>
     <li data-md>
      <p>the mixed hue is 63.677 * 40/100 + 98.834 * (100-40)/100 = 84.771</p>
     <li data-md>
      <p>the mixed result is <span class="swatch" style="--color: rgb(87.416% 76.036% 47.637%)"></span> lch(79.7256% 40.448 84.771)</p>
    </ul>
   </div>
   <div class="example" id="example-f70eb64e">
    <a class="self-link" href="#example-f70eb64e"></a> This example produces the mixture of teal and olive,
	in <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-4/#valdef-lch-lch" id="ref-for-valdef-lch-lch①">lch</a> color space (the default),
	with each lch channel being 65% of the value for teal
	and 35% of the value for olive. 
    <p class="note" role="note"><span class="marker">Note:</span> interpolating on hue and chroma
	keeps the intermediate colors
	as saturated as the endpoint colors.</p>
<pre class="lang-css highlight"><c- nf>color-mix</c-><c- p>(</c->in lch<c- p>,</c-> teal <c- m>65</c-><c- k>%</c-><c- p>,</c-> olive<c- p>);</c-></pre>
    <figure>
      <img src="images/CH-mixing3.svg" style="width: 50vmin"> 
     <figcaption>Mixtures of teal and olive.
			Teal has a hue angle, measured from the positive a axis,
			of 196.4524 degrees
			while olive has a hue angle of 99.5746 degrees.
			Teal has a chroma, or distance from the central neutral axis, of 31.6903
			while olive has a chroma of 56.8124.
			Mixtures lie along the dashed curve. A 65%/35% mixture is shown. </figcaption>
    </figure>
    <p>The calculation is as follows:</p>
    <ul>
     <li data-md>
      <p>sRGB <span class="swatch" style="--color: teal"></span> teal (#008080) is lch(47.9855% 31.6903 196.4524)</p>
     <li data-md>
      <p>sRGB <span class="swatch" style="--color: olive"></span> olive (#808000) is lch(52.1496% 56.8124 99.5746)</p>
     <li data-md>
      <p>mixed lightness is 47.9855 * 0.65 + 52.1496 * 0.35 = 49.4429</p>
     <li data-md>
      <p>mixed chroma is 31.6903 * 0.65 + 56.8124 * 0.35 = 40.4830</p>
     <li data-md>
      <p>mixed hue is 196.4524 * 0.65 + 99.5746 * 0.35 = 162.5452</p>
     <li data-md>
      <p>mixed result is lch(49.4429% 40.4830 162.5452)</p>
     <li data-md>
      <p>which is a slightly-blueish green: <span class="swatch" style="--color: rgb(7.7377% 52.5730% 37.3213%)"></span> rgb(7.7377% 52.5730% 37.3213%)</p>
    </ul>
   </div>
   <h2 class="heading settled" data-level="4" id="colorcontrast"><span class="secno">4. </span><span class="content">Selecting the most contrasting color: the <a class="css" data-link-type="maybe" href="#funcdef-color-contrast" id="ref-for-funcdef-color-contrast①">color-contrast()</a> function</span><a class="self-link" href="#colorcontrast"></a></h2>
   <p>This function takes, firstly, a single color
	(typically a background, but not necessarily),
	secondly, a list of two or more colors,
	and thirdly, an optional target <a href="https://www.w3.org/TR/WCAG21/#contrast-minimum">luminance contrast</a> <a data-link-type="biblio" href="#biblio-wcag21" title="Web Content Accessibility Guidelines (WCAG) 2.1">[WCAG21]</a>.
	It selects from that list
	the first color color to meet or exceed the target contrast.
	If no target is specified,
	it selects the first color with the highest contrast
	to the single color.</p>
   <p>The single color is separated from the list
	with the keyword <a class="property css" data-link-type="property">vs</a> and the target contrast, if present, is separated from the list
	with the keyword <span class="property">to</span>.</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-color-contrast">color-contrast()</dfn> = color-contrast( <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color②">&lt;color></a> vs <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color③">&lt;color></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-comma" id="ref-for-mult-comma①">#{2,}</a>  [ to [<a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value">&lt;number></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑤">|</a> AA <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑥">|</a> AA-large]]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①">?</a> )
</pre>
   <p>The keyword <a class="property css" data-link-type="property">AA</a> is equivalent to 4.5, and the keyword <span class="property">AA-large</span> is equivalent to 3.</p>
   <div class="example" id="example-edf25143">
    <a class="self-link" href="#example-edf25143"></a> 
<pre class="lang-css highlight"><c- nf>color-contrast</c-><c- p>(</c->wheat vs tan<c- p>,</c-> sienna<c- p>,</c-> <c- nf>var</c-><c- p>(</c->--myAccent<c- p>),</c-> #d2691e<c- p>)</c-></pre>
    <p>The calculation is as follows:</p>
    <ul>
     <li data-md>
      <p><span class="swatch" style="--color: wheat"></span> wheat (#f5deb3), the background, has relative luminance 0.749</p>
     <li data-md>
      <p><span class="swatch" style="--color: tan"></span> tan (#d2b48c) has relative luminance 0.482 and contrast ratio <strong>1.501</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: sienna"></span> sienna (#a0522d) has relative luminance 0.137 and contrast ratio <strong>4.273</strong></p>
    </ul>
    <p>Suppose myAccent has the value <span class="swatch" style="--color: #b22222"></span> #b22222:</p>
    <ul>
     <li data-md>
      <p>#b22222 has relative luminance 0.107 and contrast ratio <strong>5.081</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: #d2691e"></span> #d2691e has relative luminance 0.305 and contrast ratio <strong>2.249</strong></p>
    </ul>
     The highest contrast ratio is <strong>5.081</strong> so var(--myAccent) wins 
   </div>
   <div class="example" id="example-f2ef44d0">
    <a class="self-link" href="#example-f2ef44d0"></a> 
<pre class="lang-css highlight"><c- nf>color-contrast</c-><c- p>(</c->wheat vs bisque<c- p>,</c-> darkgoldenrod<c- p>,</c-> olive<c- p>,</c-> sienna<c- p>,</c-> darkgreen<c- p>,</c-> maroon to AA<c- p>)</c-></pre>
    <p>The calculation is as follows:</p>
    <ul>
     <li data-md>
      <p><span class="swatch" style="--color: wheat"></span> wheat (#f5deb3), the background, has relative luminance 0.749</p>
     <li data-md>
      <p><span class="swatch" style="--color: bisque"></span> bisque (#ffe4c4) has relative luminance 0.807 and contrast ratio <strong>1.073</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: darkgoldenrod"></span> darkgoldenrod (#b8860b) has relative luminance 0.273 and contrast ratio <strong>2.477</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: olive"></span> olive (#808000 ) has relative luminance 0.200 and contrast ratio <strong>3.193</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: sienna"></span> sienna (#a0522d) has relative luminance 0.137 and contrast ratio <strong>4.274</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: darkgreen"></span> darkgreen (#006400 ) has relative luminance 0.091 and contrast ratio <strong>5.662</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: maroon"></span> maroon (#800000 ) has relative luminance 0.046 and contrast ratio <strong>8.333</strong></p>
    </ul>
    <p>The first color in the list which meets the desired contrast ratio of 4.5 is <span class="swatch" style="--color: darkgreen"></span> darkgreen.</p>
   </div>
   <div class="example" id="example-4b5bb101">
    <a class="self-link" href="#example-4b5bb101"></a> 
<pre class="lang-css highlight"><c- nf>color-contrast</c-><c- p>(</c->wheat vs bisque<c- p>,</c-> darkgoldenrod<c- p>,</c-> olive<c- p>,</c-> sienna<c- p>,</c-> darkgreen<c- p>,</c-> maroon to <c- m>5.8</c-><c- p>)</c-></pre>
    <p>The calculation is as follows:</p>
    <ul>
     <li data-md>
      <p>the relative luminances and contrast ratios are the same as the previous example.</p>
    </ul>
    <p>The first color in the list which meets the desired contrast ratio of 5.8 is <span class="swatch" style="--color: maroon"></span> maroon.</p>
   </div>
   <p>The colors in the list (after the keyword vs) are tested sequentially,
	from left to right;
	a color is the temporary winner
	if it has  the highest contrast of all those tested so far.</p>
   <p>List traversal is terminated once the target contrast has been met or exceeded.</p>
   <p>Once the end of the list is reached, if there is no target contrast,
	the current temporary winner is the overall winner.
	Thus, if two colors in the list happen to have the same contrast,
	the earlier in the list wins
	because the later one has the same contrast, not higher.</p>
   <p>If there is a target contrast,
	and the end of the list is reached without meeting that target,
	either <a class="property css" data-link-type="property">white</a> or <span class="property">black</span> is returned,
	whichever has the higher contrast.</p>
   <div class="example" id="example-a3127473">
    <a class="self-link" href="#example-a3127473"></a> 
<pre class="lang-css highlight"><c- nf>color-contrast</c-><c- p>(</c->wheat vs bisque<c- p>,</c-> darkgoldenrod<c- p>,</c-> olive to AA<c- p>)</c-></pre>
    <p>The calculation is as follows:</p>
    <ul>
     <li data-md>
      <p>the relative luminances and contrast ratios are the same as the previous example.</p>
    </ul>
    <p>No color in the list meets the desired contrast ratio of 4.5,
		so <span class="swatch" style="--color: black"></span> black
		is returned as the contrast (15.982)
		is higher than that of white (1.314).</p>
   </div>
   <div class="example" id="example-586d0f27">
    <a class="self-link" href="#example-586d0f27"></a> 
<pre class="lang-css highlight">foo <c- p>{</c->
  <c- k>--bg</c-><c- p>:</c-> <c- nf>hsl</c-><c- p>(</c-><c- m>200</c-> <c- m>50</c-><c- k>%</c-> <c- m>80</c-><c- k>%</c-><c- p>);</c->
  <c- k>--purple-in-hsl</c-><c- p>:</c-> <c- nf>hsl</c-><c- p>(</c-><c- m>300</c-> <c- m>100</c-><c- k>%</c-> <c- m>25</c-><c- k>%</c-><c- p>);</c->
  <c- k>color</c-><c- p>:</c-> <c- nf>color-contrast</c-><c- p>(</c-><c- nf>var</c-><c- p>(</c->--bg<c- p>)</c-> vs <c- nf>hsl</c-><c- p>(</c-><c- m>200</c-> <c- m>83</c-><c- k>%</c-> <c- m>23</c-><c- k>%</c-><c- p>),</c-> purple<c- p>,</c-> <c- nf>var</c-><c- p>(</c->--purple-in-hsl<c- p>));</c->
  <c- p>}</c->
</pre>
    <p>The calculation is as follows:</p>
    <ul>
     <li data-md>
      <p><span class="swatch" style="--color: hsl(200 50% 80%)"></span> --bg is rgb(179 213 230) which has relative luminance 0.628835</p>
     <li data-md>
      <p><span class="swatch" style="--color: hsl(200 83% 23%)"></span> hsl(200 83% 23%) is rgb(10 75 107) which has relative luminance 0.061575 and contrast ratio <strong>6.08409</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: purple"></span> purple is rgb(128 0 128) which has relative luminance 0.061487 and contrast ratio <strong>6.08889</strong></p>
     <li data-md>
      <p><span class="swatch" style="--color: hsl(300 100% 25%)"></span> --purple-in-hsl is also rgb(128 0 128) which has relative luminance 0.061487 and contrast ratio <strong>6.08889</strong>. This is not greater than the contrast for purple, so purple wins.</p>
    </ul>
    <p>The calculated values here are shown to six significant figures, to demonstrate that early rounding to a lower precision would have given the wrong result (0.061575 is very close to 0.061487;
		6.08409 is very close to 6.08889).</p>
   </div>
   <h2 class="heading settled" data-level="5" id="colormodify"><span class="secno">5. </span><span class="content">Modifying colors</span><a class="self-link" href="#colormodify"></a></h2>
   <p class="note" role="note"><span class="marker">Note:</span> There are currently two proposals for modifying colors: <span class="css">color-adjust</span> and <a href="#relative-colors">Relative color syntax</a>.</p>
   <p class="issue" id="issue-f41f57aa"><a class="self-link" href="#issue-f41f57aa"></a> there are two proposals for color modification (<a href="https://github.com/w3c/csswg-drafts/issues/3187#issuecomment-499126198">proposal 1</a>, <a href="https://gist.github.com/una/edcfa0d3600e0b89b2ebf266bf549721">proposal 2</a>).
The CSS WG expects that the best aspects of each
will be chosen to produce a single eventual solution. <a href="https://github.com/w3c/csswg-drafts/issues/3187">[Issue #3187]</a></p>
   <h3 class="heading settled" data-level="5.1" id="coloradjust"><span class="secno">5.1. </span><span class="content">Adjusting colors: the <span class="css">color-adjust</span> function</span><a class="self-link" href="#coloradjust"></a></h3>
   <p>This function takes one <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color④">&lt;color></a> specification
	and returns the result of adjusting that color,
	in a given color space,
	by a specified color-adjuster.</p>
   <p>Unless otherwise specified,
	the adjustment is done in the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-4/#valdef-lch-lch" id="ref-for-valdef-lch-lch②">lch</a> color space.</p>
   <p>Multiple color functions can be specified.</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-color-adjust">color-adjust()</dfn> = color-adjust( <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color⑤">&lt;color></a> [ <a class="production" data-link-type="type" href="#typedef-color-adjuster" id="ref-for-typedef-color-adjuster">&lt;color-adjuster></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-all" id="ref-for-comb-all①">&amp;&amp;</a> [ in <span class="production">&lt;&lt;color space>></span> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt②">?</a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt③">?</a> )
</pre>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-color-adjuster">&lt;color-adjuster></dfn> = [ [
      <a class="production" data-link-type="type" href="#typedef-srgb-adjuster" id="ref-for-typedef-srgb-adjuster">&lt;srgb-adjuster></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑦">|</a> <a class="production" data-link-type="type" href="#typedef-hsl-adjuster" id="ref-for-typedef-hsl-adjuster">&lt;hsl-adjuster></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑧">|</a> <a class="production" data-link-type="type" href="#typedef-hwb-adjuster" id="ref-for-typedef-hwb-adjuster">&lt;hwb-adjuster></a>
    <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one⑨">|</a> <a class="production" data-link-type="type" href="#typedef-xyz-adjuster" id="ref-for-typedef-xyz-adjuster">&lt;xyz-adjuster></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⓪">|</a> <a class="production" data-link-type="type" href="#typedef-lab-adjuster" id="ref-for-typedef-lab-adjuster">&lt;lab-adjuster></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①①">|</a> <a class="production" data-link-type="type" href="#typedef-lch-adjuster" id="ref-for-typedef-lch-adjuster">&lt;lch-adjuster></a>
  ] <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①②">|</a> alpha ] <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①">&lt;percentage></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt④">?</a>
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-srgb-adjuster">&lt;srgb-adjuster></dfn> = red <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①③">|</a> green <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①④">|</a> blue
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-hsl-adjuster">&lt;hsl-adjuster></dfn> = <a class="production" data-link-type="type" href="#typedef-hue-adjuster" id="ref-for-typedef-hue-adjuster">&lt;hue-adjuster></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑤">|</a> saturation <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑥">|</a> lightness
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-hwb-adjuster">&lt;hwb-adjuster></dfn> = <a class="production" data-link-type="type" href="#typedef-hue-adjuster" id="ref-for-typedef-hue-adjuster①">&lt;hue-adjuster></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑦">|</a>  whiteness <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑧">|</a> blackness
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-xyz-adjuster">&lt;xyz-adjuster></dfn> = x <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①⑨">|</a> y <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⓪">|</a> z
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-lab-adjuster">&lt;lab-adjuster></dfn> = lightness <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②①">|</a> a <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②②">|</a> b
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-lch-adjuster">&lt;lch-adjuster></dfn> = lightness <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②③">|</a> chroma <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②④">|</a> <a class="production" data-link-type="type" href="#typedef-hue-adjuster" id="ref-for-typedef-hue-adjuster②">&lt;hue-adjuster></a>
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-hue-adjuster">&lt;hue-adjuster></dfn> = hue [shorter <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⑤">|</a> longer <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⑥">|</a> increasing <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⑦">|</a> decreasing <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⑧">|</a> specified ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt⑤">?</a>
</pre>
   <p>The meaning of the adjusters is defined by color space.
	For example, if the <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-4/#color-space" id="ref-for-color-space③">color space</a> is <a data-link-type="dfn">hsl</a>,
	hue means the HSL hue, which is not the same as the LCH hue;
	if the color space is <span>lch</span>,
	lightness means the LCH Lightness, which is the same as Lab lightness,
	but different to the HSL Lightness.</p>
   <p>Only the <a data-link-type="dfn">color-adjuster</a>s defined for a given <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-4/#color-space" id="ref-for-color-space④">color space</a> are available.
	For example, it is not possible to use the HWB <span>whiteness</span> adjuster unless the color space is <span>hwb</span>.
	The alpha adjuster is available on any <span id="ref-for-color-space⑤">color space</span>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> not all <a data-link-type="dfn">color-adjuster</a>s are equally useful.
	Adjustments in LCH are the most useful, which is why it is the default.
	Adjustments on the a and b axes are rarely needed.
	Adjustments in the srgb-related spaces (srgb itself, hsl, hwb)
	are provided mainly for backward compatibility
	with the sorts of adjustments currently done in CSS preprocessors.
	Adjusting the individual x, y and z channels will produce significant hue shifts;
	however, adjusting all three channels together is useful
	and will lighten or darken the color.</p>
   <p>The <a data-link-type="dfn">hue-adjuster</a> takes optional keywords, to specify the <a href="https://drafts.csswg.org/css-color-4/#hue-interpolation"><cite>CSS Color 4</cite> § 12.4 Hue Interpolation</a> algorithm.
	If no keyword is specified, it is as if <span class="css">shorter</span> were specified.</p>
   <div class="example" id="example-ec623fb3">
    <a class="self-link" href="#example-ec623fb3"></a> This example produces the adjustment of peru (#CD853F),
		in <a class="css" data-link-type="maybe" href="#funcdef-lch" id="ref-for-funcdef-lch①">lch()</a> color space (the default),
		with the lightness being reduced by 20%.
		The chroma and hue of red are left unchanged. 
<pre class="lang-css highlight"><c- nf>color-adjust</c-><c- p>(</c->peru lightness <c- m>-20</c-><c- k>%</c-><c- p>);</c-></pre>
    <p>The calculation is as follows:</p>
    <ul>
     <li data-md>
      <p><span class="swatch" style="--color: peru"></span> peru (#CD853F) is lch(62.2532% 54.0114 63.6769)</p>
     <li data-md>
      <p>adjusted lightness is 62.2532% - 20% = 42.2532%</p>
     <li data-md>
      <p>adjusted result is lch(42.2532% 54.0114 63.6769)</p>
     <li data-md>
      <p>which is <span class="swatch" style="--color: rgb(57.58% 32.47% 3.82%)"></span> rgb(57.58% 32.47% 3.82%)</p>
    </ul>
   </div>
   <h3 class="heading settled" data-level="5.2" id="relative-colors"><span class="secno">5.2. </span><span class="content">Relative color syntax</span><a class="self-link" href="#relative-colors"></a></h3>
   <p>In previous levels of this specification,
the color functions could only specify colors in an absolute manner,
by directly specifying all of the color channels.</p>
   <p>The new <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="relative-color">relative color</dfn> syntax
allows existing colors to be modified
using the color functions:
if an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="origin-color">origin color</dfn> is specified,
then each color channel can <em>either</em> be directly specified,
or taken from the origin color
(and possibly modified with <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#math-function" id="ref-for-math-function">math functions</a>).</p>
   <p class="issue" id="issue-5cce798c"><a class="self-link" href="#issue-5cce798c"></a> A future version of this specification may define a relative syntax for <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-5/#funcdef-color" id="ref-for-funcdef-color">color()</a> as well.</p>
   <p>The precise details of each function’s changes to accomodate <a data-link-type="dfn" href="#relative-color" id="ref-for-relative-color">relative colors</a> are listed below,
but they all follow a common structure:</p>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color">origin color</a> can be specified with a <span class="css">from &lt;color></span> value at the start of the function.</p>
    <li data-md>
     <p>If an <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①">origin color</a> is specified,
the remaining arguments can either be specified directly, as normal,
be specified as a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="channel-keyword">channel keyword</dfn> referring to one of the channels of the <span id="ref-for-origin-color②">origin color</span>. <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#math-function" id="ref-for-math-function①">Math functions</a> can also use these keywords
to do dynamic modifications of the <span id="ref-for-origin-color③">origin color’s</span> channels.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#relative-color" id="ref-for-relative-color①">Relative color</a> syntax doesn’t change whether an argument is required or optional.
If the alpha value is omitted, however,
it defaults to taking from the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color④">origin color</a> (rather than defaulting to <span class="css">100%</span>, as it does in the absolute syntax).</p>
   </ul>
   <p>If the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color⑤">origin color</a> was originally specified with a different color function,
it’s first converted into the chosen color function,
so it has meaningful values for the channels.</p>
   <div class="example" id="example-e5e90948">
    <a class="self-link" href="#example-e5e90948"></a> For example, if a theme color is specified as opaque,
	but in a particular instance you need it to be partially transparent: 
<pre class="highlight">html <c- p>{</c-> <c- k>--bg-color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
.overlay <c- p>{</c->
  <c- k>background</c-><c- p>:</c-> <c- nf>rgb</c-><c- p>(</c->from <c- nf>var</c-><c- p>(</c->--bg-color<c- p>)</c-> r g b / <c- m>80</c-><c- k>%</c-><c- p>);</c->
<c- p>}</c->
</pre>
    <p>In this example, the r, g, and b channels of the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color⑥">origin color</a> are unchanged,
	indicated by specifying them with the keywords
	drawing their values from the <span id="ref-for-origin-color⑦">origin color</span>,
	but the opacity is set to <span class="css">80%</span> to make it slightly transparent,
	regardless of what the <span id="ref-for-origin-color⑧">origin color’s</span> opacity was.</p>
   </div>
   <div class="example" id="example-aa493f9d">
    <a class="self-link" href="#example-aa493f9d"></a> By using the <a data-link-type="dfn" href="#channel-keyword" id="ref-for-channel-keyword">channel keywords</a> in a <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#math-function" id="ref-for-math-function②">math function</a>,
	an <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color⑨">origin color</a> can be manipulated in more advanced ways. 
<pre class="highlight">html <c- p>{</c-> <c- k>--color</c-><c- p>:</c-> green<c- p>;</c-> <c- p>}</c->
.foo <c- p>{</c->
  <c- k>--darker-accent</c-><c- p>:</c-> <c- nf>lch</c-><c- p>(</c->from <c- nf>var</c-><c- p>(</c->--color<c- p>)</c-> <c- nf>calc</c-><c- p>(</c->l / <c- m>2</c-><c- p>)</c-> c h<c- p>);</c->
<c- p>}</c->
</pre>
    <p>In this example, the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①⓪">origin color</a> is darkened
	by cutting its lightness in half,
	without changing any other aspect of the color.</p>
    <p>Note as well that the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①①">origin color</a> is a color keyword
	(effectively RGB),
	but it’s automatically interpreted as an LCH color
	due to being used in the <a class="css" data-link-type="maybe" href="#funcdef-lch" id="ref-for-funcdef-lch②">lch()</a> function.</p>
   </div>
   <div class="example" id="example-73952f26">
    <a class="self-link" href="#example-73952f26"></a> While most uses of <a data-link-type="dfn" href="#relative-color" id="ref-for-relative-color②">relative color</a> syntax
	will use the <a data-link-type="dfn" href="#channel-keyword" id="ref-for-channel-keyword①">channel keywords</a> in their corresponding argument,
	you can use them in any position. 
    <p>For example, to do a rough approximation of grayscaling a color:</p>
<pre class="highlight"><c- k>--blue-into-gray</c-><c- p>:</c-> <c- nf>rgb</c-><c- p>(</c->from <c- nf>var</c-><c- p>(</c->--color<c- p>)</c->
                    <c- nf>calc</c-><c- p>(</c->r * <c- m>.3</c-> + g * <c- m>.59</c-> + b * <c- m>.11</c-><c- p>)</c->
                    <c- nf>calc</c-><c- p>(</c->r * <c- m>.3</c-> + g * <c- m>.59</c-> + b * <c- m>.11</c-><c- p>)</c->
                    <c- nf>calc</c-><c- p>(</c->r * <c- m>.3</c-> + g * <c- m>.59</c-> + b * <c- m>.11</c-><c- p>));</c->
</pre>
    <p>Using this, <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-4/#valdef-color-red" id="ref-for-valdef-color-red">red</a> would become <span class="css">rgb(30% 30% 30%)</span>, <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-4/#valdef-color-green" id="ref-for-valdef-color-green">green</a> would become <span class="css">rgb(59% 59% 59%)</span>,
	and <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-4/#valdef-color-blue" id="ref-for-valdef-color-blue">blue</a> would become <span class="css">rgb(11% 11% 11%)</span>.
	A more moderate color, like <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-4/#valdef-color-darkolivegreen" id="ref-for-valdef-color-darkolivegreen">darkolivegreen</a>,
	which has RGB values <span class="css">rgb(85 107 47)</span>,
	would become approximately <span class="css">rgb(37% 37% 37%)</span>.</p>
    <p>(Note, tho, that an easier and more accurate way to grayscale a color
	is to use the <a class="css" data-link-type="maybe" href="#funcdef-lch" id="ref-for-funcdef-lch③">lch()</a> function,
	as that color space is more accurate to human perception: <span class="css">lch(from var(--color) l 0 h)</span> preserves the lightness,
	but zeroes out the chroma,
	which determines how "colorful" the color is.)</p>
   </div>
   <h4 class="heading settled" data-level="5.2.1" id="relative-RGB"><span class="secno">5.2.1. </span><span class="content">Relative RGB colors</span><a class="self-link" href="#relative-RGB"></a></h4>
   <p>The grammar of the <a class="css" data-link-type="maybe" href="#funcdef-rgb" id="ref-for-funcdef-rgb">rgb()</a> function is extended as follows:</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-rgb">rgb()</dfn> = rgb( <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value②">&lt;percentage></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-num" id="ref-for-mult-num">{3}</a> [ / <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value" id="ref-for-typedef-color-alpha-value">&lt;alpha-value></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt⑥">?</a> ) <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②⑨">|</a>
        rgb( <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value①">&lt;number></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-num" id="ref-for-mult-num①">{3}</a> [ / <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value" id="ref-for-typedef-color-alpha-value①">&lt;alpha-value></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt⑦">?</a> ) <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one③⓪">|</a>
        rgb( [ from <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color⑥">&lt;color></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt⑧">?</a> [ <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value②">&lt;number></a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one③①">|</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value③">&lt;percentage></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-num" id="ref-for-mult-num②">{3}</a> [ / <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value" id="ref-for-typedef-color-alpha-value②">&lt;alpha-value></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt⑨">?</a> )
</pre>
   <p>Within a <a data-link-type="dfn" href="#relative-color" id="ref-for-relative-color③">relative color</a> syntax <a class="css" data-link-type="maybe" href="#funcdef-rgb" id="ref-for-funcdef-rgb①">rgb()</a> function,
the allowed <a data-link-type="dfn" href="#channel-keyword" id="ref-for-channel-keyword②">channel keywords</a> are:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="rgb()" data-dfn-type="value" data-export id="valdef-rgb-r">r</dfn>, <dfn class="dfn-paneled css" data-dfn-for="rgb()" data-dfn-type="value" data-export id="valdef-rgb-g">g</dfn>, and <dfn class="dfn-paneled css" data-dfn-for="rgb()" data-dfn-type="value" data-export id="valdef-rgb-b">b</dfn> are all <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value④">&lt;percentage></a>s
that correspond to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①②">origin color’s</a> red, green, and blue channels
after its conversion to sRGB</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="rgb()" data-dfn-type="value" data-export id="valdef-rgb-alpha">alpha</dfn> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑤">&lt;percentage></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①③">origin color’s</a> alpha transparency</p>
   </ul>
   <div class="example" id="example-077312cb">
    <a class="self-link" href="#example-077312cb"></a> To manipulate color channels in the sRGB color space: 
<pre>rgb(from <span class="swatch" style="--color: indianred"></span> indianred 255 g b)
</pre>
    <p>This takes the sRGB value of indianred (205 92 92) and replaces the red channel with 255 to give <span class="swatch" style="--color: rgb(255 92 92)"></span> rgb(255 92 92).</p>
   </div>
   <h4 class="heading settled" data-level="5.2.2" id="relative-HSL"><span class="secno">5.2.2. </span><span class="content">Relative HSL colors</span><a class="self-link" href="#relative-HSL"></a></h4>
   <p>The grammar of the <a class="css" data-link-type="maybe" href="#funcdef-hsl" id="ref-for-funcdef-hsl">hsl()</a> function is extended as follows:</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-hsl">hsl()</dfn> = hsl([from <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color⑦">&lt;color></a>]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①⓪">?</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-hue" id="ref-for-typedef-hue">&lt;hue></a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑥">&lt;percentage></a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑦">&lt;percentage></a> [ / <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value" id="ref-for-typedef-color-alpha-value③">&lt;alpha-value></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①①">?</a> )
</pre>
   <p>Within a <a data-link-type="dfn" href="#relative-color" id="ref-for-relative-color④">relative color</a> syntax <a class="css" data-link-type="maybe" href="#funcdef-hsl" id="ref-for-funcdef-hsl①">hsl()</a> function,
the allowed <a data-link-type="dfn" href="#channel-keyword" id="ref-for-channel-keyword③">channel keywords</a> are:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="hsl()" data-dfn-type="value" data-export id="valdef-hsl-h">h</dfn> is an <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#angle-value" id="ref-for-angle-value">&lt;angle></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①④">origin color’s</a> HSL hue
after its conversion to sRGB,
normalized to a [0deg, 360deg) range</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="hsl()" data-dfn-type="value" data-export id="valdef-hsl-s">s</dfn> and <dfn class="dfn-paneled css" data-dfn-for="hsl()" data-dfn-type="value" data-export id="valdef-hsl-l">l</dfn> are <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑧">&lt;percentage></a>s that correspond to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①⑤">origin color’s</a> HSL saturation and lightness
after its conversion to sRGB</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="hsl()" data-dfn-type="value" data-export id="valdef-hsl-alpha">alpha</dfn> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value⑨">&lt;percentage></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①⑥">origin color’s</a> alpha transparency</p>
   </ul>
   <div class="example" id="example-2e48222a">
    <a class="self-link" href="#example-2e48222a"></a> This adds 180 degrees to the hue angle, giving a complementary color. 
<pre>--accent: <span class="swatch" style="--color: lightseagreen"></span> lightseagreen;
--complement:  <span class="swatch" style="--color: hsl(357deg 70% 41%)"></span> hsl(from var(--accent) calc(h + 180deg) s l);
</pre>
    <p>lightseagreen is hsl(177deg 70% 41%), so --complement is <span class="swatch" style="--color: hsl(357deg 70% 41%)"></span> hsl(357deg 70% 41%)</p>
   </div>
   <h4 class="heading settled" data-level="5.2.3" id="relative-HWB"><span class="secno">5.2.3. </span><span class="content">Relative HWB colors</span><a class="self-link" href="#relative-HWB"></a></h4>
   <p>The grammar of the <a class="css" data-link-type="maybe" href="#funcdef-hwb" id="ref-for-funcdef-hwb">hwb()</a> function is extended as follows:</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-hwb">hwb()</dfn> = hwb([from <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color⑧">&lt;color></a>]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①②">?</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-hue" id="ref-for-typedef-hue①">&lt;hue></a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⓪">&lt;percentage></a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①①">&lt;percentage></a> [ / <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value" id="ref-for-typedef-color-alpha-value④">&lt;alpha-value></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①③">?</a> )
</pre>
   <p>Within a <a data-link-type="dfn" href="#relative-color" id="ref-for-relative-color⑤">relative color</a> syntax <a class="css" data-link-type="maybe" href="#funcdef-hwb" id="ref-for-funcdef-hwb①">hwb()</a> function,
the allowed <a data-link-type="dfn" href="#channel-keyword" id="ref-for-channel-keyword④">channel keywords</a> are:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="hwb()" data-dfn-type="value" data-export id="valdef-hwb-h">h</dfn> is an <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#angle-value" id="ref-for-angle-value①">&lt;angle></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①⑦">origin color’s</a> HWB hue
after its conversion to sRGB,
normalized to a [0deg, 360deg) range</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="hwb()" data-dfn-type="value" data-export id="valdef-hwb-w">w</dfn> and <dfn class="dfn-paneled css" data-dfn-for="hwb()" data-dfn-type="value" data-export id="valdef-hwb-b">b</dfn> are <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①②">&lt;percentage></a>s that correspond to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①⑧">origin color’s</a> HWB whiteness and blackness
after its conversion to sRGB</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="hwb()" data-dfn-type="value" data-export id="valdef-hwb-alpha">alpha</dfn> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①③">&lt;percentage></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color①⑨">origin color’s</a> alpha transparency</p>
   </ul>
   <h4 class="heading settled" data-level="5.2.4" id="relative-Lab"><span class="secno">5.2.4. </span><span class="content">Relative Lab colors</span><a class="self-link" href="#relative-Lab"></a></h4>
   <p>The grammar of the <a class="css" data-link-type="maybe" href="#funcdef-lab" id="ref-for-funcdef-lab">lab()</a> function is extended as follows:</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-lab">lab()</dfn> = lab([from <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color⑨">&lt;color></a>]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①④">?</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①④">&lt;percentage></a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value③">&lt;number></a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value④">&lt;number></a> [ / <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value" id="ref-for-typedef-color-alpha-value⑤">&lt;alpha-value></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①⑤">?</a> )
</pre>
   <p>Within a <a data-link-type="dfn" href="#relative-color" id="ref-for-relative-color⑥">relative color</a> syntax <a class="css" data-link-type="maybe" href="#funcdef-lab" id="ref-for-funcdef-lab①">lab()</a> function,
the allowed <a data-link-type="dfn" href="#channel-keyword" id="ref-for-channel-keyword⑤">channel keywords</a> are:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="lab()" data-dfn-type="value" data-export id="valdef-lab-l">l</dfn> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⑤">&lt;percentage></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color②⓪">origin color’s</a> CIE Lightness</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="lab()" data-dfn-type="value" data-export id="valdef-lab-a">a</dfn> and <dfn class="dfn-paneled css" data-dfn-for="lab()" data-dfn-type="value" data-export id="valdef-lab-b">b</dfn> are <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value⑤">&lt;number></a>s
that correspond to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color②①">origin color’s</a> CIELab a and b axises</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="lab()" data-dfn-type="value" data-export id="valdef-lab-alpha">alpha</dfn> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⑥">&lt;percentage></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color②②">origin color’s</a> alpha transparency</p>
   </ul>
   <div class="example" id="example-35ec0113">
    <a class="self-link" href="#example-35ec0113"></a> Multiple ways to adjust the transparency of a base color: 
    <ul>
     <li data-md>
      <p><span class="css">lab(from var(--mycolor) l a b / 100%)</span> sets the alpha of <span class="css">var(--mycolor)</span> to 100% regardless of what it originally was.</p>
     <li data-md>
      <p><span class="css">lab(from var(--mycolor) l a b / calc(alpha * 0.8))</span> reduces the alpha of <span class="css">var(--mycolor)</span> by 20% of its original value.</p>
     <li data-md>
      <p><span class="css">lab(from var(--mycolor) l a b / calc(alpha - 20%))</span> reduces the alpha of <span class="css">var(--mycolor)</span> by 20% of 100%.</p>
    </ul>
    <p>Note that all the adjustments are lossless in the sense that no gamut clipping occurs, since lab() encompasses all visible color.
	This is not true for the alpha adjustments in the sRGB based functions (such as 'rgb()', 'hsl()', or 'hwb()'), which would also convert to sRGB in addition to adjusting the alpha transparency.</p>
   </div>
   <div class="example" id="example-80df9fb3">
    <a class="self-link" href="#example-80df9fb3"></a> Fully desaturating a color to gray, keeping the exact same lightness: 
<pre>--mycolor: <span class="swatch" style="--color: orchid"></span> orchid;
// orchid is lab(62.753% 52.460 -34.103)
--mygray: <span class="swatch" style="--color: rgb(59.515% 59.515% 59.515%)"></span> lab(from var(--mycolor) l 0 0)
// mygray is lab(62.753% 0 0) which is rgb(59.515% 59.515% 59.515%)
</pre>
   </div>
   <h4 class="heading settled" data-level="5.2.5" id="relative-LCH"><span class="secno">5.2.5. </span><span class="content">Relative LCH colors</span><a class="self-link" href="#relative-LCH"></a></h4>
   <p>The grammar of the <a class="css" data-link-type="maybe" href="#funcdef-lch" id="ref-for-funcdef-lch④">lch()</a> function is extended as follows:</p>
<pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-lch">lch()</dfn> = lch([from <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-5/#typedef-color" id="ref-for-typedef-color①⓪">&lt;color></a>]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①⑥">?</a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⑦">&lt;percentage></a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value⑥">&lt;number></a> <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-hue" id="ref-for-typedef-hue②">&lt;hue></a> [ / <a class="production" data-link-type="type" href="https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value" id="ref-for-typedef-color-alpha-value⑥">&lt;alpha-value></a> ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt①⑦">?</a> )
</pre>
   <p>Within a <a data-link-type="dfn" href="#relative-color" id="ref-for-relative-color⑦">relative color</a> syntax <a class="css" data-link-type="maybe" href="#funcdef-lch" id="ref-for-funcdef-lch⑤">lch()</a> function,
the allowed <a data-link-type="dfn" href="#channel-keyword" id="ref-for-channel-keyword⑥">channel keywords</a> are:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="lch()" data-dfn-type="value" data-export id="valdef-lch-l">l</dfn> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⑧">&lt;percentage></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color②③">origin color’s</a> CIE Lightness</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="lch()" data-dfn-type="value" data-export id="valdef-lch-c">c</dfn> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value⑦">&lt;number></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color②④">origin color’s</a> LCH chroma</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="lch()" data-dfn-type="value" data-export id="valdef-lch-h">h</dfn> is an <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#angle-value" id="ref-for-angle-value②">&lt;angle></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color②⑤">origin color’s</a> LCH hue,
normalized to a [0deg, 360deg) range.</p>
    <li data-md>
     <p><dfn class="dfn-paneled css" data-dfn-for="lch()" data-dfn-type="value" data-export id="valdef-lch-alpha">alpha</dfn> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value①⑨">&lt;percentage></a> that corresponds to the <a data-link-type="dfn" href="#origin-color" id="ref-for-origin-color②⑥">origin color’s</a> alpha transparency</p>
   </ul>
   <div class="example" id="example-f950a899"><a class="self-link" href="#example-f950a899"></a> <span class="css">lch(from peru calc(l * 0.8) c h)</span> produces a color that is 20% darker than <span class="swatch" style="--color: peru"></span> peru or lch(62.2532% 54.0114 63.6769), with its chroma and hue left unchanged.
	The result is <span class="swatch" style="--color: rgb(57.58% 32.47% 3.82%)"> </span> lch(49.80256% 54.0114 63.6769) </div>
   <div class="example" id="example-d5df127d">
    <a class="self-link" href="#example-d5df127d"></a> This adds 180 degrees to the hue angle, giving the complementary color. 
<pre>--accent: <span class="swatch" style="--color: lightseagreen"></span> lightseagreen;
--complement:  <span class="swatch" style="--color: rgb(88.2814% 51.1047% 58.3039%)"></span> LCH(from var(--accent) l c calc(h + 180deg));
</pre>
    <p>lightseagreen is LCH(65.4937% 39.4484 190.1013), so --complement is <span class="swatch" style="--color: rgb(88.2814% 51.1047% 58.3039%)"></span> LCH(65.4937% 39.4484 370.1013)</p>
   </div>
   <div class="example" id="example-634fc265">
    <a class="self-link" href="#example-634fc265"></a> Fully desaturating a color to gray, keeping the exact same lightness: 
<pre>--mycolor: <span class="swatch" style="--color: orchid"></span> orchid;
// orchid is lch(62.753% 62.571 326.973)
--mygray: <span class="swatch" style="--color: rgb(59.515% 59.515% 59.515%)"></span> lch(from var(--mycolor) l 0 h)
// mygray is lch(62.753% 0 326.973) which is rgb(59.515% 59.515% 59.515%)
</pre>
    <p>But now (since the hue was preserved) <em>re-saturating</em> again</p>
<pre>--mymuted: <span class="swatch" style="--color: rgb(72.710% 53.293% 71.224%)"></span> lch(from var(--mygray) l 30 h);
// mymuted is lch(62.753% 30 326.973) which is rgb(72.710% 53.293% 71.224%)
</pre>
   </div>
   <h2 class="heading settled" data-level="6" id="priv-sec"><span class="secno">6. </span><span class="content">Security and Privacy Considerations</span><a class="self-link" href="#priv-sec"></a></h2>
   <p>No new security or privacy considerations have been reported on this specification.</p>
   <h2 class="heading settled" data-level="7" id="a11y"><span class="secno">7. </span><span class="content">Accessibility Considerations</span><a class="self-link" href="#a11y"></a></h2>
   <p>This specification introduces a new feature
to help stylesheet authors
write stylesheets which conform
to WCAG 2.1 <a href="https://www.w3.org/TR/WCAG21/#contrast-minimum">section 1.4.3 Contrast (Minimum)</a>.</p>
   <h2 class="heading settled" data-level="8" id="changes"><span class="secno">8. </span><span class="content">Changes</span><a class="self-link" href="#changes"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="changes-20200303"><span class="secno">8.1. </span><span class="content">Since the <a href="https://www.w3.org/TR/2020/WD-css-color-5-20200303/">FPWD of 10 June 2020</a></span><a class="self-link" href="#changes-20200303"></a></h3>
   <ul>
    <li>Link to CSS 4 definition of color serialization
    <li>Added separate section for color spaces
    <li>Updated color-adjust example
    <li>Added explanatory diagrams
    <li>Deal with unresolved percentages
    <li>Normalize arguments to color-mix
    <li>Allow percentages for adjusters
    <li>Link fixes
    <li>Updated color-mix grammar, allowing adjusters, add alpha adjuster
    <li>Corrections to some examples
    <li>Updated Security and Privacy section
    <li>added vs keyword to color-contrast
    <li>added xyz adjuster to grammar
    <li>added hue adjuster keywords
    <li>add XYZ color space for mixing
    <li>defined color-adjuster and color space
    <li>allowed mix percent to default to 50%
    <li>added worked examples and diagrams
    <li>corrected minor spelling, syntax and formatting issues
   </ul>
  </main>
  <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
  <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="w3c-example">
   <a class="self-link" href="#w3c-example"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
    this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong></p>
  <details class="wpt-tests-block" dir="ltr" lang="en" open>
   <summary>Tests</summary>
   <p>Tests relating to the content of this specification
                     may be documented in “Tests” blocks like this one.
                     Any such block is non-normative.</p>
   <ul class="wpt-tests-list"></ul>
   <hr>
  </details>
  <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> Conformance classes</span><a class="self-link" href="#w3c-conformance-classes"></a></h3>
  <p>Conformance to this specification
    is defined for three conformance classes: </p>
  <dl>
   <dt>style sheet 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
            style sheet</a>. 
   <dt>renderer 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets the semantics of a style sheet and renders
            documents that use them. 
   <dt>authoring tool 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a style sheet. 
  </dl>
  <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module. </p>
  <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.) </p>
  <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module. </p>
  <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> Partial implementations</span><a class="self-link" href="#w3c-partial"></a></h3>
  <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong> treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>
  <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> Implementations of Unstable and Proprietary Features</span><a class="self-link" href="#w3c-conform-future-proofing"></a></h4>
  <p>To avoid clashes with future stable CSS features,
        the CSSWG recommends <a href="http://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the implementation of <a href="http://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a href="http://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
  <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> Non-experimental implementations</span><a class="self-link" href="#w3c-testing"></a></h3>
  <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec. </p>
  <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group. </p>
  <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing list.</p>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#valdef-lab-a">a</a><span>, in § 5.2.4</span>
   <li>
    alpha
    <ul>
     <li><a href="#valdef-hsl-alpha">value for hsl()</a><span>, in § 5.2.2</span>
     <li><a href="#valdef-hwb-alpha">value for hwb()</a><span>, in § 5.2.3</span>
     <li><a href="#valdef-lab-alpha">value for lab()</a><span>, in § 5.2.4</span>
     <li><a href="#valdef-lch-alpha">value for lch()</a><span>, in § 5.2.5</span>
     <li><a href="#valdef-rgb-alpha">value for rgb()</a><span>, in § 5.2.1</span>
    </ul>
   <li>
    b
    <ul>
     <li><a href="#valdef-hwb-b">value for hwb()</a><span>, in § 5.2.3</span>
     <li><a href="#valdef-lab-b">value for lab()</a><span>, in § 5.2.4</span>
     <li><a href="#valdef-rgb-b">value for rgb()</a><span>, in § 5.2.1</span>
    </ul>
   <li><a href="#valdef-lch-c">c</a><span>, in § 5.2.5</span>
   <li><a href="#channel-keyword">channel keyword</a><span>, in § 5.2</span>
   <li><a href="#funcdef-color-adjust">color-adjust()</a><span>, in § 5.1</span>
   <li><a href="#typedef-color-adjuster">&lt;color-adjuster></a><span>, in § 5.1</span>
   <li><a href="#funcdef-color-contrast">color-contrast()</a><span>, in § 4</span>
   <li><a href="#funcdef-color-mix">color-mix()</a><span>, in § 3</span>
   <li><a href="#typedef-color-space">&lt;color space></a><span>, in § 2</span>
   <li><a href="#valdef-rgb-g">g</a><span>, in § 5.2.1</span>
   <li>
    h
    <ul>
     <li><a href="#valdef-hsl-h">value for hsl()</a><span>, in § 5.2.2</span>
     <li><a href="#valdef-hwb-h">value for hwb()</a><span>, in § 5.2.3</span>
     <li><a href="#valdef-lch-h">value for lch()</a><span>, in § 5.2.5</span>
    </ul>
   <li><a href="#funcdef-hsl">hsl()</a><span>, in § 5.2.2</span>
   <li><a href="#typedef-hsl-adjuster">&lt;hsl-adjuster></a><span>, in § 5.1</span>
   <li><a href="#typedef-hue-adjuster">&lt;hue-adjuster></a><span>, in § 5.1</span>
   <li><a href="#funcdef-hwb">hwb()</a><span>, in § 5.2.3</span>
   <li><a href="#typedef-hwb-adjuster">&lt;hwb-adjuster></a><span>, in § 5.1</span>
   <li>
    l
    <ul>
     <li><a href="#valdef-hsl-l">value for hsl()</a><span>, in § 5.2.2</span>
     <li><a href="#valdef-lab-l">value for lab()</a><span>, in § 5.2.4</span>
     <li><a href="#valdef-lch-l">value for lch()</a><span>, in § 5.2.5</span>
    </ul>
   <li><a href="#funcdef-lab">lab()</a><span>, in § 5.2.4</span>
   <li><a href="#typedef-lab-adjuster">&lt;lab-adjuster></a><span>, in § 5.1</span>
   <li><a href="#funcdef-lch">lch()</a><span>, in § 5.2.5</span>
   <li><a href="#typedef-lch-adjuster">&lt;lch-adjuster></a><span>, in § 5.1</span>
   <li><a href="#origin-color">origin color</a><span>, in § 5.2</span>
   <li><a href="#valdef-rgb-r">r</a><span>, in § 5.2.1</span>
   <li><a href="#relative-color">relative color</a><span>, in § 5.2</span>
   <li><a href="#funcdef-rgb">rgb()</a><span>, in § 5.2.1</span>
   <li><a href="#valdef-hsl-s">s</a><span>, in § 5.2.2</span>
   <li><a href="#typedef-srgb-adjuster">&lt;srgb-adjuster></a><span>, in § 5.1</span>
   <li><a href="#valdef-hwb-w">w</a><span>, in § 5.2.3</span>
   <li><a href="#typedef-xyz-adjuster">&lt;xyz-adjuster></a><span>, in § 5.1</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSS-COLOR-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="79663d83">&lt;alpha-value></span>
     <li><span class="dfn-paneled" id="e10c8e34">&lt;hue></span>
     <li><span class="dfn-paneled" id="f17eedd8">blue</span>
     <li><span class="dfn-paneled" id="c9ce3bd4">color space</span>
     <li><span class="dfn-paneled" id="6416d648">darkolivegreen</span>
     <li><span class="dfn-paneled" id="b06bf874">green</span>
     <li><span class="dfn-paneled" id="b673431e">lch</span>
     <li><span class="dfn-paneled" id="82ed5c4b">red</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-COLOR-5]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="1548047a">&lt;color></span>
     <li><span class="dfn-paneled" id="03eee7b4">color()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="68487d22">#</span>
     <li><span class="dfn-paneled" id="f0809abc">&amp;&amp;</span>
     <li><span class="dfn-paneled" id="9f9120ff">,</span>
     <li><span class="dfn-paneled" id="3559c926">&lt;angle></span>
     <li><span class="dfn-paneled" id="16310992">&lt;number></span>
     <li><span class="dfn-paneled" id="15f5b381">&lt;percentage></span>
     <li><span class="dfn-paneled" id="537cf076">?</span>
     <li><span class="dfn-paneled" id="2a26d53d">math function</span>
     <li><span class="dfn-paneled" id="b0d8ebd9">{a}</span>
     <li><span class="dfn-paneled" id="6ec67710">|</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-color-4">[CSS-COLOR-4]
   <dd>Chris Lilley; Tab Atkins Jr.; Lea Verou. <a href="https://drafts.csswg.org/css-color-4/"><cite>CSS Color Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-color-4/">https://drafts.csswg.org/css-color-4/</a>
   <dt id="biblio-css-color-5">[CSS-COLOR-5]
   <dd>Chris Lilley; et al. <a href="https://drafts.csswg.org/css-color-5/"><cite>CSS Color Module Level 5</cite></a>. URL: <a href="https://drafts.csswg.org/css-color-5/">https://drafts.csswg.org/css-color-5/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-4/"><cite>CSS Values and Units Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-wcag21">[WCAG21]
   <dd>Michael Cooper; et al. <a href="https://w3c.github.io/wcag/guidelines/22/"><cite>Web Content Accessibility Guidelines (WCAG) 2.1</cite></a>. URL: <a href="https://w3c.github.io/wcag/guidelines/22/">https://w3c.github.io/wcag/guidelines/22/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Should we handle p1 + p2 &lt; 100% differently? E.g. a mix with `transparent`? <a class="issue-return" href="#issue-9293c6a9" title="Jump to section">↵</a></div>
   <div class="issue"> there are two proposals for color modification (<a href="https://github.com/w3c/csswg-drafts/issues/3187#issuecomment-499126198">proposal 1</a>, <a href="https://gist.github.com/una/edcfa0d3600e0b89b2ebf266bf549721">proposal 2</a>).
The CSS WG expects that the best aspects of each
will be chosen to produce a single eventual solution. <a href="https://github.com/w3c/csswg-drafts/issues/3187">[Issue #3187]</a> <a class="issue-return" href="#issue-f41f57aa" title="Jump to section">↵</a></div>
   <div class="issue"> A future version of this specification may define a relative syntax for <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-color-5/#funcdef-color">color()</a> as well. <a class="issue-return" href="#issue-5cce798c" title="Jump to section">↵</a></div>
  </div>
  <details class="mdn-anno unpositioned" data-anno-for="color-mix">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix" title="The color-mix() functional notation takes two <color> values and returns the result of mixing them in a given colorspace by a given amount.">color_value/color-mix</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>113+</span></span><span class="safari yes"><span>Safari</span><span>16.2+</span></span><span class="chrome yes"><span>Chrome</span><span>111+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>111+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"03eee7b4": {"dfnID":"03eee7b4","dfnText":"color()","external":true,"refSections":[{"refs":[{"id":"ref-for-funcdef-color"}],"title":"5.2. Relative color syntax"}],"url":"https://drafts.csswg.org/css-color-5/#funcdef-color"},
"1548047a": {"dfnID":"1548047a","dfnText":"<color>","external":true,"refSections":[{"refs":[{"id":"ref-for-typedef-color"},{"id":"ref-for-typedef-color\u2460"}],"title":"3. Mixing colors: the color-mix() function"},{"refs":[{"id":"ref-for-typedef-color\u2461"},{"id":"ref-for-typedef-color\u2462"}],"title":"4. Selecting the most contrasting color: the color-contrast() function"},{"refs":[{"id":"ref-for-typedef-color\u2463"},{"id":"ref-for-typedef-color\u2464"}],"title":"5.1. Adjusting colors: the color-adjust function"},{"refs":[{"id":"ref-for-typedef-color\u2465"}],"title":"5.2.1. Relative RGB colors"},{"refs":[{"id":"ref-for-typedef-color\u2466"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-typedef-color\u2467"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-typedef-color\u2468"}],"title":"5.2.4. Relative Lab colors"},{"refs":[{"id":"ref-for-typedef-color\u2460\u24ea"}],"title":"5.2.5. Relative LCH colors"}],"url":"https://drafts.csswg.org/css-color-5/#typedef-color"},
"15f5b381": {"dfnID":"15f5b381","dfnText":"<percentage>","external":true,"refSections":[{"refs":[{"id":"ref-for-percentage-value"}],"title":"3. Mixing colors: the color-mix() function"},{"refs":[{"id":"ref-for-percentage-value\u2460"}],"title":"5.1. Adjusting colors: the color-adjust function"},{"refs":[{"id":"ref-for-percentage-value\u2461"},{"id":"ref-for-percentage-value\u2462"},{"id":"ref-for-percentage-value\u2463"},{"id":"ref-for-percentage-value\u2464"}],"title":"5.2.1. Relative RGB colors"},{"refs":[{"id":"ref-for-percentage-value\u2465"},{"id":"ref-for-percentage-value\u2466"},{"id":"ref-for-percentage-value\u2467"},{"id":"ref-for-percentage-value\u2468"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-percentage-value\u2460\u24ea"},{"id":"ref-for-percentage-value\u2460\u2460"},{"id":"ref-for-percentage-value\u2460\u2461"},{"id":"ref-for-percentage-value\u2460\u2462"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-percentage-value\u2460\u2463"},{"id":"ref-for-percentage-value\u2460\u2464"},{"id":"ref-for-percentage-value\u2460\u2465"}],"title":"5.2.4. Relative Lab colors"},{"refs":[{"id":"ref-for-percentage-value\u2460\u2466"},{"id":"ref-for-percentage-value\u2460\u2467"},{"id":"ref-for-percentage-value\u2460\u2468"}],"title":"5.2.5. Relative LCH colors"}],"url":"https://drafts.csswg.org/css-values-4/#percentage-value"},
"16310992": {"dfnID":"16310992","dfnText":"<number>","external":true,"refSections":[{"refs":[{"id":"ref-for-number-value"}],"title":"4. Selecting the most contrasting color: the color-contrast() function"},{"refs":[{"id":"ref-for-number-value\u2460"},{"id":"ref-for-number-value\u2461"}],"title":"5.2.1. Relative RGB colors"},{"refs":[{"id":"ref-for-number-value\u2462"},{"id":"ref-for-number-value\u2463"},{"id":"ref-for-number-value\u2464"}],"title":"5.2.4. Relative Lab colors"},{"refs":[{"id":"ref-for-number-value\u2465"},{"id":"ref-for-number-value\u2466"}],"title":"5.2.5. Relative LCH colors"}],"url":"https://drafts.csswg.org/css-values-4/#number-value"},
"2a26d53d": {"dfnID":"2a26d53d","dfnText":"math function","external":true,"refSections":[{"refs":[{"id":"ref-for-math-function"},{"id":"ref-for-math-function\u2460"},{"id":"ref-for-math-function\u2461"}],"title":"5.2. Relative color syntax"}],"url":"https://drafts.csswg.org/css-values-4/#math-function"},
"3559c926": {"dfnID":"3559c926","dfnText":"<angle>","external":true,"refSections":[{"refs":[{"id":"ref-for-angle-value"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-angle-value\u2460"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-angle-value\u2461"}],"title":"5.2.5. Relative LCH colors"}],"url":"https://drafts.csswg.org/css-values-4/#angle-value"},
"537cf076": {"dfnID":"537cf076","dfnText":"?","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-opt"}],"title":"3. Mixing colors: the color-mix() function"},{"refs":[{"id":"ref-for-mult-opt\u2460"}],"title":"4. Selecting the most contrasting color: the color-contrast() function"},{"refs":[{"id":"ref-for-mult-opt\u2461"},{"id":"ref-for-mult-opt\u2462"},{"id":"ref-for-mult-opt\u2463"},{"id":"ref-for-mult-opt\u2464"}],"title":"5.1. Adjusting colors: the color-adjust function"},{"refs":[{"id":"ref-for-mult-opt\u2465"},{"id":"ref-for-mult-opt\u2466"},{"id":"ref-for-mult-opt\u2467"},{"id":"ref-for-mult-opt\u2468"}],"title":"5.2.1. Relative RGB colors"},{"refs":[{"id":"ref-for-mult-opt\u2460\u24ea"},{"id":"ref-for-mult-opt\u2460\u2460"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-mult-opt\u2460\u2461"},{"id":"ref-for-mult-opt\u2460\u2462"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-mult-opt\u2460\u2463"},{"id":"ref-for-mult-opt\u2460\u2464"}],"title":"5.2.4. Relative Lab colors"},{"refs":[{"id":"ref-for-mult-opt\u2460\u2465"},{"id":"ref-for-mult-opt\u2460\u2466"}],"title":"5.2.5. Relative LCH colors"}],"url":"https://drafts.csswg.org/css-values-4/#mult-opt"},
"6416d648": {"dfnID":"6416d648","dfnText":"darkolivegreen","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-color-darkolivegreen"}],"title":"5.2. Relative color syntax"}],"url":"https://drafts.csswg.org/css-color-4/#valdef-color-darkolivegreen"},
"68487d22": {"dfnID":"68487d22","dfnText":"#","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-comma"}],"title":"3. Mixing colors: the color-mix() function"},{"refs":[{"id":"ref-for-mult-comma\u2460"}],"title":"4. Selecting the most contrasting color: the color-contrast() function"}],"url":"https://drafts.csswg.org/css-values-4/#mult-comma"},
"6ec67710": {"dfnID":"6ec67710","dfnText":"|","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-one"},{"id":"ref-for-comb-one\u2460"},{"id":"ref-for-comb-one\u2461"},{"id":"ref-for-comb-one\u2462"},{"id":"ref-for-comb-one\u2463"}],"title":"2. color spaces {#color spaces-section}"},{"refs":[{"id":"ref-for-comb-one\u2464"},{"id":"ref-for-comb-one\u2465"}],"title":"4. Selecting the most contrasting color: the color-contrast() function"},{"refs":[{"id":"ref-for-comb-one\u2466"},{"id":"ref-for-comb-one\u2467"},{"id":"ref-for-comb-one\u2468"},{"id":"ref-for-comb-one\u2460\u24ea"},{"id":"ref-for-comb-one\u2460\u2460"},{"id":"ref-for-comb-one\u2460\u2461"},{"id":"ref-for-comb-one\u2460\u2462"},{"id":"ref-for-comb-one\u2460\u2463"},{"id":"ref-for-comb-one\u2460\u2464"},{"id":"ref-for-comb-one\u2460\u2465"},{"id":"ref-for-comb-one\u2460\u2466"},{"id":"ref-for-comb-one\u2460\u2467"},{"id":"ref-for-comb-one\u2460\u2468"},{"id":"ref-for-comb-one\u2461\u24ea"},{"id":"ref-for-comb-one\u2461\u2460"},{"id":"ref-for-comb-one\u2461\u2461"},{"id":"ref-for-comb-one\u2461\u2462"},{"id":"ref-for-comb-one\u2461\u2463"},{"id":"ref-for-comb-one\u2461\u2464"},{"id":"ref-for-comb-one\u2461\u2465"},{"id":"ref-for-comb-one\u2461\u2466"},{"id":"ref-for-comb-one\u2461\u2467"}],"title":"5.1. Adjusting colors: the color-adjust function"},{"refs":[{"id":"ref-for-comb-one\u2461\u2468"},{"id":"ref-for-comb-one\u2462\u24ea"},{"id":"ref-for-comb-one\u2462\u2460"}],"title":"5.2.1. Relative RGB colors"}],"url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"79663d83": {"dfnID":"79663d83","dfnText":"<alpha-value>","external":true,"refSections":[{"refs":[{"id":"ref-for-typedef-color-alpha-value"},{"id":"ref-for-typedef-color-alpha-value\u2460"},{"id":"ref-for-typedef-color-alpha-value\u2461"}],"title":"5.2.1. Relative RGB colors"},{"refs":[{"id":"ref-for-typedef-color-alpha-value\u2462"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-typedef-color-alpha-value\u2463"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-typedef-color-alpha-value\u2464"}],"title":"5.2.4. Relative Lab colors"},{"refs":[{"id":"ref-for-typedef-color-alpha-value\u2465"}],"title":"5.2.5. Relative LCH colors"}],"url":"https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value"},
"82ed5c4b": {"dfnID":"82ed5c4b","dfnText":"red","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-color-red"}],"title":"5.2. Relative color syntax"}],"url":"https://drafts.csswg.org/css-color-4/#valdef-color-red"},
"9f9120ff": {"dfnID":"9f9120ff","dfnText":",","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-comma"}],"title":"3. Mixing colors: the color-mix() function"}],"url":"https://drafts.csswg.org/css-values-4/#comb-comma"},
"b06bf874": {"dfnID":"b06bf874","dfnText":"green","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-color-green"}],"title":"5.2. Relative color syntax"}],"url":"https://drafts.csswg.org/css-color-4/#valdef-color-green"},
"b0d8ebd9": {"dfnID":"b0d8ebd9","dfnText":"{a}","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-num"},{"id":"ref-for-mult-num\u2460"},{"id":"ref-for-mult-num\u2461"}],"title":"5.2.1. Relative RGB colors"}],"url":"https://drafts.csswg.org/css-values-4/#mult-num"},
"b673431e": {"dfnID":"b673431e","dfnText":"lch","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-lch-lch"}],"title":"2. color spaces {#color spaces-section}"},{"refs":[{"id":"ref-for-valdef-lch-lch\u2460"}],"title":"3. Mixing colors: the color-mix() function"},{"refs":[{"id":"ref-for-valdef-lch-lch\u2461"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"https://drafts.csswg.org/css-color-4/#valdef-lch-lch"},
"c9ce3bd4": {"dfnID":"c9ce3bd4","dfnText":"color space","external":true,"refSections":[{"refs":[{"id":"ref-for-color-space"}],"title":"2. color spaces {#color spaces-section}"},{"refs":[{"id":"ref-for-color-space\u2460"},{"id":"ref-for-color-space\u2461"}],"title":"3. Mixing colors: the color-mix() function"},{"refs":[{"id":"ref-for-color-space\u2462"},{"id":"ref-for-color-space\u2463"},{"id":"ref-for-color-space\u2464"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"https://drafts.csswg.org/css-color-4/#color-space"},
"channel-keyword": {"dfnID":"channel-keyword","dfnText":"channel keyword","external":false,"refSections":[{"refs":[{"id":"ref-for-channel-keyword"},{"id":"ref-for-channel-keyword\u2460"}],"title":"5.2. Relative color syntax"},{"refs":[{"id":"ref-for-channel-keyword\u2461"}],"title":"5.2.1. Relative RGB colors"},{"refs":[{"id":"ref-for-channel-keyword\u2462"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-channel-keyword\u2463"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-channel-keyword\u2464"}],"title":"5.2.4. Relative Lab colors"},{"refs":[{"id":"ref-for-channel-keyword\u2465"}],"title":"5.2.5. Relative LCH colors"}],"url":"#channel-keyword"},
"e10c8e34": {"dfnID":"e10c8e34","dfnText":"<hue>","external":true,"refSections":[{"refs":[{"id":"ref-for-typedef-hue"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-typedef-hue\u2460"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-typedef-hue\u2461"}],"title":"5.2.5. Relative LCH colors"}],"url":"https://drafts.csswg.org/css-color-4/#typedef-hue"},
"f0809abc": {"dfnID":"f0809abc","dfnText":"&&","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-all"}],"title":"3. Mixing colors: the color-mix() function"},{"refs":[{"id":"ref-for-comb-all\u2460"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"https://drafts.csswg.org/css-values-4/#comb-all"},
"f17eedd8": {"dfnID":"f17eedd8","dfnText":"blue","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-color-blue"}],"title":"5.2. Relative color syntax"}],"url":"https://drafts.csswg.org/css-color-4/#valdef-color-blue"},
"funcdef-color-adjust": {"dfnID":"funcdef-color-adjust","dfnText":"color-adjust()","external":false,"refSections":[],"url":"#funcdef-color-adjust"},
"funcdef-color-contrast": {"dfnID":"funcdef-color-contrast","dfnText":"color-contrast()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-color-contrast"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-funcdef-color-contrast\u2460"}],"title":"4. Selecting the most contrasting color: the color-contrast() function"}],"url":"#funcdef-color-contrast"},
"funcdef-color-mix": {"dfnID":"funcdef-color-mix","dfnText":"color-mix()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-color-mix"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-funcdef-color-mix\u2460"}],"title":"3. Mixing colors: the color-mix() function"}],"url":"#funcdef-color-mix"},
"funcdef-hsl": {"dfnID":"funcdef-hsl","dfnText":"hsl()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-hsl"},{"id":"ref-for-funcdef-hsl\u2460"}],"title":"5.2.2. Relative HSL colors"}],"url":"#funcdef-hsl"},
"funcdef-hwb": {"dfnID":"funcdef-hwb","dfnText":"hwb()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-hwb"},{"id":"ref-for-funcdef-hwb\u2460"}],"title":"5.2.3. Relative HWB colors"}],"url":"#funcdef-hwb"},
"funcdef-lab": {"dfnID":"funcdef-lab","dfnText":"lab()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-lab"},{"id":"ref-for-funcdef-lab\u2460"}],"title":"5.2.4. Relative Lab colors"}],"url":"#funcdef-lab"},
"funcdef-lch": {"dfnID":"funcdef-lch","dfnText":"lch()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-lch"}],"title":"3. Mixing colors: the color-mix() function"},{"refs":[{"id":"ref-for-funcdef-lch\u2460"}],"title":"5.1. Adjusting colors: the color-adjust function"},{"refs":[{"id":"ref-for-funcdef-lch\u2461"},{"id":"ref-for-funcdef-lch\u2462"}],"title":"5.2. Relative color syntax"},{"refs":[{"id":"ref-for-funcdef-lch\u2463"},{"id":"ref-for-funcdef-lch\u2464"}],"title":"5.2.5. Relative LCH colors"}],"url":"#funcdef-lch"},
"funcdef-rgb": {"dfnID":"funcdef-rgb","dfnText":"rgb()","external":false,"refSections":[{"refs":[{"id":"ref-for-funcdef-rgb"},{"id":"ref-for-funcdef-rgb\u2460"}],"title":"5.2.1. Relative RGB colors"}],"url":"#funcdef-rgb"},
"origin-color": {"dfnID":"origin-color","dfnText":"origin color","external":false,"refSections":[{"refs":[{"id":"ref-for-origin-color"},{"id":"ref-for-origin-color\u2460"},{"id":"ref-for-origin-color\u2461"},{"id":"ref-for-origin-color\u2462"},{"id":"ref-for-origin-color\u2463"},{"id":"ref-for-origin-color\u2464"},{"id":"ref-for-origin-color\u2465"},{"id":"ref-for-origin-color\u2466"},{"id":"ref-for-origin-color\u2467"},{"id":"ref-for-origin-color\u2468"},{"id":"ref-for-origin-color\u2460\u24ea"},{"id":"ref-for-origin-color\u2460\u2460"}],"title":"5.2. Relative color syntax"},{"refs":[{"id":"ref-for-origin-color\u2460\u2461"},{"id":"ref-for-origin-color\u2460\u2462"}],"title":"5.2.1. Relative RGB colors"},{"refs":[{"id":"ref-for-origin-color\u2460\u2463"},{"id":"ref-for-origin-color\u2460\u2464"},{"id":"ref-for-origin-color\u2460\u2465"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-origin-color\u2460\u2466"},{"id":"ref-for-origin-color\u2460\u2467"},{"id":"ref-for-origin-color\u2460\u2468"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-origin-color\u2461\u24ea"},{"id":"ref-for-origin-color\u2461\u2460"},{"id":"ref-for-origin-color\u2461\u2461"}],"title":"5.2.4. Relative Lab colors"},{"refs":[{"id":"ref-for-origin-color\u2461\u2462"},{"id":"ref-for-origin-color\u2461\u2463"},{"id":"ref-for-origin-color\u2461\u2464"},{"id":"ref-for-origin-color\u2461\u2465"}],"title":"5.2.5. Relative LCH colors"}],"url":"#origin-color"},
"relative-color": {"dfnID":"relative-color","dfnText":"relative color","external":false,"refSections":[{"refs":[{"id":"ref-for-relative-color"},{"id":"ref-for-relative-color\u2460"},{"id":"ref-for-relative-color\u2461"}],"title":"5.2. Relative color syntax"},{"refs":[{"id":"ref-for-relative-color\u2462"}],"title":"5.2.1. Relative RGB colors"},{"refs":[{"id":"ref-for-relative-color\u2463"}],"title":"5.2.2. Relative HSL colors"},{"refs":[{"id":"ref-for-relative-color\u2464"}],"title":"5.2.3. Relative HWB colors"},{"refs":[{"id":"ref-for-relative-color\u2465"}],"title":"5.2.4. Relative Lab colors"},{"refs":[{"id":"ref-for-relative-color\u2466"}],"title":"5.2.5. Relative LCH colors"}],"url":"#relative-color"},
"typedef-color-adjuster": {"dfnID":"typedef-color-adjuster","dfnText":"<color-adjuster>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-color-adjuster"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"#typedef-color-adjuster"},
"typedef-color-space": {"dfnID":"typedef-color-space","dfnText":"<color space>","external":false,"refSections":[],"url":"#typedef-color-space"},
"typedef-hsl-adjuster": {"dfnID":"typedef-hsl-adjuster","dfnText":"<hsl-adjuster>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-hsl-adjuster"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"#typedef-hsl-adjuster"},
"typedef-hue-adjuster": {"dfnID":"typedef-hue-adjuster","dfnText":"<hue-adjuster>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-hue-adjuster"},{"id":"ref-for-typedef-hue-adjuster\u2460"},{"id":"ref-for-typedef-hue-adjuster\u2461"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"#typedef-hue-adjuster"},
"typedef-hwb-adjuster": {"dfnID":"typedef-hwb-adjuster","dfnText":"<hwb-adjuster>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-hwb-adjuster"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"#typedef-hwb-adjuster"},
"typedef-lab-adjuster": {"dfnID":"typedef-lab-adjuster","dfnText":"<lab-adjuster>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-lab-adjuster"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"#typedef-lab-adjuster"},
"typedef-lch-adjuster": {"dfnID":"typedef-lch-adjuster","dfnText":"<lch-adjuster>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-lch-adjuster"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"#typedef-lch-adjuster"},
"typedef-srgb-adjuster": {"dfnID":"typedef-srgb-adjuster","dfnText":"<srgb-adjuster>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-srgb-adjuster"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"#typedef-srgb-adjuster"},
"typedef-xyz-adjuster": {"dfnID":"typedef-xyz-adjuster","dfnText":"<xyz-adjuster>","external":false,"refSections":[{"refs":[{"id":"ref-for-typedef-xyz-adjuster"}],"title":"5.1. Adjusting colors: the color-adjust function"}],"url":"#typedef-xyz-adjuster"},
"valdef-hsl-alpha": {"dfnID":"valdef-hsl-alpha","dfnText":"alpha","external":false,"refSections":[],"url":"#valdef-hsl-alpha"},
"valdef-hsl-h": {"dfnID":"valdef-hsl-h","dfnText":"h","external":false,"refSections":[],"url":"#valdef-hsl-h"},
"valdef-hsl-l": {"dfnID":"valdef-hsl-l","dfnText":"l","external":false,"refSections":[],"url":"#valdef-hsl-l"},
"valdef-hsl-s": {"dfnID":"valdef-hsl-s","dfnText":"s","external":false,"refSections":[],"url":"#valdef-hsl-s"},
"valdef-hwb-alpha": {"dfnID":"valdef-hwb-alpha","dfnText":"alpha","external":false,"refSections":[],"url":"#valdef-hwb-alpha"},
"valdef-hwb-b": {"dfnID":"valdef-hwb-b","dfnText":"b","external":false,"refSections":[],"url":"#valdef-hwb-b"},
"valdef-hwb-h": {"dfnID":"valdef-hwb-h","dfnText":"h","external":false,"refSections":[],"url":"#valdef-hwb-h"},
"valdef-hwb-w": {"dfnID":"valdef-hwb-w","dfnText":"w","external":false,"refSections":[],"url":"#valdef-hwb-w"},
"valdef-lab-a": {"dfnID":"valdef-lab-a","dfnText":"a","external":false,"refSections":[],"url":"#valdef-lab-a"},
"valdef-lab-alpha": {"dfnID":"valdef-lab-alpha","dfnText":"alpha","external":false,"refSections":[],"url":"#valdef-lab-alpha"},
"valdef-lab-b": {"dfnID":"valdef-lab-b","dfnText":"b","external":false,"refSections":[],"url":"#valdef-lab-b"},
"valdef-lab-l": {"dfnID":"valdef-lab-l","dfnText":"l","external":false,"refSections":[],"url":"#valdef-lab-l"},
"valdef-lch-alpha": {"dfnID":"valdef-lch-alpha","dfnText":"alpha","external":false,"refSections":[],"url":"#valdef-lch-alpha"},
"valdef-lch-c": {"dfnID":"valdef-lch-c","dfnText":"c","external":false,"refSections":[],"url":"#valdef-lch-c"},
"valdef-lch-h": {"dfnID":"valdef-lch-h","dfnText":"h","external":false,"refSections":[],"url":"#valdef-lch-h"},
"valdef-lch-l": {"dfnID":"valdef-lch-l","dfnText":"l","external":false,"refSections":[],"url":"#valdef-lch-l"},
"valdef-rgb-alpha": {"dfnID":"valdef-rgb-alpha","dfnText":"alpha","external":false,"refSections":[],"url":"#valdef-rgb-alpha"},
"valdef-rgb-b": {"dfnID":"valdef-rgb-b","dfnText":"b","external":false,"refSections":[],"url":"#valdef-rgb-b"},
"valdef-rgb-g": {"dfnID":"valdef-rgb-g","dfnText":"g","external":false,"refSections":[],"url":"#valdef-rgb-g"},
"valdef-rgb-r": {"dfnID":"valdef-rgb-r","dfnText":"r","external":false,"refSections":[],"url":"#valdef-rgb-r"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-link-titles */
"use strict";
{
let linkTitleData = {
"https://drafts.csswg.org/css-values-4/#angle-value": "Expands to: deg | grad | rad | turn",
};

function setTypeTitles() {
	for(let el of document.querySelectorAll("a[href]")) {
		if(el.href in linkTitleData && !el.hasAttribute("title")) {
			el.setAttribute("title", linkTitleData[el.href]);
		}
	}
}

document.addEventListener("DOMContentLoaded", setTypeTitles);
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#channel-keyword": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"channel keyword","type":"dfn","url":"#channel-keyword"},
"#funcdef-color-contrast": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"color-contrast()","type":"function","url":"#funcdef-color-contrast"},
"#funcdef-color-mix": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"color-mix()","type":"function","url":"#funcdef-color-mix"},
"#funcdef-hsl": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"hsl()","type":"function","url":"#funcdef-hsl"},
"#funcdef-hwb": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"hwb()","type":"function","url":"#funcdef-hwb"},
"#funcdef-lab": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"lab()","type":"function","url":"#funcdef-lab"},
"#funcdef-lch": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"lch()","type":"function","url":"#funcdef-lch"},
"#funcdef-rgb": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"rgb()","type":"function","url":"#funcdef-rgb"},
"#origin-color": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"origin color","type":"dfn","url":"#origin-color"},
"#relative-color": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"relative color","type":"dfn","url":"#relative-color"},
"#typedef-color-adjuster": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"<color-adjuster>","type":"type","url":"#typedef-color-adjuster"},
"#typedef-hsl-adjuster": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"<hsl-adjuster>","type":"type","url":"#typedef-hsl-adjuster"},
"#typedef-hue-adjuster": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"<hue-adjuster>","type":"type","url":"#typedef-hue-adjuster"},
"#typedef-hwb-adjuster": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"<hwb-adjuster>","type":"type","url":"#typedef-hwb-adjuster"},
"#typedef-lab-adjuster": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"<lab-adjuster>","type":"type","url":"#typedef-lab-adjuster"},
"#typedef-lch-adjuster": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"<lch-adjuster>","type":"type","url":"#typedef-lch-adjuster"},
"#typedef-srgb-adjuster": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"<srgb-adjuster>","type":"type","url":"#typedef-srgb-adjuster"},
"#typedef-xyz-adjuster": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"local","text":"<xyz-adjuster>","type":"type","url":"#typedef-xyz-adjuster"},
"https://drafts.csswg.org/css-color-4/#color-space": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"color space","type":"dfn","url":"https://drafts.csswg.org/css-color-4/#color-space"},
"https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value": {"export":true,"for_":["<color>"],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"<alpha-value>","type":"type","url":"https://drafts.csswg.org/css-color-4/#typedef-color-alpha-value"},
"https://drafts.csswg.org/css-color-4/#typedef-hue": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"<hue>","type":"type","url":"https://drafts.csswg.org/css-color-4/#typedef-hue"},
"https://drafts.csswg.org/css-color-4/#valdef-color-blue": {"export":true,"for_":["<color>","<named-color>"],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"blue","type":"value","url":"https://drafts.csswg.org/css-color-4/#valdef-color-blue"},
"https://drafts.csswg.org/css-color-4/#valdef-color-darkolivegreen": {"export":true,"for_":["<color>","<named-color>"],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"darkolivegreen","type":"value","url":"https://drafts.csswg.org/css-color-4/#valdef-color-darkolivegreen"},
"https://drafts.csswg.org/css-color-4/#valdef-color-green": {"export":true,"for_":["<color>","<named-color>"],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"green","type":"value","url":"https://drafts.csswg.org/css-color-4/#valdef-color-green"},
"https://drafts.csswg.org/css-color-4/#valdef-color-red": {"export":true,"for_":["<color>","<named-color>"],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"red","type":"value","url":"https://drafts.csswg.org/css-color-4/#valdef-color-red"},
"https://drafts.csswg.org/css-color-4/#valdef-lch-lch": {"export":true,"for_":["lch()"],"level":"4","normative":true,"shortname":"css-color","spec":"css-color-4","status":"current","text":"lch","type":"value","url":"https://drafts.csswg.org/css-color-4/#valdef-lch-lch"},
"https://drafts.csswg.org/css-color-5/#funcdef-color": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"current","text":"color()","type":"function","url":"https://drafts.csswg.org/css-color-5/#funcdef-color"},
"https://drafts.csswg.org/css-color-5/#typedef-color": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-color","spec":"css-color-5","status":"current","text":"<color>","type":"type","url":"https://drafts.csswg.org/css-color-5/#typedef-color"},
"https://drafts.csswg.org/css-values-4/#angle-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<angle>","type":"type","url":"https://drafts.csswg.org/css-values-4/#angle-value"},
"https://drafts.csswg.org/css-values-4/#comb-all": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"&&","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-all"},
"https://drafts.csswg.org/css-values-4/#comb-comma": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":",","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-comma"},
"https://drafts.csswg.org/css-values-4/#comb-one": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"|","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"https://drafts.csswg.org/css-values-4/#math-function": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"math function","type":"dfn","url":"https://drafts.csswg.org/css-values-4/#math-function"},
"https://drafts.csswg.org/css-values-4/#mult-comma": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"#","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-comma"},
"https://drafts.csswg.org/css-values-4/#mult-num": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"{a}","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-num"},
"https://drafts.csswg.org/css-values-4/#mult-opt": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"?","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-opt"},
"https://drafts.csswg.org/css-values-4/#number-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<number>","type":"type","url":"https://drafts.csswg.org/css-values-4/#number-value"},
"https://drafts.csswg.org/css-values-4/#percentage-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<percentage>","type":"type","url":"https://drafts.csswg.org/css-values-4/#percentage-value"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>