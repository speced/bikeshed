<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>CSS Transitions</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/TR/css-transitions-1/" rel="canonical">
  <link href="https://drafts.csswg.org/csslogo.ico" rel="icon">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style type="text/css">
    div.prod { margin: 1em 2em; }

    table.event-handlers {
      border-collapse: collapse;
    }
    table.event-handlers th,
    table.event-handlers td {
      padding: 0.2em 1em;
    }
    table.event-handlers td {
      border: 1px solid black;
    }
  </style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-wpt */
:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">CSS Transitions</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://drafts.csswg.org/css-transitions/">https://drafts.csswg.org/css-transitions/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/css-transitions-1/">https://www.w3.org/TR/css-transitions-1/</a>
      <dt>Previous Versions:
      <dd><a href="https://www.w3.org/TR/2018/WD-css-transitions-1-20181011/" rel="prev">https://www.w3.org/TR/2018/WD-css-transitions-1-20181011/</a>
      <dd><a href="https://www.w3.org/TR/2017/WD-css-transitions-1-20171130/" rel="prev">https://www.w3.org/TR/2017/WD-css-transitions-1-20171130/</a>
      <dd><a href="https://www.w3.org/TR/2013/WD-css3-transitions-20131119/" rel="prev">https://www.w3.org/TR/2013/WD-css3-transitions-20131119/</a>
      <dt>Feedback:
      <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-transitions-1">CSSWG Issues Repository</a>
      <dd><a href="https://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;amp;product=CSS&amp;amp;component=Transitions&amp;amp;resolution=---&amp;amp;status_whiteboard=defer%20to%20level%202&amp;amp;status_whiteboard_type=notregexp">Bugzilla bugs for this level</a>
      <dd><a href="https://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;amp;product=CSS&amp;amp;component=Transitions&amp;amp;resolution=---">Bugzilla bugs for all levels</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="15393"><a class="p-name fn u-url url" href="https://dbaron.org/">L. David Baron</a> (<a class="p-org org" href="https://www.mozilla.org/">Mozilla</a>)
      <dd class="editor p-author h-card vcard" data-editor-id="42080"><a class="p-name fn u-email email" href="mailto:dino@apple.com">Dean Jackson</a> (<a class="p-org org" href="https://www.apple.com/">Apple Inc</a>)
      <dd class="editor p-author h-card vcard" data-editor-id="43194"><a class="p-name fn u-email email" href="mailto:bbirtles@mozilla.com">Brian Birtles</a> (<a class="p-org org" href="https://www.mozilla.org/">Mozilla</a>)
      <dt class="editor">Former Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="34140"><a class="p-name fn u-email email" href="mailto:hyatt@apple.com">David Hyatt</a> (<a class="p-org org" href="https://www.apple.com/">Apple Inc</a>)
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:cmarrin@apple.com">Chris Marrin</a> (<a class="p-org org" href="https://www.apple.com/">Apple Inc</a>)
      <dt>Suggest an Edit for this Spec:
      <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-transitions-1/Overview.bs">GitHub Editor</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>CSS Transitions allows property changes in CSS values to occur smoothly over a specified duration.</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a> is a language for describing the rendering of structured documents
(such as HTML and XML)
on screen, on paper, etc. 
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p>Please send feedback
	by <a href="https://github.com/w3c/csswg-drafts/issues">filing issues in GitHub</a> (preferred),
	including the spec code “css-transitions” in the title, like this:
	“[css-transitions] <i>…summary of comment…</i>”.
	All issues and comments are <a href="https://lists.w3.org/Archives/Public/public-css-archive/">archived</a>.
	Alternately, feedback can be sent to the (<a href="https://lists.w3.org/Archives/Public/www-style/">archived</a>) public mailing list <a href="mailto:www-style@w3.org?Subject=%5Bcss-transitions%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
   <p><strong>This document</strong> is expected to be relatively close to last call.  While some issues raised have yet to be addressed, new features are extremely unlikely to be considered for this level.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#values"><span class="secno">1.1</span> <span class="content">Value Definitions</span></a>
     </ol>
    <li>
     <a href="#transitions"><span class="secno">2</span> <span class="content"><span>Transitions</span></span></a>
     <ol class="toc">
      <li><a href="#transition-property-property"><span class="secno">2.1</span> <span class="content"><span>The <span class="property">transition-property</span> Property</span></span></a>
      <li><a href="#transition-duration-property"><span class="secno">2.2</span> <span class="content"><span>The <span class="property">transition-duration</span> Property</span></span></a>
      <li><a href="#transition-timing-function-property"><span class="secno">2.3</span> <span class="content"><span>The <span class="property">transition-timing-function</span> Property</span></span></a>
      <li><a href="#transition-delay-property"><span class="secno">2.4</span> <span class="content"><span>The <span class="property">transition-delay</span> Property</span></span></a>
      <li><a href="#transition-shorthand-property"><span class="secno">2.5</span> <span class="content"><span>The <span class="property">transition</span> Shorthand Property</span></span></a>
     </ol>
    <li>
     <a href="#starting"><span class="secno">3</span> <span class="content">Starting of transitions</span></a>
     <ol class="toc">
      <li><a href="#reversing"><span class="secno">3.1</span> <span class="content">Faster reversing of interrupted transitions</span></a>
     </ol>
    <li><a href="#application"><span class="secno">4</span> <span class="content">Application of transitions</span></a>
    <li><a href="#complete"><span class="secno">5</span> <span class="content">Completion of transitions</span></a>
    <li>
     <a href="#transition-events"><span class="secno">6</span> <span class="content"><span>Transition Events</span></span></a>
     <ol class="toc">
      <li>
       <a href="#interface-transitionevent"><span class="secno">6.1</span> <span class="content">Interface <code class="idl"><span>TransitionEvent</span></code></span></a>
       <ol class="toc">
        <li><a href="#interface-transitionevent-idl"><span class="secno">6.1.1</span> <span class="content">IDL Definition</span></a>
        <li><a href="#interface-transitionevent-attributes"><span class="secno">6.1.2</span> <span class="content">Attributes</span></a>
       </ol>
      <li><a href="#event-transitionevent"><span class="secno">6.2</span> <span class="content">Types of <code>TransitionEvent</code></span></a>
      <li><a href="#event-handlers-on-elements-document-objects-and-window-objects"><span class="secno">6.3</span> <span class="content">Event handlers on elements, <code>Document</code> objects, and <code>Window</code> objects</span></a>
     </ol>
    <li>
     <a href="#interface-dom"><span class="secno">7</span> <span class="content">DOM Interfaces</span></a>
     <ol class="toc">
      <li><a href="#interface-globaleventhandlers-idl"><span class="secno">7.1</span> <span class="content">IDL Definition</span></a>
     </ol>
    <li><a href="#security"><span class="secno">8</span> <span class="content">Security Considerations</span></a>
    <li><a href="#privacy"><span class="secno">9</span> <span class="content">Privacy Considerations</span></a>
    <li>
     <a href="#accessibility"><span class="secno">10</span> <span class="content">Accessibility Considerations</span></a>
     <ol class="toc">
      <li><a href="#accessibility-motion"><span class="secno">10.1</span> <span class="content">Motion</span></a>
      <li><a href="#accessibility-cascade"><span class="secno">10.2</span> <span class="content">Cascade</span></a>
     </ol>
    <li><a href="#changes"><span class="secno">11</span> <span class="content">Changes since Working Draft of 30 November 2017</span></a>
    <li><a href="#acknowledgments"><span class="secno">12</span> <span class="content">Acknowledgments</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> Document conventions</span></a>
      <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content"> Conformance classes</span></a>
      <li>
       <a href="#w3c-partial"><span class="secno"></span> <span class="content"> Partial implementations</span></a>
       <ol class="toc">
        <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span class="content"> Implementations of Unstable and Proprietary Features</span></a>
       </ol>
      <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> Non-experimental implementations</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#property-index"><span class="secno"></span> <span class="content">Property Index</span></a>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is not normative.</em> </p>
   <p> This document introduces new CSS features to enable <em>implicit transitions</em>, which describe how CSS properties can be made to change smoothly from one value to another over a given duration. </p>
   <h3 class="heading settled" data-level="1.1" id="values"><span class="secno">1.1. </span><span class="content">Value Definitions</span><a class="self-link" href="#values"></a></h3>
   <p>This specification follows the <a href="https://www.w3.org/TR/CSS2/about.html#property-defs">CSS property definition conventions</a> from <a data-link-type="biblio" href="#biblio-css2" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a> using the <a href="https://www.w3.org/TR/css-values-3/#value-defs">value definition syntax</a> from <a data-link-type="biblio" href="#biblio-css-values-3" title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</a>.
      Value types not defined in this specification are defined in CSS Values &amp; Units <span title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</span>.
      Combination with other CSS modules may expand the definitions of these value types.</p>
   <p>In addition to the property-specific values listed in their definitions,
      all properties defined in this specification
      also accept the <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#css-wide-keywords" id="ref-for-css-wide-keywords">CSS-wide keywords</a> as their property value.
      For readability they have not been repeated explicitly.</p>
   <h2 class="heading settled" data-level="2" id="transitions"><span class="secno">2. </span><span class="content"><span id="transitions-">Transitions</span></span><a class="self-link" href="#transitions"></a></h2>
   <p> Normally when the value of a CSS property changes, the rendered result is instantly updated, with the affected elements immediately changing from the old property value to the new property value. This section describes a way to specify transitions using new CSS properties. These properties are used to animate smoothly from the old state to the new state over time. </p>
   <p> For example, suppose that transitions of one second have been defined on the <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/visuren.html#propdef-left" id="ref-for-propdef-left">left</a> and <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/colors.html#propdef-background-color" id="ref-for-propdef-background-color">background-color</a> properties. The following diagram illustrates the effect of updating those properties on an element, in this case moving it to the right and changing the background from red to blue. This assumes other transition parameters still have their default values. </p>
   <figure>
     <img alt="Example showing the initial, intermediate, and final states of a box whose color and position is interpolated" src="transition-example.svg" width="518"> 
    <figcaption> Transitions of <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/visuren.html#propdef-left" id="ref-for-propdef-left①">left</a> and <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/colors.html#propdef-background-color" id="ref-for-propdef-background-color①">background-color</a>. </figcaption>
   </figure>
   <p> Transitions are a presentational effect. The <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-value">computed value</a> of a property transitions over time from the old value to the new value. Therefore if a script queries the <span id="ref-for-computed-value①">computed value</span> of a property (or other data depending on it) as it is transitioning, it will see an intermediate value that represents the current animated value of the property. </p>
   <p> The transition for a property is defined using a number of new properties. For example: </p>
   <div class="example" id="example-c14634d9">
    <a class="self-link" href="#example-c14634d9"></a> 
    <p style="display:none"> Example(s): </p>
<pre>div {
  transition-property: opacity;
  transition-duration: 2s;
}
</pre>
    The above example defines a transition on the <a class="property css" data-link-type="property">opacity</a> property that, when a new value is assigned to it, will cause a smooth change between the old value and the new value over a period of two seconds. 
   </div>
   <p> Each of the transition properties accepts a comma-separated list, allowing multiple transitions to be defined, each acting on a different property. In this case, the individual transitions take their parameters from the same index in all the lists. For example: </p>
   <div class="example" id="example-0825db11">
    <a class="self-link" href="#example-0825db11"></a> 
    <p style="display:none"> Example(s): </p>
<pre>div {
  transition-property: opacity, left;
  transition-duration: 2s, 4s;
}

</pre>
    This will cause the <a class="property css" data-link-type="property">opacity</a> property to transition over a period of two seconds and the left property to transition over a period of four seconds. 
   </div>
   <p id="list-matching"> In the case where the lists of values in transition properties
        do not have the same length, the length of the <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property">transition-property</a> list determines the number of items in
        each list examined when starting transitions.  The lists are
        matched up from the first value: excess values at the end are
        not used.  If one of the other properties doesn’t have enough
        comma-separated values to match the number of values of <span class="property" id="ref-for-propdef-transition-property①">transition-property</span>, the user agent must calculate its used value by
        repeating the list of values until there are enough.  This
        truncation or repetition does not affect the computed value. <span class="note"> Note: This is analogous to the behavior of the <a class="property css" data-link-type="property">background-*</a> properties, with <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image" id="ref-for-propdef-background-image">background-image</a> analogous to <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property②">transition-property</a>. </span> </p>
   <div class="example" id="example-d94cbd75">
    <a class="self-link" href="#example-d94cbd75"></a> 
    <p style="display:none"> Example(s): </p>
<pre>div {
  transition-property: opacity, left, top, width;
  transition-duration: 2s, 1s;
}
</pre>
    The above example defines a transition on the <a class="property css" data-link-type="property">opacity</a> property of 2 seconds duration, a      transition on the <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/visuren.html#propdef-left" id="ref-for-propdef-left②">left</a> property of 1
      second duration, a transition on the <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/visuren.html#propdef-top" id="ref-for-propdef-top">top</a> property of 2 seconds duration and a
      transition on the <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/visudet.html#propdef-width" id="ref-for-propdef-width">width</a> property of 1
      second duration. 
   </div>
   <p> While authors can use transitions to create dynamically changing content,
        dynamically changing content can lead to seizures in some users.
        For information on how to avoid content that can lead to seizures, see <a href="https://www.w3.org/TR/WCAG20/#seizure">Guideline 2.3:
        Seizures:
        Do not design content in a way that is known to cause seizures</a> (<a data-link-type="biblio" href="#biblio-wcag20" title="Web Content Accessibility Guidelines (WCAG) 2.0">[WCAG20]</a>). </p>
   <h3 class="heading settled" data-level="2.1" id="transition-property-property"><span class="secno">2.1. </span><span class="content"><span id="the-transition-property-property-">The <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property③">transition-property</a> Property</span></span><a class="self-link" href="#transition-property-property"></a></h3>
   <p> The <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property④">transition-property</a> property specifies the name of the CSS property to which the transition is applied. </p>
   <table class="def propdef" data-link-for-hint="transition-property">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-transition-property">transition-property</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">none <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one">|</a> <a class="production css" data-link-type="type" href="#single-transition-property" id="ref-for-single-transition-property">&lt;single-transition-property></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-comma" id="ref-for-mult-comma">#</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>all 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content" title="Includes ::before and ::after pseudo-elements.">all elements</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>the keyword <a class="css" data-link-type="maybe" href="#valdef-transition-property-none" id="ref-for-valdef-transition-property-none">none</a> else a list of identifiers 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>not animatable 
   </table>
   <div class="prod"> <dfn class="dfn-paneled css" data-dfn-type="type" data-export id="single-transition-property">&lt;single-transition-property></dfn> = <a class="css" data-link-type="maybe" href="#valdef-transition-property-all" id="ref-for-valdef-transition-property-all">all</a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#identifier-value" id="ref-for-identifier-value">&lt;custom-ident></a> </div>
   <p> A value of <dfn class="dfn-paneled css" data-dfn-for="transition-property" data-dfn-type="value" data-export id="valdef-transition-property-none">none</dfn> means that no property will transition.
        Otherwise, a list of properties to be transitioned, or the
        keyword <dfn class="dfn-paneled css" data-dfn-for="transition-property" data-dfn-type="value" data-export id="valdef-transition-property-all">all</dfn> which indicates that all properties are to be
        transitioned, is given. </p>
   <p> If one of the identifiers listed is not a recognized property
        name, the implementation must
        still start transitions on the animatable properties in the
        list using the duration, delay, and timing function at their
        respective indices in the lists for <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration">transition-duration</a>, <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay">transition-delay</a>, and <a class="property css" data-link-type="property" href="#propdef-transition-timing-function" id="ref-for-propdef-transition-timing-function">transition-timing-function</a>.  In other
        words, unrecognized properties must be kept in
        the list to preserve the matching of indices. </p>
   <p> The <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#identifier-value" id="ref-for-identifier-value①">&lt;custom-ident></a> production in <a class="production css" data-link-type="type" href="#single-transition-property" id="ref-for-single-transition-property①">&lt;single-transition-property></a> also excludes the keyword <a class="css" data-link-type="maybe" href="#valdef-transition-property-none" id="ref-for-valdef-transition-property-none①">none</a>,
        in addition to the keywords always excluded from <span class="production" id="ref-for-identifier-value②">&lt;custom-ident></span>.
        This means that <span class="css" id="ref-for-valdef-transition-property-none②">none</span>, <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-cascade-5/#valdef-all-inherit" id="ref-for-valdef-all-inherit">inherit</a>, and <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-cascade-5/#valdef-all-initial" id="ref-for-valdef-all-initial">initial</a> are not
        permitted as items within a list of more that one identifier;
        any list that uses them is syntactically invalid. </p>
   <p> For the keyword <a class="css" data-link-type="maybe" href="#valdef-transition-property-all" id="ref-for-valdef-transition-property-all①">all</a>,
        or if one of the identifiers listed is a
        shorthand property, implementations must start transitions for
        all its longhand sub-properties (or, for <span class="css" id="ref-for-valdef-transition-property-all②">all</span>, all properties), using the duration, delay,
        and timing function at the index corresponding to the shorthand. </p>
   <p> If a property is specified multiple times in the value of <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property⑤">transition-property</a> (either on its own, via a shorthand that
        contains it, or via the <a class="css" data-link-type="maybe" href="#valdef-transition-property-all" id="ref-for-valdef-transition-property-all③">all</a> value), then the transition that
        starts uses the duration, delay, and timing function at the
        index corresponding to the <em>last</em> item in the value of <span class="property" id="ref-for-propdef-transition-property⑥">transition-property</span> that calls for animating that property. </p>
   <p class="note" role="note"> Note:  The <a class="css" data-link-type="maybe" href="#valdef-transition-property-all" id="ref-for-valdef-transition-property-all④">all</a> value and <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-cascade-5/#propdef-all" id="ref-for-propdef-all">all</a> shorthand
        property work in similar ways, so the <span class="css" id="ref-for-valdef-transition-property-all⑤">all</span> value is just like a shorthand that
        covers all properties. </p>
   <h3 class="heading settled" data-level="2.2" id="transition-duration-property"><span class="secno">2.2. </span><span class="content"><span id="the-transition-duration-property-">The <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration①">transition-duration</a> Property</span></span><a class="self-link" href="#transition-duration-property"></a></h3>
   <p> The <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration②">transition-duration</a> property defines the length of time that a transition takes. </p>
   <table class="def propdef" data-link-for-hint="transition-duration">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-transition-duration">transition-duration</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod"><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#time-value" id="ref-for-time-value">&lt;time></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-comma" id="ref-for-mult-comma①">#</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td><span class="css">0s</span> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content" title="Includes ::before and ::after pseudo-elements.">all elements</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>list, each item a duration 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>not animatable 
   </table>
   <p> This property specifies how long the transition from the old value to the new value should take. By default the value is <span class="css">0s</span>, meaning that the transition is immediate (i.e. there will be no animation). A negative value for <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration③">transition-duration</a> renders the declaration invalid. </p>
   <h3 class="heading settled" data-level="2.3" id="transition-timing-function-property"><span class="secno">2.3. </span><span class="content"><span id="transition-timing-function_tag">The <a class="property css" data-link-type="property" href="#propdef-transition-timing-function" id="ref-for-propdef-transition-timing-function①">transition-timing-function</a> Property</span></span><a class="self-link" href="#transition-timing-function-property"></a></h3>
   <p> The <a class="property css" data-link-type="property" href="#propdef-transition-timing-function" id="ref-for-propdef-transition-timing-function②">transition-timing-function</a> property
        describes how the intermediate values used during a transition will be
        calculated. It allows for a transition to change speed over its
        duration. These effects are commonly called <em>easing</em> functions. </p>
   <p> Timing functions are defined in the separate CSS Easing Functions module <a data-link-type="biblio" href="#biblio-css-easing-1" title="CSS Easing Functions Level 1">[css-easing-1]</a>.
        The <a data-link-type="dfn" href="https://drafts.csswg.org/css-easing-2/#input-progress-value" id="ref-for-input-progress-value">input progress value</a> used is the percentage
        of the transition duration, and the <a data-link-type="dfn" href="https://drafts.csswg.org/css-easing-2/#output-progress-value" id="ref-for-output-progress-value">output progress
        value</a> is used as the <var>p</var> value when <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#interpolation" id="ref-for-interpolation">interpolating</a> the property value (see <a href="#application">§ 4 Application of transitions</a>). </p>
   <table class="def propdef" data-link-for-hint="transition-timing-function">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-transition-timing-function">transition-timing-function</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod"><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-easing-2/#typedef-easing-function" id="ref-for-typedef-easing-function">&lt;easing-function></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-comma" id="ref-for-mult-comma②">#</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td><span class="css">ease</span> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content" title="Includes ::before and ::after pseudo-elements.">all elements</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>not animatable 
   </table>
   <h3 class="heading settled" data-level="2.4" id="transition-delay-property"><span class="secno">2.4. </span><span class="content"><span id="the-transition-delay-property-">The <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay①">transition-delay</a> Property</span></span><a class="self-link" href="#transition-delay-property"></a></h3>
   <p> The <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay②">transition-delay</a> property defines when the transition will start. It allows a transition to begin execution after some period of time from when it is applied. A <span class="property" id="ref-for-propdef-transition-delay③">transition-delay</span> value of <span class="css">0s</span> means the transition will execute as soon as the property is changed. Otherwise, the value specifies an offset from the moment the property is changed, and the transition will delay execution by that offset. </p>
   <p> If the value for <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay④">transition-delay</a> is a negative time offset then the transition will execute the moment the property is changed, but will appear to have begun execution at the specified offset. That is, the transition will appear to begin part-way through its play cycle. In the case where a transition has implied starting values and a negative <span class="property" id="ref-for-propdef-transition-delay⑤">transition-delay</span>, the starting values are taken from the moment the property is changed. </p>
   <table class="def propdef" data-link-for-hint="transition-delay">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-transition-delay">transition-delay</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod"><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#time-value" id="ref-for-time-value①">&lt;time></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-comma" id="ref-for-mult-comma③">#</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td><span class="css">0s</span> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content" title="Includes ::before and ::after pseudo-elements.">all elements</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>list, each item a duration 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>not animatable 
   </table>
   <h3 class="heading settled" data-level="2.5" id="transition-shorthand-property"><span class="secno">2.5. </span><span class="content"><span id="the-transition-shorthand-property-">The <a class="property css" data-link-type="property" href="#propdef-transition" id="ref-for-propdef-transition">transition</a> Shorthand Property</span></span><a class="self-link" href="#transition-shorthand-property"></a></h3>
   <p> The <a class="property css" data-link-type="property" href="#propdef-transition" id="ref-for-propdef-transition①">transition</a> shorthand property combines the four properties described above into a single property. </p>
   <table class="def propdef" data-link-for-hint="transition">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-transition">transition</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod"><a class="production css" data-link-type="type" href="#single-transition" id="ref-for-single-transition">&lt;single-transition></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-comma" id="ref-for-mult-comma④">#</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>see individual properties 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
      <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content" title="Includes ::before and ::after pseudo-elements.">all elements</a> 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>N/A 
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>see individual properties 
     <tr>
      <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
      <td>per grammar 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animatable:</a>
      <td>no 
     <tr>
      <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
      <td>not animatable 
   </table>
   <div class="prod"> <dfn class="dfn-paneled css" data-dfn-type="type" data-export id="single-transition">&lt;single-transition></dfn> = [ <a class="css" data-link-type="maybe" href="#valdef-transition-property-none" id="ref-for-valdef-transition-property-none③">none</a> <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one②">|</a> <a class="production css" data-link-type="type" href="#single-transition-property" id="ref-for-single-transition-property②">&lt;single-transition-property></a> ] <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-any" id="ref-for-comb-any">||</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#time-value" id="ref-for-time-value②">&lt;time></a> <span id="ref-for-comb-any①">||</span> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-easing-2/#typedef-easing-function" id="ref-for-typedef-easing-function①">&lt;easing-function></a> <span id="ref-for-comb-any②">||</span> <span class="production" id="ref-for-time-value③">&lt;time></span> </div>
   <p> Note that order is important within the items in this property:
        the first value that can be parsed as a time is assigned to the
        transition-duration,
        and the second value that can be parsed as a time is assigned to
        transition-delay. </p>
   <p> If there is more than one <a class="production css" data-link-type="type" href="#single-transition" id="ref-for-single-transition①">&lt;single-transition></a> in the shorthand,
        and any of the transitions has <a class="css" data-link-type="maybe" href="#valdef-transition-property-none" id="ref-for-valdef-transition-property-none④">none</a> as the <a class="production css" data-link-type="type" href="#single-transition-property" id="ref-for-single-transition-property③">&lt;single-transition-property></a>,
        then the declaration is invalid. </p>
   <h2 class="heading settled" data-level="3" id="starting"><span class="secno">3. </span><span class="content">Starting of transitions</span><a class="self-link" href="#starting"></a></h2>
   <p> Implementations must maintain a set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="running transition" id="running-transition">running transitions</dfn>,
        each of which applies to a specific element and non-shorthand
        property.  Each of these transitions also has a <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="transition-start-time">start time</dfn>, <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="transition-end-time">end time</dfn>, <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="transition-start-value">start value</dfn>, <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="transition-end-value">end value</dfn>, <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="transition-reversing-adjusted-start-value">reversing-adjusted start value</dfn>, and <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="transition-reversing-shortening-factor">reversing shortening factor</dfn>.
        Transitions are added to this set as described in this section,
        and are removed from this set
        when they <a data-link-type="dfn">complete</a> or when implementations are required to <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="transition-cancel">cancel</dfn> them. <span class="note"> For the rationale behind the <a data-link-type="dfn" href="#transition-reversing-adjusted-start-value" id="ref-for-transition-reversing-adjusted-start-value">reversing-adjusted start value</a> and <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor">reversing shortening factor</a>, see <a href="#reversing">§ 3.1 Faster reversing of interrupted transitions</a>. </span> </p>
   <p> Implementations must also maintain a set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="completed transition" id="completed-transition">completed transitions</dfn>,
        each of which
        (like <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition">running transitions</a>)
        applies to a specific element and non-shorthand property. <span class="note"> This specification maintains the invariant that
          there is never both a <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition①">running transition</a> and
          a <a data-link-type="dfn" href="#completed-transition" id="ref-for-completed-transition">completed transition</a> for the same property and element. </span> </p>
   <p> If an element is no longer in the document,
        implementations must <a data-link-type="dfn">cancel</a> any <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition②">running transitions</a> on it and remove transitions on it from the <a data-link-type="dfn" href="#completed-transition" id="ref-for-completed-transition①">completed transitions</a>. </p>
   <div class="note" role="note">
    <p> This set of completed transitions
          needs to be maintained
          in order to prevent
          transitions from repeating themselves in certain cases,
          i.e., to maintain the invariant
          that this specification tries to maintain
          that unrelated style changes do not trigger transitions. </p>
    <p class="example" id="example-4b88a0cc"><a class="self-link" href="#example-4b88a0cc"></a> An example where maintaining the set of completed transitions
          is necessary would be a transition on
          an inherited property,
          where the parent specifies a transition of that property for
          a longer duration (say, <a class="css" data-link-type="propdesc" href="#propdef-transition" id="ref-for-propdef-transition②">transition: 4s text-indent</a>)
          and a child element that inherits the parent’s value specifies
          a transition of the same property for a shorter duration
          (say, <span class="css" id="ref-for-propdef-transition③">transition: 1s text-indent</span>).
          Without the maintenance of this set of completed transitions,
          implementations could start additional transitions on the child
          after the initial 1 second transition on the child completes. </p>
   </div>
   <p> Various things can cause the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-value②">computed values</a> of properties
        on an element to change.
        These include
        insertion and removal of elements from the document tree
        (which both changes whether those elements have <span id="ref-for-computed-value③">computed values</span> and
        can change the styles of other elements through selector matching),
        changes to the document tree that cause
        changes to which selectors match elements,
        changes to style sheets or style attributes,
        and other things.
        This specification does not define when <span id="ref-for-computed-value④">computed values</span> are updated,
        beyond saying that implementations must not
        use, present, or display something resulting from the CSS
        cascading, value computation, and inheritance process <a data-link-type="biblio" href="#biblio-css3cascade" title="CSS Cascading and Inheritance Level 3">[CSS3CASCADE]</a> without updating the <span id="ref-for-computed-value⑤">computed value</span> (which means merely that implementations cannot avoid
        meeting requirements of this specification
        by claiming not to have updated the <span id="ref-for-computed-value⑥">computed value</span> as part of handling a style change).
        However,
        when an implementation updates the <span id="ref-for-computed-value⑦">computed value</span> of a
        property on an element
        to reflect one of these changes,
        or computes the <span id="ref-for-computed-value⑧">computed value</span> of a property on an element
        newly added to the document,
        it must update the <span id="ref-for-computed-value⑨">computed value</span> for all properties and elements to reflect all
        of these changes at the same time
        (or at least it must be undetectable that it was done at a
        different time).
        This processing of a set of simultaneous style changes is called a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="style-change-event">style change event</dfn>.
        (Implementations typically have a <a data-link-type="dfn" href="#style-change-event" id="ref-for-style-change-event">style change event</a> to
        correspond with their desired screen refresh rate,
        and when up-to-date computed style or layout information is needed
        for a script API that depends on it.) </p>
   <p> Since this specification does not define
        when a <a data-link-type="dfn" href="#style-change-event" id="ref-for-style-change-event①">style change event</a> occurs,
        and thus what changes to computed values are considered simultaneous,
        authors should be aware that changing any of the transition
        properties a small amount of time after making a change that
        might transition can result in behavior that varies between
        implementations, since the changes might be considered
        simultaneous in some implementations but not others. </p>
   <p> When a <a data-link-type="dfn" href="#style-change-event" id="ref-for-style-change-event②">style change event</a> occurs,
        implementations must start transitions based on
        the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-value①⓪">computed values</a> that changed in that event.
        If an element is not in the document during that
        style change event or was not in the document during
        the previous style change event,
        then transitions are not started for that element
        in that style change event.
        Otherwise,
        define the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="before-change-style">before-change style</dfn> as
        the <span id="ref-for-computed-value①①">computed values</span> of all properties on the element as of
        the previous <span id="ref-for-style-change-event③">style change event</span>,
        except with any styles derived from declarative
        animations such as CSS Transitions, CSS Animations
        (<a data-link-type="biblio" href="#biblio-css3-animations" title="CSS Animations Level 1">[CSS3-ANIMATIONS]</a>),
        and SMIL Animations (<a data-link-type="biblio" href="#biblio-smil-animation" title="SMIL Animation">[SMIL-ANIMATION]</a>, <a data-link-type="biblio" href="#biblio-svg11" title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG11]</a>)
        updated to the current time.
        Likewise, define the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="after-change-style">after-change style</dfn> as
        the <span id="ref-for-computed-value①②">computed values</span> of all properties
        on the element based on the information
        known at the start of that <span id="ref-for-style-change-event④">style change event</span>,
        but using the computed values of the <a class="property css" data-link-type="property">animation-*</a> properties from the <a data-link-type="dfn" href="#before-change-style" id="ref-for-before-change-style">before-change style</a>,
        excluding any styles from CSS Transitions in the computation,
        and inheriting from
        the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style">after-change style</a> of the parent.
        Note that this means the <span id="ref-for-after-change-style①">after-change style</span> does not differ from
        the <span id="ref-for-before-change-style①">before-change style</span> due to newly created or canceled CSS
        Animations. </p>
   <div class="note" role="note">
    <p> Note that this definition of the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style②">after-change style</a> means that a single change
          can start a transition on the same property
          on both an ancestor element and its descendant element.
          This can happen when a property change is inherited
          from one element with <a class="property css" data-link-type="property">transition-*</a> properties
          that say to animate the changing property
          to another element with <span class="property">transition-*</span> properties
          that also say to animate the changing property. </p>
    <p> When this happens, both transitions will run,
          and the transition on the descendant will override
          the transition on the ancestor
          because of the normal
          CSS cascading and inheritance rules (<a data-link-type="biblio" href="#biblio-css3cascade" title="CSS Cascading and Inheritance Level 3">[CSS3CASCADE]</a>). </p>
    <p> If the transition on the descendant completes before
          the transition on the ancestor,
          the descendant will then resume inheriting
          the (still transitioning) value from its parent.
          This effect is likely not a desirable effect,
          but it is essentially doing what the author asked for. </p>
   </div>
   <p> For each element with a <a data-link-type="dfn" href="#before-change-style" id="ref-for-before-change-style②">before-change style</a> and
        an <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style③">after-change style</a>,
        and each property (other than shorthands),
        define the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="matching-transition-property-value">matching transition-property value</dfn> as
        the last value in the <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property⑦">transition-property</a> in the element’s <span id="ref-for-after-change-style④">after-change style</span> that matches the property,
        as described in <a href="#transition-property-property">§ 2.1 The transition-property Property</a>.
        If there is such a value, then corresponding to it, there is
        a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="matching-transition-duration">matching transition duration</dfn>,
        a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="matching-transition-delay">matching transition delay</dfn>, and
        a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="matching-transition-timing-function">matching transition timing function</dfn> in the values in the <span id="ref-for-after-change-style⑤">after-change style</span> of <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration④">transition-duration</a>, <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay⑥">transition-delay</a>, and <a class="property css" data-link-type="property" href="#propdef-transition-timing-function" id="ref-for-propdef-transition-timing-function③">transition-timing-function</a> (see <a href="#list-matching">the rules on matching lists</a>).
        Define the <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="transition-combined-duration">combined duration</dfn> of the transition
        as the sum of max(<a data-link-type="dfn" href="#matching-transition-duration" id="ref-for-matching-transition-duration">matching transition duration</a>, <span class="css">0s</span>) and
        the <a data-link-type="dfn" href="#matching-transition-delay" id="ref-for-matching-transition-delay">matching transition delay</a>. </p>
   <p>When comparing the <a data-link-type="dfn" href="#before-change-style" id="ref-for-before-change-style③">before-change style</a> and <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style⑥">after-change style</a> for a given property,
      the property values are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="transitionable">transitionable</dfn> if they have an <a data-link-type="dfn" href="https://drafts.csswg.org/web-animations-1/#animation-type" id="ref-for-animation-type">animation type</a> that is <em>neither</em> <a data-link-type="dfn" href="https://drafts.csswg.org/web-animations-1/#not-animatable" id="ref-for-not-animatable">not animatable</a> <em>nor</em> <a data-link-type="dfn" href="https://drafts.csswg.org/web-animations-1/#discrete" id="ref-for-discrete">discrete</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Even if a <em>property</em> is defined to have an <a data-link-type="dfn" href="https://drafts.csswg.org/web-animations-1/#animation-type" id="ref-for-animation-type①">animation type</a> that is <em>not</em> <a data-link-type="dfn" href="https://drafts.csswg.org/web-animations-1/#discrete" id="ref-for-discrete①">discrete</a>,
      for a particular pair of <em>property values</em> the <span id="ref-for-animation-type②">animation type</span> may be <span id="ref-for-discrete②">discrete</span>.
      For example,
      the <span id="ref-for-animation-type③">animation type</span> of the <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-box-shadow" id="ref-for-propdef-box-shadow">box-shadow</a> property is <a data-link-type="dfn" href="https://drafts.csswg.org/web-animations-1/#combining-shadow-lists" id="ref-for-combining-shadow-lists">shadow list</a>,
      which defines that
      when the <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css3-background/#shadow-inset" id="ref-for-shadow-inset">inset</a> keyword is absent in one value
      but present in the other, <span id="ref-for-discrete③">discrete</span> animation is used.
      As a result <span class="css">0px 0px black</span> and <span class="css">inset 10px 10px black</span> are <em>not</em> <a data-link-type="dfn" href="#transitionable" id="ref-for-transitionable">transitionable</a>.</p>
   <p>For each element and property, the implementation must act
      as follows:</p>
   <ol>
    <li>
      If all of the following are true: 
     <ul>
      <li> the element does not have
            a <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition③">running transition</a> for the property, 
      <li> the <a data-link-type="dfn" href="#before-change-style" id="ref-for-before-change-style④">before-change style</a> is different from
            the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style⑦">after-change style</a> for that property,
            and the values for the property are <a data-link-type="dfn" href="#transitionable" id="ref-for-transitionable①">transitionable</a>, 
      <li> the element does not have a <a data-link-type="dfn" href="#completed-transition" id="ref-for-completed-transition②">completed transition</a> for the property
            or the <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value">end value</a> of the <span id="ref-for-completed-transition③">completed transition</span> is different from the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style⑧">after-change style</a> for the property, 
      <li> there is a <a data-link-type="dfn" href="#matching-transition-property-value" id="ref-for-matching-transition-property-value">matching transition-property value</a>, and 
      <li> the <a data-link-type="dfn" href="#transition-combined-duration" id="ref-for-transition-combined-duration">combined duration</a> is greater than <span class="css">0s</span>, 
     </ul>
      then implementations must
        remove the <a data-link-type="dfn" href="#completed-transition" id="ref-for-completed-transition④">completed transition</a> (if present) from the set
        of completed transitions and
        start a transition whose: 
     <ul>
      <li> <a data-link-type="dfn" href="#transition-start-time" id="ref-for-transition-start-time">start time</a> is
            the time of the <a data-link-type="dfn" href="#style-change-event" id="ref-for-style-change-event⑤">style change event</a> plus
            the <a data-link-type="dfn" href="#matching-transition-delay" id="ref-for-matching-transition-delay①">matching transition delay</a>, 
      <li> <a data-link-type="dfn">end time</a> is
            the <a data-link-type="dfn" href="#transition-start-time" id="ref-for-transition-start-time①">start time</a> plus
            the <a data-link-type="dfn" href="#matching-transition-duration" id="ref-for-matching-transition-duration①">matching transition duration</a>, 
      <li> <a data-link-type="dfn" href="#transition-start-value" id="ref-for-transition-start-value">start value</a> is
            the value of the transitioning property
            in the <a data-link-type="dfn" href="#before-change-style" id="ref-for-before-change-style⑤">before-change style</a>, 
      <li> <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value①">end value</a> is
            the value of the transitioning property
            in the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style⑨">after-change style</a>, 
      <li> <a data-link-type="dfn" href="#transition-reversing-adjusted-start-value" id="ref-for-transition-reversing-adjusted-start-value①">reversing-adjusted start value</a> is the same as
            the <a data-link-type="dfn" href="#transition-start-value" id="ref-for-transition-start-value①">start value</a>, and 
      <li> <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor①">reversing shortening factor</a> is 1. 
     </ul>
    <li> Otherwise,
        if the element has a <a data-link-type="dfn" href="#completed-transition" id="ref-for-completed-transition⑤">completed transition</a> for the property
        and the <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value②">end value</a> of the <span id="ref-for-completed-transition⑥">completed transition</span> is different from the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style①⓪">after-change style</a> for the property,
        then implementations must
        remove the <span id="ref-for-completed-transition⑦">completed transition</span> from the set of <span id="ref-for-completed-transition⑧">completed transitions</span>. 
    <li> If the element has a <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition④">running transition</a> or <a data-link-type="dfn" href="#completed-transition" id="ref-for-completed-transition⑨">completed transition</a> for the property,
        and there is <strong>not</strong> a <a data-link-type="dfn" href="#matching-transition-property-value" id="ref-for-matching-transition-property-value①">matching transition-property value</a>,
        then implementations must <a data-link-type="dfn">cancel</a> the <span id="ref-for-running-transition⑤">running transition</span> or remove the <span id="ref-for-completed-transition①⓪">completed transition</span> from the set of <span id="ref-for-completed-transition①①">completed transitions</span>. 
    <li>
      If the element has a <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition⑥">running transition</a> for the property,
        there is a <a data-link-type="dfn" href="#matching-transition-property-value" id="ref-for-matching-transition-property-value②">matching transition-property value</a>,
        and the <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value③">end value</a> of the <span id="ref-for-running-transition⑦">running transition</span> is <strong>not</strong> equal to the value of the property in the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style①①">after-change style</a>, then: 
     <ol>
      <li> If the <a data-link-type="dfn" href="#current-value" id="ref-for-current-value">current value</a> of the property
            in the <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition⑧">running transition</a> is equal to
            the value of the property in the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style①②">after-change style</a>,
            or if these two values are not <a data-link-type="dfn" href="#transitionable" id="ref-for-transitionable②">transitionable</a>,
            then implementations must <a data-link-type="dfn">cancel</a> the <span id="ref-for-running-transition⑨">running transition</span>. 
      <li> Otherwise, if the <a data-link-type="dfn" href="#transition-combined-duration" id="ref-for-transition-combined-duration①">combined duration</a> is
            less than or equal to <span class="css">0s</span>,
            or if the <a data-link-type="dfn" href="#current-value" id="ref-for-current-value①">current value</a> of the property in the <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition①⓪">running transition</a> is not <a data-link-type="dfn" href="#transitionable" id="ref-for-transitionable③">transitionable</a> with
            the value of the property in the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style①③">after-change style</a>,
            then implementations must <a data-link-type="dfn">cancel</a> the <span id="ref-for-running-transition①①">running transition</span>. 
      <li>
        Otherwise, if the <a data-link-type="dfn" href="#transition-reversing-adjusted-start-value" id="ref-for-transition-reversing-adjusted-start-value②">reversing-adjusted start value</a> of the <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition①②">running transition</a> is the same as the value of
            the property in the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style①④">after-change style</a> <span class="note">(see the <a href="#reversing">section on reversing of
            transitions</a> for why these case exists)</span>,
            implementations must <a data-link-type="dfn">cancel</a> the <span id="ref-for-running-transition①③">running transition</span> and
            start a new transition whose: 
       <ul>
        <li> <a data-link-type="dfn" href="#transition-reversing-adjusted-start-value" id="ref-for-transition-reversing-adjusted-start-value③">reversing-adjusted start value</a> is
                the <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value④">end value</a> of the <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition①④">running transition</a> <span class="note">(Note: This represents the logical start state of
                the transition, and allows some calculations to ignore that
                the transition started before that state was reached, which
                in turn allows repeated reversals of the same transition to
                work correctly),</span> 
        <li>
          <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor②">reversing shortening factor</a> is the absolute value, clamped to the range [0, 1],
                of the sum of: 
         <ol>
          <li>the output of the timing function of the old transition
                  at the time of the <a data-link-type="dfn" href="#style-change-event" id="ref-for-style-change-event⑥">style change event</a>,
                  times the <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor③">reversing shortening factor</a> of the
                  old transition
          <li>1 minus the <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor④">reversing shortening factor</a> of
                  the old transition.
         </ol>
          <span class="note">Note: This represents the portion of the
                space between the <a data-link-type="dfn" href="#transition-reversing-adjusted-start-value" id="ref-for-transition-reversing-adjusted-start-value④">reversing-adjusted start value</a> and the <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value⑤">end value</a> that the old transition has
                traversed (in amounts of the value, not time), except with the
                absolute value and clamping to handle timing functions that
                have y1 or y2 outside the range [0, 1].</span> 
        <li>
          <a data-link-type="dfn" href="#transition-start-time" id="ref-for-transition-start-time②">start time</a> is
                the time of the <a data-link-type="dfn" href="#style-change-event" id="ref-for-style-change-event⑦">style change event</a> plus: 
         <ol>
          <li>if the <a data-link-type="dfn" href="#matching-transition-delay" id="ref-for-matching-transition-delay②">matching transition delay</a> is nonnegative,
                      the <span id="ref-for-matching-transition-delay③">matching transition delay</span>, or 
          <li>if the <a data-link-type="dfn" href="#matching-transition-delay" id="ref-for-matching-transition-delay④">matching transition delay</a> is negative,
                      the product of
                      the new transition’s <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor⑤">reversing shortening factor</a> and
                      the <span id="ref-for-matching-transition-delay⑤">matching transition delay</span>, 
         </ol>
        <li> <a data-link-type="dfn">end time</a> is
                the <a data-link-type="dfn" href="#transition-start-time" id="ref-for-transition-start-time③">start time</a> plus the product of
                the <a data-link-type="dfn" href="#matching-transition-duration" id="ref-for-matching-transition-duration②">matching transition duration</a> and
                the new transition’s <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor⑥">reversing shortening factor</a>, 
        <li> <a data-link-type="dfn" href="#transition-start-value" id="ref-for-transition-start-value②">start value</a> is
                the <a data-link-type="dfn" href="#current-value" id="ref-for-current-value②">current value</a> of the property
                in the <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition①⑤">running transition</a>, 
        <li> <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value⑥">end value</a> is
                the value of the property
                in the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style①⑤">after-change style</a>, 
       </ul>
      <li>
        Otherwise, implementations must <a data-link-type="dfn">cancel</a> the <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition①⑥">running transition</a> and start a new transition whose: 
       <ul>
        <li> <a data-link-type="dfn" href="#transition-start-time" id="ref-for-transition-start-time④">start time</a> is
                the time of the <a data-link-type="dfn" href="#style-change-event" id="ref-for-style-change-event⑧">style change event</a> plus
                the <a data-link-type="dfn" href="#matching-transition-delay" id="ref-for-matching-transition-delay⑥">matching transition delay</a>, 
        <li> <a data-link-type="dfn">end time</a> is
                the <a data-link-type="dfn" href="#transition-start-time" id="ref-for-transition-start-time⑤">start time</a> plus
                the <a data-link-type="dfn" href="#matching-transition-duration" id="ref-for-matching-transition-duration③">matching transition duration</a>, 
        <li> <a data-link-type="dfn" href="#transition-start-value" id="ref-for-transition-start-value③">start value</a> is
                the <a data-link-type="dfn" href="#current-value" id="ref-for-current-value③">current value</a> of the property
                in the <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition①⑦">running transition</a>, 
        <li> <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value⑦">end value</a> is
                the value of the property
                in the <a data-link-type="dfn" href="#after-change-style" id="ref-for-after-change-style①⑥">after-change style</a>, 
        <li> <a data-link-type="dfn" href="#transition-reversing-adjusted-start-value" id="ref-for-transition-reversing-adjusted-start-value⑤">reversing-adjusted start value</a> is the same as
                the <a data-link-type="dfn" href="#transition-start-value" id="ref-for-transition-start-value④">start value</a>, and 
        <li> <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor⑦">reversing shortening factor</a> is 1. 
       </ul>
     </ol>
   </ol>
   <div class="note" role="note">
    <p> Note that the above rules mean that
          when the computed value of an animatable property changes,
          the transitions that start are based on the
          values of the <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property⑧">transition-property</a>, <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration⑤">transition-duration</a>, <a class="property css" data-link-type="property" href="#propdef-transition-timing-function" id="ref-for-propdef-transition-timing-function④">transition-timing-function</a>, and <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay⑦">transition-delay</a> properties
          at the time the animatable property would first have its new
          computed value.
          This means that when one of these <a class="property css" data-link-type="property">transition-*</a> properties
          changes at the same time as
          a property whose change might transition,
          it is the <em>new</em> values of the <span class="property">transition-*</span> properties
          that control the transition. </p>
    <div class="example" id="manual-reversing-example">
     <a class="self-link" href="#manual-reversing-example"></a> 
     <p style="display:none"> Example(s): </p>
     <p>This provides a way for authors to specify different values
          of the <a class="property css" data-link-type="property">transition-*</a> properties for the “forward”
          and “reverse” transitions,
          when the transitions are between two states
          (but see <a href="#reversing">below</a> for special reversing behavior when
          an <em>incomplete</em> transition is interrupted).  Authors can
          specify the value of <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration⑥">transition-duration</a>, <a class="property css" data-link-type="property" href="#propdef-transition-timing-function" id="ref-for-propdef-transition-timing-function⑤">transition-timing-function</a>, or <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay⑧">transition-delay</a> in the same
          rule where they specify the value that triggers the transition,
          or can change these properties at the same time as they change
          the property that triggers the transition.  Since it’s the new
          values of these <span class="property">transition-*</span> properties that affect the
          transition, these values will be used for the transitions <em>to</em> the associated transitioning values.  For example: </p>
<pre>li {
  transition: background-color linear 1s;
  background: blue;
}
li:hover {
  background-color: green;
  transition-duration: 2s; /* applies to the transition *to* the :hover state */
}</pre>
     <p> When a list item with these style rules enters the :hover
            state, the computed <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration⑦">transition-duration</a> at the time that <a class="property css" data-link-type="property" href="https://www.w3.org/TR/CSS21/colors.html#propdef-background-color" id="ref-for-propdef-background-color②">background-color</a> would have its new value (<span class="css">green</span>) is <span class="css">2s</span>,
            so the transition from <span class="css">blue</span> to <span class="css">green</span> takes 2 seconds.
            However, when the list item leaves the :hover state, the
            transition from <span class="css">green</span> to <span class="css">blue</span> takes 1 second. </p>
    </div>
   </div>
   <p class="note" role="note"> Note that once the transition of a property has started
        (including being in its delay phase),
        it continues running based on
        the original timing function, duration, and
        delay, even if the <a class="property css" data-link-type="property" href="#propdef-transition-timing-function" id="ref-for-propdef-transition-timing-function⑥">transition-timing-function</a>, <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration⑧">transition-duration</a>, or <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay⑨">transition-delay</a> property changes
        before the transition is complete.  However, if the <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property⑨">transition-property</a> property changes such that the transition
        would not have started, the transition stops (and the
        property immediately changes to its final value). </p>
   <p class="note" role="note"> Note that above rules mean that
        transitions do not start when the computed
        value of a property changes as a result of declarative animation
        (as opposed to scripted animation).
        This happens because the before-change style includes up-to-date
        style for declarative animations. </p>
   <h3 class="heading settled" data-level="3.1" id="reversing"><span class="secno">3.1. </span><span class="content">Faster reversing of interrupted transitions</span><a class="self-link" href="#reversing"></a></h3>
   <div class="note" role="note">
    <p> Many common transitions effects involve transitions between two states,
        such as the transition that occurs when the mouse pointer moves
        over a user interface element, and then later moves out of that element.
        With these effects, it is common for a running transition
        to be interrupted before it completes,
        and the property reset to the starting value of that transition.
        An example is a hover effect on an element,
        where a transition starts when the pointer enters the element,
        and then the pointer exits the element before the effect has completed.
        If the outgoing and incoming transitions
        are executed using their specified durations and timing functions,
        the resulting effect can be distractingly asymmetric
        because the second transition
        takes the full specified time to move a shortened distance.
        Instead, this specification makes second transition shorter. </p>
    <p> The mechanism the above rules use to cause this involves the <a data-link-type="dfn" href="#transition-reversing-shortening-factor" id="ref-for-transition-reversing-shortening-factor⑧">reversing shortening factor</a> and the <a data-link-type="dfn" href="#transition-reversing-adjusted-start-value" id="ref-for-transition-reversing-adjusted-start-value⑥">reversing-adjusted start value</a>.
        In particular, the reversing behavior is present whenever
        the <span id="ref-for-transition-reversing-shortening-factor⑨">reversing shortening factor</span> is less than 1. </p>
    <p class="note" role="note"> Note that these rules do not fully address the problem for
        transition patterns that involve more than two states. </p>
    <p class="note" role="note"> Note that these rules lead to the entire timing function of the
        new transition being used, rather than jumping into the middle
        of a timing function, which can create a jarring effect. </p>
    <p class="note" role="note"> This was one of several possibilities that was considered by the
        working group.  See the <a href="transition-reversing-demo">reversing demo</a> demonstrating a number of them, leading to a working group
        resolution made on 2013-06-07 and edits made on 2013-11-11. </p>
   </div>
   <h2 class="heading settled" data-level="4" id="application"><span class="secno">4. </span><span class="content">Application of transitions</span><a class="self-link" href="#application"></a></h2>
   <p> When a property on an element is undergoing a transition
        (that is, when or after the transition has started and before the <a data-link-type="dfn">end time</a> of the transition)
        the transition adds a style called the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="current-value">current value</dfn> to the CSS cascade
        at the level defined for CSS Transitions in <a data-link-type="biblio" href="#biblio-css3cascade" title="CSS Cascading and Inheritance Level 3">[CSS3CASCADE]</a>. </p>
   <p class="note" role="note"> Note that this means that computed values
        resulting from CSS transitions
        can inherit to descendants just like
        any other computed values.
        In the normal case, this means that
        a transition of an inherited property
        applies to descendant elements
        just as an author would expect. </p>
   <p> Implementations must add this value to the cascade
        if and only if
        that property is not currently
        undergoing a CSS Animation (<a data-link-type="biblio" href="#biblio-css3-animations" title="CSS Animations Level 1">[CSS3-ANIMATIONS]</a>) on the same element. </p>
   <p class="note" role="note"> Note that this behavior of transitions not applying to the cascade
        when an animation on the same element and property is running
        does not affect whether the transition has started or ended.
        APIs that expose whether transitions are running
        (such as <a href="#transition-events">transition events</a>)
        still report that a transition is running. </p>
   <p> If the current time is at or before the <a data-link-type="dfn" href="#transition-start-time" id="ref-for-transition-start-time⑥">start time</a> of the transition
        (that is, during the delay phase of the transition),
        the <a data-link-type="dfn" href="#current-value" id="ref-for-current-value④">current value</a> is a specified style that will compute
        to the <a data-link-type="dfn" href="#transition-start-value" id="ref-for-transition-start-value⑤">start value</a> of the transition. </p>
   <p> If the current time is after the <a data-link-type="dfn" href="#transition-start-time" id="ref-for-transition-start-time⑦">start time</a> of the transition
        (that is, during the duration phase of the transition),
        the <a data-link-type="dfn" href="#current-value" id="ref-for-current-value⑤">current value</a> is a specified style that will compute
        to the result of <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#interpolation" id="ref-for-interpolation①">interpolating</a> the property
        using the following values: </p>
   <ul>
    <li data-md>
     <p><var>V<sub>a</sub></var>: <a data-link-type="dfn" href="#transition-start-value" id="ref-for-transition-start-value⑥">start value</a> of the transition</p>
    <li data-md>
     <p><var>V<sub>b</sub></var>: <a data-link-type="dfn" href="#transition-end-value" id="ref-for-transition-end-value⑧">end value</a> of the transition</p>
    <li data-md>
     <p><var>p</var>: the output of the <a href="#transition-timing-function-property">timing function</a> for input (current time - start time) / (end time - start time)</p>
   </ul>
   <p></p>
   <p>The specific <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-4/#interpolation" id="ref-for-interpolation②">interpolation</a> procedure to be used
      is defined by the property’s <a data-link-type="dfn" href="https://drafts.csswg.org/web-animations-1/#animation-type" id="ref-for-animation-type④">animation type</a>.</p>
   <h2 class="heading settled" data-level="5" id="complete"><span class="secno">5. </span><span class="content">Completion of transitions</span><a class="self-link" href="#complete"></a></h2>
   <p> <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition①⑧">Running transitions</a> <dfn class="dfn-paneled" data-dfn-for="transition" data-dfn-type="dfn" data-export id="dfn-complete">complete</dfn> at a time that is equal to or after their end time,
        but prior to the first <a data-link-type="dfn" href="#style-change-event" id="ref-for-style-change-event⑨">style change event</a> whose time is equal to or after their <a data-link-type="dfn">end time</a>.
        When a transition completes,
        implementations must move
        all transitions that complete at that time
        from the set of <span id="ref-for-running-transition①⑨">running transitions</span> to the set of <a data-link-type="dfn" href="#completed-transition" id="ref-for-completed-transition①②">completed transitions</a> and then fire the <a href="#transition-events">events</a> for those completions. <span class="note">(Note that doing otherwise, that is,
        firing some of the events before doing all of the moving
        from <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition②⓪">running transitions</a> to <a data-link-type="dfn" href="#completed-transition" id="ref-for-completed-transition①③">completed transitions</a>,
        could allow
        a style change event to happen
        without the necessary transitions completing,
        since firing the event could cause a style change event,
        if an event handler requests up-to-date computed style or
        layout data.)</span> </p>
   <h2 class="heading settled" data-level="6" id="transition-events"><span class="secno">6. </span><span class="content"><span id="transition-events-">Transition Events</span></span><a class="self-link" href="#transition-events"></a></h2>
   <p>The creation, beginning, completion, and cancellation of CSS transitions
generate corresponding DOM Events.
An event is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#concept-event-dispatch" id="ref-for-concept-event-dispatch">dispatched</a> to the element for each property that undergoes
a transition on that element.
This allows a content developer to perform actions that synchronize
with changes to transitions.</p>
   <p>Each event provides the name of the property the transition is
associated with as well as the duration of the transition.</p>
   <h3 class="heading settled" data-level="6.1" id="interface-transitionevent"><span class="secno">6.1. </span><span class="content">Interface <code class="idl"><a data-link-type="idl" href="#transitionevent" id="ref-for-transitionevent">TransitionEvent</a></code></span><a class="self-link" href="#interface-transitionevent"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#transitionevent" id="ref-for-transitionevent①">TransitionEvent</a></code> interface provides specific contextual information
associated with transitions.</p>
   <h4 class="heading settled" data-level="6.1.1" id="interface-transitionevent-idl"><span class="secno">6.1.1. </span><span class="content">IDL Definition</span><a class="self-link" href="#interface-transitionevent-idl"></a></h4>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="transitionevent"><code><c- g>TransitionEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event" id="ref-for-event"><c- n>Event</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-transitionevent-transitionevent" id="ref-for-dom-transitionevent-transitionevent"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring"><c- n>CSSOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TransitionEvent/TransitionEvent(type, transitionEventInitDict), TransitionEvent/constructor(type, transitionEventInitDict), TransitionEvent/TransitionEvent(type), TransitionEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-transitionevent-transitionevent-type-transitioneventinitdict-type"><code><c- g>type</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-transitioneventinit" id="ref-for-dictdef-transitioneventinit"><c- n>TransitionEventInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TransitionEvent/TransitionEvent(type, transitionEventInitDict), TransitionEvent/constructor(type, transitionEventInitDict), TransitionEvent/TransitionEvent(type), TransitionEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-transitionevent-transitionevent-type-transitioneventinitdict-transitioneventinitdict"><code><c- g>transitionEventInitDict</c-></code></dfn> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring①"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#Events-TransitionEvent-propertyName" id="ref-for-Events-TransitionEvent-propertyName"><c- g>propertyName</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="double" href="#Events-TransitionEvent-elapsedTime" id="ref-for-Events-TransitionEvent-elapsedTime"><c- g>elapsedTime</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring②"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#Events-TransitionEvent-pseudoElement" id="ref-for-Events-TransitionEvent-pseudoElement"><c- g>pseudoElement</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-transitioneventinit"><code><c- g>TransitionEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit" id="ref-for-dictdef-eventinit"><c- n>EventInit</c-></a> {
  <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring③"><c- n>CSSOMString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;&quot;" data-dfn-for="TransitionEventInit" data-dfn-type="dict-member" data-export data-type="CSSOMString" id="dom-transitioneventinit-propertyname"><code><c- g>propertyName</c-></code></dfn> = "";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-default="0.0" data-dfn-for="TransitionEventInit" data-dfn-type="dict-member" data-export data-type="double" id="dom-transitioneventinit-elapsedtime"><code><c- g>elapsedTime</c-></code></dfn> = 0.0;
  <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring④"><c- n>CSSOMString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;&quot;" data-dfn-for="TransitionEventInit" data-dfn-type="dict-member" data-export data-type="CSSOMString" id="dom-transitioneventinit-pseudoelement"><code><c- g>pseudoElement</c-></code></dfn> = "";
};
</pre>
   <h4 class="heading settled" data-level="6.1.2" id="interface-transitionevent-attributes"><span class="secno">6.1.2. </span><span class="content">Attributes</span><a class="self-link" href="#interface-transitionevent-attributes"></a></h4>
   <dl>
    <dt data-md><code class="attribute-name"><dfn class="dfn-paneled idl-code" data-dfn-for="TransitionEvent" data-dfn-type="attribute" data-export id="Events-TransitionEvent-propertyName"><code>propertyName</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring⑤">CSSOMString</a>, readonly</span></code>
    <dd data-md>
     <p>The name of the CSS property associated with the transition.</p>
     <p class="note" role="note">Note:  This is always the name of a longhand property.  See <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property①⓪">transition-property</a> for how specifying shorthand properties causes transitions on longhands.</p>
    <dt data-md><code class="attribute-name"><dfn class="dfn-paneled idl-code" data-dfn-for="TransitionEvent" data-dfn-type="attribute" data-export id="Events-TransitionEvent-elapsedTime"><code>elapsedTime</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②">double</a>, readonly</span></code>
    <dd data-md>
     <p>The amount of time the transition has been running, in seconds, when this
event fired not including any time spent in the delay phase.
The calculation for of this member is defined along with each event type.</p>
    <dt data-md><code class="attribute-name"><dfn class="dfn-paneled idl-code" data-dfn-for="TransitionEvent" data-dfn-type="attribute" data-export id="Events-TransitionEvent-pseudoElement"><code>pseudoElement</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring" id="ref-for-cssomstring⑥">CSSOMString</a>, readonly</span></code>
    <dd data-md>
     <p>The name (beginning with two colons) of the CSS
pseudo-element on which the transition occurred (in
which case the target of the event is that
pseudo-element’s corresponding element), or the empty
string if the transition occurred on an element (which
means the target of the event is that element).</p>
   </dl>
   <p><code id="TransitionEvent-constructor"><dfn class="dfn-paneled idl-code" data-dfn-for="TransitionEvent" data-dfn-type="constructor" data-export data-lt="TransitionEvent(type, transitionEventInitDict)|constructor(type, transitionEventInitDict)|TransitionEvent(type)|constructor(type)" id="dom-transitionevent-transitionevent"><code>TransitionEvent(type, transitionEventInitDict)</code></dfn></code> is an <a data-link-type="dfn" href="http://w3c.github.io/dom/#constructing-events" id="ref-for-constructing-events">event constructor</a>.</p>
   <h3 class="heading settled" data-level="6.2" id="event-transitionevent"><span class="secno">6.2. </span><span class="content">Types of <code>TransitionEvent</code></span><a class="self-link" href="#event-transitionevent"></a></h3>
   <p>The different types of transition events that can occur are:</p>
   <dl>
    <dt><dfn class="dfn-paneled idl-code" data-dfn-for="transitionevent" data-dfn-type="event" data-export id="transitionrun"><code>transitionrun</code></dfn>
    <dd>
      The <code class="idl"><a data-link-type="idl" href="#transitionrun" id="ref-for-transitionrun">transitionrun</a></code> event occurs when a transition is created (i.e.,
      when it is added to the set of <a data-link-type="dfn" href="#running-transition" id="ref-for-running-transition②①">running transitions</a>). 
     <p>A negative <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay①⓪">transition-delay</a> will cause the event to fire with
      an <code class="idl"><a data-link-type="idl" href="#Events-TransitionEvent-elapsedTime" id="ref-for-Events-TransitionEvent-elapsedTime①">elapsedTime</a></code> equal to the absolute value of the
      delay capped to the <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration⑨">transition-duration</a> of the animation. That is,
      the elapsed time is equal to <code>min(max(-<a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay①①">transition-delay</a>, 0), <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration①⓪">transition-duration</a>)</code>.</p>
     <ul>
      <li>Bubbles: Yes
      <li>Cancelable: No
      <li>Context Info: propertyName, elapsedTime, pseudoElement
     </ul>
    <dt><dfn class="dfn-paneled idl-code" data-dfn-for="transitionevent" data-dfn-type="event" data-export id="transitionstart"><code>transitionstart</code></dfn>
    <dd>
      The <code class="idl"><a data-link-type="idl" href="#transitionstart" id="ref-for-transitionstart">transitionstart</a></code> event occurs when a transition’s delay phase ends. 
     <p>The value of <code class="idl"><a data-link-type="idl" href="#Events-TransitionEvent-elapsedTime" id="ref-for-Events-TransitionEvent-elapsedTime②">elapsedTime</a></code> for <code class="idl"><a data-link-type="idl" href="#transitionstart" id="ref-for-transitionstart①">transitionstart</a></code> events is the same as the value used for <code class="idl"><a data-link-type="idl" href="#transitionrun" id="ref-for-transitionrun①">transitionrun</a></code> events.</p>
     <ul>
      <li>Bubbles: Yes
      <li>Cancelable: No
      <li>Context Info: propertyName, elapsedTime, pseudoElement
     </ul>
    <dt><dfn class="dfn-paneled idl-code" data-dfn-for="transitionevent" data-dfn-type="event" data-export id="transitionend"><code>transitionend</code></dfn>
    <dd>
      The <code class="idl"><a data-link-type="idl" href="#transitionend" id="ref-for-transitionend">transitionend</a></code> event occurs at the completion of the transition. In
      the case where a transition is removed before completion, such as if the <a class="property css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property①①">transition-property</a> is removed, then the event will not fire. 
     <p>The value of <code class="idl"><a data-link-type="idl" href="#Events-TransitionEvent-elapsedTime" id="ref-for-Events-TransitionEvent-elapsedTime③">elapsedTime</a></code> for this event is equal to
      the value of <a class="property css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration①①">transition-duration</a>.</p>
     <ul>
      <li>Bubbles: Yes
      <li>Cancelable: No
      <li>Context Info: propertyName, elapsedTime, pseudoElement
     </ul>
    <dt><dfn class="dfn-paneled idl-code" data-dfn-for="transitionevent" data-dfn-type="event" data-export id="transitioncancel"><code>transitioncancel</code></dfn>
    <dd>
      The <code class="idl"><a data-link-type="idl" href="#transitioncancel" id="ref-for-transitioncancel">transitioncancel</a></code> event occurs when a transition is <a data-link-type="dfn">canceled</a>. 
     <p>The <code class="idl"><a data-link-type="idl" href="#Events-TransitionEvent-elapsedTime" id="ref-for-Events-TransitionEvent-elapsedTime④">elapsedTime</a></code> for <code class="idl"><a data-link-type="idl" href="#transitioncancel" id="ref-for-transitioncancel①">transitioncancel</a></code> events is
      the number of seconds from the end of the transition’s delay to the
      moment when the transition was canceled.
      If the transition had a negative <a class="property css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay①②">transition-delay</a>, the beginning of the
      transition is the moment equal to the absolute value of <span class="property" id="ref-for-propdef-transition-delay①③">transition-delay</span> seconds <em>prior</em> to when the transition was actually triggered.
      Alternatively, if the transition had a positive <span class="property" id="ref-for-propdef-transition-delay①④">transition-delay</span> and the
      event is fired before the transition’s delay has expired, the <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/css-animations-1/#dom-animationevent-elapsedtime" id="ref-for-dom-animationevent-elapsedtime">elapsedTime</a></code> will be zero.</p>
     <ul>
      <li>Bubbles: Yes
      <li>Cancelable: No
      <li>Context Info: propertyName, elapsedTime, pseudoElement
     </ul>
   </dl>
   <h3 class="heading settled" data-level="6.3" id="event-handlers-on-elements-document-objects-and-window-objects"><span class="secno">6.3. </span><span class="content">Event handlers on elements, <code>Document</code> objects, and <code>Window</code> objects</span><a class="self-link" href="#event-handlers-on-elements-document-objects-and-window-objects"></a></h3>
   <p>The following are the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers">event handlers</a> (and their corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type">event
handler event types</a>) that must be supported by all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#html-elements" id="ref-for-html-elements">HTML elements</a>, as
both <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes" id="ref-for-event-handler-content-attributes">event handler content attributes</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes">event handler IDL
attributes</a>; and that must be supported by all <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code> objects, as <span id="ref-for-event-handler-idl-attributes①">event handler IDL attributes</span>:</p>
   <table class="event-handlers">
    <tbody>
     <tr>
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers①">Event handler</a>
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type①">Event handler event type</a>
     <tr>
      <td><code class="idl"><a data-link-type="idl" href="#dom-globaleventhandlers-ontransitionrun" id="ref-for-dom-globaleventhandlers-ontransitionrun">ontransitionrun</a></code>
      <td><a data-link-type="idl" href="#transitionrun" id="ref-for-transitionrun②">transitionrun</a>
     <tr>
      <td><code class="idl"><a data-link-type="idl" href="#dom-globaleventhandlers-ontransitionstart" id="ref-for-dom-globaleventhandlers-ontransitionstart">ontransitionstart</a></code>
      <td><a data-link-type="idl" href="#transitionstart" id="ref-for-transitionstart②">transitionstart</a>
     <tr>
      <td><code class="idl"><a data-link-type="idl" href="#dom-globaleventhandlers-ontransitionend" id="ref-for-dom-globaleventhandlers-ontransitionend">ontransitionend</a></code>
      <td><a data-link-type="idl" href="#transitionend" id="ref-for-transitionend①">transitionend</a>
     <tr>
      <td><code class="idl"><a data-link-type="idl" href="#dom-globaleventhandlers-ontransitioncancel" id="ref-for-dom-globaleventhandlers-ontransitioncancel">ontransitioncancel</a></code>
      <td><a data-link-type="idl" href="#transitioncancel" id="ref-for-transitioncancel②">transitioncancel</a>
   </table>
   <h2 class="heading settled" data-level="7" id="interface-dom"><span class="secno">7. </span><span class="content">DOM Interfaces</span><a class="self-link" href="#interface-dom"></a></h2>
   <p>This specification extends the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers" id="ref-for-globaleventhandlers">GlobalEventHandlers</a></code> interface mixin from HTML to
add <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes②">event handler IDL attributes</a> for <a href="#transition-events">transition events</a> as defined in <a href="#event-handlers-on-elements-document-objects-and-window-objects">§ 6.3 Event handlers on elements, Document objects, and Window objects</a>.</p>
   <h3 class="heading settled" data-level="7.1" id="interface-globaleventhandlers-idl"><span class="secno">7.1. </span><span class="content">IDL Definition</span><a class="self-link" href="#interface-globaleventhandlers-idl"></a></h3>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers" id="ref-for-globaleventhandlers①"><c- g>GlobalEventHandlers</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="GlobalEventHandlers" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-globaleventhandlers-ontransitionrun"><code><c- g>ontransitionrun</c-></code></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="GlobalEventHandlers" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-globaleventhandlers-ontransitionstart"><code><c- g>ontransitionstart</c-></code></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="GlobalEventHandlers" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-globaleventhandlers-ontransitionend"><code><c- g>ontransitionend</c-></code></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="GlobalEventHandlers" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-globaleventhandlers-ontransitioncancel"><code><c- g>ontransitioncancel</c-></code></dfn>;
};
</pre>
   <h2 class="heading settled" data-level="8" id="security"><span class="secno">8. </span><span class="content">Security Considerations</span><a class="self-link" href="#security"></a></h2>
   <p><em>This section is not normative.</em></p>
   <p>The security implications of this specification are limited
because it doesn’t allow Web content to do things
that it could not do before.
Rather, it allows things that could previously be done with script
to be done declaratively,
and it ways that implementations can optimize (for frame rate and
CPU usage).</p>
   <p>One of the major categories of optimizations
that implementations can make is implementing animation
of certain high-value properties (such as <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-transforms-1/#propdef-transform" id="ref-for-propdef-transform">transform</a> and <a class="property css" data-link-type="property">opacity</a>)
run on a browser’s compositor thread or process
without updating style or layout on the main Web content thread
unless up-to-date style data are needed.
This optimization often requires allocations of graphics memory
to display the contents of the element being animated.
Implementations should take care to ensure that Web content
cannot trigger unsafe out-of-memory handling
by using large numbers of animations
or animations on elements covering large areas
(where large may be defined in terms of pre-transform or post-transform size).</p>
   <h2 class="heading settled" data-level="9" id="privacy"><span class="secno">9. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy"></a></h2>
   <p><em>This section is not normative.</em></p>
   <p>As for security, the privacy considerations of this specification are limited
because it does not allow Web content to do things that it could not do before.</p>
   <p>This specification may provide additional mechanisms that help to determine
characteristics of the user’s hardware or software.
However, ability to determine performance characteristics of the user’s
hardware or software is common to many Web technologies,
and this specification does not introduce new capabilities.</p>
   <p>As described in <a href="#accessibility">§ 10 Accessibility Considerations</a>,
implementations may provide mitigations to help users with disabilities.
These mitigations are likely to be detectable by Web content,
which means that users who would benefit from these mitigations
may face a tradeoff between keeping their disability private from
the Web content or benefiting from the mitigation.</p>
   <h2 class="heading settled" data-level="10" id="accessibility"><span class="secno">10. </span><span class="content">Accessibility Considerations</span><a class="self-link" href="#accessibility"></a></h2>
   <p><em>This section is not normative.</em></p>
   <h3 class="heading settled" data-level="10.1" id="accessibility-motion"><span class="secno">10.1. </span><span class="content">Motion</span><a class="self-link" href="#accessibility-motion"></a></h3>
   <p>This specification provides declarative mechanisms for animations
that previously needed to be done using script.
Providing a declarative mechanism has multiple effects:
it makes such animations easier to make and thus likely to be more common,
but it also makes it easier for user agents to modify those animations
if such modifications are needed to meet a user’s accessibility needs.</p>
   <p>Thus, users who are sensitive to movement,
or who require additional time to read or understand content,
may benefit from user agent features that allow
animations to be disabled or slowed down.
(But see <a href="#privacy">§ 9 Privacy Considerations</a> for information on the privacy implications
of such mitigations.)</p>
   <p>User agent implementors should be aware that Web content
may depend on the firing of <a href="#transition-events">transition events</a>,
so implementations of such mitigations may wish to fire transition events
even if the transitions were not run as continuous animations.
However, it is probably poor practice for Web content to depend on
such events to function correctly.</p>
   <h3 class="heading settled" data-level="10.2" id="accessibility-cascade"><span class="secno">10.2. </span><span class="content">Cascade</span><a class="self-link" href="#accessibility-cascade"></a></h3>
   <p>The CSS <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-6/#cascade" id="ref-for-cascade">cascade</a> is a general mechanism in CSS
that allows user needs to interact with author styles.
This specification interacts with the cascade,
but since it only allows animation between values
that result from the existing cascade rules,
it does not interfere with the user’s ability to force
CSS properties to have particular values.</p>
   <p>The cascade also allows users to disable transitions entirely
by overriding the transition properties.</p>
   <h2 class="heading settled" data-level="11" id="changes"><span class="secno">11. </span><span class="content">Changes since Working Draft of 30 November 2017</span><a class="self-link" href="#changes"></a></h2>
   <p>The following are the substantive changes made since the <a href="https://www.w3.org/TR/2017/WD-css-transitions-1-20171130/">Working Draft
dated 11 October 2018</a>:</p>
   <ul>
    <li data-md>
     <p>(Nothing yet)</p>
   </ul>
   <p>For more details on these changes, see the version control <a href="https://github.com/w3c/csswg-drafts/commits/master/css-transitions-1/Overview.bs">change log</a>.</p>
   <p>For changes in earlier working drafts:</p>
   <ol>
    <li data-md>
     <p>See the <a href="https://www.w3.org/TR/2018/WD-css-transitions-1-20181011/#changes">changes
 section in the 11 October 2018 Working Draft</a>.</p>
    <li data-md>
     <p>See the <a href="https://www.w3.org/TR/2017/WD-css-transitions-1-20171130/#changes">changes
 section in the 30 November 2017 Working Draft</a>.</p>
    <li data-md>
     <p>See the <a href="https://www.w3.org/TR/2013/WD-css3-transitions-20131119/#changes">changes
 section in the 19 November 2013 Working Draft</a>.</p>
    <li data-md>
     <p>See the <a href="https://www.w3.org/TR/2013/WD-css3-transitions-20130212/ChangeLog">the
 ChangeLog</a> for changes in previous working drafts.</p>
    <li data-md>
     <p>For more details on these changes, see the version control change logs,
 which are split in many parts because of file renaming:</p>
     <ul>
      <li data-md>
       <p><a href="https://github.com/w3c/csswg-drafts/commits/master/css-transitions-1/Overview.bs">change log since 2017 October 12</a>,</p>
      <li data-md>
       <p><a href="https://hg.csswg.org/drafts/log/tip/css-transitions/Overview.bs">change log from 2015 January 26 to 2017 October 12</a>,</p>
      <li data-md>
       <p><a href="https://hg.csswg.org/drafts/log/tip/css-transitions/Overview.src.html">change log from 2013 March 28 to 2015 January 26</a>,</p>
      <li data-md>
       <p><a href="https://hg.csswg.org/drafts/log/tip/css3-transitions/Overview.src.html">change log before 2013 March 28</a>.</p>
     </ul>
   </ol>
   <h2 class="heading settled" data-level="12" id="acknowledgments"><span class="secno">12. </span><span class="content">Acknowledgments</span><a class="self-link" href="#acknowledgments"></a></h2>
   <p>Thanks especially to the feedback from
Tab Atkins,
Carine Bournez,
Aryeh Gregor,
Vincent Hardy,
Anne van Kesteren,
Cameron McCormack,
Alex Mogilevsky,
Jasper St. Pierre,
Estelle Weyl,
and all the rest of the <a href="http://lists.w3.org/Archives/Public/www-style/">www-style</a> community.</p>
  </main>
  <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
  <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="w3c-example">
   <a class="self-link" href="#w3c-example"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
    this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong></p>
  <details class="wpt-tests-block" dir="ltr" lang="en" open>
   <summary>Tests</summary>
   <p>Tests relating to the content of this specification
                     may be documented in “Tests” blocks like this one.
                     Any such block is non-normative.</p>
   <ul class="wpt-tests-list"></ul>
   <hr>
  </details>
  <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> Conformance classes</span><a class="self-link" href="#w3c-conformance-classes"></a></h3>
  <p>Conformance to this specification
    is defined for three conformance classes: </p>
  <dl>
   <dt>style sheet 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
            style sheet</a>. 
   <dt>renderer 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets the semantics of a style sheet and renders
            documents that use them. 
   <dt>authoring tool 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a style sheet. 
  </dl>
  <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module. </p>
  <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.) </p>
  <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module. </p>
  <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> Partial implementations</span><a class="self-link" href="#w3c-partial"></a></h3>
  <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong> treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>
  <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> Implementations of Unstable and Proprietary Features</span><a class="self-link" href="#w3c-conform-future-proofing"></a></h4>
  <p>To avoid clashes with future stable CSS features,
        the CSSWG recommends <a href="http://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the implementation of <a href="http://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a href="http://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
  <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> Non-experimental implementations</span><a class="self-link" href="#w3c-testing"></a></h3>
  <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec. </p>
  <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group. </p>
  <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing list.</p>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#after-change-style">after-change style</a><span>, in § 3</span>
   <li><a href="#valdef-transition-property-all">all</a><span>, in § 2.1</span>
   <li><a href="#before-change-style">before-change style</a><span>, in § 3</span>
   <li><a href="#transition-cancel">cancel</a><span>, in § 3</span>
   <li><a href="#transition-combined-duration">combined duration</a><span>, in § 3</span>
   <li><a href="#dfn-complete">complete</a><span>, in § 5</span>
   <li><a href="#completed-transition">completed transition</a><span>, in § 3</span>
   <li><a href="#dom-transitionevent-transitionevent">constructor(type)</a><span>, in § 6.1.2</span>
   <li><a href="#dom-transitionevent-transitionevent">constructor(type, transitionEventInitDict)</a><span>, in § 6.1.2</span>
   <li><a href="#current-value">current value</a><span>, in § 4</span>
   <li>
    elapsedTime
    <ul>
     <li><a href="#Events-TransitionEvent-elapsedTime">attribute for TransitionEvent</a><span>, in § 6.1.2</span>
     <li><a href="#dom-transitioneventinit-elapsedtime">dict-member for TransitionEventInit</a><span>, in § 6.1.1</span>
    </ul>
   <li><a href="#transition-end-time">end time</a><span>, in § 3</span>
   <li><a href="#transition-end-value">end value</a><span>, in § 3</span>
   <li><a href="#matching-transition-delay">matching transition delay</a><span>, in § 3</span>
   <li><a href="#matching-transition-duration">matching transition duration</a><span>, in § 3</span>
   <li><a href="#matching-transition-property-value">matching transition-property value</a><span>, in § 3</span>
   <li><a href="#matching-transition-timing-function">matching transition timing function</a><span>, in § 3</span>
   <li><a href="#valdef-transition-property-none">none</a><span>, in § 2.1</span>
   <li><a href="#dom-globaleventhandlers-ontransitioncancel">ontransitioncancel</a><span>, in § 7.1</span>
   <li><a href="#dom-globaleventhandlers-ontransitionend">ontransitionend</a><span>, in § 7.1</span>
   <li><a href="#dom-globaleventhandlers-ontransitionrun">ontransitionrun</a><span>, in § 7.1</span>
   <li><a href="#dom-globaleventhandlers-ontransitionstart">ontransitionstart</a><span>, in § 7.1</span>
   <li>
    propertyName
    <ul>
     <li><a href="#Events-TransitionEvent-propertyName">attribute for TransitionEvent</a><span>, in § 6.1.2</span>
     <li><a href="#dom-transitioneventinit-propertyname">dict-member for TransitionEventInit</a><span>, in § 6.1.1</span>
    </ul>
   <li>
    pseudoElement
    <ul>
     <li><a href="#Events-TransitionEvent-pseudoElement">attribute for TransitionEvent</a><span>, in § 6.1.2</span>
     <li><a href="#dom-transitioneventinit-pseudoelement">dict-member for TransitionEventInit</a><span>, in § 6.1.1</span>
    </ul>
   <li><a href="#transition-reversing-adjusted-start-value">reversing-adjusted start value</a><span>, in § 3</span>
   <li><a href="#transition-reversing-shortening-factor">reversing shortening factor</a><span>, in § 3</span>
   <li><a href="#running-transition">running transition</a><span>, in § 3</span>
   <li><a href="#single-transition">&lt;single-transition></a><span>, in § 2.5</span>
   <li><a href="#single-transition-property">&lt;single-transition-property></a><span>, in § 2.1</span>
   <li><a href="#transition-start-time">start time</a><span>, in § 3</span>
   <li><a href="#transition-start-value">start value</a><span>, in § 3</span>
   <li><a href="#style-change-event">style change event</a><span>, in § 3</span>
   <li><a href="#propdef-transition">transition</a><span>, in § 2.5</span>
   <li><a href="#transitionable">transitionable</a><span>, in § 3</span>
   <li><a href="#transitioncancel">transitioncancel</a><span>, in § 6.2</span>
   <li><a href="#propdef-transition-delay">transition-delay</a><span>, in § 2.4</span>
   <li><a href="#propdef-transition-duration">transition-duration</a><span>, in § 2.2</span>
   <li><a href="#transitionend">transitionend</a><span>, in § 6.2</span>
   <li><a href="#transitionevent">TransitionEvent</a><span>, in § 6.1.1</span>
   <li><a href="#dictdef-transitioneventinit">TransitionEventInit</a><span>, in § 6.1.1</span>
   <li><a href="#dom-transitionevent-transitionevent">TransitionEvent(type)</a><span>, in § 6.1.2</span>
   <li><a href="#dom-transitionevent-transitionevent">TransitionEvent(type, transitionEventInitDict)</a><span>, in § 6.1.2</span>
   <li><a href="#propdef-transition-property">transition-property</a><span>, in § 2.1</span>
   <li><a href="#transitionrun">transitionrun</a><span>, in § 6.2</span>
   <li><a href="#transitionstart">transitionstart</a><span>, in § 6.2</span>
   <li><a href="#propdef-transition-timing-function">transition-timing-function</a><span>, in § 2.3</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="74f00209">event constructor</span>
     <li><span class="dfn-paneled" id="5074dc0c">inset</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-BACKGROUNDS-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="f831c141">background-image</span>
     <li><span class="dfn-paneled" id="6916104d">box-shadow</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-CASCADE-5]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d95397a7">all</span>
     <li><span class="dfn-paneled" id="9cd25054">computed value</span>
     <li><span class="dfn-paneled" id="c388d253">inherit</span>
     <li><span class="dfn-paneled" id="4d7d3dcd">initial</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-CASCADE-6]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="de6d76c2">cascade</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-EASING-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8095a819">&lt;easing-function></span>
     <li><span class="dfn-paneled" id="07dcc868">input progress value</span>
     <li><span class="dfn-paneled" id="b15213f2">output progress value</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-TRANSFORMS-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="e2e08d07">transform</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="621c7c7e">&lt;time></span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="68487d22">#</span>
     <li><span class="dfn-paneled" id="e274345c">&lt;custom-ident></span>
     <li><span class="dfn-paneled" id="358fd6ff">css-wide keywords</span>
     <li><span class="dfn-paneled" id="d8586311">interpolate</span>
     <li><span class="dfn-paneled" id="c974a599">interpolation</span>
     <li><span class="dfn-paneled" id="6ec67710">|</span>
     <li><span class="dfn-paneled" id="8a82fda1">||</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="67fd880f">background-color</span>
     <li><span class="dfn-paneled" id="49a17925">left</span>
     <li><span class="dfn-paneled" id="4726eb39">top</span>
     <li><span class="dfn-paneled" id="1b010cf3">width</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS3-ANIMATIONS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b2813b66">elapsedTime</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSSOM-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5fced98b">CSSOMString</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="129bdae8">Event</span>
     <li><span class="dfn-paneled" id="44a7708c">EventInit</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="07cd5a09">Document</span>
     <li><span class="dfn-paneled" id="f0951476">EventHandler</span>
     <li><span class="dfn-paneled" id="762ce945">GlobalEventHandlers</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="f87fb171">dispatch</span>
     <li><span class="dfn-paneled" id="b22ae7ee">event handler content attributes</span>
     <li><span class="dfn-paneled" id="9d386f55">event handler event type</span>
     <li><span class="dfn-paneled" id="d4689c67">event handler idl attributes</span>
     <li><span class="dfn-paneled" id="e9189aba">event handlers</span>
     <li><span class="dfn-paneled" id="49a64d88">html elements</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEB-ANIMATIONS-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="12ac1140">animation type</span>
     <li><span class="dfn-paneled" id="c52b11fb">combining shadow lists</span>
     <li><span class="dfn-paneled" id="e3ec4d32">discrete</span>
     <li><span class="dfn-paneled" id="7362dc35">not animatable</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="8c800cdf">double</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
   <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-cascade-5/"><cite>CSS Cascading and Inheritance Level 5</cite></a>. URL: <a href="https://drafts.csswg.org/css-cascade-5/">https://drafts.csswg.org/css-cascade-5/</a>
   <dt id="biblio-css-cascade-6">[CSS-CASCADE-6]
   <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-cascade-6/"><cite>CSS Cascading and Inheritance Level 6</cite></a>. URL: <a href="https://drafts.csswg.org/css-cascade-6/">https://drafts.csswg.org/css-cascade-6/</a>
   <dt id="biblio-css-easing-1">[CSS-EASING-1]
   <dd>Brian Birtles; Dean Jackson; Matt Rakow. <a href="https://drafts.csswg.org/css-easing/"><cite>CSS Easing Functions Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-easing/">https://drafts.csswg.org/css-easing/</a>
   <dt id="biblio-css-easing-2">[CSS-EASING-2]
   <dd><a href="https://drafts.csswg.org/css-easing-2/"><cite>CSS Easing Functions Level 2</cite></a>. Editor's Draft. URL: <a href="https://drafts.csswg.org/css-easing-2/">https://drafts.csswg.org/css-easing-2/</a>
   <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
   <dd>Simon Fraser; et al. <a href="https://drafts.csswg.org/css-transforms/"><cite>CSS Transforms Module Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-transforms/">https://drafts.csswg.org/css-transforms/</a>
   <dt id="biblio-css-values-3">[CSS-VALUES-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-3/"><cite>CSS Values and Units Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-3/">https://drafts.csswg.org/css-values-3/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-4/"><cite>CSS Values and Units Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
   <dt id="biblio-css2">[CSS2]
   <dd>Bert Bos; et al. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-css3-animations">[CSS3-ANIMATIONS]
   <dd>David Baron; et al. <a href="https://drafts.csswg.org/css-animations/"><cite>CSS Animations Level 1</cite></a>. URL: <a href="https://drafts.csswg.org/css-animations/">https://drafts.csswg.org/css-animations/</a>
   <dt id="biblio-css3cascade">[CSS3CASCADE]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/css-cascade-3/"><cite>CSS Cascading and Inheritance Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-cascade-3/">https://drafts.csswg.org/css-cascade-3/</a>
   <dt id="biblio-cssom-1">[CSSOM-1]
   <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://drafts.csswg.org/cssom/"><cite>CSS Object Model (CSSOM)</cite></a>. URL: <a href="https://drafts.csswg.org/cssom/">https://drafts.csswg.org/cssom/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-web-animations-1">[WEB-ANIMATIONS-1]
   <dd>Brian Birtles; et al. <a href="https://drafts.csswg.org/web-animations-1/"><cite>Web Animations</cite></a>. URL: <a href="https://drafts.csswg.org/web-animations-1/">https://drafts.csswg.org/web-animations-1/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
   <dd>Elika Etemad; Brad Kemper. <a href="https://drafts.csswg.org/css-backgrounds/"><cite>CSS Backgrounds and Borders Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-backgrounds/">https://drafts.csswg.org/css-backgrounds/</a>
   <dt id="biblio-smil-animation">[SMIL-ANIMATION]
   <dd>Patrick Schmitz; Aaron Cohen. <a href="https://www.w3.org/TR/smil-animation/"><cite>SMIL Animation</cite></a>. 4 September 2001. REC. URL: <a href="https://www.w3.org/TR/smil-animation/">https://www.w3.org/TR/smil-animation/</a>
   <dt id="biblio-svg11">[SVG11]
   <dd>Erik Dahlström; et al. <a href="https://www.w3.org/TR/SVG11/"><cite>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</cite></a>. 16 August 2011. REC. URL: <a href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
   <dt id="biblio-wcag20">[WCAG20]
   <dd>Ben Caldwell; et al. <a href="https://www.w3.org/TR/WCAG20/"><cite>Web Content Accessibility Guidelines (WCAG) 2.0</cite></a>. 11 December 2008. REC. URL: <a href="https://www.w3.org/TR/WCAG20/">https://www.w3.org/TR/WCAG20/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">Property Index</span><a class="self-link" href="#property-index"></a></h2>
  <div class="big-element-wrapper">
   <table class="index">
    <thead>
     <tr>
      <th scope="col">Name
      <th scope="col">Value
      <th scope="col">Initial
      <th scope="col">Applies to
      <th scope="col">Inh.
      <th scope="col">%ages
      <th scope="col">Ani­mat­able
      <th scope="col">Anim­ation type
      <th scope="col">Canonical order
      <th scope="col">Com­puted value
    <tbody>
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-transition" id="ref-for-propdef-transition④">transition</a>
      <td>&lt;single-transition>#
      <td>see individual properties
      <td>all elements
      <td>no
      <td>N/A
      <td>no
      <td>not animatable
      <td>per grammar
      <td>see individual properties
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-transition-delay" id="ref-for-propdef-transition-delay①⑤">transition-delay</a>
      <td>&lt;time>#
      <td>0s
      <td>all elements
      <td>no
      <td>N/A
      <td>
      <td>not animatable
      <td>per grammar
      <td>list, each item a duration
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-transition-duration" id="ref-for-propdef-transition-duration①②">transition-duration</a>
      <td>&lt;time>#
      <td>0s
      <td>all elements
      <td>no
      <td>N/A
      <td>
      <td>not animatable
      <td>per grammar
      <td>list, each item a duration
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-transition-property" id="ref-for-propdef-transition-property①②">transition-property</a>
      <td>none | &lt;single-transition-property>#
      <td>all
      <td>all elements
      <td>no
      <td>N/A
      <td>
      <td>not animatable
      <td>per grammar
      <td>the keyword none else a list of identifiers
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-transition-timing-function" id="ref-for-propdef-transition-timing-function⑦">transition-timing-function</a>
      <td>&lt;easing-function>#
      <td>ease
      <td>all elements
      <td>no
      <td>N/A
      <td>
      <td>not animatable
      <td>per grammar
      <td>as specified
   </table>
  </div>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#transitionevent"><code><c- g>TransitionEvent</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event"><c- n>Event</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-transitionevent-transitionevent"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a href="#dom-transitionevent-transitionevent-type-transitioneventinitdict-type"><code><c- g>type</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-transitioneventinit"><c- n>TransitionEventInit</c-></a> <a href="#dom-transitionevent-transitionevent-type-transitioneventinitdict-transitioneventinitdict"><code><c- g>transitionEventInitDict</c-></code></a> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#Events-TransitionEvent-propertyName"><c- g>propertyName</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="double" href="#Events-TransitionEvent-elapsedTime"><c- g>elapsedTime</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSOMString" href="#Events-TransitionEvent-pseudoElement"><c- g>pseudoElement</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-transitioneventinit"><code><c- g>TransitionEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><c- n>EventInit</c-></a> {
  <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a data-default="&quot;&quot;" data-type="CSSOMString" href="#dom-transitioneventinit-propertyname"><code><c- g>propertyName</c-></code></a> = "";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-default="0.0" data-type="double" href="#dom-transitioneventinit-elapsedtime"><code><c- g>elapsedTime</c-></code></a> = 0.0;
  <a data-link-type="idl-name" href="https://drafts.csswg.org/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a data-default="&quot;&quot;" data-type="CSSOMString" href="#dom-transitioneventinit-pseudoelement"><code><c- g>pseudoElement</c-></code></a> = "";
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers"><c- g>GlobalEventHandlers</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-globaleventhandlers-ontransitionrun"><code><c- g>ontransitionrun</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-globaleventhandlers-ontransitionstart"><code><c- g>ontransitionstart</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-globaleventhandlers-ontransitionend"><code><c- g>ontransitionend</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-globaleventhandlers-ontransitioncancel"><code><c- g>ontransitioncancel</c-></code></a>;
};

</pre>
  <details class="mdn-anno unpositioned" data-anno-for="transitioncancel">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/transitioncancel_event" title="The transitioncancel event is fired when a CSS transition is canceled.">Element/transitioncancel_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>53+</span></span><span class="safari yes"><span>Safari</span><span>13.1+</span></span><span class="chrome yes"><span>Chrome</span><span>87+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>87+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-globaleventhandlers-ontransitioncancel">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/transitioncancel_event" title="The transitioncancel event is fired when a CSS transition is canceled.">Element/transitioncancel_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>53+</span></span><span class="safari yes"><span>Safari</span><span>13.1+</span></span><span class="chrome yes"><span>Chrome</span><span>87+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>87+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="transitionend">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/transitionend_event" title="The transitionend event is fired when a CSS transition has completed. In the case where a transition is removed before completion, such as if the transition-property is removed or display is set to none, then the event will not be generated.">Element/transitionend_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>51+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>18</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="transitionrun">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/transitionrun_event" title="The transitionrun event is fired when a CSS transition is first created, i.e. before any transition-delay has begun.">Element/transitionrun_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>53+</span></span><span class="safari yes"><span>Safari</span><span>13.1+</span></span><span class="chrome yes"><span>Chrome</span><span>74+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="transitionstart">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/transitionstart_event" title="The transitionstart event is fired when a CSS transition has actually started, i.e., after any transition-delay has ended.">Element/transitionstart_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>53+</span></span><span class="safari yes"><span>Safari</span><span>13.1+</span></span><span class="chrome yes"><span>Chrome</span><span>74+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-transitionevent-transitionevent">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TransitionEvent/TransitionEvent" title="The TransitionEvent() constructor returns a new TransitionEvent object, representing an event in relation with a transition.">TransitionEvent/TransitionEvent</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>23+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>27+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>14+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>2.0+</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="Events-TransitionEvent-elapsedTime">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TransitionEvent/elapsedTime" title="The TransitionEvent.elapsedTime read-only property is a float giving the amount of time the animation has been running, in seconds, when this event fired. This value is not affected by the transition-delay property.">TransitionEvent/elapsedTime</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>2+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="Events-TransitionEvent-propertyName">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TransitionEvent/propertyName" title="The propertyName read-only property of TransitionEvent objects is a string containing the name of the CSS property associated with the transition.">TransitionEvent/propertyName</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>2+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="Events-TransitionEvent-pseudoElement">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TransitionEvent/pseudoElement" title="The TransitionEvent.pseudoElement read-only property is a string, starting with &apos;::&apos;, containing the name of the pseudo-element the animation runs on. If the transition doesn&apos;t run on a pseudo-element but on the element, an empty string: &apos;&apos;``.">TransitionEvent/pseudoElement</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>23+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>2+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="interface-transitionevent">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/TransitionEvent" title="The TransitionEvent interface represents events providing information related to transitions.">TransitionEvent</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>27+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios yes"><span>iOS Safari</span><span>7+</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>4.4+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>2.0+</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="transition-delay-property">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transition-delay" title="The transition-delay CSS property specifies the duration to wait before starting a property&apos;s transition effect when its value changes.">transition-delay</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>16+</span></span><span class="safari yes"><span>Safari</span><span>9+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios yes"><span>iOS Safari</span><span>9+</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>4.4+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="transition-duration-property">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transition-duration" title="The transition-duration CSS property sets the length of time a transition animation should take to complete. By default, the value is 0s, meaning that no animation will occur.">transition-duration</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>16+</span></span><span class="safari yes"><span>Safari</span><span>9+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>4.4+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="transition-property-property">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transition-property" title="The transition-property CSS property sets the CSS properties to which a transition effect should be applied.">transition-property</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>16+</span></span><span class="safari yes"><span>Safari</span><span>9+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>4.4+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="transition-timing-function-property">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transition-timing-function" title="The transition-timing-function CSS property sets how intermediate values are calculated for CSS properties being affected by a transition effect.">transition-timing-function</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>16+</span></span><span class="safari yes"><span>Safari</span><span>9+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>4.4+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="transition-shorthand-property">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transition" title="The transition CSS property is a shorthand property for transition-property, transition-duration, transition-timing-function, and transition-delay.">transition</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>16+</span></span><span class="safari yes"><span>Safari</span><span>9+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>10+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>4.4+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>12.1+</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"07cd5a09": {"dfnID":"07cd5a09","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"https://html.spec.whatwg.org/#document"},
"07dcc868": {"dfnID":"07dcc868","dfnText":"input progress value","external":true,"refSections":[{"refs":[{"id":"ref-for-input-progress-value"}],"title":"2.3. The transition-timing-function Property"}],"url":"https://drafts.csswg.org/css-easing-2/#input-progress-value"},
"129bdae8": {"dfnID":"129bdae8","dfnText":"Event","external":true,"refSections":[{"refs":[{"id":"ref-for-event"}],"title":"6.1.1. IDL Definition"}],"url":"https://dom.spec.whatwg.org/#event"},
"12ac1140": {"dfnID":"12ac1140","dfnText":"animation type","external":true,"refSections":[{"refs":[{"id":"ref-for-animation-type"},{"id":"ref-for-animation-type\u2460"},{"id":"ref-for-animation-type\u2461"},{"id":"ref-for-animation-type\u2462"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-animation-type\u2463"}],"title":"4. Application of transitions"}],"url":"https://drafts.csswg.org/web-animations-1/#animation-type"},
"1b010cf3": {"dfnID":"1b010cf3","dfnText":"width","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-width"}],"title":"2. Transitions"}],"url":"https://www.w3.org/TR/CSS21/visudet.html#propdef-width"},
"358fd6ff": {"dfnID":"358fd6ff","dfnText":"css-wide keywords","external":true,"refSections":[{"refs":[{"id":"ref-for-css-wide-keywords"}],"title":"1.1. Value Definitions"}],"url":"https://drafts.csswg.org/css-values-4/#css-wide-keywords"},
"44a7708c": {"dfnID":"44a7708c","dfnText":"EventInit","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-eventinit"}],"title":"6.1.1. IDL Definition"}],"url":"https://dom.spec.whatwg.org/#dictdef-eventinit"},
"4726eb39": {"dfnID":"4726eb39","dfnText":"top","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-top"}],"title":"2. Transitions"}],"url":"https://www.w3.org/TR/CSS21/visuren.html#propdef-top"},
"49a17925": {"dfnID":"49a17925","dfnText":"left","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-left"},{"id":"ref-for-propdef-left\u2460"},{"id":"ref-for-propdef-left\u2461"}],"title":"2. Transitions"}],"url":"https://www.w3.org/TR/CSS21/visuren.html#propdef-left"},
"49a64d88": {"dfnID":"49a64d88","dfnText":"html elements","external":true,"refSections":[{"refs":[{"id":"ref-for-html-elements"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#html-elements"},
"4d7d3dcd": {"dfnID":"4d7d3dcd","dfnText":"initial","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-all-initial"}],"title":"2.1. The transition-property Property"}],"url":"https://drafts.csswg.org/css-cascade-5/#valdef-all-initial"},
"5074dc0c": {"dfnID":"5074dc0c","dfnText":"inset","external":true,"refSections":[{"refs":[{"id":"ref-for-shadow-inset"}],"title":"3. Starting of transitions"}],"url":"https://www.w3.org/TR/css3-background/#shadow-inset"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"5fced98b": {"dfnID":"5fced98b","dfnText":"CSSOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-cssomstring"},{"id":"ref-for-cssomstring\u2460"},{"id":"ref-for-cssomstring\u2461"},{"id":"ref-for-cssomstring\u2462"},{"id":"ref-for-cssomstring\u2463"}],"title":"6.1.1. IDL Definition"},{"refs":[{"id":"ref-for-cssomstring\u2464"},{"id":"ref-for-cssomstring\u2465"}],"title":"6.1.2. Attributes"}],"url":"https://drafts.csswg.org/cssom-1/#cssomstring"},
"621c7c7e": {"dfnID":"621c7c7e","dfnText":"<time>","external":true,"refSections":[{"refs":[{"id":"ref-for-time-value"}],"title":"2.2. The transition-duration Property"},{"refs":[{"id":"ref-for-time-value\u2460"}],"title":"2.4. The transition-delay Property"},{"refs":[{"id":"ref-for-time-value\u2461"},{"id":"ref-for-time-value\u2462"}],"title":"2.5. The transition Shorthand Property"}],"url":"https://drafts.csswg.org/css-values-3/#time-value"},
"67fd880f": {"dfnID":"67fd880f","dfnText":"background-color","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-background-color"},{"id":"ref-for-propdef-background-color\u2460"}],"title":"2. Transitions"},{"refs":[{"id":"ref-for-propdef-background-color\u2461"}],"title":"3. Starting of transitions"}],"url":"https://www.w3.org/TR/CSS21/colors.html#propdef-background-color"},
"68487d22": {"dfnID":"68487d22","dfnText":"#","external":true,"refSections":[{"refs":[{"id":"ref-for-mult-comma"}],"title":"2.1. The transition-property Property"},{"refs":[{"id":"ref-for-mult-comma\u2460"}],"title":"2.2. The transition-duration Property"},{"refs":[{"id":"ref-for-mult-comma\u2461"}],"title":"2.3. The transition-timing-function Property"},{"refs":[{"id":"ref-for-mult-comma\u2462"}],"title":"2.4. The transition-delay Property"},{"refs":[{"id":"ref-for-mult-comma\u2463"}],"title":"2.5. The transition Shorthand Property"}],"url":"https://drafts.csswg.org/css-values-4/#mult-comma"},
"6916104d": {"dfnID":"6916104d","dfnText":"box-shadow","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-box-shadow"}],"title":"3. Starting of transitions"}],"url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-box-shadow"},
"6ec67710": {"dfnID":"6ec67710","dfnText":"|","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-one"},{"id":"ref-for-comb-one\u2460"}],"title":"2.1. The transition-property Property"},{"refs":[{"id":"ref-for-comb-one\u2461"}],"title":"2.5. The transition Shorthand Property"}],"url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"7362dc35": {"dfnID":"7362dc35","dfnText":"not animatable","external":true,"refSections":[{"refs":[{"id":"ref-for-not-animatable"}],"title":"3. Starting of transitions"}],"url":"https://drafts.csswg.org/web-animations-1/#not-animatable"},
"74f00209": {"dfnID":"74f00209","dfnText":"event constructor","external":true,"refSections":[{"refs":[{"id":"ref-for-constructing-events"}],"title":"6.1.2. Attributes"}],"url":"http://w3c.github.io/dom/#constructing-events"},
"762ce945": {"dfnID":"762ce945","dfnText":"GlobalEventHandlers","external":true,"refSections":[{"refs":[{"id":"ref-for-globaleventhandlers"}],"title":"7. DOM Interfaces"},{"refs":[{"id":"ref-for-globaleventhandlers\u2460"}],"title":"7.1. IDL Definition"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers"},
"8095a819": {"dfnID":"8095a819","dfnText":"<easing-function>","external":true,"refSections":[{"refs":[{"id":"ref-for-typedef-easing-function"}],"title":"2.3. The transition-timing-function Property"},{"refs":[{"id":"ref-for-typedef-easing-function\u2460"}],"title":"2.5. The transition Shorthand Property"}],"url":"https://drafts.csswg.org/css-easing-2/#typedef-easing-function"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"6.1.1. IDL Definition"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8a82fda1": {"dfnID":"8a82fda1","dfnText":"||","external":true,"refSections":[{"refs":[{"id":"ref-for-comb-any"},{"id":"ref-for-comb-any\u2460"},{"id":"ref-for-comb-any\u2461"}],"title":"2.5. The transition Shorthand Property"}],"url":"https://drafts.csswg.org/css-values-4/#comb-any"},
"8c800cdf": {"dfnID":"8c800cdf","dfnText":"double","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-double"},{"id":"ref-for-idl-double\u2460"}],"title":"6.1.1. IDL Definition"},{"refs":[{"id":"ref-for-idl-double\u2461"}],"title":"6.1.2. Attributes"}],"url":"https://webidl.spec.whatwg.org/#idl-double"},
"9cd25054": {"dfnID":"9cd25054","dfnText":"computed value","external":true,"refSections":[{"refs":[{"id":"ref-for-computed-value"},{"id":"ref-for-computed-value\u2460"}],"title":"2. Transitions"},{"refs":[{"id":"ref-for-computed-value\u2461"},{"id":"ref-for-computed-value\u2462"},{"id":"ref-for-computed-value\u2463"},{"id":"ref-for-computed-value\u2464"},{"id":"ref-for-computed-value\u2465"},{"id":"ref-for-computed-value\u2466"},{"id":"ref-for-computed-value\u2467"},{"id":"ref-for-computed-value\u2468"},{"id":"ref-for-computed-value\u2460\u24ea"},{"id":"ref-for-computed-value\u2460\u2460"},{"id":"ref-for-computed-value\u2460\u2461"}],"title":"3. Starting of transitions"}],"url":"https://drafts.csswg.org/css-cascade-5/#computed-value"},
"9d386f55": {"dfnID":"9d386f55","dfnText":"event handler event type","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handler-event-type"},{"id":"ref-for-event-handler-event-type\u2460"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"},
"Events-TransitionEvent-elapsedTime": {"dfnID":"Events-TransitionEvent-elapsedTime","dfnText":"elapsedTime","external":false,"refSections":[{"refs":[{"id":"ref-for-Events-TransitionEvent-elapsedTime"}],"title":"6.1.1. IDL Definition"},{"refs":[{"id":"ref-for-Events-TransitionEvent-elapsedTime\u2460"},{"id":"ref-for-Events-TransitionEvent-elapsedTime\u2461"},{"id":"ref-for-Events-TransitionEvent-elapsedTime\u2462"},{"id":"ref-for-Events-TransitionEvent-elapsedTime\u2463"}],"title":"6.2. Types of TransitionEvent"}],"url":"#Events-TransitionEvent-elapsedTime"},
"Events-TransitionEvent-propertyName": {"dfnID":"Events-TransitionEvent-propertyName","dfnText":"propertyName","external":false,"refSections":[{"refs":[{"id":"ref-for-Events-TransitionEvent-propertyName"}],"title":"6.1.1. IDL Definition"}],"url":"#Events-TransitionEvent-propertyName"},
"Events-TransitionEvent-pseudoElement": {"dfnID":"Events-TransitionEvent-pseudoElement","dfnText":"pseudoElement","external":false,"refSections":[{"refs":[{"id":"ref-for-Events-TransitionEvent-pseudoElement"}],"title":"6.1.1. IDL Definition"}],"url":"#Events-TransitionEvent-pseudoElement"},
"after-change-style": {"dfnID":"after-change-style","dfnText":"after-change style","external":false,"refSections":[{"refs":[{"id":"ref-for-after-change-style"},{"id":"ref-for-after-change-style\u2460"},{"id":"ref-for-after-change-style\u2461"},{"id":"ref-for-after-change-style\u2462"},{"id":"ref-for-after-change-style\u2463"},{"id":"ref-for-after-change-style\u2464"},{"id":"ref-for-after-change-style\u2465"},{"id":"ref-for-after-change-style\u2466"},{"id":"ref-for-after-change-style\u2467"},{"id":"ref-for-after-change-style\u2468"},{"id":"ref-for-after-change-style\u2460\u24ea"},{"id":"ref-for-after-change-style\u2460\u2460"},{"id":"ref-for-after-change-style\u2460\u2461"},{"id":"ref-for-after-change-style\u2460\u2462"},{"id":"ref-for-after-change-style\u2460\u2463"},{"id":"ref-for-after-change-style\u2460\u2464"},{"id":"ref-for-after-change-style\u2460\u2465"}],"title":"3. Starting of transitions"}],"url":"#after-change-style"},
"b15213f2": {"dfnID":"b15213f2","dfnText":"output progress value","external":true,"refSections":[{"refs":[{"id":"ref-for-output-progress-value"}],"title":"2.3. The transition-timing-function Property"}],"url":"https://drafts.csswg.org/css-easing-2/#output-progress-value"},
"b22ae7ee": {"dfnID":"b22ae7ee","dfnText":"event handler content attributes","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handler-content-attributes"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes"},
"b2813b66": {"dfnID":"b2813b66","dfnText":"elapsedTime","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-animationevent-elapsedtime"}],"title":"6.2. Types of TransitionEvent"}],"url":"https://drafts.csswg.org/css-animations-1/#dom-animationevent-elapsedtime"},
"before-change-style": {"dfnID":"before-change-style","dfnText":"before-change style","external":false,"refSections":[{"refs":[{"id":"ref-for-before-change-style"},{"id":"ref-for-before-change-style\u2460"},{"id":"ref-for-before-change-style\u2461"},{"id":"ref-for-before-change-style\u2462"},{"id":"ref-for-before-change-style\u2463"},{"id":"ref-for-before-change-style\u2464"}],"title":"3. Starting of transitions"}],"url":"#before-change-style"},
"c388d253": {"dfnID":"c388d253","dfnText":"inherit","external":true,"refSections":[{"refs":[{"id":"ref-for-valdef-all-inherit"}],"title":"2.1. The transition-property Property"}],"url":"https://drafts.csswg.org/css-cascade-5/#valdef-all-inherit"},
"c52b11fb": {"dfnID":"c52b11fb","dfnText":"combining shadow lists","external":true,"refSections":[{"refs":[{"id":"ref-for-combining-shadow-lists"}],"title":"3. Starting of transitions"}],"url":"https://drafts.csswg.org/web-animations-1/#combining-shadow-lists"},
"c974a599": {"dfnID":"c974a599","dfnText":"interpolation","external":true,"refSections":[{"refs":[{"id":"ref-for-interpolation"}],"title":"2.3. The transition-timing-function Property"},{"refs":[{"id":"ref-for-interpolation\u2460"},{"id":"ref-for-interpolation\u2461"}],"title":"4. Application of transitions"}],"url":"https://drafts.csswg.org/css-values-4/#interpolation"},
"completed-transition": {"dfnID":"completed-transition","dfnText":"completed transitions","external":false,"refSections":[{"refs":[{"id":"ref-for-completed-transition"},{"id":"ref-for-completed-transition\u2460"},{"id":"ref-for-completed-transition\u2461"},{"id":"ref-for-completed-transition\u2462"},{"id":"ref-for-completed-transition\u2463"},{"id":"ref-for-completed-transition\u2464"},{"id":"ref-for-completed-transition\u2465"},{"id":"ref-for-completed-transition\u2466"},{"id":"ref-for-completed-transition\u2467"},{"id":"ref-for-completed-transition\u2468"},{"id":"ref-for-completed-transition\u2460\u24ea"},{"id":"ref-for-completed-transition\u2460\u2460"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-completed-transition\u2460\u2461"},{"id":"ref-for-completed-transition\u2460\u2462"}],"title":"5. Completion of transitions"}],"url":"#completed-transition"},
"current-value": {"dfnID":"current-value","dfnText":"current value","external":false,"refSections":[{"refs":[{"id":"ref-for-current-value"},{"id":"ref-for-current-value\u2460"},{"id":"ref-for-current-value\u2461"},{"id":"ref-for-current-value\u2462"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-current-value\u2463"},{"id":"ref-for-current-value\u2464"}],"title":"4. Application of transitions"}],"url":"#current-value"},
"d4689c67": {"dfnID":"d4689c67","dfnText":"event handler idl attributes","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handler-idl-attributes"},{"id":"ref-for-event-handler-idl-attributes\u2460"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"},{"refs":[{"id":"ref-for-event-handler-idl-attributes\u2461"}],"title":"7. DOM Interfaces"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"},
"d8586311": {"dfnID":"d8586311","dfnText":"interpolate","external":true,"refSections":[{"refs":[{"id":"ref-for-interpolation"}],"title":"2.3. The transition-timing-function Property"},{"refs":[{"id":"ref-for-interpolation\u2460"},{"id":"ref-for-interpolation\u2461"}],"title":"4. Application of transitions"}],"url":"https://drafts.csswg.org/css-values-4/#interpolation"},
"d95397a7": {"dfnID":"d95397a7","dfnText":"all","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-all"}],"title":"2.1. The transition-property Property"}],"url":"https://drafts.csswg.org/css-cascade-5/#propdef-all"},
"de6d76c2": {"dfnID":"de6d76c2","dfnText":"cascade","external":true,"refSections":[{"refs":[{"id":"ref-for-cascade"}],"title":"10.2. Cascade"}],"url":"https://drafts.csswg.org/css-cascade-6/#cascade"},
"dfn-complete": {"dfnID":"dfn-complete","dfnText":"complete","external":false,"refSections":[],"url":"#dfn-complete"},
"dictdef-transitioneventinit": {"dfnID":"dictdef-transitioneventinit","dfnText":"TransitionEventInit","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-transitioneventinit"}],"title":"6.1.1. IDL Definition"}],"url":"#dictdef-transitioneventinit"},
"dom-globaleventhandlers-ontransitioncancel": {"dfnID":"dom-globaleventhandlers-ontransitioncancel","dfnText":"ontransitioncancel","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-globaleventhandlers-ontransitioncancel"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"#dom-globaleventhandlers-ontransitioncancel"},
"dom-globaleventhandlers-ontransitionend": {"dfnID":"dom-globaleventhandlers-ontransitionend","dfnText":"ontransitionend","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-globaleventhandlers-ontransitionend"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"#dom-globaleventhandlers-ontransitionend"},
"dom-globaleventhandlers-ontransitionrun": {"dfnID":"dom-globaleventhandlers-ontransitionrun","dfnText":"ontransitionrun","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-globaleventhandlers-ontransitionrun"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"#dom-globaleventhandlers-ontransitionrun"},
"dom-globaleventhandlers-ontransitionstart": {"dfnID":"dom-globaleventhandlers-ontransitionstart","dfnText":"ontransitionstart","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-globaleventhandlers-ontransitionstart"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"#dom-globaleventhandlers-ontransitionstart"},
"dom-transitionevent-transitionevent": {"dfnID":"dom-transitionevent-transitionevent","dfnText":"TransitionEvent(type, transitionEventInitDict)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-transitionevent-transitionevent"}],"title":"6.1.1. IDL Definition"}],"url":"#dom-transitionevent-transitionevent"},
"dom-transitionevent-transitionevent-type-transitioneventinitdict-transitioneventinitdict": {"dfnID":"dom-transitionevent-transitionevent-type-transitioneventinitdict-transitioneventinitdict","dfnText":"transitionEventInitDict","external":false,"refSections":[],"url":"#dom-transitionevent-transitionevent-type-transitioneventinitdict-transitioneventinitdict"},
"dom-transitionevent-transitionevent-type-transitioneventinitdict-type": {"dfnID":"dom-transitionevent-transitionevent-type-transitioneventinitdict-type","dfnText":"type","external":false,"refSections":[],"url":"#dom-transitionevent-transitionevent-type-transitioneventinitdict-type"},
"dom-transitioneventinit-elapsedtime": {"dfnID":"dom-transitioneventinit-elapsedtime","dfnText":"elapsedTime","external":false,"refSections":[],"url":"#dom-transitioneventinit-elapsedtime"},
"dom-transitioneventinit-propertyname": {"dfnID":"dom-transitioneventinit-propertyname","dfnText":"propertyName","external":false,"refSections":[],"url":"#dom-transitioneventinit-propertyname"},
"dom-transitioneventinit-pseudoelement": {"dfnID":"dom-transitioneventinit-pseudoelement","dfnText":"pseudoElement","external":false,"refSections":[],"url":"#dom-transitioneventinit-pseudoelement"},
"e274345c": {"dfnID":"e274345c","dfnText":"<custom-ident>","external":true,"refSections":[{"refs":[{"id":"ref-for-identifier-value"},{"id":"ref-for-identifier-value\u2460"},{"id":"ref-for-identifier-value\u2461"}],"title":"2.1. The transition-property Property"}],"url":"https://drafts.csswg.org/css-values-4/#identifier-value"},
"e2e08d07": {"dfnID":"e2e08d07","dfnText":"transform","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-transform"}],"title":"8. Security Considerations"}],"url":"https://drafts.csswg.org/css-transforms-1/#propdef-transform"},
"e3ec4d32": {"dfnID":"e3ec4d32","dfnText":"discrete","external":true,"refSections":[{"refs":[{"id":"ref-for-discrete"},{"id":"ref-for-discrete\u2460"},{"id":"ref-for-discrete\u2461"},{"id":"ref-for-discrete\u2462"}],"title":"3. Starting of transitions"}],"url":"https://drafts.csswg.org/web-animations-1/#discrete"},
"e9189aba": {"dfnID":"e9189aba","dfnText":"event handlers","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handlers"},{"id":"ref-for-event-handlers\u2460"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"},
"f0951476": {"dfnID":"f0951476","dfnText":"EventHandler","external":true,"refSections":[{"refs":[{"id":"ref-for-eventhandler"},{"id":"ref-for-eventhandler\u2460"},{"id":"ref-for-eventhandler\u2461"},{"id":"ref-for-eventhandler\u2462"}],"title":"7.1. IDL Definition"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"},
"f831c141": {"dfnID":"f831c141","dfnText":"background-image","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-background-image"}],"title":"2. Transitions"}],"url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image"},
"f87fb171": {"dfnID":"f87fb171","dfnText":"dispatch","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-event-dispatch"}],"title":"6. Transition Events"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#concept-event-dispatch"},
"matching-transition-delay": {"dfnID":"matching-transition-delay","dfnText":"matching transition delay","external":false,"refSections":[{"refs":[{"id":"ref-for-matching-transition-delay"},{"id":"ref-for-matching-transition-delay\u2460"},{"id":"ref-for-matching-transition-delay\u2461"},{"id":"ref-for-matching-transition-delay\u2462"},{"id":"ref-for-matching-transition-delay\u2463"},{"id":"ref-for-matching-transition-delay\u2464"},{"id":"ref-for-matching-transition-delay\u2465"}],"title":"3. Starting of transitions"}],"url":"#matching-transition-delay"},
"matching-transition-duration": {"dfnID":"matching-transition-duration","dfnText":"matching transition duration","external":false,"refSections":[{"refs":[{"id":"ref-for-matching-transition-duration"},{"id":"ref-for-matching-transition-duration\u2460"},{"id":"ref-for-matching-transition-duration\u2461"},{"id":"ref-for-matching-transition-duration\u2462"}],"title":"3. Starting of transitions"}],"url":"#matching-transition-duration"},
"matching-transition-property-value": {"dfnID":"matching-transition-property-value","dfnText":"matching transition-property value","external":false,"refSections":[{"refs":[{"id":"ref-for-matching-transition-property-value"},{"id":"ref-for-matching-transition-property-value\u2460"},{"id":"ref-for-matching-transition-property-value\u2461"}],"title":"3. Starting of transitions"}],"url":"#matching-transition-property-value"},
"matching-transition-timing-function": {"dfnID":"matching-transition-timing-function","dfnText":"matching transition timing function","external":false,"refSections":[],"url":"#matching-transition-timing-function"},
"propdef-transition": {"dfnID":"propdef-transition","dfnText":"transition","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-transition"},{"id":"ref-for-propdef-transition\u2460"}],"title":"2.5. The transition Shorthand Property"},{"refs":[{"id":"ref-for-propdef-transition\u2461"},{"id":"ref-for-propdef-transition\u2462"}],"title":"3. Starting of transitions"}],"url":"#propdef-transition"},
"propdef-transition-delay": {"dfnID":"propdef-transition-delay","dfnText":"transition-delay","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-transition-delay"}],"title":"2.1. The transition-property Property"},{"refs":[{"id":"ref-for-propdef-transition-delay\u2460"},{"id":"ref-for-propdef-transition-delay\u2461"},{"id":"ref-for-propdef-transition-delay\u2462"},{"id":"ref-for-propdef-transition-delay\u2463"},{"id":"ref-for-propdef-transition-delay\u2464"}],"title":"2.4. The transition-delay Property"},{"refs":[{"id":"ref-for-propdef-transition-delay\u2465"},{"id":"ref-for-propdef-transition-delay\u2466"},{"id":"ref-for-propdef-transition-delay\u2467"},{"id":"ref-for-propdef-transition-delay\u2468"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-propdef-transition-delay\u2460\u24ea"},{"id":"ref-for-propdef-transition-delay\u2460\u2460"},{"id":"ref-for-propdef-transition-delay\u2460\u2461"},{"id":"ref-for-propdef-transition-delay\u2460\u2462"},{"id":"ref-for-propdef-transition-delay\u2460\u2463"}],"title":"6.2. Types of TransitionEvent"}],"url":"#propdef-transition-delay"},
"propdef-transition-duration": {"dfnID":"propdef-transition-duration","dfnText":"transition-duration","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-transition-duration"}],"title":"2.1. The transition-property Property"},{"refs":[{"id":"ref-for-propdef-transition-duration\u2460"},{"id":"ref-for-propdef-transition-duration\u2461"},{"id":"ref-for-propdef-transition-duration\u2462"}],"title":"2.2. The transition-duration Property"},{"refs":[{"id":"ref-for-propdef-transition-duration\u2463"},{"id":"ref-for-propdef-transition-duration\u2464"},{"id":"ref-for-propdef-transition-duration\u2465"},{"id":"ref-for-propdef-transition-duration\u2466"},{"id":"ref-for-propdef-transition-duration\u2467"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-propdef-transition-duration\u2468"},{"id":"ref-for-propdef-transition-duration\u2460\u24ea"},{"id":"ref-for-propdef-transition-duration\u2460\u2460"}],"title":"6.2. Types of TransitionEvent"}],"url":"#propdef-transition-duration"},
"propdef-transition-property": {"dfnID":"propdef-transition-property","dfnText":"transition-property","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-transition-property"},{"id":"ref-for-propdef-transition-property\u2460"},{"id":"ref-for-propdef-transition-property\u2461"}],"title":"2. Transitions"},{"refs":[{"id":"ref-for-propdef-transition-property\u2462"},{"id":"ref-for-propdef-transition-property\u2463"},{"id":"ref-for-propdef-transition-property\u2464"},{"id":"ref-for-propdef-transition-property\u2465"}],"title":"2.1. The transition-property Property"},{"refs":[{"id":"ref-for-propdef-transition-property\u2466"},{"id":"ref-for-propdef-transition-property\u2467"},{"id":"ref-for-propdef-transition-property\u2468"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-propdef-transition-property\u2460\u24ea"}],"title":"6.1.2. Attributes"},{"refs":[{"id":"ref-for-propdef-transition-property\u2460\u2460"}],"title":"6.2. Types of TransitionEvent"}],"url":"#propdef-transition-property"},
"propdef-transition-timing-function": {"dfnID":"propdef-transition-timing-function","dfnText":"transition-timing-function","external":false,"refSections":[{"refs":[{"id":"ref-for-propdef-transition-timing-function"}],"title":"2.1. The transition-property Property"},{"refs":[{"id":"ref-for-propdef-transition-timing-function\u2460"},{"id":"ref-for-propdef-transition-timing-function\u2461"}],"title":"2.3. The transition-timing-function Property"},{"refs":[{"id":"ref-for-propdef-transition-timing-function\u2462"},{"id":"ref-for-propdef-transition-timing-function\u2463"},{"id":"ref-for-propdef-transition-timing-function\u2464"},{"id":"ref-for-propdef-transition-timing-function\u2465"}],"title":"3. Starting of transitions"}],"url":"#propdef-transition-timing-function"},
"running-transition": {"dfnID":"running-transition","dfnText":"running transitions","external":false,"refSections":[{"refs":[{"id":"ref-for-running-transition"},{"id":"ref-for-running-transition\u2460"},{"id":"ref-for-running-transition\u2461"},{"id":"ref-for-running-transition\u2462"},{"id":"ref-for-running-transition\u2463"},{"id":"ref-for-running-transition\u2464"},{"id":"ref-for-running-transition\u2465"},{"id":"ref-for-running-transition\u2466"},{"id":"ref-for-running-transition\u2467"},{"id":"ref-for-running-transition\u2468"},{"id":"ref-for-running-transition\u2460\u24ea"},{"id":"ref-for-running-transition\u2460\u2460"},{"id":"ref-for-running-transition\u2460\u2461"},{"id":"ref-for-running-transition\u2460\u2462"},{"id":"ref-for-running-transition\u2460\u2463"},{"id":"ref-for-running-transition\u2460\u2464"},{"id":"ref-for-running-transition\u2460\u2465"},{"id":"ref-for-running-transition\u2460\u2466"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-running-transition\u2460\u2467"},{"id":"ref-for-running-transition\u2460\u2468"},{"id":"ref-for-running-transition\u2461\u24ea"}],"title":"5. Completion of transitions"},{"refs":[{"id":"ref-for-running-transition\u2461\u2460"}],"title":"6.2. Types of TransitionEvent"}],"url":"#running-transition"},
"single-transition": {"dfnID":"single-transition","dfnText":"<single-transition>","external":false,"refSections":[{"refs":[{"id":"ref-for-single-transition"},{"id":"ref-for-single-transition\u2460"}],"title":"2.5. The transition Shorthand Property"}],"url":"#single-transition"},
"single-transition-property": {"dfnID":"single-transition-property","dfnText":"<single-transition-property>","external":false,"refSections":[{"refs":[{"id":"ref-for-single-transition-property"},{"id":"ref-for-single-transition-property\u2460"}],"title":"2.1. The transition-property Property"},{"refs":[{"id":"ref-for-single-transition-property\u2461"},{"id":"ref-for-single-transition-property\u2462"}],"title":"2.5. The transition Shorthand Property"}],"url":"#single-transition-property"},
"style-change-event": {"dfnID":"style-change-event","dfnText":"style change event","external":false,"refSections":[{"refs":[{"id":"ref-for-style-change-event"},{"id":"ref-for-style-change-event\u2460"},{"id":"ref-for-style-change-event\u2461"},{"id":"ref-for-style-change-event\u2462"},{"id":"ref-for-style-change-event\u2463"},{"id":"ref-for-style-change-event\u2464"},{"id":"ref-for-style-change-event\u2465"},{"id":"ref-for-style-change-event\u2466"},{"id":"ref-for-style-change-event\u2467"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-style-change-event\u2468"}],"title":"5. Completion of transitions"}],"url":"#style-change-event"},
"transition-cancel": {"dfnID":"transition-cancel","dfnText":"cancel","external":false,"refSections":[],"url":"#transition-cancel"},
"transition-combined-duration": {"dfnID":"transition-combined-duration","dfnText":"combined duration","external":false,"refSections":[{"refs":[{"id":"ref-for-transition-combined-duration"},{"id":"ref-for-transition-combined-duration\u2460"}],"title":"3. Starting of transitions"}],"url":"#transition-combined-duration"},
"transition-end-time": {"dfnID":"transition-end-time","dfnText":"end time","external":false,"refSections":[],"url":"#transition-end-time"},
"transition-end-value": {"dfnID":"transition-end-value","dfnText":"end value","external":false,"refSections":[{"refs":[{"id":"ref-for-transition-end-value"},{"id":"ref-for-transition-end-value\u2460"},{"id":"ref-for-transition-end-value\u2461"},{"id":"ref-for-transition-end-value\u2462"},{"id":"ref-for-transition-end-value\u2463"},{"id":"ref-for-transition-end-value\u2464"},{"id":"ref-for-transition-end-value\u2465"},{"id":"ref-for-transition-end-value\u2466"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-transition-end-value\u2467"}],"title":"4. Application of transitions"}],"url":"#transition-end-value"},
"transition-reversing-adjusted-start-value": {"dfnID":"transition-reversing-adjusted-start-value","dfnText":"reversing-adjusted start value","external":false,"refSections":[{"refs":[{"id":"ref-for-transition-reversing-adjusted-start-value"},{"id":"ref-for-transition-reversing-adjusted-start-value\u2460"},{"id":"ref-for-transition-reversing-adjusted-start-value\u2461"},{"id":"ref-for-transition-reversing-adjusted-start-value\u2462"},{"id":"ref-for-transition-reversing-adjusted-start-value\u2463"},{"id":"ref-for-transition-reversing-adjusted-start-value\u2464"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-transition-reversing-adjusted-start-value\u2465"}],"title":"3.1. Faster reversing of interrupted transitions"}],"url":"#transition-reversing-adjusted-start-value"},
"transition-reversing-shortening-factor": {"dfnID":"transition-reversing-shortening-factor","dfnText":"reversing shortening factor","external":false,"refSections":[{"refs":[{"id":"ref-for-transition-reversing-shortening-factor"},{"id":"ref-for-transition-reversing-shortening-factor\u2460"},{"id":"ref-for-transition-reversing-shortening-factor\u2461"},{"id":"ref-for-transition-reversing-shortening-factor\u2462"},{"id":"ref-for-transition-reversing-shortening-factor\u2463"},{"id":"ref-for-transition-reversing-shortening-factor\u2464"},{"id":"ref-for-transition-reversing-shortening-factor\u2465"},{"id":"ref-for-transition-reversing-shortening-factor\u2466"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-transition-reversing-shortening-factor\u2467"},{"id":"ref-for-transition-reversing-shortening-factor\u2468"}],"title":"3.1. Faster reversing of interrupted transitions"}],"url":"#transition-reversing-shortening-factor"},
"transition-start-time": {"dfnID":"transition-start-time","dfnText":"start time","external":false,"refSections":[{"refs":[{"id":"ref-for-transition-start-time"},{"id":"ref-for-transition-start-time\u2460"},{"id":"ref-for-transition-start-time\u2461"},{"id":"ref-for-transition-start-time\u2462"},{"id":"ref-for-transition-start-time\u2463"},{"id":"ref-for-transition-start-time\u2464"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-transition-start-time\u2465"},{"id":"ref-for-transition-start-time\u2466"}],"title":"4. Application of transitions"}],"url":"#transition-start-time"},
"transition-start-value": {"dfnID":"transition-start-value","dfnText":"start value","external":false,"refSections":[{"refs":[{"id":"ref-for-transition-start-value"},{"id":"ref-for-transition-start-value\u2460"},{"id":"ref-for-transition-start-value\u2461"},{"id":"ref-for-transition-start-value\u2462"},{"id":"ref-for-transition-start-value\u2463"}],"title":"3. Starting of transitions"},{"refs":[{"id":"ref-for-transition-start-value\u2464"},{"id":"ref-for-transition-start-value\u2465"}],"title":"4. Application of transitions"}],"url":"#transition-start-value"},
"transitionable": {"dfnID":"transitionable","dfnText":"transitionable","external":false,"refSections":[{"refs":[{"id":"ref-for-transitionable"},{"id":"ref-for-transitionable\u2460"},{"id":"ref-for-transitionable\u2461"},{"id":"ref-for-transitionable\u2462"}],"title":"3. Starting of transitions"}],"url":"#transitionable"},
"transitioncancel": {"dfnID":"transitioncancel","dfnText":"transitioncancel","external":false,"refSections":[{"refs":[{"id":"ref-for-transitioncancel"},{"id":"ref-for-transitioncancel\u2460"}],"title":"6.2. Types of TransitionEvent"},{"refs":[{"id":"ref-for-transitioncancel\u2461"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"#transitioncancel"},
"transitionend": {"dfnID":"transitionend","dfnText":"transitionend","external":false,"refSections":[{"refs":[{"id":"ref-for-transitionend"}],"title":"6.2. Types of TransitionEvent"},{"refs":[{"id":"ref-for-transitionend\u2460"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"#transitionend"},
"transitionevent": {"dfnID":"transitionevent","dfnText":"TransitionEvent","external":false,"refSections":[{"refs":[{"id":"ref-for-transitionevent"},{"id":"ref-for-transitionevent\u2460"}],"title":"6.1. Interface TransitionEvent"}],"url":"#transitionevent"},
"transitionrun": {"dfnID":"transitionrun","dfnText":"transitionrun","external":false,"refSections":[{"refs":[{"id":"ref-for-transitionrun"},{"id":"ref-for-transitionrun\u2460"}],"title":"6.2. Types of TransitionEvent"},{"refs":[{"id":"ref-for-transitionrun\u2461"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"#transitionrun"},
"transitionstart": {"dfnID":"transitionstart","dfnText":"transitionstart","external":false,"refSections":[{"refs":[{"id":"ref-for-transitionstart"},{"id":"ref-for-transitionstart\u2460"}],"title":"6.2. Types of TransitionEvent"},{"refs":[{"id":"ref-for-transitionstart\u2461"}],"title":"6.3. Event handlers on elements, Document objects, and Window objects"}],"url":"#transitionstart"},
"valdef-transition-property-all": {"dfnID":"valdef-transition-property-all","dfnText":"all","external":false,"refSections":[{"refs":[{"id":"ref-for-valdef-transition-property-all"},{"id":"ref-for-valdef-transition-property-all\u2460"},{"id":"ref-for-valdef-transition-property-all\u2461"},{"id":"ref-for-valdef-transition-property-all\u2462"},{"id":"ref-for-valdef-transition-property-all\u2463"},{"id":"ref-for-valdef-transition-property-all\u2464"}],"title":"2.1. The transition-property Property"}],"url":"#valdef-transition-property-all"},
"valdef-transition-property-none": {"dfnID":"valdef-transition-property-none","dfnText":"none","external":false,"refSections":[{"refs":[{"id":"ref-for-valdef-transition-property-none"},{"id":"ref-for-valdef-transition-property-none\u2460"},{"id":"ref-for-valdef-transition-property-none\u2461"}],"title":"2.1. The transition-property Property"},{"refs":[{"id":"ref-for-valdef-transition-property-none\u2462"},{"id":"ref-for-valdef-transition-property-none\u2463"}],"title":"2.5. The transition Shorthand Property"}],"url":"#valdef-transition-property-none"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-link-titles */
"use strict";
{
let linkTitleData = {
"https://drafts.csswg.org/css-easing-2/#typedef-easing-function": "Expands to: linear",
"https://drafts.csswg.org/css-values-3/#time-value": "Expands to: ms | s",
};

function setTypeTitles() {
	for(let el of document.querySelectorAll("a[href]")) {
		if(el.href in linkTitleData && !el.hasAttribute("title")) {
			el.setAttribute("title", linkTitleData[el.href]);
		}
	}
}

document.addEventListener("DOMContentLoaded", setTypeTitles);
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#Events-TransitionEvent-elapsedTime": {"export":true,"for_":["TransitionEvent"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"elapsedTime","type":"attribute","url":"#Events-TransitionEvent-elapsedTime"},
"#Events-TransitionEvent-propertyName": {"export":true,"for_":["TransitionEvent"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"propertyName","type":"attribute","url":"#Events-TransitionEvent-propertyName"},
"#Events-TransitionEvent-pseudoElement": {"export":true,"for_":["TransitionEvent"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"pseudoElement","type":"attribute","url":"#Events-TransitionEvent-pseudoElement"},
"#after-change-style": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"after-change style","type":"dfn","url":"#after-change-style"},
"#before-change-style": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"before-change style","type":"dfn","url":"#before-change-style"},
"#completed-transition": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"completed transition","type":"dfn","url":"#completed-transition"},
"#current-value": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"current value","type":"dfn","url":"#current-value"},
"#dictdef-transitioneventinit": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"TransitionEventInit","type":"dictionary","url":"#dictdef-transitioneventinit"},
"#dom-globaleventhandlers-ontransitioncancel": {"export":true,"for_":["GlobalEventHandlers"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"ontransitioncancel","type":"attribute","url":"#dom-globaleventhandlers-ontransitioncancel"},
"#dom-globaleventhandlers-ontransitionend": {"export":true,"for_":["GlobalEventHandlers"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"ontransitionend","type":"attribute","url":"#dom-globaleventhandlers-ontransitionend"},
"#dom-globaleventhandlers-ontransitionrun": {"export":true,"for_":["GlobalEventHandlers"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"ontransitionrun","type":"attribute","url":"#dom-globaleventhandlers-ontransitionrun"},
"#dom-globaleventhandlers-ontransitionstart": {"export":true,"for_":["GlobalEventHandlers"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"ontransitionstart","type":"attribute","url":"#dom-globaleventhandlers-ontransitionstart"},
"#dom-transitionevent-transitionevent": {"export":true,"for_":["TransitionEvent"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"TransitionEvent(type, transitionEventInitDict)","type":"constructor","url":"#dom-transitionevent-transitionevent"},
"#matching-transition-delay": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"matching transition delay","type":"dfn","url":"#matching-transition-delay"},
"#matching-transition-duration": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"matching transition duration","type":"dfn","url":"#matching-transition-duration"},
"#matching-transition-property-value": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"matching transition-property value","type":"dfn","url":"#matching-transition-property-value"},
"#propdef-transition": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transition","type":"property","url":"#propdef-transition"},
"#propdef-transition-delay": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transition-delay","type":"property","url":"#propdef-transition-delay"},
"#propdef-transition-duration": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transition-duration","type":"property","url":"#propdef-transition-duration"},
"#propdef-transition-property": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transition-property","type":"property","url":"#propdef-transition-property"},
"#propdef-transition-timing-function": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transition-timing-function","type":"property","url":"#propdef-transition-timing-function"},
"#running-transition": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"running transition","type":"dfn","url":"#running-transition"},
"#single-transition": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"<single-transition>","type":"type","url":"#single-transition"},
"#single-transition-property": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"<single-transition-property>","type":"type","url":"#single-transition-property"},
"#style-change-event": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"style change event","type":"dfn","url":"#style-change-event"},
"#transition-combined-duration": {"export":true,"for_":["transition"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"combined duration","type":"dfn","url":"#transition-combined-duration"},
"#transition-end-value": {"export":true,"for_":["transition"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"end value","type":"dfn","url":"#transition-end-value"},
"#transition-reversing-adjusted-start-value": {"export":true,"for_":["transition"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"reversing-adjusted start value","type":"dfn","url":"#transition-reversing-adjusted-start-value"},
"#transition-reversing-shortening-factor": {"export":true,"for_":["transition"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"reversing shortening factor","type":"dfn","url":"#transition-reversing-shortening-factor"},
"#transition-start-time": {"export":true,"for_":["transition"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"start time","type":"dfn","url":"#transition-start-time"},
"#transition-start-value": {"export":true,"for_":["transition"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"start value","type":"dfn","url":"#transition-start-value"},
"#transitionable": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transitionable","type":"dfn","url":"#transitionable"},
"#transitioncancel": {"export":true,"for_":["transitionevent"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transitioncancel","type":"event","url":"#transitioncancel"},
"#transitionend": {"export":true,"for_":["transitionevent"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transitionend","type":"event","url":"#transitionend"},
"#transitionevent": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"TransitionEvent","type":"interface","url":"#transitionevent"},
"#transitionrun": {"export":true,"for_":["transitionevent"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transitionrun","type":"event","url":"#transitionrun"},
"#transitionstart": {"export":true,"for_":["transitionevent"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"transitionstart","type":"event","url":"#transitionstart"},
"#valdef-transition-property-all": {"export":true,"for_":["transition-property"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"all","type":"value","url":"#valdef-transition-property-all"},
"#valdef-transition-property-none": {"export":true,"for_":["transition-property"],"level":"1","normative":true,"shortname":"css-transitions","spec":"css-transitions-1","status":"local","text":"none","type":"value","url":"#valdef-transition-property-none"},
"http://w3c.github.io/dom/#constructing-events": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transitions","spec":"","status":"anchor-block","text":"event constructor","type":"dfn","url":"http://w3c.github.io/dom/#constructing-events"},
"https://dom.spec.whatwg.org/#dictdef-eventinit": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"EventInit","type":"dictionary","url":"https://dom.spec.whatwg.org/#dictdef-eventinit"},
"https://dom.spec.whatwg.org/#event": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Event","type":"interface","url":"https://dom.spec.whatwg.org/#event"},
"https://drafts.csswg.org/css-animations-1/#dom-animationevent-elapsedtime": {"export":true,"for_":["AnimationEvent"],"level":"1","normative":true,"shortname":"css-animations","spec":"css-animations-1","status":"current","text":"elapsedTime","type":"attribute","url":"https://drafts.csswg.org/css-animations-1/#dom-animationevent-elapsedtime"},
"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-backgrounds","spec":"css-backgrounds-3","status":"current","text":"background-image","type":"property","url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image"},
"https://drafts.csswg.org/css-backgrounds-3/#propdef-box-shadow": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-backgrounds","spec":"css-backgrounds-3","status":"current","text":"box-shadow","type":"property","url":"https://drafts.csswg.org/css-backgrounds-3/#propdef-box-shadow"},
"https://drafts.csswg.org/css-cascade-5/#computed-value": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-cascade","spec":"css-cascade-5","status":"current","text":"computed value","type":"dfn","url":"https://drafts.csswg.org/css-cascade-5/#computed-value"},
"https://drafts.csswg.org/css-cascade-5/#propdef-all": {"export":true,"for_":[],"level":"5","normative":true,"shortname":"css-cascade","spec":"css-cascade-5","status":"current","text":"all","type":"property","url":"https://drafts.csswg.org/css-cascade-5/#propdef-all"},
"https://drafts.csswg.org/css-cascade-5/#valdef-all-inherit": {"export":true,"for_":["all"],"level":"5","normative":true,"shortname":"css-cascade","spec":"css-cascade-5","status":"current","text":"inherit","type":"value","url":"https://drafts.csswg.org/css-cascade-5/#valdef-all-inherit"},
"https://drafts.csswg.org/css-cascade-5/#valdef-all-initial": {"export":true,"for_":["all"],"level":"5","normative":true,"shortname":"css-cascade","spec":"css-cascade-5","status":"current","text":"initial","type":"value","url":"https://drafts.csswg.org/css-cascade-5/#valdef-all-initial"},
"https://drafts.csswg.org/css-cascade-6/#cascade": {"export":true,"for_":[],"level":"6","normative":true,"shortname":"css-cascade","spec":"css-cascade-6","status":"current","text":"cascade","type":"dfn","url":"https://drafts.csswg.org/css-cascade-6/#cascade"},
"https://drafts.csswg.org/css-easing-2/#input-progress-value": {"export":false,"for_":[],"level":"2","normative":true,"shortname":"css-easing","spec":"css-easing-2","status":"current","text":"input progress value","type":"dfn","url":"https://drafts.csswg.org/css-easing-2/#input-progress-value"},
"https://drafts.csswg.org/css-easing-2/#output-progress-value": {"export":false,"for_":[],"level":"2","normative":true,"shortname":"css-easing","spec":"css-easing-2","status":"current","text":"output progress value","type":"dfn","url":"https://drafts.csswg.org/css-easing-2/#output-progress-value"},
"https://drafts.csswg.org/css-easing-2/#typedef-easing-function": {"export":true,"for_":[],"level":"2","normative":true,"shortname":"css-easing","spec":"css-easing-2","status":"current","text":"<easing-function>","type":"type","url":"https://drafts.csswg.org/css-easing-2/#typedef-easing-function"},
"https://drafts.csswg.org/css-transforms-1/#propdef-transform": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css-transforms","spec":"css-transforms-1","status":"current","text":"transform","type":"property","url":"https://drafts.csswg.org/css-transforms-1/#propdef-transform"},
"https://drafts.csswg.org/css-values-3/#time-value": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-values","spec":"css-values-3","status":"current","text":"<time>","type":"type","url":"https://drafts.csswg.org/css-values-3/#time-value"},
"https://drafts.csswg.org/css-values-4/#comb-any": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"||","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-any"},
"https://drafts.csswg.org/css-values-4/#comb-one": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"|","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#comb-one"},
"https://drafts.csswg.org/css-values-4/#css-wide-keywords": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"css-wide keywords","type":"dfn","url":"https://drafts.csswg.org/css-values-4/#css-wide-keywords"},
"https://drafts.csswg.org/css-values-4/#identifier-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<custom-ident>","type":"type","url":"https://drafts.csswg.org/css-values-4/#identifier-value"},
"https://drafts.csswg.org/css-values-4/#interpolation": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"interpolate","type":"dfn","url":"https://drafts.csswg.org/css-values-4/#interpolation"},
"https://drafts.csswg.org/css-values-4/#mult-comma": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"#","type":"grammar","url":"https://drafts.csswg.org/css-values-4/#mult-comma"},
"https://drafts.csswg.org/cssom-1/#cssomstring": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"cssom","spec":"cssom-1","status":"current","text":"CSSOMString","type":"interface","url":"https://drafts.csswg.org/cssom-1/#cssomstring"},
"https://drafts.csswg.org/web-animations-1/#animation-type": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"web-animations","spec":"web-animations-1","status":"current","text":"animation type","type":"dfn","url":"https://drafts.csswg.org/web-animations-1/#animation-type"},
"https://drafts.csswg.org/web-animations-1/#combining-shadow-lists": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"web-animations","spec":"web-animations-1","status":"current","text":"combining shadow lists","type":"dfn","url":"https://drafts.csswg.org/web-animations-1/#combining-shadow-lists"},
"https://drafts.csswg.org/web-animations-1/#discrete": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"web-animations","spec":"web-animations-1","status":"current","text":"discrete","type":"dfn","url":"https://drafts.csswg.org/web-animations-1/#discrete"},
"https://drafts.csswg.org/web-animations-1/#not-animatable": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"web-animations","spec":"web-animations-1","status":"current","text":"not animatable","type":"dfn","url":"https://drafts.csswg.org/web-animations-1/#not-animatable"},
"https://html.spec.whatwg.org/#document": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"Document","type":"interface","url":"https://html.spec.whatwg.org/#document"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#concept-event-dispatch": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"dispatch","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#concept-event-dispatch"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#html-elements": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"html elements","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#html-elements"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"event handler content attributes","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"event handler event type","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"event handler idl attributes","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers": {"export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"event handlers","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"},
"https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"EventHandler","type":"typedef","url":"https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"},
"https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"GlobalEventHandlers","type":"interface","url":"https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers"},
"https://webidl.spec.whatwg.org/#Exposed": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#idl-double": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"double","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-double"},
"https://www.w3.org/TR/CSS21/colors.html#propdef-background-color": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css2","status":"current","text":"background-color","type":"property","url":"https://www.w3.org/TR/CSS21/colors.html#propdef-background-color"},
"https://www.w3.org/TR/CSS21/visudet.html#propdef-width": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css2","status":"current","text":"width","type":"property","url":"https://www.w3.org/TR/CSS21/visudet.html#propdef-width"},
"https://www.w3.org/TR/CSS21/visuren.html#propdef-left": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css2","status":"current","text":"left","type":"property","url":"https://www.w3.org/TR/CSS21/visuren.html#propdef-left"},
"https://www.w3.org/TR/CSS21/visuren.html#propdef-top": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"css","spec":"css2","status":"current","text":"top","type":"property","url":"https://www.w3.org/TR/CSS21/visuren.html#propdef-top"},
"https://www.w3.org/TR/css3-background/#shadow-inset": {"export":true,"for_":["shadow"],"level":"1","normative":true,"shortname":"css-transitions","spec":"","status":"anchor-block","text":"inset","type":"value","url":"https://www.w3.org/TR/css3-background/#shadow-inset"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>