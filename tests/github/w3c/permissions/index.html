<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Permissions</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
  <link href="https://www.w3.org/TR/permissions/" rel="canonical">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    /* white-space: pre; /* Do we need this? */
    /* display: inline-block; /* This forces multiple refs to wrap */
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    /* white-space: pre; /* Do we need this? */
    /* display: inline-block; /* This forces multiple refs to wrap */
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: red;
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: green;
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: red;
}
.mdn-anno > .feature > .all-engines-text {
	color: green;
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
</style>
<style>/* Boilerplate: style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */


@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)
*/
var { cursor: pointer; }
var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Permissions</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
      <dt>Previous Versions:
      <dd><a href="https://www.w3.org/TR/2017/WD-permissions-20170925/" rel="prev">https://www.w3.org/TR/2017/WD-permissions-20170925/</a>
      <dd><a href="https://www.w3.org/TR/2015/WD-permissions-20150407/" rel="prev">https://www.w3.org/TR/2015/WD-permissions-20150407/</a>
      <dt>Feedback:
      <dd><span><a href="mailto:public-webappsec@w3.org?subject=%5Bpermissions%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a> with subject line “<kbd>[permissions] <i data-lt>… message topic …</i></kbd>” (<a href="http://lists.w3.org/Archives/Public/public-webappsec/" rel="discussion">archives</a>)</span>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="45389"><span class="p-name fn">Mounir Lamouri</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
      <dd class="editor p-author h-card vcard" data-editor-id="39125"><span class="p-name fn">Marcos Cáceres</span> (<a class="p-org org" href="https://mozilla.com/">Mozilla</a>)
      <dd class="editor p-author h-card vcard" data-editor-id="72192"><span class="p-name fn">Jeffrey Yasskin</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
      <dt>Participate:
      <dd><a href="https://github.com/w3c/permissions">We are on Github.</a>
      <dd><a href="https://github.com/w3c/permissions/issues">File a bug.</a>
      <dd><a href="https://github.com/w3c/permissions/commits/gh-pages">Commit history.</a>
      <dt>Implementation status:
      <dd><a href="https://code.google.com/p/chromium/issues/detail?id=437770">Blink/Chromium</a>
      <dd><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1105827">Gecko</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The <cite>Permissions Standard</cite> defines common infrastructure for other specifications that need to interact with browser permissions. It also defines an API to allow web applications to query and request changes to the status of a given permission.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p> <strong>Changes to this document may be tracked at <a href="https://github.com/w3c/webappsec">https://github.com/w3c/webappsec</a>.</strong> </p>
   <p> The (<a href="https://lists.w3.org/Archives/Public/public-webappsec/">archived</a>) public mailing list <a href="mailto:public-webappsec@w3.org?Subject=%5Bpermissions%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a> (see <a href="https://www.w3.org/Mail/Request">instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “permissions” in the subject,
	preferably like this:
	“[permissions] <em>…summary of comment…</em>” </p>
   <p> This document was produced by the <a href="https://www.w3.org/groups/wg/webappsec">Web Application Security Working Group</a>. </p>
   <p> This document was produced by a group operating under
	the <a href="https://www.w3.org/Consortium/Patent-Policy/">W3C Patent Policy</a>.
	W3C maintains a <a href="https://www.w3.org/groups/wg/webappsec/ipr" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2021/Process-20211102/" id="w3c_process_revision">2 November 2021 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#scope-of-this-document"><span class="secno">1</span> <span class="content"> Scope of this document </span></a>
    <li><a href="#privacy-considerations"><span class="secno">2</span> <span class="content"> Privacy considerations </span></a>
    <li><a href="#definitions"><span class="secno">3</span> <span class="content">Definitions</span></a>
    <li><a href="#permission-descriptor"><span class="secno">4</span> <span class="content"> Descriptions of permission requests </span></a>
    <li>
     <a href="#permission-operations"><span class="secno">5</span> <span class="content">Permission states</span></a>
     <ol class="toc">
      <li><a href="#reading-current-states"><span class="secno">5.1</span> <span class="content">Reading the current permission state</span></a>
      <li><a href="#requesting-more-permission"><span class="secno">5.2</span> <span class="content">Requesting more permission</span></a>
      <li><a href="#reacting-to-revocation"><span class="secno">5.3</span> <span class="content">Reacting to users revoking permission</span></a>
     </ol>
    <li><a href="#status-of-a-permission"><span class="secno">6</span> <span class="content"> Status of a permission </span></a>
    <li><a href="#navigator-and-workernavigator-extension"><span class="secno">7</span> <span class="content"> Navigator and WorkerNavigator extension </span></a>
    <li><a href="#permissions-interface"><span class="secno">8</span> <span class="content"> Permissions interface </span></a>
    <li><a href="#common-permission-algorithms"><span class="secno">9</span> <span class="content"> Common permission algorithms </span></a>
    <li>
     <a href="#permission-registry"><span class="secno">10</span> <span class="content"> Permission Registry </span></a>
     <ol class="toc">
      <li><a href="#geolocation"><span class="secno">10.1</span> <span class="content"> Geolocation </span></a>
      <li><a href="#notifications"><span class="secno">10.2</span> <span class="content"> Notifications </span></a>
      <li><a href="#push"><span class="secno">10.3</span> <span class="content"> Push </span></a>
      <li><a href="#midi"><span class="secno">10.4</span> <span class="content"> Midi </span></a>
      <li><a href="#media-devices"><span class="secno">10.5</span> <span class="content"> Media Devices </span></a>
      <li><a href="#background-fetch"><span class="secno">10.6</span> <span class="content"> Background Fetch </span></a>
      <li><a href="#background-sync"><span class="secno">10.7</span> <span class="content"> Background Sync </span></a>
      <li><a href="#bluetooth"><span class="secno">10.8</span> <span class="content"> Bluetooth </span></a>
      <li><a href="#persistent-storage"><span class="secno">10.9</span> <span class="content"> Persistent Storage </span></a>
      <li><a href="#ambient-light-sensor"><span class="secno">10.10</span> <span class="content"> Ambient Light Sensor </span></a>
      <li><a href="#accelerometer"><span class="secno">10.11</span> <span class="content"> Accelerometer </span></a>
      <li><a href="#gyroscope"><span class="secno">10.12</span> <span class="content"> Gyroscope </span></a>
      <li><a href="#magnetometer"><span class="secno">10.13</span> <span class="content"> Magnetometer </span></a>
      <li><a href="#clipboard-read"><span class="secno">10.14</span> <span class="content"> Clipboard Read </span></a>
      <li><a href="#clipboard-write"><span class="secno">10.15</span> <span class="content"> Clipboard Write </span></a>
      <li><a href="#screen-capture"><span class="secno">10.16</span> <span class="content"> Screen Capture </span></a>
      <li><a href="#nfc"><span class="secno">10.17</span> <span class="content"> NFC </span></a>
     </ol>
    <li>
     <a href="#automation"><span class="secno">11</span> <span class="content"> Automation </span></a>
     <ol class="toc">
      <li><a href="#set-permission-command"><span class="secno">11.1</span> <span class="content"> Set Permission </span></a>
     </ol>
    <li><a href="#examples"><span class="secno">12</span> <span class="content"> Examples </span></a>
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content"> Acknowledgments </span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <section class="non-normative">
    <h2 class="heading settled" data-level="1" id="scope-of-this-document"><span class="secno">1. </span><span class="content"> Scope of this document </span><a class="self-link" href="#scope-of-this-document"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p> This document specifies a model for permissions to use powerful features on
    the Web platform and an API to query the current permission state of those
    features. </p>
    <p> Current Web APIs have different ways to deal with permissions. For example,
    the <a data-link-type="biblio" href="#biblio-notifications" title="Notifications API Standard">[notifications]</a> API allows developers to request a permission and
    check the permission status explicitly. Others expose the status to web
    pages when they try to use the API, like the <a data-link-type="biblio" href="#biblio-geolocation-api" title="Geolocation API Specification 2nd Edition">[geolocation-API]</a> which fails
    if the permission was not granted without allowing the developer to check
    beforehand. </p>
    <p> The <code class="idl"><a data-link-type="idl" href="#dom-permissions-query" id="ref-for-dom-permissions-query">query()</a></code> function provides a tool for developers to
    control when permission prompts are shown. </p>
    <p> The solution described in this document is meant to be extensible, but isn’t
    expected to be applicable to all the current and future permissions
    available in the web platform. Working Groups that are creating
    specifications whose permission model doesn’t fit in the model described in
    this document should contact the editors by <a href="https://github.com/w3c/permissions/issues">filing an issue</a>. </p>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="2" id="privacy-considerations"><span class="secno">2. </span><span class="content"> Privacy considerations </span><a class="self-link" href="#privacy-considerations"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p> An adversary could use a <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state">permission state</a> as an element in creating a
    "fingerprint" corresponding to an end-user. Although an adversary can
    already determine the state of a permission by actually using the API, that
    often leads to a permission request UI being presented to the end-user (if
    the permission was not already <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted">"granted"</a></code>). Thus, even though this API
    doesn’t expose new fingerprinting information to websites, it makes it
    easier for an adversary to have discreet access to this information. Thus,
    implementations are encouraged to have an option for users to block
    (globally or selectively) the querying of <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①">permission states</a>. </p>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="definitions"><span class="secno">3. </span><span class="content">Definitions</span><a class="self-link" href="#definitions"></a></h2>
    <dl>
     <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="new-information-about-the-users-intent">New information about the user’s intent</dfn>
     <dd>
       The UA may collect information about a user’s intentions in any way its
      authors believe is appropriate. This information can come from explicit
      user action, aggregate behavior of both the relevant user and other users,
      or <a data-link-type="dfn" href="#implicit-signals" id="ref-for-implicit-signals">implicit signals</a> this specification hasn’t anticipated. 
      <div class="note" role="note"> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="implicit-signals">implicit signals</dfn> could be, for example, the <a data-link-type="dfn" href="https://w3c.github.io/manifest/#dfn-install" id="ref-for-dfn-install">install</a> status of a web application or frequency and recency of
        visits. A user that has installed a web application and used it
        frequently and recently is more likely to trust it. Implementations are
        advised to exercise caution when relying on implicit signals. </div>
     <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-local-lt="feature" id="powerful-feature">Powerful feature</dfn>
     <dd> A feature of a UA that some code might not be allowed to access, for
      example because its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings object</a> doesn’t satisfy
      some criteria, or because the user hasn’t given permission. 
    </dl>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="permission-descriptor"><span class="secno">4. </span><span class="content"> Descriptions of permission requests </span><a class="self-link" href="#permission-descriptor"></a></h2>
<pre class="idl highlight def" title><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-permissiondescriptor"><code><c- g>PermissionDescriptor</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname"><c- n>PermissionName</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionDescriptor" data-dfn-type="dict-member" data-export data-type="PermissionName " id="dom-permissiondescriptor-name"><code><c- g>name</c-></code></dfn>;
};
</pre>
    <p> Each <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature">powerful feature</a> has one or more <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="aspects">aspects</dfn> that
    websites can request permission to access. To describe these aspects,
    each feature defines a subtype of <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor">PermissionDescriptor</a></code> to be its <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type">permission descriptor type</a>. </p>
    <div class="example" id="example-descriptors">
     <a class="self-link" href="#example-descriptors"></a> 
     <p> The <code class="idl"><a data-link-type="idl">"midi"</a></code> <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature①">feature</a> has two <a data-link-type="dfn" href="#aspects" id="ref-for-aspects">aspects</a>: access to normal messages, and
      access to system exclusive messages. Thus, its <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type①">permission descriptor type</a> is: </p>
<pre>dictionary MidiPermissionDescriptor : PermissionDescriptor {
  boolean sysex = false;
};
</pre>
     <p> The <code class="idl"><a data-link-type="idl">"bluetooth"</a></code> feature lets sites request to access whatever
      Bluetooth devices are close to to the user’s device. Thus, its <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type②">permission descriptor type</a> is: </p>
<pre>dictionary BluetoothPermissionDescriptor : PermissionDescriptor {
  DOMString deviceId;
  sequence&lt;<a data-link-type="idl" href="https://webbluetoothcg.github.io/web-bluetooth/#dictdef-bluetoothlescanfilterinit" id="ref-for-dictdef-bluetoothlescanfilterinit">BluetoothLEScanFilterInit</a>> filters;
  sequence&lt;<a data-link-type="idl" href="https://webbluetoothcg.github.io/web-bluetooth/#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a>> optionalServices = [];
  boolean acceptAllDevices = false;
};
</pre>
     <p> General access to Bluetooth devices is represented by <code>{name:       'bluetooth'}</code>; access to a particular device is represented by <code>{name:       'bluetooth', deviceId: "id"}</code>; and access to a device with a particular
      service is represented by <code>{name: 'bluetooth', filters: [{services:       ['service']}]}</code> </p>
    </div>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="permission-operations"><span class="secno">5. </span><span class="content">Permission states</span><a class="self-link" href="#permission-operations"></a></h2>
    <p> The user agent is responsible for tracking what <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature②">powerful features</a> each <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms" id="ref-for-sec-code-realms">realm</a> has the user’s permission to use. Other specifications can
    use the operations defined in this section to retrieve the UA’s notion of
    what permissions are granted or denied, and to ask the user to grant or deny
    more permissions. </p>
    <p> Other specifications can also add more constraints on the UA’s behavior in
    these algorithms. </p>
    <p> Within this section, <var>descriptor</var> is an instance of the <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type③">permission
    descriptor type</a> of the <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature③">powerful feature</a> named by <code><var>descriptor</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name">name</a></code></code>. </p>
    <section>
     <h3 class="heading settled" data-level="5.1" id="reading-current-states"><span class="secno">5.1. </span><span class="content">Reading the current permission state</span><a class="self-link" href="#reading-current-states"></a></h3>
     <div class="algorithm" data-algorithm="permission state">
      <p> A <var>descriptor</var>’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-local-lt="state" id="permission-state">permission state</dfn> for
        an optional <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①">environment settings object</a> <var>settings</var> is
        the result of the following algorithm, which returns one of <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①">"granted"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt">"prompt"</a></code>, or <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied">"denied"</a></code>: </p>
      <ol class="algorithm">
       <li> If <var>settings</var> wasn’t passed, set it to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object">current settings object</a>. 
       <li> If <var>settings</var> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#non-secure-context" id="ref-for-non-secure-context">non-secure context</a> and <code><var>descriptor</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①">name</a></code></code> isn’t <a data-link-type="dfn" href="#allowed-in-non-secure-contexts" id="ref-for-allowed-in-non-secure-contexts">allowed in non-secure contexts</a>, then return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①">"denied"</a></code>. 
       <li>
         If there exists a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" id="ref-for-policy-controlled-feature">policy-controlled feature</a> identified by <code><var>descriptor</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name②">name</a></code></code> and <var>settings</var> has an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window">associated <code>Document</code></a> named <var>document</var>, run the following step: 
        <ol class="algorithm">
         <li> If <var>document</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use">allowed to use</a> the feature
              identified by <code><var>descriptor</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name③">name</a></code></code> return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied②">"denied"</a></code>. 
        </ol>
       <li> If there was a previous invocation of this algorithm with the same <var>descriptor</var> and <var>settings</var>, returning <var>previousResult</var>, and the UA has not received <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent">new information about
          the user’s intent</a> since that invocation, return <var>previousResult</var>. 
       <li>
         Return whichever of the following options most accurately reflects the user’s
          intent for the calling algorithm, taking into account any <a data-link-type="dfn" href="#permission-state-constraints" id="ref-for-permission-state-constraints">permission state constraints</a> for <code><var>descriptor</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name④">name</a></code></code>: 
        <dl class="switch">
         <dt>succeed without prompting the user
         <dd><code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted②">"granted"</a></code>
         <dt>show the user a prompt to decide whether to succeed
         <dd><code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt①">"prompt"</a></code>
         <dt>fail without prompting the user
         <dd><code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied③">"denied"</a></code>
        </dl>
      </ol>
      <p class="issue" id="issue-current-entry-incumbent-or-relevant"><a class="self-link" href="#issue-current-entry-incumbent-or-relevant"></a> Safari is the only known UA that returns different results from this
        algorithm for different settings objects with the same origin. We should
        test which of the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#realms-settings-objects-global-objects">several
        possible settings objects</a> it uses. </p>
      <p> As a shorthand, a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname①">PermissionName</a></code> <var>name</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state②">permission state</a> is
        the <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state③">permission state</a> of a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor①">PermissionDescriptor</a></code> with its <code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name⑤">name</a></code> member set to <var>name</var>. </p>
     </div>
     <div class="algorithm" data-algorithm="extra permission data">
      <p> Some <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature④">powerful features</a> have more information associated with them
        than just a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionstate" id="ref-for-enumdef-permissionstate">PermissionState</a></code>. For example, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia" id="ref-for-dom-mediadevices-getusermedia">getUserMedia()</a></code> needs to determine <em>which</em> cameras
        the user has granted the <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#current-realm" id="ref-for-current-realm">current realm</a> permission to access. Each
        of these features defines an <a data-link-type="dfn" href="#extra-permission-data-type" id="ref-for-extra-permission-data-type">extra permission data type</a>. If a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname②">PermissionName</a></code> <var>name</var> names one of these features, then <var>name</var>’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="extra-permission-data">extra permission data</dfn> for an optional <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object②">environment
        settings object</a> <var>settings</var> is the result of the following algorithm: </p>
      <ol class="algorithm">
       <li> If <var>settings</var> wasn’t passed, set it to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object①">current settings object</a>. 
       <li> If there was a previous invocation of this algorithm with the same <var>name</var> and <var>settings</var>, returning <var>previousResult</var>, and the UA has not received <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent①">new information about
          the user’s intent</a> since that invocation, return <var>previousResult</var>. 
       <li> Return the instance of <var>name</var>’s <a data-link-type="dfn" href="#extra-permission-data-type" id="ref-for-extra-permission-data-type①">extra permission data type</a> that
          matches the UA’s impression of the user’s intent, taking into account
          any <a data-link-type="dfn" href="#extra-permission-data-constraints" id="ref-for-extra-permission-data-constraints">extra permission data constraints</a> for <var>name</var>. 
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.2" id="requesting-more-permission"><span class="secno">5.2. </span><span class="content">Requesting more permission</span><a class="self-link" href="#requesting-more-permission"></a></h3>
     <p class="note" role="note"> Spec authors, please note that algorithms in this section can wait for
      user input; so they shouldn’t be used from other algorithms running on
      the main thread. </p>
     <div class="algorithm" data-algorithm="request-permission-to-use">
      <p> To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="request permission to use|requesting permission to use" id="request-permission-to-use">request permission to use</dfn> a <var>descriptor</var>, the UA
        must perform the following steps. This algorithm returns either <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted③">"granted"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied④">"denied"</a></code>. </p>
      <ol>
       <li> Let <var>current state</var> be the <var>descriptor</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state④">permission
          state</a>. 
       <li> If <var>current state</var> is not <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt②">"prompt"</a></code>, return <var>current state</var> and abort these steps. 
       <li> Ask the user’s permission for the calling algorithm to use the <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature⑤">powerful feature</a> described by <var>descriptor</var>. 
       <li>
         If the user grants permission, return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted④">"granted"</a></code>; otherwise return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied⑤">"denied"</a></code>. The user’s interaction may provide <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent②">new information
          about the user’s intent</a> for this <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms" id="ref-for-sec-code-realms①">realm</a> and other <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms" id="ref-for-sec-code-realms②">realms</a> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin">same origin</a>. 
        <p class="note" role="note"> This is intentionally vague about the details of the permission UI
            and how the UA infers user intent. UAs should be able to explore
            lots of UI within this framework. </p>
      </ol>
      <p> As a shorthand, <a data-link-type="dfn" href="#request-permission-to-use" id="ref-for-request-permission-to-use">requesting permission to use</a> a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname③">PermissionName</a></code> <var>name</var>, is the same as <a data-link-type="dfn" href="#request-permission-to-use" id="ref-for-request-permission-to-use①">requesting permission to use</a> a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor②">PermissionDescriptor</a></code> with its <code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name⑥">name</a></code> member
        set to <var>name</var>. </p>
     </div>
     <div class="algorithm" data-algorithm="prompt-user-to-choose">
      <p> To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="prompt the user to choose|prompting the user to choose" id="prompt-the-user-to-choose">prompt the user to choose</dfn> one of several <var>options</var> associated with a <var>descriptor</var>, the UA must perform the following steps.
        This algorithm returns either <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied⑥">"denied"</a></code> or one of the options. </p>
      <ol>
       <li> If <var>descriptor</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state⑤">permission state</a> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied⑦">"denied"</a></code>,
          return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied⑧">"denied"</a></code> and abort these steps. 
       <li> If <var>descriptor</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state⑥">permission state</a> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑤">"granted"</a></code>, the UA may
          return one of <var>options</var> and abort these steps. If the UA returns
          without prompting, then subsequent <a data-link-type="dfn" href="#prompt-the-user-to-choose" id="ref-for-prompt-the-user-to-choose">prompts for the user to choose</a> from the same set of
          options with the same <var>descriptor</var> must return the same option, unless
          the UA receives <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent③">new information about the user’s intent</a>. 
       <li> Ask the user to choose one of the options or deny permission, and wait
          for them to choose. If the calling algorithm specified extra
          information to include in the prompt, include it. 
       <li>
         If the user chose an option, return it; otherwise return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied⑨">"denied"</a></code>.
          If the user’s interaction indicates they intend this choice to apply
          to other realms, then treat this this as <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent④">new information about
          the user’s intent</a> for other <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms" id="ref-for-sec-code-realms③">realms</a> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin①">same
          origin</a>. 
        <p class="note" role="note"> This is intentionally vague about the details of the permission UI
            and how the UA infers user intent. UAs should be able to explore
            lots of UI within this framework. </p>
      </ol>
      <p> As a shorthand, <a data-link-type="dfn" href="#prompt-the-user-to-choose" id="ref-for-prompt-the-user-to-choose①">prompting the user to choose</a> from options
        associated with a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname④">PermissionName</a></code> <var>name</var>, is the same as <a data-link-type="dfn" href="#prompt-the-user-to-choose" id="ref-for-prompt-the-user-to-choose②">prompting
        the user to choose</a> from those options associated with a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor③">PermissionDescriptor</a></code> with its <code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name⑦">name</a></code> member
        set to <var>name</var>. </p>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.3" id="reacting-to-revocation"><span class="secno">5.3. </span><span class="content">Reacting to users revoking permission</span><a class="self-link" href="#reacting-to-revocation"></a></h3>
     <p> When the UA learns that the user no longer intends to grant permission
      for a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms" id="ref-for-sec-code-realms④">realm</a> to use a <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature⑥">feature</a>, it must <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">queue a task</a> on the Realm’s <a data-link-type="dfn">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop" id="ref-for-responsible-event-loop">responsible event
      loop</a> to run that feature’s <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm">permission revocation algorithm</a>. </p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="6" id="status-of-a-permission"><span class="secno">6. </span><span class="content"> Status of a permission </span><a class="self-link" href="#status-of-a-permission"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-permissionstate"><code><c- g>PermissionState</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑥"><c- s>"granted"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①⓪"><c- s>"denied"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt③"><c- s>"prompt"</c-></a>,
};
</pre>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export id="dom-permissionstate-granted"><code>"granted"</code></dfn> state represents
    that the caller will be able
    to successfuly access the feature without having the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent">user agent</a> asking the user’s permission. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export id="dom-permissionstate-denied"><code>"denied"</code></dfn> state represents
    that the caller will not be
    able to access the feature. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export id="dom-permissionstate-prompt"><code>"prompt"</code></dfn> state represents
    that the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①">user agent</a> will be asking the user’s permission if the caller tries to access the
    feature. The user might grant, deny or dismiss the request. </p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="permissionstatus"><code><c- g>PermissionStatus</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-permissionstate" id="ref-for-enumdef-permissionstate①"><c- n>PermissionState</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="PermissionState" href="#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state"><c- g>state</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-permissionstatus-onchange" id="ref-for-dom-permissionstatus-onchange"><c- g>onchange</c-></a>;
};
</pre>
    <p> <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus">PermissionStatus</a></code> instances are created with a <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export id="dom-permissionstatus-query-slot"><code>[[query]]</code></dfn> internal slot, which is an
    instance of a feature’s <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type④">permission descriptor type</a>. </p>
    <p> To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-permissionstatus">create a PermissionStatus</dfn> for a given <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor④">PermissionDescriptor</a></code> <var>permissionDesc</var>, return a new instance of the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type">permission result
    type</a> for the feature named by <code><var>permissionDesc</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name⑧">name</a></code></code>,
    with the <code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot">[[query]]</a></code> internal slot initialized to <var>permissionDesc</var>. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export id="dom-permissionstatus-state"><code>state</code></dfn> attribute MUST return the latest value that was set on the current
    instance. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export id="dom-permissionstatus-onchange"><code>onchange</code></dfn> attribute is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers">event handler</a> whose corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type">event handler event
    type</a> is <code>change</code>. </p>
    <p id="PermissionStatus-update"> Whenever the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent②">user agent</a> is aware that the state of a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus①">PermissionStatus</a></code> instance <var>status</var> has changed,
    it MUST asynchronously run the following steps: </p>
    <ol>
     <li> Run <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot①">[[query]]</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name⑨">name</a></code></code>’s <a data-link-type="dfn" href="#permission-query-algorithm" id="ref-for-permission-query-algorithm">permission
      query algorithm</a>, passing <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot②">[[query]]</a></code></code> and <var>status</var>. 
     <li> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task①">Queue a task</a> on the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="permission-task-source">permission task source</dfn> to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">fire an event</a> named <code>change</code> at <var>status</var>. 
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="navigator-and-workernavigator-extension"><span class="secno">7. </span><span class="content"> Navigator and WorkerNavigator extension </span><a class="self-link" href="#navigator-and-workernavigator-extension"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->)]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator"><c- g>Navigator</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#permissions" id="ref-for-permissions"><c- n>Permissions</c-></a> <dfn class="idl-code" data-dfn-for="Navigator" data-dfn-type="attribute" data-export data-readonly data-type="Permissions" id="dom-navigator-permissions"><code><c- g>permissions</c-></code><a class="self-link" href="#dom-navigator-permissions"></a></dfn>;
};
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=(<c- n>Worker</c->)]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator" id="ref-for-workernavigator"><c- g>WorkerNavigator</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject①"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#permissions" id="ref-for-permissions①"><c- n>Permissions</c-></a> <dfn class="idl-code" data-dfn-for="WorkerNavigator" data-dfn-type="attribute" data-export data-readonly data-type="Permissions" id="dom-workernavigator-permissions"><code><c- g>permissions</c-></code><a class="self-link" href="#dom-workernavigator-permissions"></a></dfn>;
};
</pre>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="permissions-interface"><span class="secno">8. </span><span class="content"> Permissions interface </span><a class="self-link" href="#permissions-interface"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="permissions"><code><c- g>Permissions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#permissionstatus" id="ref-for-permissionstatus②"><c- n>PermissionStatus</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-query" id="ref-for-dom-permissions-query①"><c- g>query</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object"><c- b>object</c-></a> <dfn class="idl-code" data-dfn-for="Permissions/query(permissionDesc)" data-dfn-type="argument" data-export id="dom-permissions-query-permissiondesc-permissiondesc"><code><c- g>permissionDesc</c-></code><a class="self-link" href="#dom-permissions-query-permissiondesc-permissiondesc"></a></dfn>);
};
</pre>
    <p> When the <dfn class="dfn-paneled idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export id="dom-permissions-query"><code>query(permissionDesc)</code></dfn> method is
    invoked, the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent③">user agent</a> MUST run the following <dfn data-dfn-type="dfn" data-export data-lt="query a permission" id="query-a-permission">query a
    permission<a class="self-link" href="#query-a-permission"></a></dfn> algorithm, passing the parameter <var>permissionDesc</var>: </p>
    <ol>
     <li>Let <var>rootDesc</var> be the object <var>permissionDesc</var> refers to, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value" id="ref-for-dfn-convert-ecmascript-to-idl-value">converted to
    an IDL value</a> of type <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor⑤">PermissionDescriptor</a></code>. If this throws an
    exception, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> that exception and abort
    these steps. 
     <li>Let <var>typedDescriptor</var> be the object <var>permissionDesc</var> refers to, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value" id="ref-for-dfn-convert-ecmascript-to-idl-value①">converted to an IDL value</a> of <code><var>rootDesc</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①⓪">name</a></code></code>’s <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type⑤">permission
    descriptor type</a>. If this throws an exception, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①">a promise
    rejected with</a> that exception and abort these steps. 
     <li>Let <var>promise</var> be a newly-created <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①">Promise</a></code>. 
     <li>Return <var>promise</var> and continue the following steps
    asynchronously. 
     <li>Run the steps to <a data-link-type="dfn" href="#create-a-permissionstatus" id="ref-for-create-a-permissionstatus">create a PermissionStatus</a> for <var>typedDescriptor</var>,
    and let <var>status</var> be the result. 
     <li> Run <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot③">[[query]]</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①①">name</a></code></code>’s <a data-link-type="dfn" href="#permission-query-algorithm" id="ref-for-permission-query-algorithm①">permission query
      algorithm</a>, passing <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot④">[[query]]</a></code></code> and <var>status</var>. 
     <li>Resolve <var>promise</var> with <var>status</var>. 
    </ol>
    <div class="note" role="note"> If a developer wants to check multiple permissions at once, the editors
    recommend the use of <code><code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②">Promise</a></code>.all()</code>. An example can be
    found in the <a href="#examples">Examples section</a>. </div>
   </section>
   <section>
    <h2 class="heading settled" data-level="9" id="common-permission-algorithms"><span class="secno">9. </span><span class="content"> Common permission algorithms </span><a class="self-link" href="#common-permission-algorithms"></a></h2>
    <p> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="boolean-permission-query-algorithm">boolean permission query algorithm</dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor⑥">PermissionDescriptor</a></code> <var>permissionDesc</var> and a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus③">PermissionStatus</a></code> <var>status</var>, runs the following steps: </p>
    <ol class="algorithm">
     <li> Set <code><var>status</var>.state</code> to <var>permissionDesc</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state⑦">permission state</a>. 
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="10" id="permission-registry"><span class="secno">10. </span><span class="content"> Permission Registry </span><a class="self-link" href="#permission-registry"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-permissionname"><code><c- g>PermissionName</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-geolocation" id="ref-for-dom-permissionname-geolocation"><c- s>"geolocation"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications"><c- s>"notifications"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-push" id="ref-for-dom-permissionname-push"><c- s>"push"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-midi" id="ref-for-dom-permissionname-midi"><c- s>"midi"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera"><c- s>"camera"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-microphone" id="ref-for-dom-permissionname-microphone"><c- s>"microphone"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-speaker-selection" id="ref-for-dom-permissionname-speaker-selection"><c- s>"speaker-selection"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-device-info" id="ref-for-dom-permissionname-device-info"><c- s>"device-info"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-background-fetch" id="ref-for-dom-permissionname-background-fetch"><c- s>"background-fetch"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-background-sync" id="ref-for-dom-permissionname-background-sync"><c- s>"background-sync"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth"><c- s>"bluetooth"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-persistent-storage" id="ref-for-dom-permissionname-persistent-storage"><c- s>"persistent-storage"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-ambient-light-sensor" id="ref-for-dom-permissionname-ambient-light-sensor"><c- s>"ambient-light-sensor"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-accelerometer" id="ref-for-dom-permissionname-accelerometer"><c- s>"accelerometer"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-gyroscope" id="ref-for-dom-permissionname-gyroscope"><c- s>"gyroscope"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-magnetometer" id="ref-for-dom-permissionname-magnetometer"><c- s>"magnetometer"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-clipboard-read" id="ref-for-dom-permissionname-clipboard-read"><c- s>"clipboard-read"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-clipboard-write" id="ref-for-dom-permissionname-clipboard-write"><c- s>"clipboard-write"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-display-capture" id="ref-for-dom-permissionname-display-capture"><c- s>"display-capture"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-nfc" id="ref-for-dom-permissionname-nfc"><c- s>"nfc"</c-></a>,
};
</pre>
    <p> Each enumeration value in the <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname⑤">PermissionName</a></code> enum identifies a <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature⑦">powerful feature</a>. Each <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature⑧">powerful feature</a> has the following
    permission-related flags, algorithms, and types: </p>
    <dl>
     <dt>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="allowed-in-non-secure-contexts">allowed in non-secure contexts</dfn> flag
     <dd> By default, only <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context" id="ref-for-secure-context">secure contexts</a> can use <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature⑨">powerful features</a>.
      If this flag is set for a feature, the UA may grant access to it in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#non-secure-context" id="ref-for-non-secure-context①">non-secure contexts</a> too. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="permission-descriptor-type">permission descriptor type</dfn> 
     <dd>
      <p> <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor⑦">PermissionDescriptor</a></code> or one of its subtypes.
        If unspecified, this defaults to <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor⑧">PermissionDescriptor</a></code>. </p>
      <p> The feature can define a <a href="https://en.wikipedia.org/wiki/Partially_ordered_set">partial
        order</a> on descriptor instances. If <var>descriptorA</var> is <dfn class="dfn-paneled" data-dfn-for="PermissionDescriptor" data-dfn-type="dfn" data-noexport id="permissiondescriptor-stronger-than">stronger than</dfn> <var>descriptorB</var>, then if <var>descriptorA</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state⑧">permission state</a> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑦">"granted"</a></code>, <var>descriptorB</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state⑨">permission state</a> must also be <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑧">"granted"</a></code>, and
        if <var>descriptorB</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①⓪">permission state</a> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①①">"denied"</a></code>, <var>descriptorA</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①①">permission state</a> must also be <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①②">"denied"</a></code>. </p>
      <p class="example" id="example-stronger-than"><a class="self-link" href="#example-stronger-than"></a> <code>{name: <code class="idl"><a data-link-type="idl">"midi"</a></code>, sysex: true}</code> ("midi-with-sysex") is <a data-link-type="dfn" href="#permissiondescriptor-stronger-than" id="ref-for-permissiondescriptor-stronger-than">stronger than</a> <code>{name: <code class="idl"><a data-link-type="idl">"midi"</a></code>, sysex: false}</code> ("midi-without-sysex"), so if the user denies access to
        midi-without-sysex, the UA must also deny access to midi-with-sysex, and
        similarly if the user grants access to midi-with-sysex, the UA must also
        grant access to midi-without-sysex. </p>
     <dt>Optional <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="permission-state-constraints">permission state constraints</dfn>
     <dd> Constraints on the values that the UA can return as a descriptor’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①②">permission state</a>. Defaults to no constraints beyond the user’s
      intent. 
     <dt> An optional <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="extra-permission-data-type">extra permission data type</dfn> 
     <dd> If specified, the <a data-link-type="dfn" href="#extra-permission-data" id="ref-for-extra-permission-data">extra permission data</a> algorithm is usable for
      this feature. 
     <dt>Optional <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="extra-permission-data-constraints">extra permission data constraints</dfn>
     <dd> Constraints on the values that the UA can return as a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname⑥">PermissionName</a></code>'s <a data-link-type="dfn" href="#extra-permission-data" id="ref-for-extra-permission-data①">extra permission data</a>. Defaults to no constraints beyond the user’s
      intent. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="permission-result-type">permission result type</dfn> 
     <dd> <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus④">PermissionStatus</a></code> or one of its subtypes.
      If unspecified, this defaults to <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus⑤">PermissionStatus</a></code>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="permission-query-algorithm">permission query algorithm</dfn> 
     <dd> Takes an instance of the <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type⑥">permission descriptor type</a> and a new or
      existing instance of the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type①">permission result type</a>, and updates the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type②">permission result type</a> instance with the query result. Used by <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions②">Permissions</a></code>' <code class="idl"><a data-link-type="idl" href="#dom-permissions-query" id="ref-for-dom-permissions-query②">query(permissionDesc)</a></code> method and the <a href="#PermissionStatus-update">PermissionStatus update steps</a>. If
      unspecified, this defaults to the <a data-link-type="dfn" href="#boolean-permission-query-algorithm" id="ref-for-boolean-permission-query-algorithm">boolean permission query
      algorithm</a>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="permission-revocation-algorithm">permission revocation algorithm</dfn> 
     <dd> Takes no arguments. Updates any other parts of the implementation that
      need to be kept in sync with changes in the results of <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①③">permission
      states</a> or <a data-link-type="dfn" href="#extra-permission-data" id="ref-for-extra-permission-data②">extra permission data</a>. Run by <a href="#reacting-to-revocation">§ 5.3 Reacting to users revoking permission</a>.
      If unspecified, this defaults to doing nothing. 
    </dl>
    <p> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="boolean-feature">boolean feature</dfn> is a <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature①⓪">powerful feature</a> with all
    of the above types and algorithms defaulted. </p>
    <section>
     <h3 class="heading settled" data-level="10.1" id="geolocation"><span class="secno">10.1. </span><span class="content"> Geolocation </span><a class="self-link" href="#geolocation"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-geolocation"><code>"geolocation"</code></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-geolocation-api" title="Geolocation API Specification 2nd Edition">[geolocation-API]</a>. It is a <a data-link-type="dfn" href="#boolean-feature" id="ref-for-boolean-feature">boolean feature</a> and is <a data-link-type="dfn" href="#allowed-in-non-secure-contexts" id="ref-for-allowed-in-non-secure-contexts①">allowed in
      non-secure contexts</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.2" id="notifications"><span class="secno">10.2. </span><span class="content"> Notifications </span><a class="self-link" href="#notifications"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-notifications"><code>"notifications"</code></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-notifications" title="Notifications API Standard">[notifications]</a> API. It is a <a data-link-type="dfn" href="#boolean-feature" id="ref-for-boolean-feature①">boolean feature</a> and is <a data-link-type="dfn" href="#allowed-in-non-secure-contexts" id="ref-for-allowed-in-non-secure-contexts②">allowed in
      non-secure contexts</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.3" id="push"><span class="secno">10.3. </span><span class="content"> Push </span><a class="self-link" href="#push"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-push"><code>"push"</code></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-push-api" title="Push API">[push-api]</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type⑦">permission descriptor type</a> 
      <dd>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-pushpermissiondescriptor"><code><c- g>PushPermissionDescriptor</c-></code><a class="self-link" href="#dictdef-pushpermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor⑨"><c- n>PermissionDescriptor</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="PushPermissionDescriptor" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-pushpermissiondescriptor-uservisibleonly"><code><c- g>userVisibleOnly</c-></code><a class="self-link" href="#dom-pushpermissiondescriptor-uservisibleonly"></a></dfn> = <c- b>false</c->;
};
</pre>
       <p> <code>{name: "push", userVisibleOnly: false}</code> is <a data-link-type="dfn" href="#permissiondescriptor-stronger-than" id="ref-for-permissiondescriptor-stronger-than①">stronger than</a> <code>{name: "push", userVisibleOnly: true}</code>. </p>
     </dl>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.4" id="midi"><span class="secno">10.4. </span><span class="content"> Midi </span><a class="self-link" href="#midi"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-midi"><code>"midi"</code></dfn> permission is the permission associated with the usage of <a data-link-type="biblio" href="#biblio-webmidi" title="Web MIDI API">[webmidi]</a>. <code class="idl"><a data-link-type="idl">"midi"</a></code> is <a data-link-type="dfn" href="#allowed-in-non-secure-contexts" id="ref-for-allowed-in-non-secure-contexts③">allowed in non-secure contexts</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type⑧">permission descriptor type</a> 
      <dd>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-midipermissiondescriptor"><code><c- g>MidiPermissionDescriptor</c-></code><a class="self-link" href="#dictdef-midipermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor①⓪"><c- n>PermissionDescriptor</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="MidiPermissionDescriptor" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-midipermissiondescriptor-sysex"><code><c- g>sysex</c-></code><a class="self-link" href="#dom-midipermissiondescriptor-sysex"></a></dfn> = <c- b>false</c->;
};
</pre>
       <p> <code>{name: "midi", sysex: true}</code> is <a data-link-type="dfn" href="#permissiondescriptor-stronger-than" id="ref-for-permissiondescriptor-stronger-than②">stronger than</a> <code>{name: "midi",           sysex: false}</code>. </p>
     </dl>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.5" id="media-devices"><span class="secno">10.5. </span><span class="content"> Media Devices </span><a class="self-link" href="#media-devices"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-camera"><code>"camera"</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-microphone"><code>"microphone"</code></dfn> , and <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-speaker-selection"><code>"speaker-selection"</code></dfn> permissions are associated with permission to use media devices as
      specified in <a data-link-type="biblio" href="#biblio-getusermedia" title="Media Capture and Streams">[GETUSERMEDIA]</a> and <a data-link-type="biblio" href="#biblio-audio-output" title="Audio Output Devices API">[audio-output]</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type⑨">permission descriptor type</a> 
      <dd>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-devicepermissiondescriptor"><code><c- g>DevicePermissionDescriptor</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor①①"><c- n>PermissionDescriptor</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="DevicePermissionDescriptor" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-devicepermissiondescriptor-deviceid"><code><c- g>deviceId</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-cameradevicepermissiondescriptor"><code><c- g>CameraDevicePermissionDescriptor</c-></code><a class="self-link" href="#dictdef-cameradevicepermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-devicepermissiondescriptor" id="ref-for-dictdef-devicepermissiondescriptor"><c- n>DevicePermissionDescriptor</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="CameraDevicePermissionDescriptor" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-cameradevicepermissiondescriptor-pantiltzoom"><code><c- g>panTiltZoom</c-></code><a class="self-link" href="#dom-cameradevicepermissiondescriptor-pantiltzoom"></a></dfn> = <c- b>false</c->;
};
</pre>
       <p> A permission covers access to the device given in the associated
          descriptor. </p>
       <p> If the descriptor does not have a <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid">deviceId</a></code>, its semantic is that it
          queries for access to all devices of that class. Thus, if a query for
          the <code class="idl"><a data-link-type="idl">"camera"</a></code> permission with no <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid①">deviceId</a></code> returns <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑨">"granted"</a></code>, the
          client knows that there will never be a permission prompt for a
          camera, and if <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①③">"denied"</a></code> is returned, it knows that no getUserMedia
          request for a camera will succeed. </p>
       <p> If a permission state is present for access to some, but not all,
          cameras, a query without the <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid②">deviceId</a></code> will return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt④">"prompt"</a></code>. </p>
       <p> <code>{name: "camera", panTiltZoom: true}</code> is <a data-link-type="dfn" href="#permissiondescriptor-stronger-than" id="ref-for-permissiondescriptor-stronger-than③">stronger than</a> <code>{name: "camera", panTiltZoom: false}</code>. </p>
       <p> Note that a "granted" permission is no guarantee that getUserMedia
          will succeed. It only guarantees that the user will not be
          prompted for permission. There are many other things (such as
          constraints or the camera being in use) that can cause getUserMedia
          to fail. </p>
      <dt> <a data-link-type="dfn" href="#extra-permission-data-type" id="ref-for-extra-permission-data-type②">extra permission data type</a> 
      <dd> A list of <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#deviceid" id="ref-for-deviceid">deviceId</a></code> values for the devices the user
        has made a non-default decision on access to. 
      <dt> <a data-link-type="dfn" href="#permission-query-algorithm" id="ref-for-permission-query-algorithm②">permission query algorithm</a> 
      <dd>
        The permission query algorithm runs the following steps: 
       <ol class="algorithm">
        <li> If <var>permissionDesc</var>.deviceId exists in the <a data-link-type="dfn" href="#extra-permission-data" id="ref-for-extra-permission-data③">extra permission data</a>,
        set <code><var>status</var>.state</code> to <var>permissionDesc</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①④">permission state</a> and terminate these
        steps. 
        <li>Let <var>global</var> be a copy of <var>permissionDesc</var> with the <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid③">deviceId</a></code> member removed. 
        <li> Set <code><var>status</var>.state</code> to <var>global</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①⑤">permission state</a>. 
       </ol>
      <dt> <a data-link-type="dfn" href="https://wicg.github.io/permissions-request/#permission-request-algorithm" id="ref-for-permission-request-algorithm">permission request algorithm</a> 
      <dd>
        The permission request algorithm runs the following steps: 
       <ol class="algorithm">
        <li> Let <var>result</var> be the result of running the <a data-link-type="dfn">boolean permission
        request algorithm</a>. 
        <li>If <var>result</var> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①⓪">"granted"</a></code>, the UA MUST set the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-device-info" id="ref-for-dom-permissionname-device-info①">"device-info"</a></code> permission to <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①①">"granted"</a></code> for this <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms" id="ref-for-sec-code-realms⑤">realm</a>. 
        <li>The UA MAY treat <var>result</var> as <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent⑤">new information about the
        user’s intent</a> with respect to the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-device-info" id="ref-for-dom-permissionname-device-info②">"device-info"</a></code> permission for
        this <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms" id="ref-for-sec-code-realms⑥">realm</a> and other <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms" id="ref-for-sec-code-realms⑦">realms</a> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin②">same origin</a>,
        provided it doesn’t violate the previous step. 
        <li>Return <var>result</var>. 
       </ol>
      <dt> <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm①">permission revocation algorithm</a> 
      <dd> When permission for a device is revoked, the UA MUST run the
        algorithm to stop the track for any other reason than the stop()
        method being invoked for each MediaStreamTrack sourced from that
        device. 
     </dl>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-device-info"><code>"device-info"</code></dfn> permission controls access to the name and capabilities associated with a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#deviceid" id="ref-for-deviceid①">deviceId</a></code>, as well as whether <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#devicechange" id="ref-for-devicechange">devicechange</a></code> events fire when the current browsing
      context is not in focus. The <code class="idl"><a data-link-type="idl" href="#dom-permissionname-device-info" id="ref-for-dom-permissionname-device-info③">"device-info"</a></code> permission MUST be revoked
      when <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#deviceid" id="ref-for-deviceid②">deviceId</a></code>s for an origin are reset. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.6" id="background-fetch"><span class="secno">10.6. </span><span class="content"> Background Fetch </span><a class="self-link" href="#background-fetch"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-background-fetch"><code>"background-fetch"</code></dfn> permission is the permission associated with the usage of <a data-link-type="biblio" href="#biblio-background-fetch" title="Background Fetch">[background-fetch]</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.7" id="background-sync"><span class="secno">10.7. </span><span class="content"> Background Sync </span><a class="self-link" href="#background-sync"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-background-sync"><code>"background-sync"</code></dfn> permission is the permission associated with the usage of <a data-link-type="biblio" href="#biblio-web-background-sync" title="Web Background Synchronization">[web-background-sync]</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.8" id="bluetooth"><span class="secno">10.8. </span><span class="content"> Bluetooth </span><a class="self-link" href="#bluetooth"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-bluetooth"><code>"bluetooth"</code></dfn> permission (<a href="https://webbluetoothcg.github.io/web-bluetooth/#permission-api-integration"><cite>Web Bluetooth</cite> § 4.1 Permission API Integration</a>) controls usage
      of <a data-link-type="biblio" href="#biblio-web-bluetooth" title="Web Bluetooth">[web-bluetooth]</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.9" id="persistent-storage"><span class="secno">10.9. </span><span class="content"> Persistent Storage </span><a class="self-link" href="#persistent-storage"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-persistent-storage"><code>"persistent-storage"</code></dfn> permission (<a href="https://storage.spec.whatwg.org/#persistence"><cite>Storage</cite> § 5 Persistence permission</a>) is the permission associated with the
      usage of the <code>"persistent"</code> storage bucket <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode" id="ref-for-bucket-mode">mode</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.10" id="ambient-light-sensor"><span class="secno">10.10. </span><span class="content"> Ambient Light Sensor </span><a class="self-link" href="#ambient-light-sensor"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-ambient-light-sensor"><code>"ambient-light-sensor"</code></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-ambient-light" title="Ambient Light Sensor">[ambient-light]</a> API. </p>
     <p>Its <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm②">permission revocation algorithm</a> is the result of calling <a data-link-type="dfn" href="https://w3c.github.io/sensors/#generic-sensor-permission-revocation-algorithm" id="ref-for-generic-sensor-permission-revocation-algorithm">generic sensor permission revocation algorithm</a> passing it <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-ambient-light-sensor" id="ref-for-dom-permissionname-ambient-light-sensor①">"ambient-light-sensor"</a> as argument.</p>
     <p></p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.11" id="accelerometer"><span class="secno">10.11. </span><span class="content"> Accelerometer </span><a class="self-link" href="#accelerometer"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-accelerometer"><code>"accelerometer"</code></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-accelerometer" title="Accelerometer">[accelerometer]</a> API. </p>
     <p>Its <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm③">permission revocation algorithm</a> is the result of calling <a data-link-type="dfn" href="https://w3c.github.io/sensors/#generic-sensor-permission-revocation-algorithm" id="ref-for-generic-sensor-permission-revocation-algorithm①">generic sensor permission revocation algorithm</a> passing it <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-accelerometer" id="ref-for-dom-permissionname-accelerometer①">"accelerometer"</a> as argument.</p>
     <p></p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.12" id="gyroscope"><span class="secno">10.12. </span><span class="content"> Gyroscope </span><a class="self-link" href="#gyroscope"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-gyroscope"><code>"gyroscope"</code></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-gyroscope" title="Gyroscope">[gyroscope]</a> API. </p>
     <p>Its <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm④">permission revocation algorithm</a> is the result of calling <a data-link-type="dfn" href="https://w3c.github.io/sensors/#generic-sensor-permission-revocation-algorithm" id="ref-for-generic-sensor-permission-revocation-algorithm②">generic sensor permission revocation algorithm</a> passing it <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-gyroscope" id="ref-for-dom-permissionname-gyroscope①">"gyroscope"</a> as argument.</p>
     <p></p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.13" id="magnetometer"><span class="secno">10.13. </span><span class="content"> Magnetometer </span><a class="self-link" href="#magnetometer"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-magnetometer"><code>"magnetometer"</code></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-magnetometer" title="Magnetometer">[magnetometer]</a> API. </p>
     <p>Its <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm⑤">permission revocation algorithm</a> is the result of calling <a data-link-type="dfn" href="https://w3c.github.io/sensors/#generic-sensor-permission-revocation-algorithm" id="ref-for-generic-sensor-permission-revocation-algorithm③">generic sensor permission revocation algorithm</a> passing it <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-magnetometer" id="ref-for-dom-permissionname-magnetometer①">"magnetometer"</a> as argument.</p>
     <p></p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.14" id="clipboard-read"><span class="secno">10.14. </span><span class="content"> Clipboard Read </span><a class="self-link" href="#clipboard-read"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-clipboard-read"><code>"clipboard-read"</code></dfn> permission is the permission associated with the usage of the
      asynchronous read methods in the <a data-link-type="biblio" href="#biblio-clipboard-apis" title="Clipboard API and events">[clipboard-apis]</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.15" id="clipboard-write"><span class="secno">10.15. </span><span class="content"> Clipboard Write </span><a class="self-link" href="#clipboard-write"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-clipboard-write"><code>"clipboard-write"</code></dfn> permission is the permission associated with the usage of the
      asynchronous write methods in the <a data-link-type="biblio" href="#biblio-clipboard-apis" title="Clipboard API and events">[clipboard-apis]</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.16" id="screen-capture"><span class="secno">10.16. </span><span class="content"> Screen Capture </span><a class="self-link" href="#screen-capture"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-display-capture"><code>"display-capture"</code></dfn> permission is the permission associated with the usage of <a data-link-type="biblio" href="#biblio-screen-capture" title="Screen Capture">[screen-capture]</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#permission-state-constraints" id="ref-for-permission-state-constraints①">permission state constraints</a> 
      <dd> Valid values for this descriptor’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①⑥">permission state</a> are <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt⑤">"prompt"</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①④">"denied"</a></code>. The user agent MUST NOT ever set this
        descriptor’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①⑦">permission state</a> to <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①②">"granted"</a></code>. 
     </dl>
    </section>
    <section>
     <h3 class="heading settled" data-level="10.17" id="nfc"><span class="secno">10.17. </span><span class="content"> NFC </span><a class="self-link" href="#nfc"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-nfc"><code>"nfc"</code></dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-web-nfc" title="Web NFC API">[web-nfc]</a> API. </p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="11" id="automation"><span class="secno">11. </span><span class="content"> Automation </span><a class="self-link" href="#automation"></a></h2>
    <p> For the purposes of user-agent automation and application testing, this
    document defines the following <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-commands" id="ref-for-dfn-extension-commands">extension command</a> for the <a data-link-type="biblio" href="#biblio-webdriver" title="WebDriver">[WebDriver]</a> specification. </p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-permissionsetparameters"><code><c- g>PermissionSetParameters</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor①②"><c- n>PermissionDescriptor</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionSetParameters" data-dfn-type="dict-member" data-export data-type="PermissionDescriptor " id="dom-permissionsetparameters-descriptor"><code><c- g>descriptor</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-permissionstate" id="ref-for-enumdef-permissionstate②"><c- n>PermissionState</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionSetParameters" data-dfn-type="dict-member" data-export data-type="PermissionState " id="dom-permissionsetparameters-state"><code><c- g>state</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="PermissionSetParameters" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-permissionsetparameters-onerealm"><code><c- g>oneRealm</c-></code></dfn> = <c- b>false</c->;
};
</pre>
    <section>
     <h3 class="heading settled" data-level="11.1" id="set-permission-command"><span class="secno">11.1. </span><span class="content"> Set Permission </span><a class="self-link" href="#set-permission-command"></a></h3>
     <table>
      <tbody>
       <tr>
        <th>HTTP Method
        <th><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-command-uri-template" id="ref-for-dfn-extension-command-uri-template">URI Template</a>
       <tr>
        <td>POST
        <td>/session/{session id}/permissions
     </table>
     <p>The <dfn data-dfn-type="dfn" data-noexport id="set-permission">Set Permission<a class="self-link" href="#set-permission"></a></dfn> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-commands" id="ref-for-dfn-extension-commands①">extension command</a> simulates user
    modification of a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor①③">PermissionDescriptor</a></code>'s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①⑧">permission state</a>.</p>
     <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps">remote end steps</a> are:</p>
     <ol>
      <li>Let <var>parameters</var> be the <var>parameters</var> argument, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value" id="ref-for-dfn-convert-ecmascript-to-idl-value②">converted to an IDL
        value</a> of type <code class="idl"><a data-link-type="idl" href="#dictdef-permissionsetparameters" id="ref-for-dictdef-permissionsetparameters">PermissionSetParameters</a></code>. If this throws an
        exception, return a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error">WebDriver error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code">WebDriver error
        code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument">invalid argument</a>. 
      <li>Let <var>rootDesc</var> be <var>parameters</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissionsetparameters-descriptor" id="ref-for-dom-permissionsetparameters-descriptor">descriptor</a></code>.
      <li>Let <var>typedDescriptor</var> be the object <var>rootDesc</var> refers to, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value" id="ref-for-dfn-convert-ecmascript-to-idl-value③">converted to an IDL value</a> of <code><var>rootDesc</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①②">name</a></code></code>’s <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type①⓪">permission
        descriptor type</a>. If this throws an exception, return a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error①">WebDriver
        error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①">WebDriver error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①">invalid
        argument</a>.
      <li>
       If <var>parameters</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissionsetparameters-state" id="ref-for-dom-permissionsetparameters-state">state</a></code> is an inappropriate <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state①⑨">permission state</a> for any implementation-defined reason, return a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error②">WebDriver error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②">WebDriver error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②">invalid
        argument</a>. 
       <p class="note" role="note"> For example, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent④">user agents</a> that define the <code class="idl"><a data-link-type="idl">"midi"</a></code> <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature①①">feature</a> as "always on" may choose to reject command
          to set the <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state②⓪">permission state</a> to <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①⑤">"denied"</a></code> at this step. </p>
      <li>Let <var>settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object③">environment settings object</a> of the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-current-browsing-context" id="ref-for-dfn-current-browsing-context">current browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document">active document</a>.
      <li>If <var>settings</var> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#non-secure-context" id="ref-for-non-secure-context②">non-secure context</a> and <code><var>rootDesc</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①③">name</a></code></code> isn’t <a data-link-type="dfn" href="#allowed-in-non-secure-contexts" id="ref-for-allowed-in-non-secure-contexts④">allowed
        in non-secure contexts</a>, return a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error③">WebDriver error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③">WebDriver error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③">invalid argument</a>.
      <li>If <var>parameters</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissionsetparameters-onerealm" id="ref-for-dom-permissionsetparameters-onerealm">oneRealm</a></code> is true, let <var>targets</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> whose sole member is <var>settings</var>.
      <li>Otherwise, let <var>targets</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> containing all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object④">environment settings objects</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a> is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin③">same</a> as the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①">origin</a> of <var>settings</var>.
      <li>Let <var>tasks</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a>. 
      <li>
        For each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑤">environment settings object</a> <var>target</var> in <var>targets</var>: 
       <ol>
        <li><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task②">Queue a task</a> <var>task</var> on the <a data-link-type="dfn" href="#permission-task-source" id="ref-for-permission-task-source">permission task source</a> of <var>target</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global">global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc">browsing context</a> to perform the
            following step:
        <ol>
         <li>Interpret <var>parameters</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissionsetparameters-state" id="ref-for-dom-permissionsetparameters-state①">state</a></code> as if
              it were the result of an invocation of <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state②①">permission state</a> for <var>typedDescriptor</var> with the argument <var>target</var> made at this
              moment.
        </ol>
        <li><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>task</var> to <var>tasks</var>.
       </ol>
      <li>Wait for all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task">tasks</a> in <var>tasks</var> to have executed.
      <li>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success">success</a> with data <code>null</code>.
     </ol>
     <div class="example" id="example-4345ddfe">
      <a class="self-link" href="#example-4345ddfe"></a> To set permission for <code>{name: <code class="idl"><a data-link-type="idl">"midi"</a></code>, sysex: true}</code> of the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-current-browsing-context" id="ref-for-dfn-current-browsing-context①">current browsing context</a> of the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-session" id="ref-for-dfn-session">session</a> with ID 23 to
      "<code>granted</code>", the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-end" id="ref-for-dfn-local-end">local end</a> would POST to <code>/session/23/permissions</code> with the body: 
<pre class="lang-json highlight"><c- p>{</c->
  <c- f>"descriptor"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"name"</c-><c- p>:</c-> <c- u>"midi"</c-><c- p>,</c->
    <c- f>"sysex"</c-><c- p>:</c-> <c- kc>true</c->
  <c- p>},</c->
  <c- f>"state"</c-><c- p>:</c-> <c- u>"granted"</c->
<c- p>}</c->
</pre>
     </div>
    </section>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="12" id="examples"><span class="secno">12. </span><span class="content"> Examples </span><a class="self-link" href="#examples"></a></h2>
    <div class="example" id="example-geolocation">
     <a class="self-link" href="#example-geolocation"></a> 
     <p> This example uses the Permissions API to decide whether local news
    should be shown using the Geolocation API or with a button offering to
    add the feature. </p>
<pre class="highlight">navigator.permissions.query({ name: "geolocation" }).then(({ state }) => {
  switch (state) {
    case "granted":
      showLocalNewsWithGeolocation();
      break;
    case "prompt":
      showButtonToEnableLocalNews();
      break;
    default:
      // Don’t do anything if the permission was denied.
      break;
  }
});
</pre>
    </div>
    <div class="example" id="example-notifications">
     <a class="self-link" href="#example-notifications"></a> 
     <p> This example is using the <code class="idl"><a data-link-type="idl">"notifications"</a></code> permission for a
    chat application to show a notification button depending on the
    permission state. </p>
<pre class="highlight">function updateNotificationButton(state) {
  document.getElementById('chat-notification-button')
    .disabled = (state === 'denied');
}

navigator.permissions.query({ name: 'notifications' }).then((result) => {
  updateNotificationButton(result.state);
  result.addEventListener('change', () => {
    updateNotificationButton(result.state);
  });
});
</pre>
    </div>
    <div class="example" id="example-two-permissions">
     <a class="self-link" href="#example-two-permissions"></a> 
     <p> This example is checking whether the page has the <code class="idl"><a data-link-type="idl">"geolocation"</a></code> and the <code class="idl"><a data-link-type="idl">"notifications"</a></code> permissions
    using <code><code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③">Promise</a></code>.all</code>. </p>
<pre class="highlight">Promise.all([
  navigator.permissions.query({ name: "geolocation" }),
  navigator.permissions.query({ name: "notifications" })
])
.then(([{ state: geoState }, { state: notifState }]) => {
  console.log("Geolocation permission state is:", geoState);
  console.log("Notifications permission state is:", notifState);
});
</pre>
    </div>
    <div class="example" id="example-deviceId">
     <a class="self-link" href="#example-deviceId"></a> 
     <p> This example is checking the permission state of the available cameras. </p>
<pre class="highlight">navigator.mediaDevices
  .enumerateDevices()
  .then(devices => {
    return Promise.all(devices
      // filter on video inputs
      .filter(({ kind }) => kind === "videoinput")
      // map to query object
      .map(({ deviceId }) => ({ name: "camera", deviceId }))
      // map to query promise
      .map(queryObj => navigator.permissions.query(queryObj))
    );
  })
  // log the state or each camera
  .then(results => results.forEach(
    ({ state }, i) => console.log(<code>Camera ${i}: "${state}"</code>)
  ))
  .catch(
    err => console.error(err.stack)
  );
</pre>
    </div>
   </section>
   <section class="non-normative">
    <h2 class="no-num heading settled" id="acknowledgments"><span class="content"> Acknowledgments </span><a class="self-link" href="#acknowledgments"></a></h2>
    <p> The editors would like to thank Adrienne Porter Felt, Anne van
    Kesteren, Domenic Denicola, Jake Archibald and Wendy Seltzer for their
    help with the API design and editorial work. </p>
   </section>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
   <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
  </div>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-permissionname-accelerometer">"accelerometer"</a><span>, in § 10.11</span>
   <li><a href="#allowed-in-non-secure-contexts">allowed in non-secure contexts</a><span>, in § 10</span>
   <li><a href="#dom-permissionname-ambient-light-sensor">"ambient-light-sensor"</a><span>, in § 10.10</span>
   <li><a href="#aspects">aspects</a><span>, in § 4</span>
   <li><a href="#dom-permissionname-background-fetch">"background-fetch"</a><span>, in § 10.6</span>
   <li><a href="#dom-permissionname-background-sync">"background-sync"</a><span>, in § 10.7</span>
   <li><a href="#dom-permissionname-bluetooth">"bluetooth"</a><span>, in § 10.8</span>
   <li><a href="#boolean-feature">boolean feature</a><span>, in § 10</span>
   <li><a href="#boolean-permission-query-algorithm">boolean permission query algorithm</a><span>, in § 9</span>
   <li><a href="#dom-permissionname-camera">"camera"</a><span>, in § 10.5</span>
   <li><a href="#dictdef-cameradevicepermissiondescriptor">CameraDevicePermissionDescriptor</a><span>, in § 10.5</span>
   <li><a href="#dom-permissionname-clipboard-read">"clipboard-read"</a><span>, in § 10.14</span>
   <li><a href="#dom-permissionname-clipboard-write">"clipboard-write"</a><span>, in § 10.15</span>
   <li><a href="#create-a-permissionstatus">create a PermissionStatus</a><span>, in § 6</span>
   <li><a href="#dom-permissionstate-denied">"denied"</a><span>, in § 6</span>
   <li><a href="#dom-permissionsetparameters-descriptor">descriptor</a><span>, in § 11</span>
   <li><a href="#dom-devicepermissiondescriptor-deviceid">deviceId</a><span>, in § 10.5</span>
   <li><a href="#dom-permissionname-device-info">"device-info"</a><span>, in § 10.5</span>
   <li><a href="#dictdef-devicepermissiondescriptor">DevicePermissionDescriptor</a><span>, in § 10.5</span>
   <li><a href="#dom-permissionname-display-capture">"display-capture"</a><span>, in § 10.16</span>
   <li><a href="#extra-permission-data">extra permission data</a><span>, in § 5.1</span>
   <li><a href="#extra-permission-data-constraints">extra permission data constraints</a><span>, in § 10</span>
   <li><a href="#extra-permission-data-type">extra permission data type</a><span>, in § 10</span>
   <li><a href="#powerful-feature">feature</a><span>, in § 3</span>
   <li><a href="#dom-permissionname-geolocation">"geolocation"</a><span>, in § 10.1</span>
   <li><a href="#dom-permissionstate-granted">"granted"</a><span>, in § 6</span>
   <li><a href="#dom-permissionname-gyroscope">"gyroscope"</a><span>, in § 10.12</span>
   <li><a href="#implicit-signals">implicit signals</a><span>, in § 3</span>
   <li><a href="#dom-permissionname-magnetometer">"magnetometer"</a><span>, in § 10.13</span>
   <li><a href="#dom-permissionname-microphone">"microphone"</a><span>, in § 10.5</span>
   <li><a href="#dom-permissionname-midi">"midi"</a><span>, in § 10.4</span>
   <li><a href="#dictdef-midipermissiondescriptor">MidiPermissionDescriptor</a><span>, in § 10.4</span>
   <li><a href="#dom-permissiondescriptor-name">name</a><span>, in § 4</span>
   <li><a href="#new-information-about-the-users-intent">New information about the user’s intent</a><span>, in § 3</span>
   <li><a href="#dom-permissionname-nfc">"nfc"</a><span>, in § 10.17</span>
   <li><a href="#dom-permissionname-notifications">"notifications"</a><span>, in § 10.2</span>
   <li><a href="#dom-permissionstatus-onchange">onchange</a><span>, in § 6</span>
   <li><a href="#dom-permissionsetparameters-onerealm">oneRealm</a><span>, in § 11</span>
   <li><a href="#dom-cameradevicepermissiondescriptor-pantiltzoom">panTiltZoom</a><span>, in § 10.5</span>
   <li><a href="#dictdef-permissiondescriptor">PermissionDescriptor</a><span>, in § 4</span>
   <li><a href="#permission-descriptor-type">permission descriptor type</a><span>, in § 10</span>
   <li><a href="#enumdef-permissionname">PermissionName</a><span>, in § 10</span>
   <li><a href="#permission-query-algorithm">permission query algorithm</a><span>, in § 10</span>
   <li><a href="#permission-result-type">permission result type</a><span>, in § 10</span>
   <li><a href="#permission-revocation-algorithm">permission revocation algorithm</a><span>, in § 10</span>
   <li><a href="#permissions">Permissions</a><span>, in § 8</span>
   <li>
    permissions
    <ul>
     <li><a href="#dom-navigator-permissions">attribute for Navigator</a><span>, in § 7</span>
     <li><a href="#dom-workernavigator-permissions">attribute for WorkerNavigator</a><span>, in § 7</span>
    </ul>
   <li><a href="#dictdef-permissionsetparameters">PermissionSetParameters</a><span>, in § 11</span>
   <li><a href="#permission-state">permission state</a><span>, in § 5.1</span>
   <li><a href="#enumdef-permissionstate">PermissionState</a><span>, in § 6</span>
   <li><a href="#permission-state-constraints">permission state constraints</a><span>, in § 10</span>
   <li><a href="#permissionstatus">PermissionStatus</a><span>, in § 6</span>
   <li><a href="#permission-task-source">permission task source</a><span>, in § 6</span>
   <li><a href="#dom-permissionname-persistent-storage">"persistent-storage"</a><span>, in § 10.9</span>
   <li><a href="#powerful-feature">Powerful feature</a><span>, in § 3</span>
   <li><a href="#dom-permissionstate-prompt">"prompt"</a><span>, in § 6</span>
   <li><a href="#prompt-the-user-to-choose">prompting the user to choose</a><span>, in § 5.2</span>
   <li><a href="#prompt-the-user-to-choose">prompt the user to choose</a><span>, in § 5.2</span>
   <li><a href="#dom-permissionname-push">"push"</a><span>, in § 10.3</span>
   <li><a href="#dictdef-pushpermissiondescriptor">PushPermissionDescriptor</a><span>, in § 10.3</span>
   <li><a href="#dom-permissionstatus-query-slot">[[query]]</a><span>, in § 6</span>
   <li><a href="#query-a-permission">query a permission</a><span>, in § 8</span>
   <li><a href="#dom-permissions-query">query(permissionDesc)</a><span>, in § 8</span>
   <li><a href="#request-permission-to-use">requesting permission to use</a><span>, in § 5.2</span>
   <li><a href="#request-permission-to-use">request permission to use</a><span>, in § 5.2</span>
   <li><a href="#set-permission">Set Permission</a><span>, in § 11.1</span>
   <li><a href="#dom-permissionname-speaker-selection">"speaker-selection"</a><span>, in § 10.5</span>
   <li>
    state
    <ul>
     <li><a href="#dom-permissionstatus-state">attribute for PermissionStatus</a><span>, in § 6</span>
     <li><a href="#permission-state">definition of</a><span>, in § 5.1</span>
     <li><a href="#dom-permissionsetparameters-state">dict-member for PermissionSetParameters</a><span>, in § 11</span>
    </ul>
   <li><a href="#permissiondescriptor-stronger-than">stronger than</a><span>, in § 10</span>
   <li><a href="#dom-midipermissiondescriptor-sysex">sysex</a><span>, in § 10.4</span>
   <li><a href="#dom-pushpermissiondescriptor-uservisibleonly">userVisibleOnly</a><span>, in § 10.3</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
     <li><span class="dfn-paneled" id="5fd23811">fire an event</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b107f911">current realm</span>
     <li><span class="dfn-paneled" id="a262536f">realm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="f0951476">EventHandler</span>
     <li><span class="dfn-paneled" id="be0c27b2">Navigator</span>
     <li><span class="dfn-paneled" id="a4785085">WorkerNavigator</span>
     <li><span class="dfn-paneled" id="35972864">active document</span>
     <li><span class="dfn-paneled" id="3610bd67">allowed to use</span>
     <li><span class="dfn-paneled" id="3349d69f">associated document</span>
     <li><span class="dfn-paneled" id="6d88ab2e">browsing context</span>
     <li><span class="dfn-paneled" id="12b8dfc0">current settings object</span>
     <li><span class="dfn-paneled" id="3e12e042">environment settings object</span>
     <li><span class="dfn-paneled" id="6a5a59a0">event handler</span>
     <li><span class="dfn-paneled" id="9d386f55">event handler event type</span>
     <li><span class="dfn-paneled" id="8a30477b">global object</span>
     <li><span class="dfn-paneled" id="5155c2d3">non-secure context</span>
     <li><span class="dfn-paneled" id="43ac8374">origin</span>
     <li><span class="dfn-paneled" id="9a517a7d">queue a task</span>
     <li><span class="dfn-paneled" id="9c4c1e66">relevant settings object</span>
     <li><span class="dfn-paneled" id="e3288657">responsible event loop</span>
     <li><span class="dfn-paneled" id="7393da89">same origin</span>
     <li><span class="dfn-paneled" id="65181da8">secure context</span>
     <li><span class="dfn-paneled" id="e270bd2a">task</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="6d19ac93">user agent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MANIFEST]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ea4e717d">install</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIACAPTURE-MAIN]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="4145e7bf">deviceId</span>
     <li><span class="dfn-paneled" id="7143e171">devicechange</span>
     <li><span class="dfn-paneled" id="eca80770">getUserMedia()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-POLICY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="cc890cc1">policy-controlled feature</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-REQUEST]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="35725f70">permission request algorithm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SENSORS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a09cf46b">generic sensor permission revocation algorithm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d5cea784">mode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEB-BLUETOOTH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="30e9e376">BluetoothLEScanFilterInit</span>
     <li><span class="dfn-paneled" id="678ccdc2">BluetoothServiceUUID</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WebDriver]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="024a1df2">current browsing context</span>
     <li><span class="dfn-paneled" id="cce1676e">extension command</span>
     <li><span class="dfn-paneled" id="040c67fa">extension command uri template</span>
     <li><span class="dfn-paneled" id="8da4d1e3">invalid argument</span>
     <li><span class="dfn-paneled" id="11f6a078">local end</span>
     <li><span class="dfn-paneled" id="82c23298">remote end steps</span>
     <li><span class="dfn-paneled" id="4923d430">session</span>
     <li><span class="dfn-paneled" id="4be6272b">success</span>
     <li><span class="dfn-paneled" id="5cf0e148">webdriver error</span>
     <li><span class="dfn-paneled" id="7482107b">webdriver error code</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="a5c91173">SameObject</span>
     <li><span class="dfn-paneled" id="d0b4a948">a promise rejected with</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="cadf5fe9">converted to an idl value</span>
     <li><span class="dfn-paneled" id="efd1ec5d">object</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-permissions-policy-1">[PERMISSIONS-POLICY-1]
   <dd>Ian Clelland. <a href="https://w3c.github.io/webappsec-permissions-policy/"><cite>Permissions Policy</cite></a>. URL: <a href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
   <dt id="biblio-permissions-request">[PERMISSIONS-REQUEST]
   <dd><a href="https://wicg.github.io/permissions-request/"><cite>Requesting Permissions</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/permissions-request/">https://wicg.github.io/permissions-request/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-storage">[STORAGE]
   <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/"><cite>Storage Standard</cite></a>. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-web-bluetooth">[WEB-BLUETOOTH]
   <dd>Jeffrey Yasskin. <a href="https://webbluetoothcg.github.io/web-bluetooth/"><cite>Web Bluetooth</cite></a>. URL: <a href="https://webbluetoothcg.github.io/web-bluetooth/">https://webbluetoothcg.github.io/web-bluetooth/</a>
   <dt id="biblio-webdriver">[WebDriver]
   <dd>Simon Stewart; David Burns. <a href="https://w3c.github.io/webdriver/"><cite>WebDriver</cite></a>. URL: <a href="https://w3c.github.io/webdriver/">https://w3c.github.io/webdriver/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-accelerometer">[ACCELEROMETER]
   <dd>Anssi Kostiainen. <a href="https://w3c.github.io/accelerometer/"><cite>Accelerometer</cite></a>. URL: <a href="https://w3c.github.io/accelerometer/">https://w3c.github.io/accelerometer/</a>
   <dt id="biblio-ambient-light">[AMBIENT-LIGHT]
   <dd>Anssi Kostiainen; Rijubrata Bhaumik. <a href="https://w3c.github.io/ambient-light/"><cite>Ambient Light Sensor</cite></a>. URL: <a href="https://w3c.github.io/ambient-light/">https://w3c.github.io/ambient-light/</a>
   <dt id="biblio-audio-output">[AUDIO-OUTPUT]
   <dd>Justin Uberti; Guido Urdaneta; youenn fablet. <a href="https://w3c.github.io/mediacapture-output/"><cite>Audio Output Devices API</cite></a>. URL: <a href="https://w3c.github.io/mediacapture-output/">https://w3c.github.io/mediacapture-output/</a>
   <dt id="biblio-background-fetch">[BACKGROUND-FETCH]
   <dd><a href="https://wicg.github.io/background-fetch/"><cite>Background Fetch</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/background-fetch/">https://wicg.github.io/background-fetch/</a>
   <dt id="biblio-clipboard-apis">[CLIPBOARD-APIS]
   <dd>Gary Kacmarcik; Grisha Lyukshin. <a href="https://w3c.github.io/clipboard-apis/"><cite>Clipboard API and events</cite></a>. URL: <a href="https://w3c.github.io/clipboard-apis/">https://w3c.github.io/clipboard-apis/</a>
   <dt id="biblio-geolocation-api">[geolocation-API]
   <dd>Andrei Popescu. <a href="https://w3c.github.io/geolocation-api/"><cite>Geolocation API Specification 2nd Edition</cite></a>. URL: <a href="https://w3c.github.io/geolocation-api/">https://w3c.github.io/geolocation-api/</a>
   <dt id="biblio-getusermedia">[GETUSERMEDIA]
   <dd>Cullen Jennings; et al. <a href="https://w3c.github.io/mediacapture-main/"><cite>Media Capture and Streams</cite></a>. URL: <a href="https://w3c.github.io/mediacapture-main/">https://w3c.github.io/mediacapture-main/</a>
   <dt id="biblio-gyroscope">[GYROSCOPE]
   <dd>Anssi Kostiainen. <a href="https://w3c.github.io/gyroscope/"><cite>Gyroscope</cite></a>. URL: <a href="https://w3c.github.io/gyroscope/">https://w3c.github.io/gyroscope/</a>
   <dt id="biblio-magnetometer">[MAGNETOMETER]
   <dd>Anssi Kostiainen; Rijubrata Bhaumik. <a href="https://w3c.github.io/magnetometer/"><cite>Magnetometer</cite></a>. URL: <a href="https://w3c.github.io/magnetometer/">https://w3c.github.io/magnetometer/</a>
   <dt id="biblio-notifications">[NOTIFICATIONS]
   <dd>Anne van Kesteren. <a href="https://notifications.spec.whatwg.org/"><cite>Notifications API Standard</cite></a>. Living Standard. URL: <a href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
   <dt id="biblio-push-api">[PUSH-API]
   <dd>Peter Beverloo; Martin Thomson; Marcos Caceres. <a href="https://w3c.github.io/push-api/"><cite>Push API</cite></a>. URL: <a href="https://w3c.github.io/push-api/">https://w3c.github.io/push-api/</a>
   <dt id="biblio-screen-capture">[SCREEN-CAPTURE]
   <dd>Jan-Ivar Bruaroey; Elad Alon. <a href="https://w3c.github.io/mediacapture-screen-share/"><cite>Screen Capture</cite></a>. URL: <a href="https://w3c.github.io/mediacapture-screen-share/">https://w3c.github.io/mediacapture-screen-share/</a>
   <dt id="biblio-web-background-sync">[WEB-BACKGROUND-SYNC]
   <dd><a href="https://wicg.github.io/background-sync/spec/"><cite>Web Background Synchronization</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/background-sync/spec/">https://wicg.github.io/background-sync/spec/</a>
   <dt id="biblio-web-nfc">[WEB-NFC]
   <dd><a href="https://w3c.github.io/web-nfc/"><cite>Web NFC API</cite></a>. ED. URL: <a href="https://w3c.github.io/web-nfc/">https://w3c.github.io/web-nfc/</a>
   <dt id="biblio-webmidi">[WEBMIDI]
   <dd>Chris Wilson; Jussi Kalliokoski. <a href="https://webaudio.github.io/web-midi-api/"><cite>Web MIDI API</cite></a>. URL: <a href="https://webaudio.github.io/web-midi-api/">https://webaudio.github.io/web-midi-api/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>dictionary</c-> <a href="#dictdef-permissiondescriptor"><code><c- g>PermissionDescriptor</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-permissionname"><c- n>PermissionName</c-></a> <a data-type="PermissionName " href="#dom-permissiondescriptor-name"><code><c- g>name</c-></code></a>;
};

<c- b>enum</c-> <a href="#enumdef-permissionstate"><code><c- g>PermissionState</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-granted"><c- s>"granted"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-denied"><c- s>"denied"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-prompt"><c- s>"prompt"</c-></a>,
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#permissionstatus"><code><c- g>PermissionStatus</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-permissionstate"><c- n>PermissionState</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="PermissionState" href="#dom-permissionstatus-state"><c- g>state</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-permissionstatus-onchange"><c- g>onchange</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->)]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"><c- g>Navigator</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#permissions"><c- n>Permissions</c-></a> <a data-readonly data-type="Permissions" href="#dom-navigator-permissions"><code><c- g>permissions</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Worker</c->)]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator"><c- g>WorkerNavigator</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#permissions"><c- n>Permissions</c-></a> <a data-readonly data-type="Permissions" href="#dom-workernavigator-permissions"><code><c- g>permissions</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#permissions"><code><c- g>Permissions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#permissionstatus"><c- n>PermissionStatus</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-query"><c- g>query</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a> <a href="#dom-permissions-query-permissiondesc-permissiondesc"><code><c- g>permissionDesc</c-></code></a>);
};

<c- b>enum</c-> <a href="#enumdef-permissionname"><code><c- g>PermissionName</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-geolocation"><c- s>"geolocation"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-notifications"><c- s>"notifications"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-push"><c- s>"push"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-midi"><c- s>"midi"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-camera"><c- s>"camera"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-microphone"><c- s>"microphone"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-speaker-selection"><c- s>"speaker-selection"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-device-info"><c- s>"device-info"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-background-fetch"><c- s>"background-fetch"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-background-sync"><c- s>"background-sync"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-bluetooth"><c- s>"bluetooth"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-persistent-storage"><c- s>"persistent-storage"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-ambient-light-sensor"><c- s>"ambient-light-sensor"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-accelerometer"><c- s>"accelerometer"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-gyroscope"><c- s>"gyroscope"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-magnetometer"><c- s>"magnetometer"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-clipboard-read"><c- s>"clipboard-read"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-clipboard-write"><c- s>"clipboard-write"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-display-capture"><c- s>"display-capture"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-nfc"><c- s>"nfc"</c-></a>,
};

<c- b>dictionary</c-> <a href="#dictdef-pushpermissiondescriptor"><code><c- g>PushPermissionDescriptor</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor"><c- n>PermissionDescriptor</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-pushpermissiondescriptor-uservisibleonly"><code><c- g>userVisibleOnly</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-midipermissiondescriptor"><code><c- g>MidiPermissionDescriptor</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor"><c- n>PermissionDescriptor</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-midipermissiondescriptor-sysex"><code><c- g>sysex</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-devicepermissiondescriptor"><code><c- g>DevicePermissionDescriptor</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor"><c- n>PermissionDescriptor</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-devicepermissiondescriptor-deviceid"><code><c- g>deviceId</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-cameradevicepermissiondescriptor"><code><c- g>CameraDevicePermissionDescriptor</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-devicepermissiondescriptor"><c- n>DevicePermissionDescriptor</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-cameradevicepermissiondescriptor-pantiltzoom"><code><c- g>panTiltZoom</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-permissionsetparameters"><code><c- g>PermissionSetParameters</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-permissiondescriptor"><c- n>PermissionDescriptor</c-></a> <a data-type="PermissionDescriptor " href="#dom-permissionsetparameters-descriptor"><code><c- g>descriptor</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-permissionstate"><c- n>PermissionState</c-></a> <a data-type="PermissionState " href="#dom-permissionsetparameters-state"><code><c- g>state</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-permissionsetparameters-onerealm"><code><c- g>oneRealm</c-></code></a> = <c- b>false</c->;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Safari is the only known UA that returns different results from this
        algorithm for different settings objects with the same origin. We should
        test which of the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#realms-settings-objects-global-objects">several
        possible settings objects</a> it uses. <a class="issue-return" href="#issue-current-entry-incumbent-or-relevant" title="Jump to section">↵</a></div>
  </div>
  <details class="mdn-anno unpositioned" data-anno-for="dom-navigator-permissions">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/permissions" title="The Navigator.permissions read-only property returns a Permissions object that can be used to query and update permission status of APIs covered by the Permissions API.">Navigator/permissions</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>46+</span></span><span class="safari yes"><span>Safari</span><span>16+</span></span><span class="chrome yes"><span>Chrome</span><span>43+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-permissionstatus-onchange">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PermissionStatus/change_event" title="The change event of the PermissionStatus interface fires whenever the PermissionStatus.state property changes.">PermissionStatus/change_event</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>46+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>43+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-permissionstatus-state">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PermissionStatus/state" title="The state read-only property of the PermissionStatus interface returns the state of a requested permission. This property returns one of &apos;granted&apos;, &apos;denied&apos;, or &apos;prompt&apos;.">PermissionStatus/state</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>46+</span></span><span class="safari yes"><span>Safari</span><span>16+</span></span><span class="chrome yes"><span>Chrome</span><span>44+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-permissions-query">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query" title="The Permissions.query() method of the Permissions interface returns the state of a user permission on the global scope.">Permissions/query</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>46+</span></span><span class="safari yes"><span>Safari</span><span>16+</span></span><span class="chrome yes"><span>Chrome</span><span>43+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="permissions-interface">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Permissions" title="The Permissions interface of the Permissions API provides the core Permission API functionality, such as methods for querying and revoking permissions">Permissions</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>46+</span></span><span class="safari yes"><span>Safari</span><span>16+</span></span><span class="chrome yes"><span>Chrome</span><span>43+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-workernavigator-permissions">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerNavigator/permissions" title="The WorkerNavigator.permissions read-only property returns a Permissions object that can be used to query and update permission status of APIs covered by the Permissions API.">WorkerNavigator/permissions</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>43+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    // Functions, divided by link type, that wrap an autolink's
    // contents with the appropriate outer syntax.
    // Alternately, a string naming another type they format
    // the same as.
    const typeFormatters = {
        'dfn': (text) => `[=${text}=]`,
        'abstract-op': (text) => `[\$${text}\$]`,
        'value': (text) => `''${text}''`,
        'http-header': (text) => `[:${text}:]`,
        'idl': (text) => `{{${text}}}`,
        'interface': 'idl',
        'constructor': 'idl',
        'method': 'idl',
        'argument': 'idl',
        'attribute': 'idl',
        'callback': 'idl',
        'dictionary': 'idl',
        'dict-member': 'idl',
        'enum': 'idl',
        'enum-value': 'idl',
        'exception': 'idl',
        'const': 'idl',
        'typedef': 'idl',
        'stringifier': 'idl',
        'serializer': 'idl',
        'iterator': 'idl',
        'maplike': 'idl',
        'setlike': 'idl',
        'extended-attribute': 'idl',
        'event': 'idl',
        'element': (element) => `<{${element}}>`,
        'element-state': 'element',
        'element-attr': 'element',
        'attr-value': 'element',
        'scheme': 'dfn',
        'permission': 'dfn',
        'grammar': (text) => `${text} (within a <pre class=prod>)`,
        'type': (text)=> `<<${text}>>`,
        'property': (text) => `'${text}'`,
        'descriptor': 'property',
        'function': 'value',
        'at-rule': 'value',
        'selector': 'value',
    };
    const typesUsingFor = new Set(
        [
            "descriptor",
            "value",
            "element-attr",
            "attr-value",
            "element-state",
            "method",
            "constructor",
            "argument",
            "attribute",
            "const",
            "dict-member",
            "event",
            "enum-value",
            "stringifier",
            "serializer",
            "iterator",
            "maplike",
            "setlike",
            "state",
            "mode",
            "context",
            "facet",
        ],
    )
    const typesNotUsingFor = new Set(
        [
            "property",
            "element",
            "interface",
            "namespace",
            "callback",
            "dictionary",
            "enum",
            "exception",
            "typedef",
            "http-header",
            "permission",
        ],
    )
    function linkFormatterFromType(type) {
        const fnOrType = typeFormatters[type];
        if(typeof fnOrType === 'string') {
            // follow the alias
            return linkFormatterFromType(fnOrType);
        }
        return fnOrType;
    };

    function genLinkingSyntaxes(dfn) {
        if(dfn.tagName != "DFN") return;

        const type = dfn.getAttribute('data-dfn-type');
        if(!type) {
            console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
            return [];
        }

        // Return a function that wraps link text based on the type
        const linkFormatter = linkFormatterFromType(type);
        if(!linkFormatter) {
            console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
            return [];
        }

        let ltAlts;
        if(dfn.hasAttribute('data-lt')) {
            ltAlts = dfn.getAttribute('data-lt')
                .split("|")
                .map(x=>x.trim());
        } else {
            ltAlts = [dfn.textContent.trim()];
        }
        if(type == "type") {
            // lt of "<foo>", but "foo" is the interior;
            // <<foo/bar>> is how you write it with a for,
            // not <foo/<bar>> or whatever.
            for(var i = 0; i < ltAlts.length; i++) {
                const lt = ltAlts[i];
                const match = /<(.*)>/.exec(lt);
                if(match) { ltAlts[i] = match[1]; }
            }
        }

        let forAlts;
        if(dfn.hasAttribute('data-dfn-for')) {
            forAlts = dfn.getAttribute('data-dfn-for')
                .split(",")
                .map(x=>x.trim());
        } else {
            forAlts = [''];
        }

        let linkingSyntaxes = [];
        if(!typesUsingFor.has(type)) {
            for(const lt of ltAlts) {
                linkingSyntaxes.push(linkFormatter(lt));
            }
        }
        if(!typesNotUsingFor.has(type)) {
            for(const f of forAlts) {
                linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
            }
        }
        return [
            mk.b({}, 'Possible linking syntaxes:'),
            mk.ul({},
                ...linkingSyntaxes.map(link => {
                    const copyLink = async () =>
                        await navigator.clipboard.writeText(link);
                    return mk.li({},
                        mk.div({ class: 'link-item' },
                            mk.button({
                                class: 'copy-icon', title: 'Copy',
                                type: 'button',
                                _onclick: copyLink,
                                tabindex: 0,
                            }, mk.span({ class: 'icon' }) ),
                            mk.span({}, link)
                        )
                    );
                })
            )
        ];
    }

    function genDfnPanel({ dfn, dfnID, url, dfnText, refSections, external }) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
            genLinkingSyntaxes(dfn),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel({ ...panelData, dfn });
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    // Functions, divided by link type, that wrap an autolink's
    // contents with the appropriate outer syntax.
    // Alternately, a string naming another type they format
    // the same as.
    const typeFormatters = {
        'dfn': (text) => `[=${text}=]`,
        'abstract-op': (text) => `[\$${text}\$]`,
        'value': (text) => `''${text}''`,
        'http-header': (text) => `[:${text}:]`,
        'idl': (text) => `{{${text}}}`,
        'interface': 'idl',
        'constructor': 'idl',
        'method': 'idl',
        'argument': 'idl',
        'attribute': 'idl',
        'callback': 'idl',
        'dictionary': 'idl',
        'dict-member': 'idl',
        'enum': 'idl',
        'enum-value': 'idl',
        'exception': 'idl',
        'const': 'idl',
        'typedef': 'idl',
        'stringifier': 'idl',
        'serializer': 'idl',
        'iterator': 'idl',
        'maplike': 'idl',
        'setlike': 'idl',
        'extended-attribute': 'idl',
        'event': 'idl',
        'element': (element) => `<{${element}}>`,
        'element-state': 'element',
        'element-attr': 'element',
        'attr-value': 'element',
        'scheme': 'dfn',
        'permission': 'dfn',
        'grammar': (text) => `${text} (within a <pre class=prod>)`,
        'type': (text)=> `<<${text}>>`,
        'property': (text) => `'${text}'`,
        'descriptor': 'property',
        'function': 'value',
        'at-rule': 'value',
        'selector': 'value',
    };
    const typesUsingFor = new Set(
        [
            "descriptor",
            "value",
            "element-attr",
            "attr-value",
            "element-state",
            "method",
            "constructor",
            "argument",
            "attribute",
            "const",
            "dict-member",
            "event",
            "enum-value",
            "stringifier",
            "serializer",
            "iterator",
            "maplike",
            "setlike",
            "state",
            "mode",
            "context",
            "facet",
        ],
    )
    const typesNotUsingFor = new Set(
        [
            "property",
            "element",
            "interface",
            "namespace",
            "callback",
            "dictionary",
            "enum",
            "exception",
            "typedef",
            "http-header",
            "permission",
        ],
    )
    function linkFormatterFromType(type) {
        const fnOrType = typeFormatters[type];
        if(typeof fnOrType === 'string') {
            // follow the alias
            return linkFormatterFromType(fnOrType);
        }
        return fnOrType;
    };

    function genLinkingSyntaxes(dfn) {
        if(dfn.tagName != "DFN") return;

        const type = dfn.getAttribute('data-dfn-type');
        if(!type) {
            console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
            return [];
        }

        // Return a function that wraps link text based on the type
        const linkFormatter = linkFormatterFromType(type);
        if(!linkFormatter) {
            console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
            return [];
        }

        let ltAlts;
        if(dfn.hasAttribute('data-lt')) {
            ltAlts = dfn.getAttribute('data-lt')
                .split("|")
                .map(x=>x.trim());
        } else {
            ltAlts = [dfn.textContent.trim()];
        }
        if(type == "type") {
            // lt of "<foo>", but "foo" is the interior;
            // <<foo/bar>> is how you write it with a for,
            // not <foo/<bar>> or whatever.
            for(var i = 0; i < ltAlts.length; i++) {
                const lt = ltAlts[i];
                const match = /<(.*)>/.exec(lt);
                if(match) { ltAlts[i] = match[1]; }
            }
        }

        let forAlts;
        if(dfn.hasAttribute('data-dfn-for')) {
            forAlts = dfn.getAttribute('data-dfn-for')
                .split(",")
                .map(x=>x.trim());
        } else {
            forAlts = [''];
        }

        let linkingSyntaxes = [];
        if(!typesUsingFor.has(type)) {
            for(const lt of ltAlts) {
                linkingSyntaxes.push(linkFormatter(lt));
            }
        }
        if(!typesNotUsingFor.has(type)) {
            for(const f of forAlts) {
                linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
            }
        }
        return [
            mk.b({}, 'Possible linking syntaxes:'),
            mk.ul({},
                ...linkingSyntaxes.map(link => {
                    const copyLink = async () =>
                        await navigator.clipboard.writeText(link);
                    return mk.li({},
                        mk.div({ class: 'link-item' },
                            mk.button({
                                class: 'copy-icon', title: 'Copy',
                                type: 'button',
                                _onclick: copyLink,
                                tabindex: 0,
                            }, mk.span({ class: 'icon' }) ),
                            mk.span({}, link)
                        )
                    );
                })
            )
        ];
    }

    function genDfnPanel({ dfn, dfnID, url, dfnText, refSections, external }) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
            genLinkingSyntaxes(dfn),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel({ ...panelData, dfn });
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* Boilerplate: script-dfn-panel-json */
window.dfnpanelData = {};
window.dfnpanelData['2bc0cdf4'] = {"dfnID": "2bc0cdf4", "url": "https://dom.spec.whatwg.org/#eventtarget", "dfnText": "EventTarget", "refSections": [{"refs": [{"id": "ref-for-eventtarget"}], "title": "6. \n    Status of a permission\n  "}], "external": true};
window.dfnpanelData['5fd23811'] = {"dfnID": "5fd23811", "url": "https://dom.spec.whatwg.org/#concept-event-fire", "dfnText": "fire an event", "refSections": [{"refs": [{"id": "ref-for-concept-event-fire"}], "title": "6. \n    Status of a permission\n  "}], "external": true};
window.dfnpanelData['b107f911'] = {"dfnID": "b107f911", "url": "https://tc39.github.io/ecma262/#current-realm", "dfnText": "current realm", "refSections": [{"refs": [{"id": "ref-for-current-realm"}], "title": "5.1. Reading the current permission state"}], "external": true};
window.dfnpanelData['a262536f'] = {"dfnID": "a262536f", "url": "https://tc39.github.io/ecma262/#sec-code-realms", "dfnText": "realm", "refSections": [{"refs": [{"id": "ref-for-sec-code-realms"}], "title": "5. Permission states"}, {"refs": [{"id": "ref-for-sec-code-realms\u2460"}, {"id": "ref-for-sec-code-realms\u2461"}, {"id": "ref-for-sec-code-realms\u2462"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-sec-code-realms\u2463"}], "title": "5.3. Reacting to users revoking permission"}, {"refs": [{"id": "ref-for-sec-code-realms\u2464"}, {"id": "ref-for-sec-code-realms\u2465"}, {"id": "ref-for-sec-code-realms\u2466"}], "title": "10.5. \n      Media Devices\n    "}], "external": true};
window.dfnpanelData['f0951476'] = {"dfnID": "f0951476", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler", "dfnText": "EventHandler", "refSections": [{"refs": [{"id": "ref-for-eventhandler"}], "title": "6. \n    Status of a permission\n  "}], "external": true};
window.dfnpanelData['be0c27b2'] = {"dfnID": "be0c27b2", "url": "https://html.spec.whatwg.org/multipage/system-state.html#navigator", "dfnText": "Navigator", "refSections": [{"refs": [{"id": "ref-for-navigator"}], "title": "7. \n    Navigator and WorkerNavigator extension\n  "}], "external": true};
window.dfnpanelData['a4785085'] = {"dfnID": "a4785085", "url": "https://html.spec.whatwg.org/multipage/workers.html#workernavigator", "dfnText": "WorkerNavigator", "refSections": [{"refs": [{"id": "ref-for-workernavigator"}], "title": "7. \n    Navigator and WorkerNavigator extension\n  "}], "external": true};
window.dfnpanelData['35972864'] = {"dfnID": "35972864", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document", "dfnText": "active document", "refSections": [{"refs": [{"id": "ref-for-nav-document"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['3610bd67'] = {"dfnID": "3610bd67", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use", "dfnText": "allowed to use", "refSections": [{"refs": [{"id": "ref-for-allowed-to-use"}], "title": "5.1. Reading the current permission state"}], "external": true};
window.dfnpanelData['3349d69f'] = {"dfnID": "3349d69f", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window", "dfnText": "associated document", "refSections": [{"refs": [{"id": "ref-for-concept-document-window"}], "title": "5.1. Reading the current permission state"}], "external": true};
window.dfnpanelData['6d88ab2e'] = {"dfnID": "6d88ab2e", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc", "dfnText": "browsing context", "refSections": [{"refs": [{"id": "ref-for-window-bc"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['12b8dfc0'] = {"dfnID": "12b8dfc0", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object", "dfnText": "current settings object", "refSections": [{"refs": [{"id": "ref-for-current-settings-object"}, {"id": "ref-for-current-settings-object\u2460"}], "title": "5.1. Reading the current permission state"}], "external": true};
window.dfnpanelData['3e12e042'] = {"dfnID": "3e12e042", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object", "dfnText": "environment settings object", "refSections": [{"refs": [{"id": "ref-for-environment-settings-object"}], "title": "3. Definitions"}, {"refs": [{"id": "ref-for-environment-settings-object\u2460"}, {"id": "ref-for-environment-settings-object\u2461"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-environment-settings-object\u2462"}, {"id": "ref-for-environment-settings-object\u2463"}, {"id": "ref-for-environment-settings-object\u2464"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['6a5a59a0'] = {"dfnID": "6a5a59a0", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers", "dfnText": "event handler", "refSections": [{"refs": [{"id": "ref-for-event-handlers"}], "title": "6. \n    Status of a permission\n  "}], "external": true};
window.dfnpanelData['9d386f55'] = {"dfnID": "9d386f55", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type", "dfnText": "event handler event type", "refSections": [{"refs": [{"id": "ref-for-event-handler-event-type"}], "title": "6. \n    Status of a permission\n  "}], "external": true};
window.dfnpanelData['8a30477b'] = {"dfnID": "8a30477b", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global", "dfnText": "global object", "refSections": [{"refs": [{"id": "ref-for-concept-settings-object-global"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['5155c2d3'] = {"dfnID": "5155c2d3", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#non-secure-context", "dfnText": "non-secure context", "refSections": [{"refs": [{"id": "ref-for-non-secure-context"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-non-secure-context\u2460"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-non-secure-context\u2461"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['43ac8374'] = {"dfnID": "43ac8374", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin", "dfnText": "origin", "refSections": [{"refs": [{"id": "ref-for-concept-settings-object-origin"}, {"id": "ref-for-concept-settings-object-origin\u2460"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['9a517a7d'] = {"dfnID": "9a517a7d", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task", "dfnText": "queue a task", "refSections": [{"refs": [{"id": "ref-for-queue-a-task"}], "title": "5.3. Reacting to users revoking permission"}, {"refs": [{"id": "ref-for-queue-a-task\u2460"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-queue-a-task\u2461"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['9c4c1e66'] = {"dfnID": "9c4c1e66", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object", "dfnText": "relevant settings object", "refSections": [{"refs": [{"id": "ref-for-relevant-settings-object"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['e3288657'] = {"dfnID": "e3288657", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop", "dfnText": "responsible event loop", "refSections": [{"refs": [{"id": "ref-for-responsible-event-loop"}], "title": "5.3. Reacting to users revoking permission"}], "external": true};
window.dfnpanelData['7393da89'] = {"dfnID": "7393da89", "url": "https://html.spec.whatwg.org/multipage/browsers.html#same-origin", "dfnText": "same origin", "refSections": [{"refs": [{"id": "ref-for-same-origin"}, {"id": "ref-for-same-origin\u2460"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-same-origin\u2461"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-same-origin\u2462"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['65181da8'] = {"dfnID": "65181da8", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#secure-context", "dfnText": "secure context", "refSections": [{"refs": [{"id": "ref-for-secure-context"}], "title": "10. \n    Permission Registry\n  "}], "external": true};
window.dfnpanelData['e270bd2a'] = {"dfnID": "e270bd2a", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-task", "dfnText": "task", "refSections": [{"refs": [{"id": "ref-for-concept-task"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['53275e46'] = {"dfnID": "53275e46", "url": "https://infra.spec.whatwg.org/#list-append", "dfnText": "append", "refSections": [{"refs": [{"id": "ref-for-list-append"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['649608b9'] = {"dfnID": "649608b9", "url": "https://infra.spec.whatwg.org/#list", "dfnText": "list", "refSections": [{"refs": [{"id": "ref-for-list"}, {"id": "ref-for-list\u2460"}, {"id": "ref-for-list\u2461"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['6d19ac93'] = {"dfnID": "6d19ac93", "url": "https://infra.spec.whatwg.org/#user-agent", "dfnText": "user agent", "refSections": [{"refs": [{"id": "ref-for-user-agent"}, {"id": "ref-for-user-agent\u2460"}, {"id": "ref-for-user-agent\u2461"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-user-agent\u2462"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-user-agent\u2463"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['ea4e717d'] = {"dfnID": "ea4e717d", "url": "https://w3c.github.io/manifest/#dfn-install", "dfnText": "install", "refSections": [{"refs": [{"id": "ref-for-dfn-install"}], "title": "3. Definitions"}], "external": true};
window.dfnpanelData['4145e7bf'] = {"dfnID": "4145e7bf", "url": "https://w3c.github.io/mediacapture-main/#deviceid", "dfnText": "deviceId", "refSections": [{"refs": [{"id": "ref-for-deviceid"}, {"id": "ref-for-deviceid\u2460"}, {"id": "ref-for-deviceid\u2461"}], "title": "10.5. \n      Media Devices\n    "}], "external": true};
window.dfnpanelData['7143e171'] = {"dfnID": "7143e171", "url": "https://w3c.github.io/mediacapture-main/#devicechange", "dfnText": "devicechange", "refSections": [{"refs": [{"id": "ref-for-devicechange"}], "title": "10.5. \n      Media Devices\n    "}], "external": true};
window.dfnpanelData['eca80770'] = {"dfnID": "eca80770", "url": "https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia", "dfnText": "getUserMedia()", "refSections": [{"refs": [{"id": "ref-for-dom-mediadevices-getusermedia"}], "title": "5.1. Reading the current permission state"}], "external": true};
window.dfnpanelData['cc890cc1'] = {"dfnID": "cc890cc1", "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature", "dfnText": "policy-controlled feature", "refSections": [{"refs": [{"id": "ref-for-policy-controlled-feature"}], "title": "5.1. Reading the current permission state"}], "external": true};
window.dfnpanelData['35725f70'] = {"dfnID": "35725f70", "url": "https://wicg.github.io/permissions-request/#permission-request-algorithm", "dfnText": "permission request algorithm", "refSections": [{"refs": [{"id": "ref-for-permission-request-algorithm"}], "title": "10.5. \n      Media Devices\n    "}], "external": true};
window.dfnpanelData['a09cf46b'] = {"dfnID": "a09cf46b", "url": "https://w3c.github.io/sensors/#generic-sensor-permission-revocation-algorithm", "dfnText": "generic sensor permission revocation algorithm", "refSections": [{"refs": [{"id": "ref-for-generic-sensor-permission-revocation-algorithm"}], "title": "10.10. \n      Ambient Light Sensor\n    "}, {"refs": [{"id": "ref-for-generic-sensor-permission-revocation-algorithm\u2460"}], "title": "10.11. \n      Accelerometer\n    "}, {"refs": [{"id": "ref-for-generic-sensor-permission-revocation-algorithm\u2461"}], "title": "10.12. \n      Gyroscope\n    "}, {"refs": [{"id": "ref-for-generic-sensor-permission-revocation-algorithm\u2462"}], "title": "10.13. \n      Magnetometer\n    "}], "external": true};
window.dfnpanelData['d5cea784'] = {"dfnID": "d5cea784", "url": "https://storage.spec.whatwg.org/#bucket-mode", "dfnText": "mode", "refSections": [{"refs": [{"id": "ref-for-bucket-mode"}], "title": "10.9. \n      Persistent Storage\n    "}], "external": true};
window.dfnpanelData['30e9e376'] = {"dfnID": "30e9e376", "url": "https://webbluetoothcg.github.io/web-bluetooth/#dictdef-bluetoothlescanfilterinit", "dfnText": "BluetoothLEScanFilterInit", "refSections": [{"refs": [{"id": "ref-for-dictdef-bluetoothlescanfilterinit"}], "title": "4. \n    Descriptions of permission requests\n  "}], "external": true};
window.dfnpanelData['678ccdc2'] = {"dfnID": "678ccdc2", "url": "https://webbluetoothcg.github.io/web-bluetooth/#typedefdef-bluetoothserviceuuid", "dfnText": "BluetoothServiceUUID", "refSections": [{"refs": [{"id": "ref-for-typedefdef-bluetoothserviceuuid"}], "title": "4. \n    Descriptions of permission requests\n  "}], "external": true};
window.dfnpanelData['024a1df2'] = {"dfnID": "024a1df2", "url": "https://w3c.github.io/webdriver/#dfn-current-browsing-context", "dfnText": "current browsing context", "refSections": [{"refs": [{"id": "ref-for-dfn-current-browsing-context"}, {"id": "ref-for-dfn-current-browsing-context\u2460"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['cce1676e'] = {"dfnID": "cce1676e", "url": "https://w3c.github.io/webdriver/#dfn-extension-commands", "dfnText": "extension command", "refSections": [{"refs": [{"id": "ref-for-dfn-extension-commands"}], "title": "11. \n    Automation\n  "}, {"refs": [{"id": "ref-for-dfn-extension-commands\u2460"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['040c67fa'] = {"dfnID": "040c67fa", "url": "https://w3c.github.io/webdriver/#dfn-extension-command-uri-template", "dfnText": "extension command uri template", "refSections": [{"refs": [{"id": "ref-for-dfn-extension-command-uri-template"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['8da4d1e3'] = {"dfnID": "8da4d1e3", "url": "https://w3c.github.io/webdriver/#dfn-invalid-argument", "dfnText": "invalid argument", "refSections": [{"refs": [{"id": "ref-for-dfn-invalid-argument"}, {"id": "ref-for-dfn-invalid-argument\u2460"}, {"id": "ref-for-dfn-invalid-argument\u2461"}, {"id": "ref-for-dfn-invalid-argument\u2462"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['11f6a078'] = {"dfnID": "11f6a078", "url": "https://w3c.github.io/webdriver/#dfn-local-end", "dfnText": "local end", "refSections": [{"refs": [{"id": "ref-for-dfn-local-end"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['82c23298'] = {"dfnID": "82c23298", "url": "https://w3c.github.io/webdriver/#dfn-remote-end-steps", "dfnText": "remote end steps", "refSections": [{"refs": [{"id": "ref-for-dfn-remote-end-steps"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['4923d430'] = {"dfnID": "4923d430", "url": "https://w3c.github.io/webdriver/#dfn-session", "dfnText": "session", "refSections": [{"refs": [{"id": "ref-for-dfn-session"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['4be6272b'] = {"dfnID": "4be6272b", "url": "https://w3c.github.io/webdriver/#dfn-success", "dfnText": "success", "refSections": [{"refs": [{"id": "ref-for-dfn-success"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['5cf0e148'] = {"dfnID": "5cf0e148", "url": "https://w3c.github.io/webdriver/#dfn-error", "dfnText": "webdriver error", "refSections": [{"refs": [{"id": "ref-for-dfn-error"}, {"id": "ref-for-dfn-error\u2460"}, {"id": "ref-for-dfn-error\u2461"}, {"id": "ref-for-dfn-error\u2462"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['7482107b'] = {"dfnID": "7482107b", "url": "https://w3c.github.io/webdriver/#dfn-error-code", "dfnText": "webdriver error code", "refSections": [{"refs": [{"id": "ref-for-dfn-error-code"}, {"id": "ref-for-dfn-error-code\u2460"}, {"id": "ref-for-dfn-error-code\u2461"}, {"id": "ref-for-dfn-error-code\u2462"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['8855a9aa'] = {"dfnID": "8855a9aa", "url": "https://webidl.spec.whatwg.org/#idl-DOMString", "dfnText": "DOMString", "refSections": [{"refs": [{"id": "ref-for-idl-DOMString"}], "title": "10.5. \n      Media Devices\n    "}], "external": true};
window.dfnpanelData['889e932f'] = {"dfnID": "889e932f", "url": "https://webidl.spec.whatwg.org/#Exposed", "dfnText": "Exposed", "refSections": [{"refs": [{"id": "ref-for-Exposed"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-Exposed\u2460"}, {"id": "ref-for-Exposed\u2461"}], "title": "7. \n    Navigator and WorkerNavigator extension\n  "}, {"refs": [{"id": "ref-for-Exposed\u2462"}], "title": "8. \n    Permissions interface\n  "}], "external": true};
window.dfnpanelData['bdbd19d1'] = {"dfnID": "bdbd19d1", "url": "https://webidl.spec.whatwg.org/#idl-promise", "dfnText": "Promise", "refSections": [{"refs": [{"id": "ref-for-idl-promise"}, {"id": "ref-for-idl-promise\u2460"}, {"id": "ref-for-idl-promise\u2461"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-idl-promise\u2462"}], "title": "12. \n    Examples\n  "}], "external": true};
window.dfnpanelData['a5c91173'] = {"dfnID": "a5c91173", "url": "https://webidl.spec.whatwg.org/#SameObject", "dfnText": "SameObject", "refSections": [{"refs": [{"id": "ref-for-SameObject"}, {"id": "ref-for-SameObject\u2460"}], "title": "7. \n    Navigator and WorkerNavigator extension\n  "}], "external": true};
window.dfnpanelData['d0b4a948'] = {"dfnID": "d0b4a948", "url": "https://webidl.spec.whatwg.org/#a-promise-rejected-with", "dfnText": "a promise rejected with", "refSections": [{"refs": [{"id": "ref-for-a-promise-rejected-with"}, {"id": "ref-for-a-promise-rejected-with\u2460"}], "title": "8. \n    Permissions interface\n  "}], "external": true};
window.dfnpanelData['5372cca8'] = {"dfnID": "5372cca8", "url": "https://webidl.spec.whatwg.org/#idl-boolean", "dfnText": "boolean", "refSections": [{"refs": [{"id": "ref-for-idl-boolean"}], "title": "10.3. \n      Push\n    "}, {"refs": [{"id": "ref-for-idl-boolean\u2460"}], "title": "10.4. \n      Midi\n    "}, {"refs": [{"id": "ref-for-idl-boolean\u2461"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-idl-boolean\u2462"}], "title": "11. \n    Automation\n  "}], "external": true};
window.dfnpanelData['cadf5fe9'] = {"dfnID": "cadf5fe9", "url": "https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value", "dfnText": "converted to an idl value", "refSections": [{"refs": [{"id": "ref-for-dfn-convert-ecmascript-to-idl-value"}, {"id": "ref-for-dfn-convert-ecmascript-to-idl-value\u2460"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-dfn-convert-ecmascript-to-idl-value\u2461"}, {"id": "ref-for-dfn-convert-ecmascript-to-idl-value\u2462"}], "title": "11.1. \n      Set Permission\n    "}], "external": true};
window.dfnpanelData['efd1ec5d'] = {"dfnID": "efd1ec5d", "url": "https://webidl.spec.whatwg.org/#idl-object", "dfnText": "object", "refSections": [{"refs": [{"id": "ref-for-idl-object"}], "title": "8. \n    Permissions interface\n  "}], "external": true};
window.dfnpanelData['new-information-about-the-users-intent'] = {"dfnID": "new-information-about-the-users-intent", "url": "#new-information-about-the-users-intent", "dfnText": "New information about the user\u2019s intent", "refSections": [{"refs": [{"id": "ref-for-new-information-about-the-users-intent"}, {"id": "ref-for-new-information-about-the-users-intent\u2460"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-new-information-about-the-users-intent\u2461"}, {"id": "ref-for-new-information-about-the-users-intent\u2462"}, {"id": "ref-for-new-information-about-the-users-intent\u2463"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-new-information-about-the-users-intent\u2464"}], "title": "10.5. \n      Media Devices\n    "}], "external": false};
window.dfnpanelData['implicit-signals'] = {"dfnID": "implicit-signals", "url": "#implicit-signals", "dfnText": "implicit signals", "refSections": [{"refs": [{"id": "ref-for-implicit-signals"}], "title": "3. Definitions"}], "external": false};
window.dfnpanelData['powerful-feature'] = {"dfnID": "powerful-feature", "url": "#powerful-feature", "dfnText": "Powerful feature", "refSections": [{"refs": [{"id": "ref-for-powerful-feature"}, {"id": "ref-for-powerful-feature\u2460"}], "title": "4. \n    Descriptions of permission requests\n  "}, {"refs": [{"id": "ref-for-powerful-feature\u2461"}, {"id": "ref-for-powerful-feature\u2462"}], "title": "5. Permission states"}, {"refs": [{"id": "ref-for-powerful-feature\u2463"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-powerful-feature\u2464"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-powerful-feature\u2465"}], "title": "5.3. Reacting to users revoking permission"}, {"refs": [{"id": "ref-for-powerful-feature\u2466"}, {"id": "ref-for-powerful-feature\u2467"}, {"id": "ref-for-powerful-feature\u2468"}, {"id": "ref-for-powerful-feature\u2460\u24ea"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-powerful-feature\u2460\u2460"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['dictdef-permissiondescriptor'] = {"dfnID": "dictdef-permissiondescriptor", "url": "#dictdef-permissiondescriptor", "dfnText": "PermissionDescriptor", "refSections": [{"refs": [{"id": "ref-for-dictdef-permissiondescriptor"}], "title": "4. \n    Descriptions of permission requests\n  "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2460"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2461"}, {"id": "ref-for-dictdef-permissiondescriptor\u2462"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2463"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2464"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2465"}], "title": "9. \n    Common permission algorithms\n  "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2466"}, {"id": "ref-for-dictdef-permissiondescriptor\u2467"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2468"}], "title": "10.3. \n      Push\n    "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2460\u24ea"}], "title": "10.4. \n      Midi\n    "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2460\u2460"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2460\u2461"}], "title": "11. \n    Automation\n  "}, {"refs": [{"id": "ref-for-dictdef-permissiondescriptor\u2460\u2462"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['dom-permissiondescriptor-name'] = {"dfnID": "dom-permissiondescriptor-name", "url": "#dom-permissiondescriptor-name", "dfnText": "name", "refSections": [{"refs": [{"id": "ref-for-dom-permissiondescriptor-name"}], "title": "5. Permission states"}, {"refs": [{"id": "ref-for-dom-permissiondescriptor-name\u2460"}, {"id": "ref-for-dom-permissiondescriptor-name\u2461"}, {"id": "ref-for-dom-permissiondescriptor-name\u2462"}, {"id": "ref-for-dom-permissiondescriptor-name\u2463"}, {"id": "ref-for-dom-permissiondescriptor-name\u2464"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-dom-permissiondescriptor-name\u2465"}, {"id": "ref-for-dom-permissiondescriptor-name\u2466"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-dom-permissiondescriptor-name\u2467"}, {"id": "ref-for-dom-permissiondescriptor-name\u2468"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-dom-permissiondescriptor-name\u2460\u24ea"}, {"id": "ref-for-dom-permissiondescriptor-name\u2460\u2460"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-dom-permissiondescriptor-name\u2460\u2461"}, {"id": "ref-for-dom-permissiondescriptor-name\u2460\u2462"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['aspects'] = {"dfnID": "aspects", "url": "#aspects", "dfnText": "aspects", "refSections": [{"refs": [{"id": "ref-for-aspects"}], "title": "4. \n    Descriptions of permission requests\n  "}], "external": false};
window.dfnpanelData['permission-state'] = {"dfnID": "permission-state", "url": "#permission-state", "dfnText": "permission state", "refSections": [{"refs": [{"id": "ref-for-permission-state"}, {"id": "ref-for-permission-state\u2460"}], "title": "2. \n    Privacy considerations\n  "}, {"refs": [{"id": "ref-for-permission-state\u2461"}, {"id": "ref-for-permission-state\u2462"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-permission-state\u2463"}, {"id": "ref-for-permission-state\u2464"}, {"id": "ref-for-permission-state\u2465"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-permission-state\u2466"}], "title": "9. \n    Common permission algorithms\n  "}, {"refs": [{"id": "ref-for-permission-state\u2467"}, {"id": "ref-for-permission-state\u2468"}, {"id": "ref-for-permission-state\u2460\u24ea"}, {"id": "ref-for-permission-state\u2460\u2460"}, {"id": "ref-for-permission-state\u2460\u2461"}, {"id": "ref-for-permission-state\u2460\u2462"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-permission-state\u2460\u2463"}, {"id": "ref-for-permission-state\u2460\u2464"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-permission-state\u2460\u2465"}, {"id": "ref-for-permission-state\u2460\u2466"}], "title": "10.16. \n      Screen Capture\n    "}, {"refs": [{"id": "ref-for-permission-state\u2460\u2467"}, {"id": "ref-for-permission-state\u2460\u2468"}, {"id": "ref-for-permission-state\u2461\u24ea"}, {"id": "ref-for-permission-state\u2461\u2460"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['extra-permission-data'] = {"dfnID": "extra-permission-data", "url": "#extra-permission-data", "dfnText": "extra permission data", "refSections": [{"refs": [{"id": "ref-for-extra-permission-data"}, {"id": "ref-for-extra-permission-data\u2460"}, {"id": "ref-for-extra-permission-data\u2461"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-extra-permission-data\u2462"}], "title": "10.5. \n      Media Devices\n    "}], "external": false};
window.dfnpanelData['request-permission-to-use'] = {"dfnID": "request-permission-to-use", "url": "#request-permission-to-use", "dfnText": "request permission to use", "refSections": [{"refs": [{"id": "ref-for-request-permission-to-use"}, {"id": "ref-for-request-permission-to-use\u2460"}], "title": "5.2. Requesting more permission"}], "external": false};
window.dfnpanelData['prompt-the-user-to-choose'] = {"dfnID": "prompt-the-user-to-choose", "url": "#prompt-the-user-to-choose", "dfnText": "prompt the user to choose", "refSections": [{"refs": [{"id": "ref-for-prompt-the-user-to-choose"}, {"id": "ref-for-prompt-the-user-to-choose\u2460"}, {"id": "ref-for-prompt-the-user-to-choose\u2461"}], "title": "5.2. Requesting more permission"}], "external": false};
window.dfnpanelData['enumdef-permissionstate'] = {"dfnID": "enumdef-permissionstate", "url": "#enumdef-permissionstate", "dfnText": "PermissionState", "refSections": [{"refs": [{"id": "ref-for-enumdef-permissionstate"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-enumdef-permissionstate\u2460"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-enumdef-permissionstate\u2461"}], "title": "11. \n    Automation\n  "}], "external": false};
window.dfnpanelData['dom-permissionstate-granted'] = {"dfnID": "dom-permissionstate-granted", "url": "#dom-permissionstate-granted", "dfnText": "\"granted\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstate-granted"}], "title": "2. \n    Privacy considerations\n  "}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2460"}, {"id": "ref-for-dom-permissionstate-granted\u2461"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2462"}, {"id": "ref-for-dom-permissionstate-granted\u2463"}, {"id": "ref-for-dom-permissionstate-granted\u2464"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2465"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2466"}, {"id": "ref-for-dom-permissionstate-granted\u2467"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2468"}, {"id": "ref-for-dom-permissionstate-granted\u2460\u24ea"}, {"id": "ref-for-dom-permissionstate-granted\u2460\u2460"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-dom-permissionstate-granted\u2460\u2461"}], "title": "10.16. \n      Screen Capture\n    "}], "external": false};
window.dfnpanelData['dom-permissionstate-denied'] = {"dfnID": "dom-permissionstate-denied", "url": "#dom-permissionstate-denied", "dfnText": "\"denied\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstate-denied"}, {"id": "ref-for-dom-permissionstate-denied\u2460"}, {"id": "ref-for-dom-permissionstate-denied\u2461"}, {"id": "ref-for-dom-permissionstate-denied\u2462"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-dom-permissionstate-denied\u2463"}, {"id": "ref-for-dom-permissionstate-denied\u2464"}, {"id": "ref-for-dom-permissionstate-denied\u2465"}, {"id": "ref-for-dom-permissionstate-denied\u2466"}, {"id": "ref-for-dom-permissionstate-denied\u2467"}, {"id": "ref-for-dom-permissionstate-denied\u2468"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-dom-permissionstate-denied\u2460\u24ea"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-dom-permissionstate-denied\u2460\u2460"}, {"id": "ref-for-dom-permissionstate-denied\u2460\u2461"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-dom-permissionstate-denied\u2460\u2462"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-dom-permissionstate-denied\u2460\u2463"}], "title": "10.16. \n      Screen Capture\n    "}, {"refs": [{"id": "ref-for-dom-permissionstate-denied\u2460\u2464"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['dom-permissionstate-prompt'] = {"dfnID": "dom-permissionstate-prompt", "url": "#dom-permissionstate-prompt", "dfnText": "\"prompt\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstate-prompt"}, {"id": "ref-for-dom-permissionstate-prompt\u2460"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-dom-permissionstate-prompt\u2461"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-dom-permissionstate-prompt\u2462"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-dom-permissionstate-prompt\u2463"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-dom-permissionstate-prompt\u2464"}], "title": "10.16. \n      Screen Capture\n    "}], "external": false};
window.dfnpanelData['permissionstatus'] = {"dfnID": "permissionstatus", "url": "#permissionstatus", "dfnText": "PermissionStatus", "refSections": [{"refs": [{"id": "ref-for-permissionstatus"}, {"id": "ref-for-permissionstatus\u2460"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-permissionstatus\u2461"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-permissionstatus\u2462"}], "title": "9. \n    Common permission algorithms\n  "}, {"refs": [{"id": "ref-for-permissionstatus\u2463"}, {"id": "ref-for-permissionstatus\u2464"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionstatus-query-slot'] = {"dfnID": "dom-permissionstatus-query-slot", "url": "#dom-permissionstatus-query-slot", "dfnText": "[[query]]", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstatus-query-slot"}, {"id": "ref-for-dom-permissionstatus-query-slot\u2460"}, {"id": "ref-for-dom-permissionstatus-query-slot\u2461"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-dom-permissionstatus-query-slot\u2462"}, {"id": "ref-for-dom-permissionstatus-query-slot\u2463"}], "title": "8. \n    Permissions interface\n  "}], "external": false};
window.dfnpanelData['create-a-permissionstatus'] = {"dfnID": "create-a-permissionstatus", "url": "#create-a-permissionstatus", "dfnText": "create a PermissionStatus", "refSections": [{"refs": [{"id": "ref-for-create-a-permissionstatus"}], "title": "8. \n    Permissions interface\n  "}], "external": false};
window.dfnpanelData['dom-permissionstatus-state'] = {"dfnID": "dom-permissionstatus-state", "url": "#dom-permissionstatus-state", "dfnText": "state", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstatus-state"}], "title": "6. \n    Status of a permission\n  "}], "external": false};
window.dfnpanelData['dom-permissionstatus-onchange'] = {"dfnID": "dom-permissionstatus-onchange", "url": "#dom-permissionstatus-onchange", "dfnText": "onchange", "refSections": [{"refs": [{"id": "ref-for-dom-permissionstatus-onchange"}], "title": "6. \n    Status of a permission\n  "}], "external": false};
window.dfnpanelData['permission-task-source'] = {"dfnID": "permission-task-source", "url": "#permission-task-source", "dfnText": "permission task source", "refSections": [{"refs": [{"id": "ref-for-permission-task-source"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['permissions'] = {"dfnID": "permissions", "url": "#permissions", "dfnText": "Permissions", "refSections": [{"refs": [{"id": "ref-for-permissions"}, {"id": "ref-for-permissions\u2460"}], "title": "7. \n    Navigator and WorkerNavigator extension\n  "}, {"refs": [{"id": "ref-for-permissions\u2461"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissions-query'] = {"dfnID": "dom-permissions-query", "url": "#dom-permissions-query", "dfnText": "query(permissionDesc)", "refSections": [{"refs": [{"id": "ref-for-dom-permissions-query"}], "title": "1. \n    Scope of this document\n  "}, {"refs": [{"id": "ref-for-dom-permissions-query\u2460"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-dom-permissions-query\u2461"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['boolean-permission-query-algorithm'] = {"dfnID": "boolean-permission-query-algorithm", "url": "#boolean-permission-query-algorithm", "dfnText": "boolean permission query algorithm", "refSections": [{"refs": [{"id": "ref-for-boolean-permission-query-algorithm"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['enumdef-permissionname'] = {"dfnID": "enumdef-permissionname", "url": "#enumdef-permissionname", "dfnText": "PermissionName", "refSections": [{"refs": [{"id": "ref-for-enumdef-permissionname"}], "title": "4. \n    Descriptions of permission requests\n  "}, {"refs": [{"id": "ref-for-enumdef-permissionname\u2460"}, {"id": "ref-for-enumdef-permissionname\u2461"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-enumdef-permissionname\u2462"}, {"id": "ref-for-enumdef-permissionname\u2463"}], "title": "5.2. Requesting more permission"}, {"refs": [{"id": "ref-for-enumdef-permissionname\u2464"}, {"id": "ref-for-enumdef-permissionname\u2465"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['allowed-in-non-secure-contexts'] = {"dfnID": "allowed-in-non-secure-contexts", "url": "#allowed-in-non-secure-contexts", "dfnText": "allowed in non-secure contexts", "refSections": [{"refs": [{"id": "ref-for-allowed-in-non-secure-contexts"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-allowed-in-non-secure-contexts\u2460"}], "title": "10.1. \n      Geolocation\n    "}, {"refs": [{"id": "ref-for-allowed-in-non-secure-contexts\u2461"}], "title": "10.2. \n      Notifications\n    "}, {"refs": [{"id": "ref-for-allowed-in-non-secure-contexts\u2462"}], "title": "10.4. \n      Midi\n    "}, {"refs": [{"id": "ref-for-allowed-in-non-secure-contexts\u2463"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['permission-descriptor-type'] = {"dfnID": "permission-descriptor-type", "url": "#permission-descriptor-type", "dfnText": "permission descriptor type", "refSections": [{"refs": [{"id": "ref-for-permission-descriptor-type"}, {"id": "ref-for-permission-descriptor-type\u2460"}, {"id": "ref-for-permission-descriptor-type\u2461"}], "title": "4. \n    Descriptions of permission requests\n  "}, {"refs": [{"id": "ref-for-permission-descriptor-type\u2462"}], "title": "5. Permission states"}, {"refs": [{"id": "ref-for-permission-descriptor-type\u2463"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-permission-descriptor-type\u2464"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-permission-descriptor-type\u2465"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-permission-descriptor-type\u2466"}], "title": "10.3. \n      Push\n    "}, {"refs": [{"id": "ref-for-permission-descriptor-type\u2467"}], "title": "10.4. \n      Midi\n    "}, {"refs": [{"id": "ref-for-permission-descriptor-type\u2468"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-permission-descriptor-type\u2460\u24ea"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['permissiondescriptor-stronger-than'] = {"dfnID": "permissiondescriptor-stronger-than", "url": "#permissiondescriptor-stronger-than", "dfnText": "stronger than", "refSections": [{"refs": [{"id": "ref-for-permissiondescriptor-stronger-than"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-permissiondescriptor-stronger-than\u2460"}], "title": "10.3. \n      Push\n    "}, {"refs": [{"id": "ref-for-permissiondescriptor-stronger-than\u2461"}], "title": "10.4. \n      Midi\n    "}, {"refs": [{"id": "ref-for-permissiondescriptor-stronger-than\u2462"}], "title": "10.5. \n      Media Devices\n    "}], "external": false};
window.dfnpanelData['permission-state-constraints'] = {"dfnID": "permission-state-constraints", "url": "#permission-state-constraints", "dfnText": "permission state constraints", "refSections": [{"refs": [{"id": "ref-for-permission-state-constraints"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-permission-state-constraints\u2460"}], "title": "10.16. \n      Screen Capture\n    "}], "external": false};
window.dfnpanelData['extra-permission-data-type'] = {"dfnID": "extra-permission-data-type", "url": "#extra-permission-data-type", "dfnText": "extra permission data type", "refSections": [{"refs": [{"id": "ref-for-extra-permission-data-type"}, {"id": "ref-for-extra-permission-data-type\u2460"}], "title": "5.1. Reading the current permission state"}, {"refs": [{"id": "ref-for-extra-permission-data-type\u2461"}], "title": "10.5. \n      Media Devices\n    "}], "external": false};
window.dfnpanelData['extra-permission-data-constraints'] = {"dfnID": "extra-permission-data-constraints", "url": "#extra-permission-data-constraints", "dfnText": "extra permission data constraints", "refSections": [{"refs": [{"id": "ref-for-extra-permission-data-constraints"}], "title": "5.1. Reading the current permission state"}], "external": false};
window.dfnpanelData['permission-result-type'] = {"dfnID": "permission-result-type", "url": "#permission-result-type", "dfnText": "permission result type", "refSections": [{"refs": [{"id": "ref-for-permission-result-type"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-permission-result-type\u2460"}, {"id": "ref-for-permission-result-type\u2461"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['permission-query-algorithm'] = {"dfnID": "permission-query-algorithm", "url": "#permission-query-algorithm", "dfnText": "permission query algorithm", "refSections": [{"refs": [{"id": "ref-for-permission-query-algorithm"}], "title": "6. \n    Status of a permission\n  "}, {"refs": [{"id": "ref-for-permission-query-algorithm\u2460"}], "title": "8. \n    Permissions interface\n  "}, {"refs": [{"id": "ref-for-permission-query-algorithm\u2461"}], "title": "10.5. \n      Media Devices\n    "}], "external": false};
window.dfnpanelData['permission-revocation-algorithm'] = {"dfnID": "permission-revocation-algorithm", "url": "#permission-revocation-algorithm", "dfnText": "permission revocation algorithm", "refSections": [{"refs": [{"id": "ref-for-permission-revocation-algorithm"}], "title": "5.3. Reacting to users revoking permission"}, {"refs": [{"id": "ref-for-permission-revocation-algorithm\u2460"}], "title": "10.5. \n      Media Devices\n    "}, {"refs": [{"id": "ref-for-permission-revocation-algorithm\u2461"}], "title": "10.10. \n      Ambient Light Sensor\n    "}, {"refs": [{"id": "ref-for-permission-revocation-algorithm\u2462"}], "title": "10.11. \n      Accelerometer\n    "}, {"refs": [{"id": "ref-for-permission-revocation-algorithm\u2463"}], "title": "10.12. \n      Gyroscope\n    "}, {"refs": [{"id": "ref-for-permission-revocation-algorithm\u2464"}], "title": "10.13. \n      Magnetometer\n    "}], "external": false};
window.dfnpanelData['boolean-feature'] = {"dfnID": "boolean-feature", "url": "#boolean-feature", "dfnText": "boolean feature", "refSections": [{"refs": [{"id": "ref-for-boolean-feature"}], "title": "10.1. \n      Geolocation\n    "}, {"refs": [{"id": "ref-for-boolean-feature\u2460"}], "title": "10.2. \n      Notifications\n    "}], "external": false};
window.dfnpanelData['dom-permissionname-geolocation'] = {"dfnID": "dom-permissionname-geolocation", "url": "#dom-permissionname-geolocation", "dfnText": "\"geolocation\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-geolocation"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-notifications'] = {"dfnID": "dom-permissionname-notifications", "url": "#dom-permissionname-notifications", "dfnText": "\"notifications\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-notifications"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-push'] = {"dfnID": "dom-permissionname-push", "url": "#dom-permissionname-push", "dfnText": "\"push\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-push"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-midi'] = {"dfnID": "dom-permissionname-midi", "url": "#dom-permissionname-midi", "dfnText": "\"midi\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-midi"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-camera'] = {"dfnID": "dom-permissionname-camera", "url": "#dom-permissionname-camera", "dfnText": "\"camera\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-camera"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-microphone'] = {"dfnID": "dom-permissionname-microphone", "url": "#dom-permissionname-microphone", "dfnText": "\"microphone\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-microphone"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-speaker-selection'] = {"dfnID": "dom-permissionname-speaker-selection", "url": "#dom-permissionname-speaker-selection", "dfnText": "\"speaker-selection\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-speaker-selection"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dictdef-devicepermissiondescriptor'] = {"dfnID": "dictdef-devicepermissiondescriptor", "url": "#dictdef-devicepermissiondescriptor", "dfnText": "DevicePermissionDescriptor", "refSections": [{"refs": [{"id": "ref-for-dictdef-devicepermissiondescriptor"}], "title": "10.5. \n      Media Devices\n    "}], "external": false};
window.dfnpanelData['dom-devicepermissiondescriptor-deviceid'] = {"dfnID": "dom-devicepermissiondescriptor-deviceid", "url": "#dom-devicepermissiondescriptor-deviceid", "dfnText": "deviceId", "refSections": [{"refs": [{"id": "ref-for-dom-devicepermissiondescriptor-deviceid"}, {"id": "ref-for-dom-devicepermissiondescriptor-deviceid\u2460"}, {"id": "ref-for-dom-devicepermissiondescriptor-deviceid\u2461"}, {"id": "ref-for-dom-devicepermissiondescriptor-deviceid\u2462"}], "title": "10.5. \n      Media Devices\n    "}], "external": false};
window.dfnpanelData['dom-permissionname-device-info'] = {"dfnID": "dom-permissionname-device-info", "url": "#dom-permissionname-device-info", "dfnText": "\"device-info\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-device-info"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-dom-permissionname-device-info\u2460"}, {"id": "ref-for-dom-permissionname-device-info\u2461"}, {"id": "ref-for-dom-permissionname-device-info\u2462"}], "title": "10.5. \n      Media Devices\n    "}], "external": false};
window.dfnpanelData['dom-permissionname-background-fetch'] = {"dfnID": "dom-permissionname-background-fetch", "url": "#dom-permissionname-background-fetch", "dfnText": "\"background-fetch\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-background-fetch"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-background-sync'] = {"dfnID": "dom-permissionname-background-sync", "url": "#dom-permissionname-background-sync", "dfnText": "\"background-sync\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-background-sync"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-bluetooth'] = {"dfnID": "dom-permissionname-bluetooth", "url": "#dom-permissionname-bluetooth", "dfnText": "\"bluetooth\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-bluetooth"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-persistent-storage'] = {"dfnID": "dom-permissionname-persistent-storage", "url": "#dom-permissionname-persistent-storage", "dfnText": "\"persistent-storage\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-persistent-storage"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-ambient-light-sensor'] = {"dfnID": "dom-permissionname-ambient-light-sensor", "url": "#dom-permissionname-ambient-light-sensor", "dfnText": "\"ambient-light-sensor\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-ambient-light-sensor"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-dom-permissionname-ambient-light-sensor\u2460"}], "title": "10.10. \n      Ambient Light Sensor\n    "}], "external": false};
window.dfnpanelData['dom-permissionname-accelerometer'] = {"dfnID": "dom-permissionname-accelerometer", "url": "#dom-permissionname-accelerometer", "dfnText": "\"accelerometer\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-accelerometer"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-dom-permissionname-accelerometer\u2460"}], "title": "10.11. \n      Accelerometer\n    "}], "external": false};
window.dfnpanelData['dom-permissionname-gyroscope'] = {"dfnID": "dom-permissionname-gyroscope", "url": "#dom-permissionname-gyroscope", "dfnText": "\"gyroscope\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-gyroscope"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-dom-permissionname-gyroscope\u2460"}], "title": "10.12. \n      Gyroscope\n    "}], "external": false};
window.dfnpanelData['dom-permissionname-magnetometer'] = {"dfnID": "dom-permissionname-magnetometer", "url": "#dom-permissionname-magnetometer", "dfnText": "\"magnetometer\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-magnetometer"}], "title": "10. \n    Permission Registry\n  "}, {"refs": [{"id": "ref-for-dom-permissionname-magnetometer\u2460"}], "title": "10.13. \n      Magnetometer\n    "}], "external": false};
window.dfnpanelData['dom-permissionname-clipboard-read'] = {"dfnID": "dom-permissionname-clipboard-read", "url": "#dom-permissionname-clipboard-read", "dfnText": "\"clipboard-read\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-clipboard-read"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-clipboard-write'] = {"dfnID": "dom-permissionname-clipboard-write", "url": "#dom-permissionname-clipboard-write", "dfnText": "\"clipboard-write\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-clipboard-write"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-display-capture'] = {"dfnID": "dom-permissionname-display-capture", "url": "#dom-permissionname-display-capture", "dfnText": "\"display-capture\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-display-capture"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dom-permissionname-nfc'] = {"dfnID": "dom-permissionname-nfc", "url": "#dom-permissionname-nfc", "dfnText": "\"nfc\"", "refSections": [{"refs": [{"id": "ref-for-dom-permissionname-nfc"}], "title": "10. \n    Permission Registry\n  "}], "external": false};
window.dfnpanelData['dictdef-permissionsetparameters'] = {"dfnID": "dictdef-permissionsetparameters", "url": "#dictdef-permissionsetparameters", "dfnText": "PermissionSetParameters", "refSections": [{"refs": [{"id": "ref-for-dictdef-permissionsetparameters"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['dom-permissionsetparameters-descriptor'] = {"dfnID": "dom-permissionsetparameters-descriptor", "url": "#dom-permissionsetparameters-descriptor", "dfnText": "descriptor", "refSections": [{"refs": [{"id": "ref-for-dom-permissionsetparameters-descriptor"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['dom-permissionsetparameters-state'] = {"dfnID": "dom-permissionsetparameters-state", "url": "#dom-permissionsetparameters-state", "dfnText": "state", "refSections": [{"refs": [{"id": "ref-for-dom-permissionsetparameters-state"}, {"id": "ref-for-dom-permissionsetparameters-state\u2460"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
window.dfnpanelData['dom-permissionsetparameters-onerealm'] = {"dfnID": "dom-permissionsetparameters-onerealm", "url": "#dom-permissionsetparameters-onerealm", "dfnText": "oneRealm", "refSections": [{"refs": [{"id": "ref-for-dom-permissionsetparameters-onerealm"}], "title": "11.1. \n      Set Permission\n    "}], "external": false};
</script>
<script>/* Boilerplate: script-dom-helper */
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{

function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        const rect = dfn.getBoundingClientRect();
        const top = window.scrollY + rect.top
        panel.style.top = top + "px";
        panel.top = top;
        panel.height = rect.height;
        panel.classList.remove("unpositioned");
        const panelRect = panel.getBoundingClientRect()
        if(main) {
            panel.classList.toggle("overlapping-main", panelRect.left < mainRect.right)
        }
    }
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
/*
Color-choosing design:

Colors are ordered by goodness.
Each color has a usage count (initially zero).
Each variable has a last-used color.

* If the var has a last-used color, and that color's usage is 0,
    return that color.
* Otherwise, return the lowest-indexed color with the lowest usage.
    Increment the color's usage and set it as the last-used color
    for that var.
* On unclicking, decrement usage of the color.
*/
"use strict";
{
    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    const indexCounts = new Map();
    const indexNames = new Map();
    function highlightSameAlgoVars(v) {
        // Find the algorithm container.
        let algoContainer = null;
        let searchEl = v;
        while(algoContainer == null && searchEl != document.body) {
            searchEl = searchEl.parentNode;
            if(searchEl.hasAttribute("data-algorithm")) {
                algoContainer = searchEl;
            }
        }

        // Not highlighting document-global vars,
        // too likely to be unrelated.
        if(algoContainer == null) return;

        const algoName = algoContainer.getAttribute("data-algorithm");
        const varName = getVarName(v);
        const addClass = !v.classList.contains("selected");
        let highlightClass = null;
        if(addClass) {
            const index = chooseHighlightIndex(algoName, varName);
            indexCounts.get(algoName)[index] += 1;
            indexNames.set(algoName+"///"+varName, index);
            highlightClass = nameFromIndex(index);
        } else {
            const index = previousHighlightIndex(algoName, varName);
            indexCounts.get(algoName)[index] -= 1;
            highlightClass = nameFromIndex(index);
        }

        // Find all same-name vars, and toggle their class appropriately.
        for(const el of algoContainer.querySelectorAll("var")) {
            if(getVarName(el) == varName) {
                el.classList.toggle("selected", addClass);
                el.classList.toggle(highlightClass, addClass);
            }
        }
    }
    function getVarName(el) {
        return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
    }
    function chooseHighlightIndex(algoName, varName) {
        let indexes = null;
        if(indexCounts.has(algoName)) {
            indexes = indexCounts.get(algoName);
        } else {
            // 7 classes right now
            indexes = [0,0,0,0,0,0,0];
            indexCounts.set(algoName, indexes);
        }

        // If the element was recently unclicked,
        // *and* that color is still unclaimed,
        // give it back the same color.
        const lastIndex = previousHighlightIndex(algoName, varName);
        if(indexes[lastIndex] === 0) return lastIndex;

        // Find the earliest index with the lowest count.
        const minCount = Math.min.apply(null, indexes);
        let index = null;
        for(var i = 0; i < indexes.length; i++) {
            if(indexes[i] == minCount) {
                return i;
            }
        }
    }
    function previousHighlightIndex(algoName, varName) {
        return indexNames.get(algoName+"///"+varName);
    }
    function nameFromIndex(index) {
        return "selected" + index;
    }
}
</script>