<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Intersection Observer</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/TR/intersection-observer/" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Intersection Observer</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/IntersectionObserver/">https://w3c.github.io/IntersectionObserver/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/intersection-observer/">https://www.w3.org/TR/intersection-observer/</a>
      <dt>Previous Versions:
      <dd><a href="https://www.w3.org/TR/2023/WD-intersection-observer-20231018/" rel="prev">https://www.w3.org/TR/2023/WD-intersection-observer-20231018/</a>
      <dt>Test Suite:
      <dd><a href="http://w3c-test.org/intersection-observer/">http://w3c-test.org/intersection-observer/</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="91208"><a class="p-name fn u-email email" href="mailto:szager@google.com">Stefan Zager</a> (<span class="p-org org">Google</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="106537"><a class="p-name fn u-email email" href="mailto:emilio@mozilla.com">Emilio Cobos Álvarez</a> (<span class="p-org org">Mozilla</span>)
      <dt class="editor">Former Editor:
      <dd class="editor p-author h-card vcard" data-editor-id="73819"><a class="p-name fn u-email email" href="mailto:mpb@google.com">Michael Blain</a> (<span class="p-org org">Google</span>)
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This specification describes  an API that can be used to understand the visibility and position of DOM elements ("targets") relative to a containing element or to the top-level viewport ("root"). The position is delivered asynchronously and is useful for understanding the visibility of elements and implementing pre-loading and deferred loading of DOM content.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em> </p>
   <p> This document was published by the <a href="https://www.w3.org/groups/wg/webapps">Web Applications Working Group</a> as an Editors Draft. This document is intended to become a W3C Recommendation. </p>
   <p></p>
   <p> This document was published by the <a href="https://www.w3.org/groups/wg/webapps">Web Applications Working Group</a> as a Working Draft.

    Feedback and comments on this specification are welcome. Please use <a href="https://github.com/W3C/IntersectionObserver/issues">GitHub issues</a> Historical discussions can be found in the <a href="https://lists.w3.org/Archives/Public/public-webapps/">public-webapps@w3.org archives</a>. </p>
   <p> Publication as an Editors Draft does not imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. This is a draft document and may
    be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite
    this document as other than work in progress. </p>
   <p> This document was produced by a group operating under the <a href="https://www.w3.org/policies/patent-policy/20200915/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="https://www.w3.org/2004/01/pp-impl/114929/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/policies/patent-policy/20200915/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/policies/patent-policy/20200915/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#intersection-observer-api"><span class="secno">2</span> <span class="content">Intersection Observer</span></a>
     <ol class="toc">
      <li><a href="#intersection-observer-callback"><span class="secno">2.1</span> <span class="content"> The IntersectionObserverCallback</span></a>
      <li><a href="#intersection-observer-interface"><span class="secno">2.2</span> <span class="content"> The IntersectionObserver interface</span></a>
      <li><a href="#intersection-observer-entry"><span class="secno">2.3</span> <span class="content"> The IntersectionObserverEntry interface</span></a>
      <li><a href="#intersection-observer-init"><span class="secno">2.4</span> <span class="content"> The IntersectionObserverInit dictionary</span></a>
     </ol>
    <li>
     <a href="#intersection-observer-processing-model"><span class="secno">3</span> <span class="content"> Processing Model</span></a>
     <ol class="toc">
      <li>
       <a href="#defines"><span class="secno">3.1</span> <span class="content"> Internal Slot Definitions</span></a>
       <ol class="toc">
        <li><a href="#document-defines"><span class="secno">3.1.1</span> <span class="content"> Document</span></a>
        <li><a href="#element-private-slots"><span class="secno">3.1.2</span> <span class="content"> Element</span></a>
        <li><a href="#intersection-observer-private-slots"><span class="secno">3.1.3</span> <span class="content"> IntersectionObserver</span></a>
       </ol>
      <li>
       <a href="#algorithms"><span class="secno">3.2</span> <span class="content"> Algorithms</span></a>
       <ol class="toc">
        <li><a href="#initialize-new-intersection-observer"><span class="secno">3.2.1</span> <span class="content">Initialize a new IntersectionObserver</span></a>
        <li><a href="#observe-target-element"><span class="secno">3.2.2</span> <span class="content">Observe a target Element</span></a>
        <li><a href="#unobserve-target-element"><span class="secno">3.2.3</span> <span class="content">Unobserve a target Element</span></a>
        <li><a href="#queue-intersection-observer-task"><span class="secno">3.2.4</span> <span class="content"> Queue an Intersection Observer Task</span></a>
        <li><a href="#notify-intersection-observers-algo"><span class="secno">3.2.5</span> <span class="content"> Notify Intersection Observers</span></a>
        <li><a href="#queue-intersection-observer-entry-algo"><span class="secno">3.2.6</span> <span class="content"> Queue an IntersectionObserverEntry</span></a>
        <li><a href="#calculate-intersection-rect-algo"><span class="secno">3.2.7</span> <span class="content"> Compute the Intersection of a Target Element and the Root</span></a>
        <li><a href="#update-intersection-observations-algo"><span class="secno">3.2.8</span> <span class="content"> Run the Update Intersection Observations Steps</span></a>
       </ol>
      <li><a href="#lifetime"><span class="secno">3.3</span> <span class="content"> IntersectionObserver Lifetime</span></a>
      <li>
       <a href="#external-spec-integrations"><span class="secno">3.4</span> <span class="content"> External Spec Integrations</span></a>
       <ol class="toc">
        <li><a href="#event-loop"><span class="secno">3.4.1</span> <span class="content"> HTML Processing Model: Event Loop</span></a>
        <li><a href="#pending-initial-observation"><span class="secno">3.4.2</span> <span class="content">Pending initial IntersectionObserver targets</span></a>
       </ol>
     </ol>
    <li><a href="#accessibility"><span class="secno">4</span> <span class="content">Accessibility Considerations</span></a>
    <li><a href="#privacy"><span class="secno">5</span> <span class="content">Privacy and Security</span></a>
    <li><a href="#internationalization"><span class="secno">6</span> <span class="content">Internationalization</span></a>
    <li><a href="#acknowledgements"><span class="secno">7</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p>The web’s traditional position calculation mechanisms
rely on explicit queries of DOM state
that are known to cause (expensive) style recalculation and layout
and, frequently, are a source of significant performance overhead
due to continuous polling for this information.</p>
   <p>A body of common practice has evolved that relies on these behaviors,
however, including (but not limited to):</p>
   <ul>
    <li data-md>
     <p>Building custom pre- and deferred-loading of DOM and data.</p>
    <li data-md>
     <p>Implementing data-bound high-performance scrolling lists
which load and render subsets of data sets.
These lists are a central mobile interaction idiom.</p>
    <li data-md>
     <p>Calculating element visibility.
In particular, <a href="http://www.iab.net/iablog/2014/03/viewability-has-arrived-what-you-need-to-know-to-see-through-this-sea-change.html"> ad networks now require reporting of ad "visibility" for monetizing impressions</a>. This has led to many sites abusing scroll handlers
(causing jank on scroll), <a href="http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html"> synchronous layout invoking readbacks</a> (causing unnecessary critical work in rAF loops),
and resorting to exotic plugin-based solutions for computing "true" element visibility (with all the associated overhead of the plugin architecture).</p>
   </ul>
   <p>These use-cases have several common properties:</p>
   <ol>
    <li data-md>
     <p>They can be represented as passive "queries"
about the state of individual elements
with respect to some other element
(or the global <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport" id="ref-for-viewport">viewport</a>).</p>
    <li data-md>
     <p>They do not impose hard latency requirements;
that is to say, the information can be delivered asynchronously
(e.g. from another thread)
without penalty.</p>
    <li data-md>
     <p>They are poorly supported by nearly all combinations of existing web platform features,
requiring extraordinary developer effort despite their widespread use.</p>
   </ol>
   <p>A notable non-goal is pixel-accurate information about what was actually displayed
(which can be quite difficult to obtain efficiently in certain browser architectures
in the face of filters, webgl, and other features).
In all of these scenarios the information is useful
even when delivered at a slight delay
and without perfect compositing-result data.</p>
   <p>The Intersection Observer API addresses the above issues
by giving developers a new method to asynchronously query the position of an element
with respect to other elements or the global <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport" id="ref-for-viewport①">viewport</a>.
The asynchronous delivery eliminates the need for costly DOM and style queries,
continuous polling,
and use of custom plugins.
By removing the need for these methods
it allows applications to significantly reduce their CPU, GPU and energy costs.</p>
   <div class="example" id="example-189ac2d4">
    <a class="self-link" href="#example-189ac2d4"></a> 
<pre class="highlight"><c- a>var</c-> observer <c- o>=</c-> <c- ow>new</c-> IntersectionObserver<c- p>(</c->changes <c- p>=></c-> <c- p>{</c->
  <c- k>for</c-> <c- p>(</c-><c- a>const</c-> change <c- k>of</c-> changes<c- p>)</c-> <c- p>{</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->time<c- p>);</c->               <c- c1>// Timestamp when the change occurred</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->rootBounds<c- p>);</c->         <c- c1>// Unclipped area of root</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->boundingClientRect<c- p>);</c-> <c- c1>// target.boundingClientRect()</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->intersectionRect<c- p>);</c->   <c- c1>// boundingClientRect, clipped by its containing block ancestors, and intersected with rootBounds</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->intersectionRatio<c- p>);</c->  <c- c1>// Ratio of intersectionRect area to boundingClientRect area</c->
    console<c- p>.</c->log<c- p>(</c->change<c- p>.</c->target<c- p>);</c->             <c- c1>// the Element target</c->
  <c- p>}</c->
<c- p>},</c-> <c- p>{});</c->

<c- c1>// Watch for intersection events on a specific target Element.</c->
observer<c- p>.</c->observe<c- p>(</c->target<c- p>);</c->

<c- c1>// Stop watching for intersection events on a specific target Element.</c->
observer<c- p>.</c->unobserve<c- p>(</c->target<c- p>);</c->

<c- c1>// Stop observing threshold events on all target elements.</c->
observer<c- p>.</c->disconnect<c- p>();</c->
</pre>
   </div>
   <h2 class="heading settled" data-level="2" id="intersection-observer-api"><span class="secno">2. </span><span class="content">Intersection Observer</span><a class="self-link" href="#intersection-observer-api"></a></h2>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="intersection-observer">Intersection Observer</dfn> API enables developers to understand the
visibility and position of <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport id="intersectionobserver-target">target</dfn> DOM
elements relative to an <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root">intersection root</a>.</p>
   <h3 class="heading settled" data-level="2.1" id="intersection-observer-callback"><span class="secno">2.1. </span><span class="content"> The IntersectionObserverCallback</span><a class="self-link" href="#intersection-observer-callback"></a></h3>
<pre class="idl highlight def"><c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-intersectionobservercallback"><code><c- g>IntersectionObserverCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> (<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry"><c- n>IntersectionObserverEntry</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverCallback" data-dfn-type="argument" data-export id="dom-intersectionobservercallback-entries"><code><c- g>entries</c-></code></dfn>, <a data-link-type="idl-name" href="#intersectionobserver" id="ref-for-intersectionobserver"><c- n>IntersectionObserver</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverCallback" data-dfn-type="argument" data-export id="dom-intersectionobservercallback-observer"><code><c- g>observer</c-></code></dfn>);
</pre>
   <p>This callback will be invoked when there are changes to <a data-link-type="dfn">target</a>’s
intersection with the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①">intersection root</a>, as per the <a data-link-type="dfn" href="#intersection-observer-processing-model" id="ref-for-intersection-observer-processing-model">processing model</a>.</p>
   <h3 class="heading settled" data-level="2.2" id="intersection-observer-interface"><span class="secno">2.2. </span><span class="content"> The IntersectionObserver interface</span><a class="self-link" href="#intersection-observer-interface"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①">IntersectionObserver</a></code> interface can be used to observe changes in the
intersection of an <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root②">intersection root</a> and one or more <a data-link-type="dfn">target</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>s.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport id="intersectionobserver-intersection-root">intersection root</dfn> for an <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②">IntersectionObserver</a></code> is the value of its <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root">root</a></code> attribute
if the attribute is non-<code>null</code>;
otherwise, it is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context">top-level browsing context</a>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2">document</a></code> node,
referred to as the <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport id="intersectionobserver-implicit-root">implicit root</dfn>.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③">IntersectionObserver</a></code> with a non-<code>null</code> <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root①">root</a></code> is referred to as an <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport id="intersectionobserver-explicit-root-observer">explicit root observer</dfn>,
and it can observe any <a data-link-type="dfn">target</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code> that is a descendant of the <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root②">root</a></code> in the <a data-link-type="dfn" href="https://drafts.csswg.org/css-display/#containing-block-chain" id="ref-for-containing-block-chain">containing block chain</a>.
An <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver④">IntersectionObserver</a></code> with a <code>null</code> <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root③">root</a></code> is referred to as an <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport id="intersectionobserver-implicit-root-observer">implicit root observer</dfn>.
Valid <a data-link-type="dfn">targets</a> for an <a data-link-type="dfn" href="#intersectionobserver-implicit-root-observer" id="ref-for-intersectionobserver-implicit-root-observer">implicit root observer</a> include
any <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①">top-level browsing context</a>,
as well as any <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code> in any <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context" id="ref-for-nested-browsing-context">nested browsing context</a> which is in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts" id="ref-for-list-of-the-descendant-browsing-contexts">list of the descendant browsing contexts</a> of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context②">top-level browsing context</a>.</p>
   <p>When dealing with <a data-link-type="dfn" href="#intersectionobserver-implicit-root-observer" id="ref-for-intersectionobserver-implicit-root-observer①">implicit root observers</a>, the API makes a distinction between
a <a data-link-type="dfn">target</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#origin" id="ref-for-origin">origin</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain" id="ref-for-same-origin-domain">same origin-domain</a> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin">top-level origin</a>, referred to as a <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport id="intersectionobserver-same-origin-domain-target">same-origin-domain target</dfn>;
as opposed to a <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport id="intersectionobserver-cross-origin-domain-target">cross-origin-domain target</dfn>.
Any <a data-link-type="dfn">target</a> of an <a data-link-type="dfn" href="#intersectionobserver-explicit-root-observer" id="ref-for-intersectionobserver-explicit-root-observer">explicit root observer</a> is also a <a data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target" id="ref-for-intersectionobserver-same-origin-domain-target">same-origin-domain target</a>,
since the <a data-link-type="dfn">target</a> must be in the same <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#document" id="ref-for-document">document</a> as the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root③">intersection root</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> In <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver">MutationObserver</a></code>, the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dictdef-mutationobserverinit" id="ref-for-dictdef-mutationobserverinit">MutationObserverInit</a></code> options are passed
to <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-mutationobserver-observe" id="ref-for-dom-mutationobserver-observe">observe()</a></code> while in <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑤">IntersectionObserver</a></code> they are
passed to the constructor. This is because for MutationObserver, each <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code> being observed could have a different set of attributes to filter for. For <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑥">IntersectionObserver</a></code>, developers may choose to use a single observer to
track multiple targets using the same set of options; or they may use a different
observer for each tracked target. <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin">rootMargin</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-threshold" id="ref-for-dom-intersectionobserverinit-threshold">threshold</a></code> values for each <a data-link-type="dfn">target</a> seems to introduce more complexity without solving additional
use-cases. Per-<code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observe" id="ref-for-dom-intersectionobserver-observe">observe()</a></code> options could be provided in the future if the need arises.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="intersectionobserver"><code><c- g>IntersectionObserver</c-></code></dfn> {
  <a class="idl-code" data-link-type="constructor" href="#dom-intersectionobserver-intersectionobserver" id="ref-for-dom-intersectionobserver-intersectionobserver"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#callbackdef-intersectionobservercallback" id="ref-for-callbackdef-intersectionobservercallback"><c- n>IntersectionObserverCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver/IntersectionObserver(callback, options), IntersectionObserver/constructor(callback, options), IntersectionObserver/IntersectionObserver(callback), IntersectionObserver/constructor(callback)" data-dfn-type="argument" data-export id="dom-intersectionobserver-intersectionobserver-callback-options-callback"><code><c- g>callback</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-intersectionobserverinit" id="ref-for-dictdef-intersectionobserverinit"><c- n>IntersectionObserverInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver/IntersectionObserver(callback, options), IntersectionObserver/constructor(callback, options), IntersectionObserver/IntersectionObserver(callback), IntersectionObserver/constructor(callback)" data-dfn-type="argument" data-export id="dom-intersectionobserver-intersectionobserver-callback-options-options"><code><c- g>options</c-></code></dfn> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> (<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element④"><c- n>Element</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①"><c- n>Document</c-></a>)? <a class="idl-code" data-link-type="attribute" data-readonly data-type="(Element or Document)?" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root④"><c- g>root</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin"><c- g>rootMargin</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FrozenArray<double>" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds"><c- g>thresholds</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-observe" id="ref-for-dom-intersectionobserver-observe①"><c- g>observe</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑤"><c- n>Element</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver/observe(target)" data-dfn-type="argument" data-export id="dom-intersectionobserver-observe-target-target"><code><c- g>target</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-unobserve" id="ref-for-dom-intersectionobserver-unobserve"><c- g>unobserve</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑥"><c- n>Element</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver/unobserve(target)" data-dfn-type="argument" data-export id="dom-intersectionobserver-unobserve-target-target"><code><c- g>target</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-disconnect" id="ref-for-dom-intersectionobserver-disconnect"><c- g>disconnect</c-></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry①"><c- n>IntersectionObserverEntry</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-takerecords" id="ref-for-dom-intersectionobserver-takerecords"><c- g>takeRecords</c-></a>();
};
</pre>
   <div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="constructor" data-export data-lt="IntersectionObserver(callback, options)|constructor(callback, options)|IntersectionObserver(callback)|constructor(callback)" id="dom-intersectionobserver-intersectionobserver"><code> new IntersectionObserver(callback, options)</code></dfn>
     <dd data-md>
      <p>Return the result of running the <a data-link-type="dfn" href="#initialize-a-new-intersectionobserver" id="ref-for-initialize-a-new-intersectionobserver">initialize a new IntersectionObserver</a> algorithm, providing <var>callback</var> and <var>options</var>.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="method" data-export id="dom-intersectionobserver-observe"><code>observe(target)</code></dfn>
     <dd data-md>
      <p>Run the <a data-link-type="dfn" href="#observe-a-target-element" id="ref-for-observe-a-target-element">observe a target Element</a> algorithm, providing <var>this</var> and <var>target</var>.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="method" data-export id="dom-intersectionobserver-unobserve"><code>unobserve(target)</code></dfn>
     <dd data-md>
      <p>Run the <a data-link-type="dfn" href="#unobserve-a-target-element" id="ref-for-unobserve-a-target-element">unobserve a target Element</a> algorithm, providing <var>this</var> and <var>target</var>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver①">MutationObserver</a></code> does not implement <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-unobserve" id="ref-for-dom-intersectionobserver-unobserve①">unobserve()</a></code>.
For <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑦">IntersectionObserver</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-unobserve" id="ref-for-dom-intersectionobserver-unobserve②">unobserve()</a></code> addresses the
lazy-loading use case. After <var>target</var> becomes visible,
it does not need to be tracked.
It would be more work to either <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-disconnect" id="ref-for-dom-intersectionobserver-disconnect①">disconnect()</a></code> all <var>target</var>s
and <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observe" id="ref-for-dom-intersectionobserver-observe②">observe()</a></code> the remaining ones,
or create a separate <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑧">IntersectionObserver</a></code> for each <var>target</var>.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="method" data-export id="dom-intersectionobserver-disconnect"><code>disconnect()</code></dfn>
     <dd data-md>
      <p>For each <var>target</var> in <var>this</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot">[[ObservationTargets]]</a></code> slot:</p>
      <ol>
       <li data-md>
        <p>Remove the <code class="idl"><a data-link-type="idl" href="#intersectionobserverregistration" id="ref-for-intersectionobserverregistration">IntersectionObserverRegistration</a></code> record
whose <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-observer" id="ref-for-dom-intersectionobserverregistration-observer">observer</a></code> property is equal to <var>this</var> from <var>target</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-element-registeredintersectionobservers-slot" id="ref-for-dom-element-registeredintersectionobservers-slot">[[RegisteredIntersectionObservers]]</a></code> slot.</p>
       <li data-md>
        <p>Remove <var>target</var> from <var>this</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot①">[[ObservationTargets]]</a></code> slot.</p>
      </ol>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="method" data-export id="dom-intersectionobserver-takerecords"><code>takeRecords()</code></dfn>
     <dd data-md>
      <ol>
       <li data-md>
        <p>Let <var>queue</var> be a copy of <var>this</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot">[[QueuedEntries]]</a></code> slot.</p>
       <li data-md>
        <p>Clear <var>this</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot①">[[QueuedEntries]]</a></code> slot.</p>
       <li data-md>
        <p>Return <var>queue</var>.</p>
      </ol>
    </dl>
   </div>
   <div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export id="dom-intersectionobserver-root"><code>root</code></dfn>, <span> of type <code class="idl-code">(Element or Document)</code>, readonly, nullable</span>
     <dd data-md>
      <p>The <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-root" id="ref-for-dom-intersectionobserverinit-root">root</a></code> provided to the <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver⑨">IntersectionObserver</a></code> constructor, or <code>null</code> if none was provided.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export id="dom-intersectionobserver-rootmargin"><code>rootMargin</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①">DOMString</a>, readonly</span>
     <dd data-md>
      <p>Offsets applied to the <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle" id="ref-for-intersectionobserver-root-intersection-rectangle">root intersection rectangle</a>,
effectively growing or shrinking the box that is used to calculate intersections. <b>These offsets are only applied when handling <a data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target" id="ref-for-intersectionobserver-same-origin-domain-target①">same-origin-domain targets</a>;
for <a data-link-type="dfn" href="#intersectionobserver-cross-origin-domain-target" id="ref-for-intersectionobserver-cross-origin-domain-target">cross-origin-domain targets</a> they are ignored.</b></p>
      <p>On getting, return the result of serializing the elements of <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin-slot" id="ref-for-dom-intersectionobserver-rootmargin-slot">[[rootMargin]]</a></code> space-separated, where pixel lengths serialize as the numeric value followed by "px",
and percentages serialize as the numeric value followed by "%".  Note that
this is not guaranteed to be identical to the <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin①">rootMargin</a></code> passed to the <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⓪">IntersectionObserver</a></code> constructor.  If no <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin②">rootMargin</a></code> was passed to the <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①①">IntersectionObserver</a></code> constructor, the value of this attribute is "0px 0px 0px 0px".</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export id="dom-intersectionobserver-thresholds"><code>thresholds</code></dfn>, <span> of type FrozenArray&lt;<a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①">double</a>>, readonly</span>
     <dd data-md>
      <p>A list of thresholds, sorted in increasing numeric order,
where each threshold is a ratio of intersection area to bounding box area
of an observed target.  Notifications for a target are generated when any
of the thresholds are crossed for that target.
If no <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-threshold" id="ref-for-dom-intersectionobserverinit-threshold①">threshold</a></code> was provided to the <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①②">IntersectionObserver</a></code> constructor, the value of this attribute will be [0].</p>
    </dl>
   </div>
   <p>The <dfn class="dfn-paneled" data-dfn-for="IntersectionObserver" data-dfn-type="dfn" data-noexport id="intersectionobserver-root-intersection-rectangle">root intersection rectangle</dfn> for an <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①③">IntersectionObserver</a></code> is the rectangle we’ll use to check against the targets.</p>
   <dl class="switch">
    <dt>If the <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①④">IntersectionObserver</a></code> is an <a data-link-type="dfn" href="#intersectionobserver-implicit-root-observer" id="ref-for-intersectionobserver-implicit-root-observer②">implicit root observer</a>, 
    <dd>it’s treated as if the root were the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context③">top-level browsing context</a>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①">document</a></code>, according to the following rule for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2②">document</a></code>. 
    <dt>If the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root④">intersection root</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2③">document</a></code>, 
    <dd>it’s the size of the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2④">document</a></code>'s <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport" id="ref-for-viewport②">viewport</a> (note that this processing step can only be reached if the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑤">document</a></code> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active">fully active</a>). 
    <dt>Otherwise, if the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root⑤">intersection root</a> has an overflow clip, 
    <dd>it’s the element’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-box/#content-area" id="ref-for-content-area">content area</a>. 
    <dt>Otherwise, 
    <dd>it’s the result of running the <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect">getBoundingClientRect()</a></code> algorithm on the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root⑥">intersection root</a>. 
   </dl>
   <p>When calculating the <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle" id="ref-for-intersectionobserver-root-intersection-rectangle①">root intersection rectangle</a> for
a <a data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target" id="ref-for-intersectionobserver-same-origin-domain-target②">same-origin-domain target</a>, the rectangle is then expanded
according to the offsets in the <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑤">IntersectionObserver</a></code>’s <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin-slot" id="ref-for-dom-intersectionobserver-rootmargin-slot①">[[rootMargin]]</a></code> slot
in a manner similar to CSS’s <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-box-4/#propdef-margin" id="ref-for-propdef-margin">margin</a> property,
with the four values indicating the amount the top, right, bottom, and left edges, respectively, are offset by,
with positive lengths indicating an outward offset.
Percentages are resolved relative to the width of the undilated rectangle.</p>
   <p class="note" role="note"><span class="marker">Note:</span> <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin①">rootMargin</a></code> only applies to the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root⑦">intersection root</a> itself.
If a <a data-link-type="dfn">target</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑦">Element</a></code> is clipped by an ancestor other than the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root⑧">intersection root</a>, that clipping is unaffected by <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin②">rootMargin</a></code>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle" id="ref-for-intersectionobserver-root-intersection-rectangle②">Root intersection rectangle</a> is not affected by <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#pinch-zoom" id="ref-for-pinch-zoom">pinch zoom</a> and will report the unadjusted <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport" id="ref-for-viewport③">viewport</a>, consistent with the
intent of pinch zooming (to act like a magnifying glass and NOT change layout.)</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-a-root-margin">parse a root margin</dfn> from an input string <var>marginString</var>,
returning either a list of 4 pixel lengths or percentages,
or failure:</p>
   <ol>
    <li data-md>
     <p><a data-link-type="dfn" href="https://drafts.csswg.org/css-syntax-3/#parse-a-list-of-component-values" id="ref-for-parse-a-list-of-component-values">Parse a list of component values</a> <var>marginString</var>,
storing the result as <var>tokens</var>.</p>
    <li data-md>
     <p>Remove all whitespace tokens from <var>tokens</var>.</p>
    <li data-md>
     <p>If the length of <var>tokens</var> is greater than 4,
return failure.</p>
    <li data-md>
     <p>If there are zero elements in <var>tokens</var>,
set <var>tokens</var> to ["0px"].</p>
    <li data-md>
     <p>Replace each <var>token</var> in <var>tokens</var>:</p>
     <ul>
      <li data-md>
       <p>If <var>token</var> is an <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-3/#absolute-length" id="ref-for-absolute-length">absolute length</a> <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-3/#dimension" id="ref-for-dimension">dimension</a> token,
replace it with a an equivalent pixel length.</p>
      <li data-md>
       <p>If <var>token</var> is a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#percentage-value" id="ref-for-percentage-value">&lt;percentage></a> token,
replace it with an equivalent percentage.</p>
      <li data-md>
       <p>Otherwise, return failure.</p>
     </ul>
    <li data-md>
     <p>If there is one element in <var>tokens</var>,
append three duplicates of that element to <var>tokens</var>.
Otherwise, if there are two elements are <var>tokens</var>,
append a duplicate of each element to <var>tokens</var>.
Otherwise, if there are three elements in <var>tokens</var>,
append a duplicate of the second element to <var>tokens</var>.</p>
    <li data-md>
     <p>Return <var>tokens</var>.</p>
   </ol>
   <h3 class="heading settled" data-level="2.3" id="intersection-observer-entry"><span class="secno">2.3. </span><span class="content"> The IntersectionObserverEntry interface</span><a class="self-link" href="#intersection-observer-entry"></a></h3>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="intersectionobserverentry"><code><c- g>IntersectionObserverEntry</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="constructor" data-export data-lt="IntersectionObserverEntry(intersectionObserverEntryInit)|constructor(intersectionObserverEntryInit)" id="dom-intersectionobserverentry-intersectionobserverentry"><code><c- g>constructor</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-intersectionobserverentryinit" id="ref-for-dictdef-intersectionobserverentryinit"><c- n>IntersectionObserverEntryInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry/IntersectionObserverEntry(intersectionObserverEntryInit), IntersectionObserverEntry/constructor(intersectionObserverEntryInit)" data-dfn-type="argument" data-export id="dom-intersectionobserverentry-intersectionobserverentry-intersectionobserverentryinit-intersectionobserverentryinit"><code><c- g>intersectionObserverEntryInit</c-></code></dfn>);
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="http://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMHighResTimeStamp" href="#dom-intersectionobserverentry-time" id="ref-for-dom-intersectionobserverentry-time"><c- g>time</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly"><c- n>DOMRectReadOnly</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly?" href="#dom-intersectionobserverentry-rootbounds" id="ref-for-dom-intersectionobserverentry-rootbounds"><c- g>rootBounds</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly①"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect"><c- g>boundingClientRect</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly②"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-intersectionobserverentry-intersectionrect" id="ref-for-dom-intersectionobserverentry-intersectionrect"><c- g>intersectionRect</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-intersectionobserverentry-isintersecting" id="ref-for-dom-intersectionobserverentry-isintersecting"><c- g>isIntersecting</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double②"><c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="double" href="#dom-intersectionobserverentry-intersectionratio" id="ref-for-dom-intersectionobserverentry-intersectionratio"><c- g>intersectionRatio</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑧"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target"><c- g>target</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-intersectionobserverentryinit"><code><c- g>IntersectionObserverEntryInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="http://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp①"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="DOMHighResTimeStamp" id="dom-intersectionobserverentryinit-time"><code><c- g>time</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit" id="ref-for-dictdef-domrectinit"><c- n>DOMRectInit</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="DOMRectInit?" id="dom-intersectionobserverentryinit-rootbounds"><code><c- g>rootBounds</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit" id="ref-for-dictdef-domrectinit①"><c- n>DOMRectInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="DOMRectInit" id="dom-intersectionobserverentryinit-boundingclientrect"><code><c- g>boundingClientRect</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit" id="ref-for-dictdef-domrectinit②"><c- n>DOMRectInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="DOMRectInit" id="dom-intersectionobserverentryinit-intersectionrect"><code><c- g>intersectionRect</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-intersectionobserverentryinit-isintersecting"><code><c- g>isIntersecting</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double③"><c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="double" id="dom-intersectionobserverentryinit-intersectionratio"><code><c- g>intersectionRatio</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑨"><c- n>Element</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntryInit" data-dfn-type="dict-member" data-export data-type="Element" id="dom-intersectionobserverentryinit-target"><code><c- g>target</c-></code></dfn>;
};
</pre>
   <div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="attribute" data-export id="dom-intersectionobserverentry-boundingclientrect"><code>boundingClientRect</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly③">DOMRectReadOnly</a>, readonly</span>
     <dd data-md>
      <p>A <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly④">DOMRectReadOnly</a></code> obtained by running the <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect①">getBoundingClientRect()</a></code> algorithm
on the <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target①">target</a></code>.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="attribute" data-export id="dom-intersectionobserverentry-intersectionrect"><code>intersectionRect</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly⑤">DOMRectReadOnly</a>, readonly</span>
     <dd data-md>
      <p><code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect①">boundingClientRect</a></code>, intersected by
each of <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target②">target</a></code>'s ancestors' clip
rects (up to but not including <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root⑤">root</a></code>),
intersected with the <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle" id="ref-for-intersectionobserver-root-intersection-rectangle③">root intersection rectangle</a>.
This value represents the portion of <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target③">target</a></code> actually visible
within the <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle" id="ref-for-intersectionobserver-root-intersection-rectangle④">root intersection rectangle</a>.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="attribute" data-export id="dom-intersectionobserverentry-isintersecting"><code>isIntersecting</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②">boolean</a>, readonly</span>
     <dd data-md>
      <p>True if the <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-target" id="ref-for-dom-intersectionobserverentry-target④">target</a></code> intersects with the <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root⑥">root</a></code>; false otherwise.  This flag makes it
possible to distinguish between an <code class="idl"><a data-link-type="idl" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry②">IntersectionObserverEntry</a></code> signalling
the transition from intersecting to not-intersecting; and an <code class="idl"><a data-link-type="idl" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry③">IntersectionObserverEntry</a></code> signalling a transition from not-intersecting
to intersecting with a zero-area intersection rect (as will happen with
edge-adjacent intersections, or when the <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect②">boundingClientRect</a></code> has zero area).</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="attribute" data-export id="dom-intersectionobserverentry-intersectionratio"><code>intersectionRatio</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double④">double</a>, readonly</span>
     <dd data-md>
      <p>If the <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect③">boundingClientRect</a></code> has non-zero area,
this will be the ratio of <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-intersectionrect" id="ref-for-dom-intersectionobserverentry-intersectionrect①">intersectionRect</a></code> area to <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect④">boundingClientRect</a></code> area.  Otherwise, this will be
1 if the <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-isintersecting" id="ref-for-dom-intersectionobserverentry-isintersecting①">isIntersecting</a></code> is true, and 0 if not.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="attribute" data-export id="dom-intersectionobserverentry-rootbounds"><code>rootBounds</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly⑥">DOMRectReadOnly</a>, readonly, nullable</span>
     <dd data-md>
      <p>For a <a data-link-type="dfn" href="#intersectionobserver-same-origin-domain-target" id="ref-for-intersectionobserver-same-origin-domain-target③">same-origin-domain target</a>, this will be the <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle" id="ref-for-intersectionobserver-root-intersection-rectangle⑤">root intersection rectangle</a>.
Otherwise, this will be <code>null</code>.
Note that if the target is in a different <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context">browsing context</a> than the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root⑨">intersection root</a>,
this will be in a different coordinate system
than <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-boundingclientrect" id="ref-for-dom-intersectionobserverentry-boundingclientrect⑤">boundingClientRect</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-intersectionrect" id="ref-for-dom-intersectionobserverentry-intersectionrect②">intersectionRect</a></code>.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="attribute" data-export id="dom-intersectionobserverentry-target"><code>target</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⓪">Element</a>, readonly</span>
     <dd data-md>
      <p>The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①①">Element</a></code> whose intersection with the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①⓪">intersection root</a> changed.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverEntry" data-dfn-type="attribute" data-export id="dom-intersectionobserverentry-time"><code>time</code></dfn>, <span> of type <a data-link-type="idl-name" href="http://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp②">DOMHighResTimeStamp</a>, readonly</span>
     <dd data-md>
      <p>The attribute must return a <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp③">DOMHighResTimeStamp</a></code> that corresponds to the time the intersection was recorded, relative to the <a data-link-type="dfn" href="http://www.w3.org/TR/hr-time/#time-origin" id="ref-for-time-origin">time origin</a> of the global object associated with the IntersectionObserver instance
that generated the notification.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="2.4" id="intersection-observer-init"><span class="secno">2.4. </span><span class="content"> The IntersectionObserverInit dictionary</span><a class="self-link" href="#intersection-observer-init"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-intersectionobserverinit"><code><c- g>IntersectionObserverInit</c-></code></dfn> {
  (<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①②"><c- n>Element</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②"><c- n>Document</c-></a>)?  <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="(Element or Document)?" href="#dom-intersectionobserverinit-root" id="ref-for-dom-intersectionobserverinit-root①"><c- g>root</c-></a> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;0px&quot;" data-link-type="dict-member" data-type="DOMString" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin③"><c- g>rootMargin</c-></a> = "0px";
  (<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑤"><c- b>double</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double⑥"><c- b>double</c-></a>>) <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="(double or sequence<double>)" href="#dom-intersectionobserverinit-threshold" id="ref-for-dom-intersectionobserverinit-threshold②"><c- g>threshold</c-></a> = 0;
};
</pre>
   <div>
    <dl>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverInit" data-dfn-type="dict-member" data-export id="dom-intersectionobserverinit-root"><code>root</code></dfn>, <span> of type <code class="idl-code">(Element or Document)</code>, nullable, defaulting to <code>null</code></span>
     <dd data-md>
      <p>The <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑥">root</a></code> to use for intersection.
If not provided, use the <a data-link-type="dfn" href="#intersectionobserver-implicit-root" id="ref-for-intersectionobserver-implicit-root">implicit root</a>.</p>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverInit" data-dfn-type="dict-member" data-export id="dom-intersectionobserverinit-rootmargin"><code>rootMargin</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③">DOMString</a>, defaulting to <code>"0px"</code></span>
     <dd data-md>
      <p>Similar to the CSS <a class="property css" data-link-type="property" href="https://drafts.csswg.org/css-box-4/#propdef-margin" id="ref-for-propdef-margin①">margin</a> property,
this is a string of 1-4 components,
each either an <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-3/#absolute-length" id="ref-for-absolute-length①">absolute length</a> or a percentage.</p>
<pre class="example highlight" id="example-105651ff"><a class="self-link" href="#example-105651ff"></a><c- u>"5px"</c->                <c- c1>// all margins set to 5px</c->
<c- u>"5px 10px"</c->           <c- c1>// top &amp; bottom = 5px, right &amp; left = 10px</c->
<c- u>"-10px 5px 8px"</c->      <c- c1>// top = -10px, right &amp; left = 5px, bottom = 8px</c->
<c- u>"-10px -5px 5px 8px"</c-> <c- c1>// top = -10px, right = -5px, bottom = 5px, left = 8px</c->
</pre>
     <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverInit" data-dfn-type="dict-member" data-export id="dom-intersectionobserverinit-threshold"><code>threshold</code></dfn>, <span> of type <code class="idl-code">(double or sequence&lt;double>)</code>, defaulting to <code>0</code></span>
     <dd data-md>
      <p>List of threshold(s) at which to trigger callback.
callback will be invoked when intersectionRect’s area changes from
greater than or equal to any threshold to less than that threshold,
and vice versa.</p>
      <p>Threshold values must be in the range of [0, 1.0] and represent a
percentage of the area of the rectangle produced
by running the <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect②">getBoundingClientRect()</a></code> algorithm
on the <a data-link-type="dfn">target</a>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> 0.0 is effectively "any non-zero number of pixels".</p>
    </dl>
   </div>
   <h2 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="3" data-lt="Processing Model" data-noexport id="intersection-observer-processing-model"><span class="secno">3. </span><span class="content"> Processing Model</span><a class="self-link" href="#intersection-observer-processing-model" id="ref-for-intersection-observer-processing-model①"></a></h2>
   <p>This section outlines the steps the user agent must take when implementing
the <a data-link-type="dfn" href="#intersection-observer" id="ref-for-intersection-observer">Intersection Observer</a> API.</p>
   <h3 class="heading settled" data-level="3.1" id="defines"><span class="secno">3.1. </span><span class="content"> Internal Slot Definitions</span><a class="self-link" href="#defines"></a></h3>
   <h4 class="heading settled" data-level="3.1.1" id="document-defines"><span class="secno">3.1.1. </span><span class="content"> Document</span><a class="self-link" href="#document-defines"></a></h4>
   <p>Each <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑥">document</a></code> has an <dfn class="dfn-paneled" data-dfn-for="Document" data-dfn-type="dfn" data-noexport id="document-intersectionobservertaskqueued">IntersectionObserverTaskQueued</dfn> flag
which is initialized to false.</p>
   <h4 class="heading settled" data-level="3.1.2" id="element-private-slots"><span class="secno">3.1.2. </span><span class="content"> Element</span><a class="self-link" href="#element-private-slots"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①③">Element</a></code> objects have an internal <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="attribute" data-export id="dom-element-registeredintersectionobservers-slot"><code>[[RegisteredIntersectionObservers]]</code></dfn> slot,
which is initialized to an empty list.
This list holds <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="intersectionobserverregistration"><code>IntersectionObserverRegistration</code></dfn> records,
which have an <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverRegistration" data-dfn-type="attribute" data-export id="dom-intersectionobserverregistration-observer"><code>observer</code></dfn> property
holding an <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑦">IntersectionObserver</a></code>, a <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverRegistration" data-dfn-type="attribute" data-export id="dom-intersectionobserverregistration-previousthresholdindex"><code>previousThresholdIndex</code></dfn> property
holding a number between -1 and the length of the observer’s <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds①">thresholds</a></code> property (inclusive), and
a <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserverRegistration" data-dfn-type="attribute" data-export id="dom-intersectionobserverregistration-previousisintersecting"><code>previousIsIntersecting</code></dfn> property holding a boolean.</p>
   <h4 class="heading settled" data-level="3.1.3" id="intersection-observer-private-slots"><span class="secno">3.1.3. </span><span class="content"> IntersectionObserver</span><a class="self-link" href="#intersection-observer-private-slots"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑧">IntersectionObserver</a></code> objects have internal <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export id="dom-intersectionobserver-queuedentries-slot"><code>[[QueuedEntries]]</code></dfn> and <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export id="dom-intersectionobserver-observationtargets-slot"><code>[[ObservationTargets]]</code></dfn> slots,
which are initialized to empty lists and an internal <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export id="dom-intersectionobserver-callback-slot"><code>[[callback]]</code></dfn> slot
which is initialized by <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-intersectionobserver" id="ref-for-dom-intersectionobserver-intersectionobserver①">IntersectionObserver(callback, options)</a></code>.
They also have an internal <dfn class="dfn-paneled idl-code" data-dfn-for="IntersectionObserver" data-dfn-type="attribute" data-export id="dom-intersectionobserver-rootmargin-slot"><code>[[rootMargin]]</code></dfn> slot
which is a list of four pixel lengths or percentages.</p>
   <h3 class="heading settled" data-level="3.2" id="algorithms"><span class="secno">3.2. </span><span class="content"> Algorithms</span><a class="self-link" href="#algorithms"></a></h3>
   <h4 class="heading settled" data-level="3.2.1" id="initialize-new-intersection-observer"><span class="secno">3.2.1. </span><span class="content">Initialize a new IntersectionObserver</span><a class="self-link" href="#initialize-new-intersection-observer"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="initialize-a-new-intersectionobserver">initialize a new IntersectionObserver</dfn>, given an <code class="idl"><a data-link-type="idl" href="#callbackdef-intersectionobservercallback" id="ref-for-callbackdef-intersectionobservercallback①">IntersectionObserverCallback</a></code> <var>callback</var> and an <code class="idl"><a data-link-type="idl" href="#dictdef-intersectionobserverinit" id="ref-for-dictdef-intersectionobserverinit①">IntersectionObserverInit</a></code> dictionary <var>options</var>, run these steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>this</var> be a new <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver①⑨">IntersectionObserver</a></code> object</p>
    <li data-md>
     <p>Set <var>this</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-callback-slot" id="ref-for-dom-intersectionobserver-callback-slot">[[callback]]</a></code> slot to <var>callback</var>.</p>
    <li data-md>
     <p>Attempt to <a data-link-type="dfn" href="#parse-a-root-margin" id="ref-for-parse-a-root-margin">parse a root margin</a> from <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-rootmargin" id="ref-for-dom-intersectionobserverinit-rootmargin④">rootMargin</a></code>.
If a list is returned,
set <var>this</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin-slot" id="ref-for-dom-intersectionobserver-rootmargin-slot②">[[rootMargin]]</a></code> slot to that.
Otherwise, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-simple-exception" id="ref-for-dfn-simple-exception">SyntaxError</a></code> exception.</p>
    <li data-md>
     <p>Let <var>thresholds</var> be a list equal to <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverinit-threshold" id="ref-for-dom-intersectionobserverinit-threshold③">threshold</a></code>.</p>
    <li data-md>
     <p>If any value in <var>thresholds</var> is less than 0.0 or greater than
1.0, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw①">throw</a> a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-simple-exception" id="ref-for-dfn-simple-exception①">RangeError</a></code> exception.</p>
    <li data-md>
     <p>Sort <var>thresholds</var> in ascending order.</p>
    <li data-md>
     <p>If <var>thresholds</var> is empty, append <code>0</code> to <var>thresholds</var>.</p>
    <li data-md>
     <p>The <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds②">thresholds</a></code> attribute getter will return
this sorted <var>thresholds</var> list.</p>
    <li data-md>
     <p>Return <var>this</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="3.2.2" id="observe-target-element"><span class="secno">3.2.2. </span><span class="content">Observe a target Element</span><a class="self-link" href="#observe-target-element"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="observe-a-target-element">observe a target Element</dfn>, given an <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⓪">IntersectionObserver</a></code> <var>observer</var> and an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①④">Element</a></code> <var>target</var>, follow these steps:</p>
   <ol>
    <li data-md>
     <p>If <var>target</var> is in <var>observer</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot②">[[ObservationTargets]]</a></code> slot,
return.</p>
    <li data-md>
     <p>Let <var>intersectionObserverRegistration</var> be
an <code class="idl"><a data-link-type="idl" href="#intersectionobserverregistration" id="ref-for-intersectionobserverregistration①">IntersectionObserverRegistration</a></code> record
with an <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-observer" id="ref-for-dom-intersectionobserverregistration-observer①">observer</a></code> property set to <var>observer</var>,
a <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousthresholdindex" id="ref-for-dom-intersectionobserverregistration-previousthresholdindex">previousThresholdIndex</a></code> property set to <code>-1</code>,
and a <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousisintersecting" id="ref-for-dom-intersectionobserverregistration-previousisintersecting">previousIsIntersecting</a></code> property set to <code>false</code>.</p>
    <li data-md>
     <p>Append <var>intersectionObserverRegistration</var> to <var>target</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-element-registeredintersectionobservers-slot" id="ref-for-dom-element-registeredintersectionobservers-slot①">[[RegisteredIntersectionObservers]]</a></code> slot.</p>
    <li data-md>
     <p>Add <var>target</var> to <var>observer</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot③">[[ObservationTargets]]</a></code> slot.</p>
   </ol>
   <h4 class="heading settled" data-level="3.2.3" id="unobserve-target-element"><span class="secno">3.2.3. </span><span class="content">Unobserve a target Element</span><a class="self-link" href="#unobserve-target-element"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unobserve-a-target-element">unobserve a target Element</dfn>, given an <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②①">IntersectionObserver</a></code> <var>observer</var> and an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑤">Element</a></code> <var>target</var>, follow these steps:</p>
   <ol>
    <li data-md>
     <p>Remove the <code class="idl"><a data-link-type="idl" href="#intersectionobserverregistration" id="ref-for-intersectionobserverregistration②">IntersectionObserverRegistration</a></code> record
whose <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-observer" id="ref-for-dom-intersectionobserverregistration-observer②">observer</a></code> property is equal to <var>this</var> from <var>target</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-element-registeredintersectionobservers-slot" id="ref-for-dom-element-registeredintersectionobservers-slot②">[[RegisteredIntersectionObservers]]</a></code> slot, if present.</p>
    <li data-md>
     <p>Remove <var>target</var> from <var>this</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot④">[[ObservationTargets]]</a></code> slot, if present</p>
   </ol>
   <h4 class="heading settled" data-level="3.2.4" id="queue-intersection-observer-task"><span class="secno">3.2.4. </span><span class="content"> Queue an Intersection Observer Task</span><a class="self-link" href="#queue-intersection-observer-task"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="intersectionobserver-task-source">IntersectionObserver task source</dfn> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source" id="ref-for-task-source">task source</a> used for
scheduling tasks to <a href="#notify-intersection-observers-algo">§ 3.2.5 Notify Intersection Observers</a>.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="queue-an-intersection-observer-task">queue an intersection observer task</dfn> for a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑦">document</a></code> <var>document</var>,
run these steps:</p>
   <ol>
    <li data-md>
     <p>If <var>document</var>’s <a data-link-type="dfn" href="#document-intersectionobservertaskqueued" id="ref-for-document-intersectionobservertaskqueued">IntersectionObserverTaskQueued</a> flag is set to true,
return.</p>
    <li data-md>
     <p>Set <var>document</var>’s <a data-link-type="dfn" href="#document-intersectionobservertaskqueued" id="ref-for-document-intersectionobservertaskqueued①">IntersectionObserverTaskQueued</a> flag to true.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">Queue a task</a> on the <a data-link-type="dfn" href="#intersectionobserver-task-source" id="ref-for-intersectionobserver-task-source">IntersectionObserver task source</a> associated with the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑧">document</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" id="ref-for-event-loop">event loop</a> to <a data-link-type="dfn" href="#notify-intersection-observers" id="ref-for-notify-intersection-observers">notify intersection observers</a>.</p>
   </ol>
   <h4 class="heading settled" data-level="3.2.5" id="notify-intersection-observers-algo"><span class="secno">3.2.5. </span><span class="content"> Notify Intersection Observers</span><a class="self-link" href="#notify-intersection-observers-algo"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="notify-intersection-observers">notify intersection observers</dfn> for a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2⑨">document</a></code> <var>document</var>,
run these steps:</p>
   <ol>
    <li data-md>
     <p>Set <var>document</var>’s <a data-link-type="dfn" href="#document-intersectionobservertaskqueued" id="ref-for-document-intersectionobservertaskqueued②">IntersectionObserverTaskQueued</a> flag to false.</p>
    <li data-md>
     <p>Let <var>notify list</var> be a list of all <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②②">IntersectionObserver</a></code>s
whose <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root⑦">root</a></code> is in the DOM tree of <var>document</var>.</p>
    <li data-md>
     <p>For each <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②③">IntersectionObserver</a></code> object <var>observer</var> in <var>notify list</var>,
run these steps:</p>
     <ol>
      <li data-md>
       <p>If <var>observer</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot②">[[QueuedEntries]]</a></code> slot is empty,
continue.</p>
      <li data-md>
       <p>Let <var>queue</var> be a copy of <var>observer</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot③">[[QueuedEntries]]</a></code> slot.</p>
      <li data-md>
       <p>Clear <var>observer</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot④">[[QueuedEntries]]</a></code> slot.</p>
      <li data-md>
       <p>Let <var>callback</var> be the value of <var>observer</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-callback-slot" id="ref-for-dom-intersectionobserver-callback-slot①">[[callback]]</a></code> slot.</p>
      <li data-md>
       <p>Invoke <var>callback</var> with <var>queue</var> as the first argument, <var>observer</var> as the second argument,
and <var>observer</var> as the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#dfn-callback-this-value" id="ref-for-dfn-callback-this-value">callback this value</a>.
If this throws an exception, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception" id="ref-for-report-the-exception">report the exception</a>.</p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="3.2.6" id="queue-intersection-observer-entry-algo"><span class="secno">3.2.6. </span><span class="content"> Queue an IntersectionObserverEntry</span><a class="self-link" href="#queue-intersection-observer-entry-algo"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="queue-an-intersectionobserverentry">queue an IntersectionObserverEntry</dfn> for an <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②④">IntersectionObserver</a></code> <var>observer</var>, given a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⓪">document</a></code> <var>document</var>; <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp④">DOMHighResTimeStamp</a></code> <var>time</var>; <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrect" id="ref-for-domrect">DOMRect</a></code>s <var>rootBounds</var>, <var>boundingClientRect</var>, <var>intersectionRect</var>, and <var>isIntersecting</var> flag;
and an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑥">Element</a></code> <var>target</var>;
run these steps:</p>
   <ol>
    <li data-md>
     <p>Construct an <code class="idl"><a data-link-type="idl" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry④">IntersectionObserverEntry</a></code>, passing in <var>time</var>, <var>rootBounds</var>, <var>boundingClientRect</var>, <var>intersectionRect</var>, <var>isIntersecting</var>, and <var>target</var>.</p>
    <li data-md>
     <p>Append it to <var>observer</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-queuedentries-slot" id="ref-for-dom-intersectionobserver-queuedentries-slot⑤">[[QueuedEntries]]</a></code> slot.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#queue-an-intersection-observer-task" id="ref-for-queue-an-intersection-observer-task">Queue an intersection observer task</a> for <var>document</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="3.2.7" id="calculate-intersection-rect-algo"><span class="secno">3.2.7. </span><span class="content"> Compute the Intersection of a Target Element and the Root</span><a class="self-link" href="#calculate-intersection-rect-algo"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-the-intersection">compute the intersection</dfn> between a <a data-link-type="dfn">target</a> and the observer’s <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①①">intersection root</a>,
run these steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>intersectionRect</var> be the result of running the <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect③">getBoundingClientRect()</a></code> algorithm on the <a data-link-type="dfn">target</a>.</p>
    <li data-md>
     <p>Let <var>container</var> be the <a data-link-type="dfn" href="https://drafts.csswg.org/css-box/#containing-block" id="ref-for-containing-block">containing block</a> of the <a data-link-type="dfn">target</a>.</p>
    <li data-md>
     <p>While <var>container</var> is not the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①②">intersection root</a>:</p>
     <ol>
      <li data-md>
       <p>If <var>container</var> is the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①①">document</a></code> of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context" id="ref-for-nested-browsing-context①">nested browsing context</a>,
update <var>intersectionRect</var> by clipping to the <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport" id="ref-for-viewport④">viewport</a> of the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①②">document</a></code>, and update <var>container</var> to be
the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container" id="ref-for-browsing-context-container">browsing context container</a> of <var>container</var>.</p>
      <li data-md>
       <p>Map <var>intersectionRect</var> to the coordinate space of <var>container</var>.</p>
      <li data-md>
       <p>If <var>container</var> has overflow clipping or a css <a data-link-type="dfn" href="http://www.w3.org/TR/css-masking-1/#propdef-clip-path" id="ref-for-propdef-clip-path">clip-path</a> property,
update <var>intersectionRect</var> by applying <var>container</var>’s clip.</p>
      <li data-md>
       <p>If <var>container</var> is the root element of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①">browsing context</a>,
update <var>container</var> to be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context②">browsing context</a>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①③">document</a></code>;
otherwise, update <var>container</var> to be the <a data-link-type="dfn" href="https://drafts.csswg.org/css-box/#containing-block" id="ref-for-containing-block①">containing block</a> of <var>container</var>.</p>
     </ol>
    <li data-md>
     <p>Map <var>intersectionRect</var> to the coordinate space of the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①③">intersection root</a>.</p>
    <li data-md>
     <p>Update <var>intersectionRect</var> by intersecting it with the <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle" id="ref-for-intersectionobserver-root-intersection-rectangle⑥">root intersection rectangle</a>.</p>
    <li data-md>
     <p>Map <var>intersectionRect</var> to the coordinate space of the <a data-link-type="dfn" href="https://drafts.csswg.org/css2/visuren.html#viewport" id="ref-for-viewport⑤">viewport</a> of the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①④">document</a></code> containing the <a data-link-type="dfn">target</a>.</p>
    <li data-md>
     <p>Return <var>intersectionRect</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="3.2.8" id="update-intersection-observations-algo"><span class="secno">3.2.8. </span><span class="content"> Run the Update Intersection Observations Steps</span><a class="self-link" href="#update-intersection-observations-algo"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="run-the-update-intersection-observations-steps">run the update intersection observations steps</dfn> for a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⑤">document</a></code> <var>document</var> given a timestamp <var>time</var>, run these steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>observer list</var> be a list of all <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑤">IntersectionObserver</a></code>s
whose <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-root" id="ref-for-dom-intersectionobserver-root⑧">root</a></code> is in the DOM tree of <var>document</var>.
For the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context④">top-level browsing context</a>, this includes <a data-link-type="dfn" href="#intersectionobserver-implicit-root-observer" id="ref-for-intersectionobserver-implicit-root-observer③">implicit root observers</a>.</p>
    <li data-md>
     <p>For each <var>observer</var> in <var>observer list</var>:</p>
     <ol>
      <li data-md>
       <p>Let <var>rootBounds</var> be <var>observer</var>’s <a data-link-type="dfn" href="#intersectionobserver-root-intersection-rectangle" id="ref-for-intersectionobserver-root-intersection-rectangle⑦">root intersection rectangle</a>.</p>
      <li data-md>
       <p>For each <var>target</var> in <var>observer</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot⑤">[[ObservationTargets]]</a></code> slot, processed in the same order that <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observe" id="ref-for-dom-intersectionobserver-observe③">observe()</a></code> was called on each <var>target</var>:</p>
       <ol>
        <li data-md>
         <p>Let:</p>
         <ul>
          <li data-md>
           <p><var>thresholdIndex</var> be 0.</p>
          <li data-md>
           <p><var>isIntersecting</var> be <var>false</var>.</p>
          <li data-md>
           <p><var>targetRect</var> be a <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly⑦">DOMRectReadOnly</a></code> with <var>x</var>, <var>y</var>, <var>width</var>, and <var>height</var> set to 0.</p>
          <li data-md>
           <p><var>intersectionRect</var> be a <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly⑧">DOMRectReadOnly</a></code> with <var>x</var>, <var>y</var>, <var>width</var>, and <var>height</var> set to 0.</p>
         </ul>
        <li data-md>
         <p>If the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①④">intersection root</a> is not the <a data-link-type="dfn" href="#intersectionobserver-implicit-root" id="ref-for-intersectionobserver-implicit-root①">implicit root</a>,
and <var>target</var> is not in the same <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⑥">document</a></code> as the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①⑤">intersection root</a>,
skip to step 11.</p>
        <li data-md>
         <p>If the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①⑥">intersection root</a> is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑦">Element</a></code>,
and <var>target</var> is not a descendant of the <a data-link-type="dfn" href="#intersectionobserver-intersection-root" id="ref-for-intersectionobserver-intersection-root①⑦">intersection root</a> in the <a data-link-type="dfn" href="https://drafts.csswg.org/css-display/#containing-block-chain" id="ref-for-containing-block-chain①">containing block chain</a>, skip to step 11.</p>
        <li data-md>
         <p>Set <var>targetRect</var> to the <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly⑨">DOMRectReadOnly</a></code> obtained
by running the <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect④">getBoundingClientRect()</a></code> algorithm on <var>target</var>.</p>
        <li data-md>
         <p>Set <var>intersectionRect</var> to the result of running the <a data-link-type="dfn" href="#compute-the-intersection" id="ref-for-compute-the-intersection">compute the intersection</a> algorithm on <var>target</var>.</p>
        <li data-md>
         <p>Let <var>targetArea</var> be <var>targetRect</var>’s area.</p>
        <li data-md>
         <p>Let <var>intersectionArea</var> be <var>intersectionRect</var>’s area.</p>
        <li data-md>
         <p>Set <var>isIntersecting</var> to true if <var>targetRect</var> and <var>rootBounds</var> intersect or are edge-adjacent,
even if the intersection has zero area (because <var>rootBounds</var> or <var>targetRect</var> have
zero area).</p>
        <li data-md>
         <p>If <var>targetArea</var> is non-zero, let <var>intersectionRatio</var> be <var>intersectionArea</var> divided by <var>targetArea</var>.<br> Otherwise, let <var>intersectionRatio</var> be <code>1</code> if <var>isIntersecting</var> is true, or <code>0</code> if <var>isIntersecting</var> is false.</p>
        <li data-md>
         <p>Set <var>thresholdIndex</var> to the index of the first entry in <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds③">thresholds</a></code> whose value is greater than <var>intersectionRatio</var>, or the length of <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds④">thresholds</a></code> if <var>intersectionRatio</var> is greater than or equal to the last entry in <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-thresholds" id="ref-for-dom-intersectionobserver-thresholds⑤">thresholds</a></code>.</p>
        <li data-md>
         <p>Let <var>intersectionObserverRegistration</var> be the <code class="idl"><a data-link-type="idl" href="#intersectionobserverregistration" id="ref-for-intersectionobserverregistration③">IntersectionObserverRegistration</a></code> record
in <var>target</var>’s internal <code class="idl"><a data-link-type="idl" href="#dom-element-registeredintersectionobservers-slot" id="ref-for-dom-element-registeredintersectionobservers-slot③">[[RegisteredIntersectionObservers]]</a></code> slot
whose <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-observer" id="ref-for-dom-intersectionobserverregistration-observer③">observer</a></code> property is equal to <var>observer</var>.</p>
        <li data-md>
         <p>Let <var>previousThresholdIndex</var> be the <var>intersectionObserverRegistration</var>’s <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousthresholdindex" id="ref-for-dom-intersectionobserverregistration-previousthresholdindex①">previousThresholdIndex</a></code> property.</p>
        <li data-md>
         <p>Let <var>previousIsIntersecting</var> be the <var>intersectionObserverRegistration</var>’s <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousisintersecting" id="ref-for-dom-intersectionobserverregistration-previousisintersecting①">previousIsIntersecting</a></code> property.</p>
        <li data-md>
         <p>If <var>thresholdIndex</var> does not equal <var>previousThresholdIndex</var> or if <var>isIntersecting</var> does not equal <var>previousIsIntersecting</var>, <a data-link-type="dfn" href="#queue-an-intersectionobserverentry" id="ref-for-queue-an-intersectionobserverentry">queue an IntersectionObserverEntry</a>,
passing in <var>observer</var>, <var>time</var>, <var>rootBounds</var>, <var>targetRect</var>, <var>intersectionRect</var>, <var>isIntersecting</var>, and <var>target</var>.</p>
        <li data-md>
         <p>Assign <var>thresholdIndex</var> to <var>intersectionObserverRegistration</var>’s <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousthresholdindex" id="ref-for-dom-intersectionobserverregistration-previousthresholdindex②">previousThresholdIndex</a></code> property.</p>
        <li data-md>
         <p>Assign <var>isIntersecting</var> to <var>intersectionObserverRegistration</var>’s <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverregistration-previousisintersecting" id="ref-for-dom-intersectionobserverregistration-previousisintersecting②">previousIsIntersecting</a></code> property.</p>
       </ol>
     </ol>
   </ol>
   <h3 class="heading settled" data-level="3.3" id="lifetime"><span class="secno">3.3. </span><span class="content"> IntersectionObserver Lifetime</span><a class="self-link" href="#lifetime"></a></h3>
   <p>An <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑥">IntersectionObserver</a></code> will remain alive until both of these conditions hold:</p>
   <ul>
    <li>There are no scripting references to the observer.
    <li>The observer is not observing any targets. 
   </ul>
   <p>An <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑦">IntersectionObserver</a></code> will continue observing a target until either the observer’s <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-unobserve" id="ref-for-dom-intersectionobserver-unobserve③">unobserve()</a></code> method is called with the target as argument; or the observer’s <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-disconnect" id="ref-for-dom-intersectionobserver-disconnect②">disconnect()</a></code> is called.</p>
   <h3 class="heading settled" data-level="3.4" id="external-spec-integrations"><span class="secno">3.4. </span><span class="content"> External Spec Integrations</span><a class="self-link" href="#external-spec-integrations"></a></h3>
   <h4 class="heading settled" data-level="3.4.1" id="event-loop"><span class="secno">3.4.1. </span><span class="content"> HTML Processing Model: Event Loop</span><a class="self-link" href="#event-loop"></a></h4>
   <p>An <a data-link-type="dfn" href="#intersection-observer" id="ref-for-intersection-observer①">Intersection Observer</a> processing step should take place
during the "<i>Update the rendering</i>" steps,
after step 12, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#run-the-animation-frame-callbacks" id="ref-for-run-the-animation-frame-callbacks">run the animation frame callbacks</a>,
in the in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model" id="ref-for-event-loop-processing-model">HTML Processing Model</a>.</p>
   <p>This step is:</p>
   <ol start="13">
    <li>For each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①">fully active</a> <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⑦">document</a></code> in <var>docs</var>, <a data-link-type="dfn" href="#run-the-update-intersection-observations-steps" id="ref-for-run-the-update-intersection-observations-steps">Run the update intersection observations steps</a> for that <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⑧">document</a></code>, passing in <var>now</var> as the timestamp.
   </ol>
   <h4 class="heading settled" data-level="3.4.2" id="pending-initial-observation"><span class="secno">3.4.2. </span><span class="content">Pending initial IntersectionObserver targets</span><a class="self-link" href="#pending-initial-observation"></a></h4>
    A <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①⑨">document</a></code> is said to have <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pending-initial-intersectionobserver-targets">pending initial IntersectionObserver targets</dfn> if there is at least one <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑧">IntersectionObserver</a></code> meeting these criteria: 
   <ol>
    <li>The <var>observer</var>’s <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver②⑨">root</a></code> is in the <var>document</var> (for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑤">top-level browsing context</a>, this includes <a data-link-type="dfn" href="#intersectionobserver-implicit-root-observer" id="ref-for-intersectionobserver-implicit-root-observer④">implicit root observers</a>). 
    <li>The <var>observer</var> has at least one <var>target</var> in its <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-observationtargets-slot" id="ref-for-dom-intersectionobserver-observationtargets-slot⑥">[[ObservationTargets]]</a></code> slot for which
		    no <code class="idl"><a data-link-type="idl" href="#intersectionobserverentry" id="ref-for-intersectionobserverentry⑤">IntersectionObserverEntry</a></code> has yet been queued. 
   </ol>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model" id="ref-for-event-loop-processing-model①">HTML Processing Model</a>, under the "<i>Update the rendering</i>" step, the "<i>Unnecessary rendering</i>" step should be modified to add an additional requirement for skipping the rendering update:</p>
   <ul>
    <li>The <var>document</var> does not have <a data-link-type="dfn" href="#pending-initial-intersectionobserver-targets" id="ref-for-pending-initial-intersectionobserver-targets">pending initial IntersectionObserver targets</a>.
   </ul>
   <h2 class="heading settled" data-level="4" id="accessibility"><span class="secno">4. </span><span class="content">Accessibility Considerations</span><a class="self-link" href="#accessibility"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>There are no known accessibility considerations for the core IntersectionObserver specification (this document).
There are, however, related specifications and proposals that leverage and refer to this spec,
which might have their own accessibility considerations. In particular, specifications for <a href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#lazy-loading-attributes"><cite>HTML</cite> § 2.5.7 Lazy loading attributes</a> and <a href="https://drafts.csswg.org/css-contain-2/#content-visibility"><cite>CSS Containment 2</cite> § 4 Suppressing An Element’s Contents Entirely: the content-visibility property</a> may have implications for <a href="https://html.spec.whatwg.org/multipage/interaction.html#find-in-page"><cite>HTML</cite> § 6.9 Find-in-page</a>, <a href="https://html.spec.whatwg.org/multipage/interaction.html#the-tabindex-attribute"><cite>HTML</cite> § 6.6.3 The tabindex attribute</a>, and <a href="https://githumb.com/WICG/spatial-navigation">spatial navigation</a>.</p>
   <h2 class="heading settled" data-level="5" id="privacy"><span class="secno">5. </span><span class="content">Privacy and Security</span><a class="self-link" href="#privacy"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>The main privacy concerns associated with this API relate to the information
it may provide to code running in the context of a cross-origin iframe
(i.e., the <a data-link-type="dfn" href="#intersectionobserver-cross-origin-domain-target" id="ref-for-intersectionobserver-cross-origin-domain-target①">cross-origin-domain target</a> case). In particular:</p>
   <ul>
    <li data-md>
     <p>There is no universal consensus on the privacy implications of
revealing whether an iframe is within the global viewport.</p>
    <li data-md>
     <p>There is a risk that the API may be used to probe for information
about the geometry of the global viewport itself,
which may be used to deduce the user’s hardware configuration.
The motivation for disabling the effects of <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserver-rootmargin" id="ref-for-dom-intersectionobserver-rootmargin③">rootMargin</a></code> and suppressing <code class="idl"><a data-link-type="idl" href="#dom-intersectionobserverentry-rootbounds" id="ref-for-dom-intersectionobserverentry-rootbounds①">rootBounds</a></code> for <a data-link-type="dfn" href="#intersectionobserver-cross-origin-domain-target" id="ref-for-intersectionobserver-cross-origin-domain-target②">cross-origin-domain targets</a> is to prevent such probing.</p>
   </ul>
   <p>It should be noted that prior to <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③⓪">IntersectionObserver</a></code>, web developers
used other API’s in very ingenious (and grotesque) ways to tease out the information
available from <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③①">IntersectionObserver</a></code>. As a purely practical matter, this API
does not reveal any information that was not already available by other means.</p>
   <p>Another consideration is that <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③②">IntersectionObserver</a></code> uses <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/hr-time/#domhighrestimestamp" id="ref-for-domhighrestimestamp⑤">DOMHighResTimeStamp</a></code>,
which has privacy and security considerations of its own. It is however unlikely that <code class="idl"><a data-link-type="idl" href="#intersectionobserver" id="ref-for-intersectionobserver③③">IntersectionObserver</a></code> is vulnerable to timing-related exploits. Timestamps are generated
at most once per rendering update (see <a href="#event-loop">§ 3.4.1 HTML Processing Model: Event Loop</a>), which is far too
infrequent for the familiar kind of timing attack.</p>
   <h2 class="heading settled" data-level="6" id="internationalization"><span class="secno">6. </span><span class="content">Internationalization</span><a class="self-link" href="#internationalization"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>There are no known issues concerning internationalization.</p>
   <h2 class="heading settled" data-level="7" id="acknowledgements"><span class="secno">7. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>Special thanks to <a href="https://github.com/w3c/IntersectionObserver/graphs/contributors">all the contributors</a> for their technical input and suggestions that led to improvements to this
specification.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <section>
    <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
    <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
    <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
   </section>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li>
    boundingClientRect
    <ul>
     <li><a href="#dom-intersectionobserverentry-boundingclientrect">attribute for IntersectionObserverEntry</a><span>, in § 2.3</span>
     <li><a href="#dom-intersectionobserverentryinit-boundingclientrect">dict-member for IntersectionObserverEntryInit</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#dom-intersectionobserver-callback-slot">[[callback]]</a><span>, in § 3.1.3</span>
   <li><a href="#compute-the-intersection">compute the intersection</a><span>, in § 3.2.7</span>
   <li><a href="#dom-intersectionobserver-intersectionobserver">constructor(callback)</a><span>, in § 2.2</span>
   <li><a href="#dom-intersectionobserver-intersectionobserver">constructor(callback, options)</a><span>, in § 2.2</span>
   <li><a href="#dom-intersectionobserverentry-intersectionobserverentry">constructor(intersectionObserverEntryInit)</a><span>, in § 2.3</span>
   <li><a href="#intersectionobserver-cross-origin-domain-target">cross-origin-domain target</a><span>, in § 2.2</span>
   <li><a href="#dom-intersectionobserver-disconnect">disconnect()</a><span>, in § 2.2</span>
   <li><a href="#intersectionobserver-explicit-root-observer">explicit root observer</a><span>, in § 2.2</span>
   <li><a href="#intersectionobserver-implicit-root">implicit root</a><span>, in § 2.2</span>
   <li><a href="#intersectionobserver-implicit-root-observer">implicit root observer</a><span>, in § 2.2</span>
   <li><a href="#initialize-a-new-intersectionobserver">initialize a new IntersectionObserver</a><span>, in § 3.2.1</span>
   <li><a href="#intersection-observer">Intersection Observer</a><span>, in § 2</span>
   <li><a href="#intersectionobserver">IntersectionObserver</a><span>, in § 2.2</span>
   <li><a href="#dom-intersectionobserver-intersectionobserver">IntersectionObserver(callback)</a><span>, in § 2.2</span>
   <li><a href="#callbackdef-intersectionobservercallback">IntersectionObserverCallback</a><span>, in § 2.1</span>
   <li><a href="#dom-intersectionobserver-intersectionobserver">IntersectionObserver(callback, options)</a><span>, in § 2.2</span>
   <li><a href="#intersectionobserverentry">IntersectionObserverEntry</a><span>, in § 2.3</span>
   <li><a href="#dictdef-intersectionobserverentryinit">IntersectionObserverEntryInit</a><span>, in § 2.3</span>
   <li><a href="#dom-intersectionobserverentry-intersectionobserverentry">IntersectionObserverEntry(intersectionObserverEntryInit)</a><span>, in § 2.3</span>
   <li><a href="#dictdef-intersectionobserverinit">IntersectionObserverInit</a><span>, in § 2.4</span>
   <li><a href="#intersectionobserverregistration">IntersectionObserverRegistration</a><span>, in § 3.1.2</span>
   <li><a href="#document-intersectionobservertaskqueued">IntersectionObserverTaskQueued</a><span>, in § 3.1.1</span>
   <li><a href="#intersectionobserver-task-source">IntersectionObserver task source</a><span>, in § 3.2.4</span>
   <li>
    intersectionRatio
    <ul>
     <li><a href="#dom-intersectionobserverentry-intersectionratio">attribute for IntersectionObserverEntry</a><span>, in § 2.3</span>
     <li><a href="#dom-intersectionobserverentryinit-intersectionratio">dict-member for IntersectionObserverEntryInit</a><span>, in § 2.3</span>
    </ul>
   <li>
    intersectionRect
    <ul>
     <li><a href="#dom-intersectionobserverentry-intersectionrect">attribute for IntersectionObserverEntry</a><span>, in § 2.3</span>
     <li><a href="#dom-intersectionobserverentryinit-intersectionrect">dict-member for IntersectionObserverEntryInit</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#intersectionobserver-intersection-root">intersection root</a><span>, in § 2.2</span>
   <li>
    isIntersecting
    <ul>
     <li><a href="#dom-intersectionobserverentry-isintersecting">attribute for IntersectionObserverEntry</a><span>, in § 2.3</span>
     <li><a href="#dom-intersectionobserverentryinit-isintersecting">dict-member for IntersectionObserverEntryInit</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#notify-intersection-observers">notify intersection observers</a><span>, in § 3.2.5</span>
   <li><a href="#dom-intersectionobserver-observationtargets-slot">[[ObservationTargets]]</a><span>, in § 3.1.3</span>
   <li><a href="#observe-a-target-element">observe a target Element</a><span>, in § 3.2.2</span>
   <li><a href="#dom-intersectionobserverregistration-observer">observer</a><span>, in § 3.1.2</span>
   <li><a href="#dom-intersectionobserver-observe">observe(target)</a><span>, in § 2.2</span>
   <li><a href="#parse-a-root-margin">parse a root margin</a><span>, in § 2.2</span>
   <li><a href="#pending-initial-intersectionobserver-targets">pending initial IntersectionObserver targets</a><span>, in § 3.4.2</span>
   <li><a href="#dom-intersectionobserverregistration-previousisintersecting">previousIsIntersecting</a><span>, in § 3.1.2</span>
   <li><a href="#dom-intersectionobserverregistration-previousthresholdindex">previousThresholdIndex</a><span>, in § 3.1.2</span>
   <li><a href="#intersection-observer-processing-model">Processing Model</a><span>, in § 2.4</span>
   <li><a href="#queue-an-intersectionobserverentry">queue an IntersectionObserverEntry</a><span>, in § 3.2.6</span>
   <li><a href="#queue-an-intersection-observer-task">queue an intersection observer task</a><span>, in § 3.2.4</span>
   <li><a href="#dom-intersectionobserver-queuedentries-slot">[[QueuedEntries]]</a><span>, in § 3.1.3</span>
   <li><a href="#dom-element-registeredintersectionobservers-slot">[[RegisteredIntersectionObservers]]</a><span>, in § 3.1.2</span>
   <li>
    root
    <ul>
     <li><a href="#dom-intersectionobserver-root">attribute for IntersectionObserver</a><span>, in § 2.2</span>
     <li><a href="#dom-intersectionobserverinit-root">dict-member for IntersectionObserverInit</a><span>, in § 2.4</span>
    </ul>
   <li>
    rootBounds
    <ul>
     <li><a href="#dom-intersectionobserverentry-rootbounds">attribute for IntersectionObserverEntry</a><span>, in § 2.3</span>
     <li><a href="#dom-intersectionobserverentryinit-rootbounds">dict-member for IntersectionObserverEntryInit</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#intersectionobserver-root-intersection-rectangle">root intersection rectangle</a><span>, in § 2.2</span>
   <li><a href="#dom-intersectionobserver-rootmargin-slot">[[rootMargin]]</a><span>, in § 3.1.3</span>
   <li>
    rootMargin
    <ul>
     <li><a href="#dom-intersectionobserver-rootmargin">attribute for IntersectionObserver</a><span>, in § 2.2</span>
     <li><a href="#dom-intersectionobserverinit-rootmargin">dict-member for IntersectionObserverInit</a><span>, in § 2.4</span>
    </ul>
   <li><a href="#run-the-update-intersection-observations-steps">run the update intersection observations steps</a><span>, in § 3.2.8</span>
   <li><a href="#intersectionobserver-same-origin-domain-target">same-origin-domain target</a><span>, in § 2.2</span>
   <li><a href="#dom-intersectionobserver-takerecords">takeRecords()</a><span>, in § 2.2</span>
   <li>
    target
    <ul>
     <li><a href="#dom-intersectionobserverentry-target">attribute for IntersectionObserverEntry</a><span>, in § 2.3</span>
     <li><a href="#intersectionobserver-target">dfn for IntersectionObserver</a><span>, in § 2</span>
     <li><a href="#dom-intersectionobserverentryinit-target">dict-member for IntersectionObserverEntryInit</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#dom-intersectionobserverinit-threshold">threshold</a><span>, in § 2.4</span>
   <li><a href="#dom-intersectionobserver-thresholds">thresholds</a><span>, in § 2.2</span>
   <li>
    time
    <ul>
     <li><a href="#dom-intersectionobserverentry-time">attribute for IntersectionObserverEntry</a><span>, in § 2.3</span>
     <li><a href="#dom-intersectionobserverentryinit-time">dict-member for IntersectionObserverEntryInit</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#unobserve-a-target-element">unobserve a target Element</a><span>, in § 3.2.3</span>
   <li><a href="#dom-intersectionobserver-unobserve">unobserve(target)</a><span>, in § 2.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="3b11702b">DOMHighResTimeStamp</span>
     <li><span class="dfn-paneled" id="097f5617">RangeError</span>
     <li><span class="dfn-paneled" id="90867675">SyntaxError</span>
     <li><span class="dfn-paneled" id="faf954d6">browsing context</span>
     <li><span class="dfn-paneled" id="7939ecaf">browsing context container</span>
     <li><span class="dfn-paneled" id="382d14c8">callback this value</span>
     <li><span class="dfn-paneled" id="7e97fcbf">clip-path</span>
     <li><span class="dfn-paneled" id="23ef900a">containing block</span>
     <li><span class="dfn-paneled" id="e0c5f84d">containing block chain</span>
     <li><span class="dfn-paneled" id="eda7c1d4">content area</span>
     <li><span class="dfn-paneled" id="fd0b4a9a">document</span>
     <li><span class="dfn-paneled" id="8ac02c3e">double</span>
     <li><span class="dfn-paneled" id="c6d19e56">event loop</span>
     <li><span class="dfn-paneled" id="a192c757">fully active</span>
     <li><span class="dfn-paneled" id="81b3dc7a">html processing model</span>
     <li><span class="dfn-paneled" id="10e56401">list of the descendant browsing contexts</span>
     <li><span class="dfn-paneled" id="25d33108">nested browsing context</span>
     <li><span class="dfn-paneled" id="73317570">origin</span>
     <li><span class="dfn-paneled" id="dddc4776">pinch zoom</span>
     <li><span class="dfn-paneled" id="9a517a7d">queue a task</span>
     <li><span class="dfn-paneled" id="9c4c1e66">relevant settings object</span>
     <li><span class="dfn-paneled" id="04e154c5">report the exception</span>
     <li><span class="dfn-paneled" id="dcb06f3e">run the animation frame callbacks</span>
     <li><span class="dfn-paneled" id="604e2d49">throw</span>
     <li><span class="dfn-paneled" id="4ce01aab">time origin</span>
     <li><span class="dfn-paneled" id="90f31f6c">top-level browsing context</span>
     <li><span class="dfn-paneled" id="c63519ed">top-level origin</span>
     <li><span class="dfn-paneled" id="db6ab50a">undefined</span>
     <li><span class="dfn-paneled" id="f3aafb20">viewport</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-BOX-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="cecbe9cd">margin</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-SYNTAX-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="569faf4d">parse a list of component values</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="08b774e1">absolute length</span>
     <li><span class="dfn-paneled" id="33090cc8">dimension</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="15f5b381">&lt;percentage></span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSSOM-VIEW-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d38f9598">getBoundingClientRect()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="83c7a70f">MutationObserver</span>
     <li><span class="dfn-paneled" id="76092226">MutationObserverInit</span>
     <li><span class="dfn-paneled" id="96c16e60">Node</span>
     <li><span class="dfn-paneled" id="ceeffc75">observe(target)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GEOMETRY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="27dba777">DOMRect</span>
     <li><span class="dfn-paneled" id="2713d3df">DOMRectInit</span>
     <li><span class="dfn-paneled" id="fdd2dd4e">DOMRectReadOnly</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="04e0443f">document</span>
     <li><span class="dfn-paneled" id="521818b9">same origin-domain</span>
     <li><span class="dfn-paneled" id="c3b2d08c">task source</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="dcf5fafa">FrozenArray</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-box-4">[CSS-BOX-4]
   <dd>Elika Etemad. <a href="https://drafts.csswg.org/css-box-4/"><cite>CSS Box Model Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-box-4/">https://drafts.csswg.org/css-box-4/</a>
   <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
   <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://drafts.csswg.org/css-contain-2/"><cite>CSS Containment Module Level 2</cite></a>. URL: <a href="https://drafts.csswg.org/css-contain-2/">https://drafts.csswg.org/css-contain-2/</a>
   <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
   <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://drafts.csswg.org/css-syntax/"><cite>CSS Syntax Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-syntax/">https://drafts.csswg.org/css-syntax/</a>
   <dt id="biblio-css-values-3">[CSS-VALUES-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-3/"><cite>CSS Values and Units Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-3/">https://drafts.csswg.org/css-values-3/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-4/"><cite>CSS Values and Units Module Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
   <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
   <dd>Simon Pieters. <a href="https://drafts.csswg.org/cssom-view/"><cite>CSSOM View Module</cite></a>. URL: <a href="https://drafts.csswg.org/cssom-view/">https://drafts.csswg.org/cssom-view/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-geometry-1">[GEOMETRY-1]
   <dd>Simon Pieters; Chris Harrelson. <a href="https://drafts.fxtf.org/geometry/"><cite>Geometry Interfaces Module Level 1</cite></a>. URL: <a href="https://drafts.fxtf.org/geometry/">https://drafts.fxtf.org/geometry/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>callback</c-> <a href="#callbackdef-intersectionobservercallback"><code><c- g>IntersectionObserverCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> (<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#intersectionobserverentry"><c- n>IntersectionObserverEntry</c-></a>> <a href="#dom-intersectionobservercallback-entries"><code><c- g>entries</c-></code></a>, <a data-link-type="idl-name" href="#intersectionobserver"><c- n>IntersectionObserver</c-></a> <a href="#dom-intersectionobservercallback-observer"><code><c- g>observer</c-></code></a>);

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#intersectionobserver"><code><c- g>IntersectionObserver</c-></code></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-intersectionobserver-intersectionobserver"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#callbackdef-intersectionobservercallback"><c- n>IntersectionObserverCallback</c-></a> <a href="#dom-intersectionobserver-intersectionobserver-callback-options-callback"><code><c- g>callback</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-intersectionobserverinit"><c- n>IntersectionObserverInit</c-></a> <a href="#dom-intersectionobserver-intersectionobserver-callback-options-options"><code><c- g>options</c-></code></a> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> (<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document"><c- n>Document</c-></a>)? <a class="idl-code" data-link-type="attribute" data-readonly data-type="(Element or Document)?" href="#dom-intersectionobserver-root"><c- g>root</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-intersectionobserver-rootmargin"><c- g>rootMargin</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FrozenArray<double>" href="#dom-intersectionobserver-thresholds"><c- g>thresholds</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-observe"><c- g>observe</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a href="#dom-intersectionobserver-observe-target-target"><code><c- g>target</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-unobserve"><c- g>unobserve</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a href="#dom-intersectionobserver-unobserve-target-target"><code><c- g>target</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-disconnect"><c- g>disconnect</c-></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#intersectionobserverentry"><c- n>IntersectionObserverEntry</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-intersectionobserver-takerecords"><c- g>takeRecords</c-></a>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#intersectionobserverentry"><code><c- g>IntersectionObserverEntry</c-></code></a> {
  <a href="#dom-intersectionobserverentry-intersectionobserverentry"><code><c- g>constructor</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-intersectionobserverentryinit"><c- n>IntersectionObserverEntryInit</c-></a> <a href="#dom-intersectionobserverentry-intersectionobserverentry-intersectionobserverentryinit-intersectionobserverentryinit"><code><c- g>intersectionObserverEntryInit</c-></code></a>);
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="http://www.w3.org/TR/hr-time/#domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMHighResTimeStamp" href="#dom-intersectionobserverentry-time"><c- g>time</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly"><c- n>DOMRectReadOnly</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly?" href="#dom-intersectionobserverentry-rootbounds"><c- g>rootBounds</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-intersectionobserverentry-boundingclientrect"><c- g>boundingClientRect</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-intersectionobserverentry-intersectionrect"><c- g>intersectionRect</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-intersectionobserverentry-isintersecting"><c- g>isIntersecting</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="double" href="#dom-intersectionobserverentry-intersectionratio"><c- g>intersectionRatio</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-intersectionobserverentry-target"><c- g>target</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-intersectionobserverentryinit"><code><c- g>IntersectionObserverEntryInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="http://www.w3.org/TR/hr-time/#domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-type="DOMHighResTimeStamp" href="#dom-intersectionobserverentryinit-time"><code><c- g>time</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit"><c- n>DOMRectInit</c-></a>? <a data-type="DOMRectInit?" href="#dom-intersectionobserverentryinit-rootbounds"><code><c- g>rootBounds</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit"><c- n>DOMRectInit</c-></a> <a data-type="DOMRectInit" href="#dom-intersectionobserverentryinit-boundingclientrect"><code><c- g>boundingClientRect</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit"><c- n>DOMRectInit</c-></a> <a data-type="DOMRectInit" href="#dom-intersectionobserverentryinit-intersectionrect"><code><c- g>intersectionRect</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-intersectionobserverentryinit-isintersecting"><code><c- g>isIntersecting</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a> <a data-type="double" href="#dom-intersectionobserverentryinit-intersectionratio"><code><c- g>intersectionRatio</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <a data-type="Element" href="#dom-intersectionobserverentryinit-target"><code><c- g>target</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-intersectionobserverinit"><code><c- g>IntersectionObserverInit</c-></code></a> {
  (<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#document"><c- n>Document</c-></a>)?  <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="(Element or Document)?" href="#dom-intersectionobserverinit-root"><c- g>root</c-></a> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;0px&quot;" data-link-type="dict-member" data-type="DOMString" href="#dom-intersectionobserverinit-rootmargin"><c- g>rootMargin</c-></a> = "0px";
  (<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double"><c- b>double</c-></a>>) <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="(double or sequence<double>)" href="#dom-intersectionobserverinit-threshold"><c- g>threshold</c-></a> = 0;
};

</pre>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-intersectionobserver">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver" title="The IntersectionObserver() constructor creates and returns a new IntersectionObserver object.">IntersectionObserver/IntersectionObserver</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android yes"><span>Firefox for Android</span><span>55+</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-disconnect">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/disconnect" title="The IntersectionObserver method disconnect() stops watching all of its target elements for visibility changes.">IntersectionObserver/disconnect</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-observe">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/observe" title="The IntersectionObserver method observe() adds an element to the set of target elements being watched by the IntersectionObserver. One observer has one set of thresholds and one root, but can watch multiple target elements for visibility changes in keeping with those.">IntersectionObserver/observe</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-root">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/root" title="The IntersectionObserver interface&apos;s read-only root property identifies the Element or Document whose bounds are treated as the bounding box of the viewport for the element which is the observer&apos;s target.">IntersectionObserver/root</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-rootmargin">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin" title="The IntersectionObserver interface&apos;s read-only rootMargin property is a string with syntax similar to that of the CSS margin property. Each side of the rectangle represented by rootMargin is added to the corresponding side in the root element&apos;s bounding box before the intersection test is performed. This lets you, for example, adjust the bounds outward so that the target element is considered 100% visible even if a certain number of pixels worth of width or height is clipped away, or treat the target as partially hidden if an edge is too close to the edge of the root&apos;s bounding box.">IntersectionObserver/rootMargin</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-takerecords">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/takeRecords" title="The IntersectionObserver method takeRecords() returns an array of IntersectionObserverEntry objects, one for each targeted element which has experienced an intersection change since the last time the intersections were checked, either explicitly through a call to this method or implicitly by an automatic call to the observer&apos;s callback.">IntersectionObserver/takeRecords</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-thresholds">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/thresholds" title="The IntersectionObserver interface&apos;s read-only thresholds property returns the list of intersection thresholds that was specified when the observer was instantiated with IntersectionObserver(). If only one threshold ratio was provided when instantiating the object, this will be an array containing that single value.">IntersectionObserver/thresholds</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>52+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserver-unobserve">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/unobserve" title="The IntersectionObserver method unobserve() instructs the IntersectionObserver to stop observing the specified target element.">IntersectionObserver/unobserve</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="intersection-observer-interface">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver" title="The IntersectionObserver interface of the Intersection Observer API provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document&apos;s viewport. The ancestor element or viewport is referred to as the root.">IntersectionObserver</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-boundingclientrect">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/boundingClientRect" title="The IntersectionObserverEntry interface&apos;s read-only boundingClientRect property returns a DOMRectReadOnly which in essence describes a rectangle describing the smallest rectangle that contains the entire target element.">IntersectionObserverEntry/boundingClientRect</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-intersectionratio">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/intersectionRatio" title="The IntersectionObserverEntry interface&apos;s read-only intersectionRatio property tells you how much of the target element is currently visible within the root&apos;s intersection ratio, as a value between 0.0 and 1.0.">IntersectionObserverEntry/intersectionRatio</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-intersectionrect">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/intersectionRect" title="The IntersectionObserverEntry interface&apos;s read-only intersectionRect property is a DOMRectReadOnly object which describes the smallest rectangle that contains the entire portion of the target element which is currently visible within the intersection root.">IntersectionObserverEntry/intersectionRect</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-isintersecting">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/isIntersecting" title="The IntersectionObserverEntry interface&apos;s read-only isIntersecting property is a Boolean value which is true if the target element intersects with the intersection observer&apos;s root. If this is true, then, the IntersectionObserverEntry describes a transition into a state of intersection; if it&apos;s false, then you know the transition is from intersecting to not-intersecting.">IntersectionObserverEntry/isIntersecting</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>58+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>16+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-rootbounds">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/rootBounds" title="The IntersectionObserverEntry interface&apos;s read-only rootBounds property is a DOMRectReadOnly corresponding to the target&apos;s root intersection rectangle, offset by the IntersectionObserver.rootMargin if one is specified.">IntersectionObserverEntry/rootBounds</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-target">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/target" title="The IntersectionObserverEntry interface&apos;s read-only target property indicates which targeted Element has changed its amount of intersection with the intersection root.">IntersectionObserverEntry/target</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="dom-intersectionobserverentry-time">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/time" title="The IntersectionObserverEntry interface&apos;s read-only time property is a DOMHighResTimeStamp that indicates the time at which the intersection change occurred relative to the time at which the document was created.">IntersectionObserverEntry/time</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="intersection-observer-entry">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry" title="The IntersectionObserverEntry interface of the Intersection Observer API describes the intersection between the target element and its root container at a specific moment of transition.">IntersectionObserverEntry</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>55+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>51+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>15+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"04e0443f": {"dfnID":"04e0443f","dfnText":"document","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-document-2"},{"id":"ref-for-dom-document-2\u2460"},{"id":"ref-for-dom-document-2\u2461"},{"id":"ref-for-dom-document-2\u2462"},{"id":"ref-for-dom-document-2\u2463"},{"id":"ref-for-dom-document-2\u2464"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-document-2\u2465"}],"title":"3.1.1. \nDocument"},{"refs":[{"id":"ref-for-dom-document-2\u2466"},{"id":"ref-for-dom-document-2\u2467"}],"title":"3.2.4. \nQueue an Intersection Observer Task"},{"refs":[{"id":"ref-for-dom-document-2\u2468"}],"title":"3.2.5. \nNotify Intersection Observers"},{"refs":[{"id":"ref-for-dom-document-2\u2460\u24ea"}],"title":"3.2.6. \nQueue an IntersectionObserverEntry"},{"refs":[{"id":"ref-for-dom-document-2\u2460\u2460"},{"id":"ref-for-dom-document-2\u2460\u2461"},{"id":"ref-for-dom-document-2\u2460\u2462"},{"id":"ref-for-dom-document-2\u2460\u2463"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"},{"refs":[{"id":"ref-for-dom-document-2\u2460\u2464"},{"id":"ref-for-dom-document-2\u2460\u2465"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"},{"refs":[{"id":"ref-for-dom-document-2\u2460\u2466"},{"id":"ref-for-dom-document-2\u2460\u2467"}],"title":"3.4.1. \nHTML Processing Model: Event Loop"},{"refs":[{"id":"ref-for-dom-document-2\u2460\u2468"}],"title":"3.4.2. Pending initial IntersectionObserver targets"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2"},
"04e154c5": {"dfnID":"04e154c5","dfnText":"report the exception","external":true,"refSections":[{"refs":[{"id":"ref-for-report-the-exception"}],"title":"3.2.5. \nNotify Intersection Observers"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception"},
"08b774e1": {"dfnID":"08b774e1","dfnText":"absolute length","external":true,"refSections":[{"refs":[{"id":"ref-for-absolute-length"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-absolute-length\u2460"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"}],"url":"https://drafts.csswg.org/css-values-3/#absolute-length"},
"097f5617": {"dfnID":"097f5617","dfnText":"RangeError","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-simple-exception"},{"id":"ref-for-dfn-simple-exception\u2460"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"https://heycam.github.io/webidl/#dfn-simple-exception"},
"10e56401": {"dfnID":"10e56401","dfnText":"list of the descendant browsing contexts","external":true,"refSections":[{"refs":[{"id":"ref-for-list-of-the-descendant-browsing-contexts"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts"},
"15f5b381": {"dfnID":"15f5b381","dfnText":"<percentage>","external":true,"refSections":[{"refs":[{"id":"ref-for-percentage-value"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://drafts.csswg.org/css-values-4/#percentage-value"},
"23ef900a": {"dfnID":"23ef900a","dfnText":"containing block","external":true,"refSections":[{"refs":[{"id":"ref-for-containing-block"},{"id":"ref-for-containing-block\u2460"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"}],"url":"https://drafts.csswg.org/css-box/#containing-block"},
"25d33108": {"dfnID":"25d33108","dfnText":"nested browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-nested-browsing-context"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-nested-browsing-context\u2460"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context"},
"2713d3df": {"dfnID":"2713d3df","dfnText":"DOMRectInit","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-domrectinit"},{"id":"ref-for-dictdef-domrectinit\u2460"},{"id":"ref-for-dictdef-domrectinit\u2461"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit"},
"27dba777": {"dfnID":"27dba777","dfnText":"DOMRect","external":true,"refSections":[{"refs":[{"id":"ref-for-domrect"}],"title":"3.2.6. \nQueue an IntersectionObserverEntry"}],"url":"https://drafts.fxtf.org/geometry-1/#domrect"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"},{"id":"ref-for-element\u2460"},{"id":"ref-for-element\u2461"},{"id":"ref-for-element\u2462"},{"id":"ref-for-element\u2463"},{"id":"ref-for-element\u2464"},{"id":"ref-for-element\u2465"},{"id":"ref-for-element\u2466"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-element\u2467"},{"id":"ref-for-element\u2468"},{"id":"ref-for-element\u2460\u24ea"},{"id":"ref-for-element\u2460\u2460"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-element\u2460\u2461"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"},{"refs":[{"id":"ref-for-element\u2460\u2462"}],"title":"3.1.2. \nElement"},{"refs":[{"id":"ref-for-element\u2460\u2463"}],"title":"3.2.2. Observe a target Element"},{"refs":[{"id":"ref-for-element\u2460\u2464"}],"title":"3.2.3. Unobserve a target Element"},{"refs":[{"id":"ref-for-element\u2460\u2465"}],"title":"3.2.6. \nQueue an IntersectionObserverEntry"},{"refs":[{"id":"ref-for-element\u2460\u2466"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"https://dom.spec.whatwg.org/#element"},
"33090cc8": {"dfnID":"33090cc8","dfnText":"dimension","external":true,"refSections":[{"refs":[{"id":"ref-for-dimension"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://drafts.csswg.org/css-values-3/#dimension"},
"382d14c8": {"dfnID":"382d14c8","dfnText":"callback this value","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-callback-this-value"}],"title":"3.2.5. \nNotify Intersection Observers"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#dfn-callback-this-value"},
"3b11702b": {"dfnID":"3b11702b","dfnText":"DOMHighResTimeStamp","external":true,"refSections":[{"refs":[{"id":"ref-for-domhighrestimestamp"},{"id":"ref-for-domhighrestimestamp\u2460"},{"id":"ref-for-domhighrestimestamp\u2461"},{"id":"ref-for-domhighrestimestamp\u2462"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-domhighrestimestamp\u2463"}],"title":"3.2.6. \nQueue an IntersectionObserverEntry"},{"refs":[{"id":"ref-for-domhighrestimestamp\u2464"}],"title":"5. Privacy and Security"}],"url":"http://www.w3.org/TR/hr-time/#domhighrestimestamp"},
"4ce01aab": {"dfnID":"4ce01aab","dfnText":"time origin","external":true,"refSections":[{"refs":[{"id":"ref-for-time-origin"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"http://www.w3.org/TR/hr-time/#time-origin"},
"521818b9": {"dfnID":"521818b9","dfnText":"same origin-domain","external":true,"refSections":[{"refs":[{"id":"ref-for-same-origin-domain"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"},{"id":"ref-for-idl-boolean\u2460"},{"id":"ref-for-idl-boolean\u2461"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"569faf4d": {"dfnID":"569faf4d","dfnText":"parse a list of component values","external":true,"refSections":[{"refs":[{"id":"ref-for-parse-a-list-of-component-values"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://drafts.csswg.org/css-syntax-3/#parse-a-list-of-component-values"},
"604e2d49": {"dfnID":"604e2d49","dfnText":"throw","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-throw"},{"id":"ref-for-dfn-throw\u2460"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"https://heycam.github.io/webidl/#dfn-throw"},
"73317570": {"dfnID":"73317570","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-origin"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://html.spec.whatwg.org/multipage/origin.html#origin"},
"76092226": {"dfnID":"76092226","dfnText":"MutationObserverInit","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-mutationobserverinit"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://dom.spec.whatwg.org/#dictdef-mutationobserverinit"},
"7939ecaf": {"dfnID":"7939ecaf","dfnText":"browsing context container","external":true,"refSections":[{"refs":[{"id":"ref-for-browsing-context-container"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container"},
"7e97fcbf": {"dfnID":"7e97fcbf","dfnText":"clip-path","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-clip-path"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"}],"url":"http://www.w3.org/TR/css-masking-1/#propdef-clip-path"},
"81b3dc7a": {"dfnID":"81b3dc7a","dfnText":"html processing model","external":true,"refSections":[{"refs":[{"id":"ref-for-event-loop-processing-model"}],"title":"3.4.1. \nHTML Processing Model: Event Loop"},{"refs":[{"id":"ref-for-event-loop-processing-model\u2460"}],"title":"3.4.2. Pending initial IntersectionObserver targets"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model"},
"83c7a70f": {"dfnID":"83c7a70f","dfnText":"MutationObserver","external":true,"refSections":[{"refs":[{"id":"ref-for-mutationobserver"},{"id":"ref-for-mutationobserver\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://dom.spec.whatwg.org/#mutationobserver"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-document\u2461"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"}],"url":"https://dom.spec.whatwg.org/#document"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"},{"id":"ref-for-idl-DOMString\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-Exposed\u2460"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8ac02c3e": {"dfnID":"8ac02c3e","dfnText":"double","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-double"},{"id":"ref-for-idl-double\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-idl-double\u2461"},{"id":"ref-for-idl-double\u2462"},{"id":"ref-for-idl-double\u2463"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-idl-double\u2464"},{"id":"ref-for-idl-double\u2465"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"}],"url":"https://heycam.github.io/webidl/#idl-double"},
"90867675": {"dfnID":"90867675","dfnText":"SyntaxError","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-simple-exception"},{"id":"ref-for-dfn-simple-exception\u2460"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"https://heycam.github.io/webidl/#dfn-simple-exception"},
"90f31f6c": {"dfnID":"90f31f6c","dfnText":"top-level browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-top-level-browsing-context"},{"id":"ref-for-top-level-browsing-context\u2460"},{"id":"ref-for-top-level-browsing-context\u2461"},{"id":"ref-for-top-level-browsing-context\u2462"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-top-level-browsing-context\u2463"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"},{"refs":[{"id":"ref-for-top-level-browsing-context\u2464"}],"title":"3.4.2. Pending initial IntersectionObserver targets"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"},
"96c16e60": {"dfnID":"96c16e60","dfnText":"Node","external":true,"refSections":[{"refs":[{"id":"ref-for-node"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://dom.spec.whatwg.org/#node"},
"9a517a7d": {"dfnID":"9a517a7d","dfnText":"queue a task","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-a-task"}],"title":"3.2.4. \nQueue an Intersection Observer Task"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"},
"9c4c1e66": {"dfnID":"9c4c1e66","dfnText":"relevant settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-relevant-settings-object"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"}],"title":"2.1. \nThe IntersectionObserverCallback"},{"refs":[{"id":"ref-for-idl-sequence\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-idl-sequence\u2461"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"a192c757": {"dfnID":"a192c757","dfnText":"fully active","external":true,"refSections":[{"refs":[{"id":"ref-for-fully-active"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-fully-active\u2460"}],"title":"3.4.1. \nHTML Processing Model: Event Loop"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#fully-active"},
"c3b2d08c": {"dfnID":"c3b2d08c","dfnText":"task source","external":true,"refSections":[{"refs":[{"id":"ref-for-task-source"}],"title":"3.2.4. \nQueue an Intersection Observer Task"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#task-source"},
"c63519ed": {"dfnID":"c63519ed","dfnText":"top-level origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-environment-top-level-origin"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin"},
"c6d19e56": {"dfnID":"c6d19e56","dfnText":"event loop","external":true,"refSections":[{"refs":[{"id":"ref-for-event-loop"}],"title":"3.2.4. \nQueue an Intersection Observer Task"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"},
"callbackdef-intersectionobservercallback": {"dfnID":"callbackdef-intersectionobservercallback","dfnText":"IntersectionObserverCallback","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-intersectionobservercallback"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-callbackdef-intersectionobservercallback\u2460"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"#callbackdef-intersectionobservercallback"},
"cecbe9cd": {"dfnID":"cecbe9cd","dfnText":"margin","external":true,"refSections":[{"refs":[{"id":"ref-for-propdef-margin"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-propdef-margin\u2460"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"}],"url":"https://drafts.csswg.org/css-box-4/#propdef-margin"},
"ceeffc75": {"dfnID":"ceeffc75","dfnText":"observe(target)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-mutationobserver-observe"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://dom.spec.whatwg.org/#dom-mutationobserver-observe"},
"compute-the-intersection": {"dfnID":"compute-the-intersection","dfnText":"compute the intersection","external":false,"refSections":[{"refs":[{"id":"ref-for-compute-the-intersection"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#compute-the-intersection"},
"d38f9598": {"dfnID":"d38f9598","dfnText":"getBoundingClientRect()","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-element-getboundingclientrect"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-element-getboundingclientrect\u2460"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-dom-element-getboundingclientrect\u2461"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"},{"refs":[{"id":"ref-for-dom-element-getboundingclientrect\u2462"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"},{"refs":[{"id":"ref-for-dom-element-getboundingclientrect\u2463"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect"},
"db6ab50a": {"dfnID":"db6ab50a","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"}],"title":"2.1. \nThe IntersectionObserverCallback"},{"refs":[{"id":"ref-for-idl-undefined\u2460"},{"id":"ref-for-idl-undefined\u2461"},{"id":"ref-for-idl-undefined\u2462"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://heycam.github.io/webidl/#idl-undefined"},
"dcb06f3e": {"dfnID":"dcb06f3e","dfnText":"run the animation frame callbacks","external":true,"refSections":[{"refs":[{"id":"ref-for-run-the-animation-frame-callbacks"}],"title":"3.4.1. \nHTML Processing Model: Event Loop"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#run-the-animation-frame-callbacks"},
"dcf5fafa": {"dfnID":"dcf5fafa","dfnText":"FrozenArray","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-frozen-array"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://webidl.spec.whatwg.org/#idl-frozen-array"},
"dddc4776": {"dfnID":"dddc4776","dfnText":"pinch zoom","external":true,"refSections":[{"refs":[{"id":"ref-for-pinch-zoom"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://drafts.csswg.org/cssom-view-1/#pinch-zoom"},
"dictdef-intersectionobserverentryinit": {"dfnID":"dictdef-intersectionobserverentryinit","dfnText":"IntersectionObserverEntryInit","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-intersectionobserverentryinit"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"#dictdef-intersectionobserverentryinit"},
"dictdef-intersectionobserverinit": {"dfnID":"dictdef-intersectionobserverinit","dfnText":"IntersectionObserverInit","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-intersectionobserverinit"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dictdef-intersectionobserverinit\u2460"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"#dictdef-intersectionobserverinit"},
"document-intersectionobservertaskqueued": {"dfnID":"document-intersectionobservertaskqueued","dfnText":"IntersectionObserverTaskQueued","external":false,"refSections":[{"refs":[{"id":"ref-for-document-intersectionobservertaskqueued"},{"id":"ref-for-document-intersectionobservertaskqueued\u2460"}],"title":"3.2.4. \nQueue an Intersection Observer Task"},{"refs":[{"id":"ref-for-document-intersectionobservertaskqueued\u2461"}],"title":"3.2.5. \nNotify Intersection Observers"}],"url":"#document-intersectionobservertaskqueued"},
"dom-element-registeredintersectionobservers-slot": {"dfnID":"dom-element-registeredintersectionobservers-slot","dfnText":"[[RegisteredIntersectionObservers]]","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-element-registeredintersectionobservers-slot"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-element-registeredintersectionobservers-slot\u2460"}],"title":"3.2.2. Observe a target Element"},{"refs":[{"id":"ref-for-dom-element-registeredintersectionobservers-slot\u2461"}],"title":"3.2.3. Unobserve a target Element"},{"refs":[{"id":"ref-for-dom-element-registeredintersectionobservers-slot\u2462"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#dom-element-registeredintersectionobservers-slot"},
"dom-intersectionobserver-callback-slot": {"dfnID":"dom-intersectionobserver-callback-slot","dfnText":"[[callback]]","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-callback-slot"}],"title":"3.2.1. Initialize a new IntersectionObserver"},{"refs":[{"id":"ref-for-dom-intersectionobserver-callback-slot\u2460"}],"title":"3.2.5. \nNotify Intersection Observers"}],"url":"#dom-intersectionobserver-callback-slot"},
"dom-intersectionobserver-disconnect": {"dfnID":"dom-intersectionobserver-disconnect","dfnText":"disconnect()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-disconnect"},{"id":"ref-for-dom-intersectionobserver-disconnect\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-disconnect\u2461"}],"title":"3.3. \nIntersectionObserver Lifetime"}],"url":"#dom-intersectionobserver-disconnect"},
"dom-intersectionobserver-intersectionobserver": {"dfnID":"dom-intersectionobserver-intersectionobserver","dfnText":"\nnew IntersectionObserver(callback, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-intersectionobserver"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-intersectionobserver\u2460"}],"title":"3.1.3. \nIntersectionObserver"}],"url":"#dom-intersectionobserver-intersectionobserver"},
"dom-intersectionobserver-intersectionobserver-callback-options-callback": {"dfnID":"dom-intersectionobserver-intersectionobserver-callback-options-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-intersectionobserver-intersectionobserver-callback-options-callback"},
"dom-intersectionobserver-intersectionobserver-callback-options-options": {"dfnID":"dom-intersectionobserver-intersectionobserver-callback-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-intersectionobserver-intersectionobserver-callback-options-options"},
"dom-intersectionobserver-observationtargets-slot": {"dfnID":"dom-intersectionobserver-observationtargets-slot","dfnText":"[[ObservationTargets]]","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-observationtargets-slot"},{"id":"ref-for-dom-intersectionobserver-observationtargets-slot\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-observationtargets-slot\u2461"},{"id":"ref-for-dom-intersectionobserver-observationtargets-slot\u2462"}],"title":"3.2.2. Observe a target Element"},{"refs":[{"id":"ref-for-dom-intersectionobserver-observationtargets-slot\u2463"}],"title":"3.2.3. Unobserve a target Element"},{"refs":[{"id":"ref-for-dom-intersectionobserver-observationtargets-slot\u2464"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"},{"refs":[{"id":"ref-for-dom-intersectionobserver-observationtargets-slot\u2465"}],"title":"3.4.2. Pending initial IntersectionObserver targets"}],"url":"#dom-intersectionobserver-observationtargets-slot"},
"dom-intersectionobserver-observe": {"dfnID":"dom-intersectionobserver-observe","dfnText":"observe(target)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-observe"},{"id":"ref-for-dom-intersectionobserver-observe\u2460"},{"id":"ref-for-dom-intersectionobserver-observe\u2461"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-observe\u2462"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#dom-intersectionobserver-observe"},
"dom-intersectionobserver-observe-target-target": {"dfnID":"dom-intersectionobserver-observe-target-target","dfnText":"target","external":false,"refSections":[],"url":"#dom-intersectionobserver-observe-target-target"},
"dom-intersectionobserver-queuedentries-slot": {"dfnID":"dom-intersectionobserver-queuedentries-slot","dfnText":"[[QueuedEntries]]","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-queuedentries-slot"},{"id":"ref-for-dom-intersectionobserver-queuedentries-slot\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-queuedentries-slot\u2461"},{"id":"ref-for-dom-intersectionobserver-queuedentries-slot\u2462"},{"id":"ref-for-dom-intersectionobserver-queuedentries-slot\u2463"}],"title":"3.2.5. \nNotify Intersection Observers"},{"refs":[{"id":"ref-for-dom-intersectionobserver-queuedentries-slot\u2464"}],"title":"3.2.6. \nQueue an IntersectionObserverEntry"}],"url":"#dom-intersectionobserver-queuedentries-slot"},
"dom-intersectionobserver-root": {"dfnID":"dom-intersectionobserver-root","dfnText":"root","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-root"},{"id":"ref-for-dom-intersectionobserver-root\u2460"},{"id":"ref-for-dom-intersectionobserver-root\u2461"},{"id":"ref-for-dom-intersectionobserver-root\u2462"},{"id":"ref-for-dom-intersectionobserver-root\u2463"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-root\u2464"},{"id":"ref-for-dom-intersectionobserver-root\u2465"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-root\u2466"}],"title":"3.2.5. \nNotify Intersection Observers"},{"refs":[{"id":"ref-for-dom-intersectionobserver-root\u2467"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#dom-intersectionobserver-root"},
"dom-intersectionobserver-rootmargin": {"dfnID":"dom-intersectionobserver-rootmargin","dfnText":"rootMargin","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-rootmargin"},{"id":"ref-for-dom-intersectionobserver-rootmargin\u2460"},{"id":"ref-for-dom-intersectionobserver-rootmargin\u2461"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-rootmargin\u2462"}],"title":"5. Privacy and Security"}],"url":"#dom-intersectionobserver-rootmargin"},
"dom-intersectionobserver-rootmargin-slot": {"dfnID":"dom-intersectionobserver-rootmargin-slot","dfnText":"[[rootMargin]]","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-rootmargin-slot"},{"id":"ref-for-dom-intersectionobserver-rootmargin-slot\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-rootmargin-slot\u2461"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"#dom-intersectionobserver-rootmargin-slot"},
"dom-intersectionobserver-takerecords": {"dfnID":"dom-intersectionobserver-takerecords","dfnText":"takeRecords()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-takerecords"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"#dom-intersectionobserver-takerecords"},
"dom-intersectionobserver-thresholds": {"dfnID":"dom-intersectionobserver-thresholds","dfnText":"thresholds","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-thresholds"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-thresholds\u2460"}],"title":"3.1.2. \nElement"},{"refs":[{"id":"ref-for-dom-intersectionobserver-thresholds\u2461"}],"title":"3.2.1. Initialize a new IntersectionObserver"},{"refs":[{"id":"ref-for-dom-intersectionobserver-thresholds\u2462"},{"id":"ref-for-dom-intersectionobserver-thresholds\u2463"},{"id":"ref-for-dom-intersectionobserver-thresholds\u2464"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#dom-intersectionobserver-thresholds"},
"dom-intersectionobserver-unobserve": {"dfnID":"dom-intersectionobserver-unobserve","dfnText":"unobserve(target)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserver-unobserve"},{"id":"ref-for-dom-intersectionobserver-unobserve\u2460"},{"id":"ref-for-dom-intersectionobserver-unobserve\u2461"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserver-unobserve\u2462"}],"title":"3.3. \nIntersectionObserver Lifetime"}],"url":"#dom-intersectionobserver-unobserve"},
"dom-intersectionobserver-unobserve-target-target": {"dfnID":"dom-intersectionobserver-unobserve-target-target","dfnText":"target","external":false,"refSections":[],"url":"#dom-intersectionobserver-unobserve-target-target"},
"dom-intersectionobservercallback-entries": {"dfnID":"dom-intersectionobservercallback-entries","dfnText":"entries","external":false,"refSections":[],"url":"#dom-intersectionobservercallback-entries"},
"dom-intersectionobservercallback-observer": {"dfnID":"dom-intersectionobservercallback-observer","dfnText":"observer","external":false,"refSections":[],"url":"#dom-intersectionobservercallback-observer"},
"dom-intersectionobserverentry-boundingclientrect": {"dfnID":"dom-intersectionobserverentry-boundingclientrect","dfnText":"boundingClientRect","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverentry-boundingclientrect"},{"id":"ref-for-dom-intersectionobserverentry-boundingclientrect\u2460"},{"id":"ref-for-dom-intersectionobserverentry-boundingclientrect\u2461"},{"id":"ref-for-dom-intersectionobserverentry-boundingclientrect\u2462"},{"id":"ref-for-dom-intersectionobserverentry-boundingclientrect\u2463"},{"id":"ref-for-dom-intersectionobserverentry-boundingclientrect\u2464"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"#dom-intersectionobserverentry-boundingclientrect"},
"dom-intersectionobserverentry-intersectionobserverentry": {"dfnID":"dom-intersectionobserverentry-intersectionobserverentry","dfnText":"constructor","external":false,"refSections":[],"url":"#dom-intersectionobserverentry-intersectionobserverentry"},
"dom-intersectionobserverentry-intersectionobserverentry-intersectionobserverentryinit-intersectionobserverentryinit": {"dfnID":"dom-intersectionobserverentry-intersectionobserverentry-intersectionobserverentryinit-intersectionobserverentryinit","dfnText":"intersectionObserverEntryInit","external":false,"refSections":[],"url":"#dom-intersectionobserverentry-intersectionobserverentry-intersectionobserverentryinit-intersectionobserverentryinit"},
"dom-intersectionobserverentry-intersectionratio": {"dfnID":"dom-intersectionobserverentry-intersectionratio","dfnText":"intersectionRatio","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverentry-intersectionratio"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"#dom-intersectionobserverentry-intersectionratio"},
"dom-intersectionobserverentry-intersectionrect": {"dfnID":"dom-intersectionobserverentry-intersectionrect","dfnText":"intersectionRect","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverentry-intersectionrect"},{"id":"ref-for-dom-intersectionobserverentry-intersectionrect\u2460"},{"id":"ref-for-dom-intersectionobserverentry-intersectionrect\u2461"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"#dom-intersectionobserverentry-intersectionrect"},
"dom-intersectionobserverentry-isintersecting": {"dfnID":"dom-intersectionobserverentry-isintersecting","dfnText":"isIntersecting","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverentry-isintersecting"},{"id":"ref-for-dom-intersectionobserverentry-isintersecting\u2460"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"#dom-intersectionobserverentry-isintersecting"},
"dom-intersectionobserverentry-rootbounds": {"dfnID":"dom-intersectionobserverentry-rootbounds","dfnText":"rootBounds","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverentry-rootbounds"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-dom-intersectionobserverentry-rootbounds\u2460"}],"title":"5. Privacy and Security"}],"url":"#dom-intersectionobserverentry-rootbounds"},
"dom-intersectionobserverentry-target": {"dfnID":"dom-intersectionobserverentry-target","dfnText":"target","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverentry-target"},{"id":"ref-for-dom-intersectionobserverentry-target\u2460"},{"id":"ref-for-dom-intersectionobserverentry-target\u2461"},{"id":"ref-for-dom-intersectionobserverentry-target\u2462"},{"id":"ref-for-dom-intersectionobserverentry-target\u2463"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"#dom-intersectionobserverentry-target"},
"dom-intersectionobserverentry-time": {"dfnID":"dom-intersectionobserverentry-time","dfnText":"time","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverentry-time"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"#dom-intersectionobserverentry-time"},
"dom-intersectionobserverentryinit-boundingclientrect": {"dfnID":"dom-intersectionobserverentryinit-boundingclientrect","dfnText":"boundingClientRect","external":false,"refSections":[],"url":"#dom-intersectionobserverentryinit-boundingclientrect"},
"dom-intersectionobserverentryinit-intersectionratio": {"dfnID":"dom-intersectionobserverentryinit-intersectionratio","dfnText":"intersectionRatio","external":false,"refSections":[],"url":"#dom-intersectionobserverentryinit-intersectionratio"},
"dom-intersectionobserverentryinit-intersectionrect": {"dfnID":"dom-intersectionobserverentryinit-intersectionrect","dfnText":"intersectionRect","external":false,"refSections":[],"url":"#dom-intersectionobserverentryinit-intersectionrect"},
"dom-intersectionobserverentryinit-isintersecting": {"dfnID":"dom-intersectionobserverentryinit-isintersecting","dfnText":"isIntersecting","external":false,"refSections":[],"url":"#dom-intersectionobserverentryinit-isintersecting"},
"dom-intersectionobserverentryinit-rootbounds": {"dfnID":"dom-intersectionobserverentryinit-rootbounds","dfnText":"rootBounds","external":false,"refSections":[],"url":"#dom-intersectionobserverentryinit-rootbounds"},
"dom-intersectionobserverentryinit-target": {"dfnID":"dom-intersectionobserverentryinit-target","dfnText":"target","external":false,"refSections":[],"url":"#dom-intersectionobserverentryinit-target"},
"dom-intersectionobserverentryinit-time": {"dfnID":"dom-intersectionobserverentryinit-time","dfnText":"time","external":false,"refSections":[],"url":"#dom-intersectionobserverentryinit-time"},
"dom-intersectionobserverinit-root": {"dfnID":"dom-intersectionobserverinit-root","dfnText":"root","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverinit-root"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserverinit-root\u2460"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"}],"url":"#dom-intersectionobserverinit-root"},
"dom-intersectionobserverinit-rootmargin": {"dfnID":"dom-intersectionobserverinit-rootmargin","dfnText":"rootMargin","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverinit-rootmargin"},{"id":"ref-for-dom-intersectionobserverinit-rootmargin\u2460"},{"id":"ref-for-dom-intersectionobserverinit-rootmargin\u2461"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserverinit-rootmargin\u2462"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"},{"refs":[{"id":"ref-for-dom-intersectionobserverinit-rootmargin\u2463"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"#dom-intersectionobserverinit-rootmargin"},
"dom-intersectionobserverinit-threshold": {"dfnID":"dom-intersectionobserverinit-threshold","dfnText":"threshold","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverinit-threshold"},{"id":"ref-for-dom-intersectionobserverinit-threshold\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserverinit-threshold\u2461"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"},{"refs":[{"id":"ref-for-dom-intersectionobserverinit-threshold\u2462"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"#dom-intersectionobserverinit-threshold"},
"dom-intersectionobserverregistration-observer": {"dfnID":"dom-intersectionobserverregistration-observer","dfnText":"observer","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverregistration-observer"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-dom-intersectionobserverregistration-observer\u2460"}],"title":"3.2.2. Observe a target Element"},{"refs":[{"id":"ref-for-dom-intersectionobserverregistration-observer\u2461"}],"title":"3.2.3. Unobserve a target Element"},{"refs":[{"id":"ref-for-dom-intersectionobserverregistration-observer\u2462"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#dom-intersectionobserverregistration-observer"},
"dom-intersectionobserverregistration-previousisintersecting": {"dfnID":"dom-intersectionobserverregistration-previousisintersecting","dfnText":"previousIsIntersecting","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverregistration-previousisintersecting"}],"title":"3.2.2. Observe a target Element"},{"refs":[{"id":"ref-for-dom-intersectionobserverregistration-previousisintersecting\u2460"},{"id":"ref-for-dom-intersectionobserverregistration-previousisintersecting\u2461"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#dom-intersectionobserverregistration-previousisintersecting"},
"dom-intersectionobserverregistration-previousthresholdindex": {"dfnID":"dom-intersectionobserverregistration-previousthresholdindex","dfnText":"previousThresholdIndex","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-intersectionobserverregistration-previousthresholdindex"}],"title":"3.2.2. Observe a target Element"},{"refs":[{"id":"ref-for-dom-intersectionobserverregistration-previousthresholdindex\u2460"},{"id":"ref-for-dom-intersectionobserverregistration-previousthresholdindex\u2461"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#dom-intersectionobserverregistration-previousthresholdindex"},
"e0c5f84d": {"dfnID":"e0c5f84d","dfnText":"containing block chain","external":true,"refSections":[{"refs":[{"id":"ref-for-containing-block-chain"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-containing-block-chain\u2460"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"https://drafts.csswg.org/css-display/#containing-block-chain"},
"eda7c1d4": {"dfnID":"eda7c1d4","dfnText":"content area","external":true,"refSections":[{"refs":[{"id":"ref-for-content-area"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://drafts.csswg.org/css-box/#content-area"},
"f3aafb20": {"dfnID":"f3aafb20","dfnText":"viewport","external":true,"refSections":[{"refs":[{"id":"ref-for-viewport"},{"id":"ref-for-viewport\u2460"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-viewport\u2461"},{"id":"ref-for-viewport\u2462"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-viewport\u2463"},{"id":"ref-for-viewport\u2464"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"}],"url":"https://drafts.csswg.org/css2/visuren.html#viewport"},
"faf954d6": {"dfnID":"faf954d6","dfnText":"browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-browsing-context"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-browsing-context\u2460"},{"id":"ref-for-browsing-context\u2461"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"},
"fd0b4a9a": {"dfnID":"fd0b4a9a","dfnText":"document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"https://html.spec.whatwg.org/multipage/dom.html#document"},
"fdd2dd4e": {"dfnID":"fdd2dd4e","dfnText":"DOMRectReadOnly","external":true,"refSections":[{"refs":[{"id":"ref-for-domrectreadonly"},{"id":"ref-for-domrectreadonly\u2460"},{"id":"ref-for-domrectreadonly\u2461"},{"id":"ref-for-domrectreadonly\u2462"},{"id":"ref-for-domrectreadonly\u2463"},{"id":"ref-for-domrectreadonly\u2464"},{"id":"ref-for-domrectreadonly\u2465"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-domrectreadonly\u2466"},{"id":"ref-for-domrectreadonly\u2467"},{"id":"ref-for-domrectreadonly\u2468"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"https://drafts.fxtf.org/geometry-1/#domrectreadonly"},
"initialize-a-new-intersectionobserver": {"dfnID":"initialize-a-new-intersectionobserver","dfnText":"initialize a new IntersectionObserver","external":false,"refSections":[{"refs":[{"id":"ref-for-initialize-a-new-intersectionobserver"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"#initialize-a-new-intersectionobserver"},
"intersection-observer": {"dfnID":"intersection-observer","dfnText":"Intersection Observer","external":false,"refSections":[{"refs":[{"id":"ref-for-intersection-observer"}],"title":"3. \nProcessing Model"},{"refs":[{"id":"ref-for-intersection-observer\u2460"}],"title":"3.4.1. \nHTML Processing Model: Event Loop"}],"url":"#intersection-observer"},
"intersection-observer-processing-model": {"dfnID":"intersection-observer-processing-model","dfnText":"3. \nProcessing Model","external":false,"refSections":[{"refs":[{"id":"ref-for-intersection-observer-processing-model"}],"title":"2.1. \nThe IntersectionObserverCallback"},{"refs":[{"id":"ref-for-intersection-observer-processing-model"}],"title":"3. \nProcessing Model"}],"url":"#intersection-observer-processing-model"},
"intersectionobserver": {"dfnID":"intersectionobserver","dfnText":"IntersectionObserver","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver"}],"title":"2.1. \nThe IntersectionObserverCallback"},{"refs":[{"id":"ref-for-intersectionobserver\u2460"},{"id":"ref-for-intersectionobserver\u2461"},{"id":"ref-for-intersectionobserver\u2462"},{"id":"ref-for-intersectionobserver\u2463"},{"id":"ref-for-intersectionobserver\u2464"},{"id":"ref-for-intersectionobserver\u2465"},{"id":"ref-for-intersectionobserver\u2466"},{"id":"ref-for-intersectionobserver\u2467"},{"id":"ref-for-intersectionobserver\u2468"},{"id":"ref-for-intersectionobserver\u2460\u24ea"},{"id":"ref-for-intersectionobserver\u2460\u2460"},{"id":"ref-for-intersectionobserver\u2460\u2461"},{"id":"ref-for-intersectionobserver\u2460\u2462"},{"id":"ref-for-intersectionobserver\u2460\u2463"},{"id":"ref-for-intersectionobserver\u2460\u2464"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-intersectionobserver\u2460\u2465"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"},{"refs":[{"id":"ref-for-intersectionobserver\u2460\u2466"}],"title":"3.1.2. \nElement"},{"refs":[{"id":"ref-for-intersectionobserver\u2460\u2467"}],"title":"3.1.3. \nIntersectionObserver"},{"refs":[{"id":"ref-for-intersectionobserver\u2460\u2468"}],"title":"3.2.1. Initialize a new IntersectionObserver"},{"refs":[{"id":"ref-for-intersectionobserver\u2461\u24ea"}],"title":"3.2.2. Observe a target Element"},{"refs":[{"id":"ref-for-intersectionobserver\u2461\u2460"}],"title":"3.2.3. Unobserve a target Element"},{"refs":[{"id":"ref-for-intersectionobserver\u2461\u2461"},{"id":"ref-for-intersectionobserver\u2461\u2462"}],"title":"3.2.5. \nNotify Intersection Observers"},{"refs":[{"id":"ref-for-intersectionobserver\u2461\u2463"}],"title":"3.2.6. \nQueue an IntersectionObserverEntry"},{"refs":[{"id":"ref-for-intersectionobserver\u2461\u2464"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"},{"refs":[{"id":"ref-for-intersectionobserver\u2461\u2465"},{"id":"ref-for-intersectionobserver\u2461\u2466"}],"title":"3.3. \nIntersectionObserver Lifetime"},{"refs":[{"id":"ref-for-intersectionobserver\u2461\u2467"},{"id":"ref-for-intersectionobserver\u2461\u2468"}],"title":"3.4.2. Pending initial IntersectionObserver targets"},{"refs":[{"id":"ref-for-intersectionobserver\u2462\u24ea"},{"id":"ref-for-intersectionobserver\u2462\u2460"},{"id":"ref-for-intersectionobserver\u2462\u2461"},{"id":"ref-for-intersectionobserver\u2462\u2462"}],"title":"5. Privacy and Security"}],"url":"#intersectionobserver"},
"intersectionobserver-cross-origin-domain-target": {"dfnID":"intersectionobserver-cross-origin-domain-target","dfnText":"cross-origin-domain target","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver-cross-origin-domain-target"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-intersectionobserver-cross-origin-domain-target\u2460"},{"id":"ref-for-intersectionobserver-cross-origin-domain-target\u2461"}],"title":"5. Privacy and Security"}],"url":"#intersectionobserver-cross-origin-domain-target"},
"intersectionobserver-explicit-root-observer": {"dfnID":"intersectionobserver-explicit-root-observer","dfnText":"explicit root observer","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver-explicit-root-observer"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"#intersectionobserver-explicit-root-observer"},
"intersectionobserver-implicit-root": {"dfnID":"intersectionobserver-implicit-root","dfnText":"implicit root","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver-implicit-root"}],"title":"2.4. \nThe IntersectionObserverInit dictionary"},{"refs":[{"id":"ref-for-intersectionobserver-implicit-root\u2460"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#intersectionobserver-implicit-root"},
"intersectionobserver-implicit-root-observer": {"dfnID":"intersectionobserver-implicit-root-observer","dfnText":"implicit root observer","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver-implicit-root-observer"},{"id":"ref-for-intersectionobserver-implicit-root-observer\u2460"},{"id":"ref-for-intersectionobserver-implicit-root-observer\u2461"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-intersectionobserver-implicit-root-observer\u2462"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"},{"refs":[{"id":"ref-for-intersectionobserver-implicit-root-observer\u2463"}],"title":"3.4.2. Pending initial IntersectionObserver targets"}],"url":"#intersectionobserver-implicit-root-observer"},
"intersectionobserver-intersection-root": {"dfnID":"intersectionobserver-intersection-root","dfnText":"intersection root","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver-intersection-root"}],"title":"2. Intersection Observer"},{"refs":[{"id":"ref-for-intersectionobserver-intersection-root\u2460"}],"title":"2.1. \nThe IntersectionObserverCallback"},{"refs":[{"id":"ref-for-intersectionobserver-intersection-root\u2461"},{"id":"ref-for-intersectionobserver-intersection-root\u2462"},{"id":"ref-for-intersectionobserver-intersection-root\u2463"},{"id":"ref-for-intersectionobserver-intersection-root\u2464"},{"id":"ref-for-intersectionobserver-intersection-root\u2465"},{"id":"ref-for-intersectionobserver-intersection-root\u2466"},{"id":"ref-for-intersectionobserver-intersection-root\u2467"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-intersectionobserver-intersection-root\u2468"},{"id":"ref-for-intersectionobserver-intersection-root\u2460\u24ea"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-intersectionobserver-intersection-root\u2460\u2460"},{"id":"ref-for-intersectionobserver-intersection-root\u2460\u2461"},{"id":"ref-for-intersectionobserver-intersection-root\u2460\u2462"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"},{"refs":[{"id":"ref-for-intersectionobserver-intersection-root\u2460\u2463"},{"id":"ref-for-intersectionobserver-intersection-root\u2460\u2464"},{"id":"ref-for-intersectionobserver-intersection-root\u2460\u2465"},{"id":"ref-for-intersectionobserver-intersection-root\u2460\u2466"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#intersectionobserver-intersection-root"},
"intersectionobserver-root-intersection-rectangle": {"dfnID":"intersectionobserver-root-intersection-rectangle","dfnText":"root intersection rectangle","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver-root-intersection-rectangle"},{"id":"ref-for-intersectionobserver-root-intersection-rectangle\u2460"},{"id":"ref-for-intersectionobserver-root-intersection-rectangle\u2461"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-intersectionobserver-root-intersection-rectangle\u2462"},{"id":"ref-for-intersectionobserver-root-intersection-rectangle\u2463"},{"id":"ref-for-intersectionobserver-root-intersection-rectangle\u2464"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-intersectionobserver-root-intersection-rectangle\u2465"}],"title":"3.2.7. \nCompute the Intersection of a Target Element and the Root"},{"refs":[{"id":"ref-for-intersectionobserver-root-intersection-rectangle\u2466"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#intersectionobserver-root-intersection-rectangle"},
"intersectionobserver-same-origin-domain-target": {"dfnID":"intersectionobserver-same-origin-domain-target","dfnText":"same-origin-domain target","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver-same-origin-domain-target"},{"id":"ref-for-intersectionobserver-same-origin-domain-target\u2460"},{"id":"ref-for-intersectionobserver-same-origin-domain-target\u2461"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-intersectionobserver-same-origin-domain-target\u2462"}],"title":"2.3. \nThe IntersectionObserverEntry interface"}],"url":"#intersectionobserver-same-origin-domain-target"},
"intersectionobserver-target": {"dfnID":"intersectionobserver-target","dfnText":"target","external":false,"refSections":[],"url":"#intersectionobserver-target"},
"intersectionobserver-task-source": {"dfnID":"intersectionobserver-task-source","dfnText":"IntersectionObserver task source","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserver-task-source"}],"title":"3.2.4. \nQueue an Intersection Observer Task"}],"url":"#intersectionobserver-task-source"},
"intersectionobserverentry": {"dfnID":"intersectionobserverentry","dfnText":"IntersectionObserverEntry","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserverentry"}],"title":"2.1. \nThe IntersectionObserverCallback"},{"refs":[{"id":"ref-for-intersectionobserverentry\u2460"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-intersectionobserverentry\u2461"},{"id":"ref-for-intersectionobserverentry\u2462"}],"title":"2.3. \nThe IntersectionObserverEntry interface"},{"refs":[{"id":"ref-for-intersectionobserverentry\u2463"}],"title":"3.2.6. \nQueue an IntersectionObserverEntry"},{"refs":[{"id":"ref-for-intersectionobserverentry\u2464"}],"title":"3.4.2. Pending initial IntersectionObserver targets"}],"url":"#intersectionobserverentry"},
"intersectionobserverregistration": {"dfnID":"intersectionobserverregistration","dfnText":"IntersectionObserverRegistration","external":false,"refSections":[{"refs":[{"id":"ref-for-intersectionobserverregistration"}],"title":"2.2. \nThe IntersectionObserver interface"},{"refs":[{"id":"ref-for-intersectionobserverregistration\u2460"}],"title":"3.2.2. Observe a target Element"},{"refs":[{"id":"ref-for-intersectionobserverregistration\u2461"}],"title":"3.2.3. Unobserve a target Element"},{"refs":[{"id":"ref-for-intersectionobserverregistration\u2462"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#intersectionobserverregistration"},
"notify-intersection-observers": {"dfnID":"notify-intersection-observers","dfnText":"notify intersection observers","external":false,"refSections":[{"refs":[{"id":"ref-for-notify-intersection-observers"}],"title":"3.2.4. \nQueue an Intersection Observer Task"}],"url":"#notify-intersection-observers"},
"observe-a-target-element": {"dfnID":"observe-a-target-element","dfnText":"observe a target Element","external":false,"refSections":[{"refs":[{"id":"ref-for-observe-a-target-element"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"#observe-a-target-element"},
"parse-a-root-margin": {"dfnID":"parse-a-root-margin","dfnText":"parse a root margin","external":false,"refSections":[{"refs":[{"id":"ref-for-parse-a-root-margin"}],"title":"3.2.1. Initialize a new IntersectionObserver"}],"url":"#parse-a-root-margin"},
"pending-initial-intersectionobserver-targets": {"dfnID":"pending-initial-intersectionobserver-targets","dfnText":"pending initial IntersectionObserver targets","external":false,"refSections":[{"refs":[{"id":"ref-for-pending-initial-intersectionobserver-targets"}],"title":"3.4.2. Pending initial IntersectionObserver targets"}],"url":"#pending-initial-intersectionobserver-targets"},
"queue-an-intersection-observer-task": {"dfnID":"queue-an-intersection-observer-task","dfnText":"queue an intersection observer task","external":false,"refSections":[{"refs":[{"id":"ref-for-queue-an-intersection-observer-task"}],"title":"3.2.6. \nQueue an IntersectionObserverEntry"}],"url":"#queue-an-intersection-observer-task"},
"queue-an-intersectionobserverentry": {"dfnID":"queue-an-intersectionobserverentry","dfnText":"queue an IntersectionObserverEntry","external":false,"refSections":[{"refs":[{"id":"ref-for-queue-an-intersectionobserverentry"}],"title":"3.2.8. \nRun the Update Intersection Observations Steps"}],"url":"#queue-an-intersectionobserverentry"},
"run-the-update-intersection-observations-steps": {"dfnID":"run-the-update-intersection-observations-steps","dfnText":"run the update intersection observations steps","external":false,"refSections":[{"refs":[{"id":"ref-for-run-the-update-intersection-observations-steps"}],"title":"3.4.1. \nHTML Processing Model: Event Loop"}],"url":"#run-the-update-intersection-observations-steps"},
"unobserve-a-target-element": {"dfnID":"unobserve-a-target-element","dfnText":"unobserve a target Element","external":false,"refSections":[{"refs":[{"id":"ref-for-unobserve-a-target-element"}],"title":"2.2. \nThe IntersectionObserver interface"}],"url":"#unobserve-a-target-element"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#callbackdef-intersectionobservercallback": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"IntersectionObserverCallback","type":"callback","url":"#callbackdef-intersectionobservercallback"},
"#compute-the-intersection": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"compute the intersection","type":"dfn","url":"#compute-the-intersection"},
"#dictdef-intersectionobserverentryinit": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"IntersectionObserverEntryInit","type":"dictionary","url":"#dictdef-intersectionobserverentryinit"},
"#dictdef-intersectionobserverinit": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"IntersectionObserverInit","type":"dictionary","url":"#dictdef-intersectionobserverinit"},
"#document-intersectionobservertaskqueued": {"export":true,"for_":["Document"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"intersectionobservertaskqueued","type":"dfn","url":"#document-intersectionobservertaskqueued"},
"#dom-element-registeredintersectionobservers-slot": {"export":true,"for_":["Element"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"[[RegisteredIntersectionObservers]]","type":"attribute","url":"#dom-element-registeredintersectionobservers-slot"},
"#dom-intersectionobserver-callback-slot": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"[[callback]]","type":"attribute","url":"#dom-intersectionobserver-callback-slot"},
"#dom-intersectionobserver-disconnect": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"disconnect()","type":"method","url":"#dom-intersectionobserver-disconnect"},
"#dom-intersectionobserver-intersectionobserver": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"IntersectionObserver(callback, options)","type":"constructor","url":"#dom-intersectionobserver-intersectionobserver"},
"#dom-intersectionobserver-observationtargets-slot": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"[[ObservationTargets]]","type":"attribute","url":"#dom-intersectionobserver-observationtargets-slot"},
"#dom-intersectionobserver-observe": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"observe(target)","type":"method","url":"#dom-intersectionobserver-observe"},
"#dom-intersectionobserver-queuedentries-slot": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"[[QueuedEntries]]","type":"attribute","url":"#dom-intersectionobserver-queuedentries-slot"},
"#dom-intersectionobserver-root": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"root","type":"attribute","url":"#dom-intersectionobserver-root"},
"#dom-intersectionobserver-rootmargin": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"rootMargin","type":"attribute","url":"#dom-intersectionobserver-rootmargin"},
"#dom-intersectionobserver-rootmargin-slot": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"[[rootMargin]]","type":"attribute","url":"#dom-intersectionobserver-rootmargin-slot"},
"#dom-intersectionobserver-takerecords": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"takeRecords()","type":"method","url":"#dom-intersectionobserver-takerecords"},
"#dom-intersectionobserver-thresholds": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"thresholds","type":"attribute","url":"#dom-intersectionobserver-thresholds"},
"#dom-intersectionobserver-unobserve": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"unobserve(target)","type":"method","url":"#dom-intersectionobserver-unobserve"},
"#dom-intersectionobserverentry-boundingclientrect": {"export":true,"for_":["IntersectionObserverEntry"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"boundingClientRect","type":"attribute","url":"#dom-intersectionobserverentry-boundingclientrect"},
"#dom-intersectionobserverentry-intersectionratio": {"export":true,"for_":["IntersectionObserverEntry"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"intersectionRatio","type":"attribute","url":"#dom-intersectionobserverentry-intersectionratio"},
"#dom-intersectionobserverentry-intersectionrect": {"export":true,"for_":["IntersectionObserverEntry"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"intersectionRect","type":"attribute","url":"#dom-intersectionobserverentry-intersectionrect"},
"#dom-intersectionobserverentry-isintersecting": {"export":true,"for_":["IntersectionObserverEntry"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"isIntersecting","type":"attribute","url":"#dom-intersectionobserverentry-isintersecting"},
"#dom-intersectionobserverentry-rootbounds": {"export":true,"for_":["IntersectionObserverEntry"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"rootBounds","type":"attribute","url":"#dom-intersectionobserverentry-rootbounds"},
"#dom-intersectionobserverentry-target": {"export":true,"for_":["IntersectionObserverEntry"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"target","type":"attribute","url":"#dom-intersectionobserverentry-target"},
"#dom-intersectionobserverentry-time": {"export":true,"for_":["IntersectionObserverEntry"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"time","type":"attribute","url":"#dom-intersectionobserverentry-time"},
"#dom-intersectionobserverinit-root": {"export":true,"for_":["IntersectionObserverInit"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"root","type":"dict-member","url":"#dom-intersectionobserverinit-root"},
"#dom-intersectionobserverinit-rootmargin": {"export":true,"for_":["IntersectionObserverInit"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"rootMargin","type":"dict-member","url":"#dom-intersectionobserverinit-rootmargin"},
"#dom-intersectionobserverinit-threshold": {"export":true,"for_":["IntersectionObserverInit"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"threshold","type":"dict-member","url":"#dom-intersectionobserverinit-threshold"},
"#dom-intersectionobserverregistration-observer": {"export":true,"for_":["IntersectionObserverRegistration"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"observer","type":"attribute","url":"#dom-intersectionobserverregistration-observer"},
"#dom-intersectionobserverregistration-previousisintersecting": {"export":true,"for_":["IntersectionObserverRegistration"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"previousIsIntersecting","type":"attribute","url":"#dom-intersectionobserverregistration-previousisintersecting"},
"#dom-intersectionobserverregistration-previousthresholdindex": {"export":true,"for_":["IntersectionObserverRegistration"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"previousThresholdIndex","type":"attribute","url":"#dom-intersectionobserverregistration-previousthresholdindex"},
"#initialize-a-new-intersectionobserver": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"initialize a new intersectionobserver","type":"dfn","url":"#initialize-a-new-intersectionobserver"},
"#intersection-observer": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"intersection observer","type":"dfn","url":"#intersection-observer"},
"#intersection-observer-processing-model": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"processing model","type":"dfn","url":"#intersection-observer-processing-model"},
"#intersectionobserver": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"IntersectionObserver","type":"interface","url":"#intersectionobserver"},
"#intersectionobserver-cross-origin-domain-target": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"cross-origin-domain target","type":"dfn","url":"#intersectionobserver-cross-origin-domain-target"},
"#intersectionobserver-explicit-root-observer": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"explicit root observer","type":"dfn","url":"#intersectionobserver-explicit-root-observer"},
"#intersectionobserver-implicit-root": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"implicit root","type":"dfn","url":"#intersectionobserver-implicit-root"},
"#intersectionobserver-implicit-root-observer": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"implicit root observer","type":"dfn","url":"#intersectionobserver-implicit-root-observer"},
"#intersectionobserver-intersection-root": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"intersection root","type":"dfn","url":"#intersectionobserver-intersection-root"},
"#intersectionobserver-root-intersection-rectangle": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"root intersection rectangle","type":"dfn","url":"#intersectionobserver-root-intersection-rectangle"},
"#intersectionobserver-same-origin-domain-target": {"export":true,"for_":["IntersectionObserver"],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"same-origin-domain target","type":"dfn","url":"#intersectionobserver-same-origin-domain-target"},
"#intersectionobserver-task-source": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"intersectionobserver task source","type":"dfn","url":"#intersectionobserver-task-source"},
"#intersectionobserverentry": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"IntersectionObserverEntry","type":"interface","url":"#intersectionobserverentry"},
"#intersectionobserverregistration": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"IntersectionObserverRegistration","type":"interface","url":"#intersectionobserverregistration"},
"#notify-intersection-observers": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"notify intersection observers","type":"dfn","url":"#notify-intersection-observers"},
"#observe-a-target-element": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"observe a target element","type":"dfn","url":"#observe-a-target-element"},
"#parse-a-root-margin": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"parse a root margin","type":"dfn","url":"#parse-a-root-margin"},
"#pending-initial-intersectionobserver-targets": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"pending initial intersectionobserver targets","type":"dfn","url":"#pending-initial-intersectionobserver-targets"},
"#queue-an-intersection-observer-task": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"queue an intersection observer task","type":"dfn","url":"#queue-an-intersection-observer-task"},
"#queue-an-intersectionobserverentry": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"queue an intersectionobserverentry","type":"dfn","url":"#queue-an-intersectionobserverentry"},
"#run-the-update-intersection-observations-steps": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"run the update intersection observations steps","type":"dfn","url":"#run-the-update-intersection-observations-steps"},
"#unobserve-a-target-element": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"intersection-observer","status":"local","text":"unobserve a target element","type":"dfn","url":"#unobserve-a-target-element"},
"http://www.w3.org/TR/css-masking-1/#propdef-clip-path": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"clip-path","type":"dfn","url":"http://www.w3.org/TR/css-masking-1/#propdef-clip-path"},
"http://www.w3.org/TR/hr-time/#domhighrestimestamp": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"DOMHighResTimeStamp","type":"typedef","url":"http://www.w3.org/TR/hr-time/#domhighrestimestamp"},
"http://www.w3.org/TR/hr-time/#time-origin": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"time origin","type":"dfn","url":"http://www.w3.org/TR/hr-time/#time-origin"},
"https://dom.spec.whatwg.org/#dictdef-mutationobserverinit": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"MutationObserverInit","type":"dictionary","url":"https://dom.spec.whatwg.org/#dictdef-mutationobserverinit"},
"https://dom.spec.whatwg.org/#document": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#dom-mutationobserver-observe": {"export":true,"for_":["MutationObserver"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"observe(target)","type":"method","url":"https://dom.spec.whatwg.org/#dom-mutationobserver-observe"},
"https://dom.spec.whatwg.org/#element": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://dom.spec.whatwg.org/#mutationobserver": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"MutationObserver","type":"interface","url":"https://dom.spec.whatwg.org/#mutationobserver"},
"https://dom.spec.whatwg.org/#node": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Node","type":"interface","url":"https://dom.spec.whatwg.org/#node"},
"https://drafts.csswg.org/css-box-4/#propdef-margin": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-box","spec":"css-box-4","status":"current","text":"margin","type":"property","url":"https://drafts.csswg.org/css-box-4/#propdef-margin"},
"https://drafts.csswg.org/css-box/#containing-block": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"containing block","type":"dfn","url":"https://drafts.csswg.org/css-box/#containing-block"},
"https://drafts.csswg.org/css-box/#content-area": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"content area","type":"dfn","url":"https://drafts.csswg.org/css-box/#content-area"},
"https://drafts.csswg.org/css-display/#containing-block-chain": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"containing block chain","type":"dfn","url":"https://drafts.csswg.org/css-display/#containing-block-chain"},
"https://drafts.csswg.org/css-syntax-3/#parse-a-list-of-component-values": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-syntax","spec":"css-syntax-3","status":"current","text":"parse a list of component values","type":"dfn","url":"https://drafts.csswg.org/css-syntax-3/#parse-a-list-of-component-values"},
"https://drafts.csswg.org/css-values-3/#absolute-length": {"export":false,"for_":[],"level":"3","normative":true,"shortname":"css-values","spec":"css-values-3","status":"current","text":"absolute length","type":"dfn","url":"https://drafts.csswg.org/css-values-3/#absolute-length"},
"https://drafts.csswg.org/css-values-3/#dimension": {"export":true,"for_":[],"level":"3","normative":true,"shortname":"css-values","spec":"css-values-3","status":"current","text":"dimension","type":"dfn","url":"https://drafts.csswg.org/css-values-3/#dimension"},
"https://drafts.csswg.org/css-values-4/#percentage-value": {"export":true,"for_":[],"level":"4","normative":true,"shortname":"css-values","spec":"css-values-4","status":"current","text":"<percentage>","type":"type","url":"https://drafts.csswg.org/css-values-4/#percentage-value"},
"https://drafts.csswg.org/css2/visuren.html#viewport": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"viewport","type":"dfn","url":"https://drafts.csswg.org/css2/visuren.html#viewport"},
"https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"cssom-view","spec":"cssom-view-1","status":"current","text":"getBoundingClientRect()","type":"method","url":"https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect"},
"https://drafts.csswg.org/cssom-view-1/#pinch-zoom": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"pinch zoom","type":"dfn","url":"https://drafts.csswg.org/cssom-view-1/#pinch-zoom"},
"https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"geometry","spec":"geometry-1","status":"current","text":"DOMRectInit","type":"dictionary","url":"https://drafts.fxtf.org/geometry-1/#dictdef-domrectinit"},
"https://drafts.fxtf.org/geometry-1/#domrect": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"geometry","spec":"geometry-1","status":"current","text":"DOMRect","type":"interface","url":"https://drafts.fxtf.org/geometry-1/#domrect"},
"https://drafts.fxtf.org/geometry-1/#domrectreadonly": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"geometry","spec":"geometry-1","status":"current","text":"DOMRectReadOnly","type":"interface","url":"https://drafts.fxtf.org/geometry-1/#domrectreadonly"},
"https://heycam.github.io/webidl/#dfn-simple-exception": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"SyntaxError","type":"exception","url":"https://heycam.github.io/webidl/#dfn-simple-exception"},
"https://heycam.github.io/webidl/#dfn-throw": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"throw","type":"dfn","url":"https://heycam.github.io/webidl/#dfn-throw"},
"https://heycam.github.io/webidl/#idl-double": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"double","type":"interface","url":"https://heycam.github.io/webidl/#idl-double"},
"https://heycam.github.io/webidl/#idl-undefined": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"undefined","type":"interface","url":"https://heycam.github.io/webidl/#idl-undefined"},
"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"},
"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"browsing context container","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container"},
"https://html.spec.whatwg.org/multipage/browsers.html#fully-active": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"fully active","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#fully-active"},
"https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"list of the descendant browsing contexts","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts"},
"https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"nested browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context"},
"https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"same origin-domain","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain"},
"https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"top-level browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"},
"https://html.spec.whatwg.org/multipage/dom.html#document": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/dom.html#document"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#dfn-callback-this-value": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"callback this value","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#dfn-callback-this-value"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2": {"export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"document","type":"attribute","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2"},
"https://html.spec.whatwg.org/multipage/origin.html#origin": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/origin.html#origin"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"top-level origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"event loop","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"html processing model","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model"},
"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"queue a task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"},
"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"relevant settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"report the exception","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception"},
"https://html.spec.whatwg.org/multipage/webappapis.html#run-the-animation-frame-callbacks": {"export":true,"for_":[],"level":"","normative":true,"shortname":"intersection-observer","spec":"","status":"anchor-block","text":"run the animation frame callbacks","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#run-the-animation-frame-callbacks"},
"https://html.spec.whatwg.org/multipage/webappapis.html#task-source": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"task source","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#task-source"},
"https://webidl.spec.whatwg.org/#Exposed": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-frozen-array": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"FrozenArray","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-frozen-array"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>