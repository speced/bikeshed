<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>WebXR Layers API Level 1</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/TR/webxrlayers-1/" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
  <link href="favicon-96x96.png" rel="icon" sizes="96x96" type="image/png">
<style>
  .unstable::before {
    content: "This section is not stable";
    display: block;
    font-weight: bold;
    text-align: right;
    color: red;
  }
  .unstable {
    border: thin solid pink;
    border-radius: .5em;
    padding: .5em;
    margin: .5em calc(-0.5em - 1px);
    background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='290'><text transform='rotate(-45)' text-anchor='middle' font-family='sans-serif' font-weight='bold' font-size='70' y='210' opacity='.1'>Unstable</text></svg>");
    background-repeat: repeat;
    background-color: #FFF4F4;
  }
  .unstable h3:first-of-type {
    margin-top: 0.5rem;
  }

  .unstable.example:not(.no-marker)::before {
    content: "Example " counter(example) " (Unstable)";
    float: none;
  }

  .non-normative::before {
    content: "This section is non-normative.";
    font-style: italic;
  }
  .tg {
    border-collapse: collapse;
    border-spacing: 0;
  }
  .tg th {
    border-style: solid;
    border-width: 1px;
    background: #90b8de;
    color: #fff;
    font-family: sans-serif;
    font-weight: bold;
    border-color: grey;
  }
  .tg td {
    padding: 4px 5px;
    background-color: rgb(221, 238, 255);
    font-family: monospace;
    border-style: solid;
    border-width: 1px;
    border-color: grey;
    overflow: hidden;
    word-break: normal;
  }
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">WebXR Layers API Level 1</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://immersive-web.github.io/layers/">https://immersive-web.github.io/layers/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/webxrlayers-1/">https://www.w3.org/TR/webxrlayers-1/</a>
      <dt>Previous Versions:
      <dd><a href="https://www.w3.org/TR/2020/WD-webxrlayers-1-20201203/" rel="prev">https://www.w3.org/TR/2020/WD-webxrlayers-1-20201203/</a>
      <dt class="editor">Editor:
      <dd class="editor p-author h-card vcard" data-editor-id="106988"><a class="p-name fn u-email email" href="mailto:cabanier@fb.com">Rik Cabanier</a> (<a class="p-org org" href="https://oculus.com">Facebook</a>)
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span><a class="self-link" href="#abstract"></a></h2>
   <p>This specification describes support for various layer types used in a WebXR session.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this
    technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical
    reports index</a> at http://www.w3.org/TR/.</em> </p>
   <p> This document was published by the <a href="https://www.w3.org/groups/wg/immersive-web">Immersive Web Working Group</a> as an Editors' Draft. This document is intended to become a W3C Recommendation.

    Feedback and comments on this specification are welcome. Please use <a href="https://github.com/immersive-web/layers/issues">Github issues</a>.
    Discussions may also be found in the <a href="http://lists.w3.org/Archives/Public/public-immersive-web-wg/">public-immersive-web-wg@w3.org archives</a>. </p>
   <p> Publication as an Editors' Draft does not imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. This is a draft document and may
    be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite
    this document as other than work in progress. </p>
   <p> This document was produced by a group operating under the <a href="https://www.w3.org/policies/patent-policy/">W3C Patent Policy</a>.
    W3C maintains a <a href="https://www.w3.org/groups/wg/immersive-web/ipr" rel="disclosure">public list of any patent
    disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential
    Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section
    6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref heading settled" id="contents"><span class="content">Table of Contents</span></h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#terminology"><span class="secno">1.1</span> <span class="content">Terminology</span></a>
      <li><a href="#applicationflow"><span class="secno">1.2</span> <span class="content">Application flow</span></a>
     </ol>
    <li><a href="#initialization"><span class="secno">2</span> <span class="content">Initialization</span></a>
    <li>
     <a href="#xrlayertypes"><span class="secno">3</span> <span class="content">Layer types</span></a>
     <ol class="toc">
      <li><a href="#monovsstereo"><span class="secno">3.1</span> <span class="content">Mono and stereo layers</span></a>
      <li><a href="#xrlayerlayouttype"><span class="secno">3.2</span> <span class="content">XRLayerLayout</span></a>
      <li><a href="#xrcompositionlayertype"><span class="secno">3.3</span> <span class="content">XRCompositionLayer</span></a>
      <li><a href="#xrprojectionlayertype"><span class="secno">3.4</span> <span class="content">XRProjectionLayer</span></a>
      <li><a href="#xrquadlayertype"><span class="secno">3.5</span> <span class="content">XRQuadLayer</span></a>
      <li><a href="#xrcylinderayertype"><span class="secno">3.6</span> <span class="content">XRCylinderLayer</span></a>
      <li><a href="#xrequirectlayertype"><span class="secno">3.7</span> <span class="content">XREquirectLayer</span></a>
      <li><a href="#xcubelayertype"><span class="secno">3.8</span> <span class="content">XRCubeLayer</span></a>
     </ol>
    <li><a href="#spaces"><span class="secno">4</span> <span class="content">Spaces</span></a>
    <li>
     <a href="#rendering"><span class="secno">5</span> <span class="content">Rendering</span></a>
     <ol class="toc">
      <li><a href="#xrsubimagetype"><span class="secno">5.1</span> <span class="content">XRSubImage</span></a>
      <li><a href="#xrwebglsubimagetype"><span class="secno">5.2</span> <span class="content">XRWebGLSubImage</span></a>
      <li><a href="#xrtexturetype"><span class="secno">5.3</span> <span class="content">XRTextureType</span></a>
     </ol>
    <li>
     <a href="#gpulayer"><span class="secno">6</span> <span class="content">GPU layer and view creation</span></a>
     <ol class="toc">
      <li><a href="#xrgpulayeroverview"><span class="secno">6.1</span> <span class="content">Overview</span></a>
      <li><a href="#xropaquetextures"><span class="secno">6.2</span> <span class="content">Opaque textures</span></a>
      <li><a href="#xrprojectionlayerinittype"><span class="secno">6.3</span> <span class="content">XRProjectionLayerInit</span></a>
      <li><a href="#xrlayerinittype"><span class="secno">6.4</span> <span class="content">XRLayerInit</span></a>
      <li><a href="#xrquadlayerinit"><span class="secno">6.5</span> <span class="content">XRQuadLayerInit</span></a>
      <li><a href="#xrcylinderlayerinit"><span class="secno">6.6</span> <span class="content">XRCylinderLayerInit</span></a>
      <li><a href="#xrequirectlayerinit"><span class="secno">6.7</span> <span class="content">XREquirectLayerInit</span></a>
      <li><a href="#xrcubelayerinit"><span class="secno">6.8</span> <span class="content">XRCubeLayerInit</span></a>
      <li><a href="#XRWebGLBindingtype"><span class="secno">6.9</span> <span class="content">XRWebGLBinding</span></a>
     </ol>
    <li>
     <a href="#videolayer"><span class="secno">7</span> <span class="content">Video layer creation</span></a>
     <ol class="toc">
      <li><a href="#xrmedialayerinittype"><span class="secno">7.1</span> <span class="content">XRMediaLayerInit</span></a>
      <li><a href="#xrmediaquadlayerinittype"><span class="secno">7.2</span> <span class="content">XRMediaQuadLayerInit</span></a>
      <li><a href="#xrmediacylinderlayerinittype"><span class="secno">7.3</span> <span class="content">XRMediaCylinderLayerInit</span></a>
      <li><a href="#xrmediaequirectlayerinittype"><span class="secno">7.4</span> <span class="content">XRMediaEquirectLayerInit</span></a>
      <li><a href="#xrmediabindingtype"><span class="secno">7.5</span> <span class="content">XRMediaBinding</span></a>
     </ol>
    <li>
     <a href="#events"><span class="secno">8</span> <span class="content">Events</span></a>
     <ol class="toc">
      <li><a href="#xrlayerevent-interface"><span class="secno">8.1</span> <span class="content">XRLayerEvent</span></a>
      <li><a href="#event-types"><span class="secno">8.2</span> <span class="content">Event Types</span></a>
     </ol>
    <li>
     <a href="#webxrintegration"><span class="secno">9</span> <span class="content">WebXR Device API Integration</span></a>
     <ol class="toc">
      <li><a href="#xrrenderstatechanges"><span class="secno">9.1</span> <span class="content">XRRenderState changes</span></a>
      <li><a href="#updaterenderstatechanges"><span class="secno">9.2</span> <span class="content">updateRenderState changes</span></a>
      <li><a href="#xrcompositorchanges"><span class="secno">9.3</span> <span class="content">XRCompositor changes</span></a>
      <li><a href="#xrviewchanges"><span class="secno">9.4</span> <span class="content">XRView changes</span></a>
      <li><a href="#animationframeschanges"><span class="secno">9.5</span> <span class="content">Animation frames changes</span></a>
     </ol>
    <li>
     <a href="#security"><span class="secno">10</span> <span class="content">Security and Privacy Considerations</span></a>
     <ol class="toc">
      <li><a href="#xrcompositiontiming"><span class="secno">10.1</span> <span class="content">Timing of the composition</span></a>
      <li><a href="#xrlayerallocation"><span class="secno">10.2</span> <span class="content">Allocation of layers</span></a>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> </a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> </a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> </a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <section class="non-normative">
    <p>The spec adds support of `composition` layers to the WebXR spec. The benefits of layers are as follows:</p>
    <ul>
     <li data-md>
      <p><b>Performance and judder</b> Composition layers are presented at the frame rate of the compositor (i.e. native refresh rate of HMD) rather than at the application frame rate.
Even when the application is not updating the layer’s rendering at the native refresh rate of the compositor, the compositor might be able to re-project the existing
rendering to the proper pose. This results in smoother rendering and less judder. Another feature of layers is that each of them can have different resolution. This allows the
application to scale down the main eye buffer resolution on low performance systems, but keeping essential information, such as text or a map, in its own layer at a higher
resolution.</p>
     <li data-md>
      <p><b>Legibility/visual fidelity</b> The resolution for eye-buffers for 3D world rendering can be set to relatively low values especially on low performance systems. It would
be impossible to render high fidelity content, such as text, in this case. Each layer may have its own resolution and it will be re-sampled only once by the compositor (in contrary
to the traditional approach with rendering layers via WebGL where the layer’s content got re-sampled at least twice: once when rendering into WebGL
eye-buffer (and losing a lot of details due to limited eye-buffer resolution) and the second time by the compositor).</p>
     <li data-md>
      <p><b>Power consumption / battery life</b> Due to reduced rendering pipeline, the lack of double sampling and no need to update the layer’s rendering each frame, the power
consumption is expected to be improved.</p>
     <li data-md>
      <p><b>Latency</b> Pose sampling for composition layers may occur at the very end of the frame and then certain reprojection techniques could be used to update the layer’s pose to
match it with the most recent HMD pose. This may significantly reduce the effective latency for the layers' rendering and as a result improve overall experience.</p>
    </ul>
    <p class="issue" id="issue-f8fc5b4f"><a class="self-link" href="#issue-f8fc5b4f"></a> how to do hit testing? Should it be done by the UA?</p>
   </section>
   <h3 class="heading settled" data-level="1.1" id="terminology"><span class="secno">1.1. </span><span class="content">Terminology</span><a class="self-link" href="#terminology"></a></h3>
   <h3 class="heading settled" data-level="1.2" id="applicationflow"><span class="secno">1.2. </span><span class="content">Application flow</span><a class="self-link" href="#applicationflow"></a></h3>
   <section class="non-normative">
    <p>If an author wants to use GL layers, they have to go through these steps:</p>
    <ol>
     <li data-md>
      <p>For any layer type other than <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer">XRProjectionLayer</a></code> request support through <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrpermissiondescriptor-requiredfeatures" id="ref-for-dom-xrpermissiondescriptor-requiredfeatures">requiredFeatures</a></code> or <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrpermissiondescriptor-optionalfeatures" id="ref-for-dom-xrpermissiondescriptor-optionalfeatures">optionalFeatures</a></code> in <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsystem-requestsession" id="ref-for-dom-xrsystem-requestsession">requestSession()</a></code>.</p>
     <li data-md>
      <p>Create an <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding">XRWebGLBinding</a></code> or <code class="idl"><a data-link-type="idl" href="#xrmediabinding" id="ref-for-xrmediabinding">XRMediaBinding</a></code>.</p>
     <li data-md>
      <p>Create layers with these objects.</p>
     <li data-md>
      <p>Add the layers to <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dictdef-xrrenderstateinit" id="ref-for-dictdef-xrrenderstateinit">XRRenderStateInit</a></code> and call <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-updaterenderstate" id="ref-for-dom-xrsession-updaterenderstate">updateRenderState()</a></code>.</p>
     <li data-md>
      <p>During <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-requestanimationframe" id="ref-for-dom-xrsession-requestanimationframe">requestAnimationFrame()</a></code> for webgl layers, draw content each WebGL layer.</p>
    </ol>
   </section>
   <h2 class="heading settled" data-level="2" id="initialization"><span class="secno">2. </span><span class="content">Initialization</span><a class="self-link" href="#initialization"></a></h2>
   <p>If an application wants to create layers other than of type <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①">XRProjectionLayer</a></code> during a session,
the session MUST be requested with an appropriate <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#feature-descriptor" id="ref-for-feature-descriptor">feature descriptor</a>. The string "<dfn class="dfn-paneled" data-dfn-for="feature descriptor" data-dfn-type="dfn" data-noexport id="feature-descriptor-layers">layers</dfn>" is introduced
by this module as a new valid <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#feature-descriptor" id="ref-for-feature-descriptor①">feature descriptor</a> for the WebXR Layers feature.</p>
   <p>Layers of type <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer②">XRProjectionLayer</a></code> MUST always be supported, regardless if the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#feature-descriptor" id="ref-for-feature-descriptor②">feature descriptor</a> was requested.</p>
   <div class="example" id="example-3a50cd84">
    <a class="self-link" href="#example-3a50cd84"></a> The following code requests layers as an optional feature. 
<pre class="highlight">navigator<c- p>.</c->xr<c- p>.</c->requestSession<c- p>(</c-><c- t>'immersive-vr'</c-><c- p>,</c-> <c- p>{</c->
    optionalFeatures<c- o>:</c-> <c- p>[</c-><c- t>'layers'</c-><c- p>]</c->
  <c- p>}</c->
</pre>
   </div>
   <p>Layers are only supported for XRSessions created with XRSessionMode of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsessionmode-immersive-vr" id="ref-for-dom-xrsessionmode-immersive-vr">"immersive-vr"</a></code> or <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr-ar-module/#dom-xrsessionmode-immersive-ar" id="ref-for-dom-xrsessionmode-immersive-ar">"immersive-ar"</a></code>. <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsessionmode-inline" id="ref-for-dom-xrsessionmode-inline">"inline"</a></code> sessions MUST not support layers.</p>
   <p>The "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers">layers</a>" <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#feature-descriptor" id="ref-for-feature-descriptor③">feature descriptor</a> has a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#feature-requirements" id="ref-for-feature-requirements">feature requirement</a> that it cannot be enabled when there is an <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#active-immersive-session" id="ref-for-active-immersive-session">active immersive session</a>.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> This means that executing the <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/permissions-request/#dom-permissions-request" id="ref-for-dom-permissions-request">request(permissionDesc)</a></code> API with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers①">layers</a>" will
not enable layers support for the current active session.</p>
   <h2 class="heading settled" data-level="3" id="xrlayertypes"><span class="secno">3. </span><span class="content">Layer types</span><a class="self-link" href="#xrlayertypes"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="monovsstereo"><span class="secno">3.1. </span><span class="content">Mono and stereo layers</span><a class="self-link" href="#monovsstereo"></a></h3>
    A stereo layer MUST supply an <code class="idl"><a data-link-type="idl" href="#xrsubimage" id="ref-for-xrsubimage">XRSubImage</a></code> to render to for each view. 
   <p>A mono layer MUST supply a single <code class="idl"><a data-link-type="idl" href="#xrsubimage" id="ref-for-xrsubimage①">XRSubImage</a></code> which is shown to each view.</p>
   <p>The <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor">XR Compositor</a> MUST ensure that layers are presented correctly in stereo to the observer.</p>
   <h3 class="heading settled" data-level="3.2" id="xrlayerlayouttype"><span class="secno">3.2. </span><span class="content">XRLayerLayout</span><a class="self-link" href="#xrlayerlayouttype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout">XRLayerLayout</a></code> enum defines the layout of the layer. 
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-xrlayerlayout"><code><c- g>XRLayerLayout</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default"><c- s>"default"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono"><c- s>"mono"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-stereo" id="ref-for-dom-xrlayerlayout-stereo"><c- s>"stereo"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right"><c- s>"stereo-left-right"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom"><c- s>"stereo-top-bottom"</c-></a>
};
</pre>
   <ul>
    <li data-md>
     <p>A layout of <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerLayout" data-dfn-type="enum-value" data-export data-lt="&quot;default&quot;|default" id="dom-xrlayerlayout-default"><code>default</code></dfn> indicates that the layer can accomodate all the views of session’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views">list of views</a>.</p>
    <li data-md>
     <p>A layout of <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerLayout" data-dfn-type="enum-value" data-export data-lt="&quot;mono&quot;|mono" id="dom-xrlayerlayout-mono"><code>mono</code></dfn> indicates that the layer is mono.</p>
    <li data-md>
     <p>A layout of <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerLayout" data-dfn-type="enum-value" data-export data-lt="&quot;stereo&quot;|stereo" id="dom-xrlayerlayout-stereo"><code>stereo</code></dfn> indicates that the layer is stereo.</p>
    <li data-md>
     <p>A layout of <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerLayout" data-dfn-type="enum-value" data-export data-lt="&quot;stereo-left-right&quot;|stereo-left-right" id="dom-xrlayerlayout-stereo-left-right"><code>stereo-left-right</code></dfn> indicates that the layer is stereo and divided left to right.</p>
    <li data-md>
     <p>A layout of <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerLayout" data-dfn-type="enum-value" data-export data-lt="&quot;stereo-top-bottom&quot;|stereo-top-bottom" id="dom-xrlayerlayout-stereo-top-bottom"><code>stereo-top-bottom</code></dfn> indicates that the layer is stereo and divided top to bottom.</p>
   </ul>
   <p class="note" role="note"><span class="marker">NOTE:</span> If an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer">XRCompositionLayer</a></code> is created with a <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①">"default"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo" id="ref-for-dom-xrlayerlayout-stereo①">"stereo"</a></code> <code class="idl"><a data-link-type="idl" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout①">XRLayerLayout</a></code>, it is highly recommended
that it is allocated with an <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array">"texture-array"</a></code> texture type.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right①">"stereo-left-right"</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom①">"stereo-top-bottom"</a></code> layouts are designed to minimize draw
calls for content that is already in stereo (for example stereo videos or images). Experiences that don’t require such assets types
should use the <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default②">"default"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo" id="ref-for-dom-xrlayerlayout-stereo②">"stereo"</a></code> layout.</p>
   <h3 class="heading settled" data-level="3.3" id="xrcompositionlayertype"><span class="secno">3.3. </span><span class="content">XRCompositionLayer</span><a class="self-link" href="#xrcompositionlayertype"></a></h3>
    XRCompositionLayer defines a set of common attributes and behaviors across certain layer types. 
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrcompositionlayer"><code><c- g>XRCompositionLayer</c-></code></dfn> : <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer"><c- n>XRLayer</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout②"><c- n>XRLayerLayout</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="XRLayerLayout" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout"><c- g>layout</c-></a>;

  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-type="boolean" href="#dom-xrcompositionlayer-blendtexturesourcealpha" id="ref-for-dom-xrcompositionlayer-blendtexturesourcealpha"><c- g>blendTextureSourceAlpha</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a>? <a class="idl-code" data-link-type="attribute" data-type="boolean?" href="#dom-xrcompositionlayer-chromaticaberrationcorrection" id="ref-for-dom-xrcompositionlayer-chromaticaberrationcorrection"><c- g>chromaticAberrationCorrection</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrcompositionlayer-miplevels" id="ref-for-dom-xrcompositionlayer-miplevels"><c- g>mipLevels</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw"><c- g>needsRedraw</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRCompositionLayer" data-dfn-type="method" data-export data-lt="destroy()" id="dom-xrcompositionlayer-destroy"><code><c- g>destroy</c-></code></dfn>();
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCompositionLayer" data-dfn-type="attribute" data-export id="dom-xrcompositionlayer-layout"><code>layout</code></dfn> attribute returns the layout of the layer.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCompositionLayer" data-dfn-type="attribute" data-export id="dom-xrcompositionlayer-blendtexturesourcealpha"><code>blendTextureSourceAlpha</code></dfn> attribute enables the layer’s texture alpha channel.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCompositionLayer" data-dfn-type="attribute" data-export id="dom-xrcompositionlayer-chromaticaberrationcorrection"><code>chromaticAberrationCorrection</code></dfn> attribute is a hint for the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①">XR Compositor</a> to
enable optical chromatic aberration correction for the layer. If the user agent or device does not support this attribute, they
should return <code>null</code> on getting, and setting should be a <code>no-op</code>.
If the <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-chromaticaberrationcorrection" id="ref-for-dom-xrcompositionlayer-chromaticaberrationcorrection①">chromaticAberrationCorrection</a></code> was changed, it will take effect at the next <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrframe" id="ref-for-xrframe">XRFrame</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCompositionLayer" data-dfn-type="attribute" data-export id="dom-xrcompositionlayer-needsredraw"><code>needsRedraw</code></dfn> attribute signals that the <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①">XRCompositionLayer</a></code> should be
rerendered in the next <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xr-animation-frame" id="ref-for-xr-animation-frame">XR animation frame</a>. It MAY be set when <a data-link-type="dfn" href="#the-underlying-resources-of-a-layer-are-lost" id="ref-for-the-underlying-resources-of-a-layer-are-lost">the underlying resources of a layer are lost</a> or
when the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②">XR Compositor</a> can no longer reproject the layer. Failing to redraw the content in the next <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xr-animation-frame" id="ref-for-xr-animation-frame①">XR animation frame</a> might cause flickering or other side effects.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCompositionLayer" data-dfn-type="attribute" data-export id="dom-xrcompositionlayer-miplevels"><code>mipLevels</code></dfn> attribute returns the depth of the mip chain. This MUST be equal
or smaller than the value requested in <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels">mipLevels</a></code>.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> some platforms don’t support mip levels. Authors should query <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-miplevels" id="ref-for-dom-xrcompositionlayer-miplevels①">mipLevels</a></code> to determine if they can
target a certain mip level and not rely on the value they passed in <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①">mipLevels</a></code>.</p>
   <div class="algorithm" data-algorithm="redrawLayerAlgo">
     When <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="the-underlying-resources-of-a-layer-are-lost">the underlying resources of a layer are lost</dfn> for an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②">XRCompositionLayer</a></code> <var>layer</var>,
the user agent MUST run the following steps: 
    <ol>
     <li data-md>
      <p>Set <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw①">needsRedraw</a></code> to <code>true</code>.</p>
     <li data-md>
      <p>If <var>layer</var> is not an <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer③">XRProjectionLayer</a></code>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">queue a task</a> to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">fire an event</a> named <code class="idl"><a data-link-type="idl" href="#eventdef-xrlayer-redraw" id="ref-for-eventdef-xrlayer-redraw">redraw</a></code> on <var>layer</var>.</p>
    </ol>
   </div>
   <p><code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-destroy" id="ref-for-dom-xrcompositionlayer-destroy">destroy()</a></code> will delete the underlying attachments. If there are no attachments, this function does nothing.</p>
   <div class="algorithm" data-algorithm="intialization of a composition layer">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="intialize-a-composition-layer">intialize a composition layer</dfn> with a <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession">XRSession</a></code> <var>session</var> and an optional instance of a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext">WebGLRenderingContext</a></code> or a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext" id="ref-for-WebGL2RenderingContext">WebGL2RenderingContext</a></code> <var>context</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a> <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session">session</a> to <var>session</var>.</p>
     <li data-md>
      <p>If <var>context</var> is defined, set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a> <a data-link-type="dfn" href="#xrcompositionlayer-context" id="ref-for-xrcompositionlayer-context">context</a> to <var>context</var>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a> <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-blendtexturesourcealpha" id="ref-for-dom-xrcompositionlayer-blendtexturesourcealpha①">blendTextureSourceAlpha</a></code> to <code>true</code>.</p>
     <li data-md>
      <p>Initialize <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a> <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-chromaticaberrationcorrection" id="ref-for-dom-xrcompositionlayer-chromaticaberrationcorrection②">chromaticAberrationCorrection</a></code> as follows:</p>
      <dl class="switch">
       <dt class="switch">If the user agent supports chromatic aberration correction 
       <dd> Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a> <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-chromaticaberrationcorrection" id="ref-for-dom-xrcompositionlayer-chromaticaberrationcorrection③">chromaticAberrationCorrection</a></code> to <code>true</code> or <code>false</code> depending on the user agent’s preference. 
       <dt> Otherwise 
       <dd> Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a> <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-chromaticaberrationcorrection" id="ref-for-dom-xrcompositionlayer-chromaticaberrationcorrection④">chromaticAberrationCorrection</a></code> to <code>null</code>. 
      </dl>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="calling destroy on a layer">
    <p>When calling <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-destroy" id="ref-for-dom-xrcompositionlayer-destroy①">destroy()</a></code>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a> <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures">colorTextures</a> array to an empty array.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a> <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures">depthStencilTextures</a> array to an empty array.</p>
     <li data-md>
      <p>Destroy the underlying GL attachments.</p>
    </ol>
   </div>
   <p>Each <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer③">XRCompositionLayer</a></code> has a <dfn class="dfn-paneled" data-dfn-for="XRCompositionLayer" data-dfn-type="dfn" data-noexport id="xrcompositionlayer-context">context</dfn> object which is an instance
of either null or a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext①">WebGLRenderingContext</a></code> or a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext" id="ref-for-WebGL2RenderingContext①">WebGL2RenderingContext</a></code> and a <dfn class="dfn-paneled" data-dfn-for="XRCompositionLayer" data-dfn-type="dfn" data-noexport id="xrcompositionlayer-media">media</dfn> object which is an instance of null or a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement" id="ref-for-htmlvideoelement">HTMLVideoElement</a></code>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer④">XRCompositionLayer</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="XRCompositionLayer" data-dfn-type="dfn" data-noexport id="xrcompositionlayer-session">session</dfn>, which is the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession①">XRSession</a></code> it was created with.</p>
   <div class="algorithm" data-algorithm="setting the space on a layer">
    <p>When <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="setting-the-space-on-a-layer">setting the space on a layer</dfn> with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace">XRSpace</a></code> <var>space</var> and <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer⑤">XRCompositionLayer</a></code> <var>layer</var>, the user agent MUST run the following steps to validate if the <var>space</var> is valid:</p>
    <ol>
     <li data-md>
      <p>If <var>space</var> is <code>null</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>space</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrspace-session" id="ref-for-xrspace-session">session</a> is not equal to the <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session①">session</a>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code> and abort these steps.</p>
    </ol>
   </div>
   <p><code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer⑥">XRCompositionLayer</a></code> has an internal boolean <dfn class="dfn-paneled" data-dfn-for="XRCompositionLayer" data-dfn-type="dfn" data-noexport id="xrcompositionlayer-isstatic">isStatic</dfn> that indicates that the author can only draw
to this layer when <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw②">needsRedraw</a></code> is <code>true</code>.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> if <a data-link-type="dfn" href="#xrcompositionlayer-isstatic" id="ref-for-xrcompositionlayer-isstatic">isStatic</a> is <code>true</code> the author can only draw into the layer once after creation or once after
a redraw event. This allows the UA to only allocate a single GPU buffer.</p>
   <p>When a writeable attribute is set on an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer⑦">XRCompositionLayer</a></code> or any of its derived classes,
reading that attribute MUST return that value.
At the end of the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-requestanimationframe" id="ref-for-dom-xrsession-requestanimationframe①">requestAnimationFrame()</a></code> callback, the value MUST be sent to
the underlying <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor③">XR Compositor</a>. The <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor④">XR Compositor</a> MUST apply the value next time it presents
the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrframe" id="ref-for-xrframe①">XRFrame</a></code> that was passed to the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-requestanimationframe" id="ref-for-dom-xrsession-requestanimationframe②">requestAnimationFrame()</a></code> callback.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> this means that the values must be applied when the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor⑤">XR Compositor</a> redraws the scene using
the new <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrframe" id="ref-for-xrframe②">XRFrame</a></code>, even if there was no change in the <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture">colorTexture</a></code> associated
with the <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer⑧">XRCompositionLayer</a></code> or the videoframe associated with a media layer. If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor⑥">XR Compositor</a> redraws the scene with the previous <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrframe" id="ref-for-xrframe③">XRFrame</a></code>’s state, it must not use the new
values.</p>
   <h3 class="heading settled" data-level="3.4" id="xrprojectionlayertype"><span class="secno">3.4. </span><span class="content">XRProjectionLayer</span><a class="self-link" href="#xrprojectionlayertype"></a></h3>
    An <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer④">XRProjectionLayer</a></code> is a layer that fills the entire view of the observer.
Projection layers should be refreshed close to the device’s native frame rate. 
   <p><img alt="representation of a projection layer" src="images/projection-layer.jpg" style="width:50%; border-style: ridge;"></p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrprojectionlayer"><code><c- g>XRProjectionLayer</c-></code></dfn> : <a data-link-type="idl-name" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer⑨"><c- n>XRCompositionLayer</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long①"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrprojectionlayer-texturewidth" id="ref-for-dom-xrprojectionlayer-texturewidth"><c- g>textureWidth</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long②"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrprojectionlayer-textureheight" id="ref-for-dom-xrprojectionlayer-textureheight"><c- g>textureHeight</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long③"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrprojectionlayer-texturearraylength" id="ref-for-dom-xrprojectionlayer-texturearraylength"><c- g>textureArrayLength</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-xrprojectionlayer-ignoredepthvalues" id="ref-for-dom-xrprojectionlayer-ignoredepthvalues"><c- g>ignoreDepthValues</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float"><c- b>float</c-></a>? <a class="idl-code" data-link-type="attribute" data-type="float?" href="#dom-xrprojectionlayer-fixedfoveation" id="ref-for-dom-xrprojectionlayer-fixedfoveation"><c- g>fixedFoveation</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayer" data-dfn-type="attribute" data-export id="dom-xrprojectionlayer-texturewidth"><code>textureWidth</code></dfn> attribute returns the width in pixels of
the <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures①">colorTextures</a> textures of this layer.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayer" data-dfn-type="attribute" data-export id="dom-xrprojectionlayer-textureheight"><code>textureHeight</code></dfn> attribute returns the height in pixels of
the <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures②">colorTextures</a> textures of this layer.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayer" data-dfn-type="attribute" data-export id="dom-xrprojectionlayer-texturearraylength"><code>textureArrayLength</code></dfn> attribute returns the number of layers of
the <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures③">colorTextures</a> textures of this layer if the <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer⑤">XRProjectionLayer</a></code> was initialized with a <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-texturetype" id="ref-for-dom-xrprojectionlayerinit-texturetype">textureType</a></code> of <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array①">"texture-array"</a></code>. Otherwise it will return <code>1</code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayer" data-dfn-type="attribute" data-export id="dom-xrprojectionlayer-fixedfoveation"><code>fixedFoveation</code></dfn> attribute controls the amount of foveation used by the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor⑦">XR Compositor</a>. If the user agent or device does not support this attribute, they
should return <code>null</code> on getting, and setting should be a <code>no-op</code>.
Setting <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayer-fixedfoveation" id="ref-for-dom-xrprojectionlayer-fixedfoveation①">fixedFoveation</a></code> to a value less than <code>0</code> will set it to <code>0</code> and setting it to
a value higher than <code>1</code> will set it to <code>1</code>. <code>0</code> sets the minimum amount of foveation while <code>1</code> set the maximum. It is up to the user agent how the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor⑧">XR Compositor</a> interprets these values.
If the <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayer-fixedfoveation" id="ref-for-dom-xrprojectionlayer-fixedfoveation②">fixedFoveation</a></code> level was changed, it will take effect at the next <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrframe" id="ref-for-xrframe④">XRFrame</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayer" data-dfn-type="attribute" data-export id="dom-xrprojectionlayer-ignoredepthvalues"><code>ignoreDepthValues</code></dfn> attribute, if <code>true</code>, indicates that the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor⑨">XR Compositor</a> MUST NOT make use of values in the depth buffer attachment when rendering. When the attribute
is <code>false</code> it indicates that the content of the depth buffer attachment will be used by the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①⓪">XR Compositor</a> and is expected to be representative of the scene rendered into the layer.</p>
   <h3 class="heading settled" data-level="3.5" id="xrquadlayertype"><span class="secno">3.5. </span><span class="content">XRQuadLayer</span><a class="self-link" href="#xrquadlayertype"></a></h3>
    An <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer">XRQuadLayer</a></code> renders a layer that takes up a flat rectangular space in the virtual environment.
Only the front of the layer MUST be visible; the back face MUST not be drawn by the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①①">XR Compositor</a>. 
   <p>A XRQuadLayer has no thicknes. It is a two-dimensional object positioned and oriented in 3D space. The position
of a quad refers to the center of the quad.</p>
   <p><img alt="representation of a quad layer" src="images/quad-layer.jpg" style="width:50%; border-style: ridge;"></p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrquadlayer"><code><c- g>XRQuadLayer</c-></code></dfn> : <a data-link-type="idl-name" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①⓪"><c- n>XRCompositionLayer</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace①"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRSpace" href="#dom-xrquadlayer-space" id="ref-for-dom-xrquadlayer-space"><c- g>space</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform"><c- n>XRRigidTransform</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRRigidTransform" href="#dom-xrquadlayer-transform" id="ref-for-dom-xrquadlayer-transform"><c- g>transform</c-></a>;

  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrquadlayer-width" id="ref-for-dom-xrquadlayer-width"><c- g>width</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrquadlayer-height" id="ref-for-dom-xrquadlayer-height"><c- g>height</c-></a>;

  // Events
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-xrquadlayer-onredraw" id="ref-for-dom-xrquadlayer-onredraw"><c- g>onredraw</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRQuadLayer" data-dfn-type="attribute" data-export id="dom-xrquadlayer-transform"><code>transform</code></dfn> attributes sets and returns the offset and orientation relative to the <dfn class="dfn-paneled idl-code" data-dfn-for="XRQuadLayer" data-dfn-type="attribute" data-export id="dom-xrquadlayer-space"><code>space</code></dfn> attribute. The <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-transform" id="ref-for-dom-xrquadlayer-transform①">transform</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-space" id="ref-for-dom-xrquadlayer-space①">space</a></code> attributes
establish the spatial relationship of the layer within the user’s physical environment.
When setting the <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-space" id="ref-for-dom-xrquadlayer-space②">space</a></code>, first run the steps for <a data-link-type="dfn" href="#setting-the-space-on-a-layer" id="ref-for-setting-the-space-on-a-layer">setting the space on a layer</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRQuadLayer" data-dfn-type="attribute" data-export id="dom-xrquadlayer-width"><code>width</code></dfn> and <dfn class="dfn-paneled idl-code" data-dfn-for="XRQuadLayer" data-dfn-type="attribute" data-export id="dom-xrquadlayer-height"><code>height</code></dfn> attributes
set and return the width and height of the layer in meters.</p>
   <div class="algorithm" data-algorithm="initQuadLayerAlgo">
     When <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="initialize a quad layer" data-noexport id="initialize-a-quad-layer">initializing an <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer①">XRQuadLayer</a></code> <var>layer</var> with an <code class="idl"><a data-link-type="idl" href="#dictdef-xrquadlayerinit" id="ref-for-dictdef-xrquadlayerinit">XRQuadLayerInit</a></code> <var>init</var></dfn>, the user agent MUST run the following steps: 
    <ol>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-width" id="ref-for-dom-xrquadlayer-width①">width</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayerinit-width" id="ref-for-dom-xrquadlayerinit-width">width</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-height" id="ref-for-dom-xrquadlayer-height①">height</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayerinit-height" id="ref-for-dom-xrquadlayerinit-height">height</a></code>.</p>
     <li data-md>
      <p>Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-space" id="ref-for-dom-xrquadlayer-space③">space</a></code> be the <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space">space</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-transform" id="ref-for-dom-xrquadlayer-transform②">transform</a></code> as follows:</p>
      <dl class="switch">
       <dt class="switch">If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayerinit-transform" id="ref-for-dom-xrquadlayerinit-transform">transform</a></code> is set 
       <dd> Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-transform" id="ref-for-dom-xrquadlayer-transform③">transform</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new">new</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform①">XRRigidTransform</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant realm</a> of <var>layer</var> initialized with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-position" id="ref-for-dom-xrrigidtransform-position">position</a></code> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-orientation" id="ref-for-dom-xrrigidtransform-orientation">orientation</a></code> of <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayerinit-transform" id="ref-for-dom-xrquadlayerinit-transform①">transform</a></code>. 
       <dt> Otherwise 
       <dd> Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayer-transform" id="ref-for-dom-xrquadlayer-transform④">transform</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①">new</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform②">XRRigidTransform</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①">relevant realm</a> of <var>layer</var> initialized with a <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit" id="ref-for-dictdef-dompointinit">DOMPointInit</a></code> position of <code>{ x: 0.0, y: 0.0, z: 0.0, w: 1.0 }</code>. 
      </dl>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-isstatic" id="ref-for-xrcompositionlayer-isstatic①">isStatic</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-isstatic" id="ref-for-dom-xrlayerinit-isstatic">isStatic</a></code></p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRQuadLayer" data-dfn-type="attribute" data-export id="dom-xrquadlayer-onredraw"><code>onredraw</code></dfn> attribute is an Event handler IDL attribute for the <code class="idl"><a data-link-type="idl" href="#eventdef-xrlayer-redraw" id="ref-for-eventdef-xrlayer-redraw①">redraw</a></code> event type.</p>
   <h3 class="heading settled" data-level="3.6" id="xrcylinderayertype"><span class="secno">3.6. </span><span class="content">XRCylinderLayer</span><a class="self-link" href="#xrcylinderayertype"></a></h3>
    An <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer">XRCylinderLayer</a></code> renders a layer that takes up a curved rectangular space in the virtual environment.
Only the front of the layer MUST be visible; the back face MUST not be drawn by the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①②">XR Compositor</a>. 
   <p><img alt="representation of a cylinder layer" src="images/cylinder-layer.png" style="width:50%; border-style: ridge;"></p>
   <p>A XRCylinderLayer has no thicknes. It is a two-dimensional object positioned and oriented in 3D space. The position
of the cylinder refers to the center of the quad.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrcylinderlayer"><code><c- g>XRCylinderLayer</c-></code></dfn> : <a data-link-type="idl-name" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①①"><c- n>XRCompositionLayer</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace②"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRSpace" href="#dom-xrcylinderlayer-space" id="ref-for-dom-xrcylinderlayer-space"><c- g>space</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform③"><c- n>XRRigidTransform</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRRigidTransform" href="#dom-xrcylinderlayer-transform" id="ref-for-dom-xrcylinderlayer-transform"><c- g>transform</c-></a>;

  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float③"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrcylinderlayer-radius" id="ref-for-dom-xrcylinderlayer-radius"><c- g>radius</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float④"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrcylinderlayer-centralangle" id="ref-for-dom-xrcylinderlayer-centralangle"><c- g>centralAngle</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑤"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrcylinderlayer-aspectratio" id="ref-for-dom-xrcylinderlayer-aspectratio"><c- g>aspectRatio</c-></a>;

  // Events
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-xrcylinderlayer-onredraw" id="ref-for-dom-xrcylinderlayer-onredraw"><c- g>onredraw</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCylinderLayer" data-dfn-type="attribute" data-export id="dom-xrcylinderlayer-transform"><code>transform</code></dfn> attribute sets and returns the offset and orientation relative to the <dfn class="dfn-paneled idl-code" data-dfn-for="XRCylinderLayer" data-dfn-type="attribute" data-export id="dom-xrcylinderlayer-space"><code>space</code></dfn> attribute. The <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-transform" id="ref-for-dom-xrcylinderlayer-transform①">transform</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-space" id="ref-for-dom-xrcylinderlayer-space①">space</a></code> attributes
establish the spatial relationship of the layer within the user’s physical environment.
When setting the <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-space" id="ref-for-dom-xrcylinderlayer-space②">space</a></code>, first run the steps for <a data-link-type="dfn" href="#setting-the-space-on-a-layer" id="ref-for-setting-the-space-on-a-layer①">setting the space on a layer</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCylinderLayer" data-dfn-type="attribute" data-export id="dom-xrcylinderlayer-radius"><code>radius</code></dfn> attribute controls the radius in meters of the cylinder.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCylinderLayer" data-dfn-type="attribute" data-export id="dom-xrcylinderlayer-centralangle"><code>centralAngle</code></dfn> attribute controls the angle in radians of the visible section of the cylinder.
It grows symmetrically around the 0 angle.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCylinderLayer" data-dfn-type="attribute" data-export id="dom-xrcylinderlayer-aspectratio"><code>aspectRatio</code></dfn> attribute controls the ratio of the visible cylinder section. It is the ratio of the width of the visible section of the cylinder divided by its height. The width is calculated by multiplying the <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-radius" id="ref-for-dom-xrcylinderlayer-radius①">radius</a></code> with the <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-centralangle" id="ref-for-dom-xrcylinderlayer-centralangle①">centralAngle</a></code>.</p>
   <p><img alt="description of the parameters of a cylinder layer" src="images/cylinder_layer_params.png" style="width:80%"></p>
   <div class="algorithm" data-algorithm="initCylinderLayerAlgo">
     When <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="initialize a cylinder layer" data-noexport id="initialize-a-cylinder-layer">initializing an <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer①">XRCylinderLayer</a></code> <var>layer</var> with an <code class="idl"><a data-link-type="idl" href="#dictdef-xrcylinderlayerinit" id="ref-for-dictdef-xrcylinderlayerinit">XRCylinderLayerInit</a></code> <var>init</var></dfn>, the user agent MUST run the following steps: 
    <ol>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-radius" id="ref-for-dom-xrcylinderlayer-radius②">radius</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-radius" id="ref-for-dom-xrcylinderlayerinit-radius">radius</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-centralangle" id="ref-for-dom-xrcylinderlayer-centralangle②">centralAngle</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-centralangle" id="ref-for-dom-xrcylinderlayerinit-centralangle">centralAngle</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-aspectratio" id="ref-for-dom-xrcylinderlayer-aspectratio①">aspectRatio</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-aspectratio" id="ref-for-dom-xrcylinderlayerinit-aspectratio">aspectRatio</a></code>.</p>
     <li data-md>
      <p>Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-space" id="ref-for-dom-xrcylinderlayer-space③">space</a></code> be the <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space①">space</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-transform" id="ref-for-dom-xrcylinderlayer-transform②">transform</a></code> as follows:</p>
      <dl class="switch">
       <dt class="switch">If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-transform" id="ref-for-dom-xrcylinderlayerinit-transform">transform</a></code> is set 
       <dd> Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-transform" id="ref-for-dom-xrcylinderlayer-transform③">transform</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②">new</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform④">XRRigidTransform</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②">relevant realm</a> of <var>layer</var> initialized with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-position" id="ref-for-dom-xrrigidtransform-position①">position</a></code> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-orientation" id="ref-for-dom-xrrigidtransform-orientation①">orientation</a></code> of <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-transform" id="ref-for-dom-xrcylinderlayerinit-transform①">transform</a></code>. 
       <dt> Otherwise 
       <dd> Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayer-transform" id="ref-for-dom-xrcylinderlayer-transform④">transform</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③">new</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform⑤">XRRigidTransform</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③">relevant realm</a> of <var>layer</var> initialized with a <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit" id="ref-for-dictdef-dompointinit①">DOMPointInit</a></code> position of <code>{ x: 0.0, y: 0.0, z: 0.0, w: 1.0 }</code>. 
      </dl>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-isstatic" id="ref-for-xrcompositionlayer-isstatic②">isStatic</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-isstatic" id="ref-for-dom-xrlayerinit-isstatic①">isStatic</a></code></p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCylinderLayer" data-dfn-type="attribute" data-export id="dom-xrcylinderlayer-onredraw"><code>onredraw</code></dfn> attribute is an Event handler IDL attribute for the <code class="idl"><a data-link-type="idl" href="#eventdef-xrlayer-redraw" id="ref-for-eventdef-xrlayer-redraw②">redraw</a></code> event type.</p>
   <h3 class="heading settled" data-level="3.7" id="xrequirectlayertype"><span class="secno">3.7. </span><span class="content">XREquirectLayer</span><a class="self-link" href="#xrequirectlayertype"></a></h3>
    An <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer">XREquirectLayer</a></code> renders a layer where the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①③">XR Compositor</a> MUST map an equirectangular coded data onto the inside of a sphere. 
   <p><img alt="representation of an equirect layer" src="images/equirect-layer.png" style="width:50%; border-style: ridge;"></p>
   <p class="issue" id="issue-9b6533f8"><a class="self-link" href="#issue-9b6533f8"></a> this section needs clarification</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed④"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrequirectlayer"><code><c- g>XREquirectLayer</c-></code></dfn> : <a data-link-type="idl-name" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①②"><c- n>XRCompositionLayer</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace③"><c- n>XRSpace</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XREquirectLayer" data-dfn-type="attribute" data-export data-type="XRSpace" id="dom-xrequirectlayer-space"><code><c- g>space</c-></code></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform⑥"><c- n>XRRigidTransform</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRRigidTransform" href="#dom-xrequirectlayer-transform" id="ref-for-dom-xrequirectlayer-transform"><c- g>transform</c-></a>;

  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑥"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrequirectlayer-radius" id="ref-for-dom-xrequirectlayer-radius"><c- g>radius</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑦"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrequirectlayer-centralhorizontalangle" id="ref-for-dom-xrequirectlayer-centralhorizontalangle"><c- g>centralHorizontalAngle</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑧"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrequirectlayer-upperverticalangle" id="ref-for-dom-xrequirectlayer-upperverticalangle"><c- g>upperVerticalAngle</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑨"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrequirectlayer-lowerverticalangle" id="ref-for-dom-xrequirectlayer-lowerverticalangle"><c- g>lowerVerticalAngle</c-></a>;

  // Events
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-xrequirectlayer-onredraw" id="ref-for-dom-xrequirectlayer-onredraw"><c- g>onredraw</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XREquirectLayer" data-dfn-type="attribute" data-export id="dom-xrequirectlayer-transform"><code>transform</code></dfn> attribute sets and returns the offset and orientation relative to <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-space" id="ref-for-dom-xrequirectlayer-space">space</a></code>. The <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-transform" id="ref-for-dom-xrequirectlayer-transform①">transform</a></code> attribute and the <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-space" id="ref-for-dom-xrequirectlayer-space①">space</a></code> establish the spatial relationship of the layer within the user’s physical environment.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XREquirectLayer" data-dfn-type="attribute" data-export id="dom-xrequirectlayer-radius"><code>radius</code></dfn> attribute is the non-negative radius in meters of the sphere. Values of <code>zero</code> or <code>infinity</code> are treated as an infinite sphere.</p>
   <p>Setting <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-radius" id="ref-for-dom-xrequirectlayer-radius①">radius</a></code> to a value less than <code>0</code> will set it to <code>0</code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XREquirectLayer" data-dfn-type="attribute" data-export id="dom-xrequirectlayer-centralhorizontalangle"><code>centralHorizontalAngle</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="XREquirectLayer" data-dfn-type="attribute" data-export id="dom-xrequirectlayer-upperverticalangle"><code>upperVerticalAngle</code></dfn> and <dfn class="dfn-paneled idl-code" data-dfn-for="XREquirectLayer" data-dfn-type="attribute" data-export id="dom-xrequirectlayer-lowerverticalangle"><code>lowerVerticalAngle</code></dfn> attributes set and return how the texture is mapped to the sphere.</p>
   <p>Setting <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-centralhorizontalangle" id="ref-for-dom-xrequirectlayer-centralhorizontalangle①">centralHorizontalAngle</a></code> to a value less than 0 will set it to 0 and setting it to
a value higher than 2π will set it to 2π.</p>
   <p>Setting <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-upperverticalangle" id="ref-for-dom-xrequirectlayer-upperverticalangle①">upperVerticalAngle</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-lowerverticalangle" id="ref-for-dom-xrequirectlayer-lowerverticalangle①">lowerVerticalAngle</a></code> to a value less than -π/2 will set it
to -π/2 and setting it to a value higher than π/2 will set it to π/2.</p>
   <p><img alt="description of the parameters of an equirect layer" src="images/equirect.png" style="width:50%"></p>
   <p>When assigning an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace④">XRSpace</a></code> to the <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-space" id="ref-for-dom-xrequirectlayer-space②">space</a></code> attribute, first run the following steps.</p>
   <div class="algorithm" data-algorithm="setting the space on an equirect layer">
    <p>When <var>setting the space on an equirect layer</var> with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace⑤">XRSpace</a></code> <var>space</var> and <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer①">XREquirectLayer</a></code> <var>layer</var>, the user agent MUST run the following steps to validate if the <var>space</var> is valid:</p>
    <ol>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space②">space</a></code> is not an instance of type <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrreferencespace" id="ref-for-xrreferencespace">XRReferenceSpace</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space③">space</a></code> has a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrreferencespace-type" id="ref-for-xrreferencespace-type">type</a> of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-viewer" id="ref-for-dom-xrreferencespacetype-viewer">"viewer"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#setting-the-space-on-a-layer" id="ref-for-setting-the-space-on-a-layer②">setting the space on a layer</a> with <var>space</var> and <var>layer</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="initEquirectLayerAlgo">
     When <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="initialize a equirect layer" data-noexport id="initialize-a-equirect-layer">initializing an <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer②">XREquirectLayer</a></code> <var>layer</var> with an <code class="idl"><a data-link-type="idl" href="#dictdef-xrequirectlayerinit" id="ref-for-dictdef-xrequirectlayerinit">XREquirectLayerInit</a></code> <var>init</var></dfn>, the user agent MUST run the following steps: 
    <ol>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-radius" id="ref-for-dom-xrequirectlayer-radius②">radius</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-radius" id="ref-for-dom-xrequirectlayerinit-radius">radius</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-centralhorizontalangle" id="ref-for-dom-xrequirectlayer-centralhorizontalangle②">centralHorizontalAngle</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-centralhorizontalangle" id="ref-for-dom-xrequirectlayerinit-centralhorizontalangle">centralHorizontalAngle</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-upperverticalangle" id="ref-for-dom-xrequirectlayer-upperverticalangle②">upperVerticalAngle</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-upperverticalangle" id="ref-for-dom-xrequirectlayerinit-upperverticalangle">upperVerticalAngle</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-lowerverticalangle" id="ref-for-dom-xrequirectlayer-lowerverticalangle②">lowerVerticalAngle</a></code> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-lowerverticalangle" id="ref-for-dom-xrequirectlayerinit-lowerverticalangle">lowerVerticalAngle</a></code>.</p>
     <li data-md>
      <p>Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-space" id="ref-for-dom-xrequirectlayer-space③">space</a></code> be the <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space④">space</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-transform" id="ref-for-dom-xrequirectlayer-transform②">transform</a></code> as follows:</p>
      <dl class="switch">
       <dt class="switch">If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-transform" id="ref-for-dom-xrequirectlayerinit-transform">transform</a></code> is set 
       <dd> Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-transform" id="ref-for-dom-xrequirectlayer-transform③">transform</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④">new</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform⑦">XRRigidTransform</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④">relevant realm</a> of <var>layer</var> initialized with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-position" id="ref-for-dom-xrrigidtransform-position②">position</a></code> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-orientation" id="ref-for-dom-xrrigidtransform-orientation②">orientation</a></code> of <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-transform" id="ref-for-dom-xrequirectlayerinit-transform①">transform</a></code>. 
       <dt> Otherwise 
       <dd> Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayer-transform" id="ref-for-dom-xrequirectlayer-transform④">transform</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤">new</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform⑧">XRRigidTransform</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤">relevant realm</a> of <var>layer</var>. 
      </dl>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-isstatic" id="ref-for-xrcompositionlayer-isstatic③">isStatic</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-isstatic" id="ref-for-dom-xrlayerinit-isstatic②">isStatic</a></code></p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XREquirectLayer" data-dfn-type="attribute" data-export id="dom-xrequirectlayer-onredraw"><code>onredraw</code></dfn> attribute is an Event handler IDL attribute for the <code class="idl"><a data-link-type="idl" href="#eventdef-xrlayer-redraw" id="ref-for-eventdef-xrlayer-redraw③">redraw</a></code> event type.</p>
   <h3 class="heading settled" data-level="3.8" id="xcubelayertype"><span class="secno">3.8. </span><span class="content">XRCubeLayer</span><a class="self-link" href="#xcubelayertype"></a></h3>
    A <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer">XRCubeLayer</a></code> renders a layer where the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①④">XR Compositor</a> renders directly from a cubemap. 
   <p><img alt="representation of a cube layer" src="images/cube-layer.jpg" style="width:50%; border-style: ridge;"></p>
   <p class="issue" id="issue-9b6533f8①"><a class="self-link" href="#issue-9b6533f8①"></a> this section needs clarification</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑤"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrcubelayer"><code><c- g>XRCubeLayer</c-></code></dfn> : <a data-link-type="idl-name" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①③"><c- n>XRCompositionLayer</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace⑥"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRSpace" href="#dom-xrcubelayer-space" id="ref-for-dom-xrcubelayer-space"><c- g>space</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dompointreadonly" id="ref-for-dompointreadonly"><c- n>DOMPointReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMPointReadOnly" href="#dom-xrcubelayer-orientation" id="ref-for-dom-xrcubelayer-orientation"><c- g>orientation</c-></a>;

  // Events
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-xrcubelayer-onredraw" id="ref-for-dom-xrcubelayer-onredraw"><c- g>onredraw</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCubeLayer" data-dfn-type="attribute" data-export id="dom-xrcubelayer-orientation"><code>orientation</code></dfn> attribute sets and returns the orientation relative to the <dfn class="dfn-paneled idl-code" data-dfn-for="XRCubeLayer" data-dfn-type="attribute" data-export id="dom-xrcubelayer-space"><code>space</code></dfn> attribute. The <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-orientation" id="ref-for-dom-xrcubelayer-orientation①">orientation</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-space" id="ref-for-dom-xrcubelayer-space①">space</a></code> attributes
establish the spatial relationship of the layer within the user’s physical environment.
When placing the <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer①">XRCubeLayer</a></code> only the orientation of the <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-space" id="ref-for-dom-xrcubelayer-space②">space</a></code> is considered. The cube layer will always be rendered
with the view point at the center.</p>
   <p>When assigning an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace⑦">XRSpace</a></code> to the <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-space" id="ref-for-dom-xrcubelayer-space③">space</a></code> attribute, first run the following steps.</p>
   <div class="algorithm" data-algorithm="setting the space on a cube layer">
    <p>When <var>setting the space on an cube layer</var> with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace⑧">XRSpace</a></code> <var>space</var> and <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer②">XRCubeLayer</a></code> <var>layer</var>, the user agent MUST run the following steps to validate if the <var>space</var> is valid:</p>
    <ol>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space⑤">space</a></code> is not an instance of type <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrreferencespace" id="ref-for-xrreferencespace①">XRReferenceSpace</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space⑥">space</a></code> has a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrreferencespace-type" id="ref-for-xrreferencespace-type①">type</a> of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-viewer" id="ref-for-dom-xrreferencespacetype-viewer①">"viewer"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#setting-the-space-on-a-layer" id="ref-for-setting-the-space-on-a-layer③">setting the space on a layer</a> with <var>space</var> and <var>layer</var>.</p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRCubeLayer" data-dfn-type="attribute" data-export id="dom-xrcubelayer-onredraw"><code>onredraw</code></dfn> attribute is an Event handler IDL attribute for the <code class="idl"><a data-link-type="idl" href="#eventdef-xrlayer-redraw" id="ref-for-eventdef-xrlayer-redraw④">redraw</a></code> event type.</p>
   <h2 class="heading settled" data-level="4" id="spaces"><span class="secno">4. </span><span class="content">Spaces</span><a class="self-link" href="#spaces"></a></h2>
   <p><code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer⑥">XRProjectionLayer</a></code> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrwebgllayer" id="ref-for-xrwebgllayer">XRWebGLLayer</a></code> don’t have associated an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace⑨">XRSpace</a></code> because they render to the full frame.</p>
   <p><code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer③">XRCubeLayer</a></code> and <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer③">XREquirectLayer</a></code> MUST only support <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrreferencespace" id="ref-for-xrreferencespace②">XRReferenceSpaces</a></code> that are not of type <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-viewer" id="ref-for-dom-xrreferencespacetype-viewer②">"viewer"</a></code>.</p>
   <p><code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer②">XRQuadLayer</a></code> and <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer②">XRCylinderLayer</a></code> MUST support all <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace①⓪">XRSpace</a></code> types.</p>
   <section class="non-normative">
    <p>Generally, developers should not use of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-viewer" id="ref-for-dom-xrreferencespacetype-viewer③">"viewer"</a></code> space to stabilize layers, as this will almost always defeat positional or
rotational reprojection and result in a loss in stability of the rendered content relative to the world. The exception being small UI elements
like a gaze cursor or targeting reticle.</p>
    <p>Following are some best practices of spaces to use with a layer type:</p>
    <ul>
     <li data-md>
      <p><code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer③">XRQuadLayer</a></code> with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-viewer" id="ref-for-dom-xrreferencespacetype-viewer④">"viewer"</a></code> space: Head-locked constant-size reticle in center of screen.</p>
     <li data-md>
      <p><code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer④">XRQuadLayer</a></code> or <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer③">XRCylinderLayer</a></code> in <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-local" id="ref-for-dom-xrreferencespacetype-local">"local"</a></code>, <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-unbounded" id="ref-for-dom-xrreferencespacetype-unbounded">"unbounded"</a></code> space: springy body-locked UI.</p>
     <li data-md>
      <p><code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer⑤">XRQuadLayer</a></code> or <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer④">XRCylinderLayer</a></code> in <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-local" id="ref-for-dom-xrreferencespacetype-local①">"local"</a></code>, <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-local-floor" id="ref-for-dom-xrreferencespacetype-local-floor">"local-floor"</a></code>, <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-unbounded" id="ref-for-dom-xrreferencespacetype-unbounded①">"unbounded"</a></code>, <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-bounded-floor" id="ref-for-dom-xrreferencespacetype-bounded-floor">"bounded-floor"</a></code> or anchor space: world-locked video, placed by the user.</p>
     <li data-md>
      <p><code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer④">XREquirectLayer</a></code> or <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer④">XRCubeLayer</a></code> in <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-local" id="ref-for-dom-xrreferencespacetype-local②">"local"</a></code> space: 360-degree video or skybox.</p>
    </ul>
   </section>
   <h2 class="heading settled" data-level="5" id="rendering"><span class="secno">5. </span><span class="content">Rendering</span><a class="self-link" href="#rendering"></a></h2>
   <h3 class="heading settled" data-level="5.1" id="xrsubimagetype"><span class="secno">5.1. </span><span class="content">XRSubImage</span><a class="self-link" href="#xrsubimagetype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#xrsubimage" id="ref-for-xrsubimage②">XRSubImage</a></code> object represents what viewport of the GPU texture to use. 
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑥"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrsubimage"><code><c- g>XRSubImage</c-></code></dfn> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrviewport" id="ref-for-xrviewport"><c- n>XRViewport</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="XRViewport" href="#dom-xrsubimage-viewport" id="ref-for-dom-xrsubimage-viewport"><c- g>viewport</c-></a>;
};
</pre>
   <p class="note" role="note"><span class="marker">NOTE:</span> this class is designed to accomodate future extensions</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRSubImage" data-dfn-type="attribute" data-export id="dom-xrsubimage-viewport"><code>viewport</code></dfn> attribute returns the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrviewport" id="ref-for-xrviewport①">XRViewport</a></code> to use when rendering the sub image.</p>
   <h3 class="heading settled" data-level="5.2" id="xrwebglsubimagetype"><span class="secno">5.2. </span><span class="content">XRWebGLSubImage</span><a class="self-link" href="#xrwebglsubimagetype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage">XRWebGLSubImage</a></code> object is used during rendering of the layer. 
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑦"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrwebglsubimage"><code><c- g>XRWebGLSubImage</c-></code></dfn> : <a data-link-type="idl-name" href="#xrsubimage" id="ref-for-xrsubimage③"><c- n>XRSubImage</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject①"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLTexture" id="ref-for-WebGLTexture"><c- n>WebGLTexture</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="WebGLTexture" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①"><c- g>colorTexture</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject②"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLTexture" id="ref-for-WebGLTexture①"><c- n>WebGLTexture</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="WebGLTexture?" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture"><c- g>depthStencilTexture</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long④"><c- b>unsigned</c-> <c- b>long</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long?" href="#dom-xrwebglsubimage-imageindex" id="ref-for-dom-xrwebglsubimage-imageindex"><c- g>imageIndex</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑤"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrwebglsubimage-texturewidth" id="ref-for-dom-xrwebglsubimage-texturewidth"><c- g>textureWidth</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑥"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrwebglsubimage-textureheight" id="ref-for-dom-xrwebglsubimage-textureheight"><c- g>textureHeight</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLSubImage" data-dfn-type="attribute" data-export id="dom-xrwebglsubimage-colortexture"><code>colorTexture</code></dfn> attribute returns the color <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture">opaque texture</a> for the <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①④">XRCompositionLayer</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLSubImage" data-dfn-type="attribute" data-export id="dom-xrwebglsubimage-depthstenciltexture"><code>depthStencilTexture</code></dfn> attribute returns the depth/stencil <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①">opaque texture</a> for the <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①⑤">XRCompositionLayer</a></code>.
If the layer was created without depth/stencil, this attribute returns null.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLSubImage" data-dfn-type="attribute" data-export id="dom-xrwebglsubimage-imageindex"><code>imageIndex</code></dfn> attribute returns the offset into the texture array. Valid only for layers
that were requested with <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array②">texture-array</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLSubImage" data-dfn-type="attribute" data-export id="dom-xrwebglsubimage-texturewidth"><code>textureWidth</code></dfn> and <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLSubImage" data-dfn-type="attribute" data-export id="dom-xrwebglsubimage-textureheight"><code>textureHeight</code></dfn> attributes
return the width and height in pixels of the GL attachments, respectively.</p>
   <h3 class="heading settled" data-level="5.3" id="xrtexturetype"><span class="secno">5.3. </span><span class="content">XRTextureType</span><a class="self-link" href="#xrtexturetype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype">XRTextureType</a></code> enum defines what type of texture is allocated. 
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-xrtexturetype"><code><c- g>XRTextureType</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrtexturetype-texture" id="ref-for-dom-xrtexturetype-texture"><c- s>"texture"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array③"><c- s>"texture-array"</c-></a>
};
</pre>
   <ul>
    <li data-md>
     <p>A texture type of <dfn class="dfn-paneled idl-code" data-dfn-for="XRTextureType" data-dfn-type="enum-value" data-export data-lt="&quot;texture&quot;|texture" id="dom-xrtexturetype-texture"><code>texture</code></dfn> indicates that the textures of <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage①">XRWebGLSubImage</a></code> MUST be of type <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14">TEXTURE_2D</a></code></p>
    <li data-md>
     <p>A texture type of <dfn class="dfn-paneled idl-code" data-dfn-for="XRTextureType" data-dfn-type="enum-value" data-export data-lt="&quot;texture-array&quot;|texture-array" id="dom-xrtexturetype-texture-array"><code>texture-array</code></dfn> indicates that the textures of <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage②">XRWebGLSubImage</a></code> MUST be of type <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7">TEXTURE_2D_ARRAY</a></code></p>
   </ul>
   <h2 class="heading settled" data-level="6" id="gpulayer"><span class="secno">6. </span><span class="content">GPU layer and view creation</span><a class="self-link" href="#gpulayer"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="xrgpulayeroverview"><span class="secno">6.1. </span><span class="content">Overview</span><a class="self-link" href="#xrgpulayeroverview"></a></h3>
   <section class="non-normative">
    <p>When a layer is created it is backed by a GPU resource, typically a texture, provided by one of the Web platform’s graphics APIs. In order to
specify which API is providing the layer’s GPU resources an <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①">XRWebGLBinding</a></code> for the API in question must be created.
Each graphics API may have unique requirements that must be satisfied before a context can be used in the creation of a layer. For example,
a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext②">WebGLRenderingContext</a></code> must have its xrCompatible flag set prior to being passed to the constructor of the <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding②">XRWebGLBinding</a></code> instance.</p>
    <p>Any interaction between the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession②">XRSession</a></code> the graphics API, such as allocating or retrieving textures, will go through this <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding③">XRWebGLBinding</a></code> instance, and the exact mechanics
of the interaction will typically be API specific. This allows the rest of the WebXR API to be
graphics API agnostic and more easily adapt to future advances in rendering techniques.</p>
    <p>Once an <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding④">XRWebGLBinding</a></code> instance has been acquired, it can be used to create a variety of <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①⑥">XRCompositionLayer</a></code>. Any layers created by that instance will then be able
to query the associated GPU resources each frame, generally expected to be the native API’s texture interface.</p>
    <p>The various layer types are created with the create____Layer series of methods on the <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding⑤">XRWebGLBinding</a></code> instance. Information about the graphics resources required,
such as whether or not to allocate a depth buffer or alpha channel, are passed in at layer creation time and will be immutable for the lifetime of the layer.
The method will return the associated XRCompositionLayer type.</p>
    <p>Some layer types may not be supported by the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession③">XRSession</a></code>. If a layer type isn’t supported the method will throw an exception. <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer⑦">XRProjectionLayer</a></code> MUST be supported by all <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession④">XRSession</a></code>s.</p>
   </section>
   <h3 class="heading settled" data-level="6.2" id="xropaquetextures"><span class="secno">6.2. </span><span class="content">Opaque textures</span><a class="self-link" href="#xropaquetextures"></a></h3>
    When using WebXR GPU layers, the <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding⑥">XRWebGLBinding</a></code> object will return instances of an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="opaque-texture">opaque texture</dfn> for the color and depth/stencil attachments. 
   <p>An <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②">opaque texture</a> functions identically to a standard <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLTexture" id="ref-for-WebGLTexture②">WebGLTexture</a></code> with the following changes:</p>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③">opaque texture</a> is considered invalid outside of a <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-requestanimationframe" id="ref-for-dom-xrsession-requestanimationframe③">requestAnimationFrame()</a></code> callback for its session.</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture④">opaque texture</a> is invalid until it is returned by the <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getsubimage" id="ref-for-dom-xrwebglbinding-getsubimage">getSubImage()</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getviewsubimage" id="ref-for-dom-xrwebglbinding-getviewsubimage">getViewSubImage()</a></code> calls.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①⑤">XR Compositor</a> MUST assume that the <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture⑤">opaque texture</a> for the color attachment contains colors with premultiplied alpha.</p>
    <li data-md>
     <p>At the end of the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-requestanimationframe" id="ref-for-dom-xrsession-requestanimationframe④">requestAnimationFrame()</a></code> callback the texture MUST be unbounded and detached from all <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.8" id="ref-for-5.8">WebGLShader</a></code> objects.</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture⑥">opaque texture</a> MUST behave as though it was allocated with <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7.6" id="ref-for-3.7.6">texStorage2D</a> or <a data-link-type="dfn" data-refhint-key="1f44173f" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7.6" id="ref-for-3.7.6①">texStorage3D</a>, as appropriate, even when using a WebGL 1.0 context.</p>
    <li data-md>
     <p>A call to <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.8" id="ref-for-5.14.8">deleteTexture</a></code> with an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture⑦">opaque texture</a> MUST generate an <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContextBase" id="ref-for-WebGLRenderingContextBase">INVALID_OPERATION</a></code> error.</p>
   </ul>
   <p>The buffers attached to an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture⑧">opaque texture</a> MUST be cleared to the values in the table below prior to the processing of each <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xr-animation-frame" id="ref-for-xr-animation-frame②">XR animation frame</a>.</p>
   <table class="tg">
    <thead>
     <tr>
      <th>Buffer
      <th>Clear Value
    <tbody>
     <tr>
      <td>Color
      <td>(0, 0, 0, 0)
     <tr>
      <td>Depth
      <td>1.0
     <tr>
      <td>Stencil
      <td>0
   </table>
   <p>If the <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture⑨">opaque texture</a> was created with <code>2</code> or more <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels②">mipLevels</a></code>,
the author SHOULD populate all the mip levels. The user agent MUST NOT assume that it should create the mip levels.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> the <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①⓪">opaque textures</a> are allocated when the layer is contructed using the <a data-link-type="dfn" href="#allocate-color-textures" id="ref-for-allocate-color-textures">allocate color textures</a> and <a data-link-type="dfn" href="#allocate-depth-textures" id="ref-for-allocate-depth-textures">allocate depth textures</a> algoritms. The side effect of this pre-allocation is that calling <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getsubimage" id="ref-for-dom-xrwebglbinding-getsubimage①">getSubImage()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getviewsubimage" id="ref-for-dom-xrwebglbinding-getviewsubimage①">getViewSubImage()</a></code> with the same parameters will always return the same texture objects.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> Changes to the dimensions or format of the <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①①">opaque textures</a> are not allowed. GL commands
may only alter the texel values and texture parameters. Using any of the following
commands with the WebGLTexture will result in an INVALID_OPERATION error
being generated, even if it does not affect the dimensions or format: TexImage*, CompressedTexImage*, CopyTexImage* and TexStorage*.
The <a href="https://www.khronos.org/registry/OpenGL/specs/es/3.0/es_spec_3.0.pdf#nameddest=section-3.8.4">"Immutable-Format Texture Images"</a> section in the OpenGL ES 3.0 spec defines these limitations in more detail.</p>
   <p>Allocation of the resources for layers (such as memory) MUST be done through the same mechanism as WebGL.</p>
   <h3 class="heading settled" data-level="6.3" id="xrprojectionlayerinittype"><span class="secno">6.3. </span><span class="content">XRProjectionLayerInit</span><a class="self-link" href="#xrprojectionlayerinittype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#dictdef-xrprojectionlayerinit" id="ref-for-dictdef-xrprojectionlayerinit">XRProjectionLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer⑧">XRProjectionLayer</a></code> is initialized. 
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrprojectionlayerinit"><code><c- g>XRProjectionLayerInit</c-></code></dfn> {
  <a data-link-type="idl-name" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype①"><c- n>XRTextureType</c-></a> <a class="idl-code" data-default="&quot;texture&quot;" data-link-type="dict-member" data-type="XRTextureType" href="#dom-xrprojectionlayerinit-texturetype" id="ref-for-dom-xrprojectionlayerinit-texturetype①"><c- g>textureType</c-></a> = "texture";
  <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1" id="ref-for-5.1"><c- n>GLenum</c-></a> <a class="idl-code" data-default="0x1908" data-link-type="dict-member" data-type="GLenum" href="#dom-xrprojectionlayerinit-colorformat" id="ref-for-dom-xrprojectionlayerinit-colorformat"><c- g>colorFormat</c-></a> = 0x1908; // RGBA
  <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1" id="ref-for-5.1①"><c- n>GLenum</c-></a> <a class="idl-code" data-default="0x1902" data-link-type="dict-member" data-type="GLenum" href="#dom-xrprojectionlayerinit-depthformat" id="ref-for-dom-xrprojectionlayerinit-depthformat"><c- g>depthFormat</c-></a> = 0x1902; // DEPTH_COMPONENT
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a> <a class="idl-code" data-default="1.0" data-link-type="dict-member" data-type="double" href="#dom-xrprojectionlayerinit-scalefactor" id="ref-for-dom-xrprojectionlayerinit-scalefactor"><c- g>scaleFactor</c-></a> = 1.0;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayerInit" data-dfn-type="dict-member" data-export id="dom-xrprojectionlayerinit-texturetype"><code>textureType</code></dfn> attribute defines the type of texture that the layer will have.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayerInit" data-dfn-type="dict-member" data-export id="dom-xrprojectionlayerinit-colorformat"><code>colorFormat</code></dfn> attribute defines the data type of the color texture data.</p>
   <p>This is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="list-of-color-formats-for-projection-layers">list of color formats for projection layers</dfn> that the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①⑥">XR Compositor</a> MUST support:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="8454ed9e" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14①">RGBA</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="fbe884eb" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②">RGB</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/#srgb_ext" id="ref-for-srgb_ext">SRGB_EXT</a></code> for contexts with the '<code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/#ext_srgb" id="ref-for-ext_srgb">EXT_sRGB</a></code>' <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14">extension</a> enabled</p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/#srgb_alpha_ext" id="ref-for-srgb_alpha_ext">SRGB_ALPHA_EXT</a></code> for contexts with the '<code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/#ext_srgb" id="ref-for-ext_srgb①">EXT_sRGB</a></code>' <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14①">extension</a> enabled</p>
   </ul>
   <p>For WebGL2 contexts these additional formats are supported:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14③">RGBA8</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="9b4e3c0a" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14④">RGB8</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="7b3c6120" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14⑤">SRGB8</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="e7dcd411" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14⑥">SRGB8_ALPHA8</a></code></p>
   </ul>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayerInit" data-dfn-type="dict-member" data-export id="dom-xrprojectionlayerinit-depthformat"><code>depthFormat</code></dfn> attribute defines the data type of the depth texture data.
If <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-depthformat" id="ref-for-dom-xrprojectionlayerinit-depthformat①">depthFormat</a></code> is <code>0</code> the layer will not provide a depth/stencil texture.</p>
   <p>This is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="list-of-depth-formats-for-projection-layers">list of depth formats for projection layers</dfn> that the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①⑦">XR Compositor</a> MUST support:</p>
   <p>For <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext③">WebGLRenderingContext</a></code> contexts with the '<code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#webgl_depth_texture" id="ref-for-webgl_depth_texture">WEBGL_depth_texture</a></code>' <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14②">extension</a> enabled or WebGL2 contexts:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#depth_component" id="ref-for-depth_component">DEPTH_COMPONENT</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#depth_stencil" id="ref-for-depth_stencil">DEPTH_STENCIL</a></code></p>
   </ul>
   <p>If the extension was not enabled, the request for a depth texture is ignored.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> this could be confusing to authors because they might expect a depth texture. If possible, provide a warning with the reason why the texture was not created.</p>
   <p>For <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext" id="ref-for-WebGL2RenderingContext②">WebGL2RenderingContext</a></code> contexts these additional formats are supported:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="b42255b2" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14⑦">DEPTH_COMPONENT24</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="5177d562" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14⑧">DEPTH24_STENCIL8</a></code></p>
   </ul>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRProjectionLayerInit" data-dfn-type="dict-member" data-export id="dom-xrprojectionlayerinit-scalefactor"><code>scaleFactor</code></dfn> attribute defines the value that the <var>session</var>’s <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#recommended-webgl-framebuffer-resolution" id="ref-for-recommended-webgl-framebuffer-resolution">recommended WebGL framebuffer resolution</a> MUST be multiplied by determining the resolution of the layer’s attachments.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> the <code class="idl"><a data-link-type="idl" href="#dictdef-xrprojectionlayerinit" id="ref-for-dictdef-xrprojectionlayerinit①">XRProjectionLayerInit</a></code> dictionary does not have support to configure <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels③">mipLevels</a></code> like <code class="idl"><a data-link-type="idl" href="#dictdef-xrlayerinit" id="ref-for-dictdef-xrlayerinit">XRLayerInit</a></code>. If a user agent wants to support mipmapping on projection layers, it is free to allocate the texture with mips.
In that case the user agent (and not the author) is responsible for generating all the mip levels.</p>
   <h3 class="heading settled" data-level="6.4" id="xrlayerinittype"><span class="secno">6.4. </span><span class="content">XRLayerInit</span><a class="self-link" href="#xrlayerinittype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#dictdef-xrlayerinit" id="ref-for-dictdef-xrlayerinit①">XRLayerInit</a></code> dictionary represents a set of common configurable values for <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer⑥">XRQuadLayer</a></code>, <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer⑤">XRCylinderLayer</a></code>, <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer⑤">XREquirectLayer</a></code> and <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer⑤">XRCubeLayer</a></code> . 
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrlayerinit"><code><c- g>XRLayerInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace①①"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="XRSpace" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space⑦"><c- g>space</c-></a>;
  <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1" id="ref-for-5.1②"><c- n>GLenum</c-></a> <a class="idl-code" data-default="0x1908" data-link-type="dict-member" data-type="GLenum" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat"><c- g>colorFormat</c-></a> = 0x1908; // RGBA
  <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1" id="ref-for-5.1③"><c- n>GLenum</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="GLenum?" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat"><c- g>depthFormat</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑦"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-default="1" data-link-type="dict-member" data-type="unsigned long" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels④"><c- g>mipLevels</c-></a> = 1;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑧"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="unsigned long" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth"><c- g>viewPixelWidth</c-></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑨"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="unsigned long" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight"><c- g>viewPixelHeight</c-></a>;
  <a data-link-type="idl-name" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout③"><c- n>XRLayerLayout</c-></a> <a class="idl-code" data-default="&quot;mono&quot;" data-link-type="dict-member" data-type="XRLayerLayout" href="#dom-xrlayerinit-layout" id="ref-for-dom-xrlayerinit-layout"><c- g>layout</c-></a> = "mono";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="XRLayerInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-xrlayerinit-isstatic"><code><c- g>isStatic</c-></code></dfn> = <c- b>false</c->;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerInit" data-dfn-type="dict-member" data-export id="dom-xrlayerinit-space"><code>space</code></dfn> attribute defines the spatial relationship with the user’s physical environment.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerInit" data-dfn-type="dict-member" data-export id="dom-xrlayerinit-colorformat"><code>colorFormat</code></dfn> attribute defines the data type of the color texture data.</p>
   <p>This is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="list-of-color-formats-for-non-projection-layers">list of color formats for non-projection layers</dfn> that the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①⑧">XR Compositor</a> MUST support:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="8454ed9e" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14⑨">RGBA</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="fbe884eb" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14①⓪">RGB</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/#srgb_ext" id="ref-for-srgb_ext①">SRGB_EXT</a></code> for contexts with the '<code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/#ext_srgb" id="ref-for-ext_srgb②">EXT_sRGB</a></code>' <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14③">extension</a> enabled</p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/#srgb_alpha_ext" id="ref-for-srgb_alpha_ext①">SRGB_ALPHA_EXT</a></code> for contexts with the '<code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/#ext_srgb" id="ref-for-ext_srgb③">EXT_sRGB</a></code>' <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14④">extension</a> enabled</p>
   </ul>
   <p>For WebGL2 contexts these additional formats are supported:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14①①">RGBA8</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="9b4e3c0a" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14①②">RGB8</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="7b3c6120" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14①③">SRGB8</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="e7dcd411" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14①④">SRGB8_ALPHA8</a></code></p>
   </ul>
   <p>For contexts with the '<code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/#webgl_compressed_texture_etc" id="ref-for-webgl_compressed_texture_etc">WEBGL_compressed_texture_etc</a></code>' <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14⑤">extension</a> enabled these additional formats are supported:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/#compressed_rgb8_etc2" id="ref-for-compressed_rgb8_etc2">COMPRESSED_RGB8_ETC2</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/#compressed_rgb8_punchthrough_alpha1_etc2" id="ref-for-compressed_rgb8_punchthrough_alpha1_etc2">COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/#compressed_rgba8_etc2_eac" id="ref-for-compressed_rgba8_etc2_eac">COMPRESSED_RGBA8_ETC2_EAC</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/#compressed_srgb8_etc2" id="ref-for-compressed_srgb8_etc2">COMPRESSED_SRGB8_ETC2</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/#compressed_srgb8_punchthrough_alpha1_etc2" id="ref-for-compressed_srgb8_punchthrough_alpha1_etc2">COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/#compressed_srgb8_alpha8_etc2_eac" id="ref-for-compressed_srgb8_alpha8_etc2_eac">COMPRESSED_SRGB8_ALPHA8_ETC2_EAC</a></code></p>
   </ul>
   <p>For contexts with the '<code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/#webgl_compressed_texture_astc" id="ref-for-webgl_compressed_texture_astc">WEBGL_compressed_texture_astc</a></code>' <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14⑥">extension</a> enabled all the formats of that <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14⑦">extension</a> are supported.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerInit" data-dfn-type="dict-member" data-export id="dom-xrlayerinit-depthformat"><code>depthFormat</code></dfn> attribute defines the data type of the depth texture data.
If <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat①">depthFormat</a></code> is not supplied, the layer will not provide a depth/stencil texture.</p>
   <p>This is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="list-of-depth-formats-for-non-projection-layers">list of depth formats for non-projection layers</dfn> that the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor①⑨">XR Compositor</a> MUST support:</p>
   <p>For <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext④">WebGLRenderingContext</a></code> contexts with the '<code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#webgl_depth_texture" id="ref-for-webgl_depth_texture①">WEBGL_depth_texture</a></code>' <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14⑧">extension</a> enabled or WebGL2 contexts:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#depth_component" id="ref-for-depth_component①">DEPTH_COMPONENT</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#depth_stencil" id="ref-for-depth_stencil①">DEPTH_STENCIL</a></code></p>
   </ul>
   <p>For <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext" id="ref-for-WebGL2RenderingContext③">WebGL2RenderingContext</a></code> contexts these additional formats are supported:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="b42255b2" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14①⑤">DEPTH_COMPONENT24</a></code></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" data-refhint-key="5177d562" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.14" id="ref-for-5.14①⑥">DEPTH24_STENCIL8</a></code></p>
   </ul>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerInit" data-dfn-type="dict-member" data-export id="dom-xrlayerinit-miplevels"><code>mipLevels</code></dfn> attribute defines the desired number of mip levels in the color and texture data.
If the user agent can’t create the requested number, it can create less. Authors MUST query <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-miplevels" id="ref-for-dom-xrcompositionlayer-miplevels②">mipLevels</a></code> to determine
the actual number of mip levels.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerInit" data-dfn-type="dict-member" data-export id="dom-xrlayerinit-viewpixelwidth"><code>viewPixelWidth</code></dfn> and <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerInit" data-dfn-type="dict-member" data-export id="dom-xrlayerinit-viewpixelheight"><code>viewPixelHeight</code></dfn> attributes define
the rectangular dimensions of the <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①⑦">XRCompositionLayer</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerInit" data-dfn-type="dict-member" data-export id="dom-xrlayerinit-layout"><code>layout</code></dfn> attribute defines the layout of the layer.</p>
   <h3 class="heading settled" data-level="6.5" id="xrquadlayerinit"><span class="secno">6.5. </span><span class="content">XRQuadLayerInit</span><a class="self-link" href="#xrquadlayerinit"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#dictdef-xrquadlayerinit" id="ref-for-dictdef-xrquadlayerinit①">XRQuadLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer⑦">XRQuadLayer</a></code> is initialized.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrquadlayerinit"><code><c- g>XRQuadLayerInit</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-xrlayerinit" id="ref-for-dictdef-xrlayerinit②"><c- n>XRLayerInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype②"><c- n>XRTextureType</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;texture&quot;" data-dfn-for="XRQuadLayerInit" data-dfn-type="dict-member" data-export data-type="XRTextureType" id="dom-xrquadlayerinit-texturetype"><code><c- g>textureType</c-></code></dfn> = "texture";
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform⑨"><c- n>XRRigidTransform</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRQuadLayerInit" data-dfn-type="dict-member" data-export data-type="XRRigidTransform?" id="dom-xrquadlayerinit-transform"><code><c- g>transform</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①⓪"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="1.0" data-dfn-for="XRQuadLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrquadlayerinit-width"><code><c- g>width</c-></code></dfn> = 1.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①①"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="1.0" data-dfn-for="XRQuadLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrquadlayerinit-height"><code><c- g>height</c-></code></dfn> = 1.0;
};
</pre>
   <h3 class="heading settled" data-level="6.6" id="xrcylinderlayerinit"><span class="secno">6.6. </span><span class="content">XRCylinderLayerInit</span><a class="self-link" href="#xrcylinderlayerinit"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#dictdef-xrcylinderlayerinit" id="ref-for-dictdef-xrcylinderlayerinit①">XRCylinderLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer⑥">XRCylinderLayer</a></code> is initialized.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrcylinderlayerinit"><code><c- g>XRCylinderLayerInit</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-xrlayerinit" id="ref-for-dictdef-xrlayerinit③"><c- n>XRLayerInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype③"><c- n>XRTextureType</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;texture&quot;" data-dfn-for="XRCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="XRTextureType" id="dom-xrcylinderlayerinit-texturetype"><code><c- g>textureType</c-></code></dfn> = "texture";
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform①⓪"><c- n>XRRigidTransform</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="XRRigidTransform?" id="dom-xrcylinderlayerinit-transform"><code><c- g>transform</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①②"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="2.0" data-dfn-for="XRCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrcylinderlayerinit-radius"><code><c- g>radius</c-></code></dfn> = 2.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①③"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="0.78539" data-dfn-for="XRCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrcylinderlayerinit-centralangle"><code><c- g>centralAngle</c-></code></dfn> = 0.78539;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①④"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="2.0" data-dfn-for="XRCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrcylinderlayerinit-aspectratio"><code><c- g>aspectRatio</c-></code></dfn> = 2.0;
};
</pre>
   <p>The default value of <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-centralangle" id="ref-for-dom-xrcylinderlayerinit-centralangle①">centralAngle</a></code> is π / 4.</p>
   <h3 class="heading settled" data-level="6.7" id="xrequirectlayerinit"><span class="secno">6.7. </span><span class="content">XREquirectLayerInit</span><a class="self-link" href="#xrequirectlayerinit"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#dictdef-xrequirectlayerinit" id="ref-for-dictdef-xrequirectlayerinit①">XREquirectLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer⑥">XREquirectLayer</a></code> is initialized.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrequirectlayerinit"><code><c- g>XREquirectLayerInit</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-xrlayerinit" id="ref-for-dictdef-xrlayerinit④"><c- n>XRLayerInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype④"><c- n>XRTextureType</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;texture&quot;" data-dfn-for="XREquirectLayerInit" data-dfn-type="dict-member" data-export data-type="XRTextureType" id="dom-xrequirectlayerinit-texturetype"><code><c- g>textureType</c-></code></dfn> = "texture";
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform①①"><c- n>XRRigidTransform</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XREquirectLayerInit" data-dfn-type="dict-member" data-export data-type="XRRigidTransform?" id="dom-xrequirectlayerinit-transform"><code><c- g>transform</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①⑤"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="0" data-dfn-for="XREquirectLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrequirectlayerinit-radius"><code><c- g>radius</c-></code></dfn> = 0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①⑥"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="6.28318" data-dfn-for="XREquirectLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrequirectlayerinit-centralhorizontalangle"><code><c- g>centralHorizontalAngle</c-></code></dfn> = 6.28318;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①⑦"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="1.570795" data-dfn-for="XREquirectLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrequirectlayerinit-upperverticalangle"><code><c- g>upperVerticalAngle</c-></code></dfn> = 1.570795;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①⑧"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="-1.570795" data-dfn-for="XREquirectLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrequirectlayerinit-lowerverticalangle"><code><c- g>lowerVerticalAngle</c-></code></dfn> = -1.570795;
};
</pre>
   <p>The default value of <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-centralhorizontalangle" id="ref-for-dom-xrequirectlayerinit-centralhorizontalangle①">centralHorizontalAngle</a></code> is 2π.
The default value of <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-upperverticalangle" id="ref-for-dom-xrequirectlayerinit-upperverticalangle①">upperVerticalAngle</a></code> is π/2.
The default value of <code class="idl"><a data-link-type="idl" href="#dom-xrequirectlayerinit-lowerverticalangle" id="ref-for-dom-xrequirectlayerinit-lowerverticalangle①">lowerVerticalAngle</a></code> is -π/2.</p>
   <h3 class="heading settled" data-level="6.8" id="xrcubelayerinit"><span class="secno">6.8. </span><span class="content">XRCubeLayerInit</span><a class="self-link" href="#xrcubelayerinit"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#dictdef-xrcubelayerinit" id="ref-for-dictdef-xrcubelayerinit">XRCubeLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer⑥">XRCubeLayer</a></code> is initialized.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrcubelayerinit"><code><c- g>XRCubeLayerInit</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-xrlayerinit" id="ref-for-dictdef-xrlayerinit⑤"><c- n>XRLayerInit</c-></a> {
  <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dompointreadonly" id="ref-for-dompointreadonly①"><c- n>DOMPointReadOnly</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRCubeLayerInit" data-dfn-type="dict-member" data-export data-type="DOMPointReadOnly?" id="dom-xrcubelayerinit-orientation"><code><c- g>orientation</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="6.9" id="XRWebGLBindingtype"><span class="secno">6.9. </span><span class="content">XRWebGLBinding</span><a class="self-link" href="#XRWebGLBindingtype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding⑦">XRWebGLBinding</a></code> object is used to create layers that have a GPU backend. 
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑧"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrwebglbinding"><code><c- g>XRWebGLBinding</c-></code></dfn> {
  <a class="idl-code" data-link-type="constructor" href="#dom-xrwebglbinding-xrwebglbinding" id="ref-for-dom-xrwebglbinding-xrwebglbinding"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession⑤"><c- n>XRSession</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/XRWebGLBinding(session, context), XRWebGLBinding/constructor(session, context)" data-dfn-type="argument" data-export id="dom-xrwebglbinding-xrwebglbinding-session-context-session"><code><c- g>session</c-></code></dfn>, <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#typedefdef-xrwebglrenderingcontext" id="ref-for-typedefdef-xrwebglrenderingcontext"><c- n>XRWebGLRenderingContext</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/XRWebGLBinding(session, context), XRWebGLBinding/constructor(session, context)" data-dfn-type="argument" data-export id="dom-xrwebglbinding-xrwebglbinding-session-context-context"><code><c- g>context</c-></code></dfn>);

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="attribute" data-export data-readonly data-type="double" id="dom-xrwebglbinding-nativeprojectionscalefactor"><code><c- g>nativeProjectionScaleFactor</c-></code></dfn>;

  <a data-link-type="idl-name" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer⑨"><c- n>XRProjectionLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createprojectionlayer" id="ref-for-dom-xrwebglbinding-createprojectionlayer"><c- g>createProjectionLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrprojectionlayerinit" id="ref-for-dictdef-xrprojectionlayerinit②"><c- n>XRProjectionLayerInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/createProjectionLayer(init), XRWebGLBinding/createProjectionLayer()" data-dfn-type="argument" data-export id="dom-xrwebglbinding-createprojectionlayer-init-init"><code><c- g>init</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#xrquadlayer" id="ref-for-xrquadlayer⑧"><c- n>XRQuadLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createquadlayer" id="ref-for-dom-xrwebglbinding-createquadlayer"><c- g>createQuadLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrquadlayerinit" id="ref-for-dictdef-xrquadlayerinit②"><c- n>XRQuadLayerInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/createQuadLayer(init), XRWebGLBinding/createQuadLayer()" data-dfn-type="argument" data-export id="dom-xrwebglbinding-createquadlayer-init-init"><code><c- g>init</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer⑦"><c- n>XRCylinderLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createcylinderlayer" id="ref-for-dom-xrwebglbinding-createcylinderlayer"><c- g>createCylinderLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrcylinderlayerinit" id="ref-for-dictdef-xrcylinderlayerinit②"><c- n>XRCylinderLayerInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/createCylinderLayer(init), XRWebGLBinding/createCylinderLayer()" data-dfn-type="argument" data-export id="dom-xrwebglbinding-createcylinderlayer-init-init"><code><c- g>init</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#xrequirectlayer" id="ref-for-xrequirectlayer⑦"><c- n>XREquirectLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createequirectlayer" id="ref-for-dom-xrwebglbinding-createequirectlayer"><c- g>createEquirectLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrequirectlayerinit" id="ref-for-dictdef-xrequirectlayerinit②"><c- n>XREquirectLayerInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/createEquirectLayer(init), XRWebGLBinding/createEquirectLayer()" data-dfn-type="argument" data-export id="dom-xrwebglbinding-createequirectlayer-init-init"><code><c- g>init</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#xrcubelayer" id="ref-for-xrcubelayer⑦"><c- n>XRCubeLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createcubelayer" id="ref-for-dom-xrwebglbinding-createcubelayer"><c- g>createCubeLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrcubelayerinit" id="ref-for-dictdef-xrcubelayerinit①"><c- n>XRCubeLayerInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/createCubeLayer(init), XRWebGLBinding/createCubeLayer()" data-dfn-type="argument" data-export id="dom-xrwebglbinding-createcubelayer-init-init"><code><c- g>init</c-></code></dfn> = {});

  <a data-link-type="idl-name" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage③"><c- n>XRWebGLSubImage</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-getsubimage" id="ref-for-dom-xrwebglbinding-getsubimage②"><c- g>getSubImage</c-></a>(<a data-link-type="idl-name" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①⑧"><c- n>XRCompositionLayer</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/getSubImage(layer, frame, eye), XRWebGLBinding/getSubImage(layer, frame)" data-dfn-type="argument" data-export id="dom-xrwebglbinding-getsubimage-layer-frame-eye-layer"><code><c- g>layer</c-></code></dfn>, <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrframe" id="ref-for-xrframe⑤"><c- n>XRFrame</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/getSubImage(layer, frame, eye), XRWebGLBinding/getSubImage(layer, frame)" data-dfn-type="argument" data-export id="dom-xrwebglbinding-getsubimage-layer-frame-eye-frame"><code><c- g>frame</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xreye" id="ref-for-enumdef-xreye"><c- n>XREye</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/getSubImage(layer, frame, eye), XRWebGLBinding/getSubImage(layer, frame)" data-dfn-type="argument" data-export id="dom-xrwebglbinding-getsubimage-layer-frame-eye-eye"><code><c- g>eye</c-></code></dfn> = "none");
  <a data-link-type="idl-name" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage④"><c- n>XRWebGLSubImage</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-getviewsubimage" id="ref-for-dom-xrwebglbinding-getviewsubimage②"><c- g>getViewSubImage</c-></a>(<a data-link-type="idl-name" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①⓪"><c- n>XRProjectionLayer</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/getViewSubImage(layer, view)" data-dfn-type="argument" data-export id="dom-xrwebglbinding-getviewsubimage-layer-view-layer"><code><c- g>layer</c-></code></dfn>, <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrview" id="ref-for-xrview"><c- n>XRView</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding/getViewSubImage(layer, view)" data-dfn-type="argument" data-export id="dom-xrwebglbinding-getviewsubimage-layer-view-view"><code><c- g>view</c-></code></dfn>);
};
</pre>
   <p class="issue" id="issue-2325a847"><a class="self-link" href="#issue-2325a847"></a> the init dictionaries shouldn’t be optional. This is bikeshed issue 1566.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding⑧">XRWebGLBinding</a></code> has a <dfn class="dfn-paneled" data-dfn-for="XRWebGLBinding" data-dfn-type="dfn" data-noexport id="xrwebglbinding-context">context</dfn> object of type <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#typedefdef-xrwebglrenderingcontext" id="ref-for-typedefdef-xrwebglrenderingcontext①">XRWebGLRenderingContext</a></code> which is an instance
of either a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext⑤">WebGLRenderingContext</a></code> or a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext" id="ref-for-WebGL2RenderingContext④">WebGL2RenderingContext</a></code>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding⑨">XRWebGLBinding</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="XRWebGLBinding" data-dfn-type="dfn" data-noexport id="xrwebglbinding-session">session</dfn>, which is the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession⑥">XRSession</a></code> it was created with.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> It is possible to create more than one <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①⓪">XRWebGLBinding</a></code>. Any layer created with an instance of <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①①">XRWebGLBinding</a></code> can
be used with another instance of <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①②">XRWebGLBinding</a></code> as long as both were created with the same <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session">session</a> and the same <a data-link-type="dfn" href="#xrwebglbinding-context" id="ref-for-xrwebglbinding-context">context</a>. The lifetime of layers or instances of <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage⑤">XRWebGLSubImage</a></code> is not tied to the lifetime of the <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①③">XRWebGLBinding</a></code> that created them.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer①⑨">XRCompositionLayer</a></code> created through <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①④">XRWebGLBinding</a></code> has an internal <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="colortextures">colorTextures</dfn> array which is an <var>array</var> of <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLTexture" id="ref-for-WebGLTexture③">WebGLTextures</a></code> for color textures and
an internal <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="depthstenciltextures">depthStencilTextures</dfn> which is an <var>array</var> of <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①②">opaque textures</a> for depth/stencil textures.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①①">XRProjectionLayer</a></code> created through <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①⑤">XRWebGLBinding</a></code> has an internal <dfn class="dfn-paneled" data-dfn-for="XRProjectionLayer" data-dfn-type="dfn" data-noexport id="xrprojectionlayer-colortextures-for-secondary-views">colorTextures for secondary views</dfn> array which is an <var>array</var> of <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①③">opaque textures</a> for color textures and an internal <dfn class="dfn-paneled" data-dfn-for="XRProjectionLayer" data-dfn-type="dfn" data-noexport id="xrprojectionlayer-depthstenciltextures-for-secondary-views">depthStencilTextures for secondary views</dfn> array which is an <var>array</var> of <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①④">opaque textures</a> for depth/stencil textures that are used to render the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view">secondary views</a>.</p>
   <div class="algorithm" data-algorithm="construct-webgl-layer">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="constructor" data-export data-lt="XRWebGLBinding(session, context)|constructor(session, context)" id="dom-xrwebglbinding-xrwebglbinding"><code>XRWebGLBinding(<var>session</var>, <var>context</var>)</code></dfn> constructor
MUST perform the following steps when invoked:</p>
    <ol>
     <li data-md>
      <p>Let <var>binding</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑥">new</a> <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①⑥">XRWebGLBinding</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑥">relevant realm</a> of <var>session</var>.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end">ended</a> value is <code>true</code>, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is lost, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>session</var> is not an <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#immersive-session" id="ref-for-immersive-session">immersive session</a>, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compatible" id="ref-for-xr-compatible">XR compatible</a> boolean is <code>false</code>, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror③">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Initialize <var>binding</var>’s <a data-link-type="dfn" href="#xrwebglbinding-context" id="ref-for-xrwebglbinding-context①">context</a> to <var>context</var>.</p>
     <li data-md>
      <p>Initialize <var>binding</var>’s <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session①">session</a> to <var>session</var>.</p>
     <li data-md>
      <p>Return <var>binding</var>.</p>
    </ol>
   </div>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-nativeprojectionscalefactor" id="ref-for-dom-xrwebglbinding-nativeprojectionscalefactor">nativeProjectionScaleFactor</a></code> function returns the value that the <var>session</var>’s <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#recommended-webgl-framebuffer-resolution" id="ref-for-recommended-webgl-framebuffer-resolution①">recommended WebGL framebuffer resolution</a> MUST be multiplied by to yield the <var>session</var>’s <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#native-webgl-framebuffer-resolution" id="ref-for-native-webgl-framebuffer-resolution">native WebGL framebuffer resolution</a>.</p>
   <p class="issue" id="issue-c5f51eda"><a class="self-link" href="#issue-c5f51eda"></a> special case UA behavior if the size causes the layout to change (ie if the requested width exceeds a limit with <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right②">"stereo-left-right"</a></code>)</p>
   <div class="algorithm" data-algorithm="determine the layout attribute">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="determine-the-layout-attribute">determine the layout attribute</dfn> using an <code class="idl"><a data-link-type="idl" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype⑤">XRTextureType</a></code> <var>textureType</var>, an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#typedefdef-xrwebglrenderingcontext" id="ref-for-typedefdef-xrwebglrenderingcontext②">XRWebGLRenderingContext</a></code> <var>context</var> and an <code class="idl"><a data-link-type="idl" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout④">XRLayerLayout</a></code> <var>layout</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>If <var>context</var> is not an <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext" id="ref-for-WebGL2RenderingContext⑤">WebGL2RenderingContext</a></code> and <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array④">"texture-array"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array⑤">"texture-array"</a></code> and not all of the session’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view">views</a> in the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①">list of views</a> have the same <a data-link-type="dfn">recommended WebGL texture resolution</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono①">"mono"</a></code>, return <var>layout</var> and abort these steps.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default③">"default"</a></code>, run the following steps:</p>
      <ol>
       <li data-md>
        <p>If the size of <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views②">list of views</a> is <code>1</code>, return <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono②">"mono"</a></code> and abort these steps.</p>
       <li data-md>
        <p>If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array⑥">"texture-array"</a></code>, return <var>layout</var> and abort these steps.</p>
      </ol>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default④">"default"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo" id="ref-for-dom-xrlayerlayout-stereo③">"stereo"</a></code>, run the following steps:</p>
      <ol>
       <li data-md>
        <p>If the user agent prefers <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right③">"stereo-left-right"</a></code> layout, return <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right④">"stereo-left-right"</a></code> and abort these steps.</p>
       <li data-md>
        <p>If the user agent prefers <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom②">"stereo-top-bottom"</a></code> layout, return <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom③">"stereo-top-bottom"</a></code> and abort these steps.</p>
      </ol>
     <li data-md>
      <p>return <var>layout</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="determine the maximum scalefactor">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="determine-the-maximum-scalefactor">determine the maximum scalefactor</dfn> using an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession⑦">XRSession</a></code> <var>session</var>, an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#typedefdef-xrwebglrenderingcontext" id="ref-for-typedefdef-xrwebglrenderingcontext③">XRWebGLRenderingContext</a></code> <var>context</var> and an <code class="idl"><a data-link-type="idl" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout⑤">XRLayerLayout</a></code> <var>layout</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>largest width</var> be the largest width of the <a data-link-type="dfn">recommended WebGL texture resolution</a> from the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views③">list of views</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①">secondary views</a>.</p>
     <li data-md>
      <p>Let <var>largest height</var> be the largest height of the <a data-link-type="dfn">recommended WebGL texture resolution</a> from the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views④">list of views</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view②">secondary views</a>.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right⑤">"stereo-left-right"</a></code> layout, multiply <var>largest width</var> by <code>2</code>.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom④">"stereo-top-bottom"</a></code> layout, multiply <var>largest height</var> by <code>2</code>.</p>
     <li data-md>
      <p>Let <var>largest view dimension</var> be the largest of <var>largest width</var> or <var>largest height</var>.</p>
     <li data-md>
      <p>Let <var>largest texture dimension</var> be the largest dimension of a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLTexture" id="ref-for-WebGLTexture④">WebGLTexture</a></code> created by <var>context</var>.</p>
     <li data-md>
      <p>return <var>largest texture dimension</var> divided by <var>largest view dimension</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="allocate color textures for projection layers">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="allocate-color-textures-for-projection-layers">allocate color textures for projection layers</dfn> using an <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①②">XRProjectionLayer</a></code> <var>layer</var>, an <code class="idl"><a data-link-type="idl" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype⑥">XRTextureType</a></code> <var>textureType</var>, a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1" id="ref-for-5.1④">GLenum</a></code> <var>textureFormat</var> and a float <var>scaleFactor</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>array</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑦">new</a> array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑦">relevant realm</a> of <var>context</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-context" id="ref-for-xrcompositionlayer-context①">context</a>.</p>
     <li data-md>
      <p>Let <var>session</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session②">session</a>.</p>
     <li data-md>
      <p>Let <var>numViews</var> be the number of the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views⑤">list of views</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view③">secondary views</a>.</p>
     <li data-md>
      <p>Let <var>view</var> be the first entry in the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views⑥">list of views</a> that is not a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view④">secondary views</a>.</p>
     <li data-md>
      <p>Let <var>width</var> be the width of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
     <li data-md>
      <p>Let <var>height</var> be the height of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
     <li data-md>
      <p>If <var>textureFormat</var> is not in the <a data-link-type="dfn" href="#list-of-color-formats-for-projection-layers" id="ref-for-list-of-color-formats-for-projection-layers">list of color formats for projection layers</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono③">"mono"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default⑤">"default"</a></code>:</p>
      <dl class="switch">
       <dt> If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array⑦">"texture-array"</a></code>: 
       <dd> If the session’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view①">views</a> in the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views⑦">list of views</a> don’t all have the same <a data-link-type="dfn">recommended WebGL texture resolution</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view⑤">secondary views</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror②">NotSupportedError</a></code> and abort these steps. 
       <dd> Initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑧">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①⑤">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑧">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7①">TEXTURE_2D_ARRAY</a></code> texture with <var>numViews</var> layers using <var>context</var>, <var>textureFormat</var>, <var>width</var> and <var>height</var>. 
       <dd> Return <var>array</var> and abort these steps. 
       <dt> Otherwise 
       <dd>
         For each <var>view</var> in the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views⑧">list of views</a>: 
        <ol>
         <li data-md>
          <p>If <var>view</var> is a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view⑥">secondary view</a>, continue.</p>
         <li data-md>
          <p>Let <var>width</var> be the width of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
         <li data-md>
          <p>Let <var>height</var> be the height of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
         <li data-md>
          <p>let <var>texture</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑨">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①⑥">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑨">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14①⑦">TEXTURE_2D</a></code> texture with <var>context</var>, <var>textureFormat</var>, <var>width</var> and <var>height</var>.</p>
         <li data-md>
          <p>Append <var>texture</var> to <var>array</var>.</p>
        </ol>
       <dd> Return <var>array</var> and abort these steps. 
      </dl>
     <li data-md>
      <p>If the session’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view②">views</a> in the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views⑨">list of views</a> don’t all have the same <a data-link-type="dfn">recommended WebGL texture resolution</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view⑦">secondary views</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror③">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout②">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right⑥">stereo-left-right</a></code>, initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⓪">new</a> instance of <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①⑦">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①⓪">relevant realm</a> of <var>context</var> created as a <var>textureType</var> texture using <var>context</var> , <var>textureFormat</var>, <var>numViews</var> multiplied by <var>width</var> and <var>height</var>.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout③">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom⑤">stereo-top-bottom</a></code>, initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①①">new</a> instance of <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①⑧">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①①">relevant realm</a> of <var>context</var> created as a <var>textureType</var> texture using <var>context</var> , <var>textureFormat</var>, <var>width</var> and <var>numViews</var> multiplied by <var>height</var>.</p>
     <li data-md>
      <p>return <var>array</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="allocate depth textures for projection layers">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="allocate-depth-textures-for-projection-layers">allocate depth textures for projection layers</dfn> using an <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①③">XRProjectionLayer</a></code> <var>layer</var>, an <code class="idl"><a data-link-type="idl" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype⑦">XRTextureType</a></code> <var>textureType</var>, a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1" id="ref-for-5.1⑤">GLenum</a></code> <var>textureFormat</var> and a float <var>scaleFactor</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>array</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①②">new</a> array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①②">relevant realm</a> of <var>context</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-context" id="ref-for-xrcompositionlayer-context②">context</a>.</p>
     <li data-md>
      <p>Let <var>session</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session③">session</a>.</p>
     <li data-md>
      <p>If <var>textureFormat</var> is <code>0</code>, return <var>array</var> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext⑥">WebGLRenderingContext</a></code> and the <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#webgl_depth_texture" id="ref-for-webgl_depth_texture②">WEBGL_depth_texture</a></code> <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14⑨">extension</a> is not enabled in <var>context</var>, return <var>array</var> and abort these steps.</p>
     <li data-md>
      <p>If <var>textureFormat</var> is not in the <a data-link-type="dfn" href="#list-of-depth-formats-for-projection-layers" id="ref-for-list-of-depth-formats-for-projection-layers">list of depth formats for projection layers</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror④">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>let <var>numViews</var> be the number of the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①⓪">list of views</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view⑧">secondary views</a>.</p>
     <li data-md>
      <p>Let <var>view</var> be the first entry in the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①①">list of views</a> that is not a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view⑨">secondary view</a>.</p>
     <li data-md>
      <p>Let <var>width</var> be the width of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
     <li data-md>
      <p>Let <var>height</var> be the height of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout④">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono④">"mono"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default⑥">"default"</a></code>:</p>
      <dl class="switch">
       <dt> If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array⑧">"texture-array"</a></code>: 
       <dd> Initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①③">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture①⑨">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①③">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7②">TEXTURE_2D_ARRAY</a></code> texture with <var>numViews</var> layers using <var>context</var>, <var>textureFormat</var>, <var>stencil</var>, <var>width</var> and <var>height</var>. 
       <dd> Return <var>array</var> and abort these steps. 
       <dt> Otherwise 
       <dd>
         For each <var>view</var> in the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①②">list of views</a>: 
        <ol>
         <li data-md>
          <p>If <var>view</var> is a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①⓪">secondary view</a>, continue.</p>
         <li data-md>
          <p>Let <var>width</var> be the width of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
         <li data-md>
          <p>Let <var>height</var> be the height of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
         <li data-md>
          <p>let <var>texture</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①④">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②⓪">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①④">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14①⑧">TEXTURE_2D</a></code> texture with <var>context</var>, <var>textureFormat</var>, <var>stencil</var>, <var>width</var> and <var>height</var>.</p>
         <li data-md>
          <p>Append <var>texture</var> to <var>array</var>.</p>
        </ol>
       <dd> Return <var>array</var> and abort these steps. 
      </dl>
     <li data-md>
      <p>If the session’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view③">views</a> in the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①③">list of views</a> don’t all have the same <a data-link-type="dfn">recommended WebGL texture resolution</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①①">secondary views</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror⑤">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout⑤">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right⑦">stereo-left-right</a></code>, initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑤">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②①">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①⑤">relevant realm</a> of <var>context</var> created as a <var>textureType</var> texture using <var>context</var>, <var>textureFormat</var>, <var>stencil</var>, <var>numViews</var> multiplied by <var>width</var> and <var>height</var>.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout⑥">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom⑥">stereo-top-bottom</a></code>, initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑥">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②②">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①⑥">relevant realm</a> of <var>context</var> created as a <var>textureType</var> texture using <var>context</var>, <var>textureFormat</var>, <var>stencil</var>, <var>width</var> and <var>numViews</var> multiplied by <var>height</var>.</p>
     <li data-md>
      <p>return <var>array</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="allocate color textures for the secondary views">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="allocate-the-color-textures-for-the-secondary-views">allocate the color textures for the secondary views</dfn> using an <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①④">XRProjectionLayer</a></code> <var>layer</var>, an <code class="idl"><a data-link-type="idl" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype⑧">XRTextureType</a></code> <var>textureType</var>, a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1" id="ref-for-5.1⑥">GLenum</a></code> <var>textureFormat</var> and a float <var>scaleFactor</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>context</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-context" id="ref-for-xrcompositionlayer-context③">context</a>.</p>
     <li data-md>
      <p>Let <var>session</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session④">session</a>.</p>
     <li data-md>
      <p>Let <var>array</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑦">new</a> array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①⑦">relevant realm</a> of <var>context</var>.</p>
     <li data-md>
      <p>If <var>textureFormat</var> is not in the <a data-link-type="dfn" href="#list-of-color-formats-for-projection-layers" id="ref-for-list-of-color-formats-for-projection-layers①">list of color formats for projection layers</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror⑥">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>For each <var>view</var> in the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①④">list of views</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>view</var> is not a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①②">secondary view</a>, continue.</p>
       <li data-md>
        <p>Let <var>width</var> be the width of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
       <li data-md>
        <p>Let <var>height</var> be the height of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
       <li data-md>
        <p>Initialize <var>texture</var> as follows:</p>
        <dl class="switch">
         <dt> If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array⑨">"texture-array"</a></code>: 
         <dd> Let <var>texture</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑧">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②③">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①⑧">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7③">TEXTURE_2D_ARRAY</a></code> texture with <var>context</var>, <var>textureFormat</var>, <var>width</var> and <var>height</var>. 
         <dt> Otherwise 
         <dd> Let <var>texture</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑨">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②④">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①⑨">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14①⑨">TEXTURE_2D</a></code> texture with <var>context</var>, <var>textureFormat</var>, <var>width</var> and <var>height</var>. 
        </dl>
       <li data-md>
        <p>Append <var>texture</var> to <var>array</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>array</var> and abort these steps.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="allocate depth textures for the secondary views">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="allocate-the-depth-textures-for-the-secondary-views">allocate the depth textures for the secondary views</dfn> using an <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①⑤">XRProjectionLayer</a></code> <var>layer</var>, an <code class="idl"><a data-link-type="idl" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype⑨">XRTextureType</a></code> <var>textureType</var>, a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1" id="ref-for-5.1⑦">GLenum</a></code> <var>textureFormat</var> and a float <var>scaleFactor</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>context</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-context" id="ref-for-xrcompositionlayer-context④">context</a>.</p>
     <li data-md>
      <p>Let <var>session</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session⑤">session</a>.</p>
     <li data-md>
      <p>If <var>textureFormat</var> is <code>0</code>, return <var>array</var> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext⑦">WebGLRenderingContext</a></code> and the <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#webgl_depth_texture" id="ref-for-webgl_depth_texture③">WEBGL_depth_texture</a></code> <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14①⓪">extension</a> is not enabled in <var>context</var>, return <var>array</var> and abort these steps.</p>
     <li data-md>
      <p>If <var>textureFormat</var> is not in the <a data-link-type="dfn" href="#list-of-depth-formats-for-projection-layers" id="ref-for-list-of-depth-formats-for-projection-layers①">list of depth formats for projection layers</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror⑦">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>array</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②⓪">new</a> array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②⓪">relevant realm</a> of <var>context</var>.</p>
     <li data-md>
      <p>For each <var>view</var> in the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①⑤">list of views</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>view</var> is not a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①③">secondary view</a>, continue.</p>
       <li data-md>
        <p>Let <var>width</var> be the width of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
       <li data-md>
        <p>Let <var>height</var> be the height of <var>view</var>’s <a data-link-type="dfn">recommended WebGL texture resolution</a> multiplied by <var>scaleFactor</var>.</p>
       <li data-md>
        <p>Initialize <var>texture</var> as follows:</p>
        <dl class="switch">
         <dt> If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array①⓪">"texture-array"</a></code>: 
         <dd> Let <var>texture</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②①">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②⑤">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②①">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7④">TEXTURE_2D_ARRAY</a></code> texture with <var>context</var>, <var>textureFormat</var>, <var>stencil</var>, <var>width</var> and <var>height</var>. 
         <dt> Otherwise 
         <dd> Let <var>texture</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②②">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②⑥">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②②">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②⓪">TEXTURE_2D</a></code> texture with <var>context</var>, <var>textureFormat</var>, <var>stencil</var>, <var>width</var> and <var>height</var>. 
        </dl>
       <li data-md>
        <p>Append <var>texture</var> to <var>array</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>array</var> and abort these steps.</p>
    </ol>
   </div>
   <p class="issue" id="issue-72d3b5f4"><a class="self-link" href="#issue-72d3b5f4"></a> the scaleFactor needs to be recalculated for the secondary views.</p>
   <div class="algorithm" data-algorithm="allocate color textures">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="allocate-color-textures">allocate color textures</dfn> using an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②⓪">XRCompositionLayer</a></code> <var>layer</var>, an <code class="idl"><a data-link-type="idl" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype①⓪">XRTextureType</a></code> <var>textureType</var> and an <code class="idl"><a data-link-type="idl" href="#dictdef-xrlayerinit" id="ref-for-dictdef-xrlayerinit⑥">XRLayerInit</a></code> <var>init</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>let <var>array</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②③">new</a> array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②③">relevant realm</a> of <var>context</var>.</p>
     <li data-md>
      <p>let <var>context</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-context" id="ref-for-xrcompositionlayer-context⑤">context</a>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat①">colorFormat</a></code> is not in the <a data-link-type="dfn" href="#list-of-color-formats-for-non-projection-layers" id="ref-for-list-of-color-formats-for-non-projection-layers">list of color formats for non-projection layers</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror⑧">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels⑤">mipLevels</a></code> is smaller than <code>1</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror④">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels⑥">mipLevels</a></code> is larger than <code>1</code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①">viewPixelHeight</a></code> are not powers of <code>2</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror⑤">InvalidStateError</a></code> and abort these steps</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout⑦">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono⑤">"mono"</a></code>:</p>
      <dl class="switch">
       <dt> If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array①①">"texture-array"</a></code>: 
       <dd> Initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②④">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②⑦">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②④">relevant realm</a> of this <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7⑤">TEXTURE_2D_ARRAY</a></code> texture with 1 internal texture using <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat②">colorFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels⑦">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth②">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight②">viewPixelHeight</a></code> values. 
       <dt> Otherwise 
       <dd>
         Initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②⑤">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②⑧">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②⑤">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②①">TEXTURE_2D</a></code> texture with <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat③">colorFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels⑧">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth③">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight③">viewPixelHeight</a></code> values. 
        <dl></dl>
      </dl>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout⑧">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo" id="ref-for-dom-xrlayerlayout-stereo④">"stereo"</a></code>:</p>
      <dl class="switch">
       <dt> If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array①②">"texture-array"</a></code>: 
       <dd> Initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②⑥">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture②⑨">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②⑥">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7⑥">TEXTURE_2D_ARRAY</a></code> texture with 2 layers using <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat④">colorFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels⑨">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth④">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight④">viewPixelHeight</a></code> values. 
       <dd> Return <var>array</var> and abort these steps. 
       <dt> Otherwise 
       <dd> Initialize <var>array</var> with 2 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②⑦">new</a> instances of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③⓪">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②⑦">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②②">TEXTURE_2D</a></code> texture with <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat⑤">colorFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①⓪">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth⑤">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight⑤">viewPixelHeight</a></code> values. 
       <dd> Return <var>array</var> and abort these steps. 
      </dl>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout⑨">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right⑧">stereo-left-right</a></code>, initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②⑧">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③①">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②⑧">relevant realm</a> of <var>context</var> created as a <var>textureType</var> texture using <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat⑥">colorFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①①">mipLevels</a></code>, double of <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth⑥">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight⑥">viewPixelHeight</a></code> values.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①⓪">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom⑦">stereo-top-bottom</a></code>, initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②⑨">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③②">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②⑨">relevant realm</a> of <var>context</var> created as a <var>textureType</var> texture using <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat⑦">colorFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①②">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth⑦">viewPixelWidth</a></code> and double of <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight⑦">viewPixelHeight</a></code> values.</p>
     <li data-md>
      <p>return <var>array</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="allocate depth textures">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="allocate-depth-textures">allocate depth textures</dfn> using an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②①">XRCompositionLayer</a></code> <var>layer</var>, an <code class="idl"><a data-link-type="idl" href="#enumdef-xrtexturetype" id="ref-for-enumdef-xrtexturetype①①">XRTextureType</a></code> <var>textureType</var> and an <code class="idl"><a data-link-type="idl" href="#dictdef-xrlayerinit" id="ref-for-dictdef-xrlayerinit⑦">XRLayerInit</a></code> <var>init</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>let <var>array</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③⓪">new</a> array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③⓪">relevant realm</a> of <var>context</var>.</p>
     <li data-md>
      <p>let <var>context</var> be <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-context" id="ref-for-xrcompositionlayer-context⑥">context</a>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat②">depthFormat</a></code> is not set, return <var>array</var> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat③">depthFormat</a></code> is not in the <a data-link-type="dfn" href="#list-of-depth-formats-for-non-projection-layers" id="ref-for-list-of-depth-formats-for-non-projection-layers">list of depth formats for non-projection layers</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror⑨">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①③">mipLevels</a></code> is smaller than <code>1</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror⑥">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①④">mipLevels</a></code> is larger than <code>1</code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth⑧">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight⑧">viewPixelHeight</a></code> are not powers of <code>2</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror⑦">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①①">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono⑥">"mono"</a></code>:</p>
      <dl class="switch">
       <dt> If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array①③">"texture-array"</a></code>: 
       <dd> Initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③①">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③③">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③①">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7⑦">TEXTURE_2D_ARRAY</a></code> texture with 1 internal texture using <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat④">depthFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①⑤">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth⑨">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight⑨">viewPixelHeight</a></code> values. 
       <dt> Otherwise 
       <dd> Initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③②">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③④">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③②">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②③">TEXTURE_2D</a></code> texture with <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat⑤">depthFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①⑥">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①⓪">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①⓪">viewPixelHeight</a></code> values. 
      </dl>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①②">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo" id="ref-for-dom-xrlayerlayout-stereo⑤">"stereo"</a></code>:</p>
      <dl class="switch">
       <dt> If <var>textureType</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array①④">"texture-array"</a></code>: 
       <dd> Initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③③">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③⑤">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③③">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.7" id="ref-for-3.7⑧">TEXTURE_2D_ARRAY</a></code> texture with 2 layers using <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat⑥">depthFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①⑦">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①①">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①①">viewPixelHeight</a></code> values. 
       <dd> Return <var>array</var> and abort these steps. 
       <dt> Otherwise 
       <dd> Initialize <var>array</var> with 2 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③④">new</a> instances of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③⑥">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③④">relevant realm</a> of <var>context</var> created as a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②④">TEXTURE_2D</a></code> texture with <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat⑦">depthFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①⑧">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①②">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①②">viewPixelHeight</a></code> values. 
       <dd> Return <var>array</var> and abort these steps. 
      </dl>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①③">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right⑨">stereo-left-right</a></code>, initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③⑤">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③⑦">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③⑤">relevant realm</a> of <var>context</var> created as a <var>textureType</var> texture using <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat⑧">depthFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels①⑨">mipLevels</a></code>, double of <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①③">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①③">viewPixelHeight</a></code> values.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①④">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom⑧">stereo-top-bottom</a></code>, initialize <var>array</var> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③⑥">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③⑧">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③⑥">relevant realm</a> of <var>context</var> created as a <var>textureType</var> texture using <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat⑨">depthFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-miplevels" id="ref-for-dom-xrlayerinit-miplevels②⓪">mipLevels</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①④">viewPixelWidth</a></code> and double of <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①④">viewPixelHeight</a></code> values.</p>
     <li data-md>
      <p>return <var>array</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="createProjectionLayerAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="method" data-export data-lt="createProjectionLayer(init)|createProjectionLayer()" id="dom-xrwebglbinding-createprojectionlayer"><code>createProjectionLayer(optional XRProjectionLayerInit <var>init</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①⑥">XRProjectionLayer</a></code> <var>layer</var>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a> <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session②">session</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a> <a data-link-type="dfn" href="#xrwebglbinding-context" id="ref-for-xrwebglbinding-context②">context</a>.</p>
     <li data-md>
      <p>Let <var>layer</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③⑦">new</a> <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①⑦">XRProjectionLayer</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③⑦">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end①">ended</a> value is <code>true</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror⑧">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is lost, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror⑨">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#intialize-a-composition-layer" id="ref-for-intialize-a-composition-layer">intialize a composition layer</a> on <var>layer</var> with <var>session</var> and <var>context</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-isstatic" id="ref-for-xrcompositionlayer-isstatic④">isStatic</a> to <code>false</code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayer-ignoredepthvalues" id="ref-for-dom-xrprojectionlayer-ignoredepthvalues①">ignoreDepthValues</a></code> as follows:</p>
      <dl class="switch">
       <dt> If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-depthformat" id="ref-for-dom-xrprojectionlayerinit-depthformat②">depthFormat</a></code> is <code>false</code> and the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②⓪">XR Compositor</a> will make use of depth values 
       <dd> Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayer-ignoredepthvalues" id="ref-for-dom-xrprojectionlayer-ignoredepthvalues②">ignoreDepthValues</a></code> to <code>false</code> 
       <dt> Otherwise 
       <dd> Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayer-ignoredepthvalues" id="ref-for-dom-xrprojectionlayer-ignoredepthvalues③">ignoreDepthValues</a></code> to <code>true</code> 
      </dl>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayer-fixedfoveation" id="ref-for-dom-xrprojectionlayer-fixedfoveation③">fixedFoveation</a></code> to <code>0</code>.</p>
     <li data-md>
      <p>let <var>layout</var> be the result of <a data-link-type="dfn" href="#determine-the-layout-attribute" id="ref-for-determine-the-layout-attribute">determining the layout attribute</a> with <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-texturetype" id="ref-for-dom-xrprojectionlayerinit-texturetype②">textureType</a></code>, <var>context</var> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default⑦">"default"</a></code>.</p>
     <li data-md>
      <p>Let <var>maximum scalefactor</var> be the result of <a data-link-type="dfn" href="#determine-the-maximum-scalefactor" id="ref-for-determine-the-maximum-scalefactor">determining the maximum scalefactor</a> with <var>session</var>, <var>context</var> and <var>layout</var>.</p>
     <li data-md>
      <p>If <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-scalefactor" id="ref-for-dom-xrprojectionlayerinit-scalefactor①">scaleFactor</a></code> is larger than <var>maximum scalefactor</var>, set <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-scalefactor" id="ref-for-dom-xrprojectionlayerinit-scalefactor②">scaleFactor</a></code> to <var>maximum scalefactor</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①⑤">layout</a></code> to <var>layout</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw③">needsRedraw</a></code> to <code>true</code>.</p>
     <li data-md>
      <p>let <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures④">colorTextures</a> be the result of <a data-link-type="dfn" href="#allocate-color-textures-for-projection-layers" id="ref-for-allocate-color-textures-for-projection-layers">allocating color textures for projection layers</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-texturetype" id="ref-for-dom-xrprojectionlayerinit-texturetype③">textureType</a></code>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-colorformat" id="ref-for-dom-xrprojectionlayerinit-colorformat①">colorFormat</a></code> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-scalefactor" id="ref-for-dom-xrprojectionlayerinit-scalefactor③">scaleFactor</a></code>.</p>
     <li data-md>
      <p>let <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures①">depthStencilTextures</a> be the result of <a data-link-type="dfn" href="#allocate-depth-textures-for-projection-layers" id="ref-for-allocate-depth-textures-for-projection-layers">allocating depth textures for projection layers</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-texturetype" id="ref-for-dom-xrprojectionlayerinit-texturetype④">textureType</a></code>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-depthformat" id="ref-for-dom-xrprojectionlayerinit-depthformat③">depthFormat</a></code> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-scalefactor" id="ref-for-dom-xrprojectionlayerinit-scalefactor④">scaleFactor</a></code>.</p>
     <li data-md>
      <p>Initialize the <a data-link-type="dfn" href="#xrprojectionlayer-colortextures-for-secondary-views" id="ref-for-xrprojectionlayer-colortextures-for-secondary-views">colortextures for secondary views</a> as follows:</p>
      <dl class="switch">
       <dt> If the <var>session</var> was created with "<a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view-secondary-views" id="ref-for-secondary-view-secondary-views">secondary-views</a>" enabled 
       <dd> Let <a data-link-type="dfn" href="#xrprojectionlayer-colortextures-for-secondary-views" id="ref-for-xrprojectionlayer-colortextures-for-secondary-views①">colortextures for secondary views</a> be the result of <a data-link-type="dfn" href="#allocate-the-color-textures-for-the-secondary-views" id="ref-for-allocate-the-color-textures-for-the-secondary-views">allocate the color textures for the secondary views</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-texturetype" id="ref-for-dom-xrprojectionlayerinit-texturetype⑤">textureType</a></code>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-colorformat" id="ref-for-dom-xrprojectionlayerinit-colorformat②">colorFormat</a></code> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-scalefactor" id="ref-for-dom-xrprojectionlayerinit-scalefactor⑤">scaleFactor</a></code>. 
       <dt> Otherwise 
       <dd> Let <a data-link-type="dfn" href="#xrprojectionlayer-colortextures-for-secondary-views" id="ref-for-xrprojectionlayer-colortextures-for-secondary-views②">colortextures for secondary views</a> be <code>null</code>. 
      </dl>
     <li data-md>
      <p>Initialize the <a data-link-type="dfn" href="#xrprojectionlayer-depthstenciltextures-for-secondary-views" id="ref-for-xrprojectionlayer-depthstenciltextures-for-secondary-views">depthstenciltextures for secondary views</a> as follows:</p>
      <dl class="switch">
       <dt> If the <var>session</var> was created with "<a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view-secondary-views" id="ref-for-secondary-view-secondary-views①">secondary-views</a>" enabled 
       <dd> Let <a data-link-type="dfn" href="#xrprojectionlayer-depthstenciltextures-for-secondary-views" id="ref-for-xrprojectionlayer-depthstenciltextures-for-secondary-views①">depthstenciltextures for secondary views</a> be the result of <a data-link-type="dfn" href="#allocate-the-depth-textures-for-the-secondary-views" id="ref-for-allocate-the-depth-textures-for-the-secondary-views">allocate the depth textures for the secondary views</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-texturetype" id="ref-for-dom-xrprojectionlayerinit-texturetype⑥">textureType</a></code>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-depthformat" id="ref-for-dom-xrprojectionlayerinit-depthformat④">depthFormat</a></code> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrprojectionlayerinit-scalefactor" id="ref-for-dom-xrprojectionlayerinit-scalefactor⑥">scaleFactor</a></code>. 
       <dt> Otherwise 
       <dd> Let <a data-link-type="dfn" href="#xrprojectionlayer-depthstenciltextures-for-secondary-views" id="ref-for-xrprojectionlayer-depthstenciltextures-for-secondary-views②">depthstenciltextures for secondary views</a> be <code>null</code>. 
      </dl>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②①">XR Compositor</a> knows that it will be unable to create the resources for the <var>layer</var> for any reason, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror">OperationError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Return <var>layer</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="createQuadLayerAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="method" data-export data-lt="createQuadLayer(init)|createQuadLayer()" id="dom-xrwebglbinding-createquadlayer"><code>createQuadLayer(XRQuadLayerInit <var>init</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer⑨">XRQuadLayer</a></code> <var>layer</var>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a> <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session③">session</a>.</p>
     <li data-md>
      <p>If <var>session</var> was not created with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers②">layers</a>" enabled, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①⓪">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>context</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a> <a data-link-type="dfn" href="#xrwebglbinding-context" id="ref-for-xrwebglbinding-context③">context</a>.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end②">ended</a> value is <code>true</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①⓪">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is lost, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①①">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default⑧">"default"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>layer</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③⑧">new</a> <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer①⓪">XRQuadLayer</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③⑧">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#intialize-a-composition-layer" id="ref-for-intialize-a-composition-layer①">intialize a composition layer</a> on <var>layer</var> with <var>session</var> and <var>context</var>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#initialize-a-quad-layer" id="ref-for-initialize-a-quad-layer">initialize a quad layer</a> with <var>layer</var> and <var>init</var>.</p>
     <li data-md>
      <p>let <var>layout</var> be the result of <a data-link-type="dfn" href="#determine-the-layout-attribute" id="ref-for-determine-the-layout-attribute①">determining the layout attribute</a> with <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayerinit-texturetype" id="ref-for-dom-xrquadlayerinit-texturetype">textureType</a></code>, <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-layout" id="ref-for-dom-xrlayerinit-layout①">layout</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①⑥">layout</a></code> to <var>layout</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw④">needsRedraw</a></code> to <code>true</code>.</p>
     <li data-md>
      <p>let <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures⑤">colorTextures</a> be the result of <a data-link-type="dfn" href="#allocate-color-textures" id="ref-for-allocate-color-textures①">allocating color textures</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayerinit-texturetype" id="ref-for-dom-xrquadlayerinit-texturetype①">textureType</a></code> and <var>init</var>.</p>
     <li data-md>
      <p>let <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures②">depthStencilTextures</a> be the result of <a data-link-type="dfn" href="#allocate-depth-textures" id="ref-for-allocate-depth-textures①">allocating depth textures</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrquadlayerinit-texturetype" id="ref-for-dom-xrquadlayerinit-texturetype②">textureType</a></code> and <var>init</var>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②②">XR Compositor</a> knows that it will be unable to create the resources for the <var>layer</var> for any reason, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror①">OperationError</a></code> and abort these steps.</p>
     <li data-md>
      <p>return <var>layer</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="createCylinderLayerAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="method" data-export data-lt="createCylinderLayer(init)|createCylinderLayer()" id="dom-xrwebglbinding-createcylinderlayer"><code>createCylinderLayer(XRCylinderLayerInit <var>init</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer⑧">XRCylinderLayer</a></code> <var>layer</var>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a> <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session④">session</a>.</p>
     <li data-md>
      <p>If <var>session</var> was not created with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers③">layers</a>" enabled, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①①">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>context</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a> <a data-link-type="dfn" href="#xrwebglbinding-context" id="ref-for-xrwebglbinding-context④">context</a>.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end③">ended</a> value is <code>true</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①②">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is lost, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①③">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default⑨">"default"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>layer</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③⑨">new</a> <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer⑨">XRCylinderLayer</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③⑨">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#intialize-a-composition-layer" id="ref-for-intialize-a-composition-layer②">intialize a composition layer</a> on <var>layer</var> with <var>session</var> and <var>context</var>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#initialize-a-cylinder-layer" id="ref-for-initialize-a-cylinder-layer">initialize a cylinder layer</a> with <var>layer</var> and <var>init</var>.</p>
     <li data-md>
      <p>let <var>layout</var> be the result of <a data-link-type="dfn" href="#determine-the-layout-attribute" id="ref-for-determine-the-layout-attribute②">determining the layout attribute</a> with <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-texturetype" id="ref-for-dom-xrcylinderlayerinit-texturetype">textureType</a></code>, <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-layout" id="ref-for-dom-xrlayerinit-layout②">layout</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①⑦">layout</a></code> to <var>layout</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw⑤">needsRedraw</a></code> to <code>true</code>.</p>
     <li data-md>
      <p>let <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures⑥">colorTextures</a> be the result of <a data-link-type="dfn" href="#allocate-color-textures" id="ref-for-allocate-color-textures②">allocating color textures</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-texturetype" id="ref-for-dom-xrcylinderlayerinit-texturetype①">textureType</a></code> and <var>init</var>.</p>
     <li data-md>
      <p>let <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures③">depthStencilTextures</a> be the result of <a data-link-type="dfn" href="#allocate-depth-textures" id="ref-for-allocate-depth-textures②">allocating depth textures</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-texturetype" id="ref-for-dom-xrcylinderlayerinit-texturetype②">textureType</a></code> and <var>init</var>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②③">XR Compositor</a> knows that it will be unable to create the resources for the <var>layer</var> for any reason, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror②">OperationError</a></code> and abort these steps.</p>
     <li data-md>
      <p>return <var>layer</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="createEquirectLayerAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="method" data-export data-lt="createEquirectLayer(init)|createEquirectLayer()" id="dom-xrwebglbinding-createequirectlayer"><code>createEquirectLayer(XREquirectLayerLayerInit <var>init</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer⑧">XREquirectLayer</a></code> <var>layer</var>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a> <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session⑤">session</a>.</p>
     <li data-md>
      <p>If <var>session</var> was not created with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers④">layers</a>" enabled, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①②">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>context</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a> <a data-link-type="dfn" href="#xrwebglbinding-context" id="ref-for-xrwebglbinding-context⑤">context</a>.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end④">ended</a> value is <code>true</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①④">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is lost, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①⑤">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①⓪">"default"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space⑧">space</a></code> is not an instance of type <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrreferencespace" id="ref-for-xrreferencespace③">XRReferenceSpace</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space⑨">space</a></code> has a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrreferencespace-type" id="ref-for-xrreferencespace-type②">type</a> of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-viewer" id="ref-for-dom-xrreferencespacetype-viewer⑤">"viewer"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>layer</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④⓪">new</a> <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer⑨">XREquirectLayer</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④⓪">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#intialize-a-composition-layer" id="ref-for-intialize-a-composition-layer③">intialize a composition layer</a> on <var>layer</var> with <var>session</var> and <var>context</var>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#initialize-a-equirect-layer" id="ref-for-initialize-a-equirect-layer">initialize a equirect layer</a> with <var>layer</var> and <var>init</var>.</p>
     <li data-md>
      <p>let <var>layout</var> be the result of <a data-link-type="dfn" href="#determine-the-layout-attribute" id="ref-for-determine-the-layout-attribute③">determining the layout attribute</a> with <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-texturetype" id="ref-for-dom-xrcylinderlayerinit-texturetype③">textureType</a></code>, <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-layout" id="ref-for-dom-xrlayerinit-layout③">layout</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①⑧">layout</a></code> to <var>layout</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw⑥">needsRedraw</a></code> to <code>true</code>.</p>
     <li data-md>
      <p>let <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures⑦">colorTextures</a> be the result of <a data-link-type="dfn" href="#allocate-color-textures" id="ref-for-allocate-color-textures③">allocating color textures</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-texturetype" id="ref-for-dom-xrcylinderlayerinit-texturetype④">textureType</a></code> and <var>init</var>.</p>
     <li data-md>
      <p>let <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures④">depthStencilTextures</a> be the result of <a data-link-type="dfn" href="#allocate-depth-textures" id="ref-for-allocate-depth-textures③">allocating depth textures</a> with <var>layer</var>, <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcylinderlayerinit-texturetype" id="ref-for-dom-xrcylinderlayerinit-texturetype⑤">textureType</a></code> and <var>init</var>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②④">XR Compositor</a> knows that it will be unable to create the resources for the <var>layer</var> for any reason, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror③">OperationError</a></code> and abort these steps.</p>
     <li data-md>
      <p>return <var>layer</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="createCubeLayerAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="method" data-export data-lt="createCubeLayer(init)|createCubeLayer()" id="dom-xrwebglbinding-createcubelayer"><code>createCubeLayer(XRCubeLayerInit <var>init</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer⑧">XRCubeLayer</a></code> <var>layer</var>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a> <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session⑥">session</a>.</p>
     <li data-md>
      <p>If <var>session</var> was not created with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers⑤">layers</a>" enabled, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①③">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>context</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a> <a data-link-type="dfn" href="#xrwebglbinding-context" id="ref-for-xrwebglbinding-context⑥">context</a>.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end⑤">ended</a> value is <code>true</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①⑥">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is not a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext" id="ref-for-WebGL2RenderingContext⑥">WebGL2RenderingContext</a></code> context, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①⑦">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>context</var> is lost, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①⑧">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space①⓪">space</a></code> is not an instance of type <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrreferencespace" id="ref-for-xrreferencespace④">XRReferenceSpace</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①②">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space①①">space</a></code> has a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrreferencespace-type" id="ref-for-xrreferencespace-type③">type</a> of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-viewer" id="ref-for-dom-xrreferencespacetype-viewer⑥">"viewer"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①③">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>layer</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④①">new</a> <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer⑨">XRCubeLayer</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④①">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②②">this</a>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#intialize-a-composition-layer" id="ref-for-intialize-a-composition-layer④">intialize a composition layer</a> on <var>layer</var> with <var>session</var> and <var>context</var>.</p>
     <li data-md>
      <p>Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-space" id="ref-for-dom-xrcubelayer-space④">space</a></code> be the <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space①②">space</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-isstatic" id="ref-for-xrcompositionlayer-isstatic⑤">isStatic</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-isstatic" id="ref-for-dom-xrlayerinit-isstatic③">isStatic</a></code></p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-orientation" id="ref-for-dom-xrcubelayer-orientation②">orientation</a></code> as follows:</p>
      <dl class="switch">
       <dt class="switch">If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayerinit-orientation" id="ref-for-dom-xrcubelayerinit-orientation">orientation</a></code> is set 
       <dd> Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-orientation" id="ref-for-dom-xrcubelayer-orientation③">orientation</a></code> be the result of running <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointreadonly-frompoint" id="ref-for-dom-dompointreadonly-frompoint">fromPoint</a></code> with <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayerinit-orientation" id="ref-for-dom-xrcubelayerinit-orientation①">orientation</a></code>. 
       <dt> Otherwise 
       <dd> Let <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-orientation" id="ref-for-dom-xrcubelayer-orientation④">orientation</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④②">new</a> <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dompointreadonly" id="ref-for-dompointreadonly②">DOMPointReadOnly</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④②">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②③">this</a>. 
      </dl>
     <li data-md>
      <p>let <var>layout</var> be <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-layout" id="ref-for-dom-xrlayerinit-layout④">layout</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw⑦">needsRedraw</a></code> to <code>true</code>.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①①">"default"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right①⓪">"stereo-left-right"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom⑨">"stereo-top-bottom"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①④">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures⑧">colorTextures</a> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④③">new</a> array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④③">relevant realm</a> of this <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer①⓪">XRCubeLayer</a></code>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures⑨">colorTextures</a> as follows, based on the value of <var>layout</var>:</p>
      <dl class="switch">
       <dt> <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono⑦">"mono"</a></code>: 
       <dd> Initialize <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures①⓪">colorTextures</a> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④④">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture③⑨">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④④">relevant realm</a> of this <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer①①">XRCubeLayer</a></code> created as a <code class="idl"><a data-link-type="idl" data-refhint-key="9f1b0b77" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②⑤">TEXTURE_CUBE_MAP</a></code> texture with <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat⑧">colorFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①⑤">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①⑤">viewPixelHeight</a></code> values. 
       <dt> Otherwise 
       <dd> Initialize <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures①①">colorTextures</a> with 2 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④⑤">new</a> instances of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture④⓪">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④⑤">relevant realm</a> of this <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer①②">XRCubeLayer</a></code> created as a <code class="idl"><a data-link-type="idl" data-refhint-key="9f1b0b77" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②⑥">TEXTURE_CUBE_MAP</a></code> texture with <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-colorformat" id="ref-for-dom-xrlayerinit-colorformat⑨">colorFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①⑥">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①⑥">viewPixelHeight</a></code> values. 
      </dl>
     <li data-md>
      <p>Let <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures⑤">depthStencilTextures</a> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④⑥">new</a> array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④⑥">relevant realm</a> of this <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer①③">XRCubeLayer</a></code>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat①⓪">depthFormat</a></code> is set, initialize <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures⑥">depthStencilTextures</a> as follows:</p>
      <dl class="switch">
       <dt> If <var>context</var> is not a <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext" id="ref-for-WebGL2RenderingContext⑦">WebGL2RenderingContext</a></code> and the <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/#webgl_depth_texture" id="ref-for-webgl_depth_texture④">WEBGL_depth_texture</a></code> <a data-link-type="dfn" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.14" id="ref-for-5.14.14①①">extension</a> is not enabled in <var>context</var> 
       <dd> Throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑤">TypeError</a></code> and abort these steps. 
       <dt> Else if <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono⑧">"mono"</a></code> 
       <dd> Initialize <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures⑦">depthStencilTextures</a> with 1 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④⑦">new</a> instance of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture④①">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④⑦">relevant realm</a> of this <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer①④">XRCubeLayer</a></code> created as a <code class="idl"><a data-link-type="idl" data-refhint-key="9f1b0b77" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②⑦">TEXTURE_CUBE_MAP</a></code> texture with <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat①①">depthFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①⑦">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①⑦">viewPixelHeight</a></code> values. 
       <dt> Otherwise 
       <dd> Initialize <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures⑧">depthStencilTextures</a> with 2 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④⑧">new</a> instances of an <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture④②">opaque texture</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④⑧">relevant realm</a> of this <code class="idl"><a data-link-type="idl" href="#xrcubelayer" id="ref-for-xrcubelayer①⑤">XRCubeLayer</a></code> created as a <code class="idl"><a data-link-type="idl" data-refhint-key="9f1b0b77" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14" id="ref-for-5.14②⑧">TEXTURE_CUBE_MAP</a></code> texture with <var>context</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-depthformat" id="ref-for-dom-xrlayerinit-depthformat①②">depthFormat</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelwidth" id="ref-for-dom-xrlayerinit-viewpixelwidth①⑧">viewPixelWidth</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-viewpixelheight" id="ref-for-dom-xrlayerinit-viewpixelheight①⑧">viewPixelHeight</a></code> values. 
      </dl>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②⑤">XR Compositor</a> knows that it will be unable to create the resources for the <var>layer</var> for any reason, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror④">OperationError</a></code> and abort these steps.</p>
     <li data-md>
      <p>return <var>layer</var>.</p>
    </ol>
   </div>
   <p class="issue" id="issue-0072179b"><a class="self-link" href="#issue-0072179b"></a> Define how cubemap sizes are determined.</p>
   <p class="issue" id="issue-ec6c3781"><a class="self-link" href="#issue-ec6c3781"></a> How should space be handled. Can you walk to the edge of a cubemap?</p>
   <p class="issue" id="issue-61920327"><a class="self-link" href="#issue-61920327"></a> determine the initial state of <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-orientation" id="ref-for-dom-xrcubelayer-orientation⑤">orientation</a></code>.</p>
   <div class="algorithm" data-algorithm="validate the state of the XRWebGLSubImage creation function">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-the-state-of-the-xrwebglsubimage-creation-function">validate the state of the XRWebGLSubImage creation function</dfn> of an <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①⑦">XRWebGLBinding</a></code> <var>binding</var> with parameters of <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②②">XRCompositionLayer</a></code> <var>layer</var> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrframe" id="ref-for-xrframe⑥">XRFrame</a></code> <var>frame</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>If <var>frame</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrframe-session" id="ref-for-dom-xrframe-session">session</a></code> is not equal to <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session⑥">session</a>, return <code>false</code> and abort these steps.</p>
     <li data-md>
      <p>If <var>frame</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrframe-active" id="ref-for-xrframe-active">active</a> boolean is <code>false</code>, return <code>false</code> and abort these steps.</p>
     <li data-md>
      <p>If <var>frame</var>’s <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#animationframe" id="ref-for-animationframe">animationFrame</a> boolean is <code>false</code>, return <code>false</code> and abort these steps.</p>
     <li data-md>
      <p>If <var>binding</var>’s <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session⑦">session</a> is not equal to <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session⑦">session</a>, return <code>false</code> and abort these steps.</p>
     <li data-md>
      <p>If <var>binding</var>’s <a data-link-type="dfn" href="#xrwebglbinding-context" id="ref-for-xrwebglbinding-context⑦">context</a> is not equal to <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-context" id="ref-for-xrcompositionlayer-context⑦">context</a>, return <code>false</code> and abort these steps.</p>
     <li data-md>
      <p>If the <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures①②">colorTextures</a> array is empty or missing, return <code>false</code> and abort these steps.</p>
     <li data-md>
      <p>If the <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-isstatic" id="ref-for-xrcompositionlayer-isstatic⑥">isStatic</a> is <code>true</code> and <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw⑧">needsRedraw</a></code> is <code>false</code>, return <code>false</code> and abort these steps.</p>
     <li data-md>
      <p>return <code>true</code>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="initialize the viewport">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="initialize-the-viewport">initialize the viewport</dfn> of an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrviewport" id="ref-for-xrviewport②">XRViewport</a></code> <var>viewport</var> with a <a data-link-type="dfn" href="#opaque-texture" id="ref-for-opaque-texture④③">opaque texture</a> <var>texture</var>, a <code class="idl"><a data-link-type="idl" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout⑥">XRLayerLayout</a></code> <var>layout</var>, an integer <var>offset</var> and a integer <var>num</var>, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Set <var>viewport</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrviewport-x" id="ref-for-dom-xrviewport-x">x</a></code> to <code>0</code>.</p>
     <li data-md>
      <p>Set <var>viewport</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrviewport-y" id="ref-for-dom-xrviewport-y">y</a></code> to <code>0</code>.</p>
     <li data-md>
      <p>Set <var>viewport</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrviewport-width" id="ref-for-dom-xrviewport-width">width</a></code> to the pixel width of <var>texture</var>.</p>
     <li data-md>
      <p>Set <var>viewport</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrviewport-height" id="ref-for-dom-xrviewport-height">height</a></code> to the pixelh eight of <var>texture</var>.</p>
     <li data-md>
      <p>Update <var>viewport</var> as follows:</p>
      <dl class="switch">
       <dt class="switch">If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right①①">"stereo-left-right"</a></code> 
       <dd> Set <var>viewport</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrviewport-x" id="ref-for-dom-xrviewport-x①">x</a></code> to the pixel width of <var>texture</var> multiplied by <var>offset</var> and divided by <var>num</var>. 
       <dd> Set <var>viewport</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrviewport-width" id="ref-for-dom-xrviewport-width①">width</a></code> to the pixel width of <var>subimage</var>’s <var>texture</var> divided by <var>num</var>. 
       <dt class="switch">Else if <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom①⓪">"stereo-top-bottom"</a></code> 
       <dd> Set <var>viewport</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrviewport-y" id="ref-for-dom-xrviewport-y①">y</a></code> to the pixel height of <var>texture</var> multiplied by <var>offset</var> and divided by <var>num</var>. 
       <dd> Set <var>viewport</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrviewport-height" id="ref-for-dom-xrviewport-height①">height</a></code> to the pixel height of <var>subimage</var>’s <var>texture</var> divided by <var>num</var>. 
      </dl>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="getSubImageAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="method" data-export data-lt="getSubImage(layer, frame, eye)|getSubImage(layer, frame)" id="dom-xrwebglbinding-getsubimage"><code>getSubImage(XRCompositionLayer <var>layer</var>, XRFrame <var>frame</var>, optional XREye <var>eye</var> = <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xreye-none" id="ref-for-dom-xreye-none">"none"</a></code>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage⑥">XRWebGLSubImage</a></code>. 
    <p>When this method is invoked on an <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①⑧">XRWebGLBinding</a></code> <var>binding</var>, it MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Initialize <var>subimage</var> as follows:</p>
      <dl class="switch">
       <dt> If <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getsubimage" id="ref-for-dom-xrwebglbinding-getsubimage③">getSubImage()</a></code> was called previously with the same <var>binding</var>, <var>layer</var> and <var>eye</var>, the user agent MAY 
       <dd> Let <var>subimage</var> be the same <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage⑦">XRWebGLSubImage</a></code> object as returned by an earlier call with the same arguments. 
       <dt> Otherwise 
       <dd> Let <var>subimage</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④⑨">new</a> <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage⑧">XRWebGLSubImage</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④⑨">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②④">this</a>. 
       <dd> Let <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrsubimage-viewport" id="ref-for-dom-xrsubimage-viewport①">viewport</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤⓪">new</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrviewport" id="ref-for-xrviewport③">XRViewport</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤⓪">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑤">this</a>. 
      </dl>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑥">this</a> <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session⑧">session</a>.</p>
     <li data-md>
      <p>If <var>layer</var> is not in the <var>session</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers">layers</a></code> array, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑥">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layer</var>’s type is <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①⑧">XRProjectionLayer</a></code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑦">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout①⑨">layout</a></code> attribute is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①②">"default"</a></code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑧">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>index</var> be <code>0</code>.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout②⓪">layout</a></code> attribute is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo" id="ref-for-dom-xrlayerlayout-stereo⑥">"stereo"</a></code>:</p>
      <ol>
       <li data-md>
        <p>If <var>eye</var> is <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xreye-none" id="ref-for-dom-xreye-none①">"none"</a></code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑨">TypeError</a></code> and abort these steps.</p>
       <li data-md>
        <p>If <var>eye</var> is <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xreye-right" id="ref-for-dom-xreye-right">"right"</a></code>, set <var>index</var> to <code>1</code>.</p>
      </ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#validate-the-state-of-the-xrwebglsubimage-creation-function" id="ref-for-validate-the-state-of-the-xrwebglsubimage-creation-function">validate the state of the XRWebGLSubImage creation function</a> with <var>layer</var> and <var>frame</var> is <code>false</code>, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①⑨">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-imageindex" id="ref-for-dom-xrwebglsubimage-imageindex①">imageIndex</a></code> as follows:</p>
      <dl class="switch">
       <dt class="switch">If the <var>layer</var> was created with a textureType of <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array①⑤">"texture-array"</a></code> 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-imageindex" id="ref-for-dom-xrwebglsubimage-imageindex②">imageIndex</a></code> with <var>index</var>. 
       <dt> Otherwise 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-imageindex" id="ref-for-dom-xrwebglsubimage-imageindex③">imageIndex</a></code> with <code>0</code>. 
      </dl>
     <li data-md>
      <p>Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture②">colorTexture</a></code> as follows:</p>
      <dl class="switch">
       <dt class="switch">If the <var>layer</var> was created with a textureType of <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture" id="ref-for-dom-xrtexturetype-texture①">"texture"</a></code> 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture③">colorTexture</a></code> with the element at offset <var>index</var> of the <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures①③">colorTextures</a> array. 
       <dt> Otherwise 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture④">colorTexture</a></code> with the first element of the <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures①④">colorTextures</a> array. 
      </dl>
     <li data-md>
      <p>Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture①">depthStencilTexture</a></code> as follows:</p>
      <dl class="switch">
       <dt class="switch">If the <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures⑨">depthStencilTextures</a> is an empty array 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture②">depthStencilTexture</a></code> with <code>null</code>. 
       <dt> Else the <var>layer</var> was created with a textureType of <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture" id="ref-for-dom-xrtexturetype-texture②">"texture"</a></code> 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture③">depthStencilTexture</a></code> with the element at offset <var>index</var> of the <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures①⓪">depthStencilTextures</a> array. 
       <dt> Otherwise 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture④">depthStencilTexture</a></code> with the first element of <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures①①">depthStencilTextures</a> array. 
      </dl>
     <li data-md>
      <p>Set <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-texturewidth" id="ref-for-dom-xrwebglsubimage-texturewidth①">textureWidth</a></code> to the pixel width of <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture⑤">colorTexture</a></code>.</p>
     <li data-md>
      <p>Set <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-textureheight" id="ref-for-dom-xrwebglsubimage-textureheight①">textureHeight</a></code> to the pixel height of <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture⑥">colorTexture</a></code>.</p>
     <li data-md>
      <p>Let <var>viewsPerTexture</var> be <code>1</code>.</p>
     <li data-md>
      <p>If <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout②①">layout</a></code> attribute is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right①②">"stereo-left-right"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom①①">"stereo-top-bottom"</a></code>, set <var>viewsPerTexture</var> to <code>2</code>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#initialize-the-viewport" id="ref-for-initialize-the-viewport">initialize the viewport</a> on <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrsubimage-viewport" id="ref-for-dom-xrsubimage-viewport②">viewport</a></code> with <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture⑦">colorTexture</a></code>, <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout②②">layout</a></code>, <var>index</var> and <var>viewsPerTexture</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task①">Queue a task</a> to set <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw⑨">needsRedraw</a></code> to <code>false</code>.</p>
     <li data-md>
      <p>return <var>subimage</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="getViewSubImageAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRWebGLBinding" data-dfn-type="method" data-export data-lt="getViewSubImage(layer, view)" id="dom-xrwebglbinding-getviewsubimage"><code>getViewSubImage(XRProjectionLayer <var>layer</var>, XRView <var>view</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage⑨">XRWebGLSubImage</a></code>. 
    <p>When this method is invoked on an <code class="idl"><a data-link-type="idl" href="#xrwebglbinding" id="ref-for-xrwebglbinding①⑨">XRWebGLBinding</a></code> <var>binding</var>, it MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Initialize <var>subimage</var> as follows:</p>
      <dl class="switch">
       <dt> If <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getviewsubimage" id="ref-for-dom-xrwebglbinding-getviewsubimage③">getViewSubImage()</a></code> was called previously with the same <var>binding</var>, <var>layer</var> and <var>view</var>, the user agent MAY 
       <dd> Let <var>subimage</var> be the same <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage①⓪">XRWebGLSubImage</a></code> object as returned by an earlier call with the same arguments. 
       <dt> Otherwise 
       <dd> Let <var>subimage</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤①">new</a> <code class="idl"><a data-link-type="idl" href="#xrwebglsubimage" id="ref-for-xrwebglsubimage①①">XRWebGLSubImage</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤①">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑦">this</a>. 
       <dd> Let <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrsubimage-viewport" id="ref-for-dom-xrsubimage-viewport③">viewport</a></code> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤②">new</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrviewport" id="ref-for-xrviewport④">XRViewport</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤②">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑧">this</a>. 
      </dl>
     <li data-md>
      <p>Let <var>frame</var> be <var>view</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getsubimage-layer-frame-eye-frame" id="ref-for-dom-xrwebglbinding-getsubimage-layer-frame-eye-frame">frame</a></code>.</p>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑨">this</a> <a data-link-type="dfn" href="#xrwebglbinding-session" id="ref-for-xrwebglbinding-session⑨">session</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#validate-the-state-of-the-xrwebglsubimage-creation-function" id="ref-for-validate-the-state-of-the-xrwebglsubimage-creation-function①">validate the state of the XRWebGLSubImage creation function</a> with <var>layer</var> and <var>frame</var> is <code>false</code>, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②⓪">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>layer</var> is not in the <var>session</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers①">layers</a></code> array, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⓪">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>view</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view-active" id="ref-for-view-active">active</a> flag is <code>false</code>, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②①">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Initialize <var>index</var> as follows:</p>
      <dl class="switch">
       <dt> If <var>view</var> is a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①④">secondary view</a> from <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①⑥">list of views</a> 
       <dd> Let <var>index</var> be the offset of <var>view</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view④">view</a> in <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①⑦">list of views</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#primary-view" id="ref-for-primary-view">primary views</a>. 
       <dt> Otherwise 
       <dd> Let <var>index</var> be the offset of <var>view</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view⑤">view</a> in <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①⑧">list of views</a> excluding the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①⑤">secondary views</a>. 
      </dl>
     <li data-md>
      <p>Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-imageindex" id="ref-for-dom-xrwebglsubimage-imageindex④">imageIndex</a></code> as follows:</p>
      <dl class="switch">
       <dt> If the <var>layer</var> was created with a textureType of <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture-array" id="ref-for-dom-xrtexturetype-texture-array①⑥">"texture-array"</a></code>: 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-imageindex" id="ref-for-dom-xrwebglsubimage-imageindex⑤">imageIndex</a></code> with <var>index</var>. 
       <dt> Otherwise 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-imageindex" id="ref-for-dom-xrwebglsubimage-imageindex⑥">imageIndex</a></code> to <code>0</code>. 
      </dl>
     <li data-md>
      <p>Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture⑧">colorTexture</a></code> as follows:</p>
      <dl class="switch">
       <dt> If <var>view</var> is a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①⑥">secondary view</a> from <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views①⑨">list of views</a> 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture⑨">colorTexture</a></code> with the element at offset <var>index</var> of the <var>layer</var>’s <a data-link-type="dfn" href="#xrprojectionlayer-colortextures-for-secondary-views" id="ref-for-xrprojectionlayer-colortextures-for-secondary-views③">colorTextures for secondary views</a>. 
       <dt> Else if the <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout②③">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①③">"default"</a></code> and the <var>layer</var> was created with a textureType of <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture" id="ref-for-dom-xrtexturetype-texture③">"texture"</a></code> 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①⓪">colorTexture</a></code> with the element at offset <var>index</var> of the <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures①⑤">colorTextures</a> array. 
       <dt> Otherwise 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①①">colorTexture</a></code> with the first element of the <var>layer</var>’s <a data-link-type="dfn" href="#colortextures" id="ref-for-colortextures①⑥">colorTextures</a> array. 
      </dl>
     <li data-md>
      <p>Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture⑤">depthStencilTexture</a></code> as follows:</p>
      <dl class="switch">
       <dt> If the <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures①②">depthStencilTextures</a> is an empty array 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture⑥">depthStencilTexture</a></code> with <code>null</code>. 
       <dt> Else if <var>view</var> is a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#secondary-view" id="ref-for-secondary-view①⑦">secondary view</a> from <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views②⓪">list of views</a> 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①②">colorTexture</a></code> with the element at offset <var>index</var> of the <var>layer</var>’s <a data-link-type="dfn" href="#xrprojectionlayer-depthstenciltextures-for-secondary-views" id="ref-for-xrprojectionlayer-depthstenciltextures-for-secondary-views③">depthStencilTextures for secondary views</a>. 
       <dt> Else if the <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout②④">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①④">"default"</a></code> and the <var>layer</var> was created with a textureType of <code class="idl"><a data-link-type="idl" href="#dom-xrtexturetype-texture" id="ref-for-dom-xrtexturetype-texture④">"texture"</a></code> 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture⑦">depthStencilTexture</a></code> with the element at offset <var>index</var> of the <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures①③">depthStencilTextures</a> array. 
       <dt> Otherwise 
       <dd> Initialize <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-depthstenciltexture" id="ref-for-dom-xrwebglsubimage-depthstenciltexture⑧">depthStencilTexture</a></code> with the first element of <var>layer</var>’s <a data-link-type="dfn" href="#depthstenciltextures" id="ref-for-depthstenciltextures①④">depthStencilTextures</a> array. 
      </dl>
     <li data-md>
      <p>Set <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-texturewidth" id="ref-for-dom-xrwebglsubimage-texturewidth②">textureWidth</a></code> to the pixel width of <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①③">colorTexture</a></code>.</p>
     <li data-md>
      <p>Set <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-textureheight" id="ref-for-dom-xrwebglsubimage-textureheight②">textureHeight</a></code> to the pixel height of <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①④">colorTexture</a></code>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#initialize-the-viewport" id="ref-for-initialize-the-viewport①">initialize the viewport</a> on <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrsubimage-viewport" id="ref-for-dom-xrsubimage-viewport④">viewport</a></code> with <var>subimage</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①⑤">colorTexture</a></code>, <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout②⑤">layout</a></code>, <var>index</var> and the number of the <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrsession-list-of-views" id="ref-for-xrsession-list-of-views②①">list of views</a>.</p>
     <li data-md>
      <p>Set <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw①⓪">needsRedraw</a></code> to <code>false</code>.</p>
     <li data-md>
      <p>return <var>subimage</var></p>
    </ol>
   </div>
   <p>When an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer①">XRLayer</a></code> is a member of the <code class="idl"><a data-link-type="idl" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers②">layers</a></code> array, it MUST be presented to the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#immersive-xr-device" id="ref-for-immersive-xr-device">immersive XR device</a> immediately after
an <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xr-animation-frame" id="ref-for-xr-animation-frame③">XR animation frame</a> completes, but only if at least one of the following has occurred since the previous <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xr-animation-frame" id="ref-for-xr-animation-frame④">XR animation frame</a>:</p>
   <ul>
    <li data-md>
     <p>The <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer②">XRLayer</a></code> was added to <code class="idl"><a data-link-type="idl" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers③">layers</a></code> since the previous <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xr-animation-frame" id="ref-for-xr-animation-frame⑤">XR animation frame</a>.</p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer③">XRLayer</a></code> is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrwebgllayer" id="ref-for-xrwebgllayer①">XRWebGLLayer</a></code> and <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.11" id="ref-for-5.14.11">clear</a></code>, <code class="idl"><a data-link-type="idl" data-refhint-key="39b06979" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.11" id="ref-for-5.14.11①">drawArrays</a></code>, <code class="idl"><a data-link-type="idl" data-refhint-key="cbbac926" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14.11" id="ref-for-5.14.11②">drawElements</a></code>, or any other rendering operation which similarly affects the framebuffer’s color values has been called while the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#opaque-framebuffer" id="ref-for-opaque-framebuffer">opaque framebuffer</a> is the currently bound framebuffer of the <code class="idl"><a data-link-type="idl" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext" id="ref-for-WebGLRenderingContext⑧">WebGLRenderingContext</a></code> associated with the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrwebgllayer" id="ref-for-xrwebgllayer②">XRWebGLLayer</a></code>.</p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer④">XRLayer</a></code> is an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②③">XRCompositionLayer</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getsubimage" id="ref-for-dom-xrwebglbinding-getsubimage④">getSubImage()</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-xrwebglbinding-getviewsubimage" id="ref-for-dom-xrwebglbinding-getviewsubimage④">getViewSubImage()</a></code> was called and any rendering operation has been called that affects the color value of the <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①⑥">colorTexture</a></code> texture.</p>
   </ul>
   <p>Before the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#opaque-framebuffer" id="ref-for-opaque-framebuffer①">opaque framebuffer</a> or <code class="idl"><a data-link-type="idl" href="#dom-xrwebglsubimage-colortexture" id="ref-for-dom-xrwebglsubimage-colortexture①⑦">colorTexture</a></code> texture are presented to the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#immersive-xr-device" id="ref-for-immersive-xr-device①">immersive XR device</a> the user agent MUST ensure that all rendering operations have been flushed.</p>
   <h2 class="heading settled" data-level="7" id="videolayer"><span class="secno">7. </span><span class="content">Video layer creation</span><a class="self-link" href="#videolayer"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="xrmedialayerinittype"><span class="secno">7.1. </span><span class="content">XRMediaLayerInit</span><a class="self-link" href="#xrmedialayerinittype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#dictdef-xrmedialayerinit" id="ref-for-dictdef-xrmedialayerinit">XRMediaLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②④">XRCompositionLayer</a></code> containing a video
is initialized. 
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrmedialayerinit"><code><c- g>XRMediaLayerInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace" id="ref-for-xrspace①②"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="XRSpace" href="#dom-xrmedialayerinit-space" id="ref-for-dom-xrmedialayerinit-space"><c- g>space</c-></a>;
  <a data-link-type="idl-name" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout⑦"><c- n>XRLayerLayout</c-></a> <a class="idl-code" data-default="&quot;mono&quot;" data-link-type="dict-member" data-type="XRLayerLayout" href="#dom-xrmedialayerinit-layout" id="ref-for-dom-xrmedialayerinit-layout"><c- g>layout</c-></a> = "mono";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <a class="idl-code" data-default="false" data-link-type="dict-member" data-type="boolean" href="#dom-xrmedialayerinit-invertstereo" id="ref-for-dom-xrmedialayerinit-invertstereo"><c- g>invertStereo</c-></a> = <c- b>false</c->;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaLayerInit" data-dfn-type="dict-member" data-export id="dom-xrmedialayerinit-space"><code>space</code></dfn> attribute defines the spatial relationship with the user’s physical environment.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaLayerInit" data-dfn-type="dict-member" data-export id="dom-xrmedialayerinit-layout"><code>layout</code></dfn> attribute defines the layout of the video in the <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②⑤">XRCompositionLayer</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaLayerInit" data-dfn-type="dict-member" data-export id="dom-xrmedialayerinit-invertstereo"><code>invertStereo</code></dfn> attribute defines if the natural location of each view in the video
should be inverted.</p>
   <h3 class="heading settled" data-level="7.2" id="xrmediaquadlayerinittype"><span class="secno">7.2. </span><span class="content">XRMediaQuadLayerInit</span><a class="self-link" href="#xrmediaquadlayerinittype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#dictdef-xrmediaquadlayerinit" id="ref-for-dictdef-xrmediaquadlayerinit">XRMediaQuadLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer①①">XRQuadLayer</a></code> containing a video
is initialized. 
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrmediaquadlayerinit"><code><c- g>XRMediaQuadLayerInit</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-xrmedialayerinit" id="ref-for-dictdef-xrmedialayerinit①"><c- n>XRMediaLayerInit</c-></a> {
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform①②"><c- n>XRRigidTransform</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaQuadLayerInit" data-dfn-type="dict-member" data-export data-type="XRRigidTransform?" id="dom-xrmediaquadlayerinit-transform"><code><c- g>transform</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①⑨"><c- b>float</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaQuadLayerInit" data-dfn-type="dict-member" data-export data-type="float?" id="dom-xrmediaquadlayerinit-width"><code><c- g>width</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②⓪"><c- b>float</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaQuadLayerInit" data-dfn-type="dict-member" data-export data-type="float?" id="dom-xrmediaquadlayerinit-height"><code><c- g>height</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="7.3" id="xrmediacylinderlayerinittype"><span class="secno">7.3. </span><span class="content">XRMediaCylinderLayerInit</span><a class="self-link" href="#xrmediacylinderlayerinittype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#dictdef-xrmediacylinderlayerinit" id="ref-for-dictdef-xrmediacylinderlayerinit">XRMediaCylinderLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer①⓪">XRCylinderLayer</a></code> containing a video
is initialized. 
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrmediacylinderlayerinit"><code><c- g>XRMediaCylinderLayerInit</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-xrmedialayerinit" id="ref-for-dictdef-xrmedialayerinit②"><c- n>XRMediaLayerInit</c-></a> {
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform①③"><c- n>XRRigidTransform</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="XRRigidTransform?" id="dom-xrmediacylinderlayerinit-transform"><code><c- g>transform</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②①"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="2.0" data-dfn-for="XRMediaCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrmediacylinderlayerinit-radius"><code><c- g>radius</c-></code></dfn> = 2.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②②"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="0.78539" data-dfn-for="XRMediaCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrmediacylinderlayerinit-centralangle"><code><c- g>centralAngle</c-></code></dfn> = 0.78539;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②③"><c- b>float</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaCylinderLayerInit" data-dfn-type="dict-member" data-export data-type="float?" id="dom-xrmediacylinderlayerinit-aspectratio"><code><c- g>aspectRatio</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="7.4" id="xrmediaequirectlayerinittype"><span class="secno">7.4. </span><span class="content">XRMediaEquirectLayerInit</span><a class="self-link" href="#xrmediaequirectlayerinittype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#dictdef-xrmediaequirectlayerinit" id="ref-for-dictdef-xrmediaequirectlayerinit">XRMediaEquirectLayerInit</a></code> dictionary represents a set of configurable values that describe how an <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer①⓪">XREquirectLayer</a></code> containing a video
is initialized. 
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrmediaequirectlayerinit"><code><c- g>XRMediaEquirectLayerInit</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-xrmedialayerinit" id="ref-for-dictdef-xrmedialayerinit③"><c- n>XRMediaLayerInit</c-></a> {
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform①④"><c- n>XRRigidTransform</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaEquirectLayerInit" data-dfn-type="dict-member" data-export data-type="XRRigidTransform?" id="dom-xrmediaequirectlayerinit-transform"><code><c- g>transform</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②④"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="0.0" data-dfn-for="XRMediaEquirectLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrmediaequirectlayerinit-radius"><code><c- g>radius</c-></code></dfn> = 0.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②⑤"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="6.28318" data-dfn-for="XRMediaEquirectLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrmediaequirectlayerinit-centralhorizontalangle"><code><c- g>centralHorizontalAngle</c-></code></dfn> = 6.28318;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②⑥"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="1.570795" data-dfn-for="XRMediaEquirectLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrmediaequirectlayerinit-upperverticalangle"><code><c- g>upperVerticalAngle</c-></code></dfn> = 1.570795;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②⑦"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="-1.570795" data-dfn-for="XRMediaEquirectLayerInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-xrmediaequirectlayerinit-lowerverticalangle"><code><c- g>lowerVerticalAngle</c-></code></dfn> = -1.570795;
};
</pre>
   <h3 class="heading settled" data-level="7.5" id="xrmediabindingtype"><span class="secno">7.5. </span><span class="content">XRMediaBinding</span><a class="self-link" href="#xrmediabindingtype"></a></h3>
    The <code class="idl"><a data-link-type="idl" href="#xrmediabinding" id="ref-for-xrmediabinding①">XRMediaBinding</a></code> object is used to create layers that display the content of an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement" id="ref-for-htmlvideoelement①">HTMLVideoElement</a></code>. 
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑨"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrmediabinding"><code><c- g>XRMediaBinding</c-></code></dfn> {
  <a class="idl-code" data-link-type="constructor" href="#dom-xrmediabinding-xrmediabinding" id="ref-for-dom-xrmediabinding-xrmediabinding"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession⑧"><c- n>XRSession</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding/XRMediaBinding(session), XRMediaBinding/constructor(session)" data-dfn-type="argument" data-export id="dom-xrmediabinding-xrmediabinding-session-session"><code><c- g>session</c-></code></dfn>);

  <a data-link-type="idl-name" href="#xrquadlayer" id="ref-for-xrquadlayer①②"><c- n>XRQuadLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrmediabinding-createquadlayer" id="ref-for-dom-xrmediabinding-createquadlayer"><c- g>createQuadLayer</c-></a>(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement" id="ref-for-htmlvideoelement②"><c- n>HTMLVideoElement</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding/createQuadLayer(video, init), XRMediaBinding/createQuadLayer(video)" data-dfn-type="argument" data-export id="dom-xrmediabinding-createquadlayer-video-init-video"><code><c- g>video</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrmediaquadlayerinit" id="ref-for-dictdef-xrmediaquadlayerinit①"><c- n>XRMediaQuadLayerInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding/createQuadLayer(video, init), XRMediaBinding/createQuadLayer(video)" data-dfn-type="argument" data-export id="dom-xrmediabinding-createquadlayer-video-init-init"><code><c- g>init</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer①①"><c- n>XRCylinderLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrmediabinding-createcylinderlayer" id="ref-for-dom-xrmediabinding-createcylinderlayer"><c- g>createCylinderLayer</c-></a>(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement" id="ref-for-htmlvideoelement③"><c- n>HTMLVideoElement</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding/createCylinderLayer(video, init), XRMediaBinding/createCylinderLayer(video)" data-dfn-type="argument" data-export id="dom-xrmediabinding-createcylinderlayer-video-init-video"><code><c- g>video</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrmediacylinderlayerinit" id="ref-for-dictdef-xrmediacylinderlayerinit①"><c- n>XRMediaCylinderLayerInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding/createCylinderLayer(video, init), XRMediaBinding/createCylinderLayer(video)" data-dfn-type="argument" data-export id="dom-xrmediabinding-createcylinderlayer-video-init-init"><code><c- g>init</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#xrequirectlayer" id="ref-for-xrequirectlayer①①"><c- n>XREquirectLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrmediabinding-createequirectlayer" id="ref-for-dom-xrmediabinding-createequirectlayer"><c- g>createEquirectLayer</c-></a>(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement" id="ref-for-htmlvideoelement④"><c- n>HTMLVideoElement</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding/createEquirectLayer(video, init), XRMediaBinding/createEquirectLayer(video)" data-dfn-type="argument" data-export id="dom-xrmediabinding-createequirectlayer-video-init-video"><code><c- g>video</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrmediaequirectlayerinit" id="ref-for-dictdef-xrmediaequirectlayerinit①"><c- n>XRMediaEquirectLayerInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding/createEquirectLayer(video, init), XRMediaBinding/createEquirectLayer(video)" data-dfn-type="argument" data-export id="dom-xrmediabinding-createequirectlayer-video-init-init"><code><c- g>init</c-></code></dfn> = {});
};
</pre>
   <p class="issue" id="issue-2325a847①"><a class="self-link" href="#issue-2325a847①"></a> the init dictionaries shouldn’t be optional. This is bikeshed issue 1566.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#xrmediabinding" id="ref-for-xrmediabinding②">XRMediaBinding</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="XRMediaBinding" data-dfn-type="dfn" data-noexport id="xrmediabinding-session">session</dfn>, which is the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession⑨">XRSession</a></code> it was created with.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> It is possible to create more than one <code class="idl"><a data-link-type="idl" href="#xrmediabinding" id="ref-for-xrmediabinding③">XRMediaBinding</a></code>. The lifetime of a layer is not tied
to the lifetime of the <code class="idl"><a data-link-type="idl" href="#xrmediabinding" id="ref-for-xrmediabinding④">XRMediaBinding</a></code> that created it.</p>
   <p>Each layer created through <code class="idl"><a data-link-type="idl" href="#xrmediabinding" id="ref-for-xrmediabinding⑤">XRMediaBinding</a></code> has an internal <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement" id="ref-for-htmlvideoelement⑤">HTMLVideoElement</a></code> <a data-link-type="dfn" href="#xrcompositionlayer-media" id="ref-for-xrcompositionlayer-media">media</a>.
If the layer is part of the session’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-renderstate" id="ref-for-dom-xrsession-renderstate">renderState</a></code>, it will display the current frame of the video. The
layer is update at the native framerate of the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xr-device" id="ref-for-xr-device">XR device</a> or the video, whichever is less.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> only the video frames will be displayed in the layer. Video controls should be implemented by the author and must
be drawn in another layer.</p>
   <p class="issue" id="issue-fe682fc5"><a class="self-link" href="#issue-fe682fc5"></a> more clarification is needed on how the video is blitted to the layers.</p>
   <div class="algorithm" data-algorithm="render-media-layer">
     When an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②⑥">XRCompositionLayer</a></code> <var>layer</var> with a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement" id="ref-for-htmlvideoelement⑥">HTMLVideoElement</a></code> <var>media</var> needs to be rendered, the user agent
MUST run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>usability</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/canvas.html#check-the-usability-of-the-image-argument" id="ref-for-check-the-usability-of-the-image-argument">checking the usability of</a> <var>media</var>.</p>
     <li data-md>
      <p>If <var>usability</var> is <code>bad</code>, then fill the <var>layer</var> with opaque black and abort these steps.</p>
     <li data-md>
      <p>Fill the <var>layer</var> with the content of the <var>media</var> element.</p>
    </ol>
   </div>
   <p class="issue" id="issue-da8fb26d"><a class="self-link" href="#issue-da8fb26d"></a> add a better algorithm to describe the drawing.</p>
   <div class="algorithm" data-algorithm="construct-media-binding">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding" data-dfn-type="constructor" data-export data-lt="XRMediaBinding(session)|constructor(session)" id="dom-xrmediabinding-xrmediabinding"><code>XRMediaBinding(XRSession <var>session</var>)</code></dfn> constructor
MUST perform the following steps when invoked:</p>
    <ol>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end⑥">ended</a> value is <code>true</code>, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②②">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>session</var> is not an <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#immersive-session" id="ref-for-immersive-session①">immersive session</a>, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②③">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>binding</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤③">new</a> <code class="idl"><a data-link-type="idl" href="#xrmediabinding" id="ref-for-xrmediabinding⑥">XRMediaBinding</a></code>in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤③">relevant realm</a> of <var>session</var>.</p>
     <li data-md>
      <p>Initialize <var>binding</var>’s <a data-link-type="dfn" href="#xrmediabinding-session" id="ref-for-xrmediabinding-session">session</a> to <var>session</var>.</p>
     <li data-md>
      <p>Return <var>binding</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="calculateaspectratio">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="calculate-the-aspect-ratio">calculate the aspect ratio</dfn> of an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement" id="ref-for-htmlvideoelement⑦">HTMLVideoElement</a></code> <var>video</var> and an <code class="idl"><a data-link-type="idl" href="#enumdef-xrlayerlayout" id="ref-for-enumdef-xrlayerlayout⑧">XRLayerLayout</a></code> <var>layout</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>width</var> be the <var>video</var>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#dom-video-videowidth" id="ref-for-dom-video-videowidth">videoWidth</a></code>.</p>
     <li data-md>
      <p>Let <var>height</var> be the <var>video</var>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#dom-video-videoheight" id="ref-for-dom-video-videoheight">videoHeight</a></code>.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right" id="ref-for-dom-xrlayerlayout-stereo-left-right①③">"stereo-left-right"</a></code>, divide <var>width</var> by <code>2</code>.</p>
     <li data-md>
      <p>If <var>layout</var> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-top-bottom" id="ref-for-dom-xrlayerlayout-stereo-top-bottom①②">"stereo-top-bottom"</a></code>, divide <var>height</var> by <code>2</code>.</p>
     <li data-md>
      <p>Return <var>width</var> divided by <var>height</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="createMediaQuadLayerAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding" data-dfn-type="method" data-export data-lt="createQuadLayer(video, init)|createQuadLayer(video)" id="dom-xrmediabinding-createquadlayer"><code>createQuadLayer(HTMLVideoElement <var>video</var>, XRMediaQuadLayerInit <var>init</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer①③">XRQuadLayer</a></code> <var>layer</var>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⓪">this</a> <a data-link-type="dfn" href="#xrmediabinding-session" id="ref-for-xrmediabinding-session①">session</a>.</p>
     <li data-md>
      <p>If <var>session</var> was not created with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers⑥">layers</a>" enabled, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①④">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end⑦">ended</a> value is <code>true</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②④">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmedialayerinit-layout" id="ref-for-dom-xrmedialayerinit-layout①">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①⑤">"default"</a></code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②①">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>layer</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤④">new</a> <code class="idl"><a data-link-type="idl" href="#xrquadlayer" id="ref-for-xrquadlayer①④">XRQuadLayer</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤④">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③①">this</a>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#intialize-a-composition-layer" id="ref-for-intialize-a-composition-layer⑤">intialize a composition layer</a> on <var>layer</var> with <var>session</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-media" id="ref-for-xrcompositionlayer-media①">media</a> to <var>video</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw①①">needsRedraw</a></code> to <code>false</code>.</p>
     <li data-md>
      <p>Let <var>aspectRatio</var> be the result of <a data-link-type="dfn" href="#calculate-the-aspect-ratio" id="ref-for-calculate-the-aspect-ratio">calculate the aspect ratio</a> with <var>video</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmedialayerinit-layout" id="ref-for-dom-xrmedialayerinit-layout②">layout</a></code>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-width" id="ref-for-dom-xrmediaquadlayerinit-width">width</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-height" id="ref-for-dom-xrmediaquadlayerinit-height">height</a></code> are <code>undefined</code>, set <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-width" id="ref-for-dom-xrmediaquadlayerinit-width①">width</a></code> to <code>1</code>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-height" id="ref-for-dom-xrmediaquadlayerinit-height①">height</a></code> is <code>undefined</code>, set <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-height" id="ref-for-dom-xrmediaquadlayerinit-height②">height</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-width" id="ref-for-dom-xrmediaquadlayerinit-width②">width</a></code> divided by <var>aspectRatio</var>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-width" id="ref-for-dom-xrmediaquadlayerinit-width③">width</a></code> is <code>undefined</code>, set <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-width" id="ref-for-dom-xrmediaquadlayerinit-width④">width</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-xrmediaquadlayerinit-height" id="ref-for-dom-xrmediaquadlayerinit-height③">height</a></code> multiplied by <var>aspectRatio</var>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#initialize-a-quad-layer" id="ref-for-initialize-a-quad-layer①">initialize a quad layer</a> with <var>layer</var> and <var>init</var>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②⑥">XR Compositor</a> knows that it will be unable to create the resources for the <var>layer</var> for any reason, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror⑤">OperationError</a></code> and abort these steps.</p>
     <li data-md>
      <p>return <var>layer</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="createMediaCylinderLayerAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding" data-dfn-type="method" data-export data-lt="createCylinderLayer(video, init)|createCylinderLayer(video)" id="dom-xrmediabinding-createcylinderlayer"><code>createCylinderLayer(HTMLVideoElement <var>video</var>, XRMediaCylinderLayerInit <var>init</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer①②">XRCylinderLayer</a></code> <var>layer</var>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③②">this</a> <a data-link-type="dfn" href="#xrmediabinding-session" id="ref-for-xrmediabinding-session②">session</a>.</p>
     <li data-md>
      <p>If <var>session</var> was not created with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers⑦">layers</a>" enabled, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①⑤">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end⑧">ended</a> value is <code>true</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②⑤">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmedialayerinit-layout" id="ref-for-dom-xrmedialayerinit-layout③">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①⑥">"default"</a></code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②②">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>layer</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤⑤">new</a> <code class="idl"><a data-link-type="idl" href="#xrcylinderlayer" id="ref-for-xrcylinderlayer①③">XRCylinderLayer</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤⑤">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③③">this</a>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#intialize-a-composition-layer" id="ref-for-intialize-a-composition-layer⑥">intialize a composition layer</a> on <var>layer</var> with <var>session</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-media" id="ref-for-xrcompositionlayer-media②">media</a> to <var>video</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw①②">needsRedraw</a></code> to <code>false</code>.</p>
     <li data-md>
      <p>Let <var>aspectRatio</var> be the result of <a data-link-type="dfn" href="#calculate-the-aspect-ratio" id="ref-for-calculate-the-aspect-ratio①">calculate the aspect ratio</a> with <var>video</var> and <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmedialayerinit-layout" id="ref-for-dom-xrmedialayerinit-layout④">layout</a></code>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmediacylinderlayerinit-aspectratio" id="ref-for-dom-xrmediacylinderlayerinit-aspectratio">aspectRatio</a></code> is <code>undefined</code>, set <code class="idl"><a data-link-type="idl" href="#dom-xrmediacylinderlayerinit-aspectratio" id="ref-for-dom-xrmediacylinderlayerinit-aspectratio①">aspectRatio</a></code> to <var>aspectRatio</var>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#initialize-a-cylinder-layer" id="ref-for-initialize-a-cylinder-layer①">initialize a cylinder layer</a> with <var>layer</var> and <var>init</var>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②⑦">XR Compositor</a> knows that it will be unable to create the resources for the <var>layer</var> for any reason, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror⑥">OperationError</a></code> and abort these steps.</p>
     <li data-md>
      <p>return <var>layer</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="createMediaEquirectLayerAlgo">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRMediaBinding" data-dfn-type="method" data-export data-lt="createEquirectLayer(video, init)|createEquirectLayer(video)" id="dom-xrmediabinding-createequirectlayer"><code>createEquirectLayer(HTMLVideoElement <var>video</var>, XRMediaEquirectLayerInit <var>init</var>)</code></dfn> method creates a new <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer①②">XREquirectLayer</a></code> <var>layer</var>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>session</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③④">this</a> <a data-link-type="dfn" href="#xrmediabinding-session" id="ref-for-xrmediabinding-session③">session</a>.</p>
     <li data-md>
      <p>If <var>session</var> was not created with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers⑧">layers</a>" enabled, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①⑥">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>session</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-writing-modes-4/#css-end" id="ref-for-css-end⑨">ended</a> value is <code>true</code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②⑥">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrmedialayerinit-layout" id="ref-for-dom-xrmedialayerinit-layout⑤">layout</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-default" id="ref-for-dom-xrlayerlayout-default①⑦">"default"</a></code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②③">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space①③">space</a></code> is not an instance of type <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrreferencespace" id="ref-for-xrreferencespace⑤">XRReferenceSpace</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②⑦">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrlayerinit-space" id="ref-for-dom-xrlayerinit-space①④">space</a></code> has a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrreferencespace-type" id="ref-for-xrreferencespace-type④">type</a> of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-viewer" id="ref-for-dom-xrreferencespacetype-viewer⑦">"viewer"</a></code>, throw <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②⑧">InvalidStateError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>layer</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤⑥">new</a> <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer①③">XREquirectLayer</a></code> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤⑥">relevant realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑤">this</a>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#intialize-a-composition-layer" id="ref-for-intialize-a-composition-layer⑦">intialize a composition layer</a> on <var>layer</var> with <var>session</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-media" id="ref-for-xrcompositionlayer-media③">media</a> to <var>video</var>.</p>
     <li data-md>
      <p>Initialize <var>layer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-needsredraw" id="ref-for-dom-xrcompositionlayer-needsredraw①③">needsRedraw</a></code> to <code>false</code>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#initialize-a-equirect-layer" id="ref-for-initialize-a-equirect-layer①">initialize a equirect layer</a> with <var>layer</var> and <var>init</var>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②⑧">XR Compositor</a> knows that it will be unable to create the resources for the <var>layer</var> for any reason, throw an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror⑦">OperationError</a></code> and abort these steps.</p>
     <li data-md>
      <p>return <var>layer</var>.</p>
    </ol>
   </div>
   <p class="issue" id="issue-2d8617d8"><a class="self-link" href="#issue-2d8617d8"></a> define how the <code class="idl"><a data-link-type="idl" href="#xrequirectlayer" id="ref-for-xrequirectlayer①④">XREquirectLayer</a></code>’s parameters affect the video display.</p>
   <h2 class="heading settled" data-level="8" id="events"><span class="secno">8. </span><span class="content">Events</span><a class="self-link" href="#events"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="xrlayerevent-interface"><span class="secno">8.1. </span><span class="content">XRLayerEvent</span><a class="self-link" href="#xrlayerevent-interface"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="#xrlayerevent" id="ref-for-xrlayerevent">XRLayerEvent</a></code> is fired to indicate changes to the state of an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer⑤">XRLayer</a></code>.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①⓪"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrlayerevent"><code><c- g>XRLayerEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event" id="ref-for-event"><c- n>Event</c-></a> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerEvent" data-dfn-type="constructor" data-export data-lt="XRLayerEvent(type, eventInitDict)|constructor(type, eventInitDict)" id="dom-xrlayerevent-xrlayerevent"><code><c- g>constructor</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerEvent/XRLayerEvent(type, eventInitDict), XRLayerEvent/constructor(type, eventInitDict)" data-dfn-type="argument" data-export id="dom-xrlayerevent-xrlayerevent-type-eventinitdict-type"><code><c- g>type</c-></code></dfn>, <a data-link-type="idl-name" href="#dictdef-xrlayereventinit" id="ref-for-dictdef-xrlayereventinit"><c- n>XRLayerEventInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerEvent/XRLayerEvent(type, eventInitDict), XRLayerEvent/constructor(type, eventInitDict)" data-dfn-type="argument" data-export id="dom-xrlayerevent-xrlayerevent-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code></dfn>);
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject③"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer⑥"><c- n>XRLayer</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="XRLayer" href="#dom-xrlayerevent-layer" id="ref-for-dom-xrlayerevent-layer"><c- g>layer</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-xrlayereventinit"><code><c- g>XRLayerEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit" id="ref-for-dictdef-eventinit"><c- n>EventInit</c-></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer⑦"><c- n>XRLayer</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerEventInit" data-dfn-type="dict-member" data-export data-type="XRLayer" id="dom-xrlayereventinit-layer"><code><c- g>layer</c-></code></dfn>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayerEvent" data-dfn-type="attribute" data-export id="dom-xrlayerevent-layer"><code>layer</code></dfn> attribute indicates the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer⑧">XRLayer</a></code> that generated the event.</p>
   <h3 class="heading settled" data-level="8.2" id="event-types"><span class="secno">8.2. </span><span class="content">Event Types</span><a class="self-link" href="#event-types"></a></h3>
   <p>The user agent MUST provide the following new events. Registration for and firing of the events must follow the usual behavior of DOM4 Events.</p>
   <p>The user agent MAY fire a <dfn class="dfn-paneled idl-code" data-dfn-for="XRLayer" data-dfn-type="event" data-export id="eventdef-xrlayer-redraw"><code>redraw</code></dfn> event on the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer⑨">XRLayer</a></code> object when <a data-link-type="dfn" href="#the-underlying-resources-of-a-layer-are-lost" id="ref-for-the-underlying-resources-of-a-layer-are-lost①">the underlying resources of a layer are lost</a> or
when the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor②⑨">XR Compositor</a> can no longer reproject the layer.</p>
   <p>The author SHOULD redraw the content of the layer at the next <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xr-animation-frame" id="ref-for-xr-animation-frame⑥">XR animation frame</a>. The event must be of type <code class="idl"><a data-link-type="idl" href="#xrlayerevent" id="ref-for-xrlayerevent①">XRLayerEvent</a></code>.</p>
   <h2 class="heading settled" data-level="9" id="webxrintegration"><span class="secno">9. </span><span class="content">WebXR Device API Integration</span><a class="self-link" href="#webxrintegration"></a></h2>
   <h3 class="heading settled" data-level="9.1" id="xrrenderstatechanges"><span class="secno">9.1. </span><span class="content">XRRenderState changes</span><a class="self-link" href="#xrrenderstatechanges"></a></h3>
    This module extends the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dictdef-xrrenderstateinit" id="ref-for-dictdef-xrrenderstateinit①">XRRenderStateInit</a></code> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrenderstate" id="ref-for-xrrenderstate">XRRenderState</a></code> interfaces with a new optional array <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers">layers</a></code> containing
instances of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer①⓪">XRLayer</a></code>. 
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①①"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://immersive-web.github.io/webxr/#xrrenderstate" id="ref-for-xrrenderstate①"><c- g>XRRenderState</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer①①"><c- n>XRLayer</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FrozenArray<XRLayer>" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers④"><c- g>layers</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRRenderState" data-dfn-type="attribute" data-export id="dom-xrrenderstate-layers"><code>layers</code></dfn> attribute returns an array containing
the instances of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer①②">XRLayer</a></code> that are displayed by the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor③⓪">XR Compositor</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers①">layers</a></code> array defines the order of the composition of the layers. The <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor③①">XR Compositor</a> MUST draw each layer
in order of its position in the array using <a data-link-type="dfn" href="https://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_srcover" id="ref-for-porterduffcompositingoperators_srcover">source-over</a> blending. The <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor③②">XR Compositor</a> MUST NOT apply any depth sorting of the layers.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> this means that each layer can potentially overwrite the previous layers whether or not the previous layers are virtually closer to the viewer.</p>
   <div class="algorithm" data-algorithm="initialize-renderstate-for-layers">
     This module replaces the steps given by <a data-link-type="dfn" href="#layers-initialize-the-render-state" id="ref-for-layers-initialize-the-render-state">initialize the render state</a>. Instead when an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrenderstate" id="ref-for-xrrenderstate②">XRRenderState</a></code> object <var>state</var> is created for an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession①⓪">XRSession</a></code> <var>session</var>, the user agent MUST <dfn class="dfn-paneled" data-dfn-for="layers" data-dfn-type="dfn" data-noexport id="layers-initialize-the-render-state">initialize the render state</dfn> by running the following steps: 
    <ol>
     <li data-md>
      <p>Initialize <var>state</var> by running the original steps to <a data-link-type="dfn" href="#layers-initialize-the-render-state" id="ref-for-layers-initialize-the-render-state①">initialize the render state</a>.</p>
     <li data-md>
      <p>Initialize <var>state</var>’s <code class="idl"><a data-link-type="idl" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers⑤">layers</a></code> with a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤⑦">new</a> empty array in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤⑦">relevant realm</a> of <var>session</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="9.2" id="updaterenderstatechanges"><span class="secno">9.2. </span><span class="content">updateRenderState changes</span><a class="self-link" href="#updaterenderstatechanges"></a></h3>
   <div class="algorithm" data-algorithm="update-layers-state-for-layers">
    <p>This module replaces the steps given by "<a data-link-type="dfn" href="#layers-update-the-pending-layers-state" id="ref-for-layers-update-the-pending-layers-state">update the pending layers state</a>" from the WebXR specification. Instead when the user agent will <dfn class="dfn-paneled" data-dfn-for="layers" data-dfn-type="dfn" data-noexport id="layers-update-the-pending-layers-state">update the pending layers state</dfn> with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession①①">XRSession</a></code> <var>session</var> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dictdef-xrrenderstateinit" id="ref-for-dictdef-xrrenderstateinit②">XRRenderStateInit</a></code> <var>newState</var>, it must run the following steps:</p>
    <ol>
     <li data-md>
      <p>If both <var>newState</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-baselayer" id="ref-for-dom-xrrenderstateinit-baselayer">baseLayer</a></code> and <var>newState</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers②">layers</a></code> are set, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①⑦">NotSupportedError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>activeState</var> be <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#active-render-state" id="ref-for-active-render-state">active render state</a>.</p>
     <li data-md>
      <p>If <var>newState</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-baselayer" id="ref-for-dom-xrrenderstateinit-baselayer①">baseLayer</a></code> is set:</p>
      <ol>
       <li data-md>
        <p>If <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#pending-render-state" id="ref-for-pending-render-state">pending render state</a> is <code>null</code>, set it to a copy of <var>activeState</var>.</p>
       <li data-md>
        <p>Set <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#pending-render-state" id="ref-for-pending-render-state①">pending render state</a>’s <code class="idl"><a data-link-type="idl" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers⑥">layers</a></code> to <code>null</code>.</p>
      </ol>
     <li data-md>
      <p>If <var>newState</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers③">layers</a></code> is set:</p>
      <ol>
       <li data-md>
        <p>If <var>session</var> was not created with "<a data-link-type="dfn" href="#feature-descriptor-layers" id="ref-for-feature-descriptor-layers⑨">layers</a>" enabled and <var>newState</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers④">layers</a></code> contains more than <code>1</code> instance, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①⑧">NotSupportedError</a></code> and abort these steps.</p>
       <li data-md>
        <p>If <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#pending-render-state" id="ref-for-pending-render-state②">pending render state</a> is <code>null</code>, set it to a copy of <var>activeState</var>.</p>
       <li data-md>
        <p>If <var>newState</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers⑤">layers</a></code> contains duplicate instances, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②④">TypeError</a></code> and abort these steps.</p>
       <li data-md>
        <p>For each <var>layer</var> in <var>newState</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers⑥">layers</a></code>:</p>
        <ol>
         <li data-md>
          <p>If <var>layer</var> is an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②⑦">XRCompositionLayer</a></code> and <var>layer</var>’s <a data-link-type="dfn" href="#xrcompositionlayer-session" id="ref-for-xrcompositionlayer-session⑧">session</a> is different from <var>session</var>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⑤">TypeError</a></code> and abort these steps.</p>
         <li data-md>
          <p>If <var>layer</var> is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrwebgllayer" id="ref-for-xrwebgllayer③">XRWebGLLayer</a></code> and <var>layer</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#xrwebgllayer-session" id="ref-for-xrwebgllayer-session">session</a> is different from <var>session</var>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⑥">TypeError</a></code> and abort these steps.</p>
        </ol>
       <li data-md>
        <p>Set <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#pending-render-state" id="ref-for-pending-render-state③">pending render state</a>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstate-baselayer" id="ref-for-dom-xrrenderstate-baselayer">baseLayer</a></code> to <code>null</code>.</p>
       <li data-md>
        <p>Set <var>session</var>’s <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#pending-render-state" id="ref-for-pending-render-state④">pending render state</a>’s <code class="idl"><a data-link-type="idl" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers⑦">layers</a></code> to <var>newState</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers⑦">layers</a></code>.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="9.3" id="xrcompositorchanges"><span class="secno">9.3. </span><span class="content">XRCompositor changes</span><a class="self-link" href="#xrcompositorchanges"></a></h3>
    The <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor③③">XR Compositor</a> MUST be extended so all <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrlayer" id="ref-for-xrlayer①③">XRLayer</a></code> instances from the <code class="idl"><a data-link-type="idl" href="#dom-xrrenderstate-layers" id="ref-for-dom-xrrenderstate-layers⑧">layers</a></code> array are composited
at the same time. All other requirements for <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor③④">WebXR</a> MUST continue to apply. 
   <p>If the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor③⑤">XR Compositor</a> is rendering to a <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view⑥">view</a> with an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#enumdef-xreye" id="ref-for-enumdef-xreye①">XREye</a></code> of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xreye-none" id="ref-for-dom-xreye-none②">"none"</a></code> and drawing an <code class="idl"><a data-link-type="idl" href="#xrcompositionlayer" id="ref-for-xrcompositionlayer②⑧">XRCompositionLayer</a></code> which is NOT an <code class="idl"><a data-link-type="idl" href="#xrprojectionlayer" id="ref-for-xrprojectionlayer①⑨">XRProjectionLayer</a></code> and does NOT have a <code class="idl"><a data-link-type="idl" href="#dom-xrcompositionlayer-layout" id="ref-for-dom-xrcompositionlayer-layout②⑥">layout</a></code> of <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-mono" id="ref-for-dom-xrlayerlayout-mono⑨">"mono"</a></code>, the <a data-link-type="dfn" href="https://www.w3.org/TR/webxr/#xr-compositor" id="ref-for-xr-compositor③⑥">XR Compositor</a> MUST render that layer
as if the <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view⑦">view</a> had an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#enumdef-xreye" id="ref-for-enumdef-xreye②">XREye</a></code> of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xreye-left" id="ref-for-dom-xreye-left">"left"</a></code>.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> This means that the side for the right eye of the layer is ignored. This enables authors to use the same assets for stereoscopic and
monoscopic devices.</p>
   <h3 class="heading settled" data-level="9.4" id="xrviewchanges"><span class="secno">9.4. </span><span class="content">XRView changes</span><a class="self-link" href="#xrviewchanges"></a></h3>
    Each <a data-link-type="dfn" href="https://immersive-web.github.io/webxr/#view" id="ref-for-view⑧">view</a> MUST define a <dfn data-var-ignore>recommended WebGL texture resolution</dfn> which represents a best estimate of the WebGL texture
resolution large enough to contain the view. 
   <h3 class="heading settled" data-level="9.5" id="animationframeschanges"><span class="secno">9.5. </span><span class="content">Animation frames changes</span><a class="self-link" href="#animationframeschanges"></a></h3>
   <div class="algorithm" data-algorithm="update-check-layers-state">
     This module replaces the steps given by "<a data-link-type="dfn" href="#check-the-layers-state" id="ref-for-check-the-layers-state">check the layers state</a>" from the WebXR specification. Instead to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-the-layers-state">check the layers state</dfn> with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-renderstate" id="ref-for-dom-xrsession-renderstate①">renderState</a></code> <var>state</var>, the user agent MUST run the following steps: 
    <ol>
     <li data-md>
      <p>If <var>state</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstate-baselayer" id="ref-for-dom-xrrenderstate-baselayer①">baseLayer</a></code> is not <code>null</code>, return <code>true</code>.</p>
     <li data-md>
      <p>If <var>state</var>’s <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstateinit-layers" id="ref-for-dom-xrrenderstateinit-layers⑧">layers</a></code> is not empty, return <code>true</code>.</p>
     <li data-md>
      <p>return <code>false</code>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="10" id="security"><span class="secno">10. </span><span class="content">Security and Privacy Considerations</span><a class="self-link" href="#security"></a></h2>
   <h3 class="heading settled" data-level="10.1" id="xrcompositiontiming"><span class="secno">10.1. </span><span class="content">Timing of the composition</span><a class="self-link" href="#xrcompositiontiming"></a></h3>
   <p>Composition timing MUST be independent of the content that is rendered.
Moreover, content in a layer MUST not be observable in other layers.</p>
   <p>If possible, composition of layers should happen outside the browser to reduce risk of timing attacks or other security vulnerabilities.</p>
   <h3 class="heading settled" data-level="10.2" id="xrlayerallocation"><span class="secno">10.2. </span><span class="content">Allocation of layers</span><a class="self-link" href="#xrlayerallocation"></a></h3>
   <p>The user agent MAY put limits on any resource allocation such as the maximum pixel size or the number of layers to reduce the identifiability of the GPU hardware.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <wpt open title="Tests relating to the content of this specification
                     may be documented in “Tests” blocks like this one.
                     Any such block is non-normative."></wpt>
   <section>
    <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span></h3>
    <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
    <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
   </section>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#allocate-color-textures">allocate color textures</a><span>, in § 6.9</span>
   <li><a href="#allocate-color-textures-for-projection-layers">allocate color textures for projection layers</a><span>, in § 6.9</span>
   <li><a href="#allocate-depth-textures">allocate depth textures</a><span>, in § 6.9</span>
   <li><a href="#allocate-depth-textures-for-projection-layers">allocate depth textures for projection layers</a><span>, in § 6.9</span>
   <li><a href="#allocate-the-color-textures-for-the-secondary-views">allocate the color textures for the secondary views</a><span>, in § 6.9</span>
   <li><a href="#allocate-the-depth-textures-for-the-secondary-views">allocate the depth textures for the secondary views</a><span>, in § 6.9</span>
   <li>
    aspectRatio
    <ul>
     <li><a href="#dom-xrcylinderlayer-aspectratio">attribute for XRCylinderLayer</a><span>, in § 3.6</span>
     <li><a href="#dom-xrcylinderlayerinit-aspectratio">dict-member for XRCylinderLayerInit</a><span>, in § 6.6</span>
     <li><a href="#dom-xrmediacylinderlayerinit-aspectratio">dict-member for XRMediaCylinderLayerInit</a><span>, in § 7.3</span>
    </ul>
   <li><a href="#dom-xrcompositionlayer-blendtexturesourcealpha">blendTextureSourceAlpha</a><span>, in § 3.3</span>
   <li><a href="#calculate-the-aspect-ratio">calculate the aspect ratio</a><span>, in § 7.5</span>
   <li>
    centralAngle
    <ul>
     <li><a href="#dom-xrcylinderlayer-centralangle">attribute for XRCylinderLayer</a><span>, in § 3.6</span>
     <li><a href="#dom-xrcylinderlayerinit-centralangle">dict-member for XRCylinderLayerInit</a><span>, in § 6.6</span>
     <li><a href="#dom-xrmediacylinderlayerinit-centralangle">dict-member for XRMediaCylinderLayerInit</a><span>, in § 7.3</span>
    </ul>
   <li>
    centralHorizontalAngle
    <ul>
     <li><a href="#dom-xrequirectlayer-centralhorizontalangle">attribute for XREquirectLayer</a><span>, in § 3.7</span>
     <li><a href="#dom-xrequirectlayerinit-centralhorizontalangle">dict-member for XREquirectLayerInit</a><span>, in § 6.7</span>
     <li><a href="#dom-xrmediaequirectlayerinit-centralhorizontalangle">dict-member for XRMediaEquirectLayerInit</a><span>, in § 7.4</span>
    </ul>
   <li><a href="#check-the-layers-state">check the layers state</a><span>, in § 9.5</span>
   <li><a href="#dom-xrcompositionlayer-chromaticaberrationcorrection">chromaticAberrationCorrection</a><span>, in § 3.3</span>
   <li>
    colorFormat
    <ul>
     <li><a href="#dom-xrlayerinit-colorformat">dict-member for XRLayerInit</a><span>, in § 6.4</span>
     <li><a href="#dom-xrprojectionlayerinit-colorformat">dict-member for XRProjectionLayerInit</a><span>, in § 6.3</span>
    </ul>
   <li><a href="#dom-xrwebglsubimage-colortexture">colorTexture</a><span>, in § 5.2</span>
   <li><a href="#colortextures">colorTextures</a><span>, in § 6.9</span>
   <li><a href="#xrprojectionlayer-colortextures-for-secondary-views">colorTextures for secondary views</a><span>, in § 6.9</span>
   <li><a href="#dom-xrmediabinding-xrmediabinding">constructor(session)</a><span>, in § 7.5</span>
   <li><a href="#dom-xrwebglbinding-xrwebglbinding">constructor(session, context)</a><span>, in § 6.9</span>
   <li><a href="#dom-xrlayerevent-xrlayerevent">constructor(type, eventInitDict)</a><span>, in § 8.1</span>
   <li>
    context
    <ul>
     <li><a href="#xrcompositionlayer-context">dfn for XRCompositionLayer</a><span>, in § 3.3</span>
     <li><a href="#xrwebglbinding-context">dfn for XRWebGLBinding</a><span>, in § 6.9</span>
    </ul>
   <li><a href="#dom-xrwebglbinding-createcubelayer">createCubeLayer()</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-createcubelayer">createCubeLayer(init)</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-createcylinderlayer">createCylinderLayer()</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-createcylinderlayer">createCylinderLayer(init)</a><span>, in § 6.9</span>
   <li><a href="#dom-xrmediabinding-createcylinderlayer">createCylinderLayer(video)</a><span>, in § 7.5</span>
   <li><a href="#dom-xrmediabinding-createcylinderlayer">createCylinderLayer(video, init)</a><span>, in § 7.5</span>
   <li><a href="#dom-xrwebglbinding-createequirectlayer">createEquirectLayer()</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-createequirectlayer">createEquirectLayer(init)</a><span>, in § 6.9</span>
   <li><a href="#dom-xrmediabinding-createequirectlayer">createEquirectLayer(video)</a><span>, in § 7.5</span>
   <li><a href="#dom-xrmediabinding-createequirectlayer">createEquirectLayer(video, init)</a><span>, in § 7.5</span>
   <li><a href="#dom-xrwebglbinding-createprojectionlayer">createProjectionLayer()</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-createprojectionlayer">createProjectionLayer(init)</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-createquadlayer">createQuadLayer()</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-createquadlayer">createQuadLayer(init)</a><span>, in § 6.9</span>
   <li><a href="#dom-xrmediabinding-createquadlayer">createQuadLayer(video)</a><span>, in § 7.5</span>
   <li><a href="#dom-xrmediabinding-createquadlayer">createQuadLayer(video, init)</a><span>, in § 7.5</span>
   <li><a href="#dom-xrlayerlayout-default">"default"</a><span>, in § 3.2</span>
   <li><a href="#dom-xrlayerlayout-default">default</a><span>, in § 3.2</span>
   <li>
    depthFormat
    <ul>
     <li><a href="#dom-xrlayerinit-depthformat">dict-member for XRLayerInit</a><span>, in § 6.4</span>
     <li><a href="#dom-xrprojectionlayerinit-depthformat">dict-member for XRProjectionLayerInit</a><span>, in § 6.3</span>
    </ul>
   <li><a href="#dom-xrwebglsubimage-depthstenciltexture">depthStencilTexture</a><span>, in § 5.2</span>
   <li><a href="#depthstenciltextures">depthStencilTextures</a><span>, in § 6.9</span>
   <li><a href="#xrprojectionlayer-depthstenciltextures-for-secondary-views">depthStencilTextures for secondary views</a><span>, in § 6.9</span>
   <li><a href="#dom-xrcompositionlayer-destroy">destroy()</a><span>, in § 3.3</span>
   <li><a href="#determine-the-layout-attribute">determine the layout attribute</a><span>, in § 6.9</span>
   <li><a href="#determine-the-maximum-scalefactor">determine the maximum scalefactor</a><span>, in § 6.9</span>
   <li><a href="#dom-xrprojectionlayer-fixedfoveation">fixedFoveation</a><span>, in § 3.4</span>
   <li><a href="#dom-xrwebglbinding-getsubimage">getSubImage(layer, frame)</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-getsubimage">getSubImage(layer, frame, eye)</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-getviewsubimage">getViewSubImage(layer, view)</a><span>, in § 6.9</span>
   <li>
    height
    <ul>
     <li><a href="#dom-xrquadlayer-height">attribute for XRQuadLayer</a><span>, in § 3.5</span>
     <li><a href="#dom-xrmediaquadlayerinit-height">dict-member for XRMediaQuadLayerInit</a><span>, in § 7.2</span>
     <li><a href="#dom-xrquadlayerinit-height">dict-member for XRQuadLayerInit</a><span>, in § 6.5</span>
    </ul>
   <li><a href="#dom-xrprojectionlayer-ignoredepthvalues">ignoreDepthValues</a><span>, in § 3.4</span>
   <li><a href="#dom-xrwebglsubimage-imageindex">imageIndex</a><span>, in § 5.2</span>
   <li><a href="#initialize-a-cylinder-layer">initialize a cylinder layer</a><span>, in § 3.6</span>
   <li><a href="#initialize-a-equirect-layer">initialize a equirect layer</a><span>, in § 3.7</span>
   <li><a href="#initialize-a-quad-layer">initialize a quad layer</a><span>, in § 3.5</span>
   <li><a href="#layers-initialize-the-render-state">initialize the render state</a><span>, in § 9.1</span>
   <li><a href="#initialize-the-viewport">initialize the viewport</a><span>, in § 6.9</span>
   <li><a href="#intialize-a-composition-layer">intialize a composition layer</a><span>, in § 3.3</span>
   <li><a href="#dom-xrmedialayerinit-invertstereo">invertStereo</a><span>, in § 7.1</span>
   <li>
    isStatic
    <ul>
     <li><a href="#xrcompositionlayer-isstatic">dfn for XRCompositionLayer</a><span>, in § 3.3</span>
     <li><a href="#dom-xrlayerinit-isstatic">dict-member for XRLayerInit</a><span>, in § 6.4</span>
    </ul>
   <li>
    layer
    <ul>
     <li><a href="#dom-xrlayerevent-layer">attribute for XRLayerEvent</a><span>, in § 8.1</span>
     <li><a href="#dom-xrlayereventinit-layer">dict-member for XRLayerEventInit</a><span>, in § 8.1</span>
    </ul>
   <li>
    layers
    <ul>
     <li><a href="#dom-xrrenderstate-layers">attribute for XRRenderState</a><span>, in § 9.1</span>
     <li><a href="#feature-descriptor-layers">dfn for feature descriptor</a><span>, in § 2</span>
    </ul>
   <li>
    layout
    <ul>
     <li><a href="#dom-xrcompositionlayer-layout">attribute for XRCompositionLayer</a><span>, in § 3.3</span>
     <li><a href="#dom-xrlayerinit-layout">dict-member for XRLayerInit</a><span>, in § 6.4</span>
     <li><a href="#dom-xrmedialayerinit-layout">dict-member for XRMediaLayerInit</a><span>, in § 7.1</span>
    </ul>
   <li><a href="#list-of-color-formats-for-non-projection-layers">list of color formats for non-projection layers</a><span>, in § 6.4</span>
   <li><a href="#list-of-color-formats-for-projection-layers">list of color formats for projection layers</a><span>, in § 6.3</span>
   <li><a href="#list-of-depth-formats-for-non-projection-layers">list of depth formats for non-projection layers</a><span>, in § 6.4</span>
   <li><a href="#list-of-depth-formats-for-projection-layers">list of depth formats for projection layers</a><span>, in § 6.3</span>
   <li>
    lowerVerticalAngle
    <ul>
     <li><a href="#dom-xrequirectlayer-lowerverticalangle">attribute for XREquirectLayer</a><span>, in § 3.7</span>
     <li><a href="#dom-xrequirectlayerinit-lowerverticalangle">dict-member for XREquirectLayerInit</a><span>, in § 6.7</span>
     <li><a href="#dom-xrmediaequirectlayerinit-lowerverticalangle">dict-member for XRMediaEquirectLayerInit</a><span>, in § 7.4</span>
    </ul>
   <li><a href="#xrcompositionlayer-media">media</a><span>, in § 3.3</span>
   <li>
    mipLevels
    <ul>
     <li><a href="#dom-xrcompositionlayer-miplevels">attribute for XRCompositionLayer</a><span>, in § 3.3</span>
     <li><a href="#dom-xrlayerinit-miplevels">dict-member for XRLayerInit</a><span>, in § 6.4</span>
    </ul>
   <li><a href="#dom-xrlayerlayout-mono">"mono"</a><span>, in § 3.2</span>
   <li><a href="#dom-xrlayerlayout-mono">mono</a><span>, in § 3.2</span>
   <li><a href="#dom-xrwebglbinding-nativeprojectionscalefactor">nativeProjectionScaleFactor</a><span>, in § 6.9</span>
   <li><a href="#dom-xrcompositionlayer-needsredraw">needsRedraw</a><span>, in § 3.3</span>
   <li>
    onredraw
    <ul>
     <li><a href="#dom-xrcubelayer-onredraw">attribute for XRCubeLayer</a><span>, in § 3.8</span>
     <li><a href="#dom-xrcylinderlayer-onredraw">attribute for XRCylinderLayer</a><span>, in § 3.6</span>
     <li><a href="#dom-xrequirectlayer-onredraw">attribute for XREquirectLayer</a><span>, in § 3.7</span>
     <li><a href="#dom-xrquadlayer-onredraw">attribute for XRQuadLayer</a><span>, in § 3.5</span>
    </ul>
   <li><a href="#opaque-texture">opaque texture</a><span>, in § 6.2</span>
   <li>
    orientation
    <ul>
     <li><a href="#dom-xrcubelayer-orientation">attribute for XRCubeLayer</a><span>, in § 3.8</span>
     <li><a href="#dom-xrcubelayerinit-orientation">dict-member for XRCubeLayerInit</a><span>, in § 6.8</span>
    </ul>
   <li>
    radius
    <ul>
     <li><a href="#dom-xrcylinderlayer-radius">attribute for XRCylinderLayer</a><span>, in § 3.6</span>
     <li><a href="#dom-xrequirectlayer-radius">attribute for XREquirectLayer</a><span>, in § 3.7</span>
     <li><a href="#dom-xrcylinderlayerinit-radius">dict-member for XRCylinderLayerInit</a><span>, in § 6.6</span>
     <li><a href="#dom-xrequirectlayerinit-radius">dict-member for XREquirectLayerInit</a><span>, in § 6.7</span>
     <li><a href="#dom-xrmediacylinderlayerinit-radius">dict-member for XRMediaCylinderLayerInit</a><span>, in § 7.3</span>
     <li><a href="#dom-xrmediaequirectlayerinit-radius">dict-member for XRMediaEquirectLayerInit</a><span>, in § 7.4</span>
    </ul>
   <li><a href="#eventdef-xrlayer-redraw">redraw</a><span>, in § 8.2</span>
   <li><a href="#dom-xrprojectionlayerinit-scalefactor">scaleFactor</a><span>, in § 6.3</span>
   <li>
    session
    <ul>
     <li><a href="#xrcompositionlayer-session">dfn for XRCompositionLayer</a><span>, in § 3.3</span>
     <li><a href="#xrmediabinding-session">dfn for XRMediaBinding</a><span>, in § 7.5</span>
     <li><a href="#xrwebglbinding-session">dfn for XRWebGLBinding</a><span>, in § 6.9</span>
    </ul>
   <li><a href="#setting-the-space-on-a-layer">setting the space on a layer</a><span>, in § 3.3</span>
   <li>
    space
    <ul>
     <li><a href="#dom-xrcubelayer-space">attribute for XRCubeLayer</a><span>, in § 3.8</span>
     <li><a href="#dom-xrcylinderlayer-space">attribute for XRCylinderLayer</a><span>, in § 3.6</span>
     <li><a href="#dom-xrequirectlayer-space">attribute for XREquirectLayer</a><span>, in § 3.7</span>
     <li><a href="#dom-xrquadlayer-space">attribute for XRQuadLayer</a><span>, in § 3.5</span>
     <li><a href="#dom-xrlayerinit-space">dict-member for XRLayerInit</a><span>, in § 6.4</span>
     <li><a href="#dom-xrmedialayerinit-space">dict-member for XRMediaLayerInit</a><span>, in § 7.1</span>
    </ul>
   <li><a href="#dom-xrlayerlayout-stereo">"stereo"</a><span>, in § 3.2</span>
   <li><a href="#dom-xrlayerlayout-stereo">stereo</a><span>, in § 3.2</span>
   <li><a href="#dom-xrlayerlayout-stereo-left-right">"stereo-left-right"</a><span>, in § 3.2</span>
   <li><a href="#dom-xrlayerlayout-stereo-left-right">stereo-left-right</a><span>, in § 3.2</span>
   <li><a href="#dom-xrlayerlayout-stereo-top-bottom">"stereo-top-bottom"</a><span>, in § 3.2</span>
   <li><a href="#dom-xrlayerlayout-stereo-top-bottom">stereo-top-bottom</a><span>, in § 3.2</span>
   <li><a href="#dom-xrtexturetype-texture">"texture"</a><span>, in § 5.3</span>
   <li><a href="#dom-xrtexturetype-texture">texture</a><span>, in § 5.3</span>
   <li><a href="#dom-xrtexturetype-texture-array">"texture-array"</a><span>, in § 5.3</span>
   <li><a href="#dom-xrtexturetype-texture-array">texture-array</a><span>, in § 5.3</span>
   <li><a href="#dom-xrprojectionlayer-texturearraylength">textureArrayLength</a><span>, in § 3.4</span>
   <li>
    textureHeight
    <ul>
     <li><a href="#dom-xrprojectionlayer-textureheight">attribute for XRProjectionLayer</a><span>, in § 3.4</span>
     <li><a href="#dom-xrwebglsubimage-textureheight">attribute for XRWebGLSubImage</a><span>, in § 5.2</span>
    </ul>
   <li>
    textureType
    <ul>
     <li><a href="#dom-xrcylinderlayerinit-texturetype">dict-member for XRCylinderLayerInit</a><span>, in § 6.6</span>
     <li><a href="#dom-xrequirectlayerinit-texturetype">dict-member for XREquirectLayerInit</a><span>, in § 6.7</span>
     <li><a href="#dom-xrprojectionlayerinit-texturetype">dict-member for XRProjectionLayerInit</a><span>, in § 6.3</span>
     <li><a href="#dom-xrquadlayerinit-texturetype">dict-member for XRQuadLayerInit</a><span>, in § 6.5</span>
    </ul>
   <li>
    textureWidth
    <ul>
     <li><a href="#dom-xrprojectionlayer-texturewidth">attribute for XRProjectionLayer</a><span>, in § 3.4</span>
     <li><a href="#dom-xrwebglsubimage-texturewidth">attribute for XRWebGLSubImage</a><span>, in § 5.2</span>
    </ul>
   <li><a href="#the-underlying-resources-of-a-layer-are-lost">the underlying resources of a layer are lost</a><span>, in § 3.3</span>
   <li>
    transform
    <ul>
     <li><a href="#dom-xrcylinderlayer-transform">attribute for XRCylinderLayer</a><span>, in § 3.6</span>
     <li><a href="#dom-xrequirectlayer-transform">attribute for XREquirectLayer</a><span>, in § 3.7</span>
     <li><a href="#dom-xrquadlayer-transform">attribute for XRQuadLayer</a><span>, in § 3.5</span>
     <li><a href="#dom-xrcylinderlayerinit-transform">dict-member for XRCylinderLayerInit</a><span>, in § 6.6</span>
     <li><a href="#dom-xrequirectlayerinit-transform">dict-member for XREquirectLayerInit</a><span>, in § 6.7</span>
     <li><a href="#dom-xrmediacylinderlayerinit-transform">dict-member for XRMediaCylinderLayerInit</a><span>, in § 7.3</span>
     <li><a href="#dom-xrmediaequirectlayerinit-transform">dict-member for XRMediaEquirectLayerInit</a><span>, in § 7.4</span>
     <li><a href="#dom-xrmediaquadlayerinit-transform">dict-member for XRMediaQuadLayerInit</a><span>, in § 7.2</span>
     <li><a href="#dom-xrquadlayerinit-transform">dict-member for XRQuadLayerInit</a><span>, in § 6.5</span>
    </ul>
   <li><a href="#layers-update-the-pending-layers-state">update the pending layers state</a><span>, in § 9.2</span>
   <li>
    upperVerticalAngle
    <ul>
     <li><a href="#dom-xrequirectlayer-upperverticalangle">attribute for XREquirectLayer</a><span>, in § 3.7</span>
     <li><a href="#dom-xrequirectlayerinit-upperverticalangle">dict-member for XREquirectLayerInit</a><span>, in § 6.7</span>
     <li><a href="#dom-xrmediaequirectlayerinit-upperverticalangle">dict-member for XRMediaEquirectLayerInit</a><span>, in § 7.4</span>
    </ul>
   <li><a href="#validate-the-state-of-the-xrwebglsubimage-creation-function">validate the state of the XRWebGLSubImage creation function</a><span>, in § 6.9</span>
   <li><a href="#dom-xrlayerinit-viewpixelheight">viewPixelHeight</a><span>, in § 6.4</span>
   <li><a href="#dom-xrlayerinit-viewpixelwidth">viewPixelWidth</a><span>, in § 6.4</span>
   <li><a href="#dom-xrsubimage-viewport">viewport</a><span>, in § 5.1</span>
   <li>
    width
    <ul>
     <li><a href="#dom-xrquadlayer-width">attribute for XRQuadLayer</a><span>, in § 3.5</span>
     <li><a href="#dom-xrmediaquadlayerinit-width">dict-member for XRMediaQuadLayerInit</a><span>, in § 7.2</span>
     <li><a href="#dom-xrquadlayerinit-width">dict-member for XRQuadLayerInit</a><span>, in § 6.5</span>
    </ul>
   <li><a href="#xrcompositionlayer">XRCompositionLayer</a><span>, in § 3.3</span>
   <li><a href="#xrcubelayer">XRCubeLayer</a><span>, in § 3.8</span>
   <li><a href="#dictdef-xrcubelayerinit">XRCubeLayerInit</a><span>, in § 6.8</span>
   <li><a href="#xrcylinderlayer">XRCylinderLayer</a><span>, in § 3.6</span>
   <li><a href="#dictdef-xrcylinderlayerinit">XRCylinderLayerInit</a><span>, in § 6.6</span>
   <li><a href="#xrequirectlayer">XREquirectLayer</a><span>, in § 3.7</span>
   <li><a href="#dictdef-xrequirectlayerinit">XREquirectLayerInit</a><span>, in § 6.7</span>
   <li><a href="#xrlayerevent">XRLayerEvent</a><span>, in § 8.1</span>
   <li><a href="#dictdef-xrlayereventinit">XRLayerEventInit</a><span>, in § 8.1</span>
   <li><a href="#dom-xrlayerevent-xrlayerevent">XRLayerEvent(type, eventInitDict)</a><span>, in § 8.1</span>
   <li><a href="#dictdef-xrlayerinit">XRLayerInit</a><span>, in § 6.4</span>
   <li><a href="#enumdef-xrlayerlayout">XRLayerLayout</a><span>, in § 3.2</span>
   <li><a href="#xrmediabinding">XRMediaBinding</a><span>, in § 7.5</span>
   <li><a href="#dom-xrmediabinding-xrmediabinding">XRMediaBinding(session)</a><span>, in § 7.5</span>
   <li><a href="#dictdef-xrmediacylinderlayerinit">XRMediaCylinderLayerInit</a><span>, in § 7.3</span>
   <li><a href="#dictdef-xrmediaequirectlayerinit">XRMediaEquirectLayerInit</a><span>, in § 7.4</span>
   <li><a href="#dictdef-xrmedialayerinit">XRMediaLayerInit</a><span>, in § 7.1</span>
   <li><a href="#dictdef-xrmediaquadlayerinit">XRMediaQuadLayerInit</a><span>, in § 7.2</span>
   <li><a href="#xrprojectionlayer">XRProjectionLayer</a><span>, in § 3.4</span>
   <li><a href="#dictdef-xrprojectionlayerinit">XRProjectionLayerInit</a><span>, in § 6.3</span>
   <li><a href="#xrquadlayer">XRQuadLayer</a><span>, in § 3.5</span>
   <li><a href="#dictdef-xrquadlayerinit">XRQuadLayerInit</a><span>, in § 6.5</span>
   <li><a href="#xrsubimage">XRSubImage</a><span>, in § 5.1</span>
   <li><a href="#enumdef-xrtexturetype">XRTextureType</a><span>, in § 5.3</span>
   <li><a href="#xrwebglbinding">XRWebGLBinding</a><span>, in § 6.9</span>
   <li><a href="#dom-xrwebglbinding-xrwebglbinding">XRWebGLBinding(session, context)</a><span>, in § 6.9</span>
   <li><a href="#xrwebglsubimage">XRWebGLSubImage</a><span>, in § 5.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="418110ce">COMPRESSED_RGB8_ETC2</span>
     <li><span class="dfn-paneled" id="969dbc3c">COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2</span>
     <li><span class="dfn-paneled" id="8a47a7ee">COMPRESSED_RGBA8_ETC2_EAC</span>
     <li><span class="dfn-paneled" id="36e1af9e">COMPRESSED_SRGB8_ALPHA8_ETC2_EAC</span>
     <li><span class="dfn-paneled" id="68b7277c">COMPRESSED_SRGB8_ETC2</span>
     <li><span class="dfn-paneled" id="2fcba588">COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2</span>
     <li><span class="dfn-paneled" id="f784cfa2">DEPTH_COMPONENT</span>
     <li><span class="dfn-paneled" id="60a762fc">DEPTH_STENCIL</span>
     <li><span class="dfn-paneled" id="9d0c6188">EXT_sRGB</span>
     <li><span class="dfn-paneled" id="ea98c9bc">SRGB_ALPHA_EXT</span>
     <li><span class="dfn-paneled" id="7f015562">SRGB_EXT</span>
     <li><span class="dfn-paneled" id="6b35aef5">WEBGL_compressed_texture_astc</span>
     <li><span class="dfn-paneled" id="76c4c559">WEBGL_compressed_texture_etc</span>
     <li><span class="dfn-paneled" id="e430fc9d">WEBGL_depth_texture</span>
    </ul>
   <li>
    <a data-link-type="biblio">[COMPOSITING-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="08aa11ab">source-over</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-WRITING-MODES-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7bc19a34">end</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="129bdae8">Event</span>
     <li><span class="dfn-paneled" id="44a7708c">EventInit</span>
     <li><span class="dfn-paneled" id="5fd23811">fire an event</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GEOMETRY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="289ee1c2">DOMPointInit</span>
     <li><span class="dfn-paneled" id="5cce610d">DOMPointReadOnly</span>
     <li><span class="dfn-paneled" id="1bed6f27">fromPoint()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="f0951476">EventHandler</span>
     <li><span class="dfn-paneled" id="f57f330b">HTMLVideoElement</span>
     <li><span class="dfn-paneled" id="668b61dc">check the usability of the image argument</span>
     <li><span class="dfn-paneled" id="9a517a7d">queue a task</span>
     <li><span class="dfn-paneled" id="5991ccfb">relevant realm</span>
     <li><span class="dfn-paneled" id="d0a3e1e6">videoHeight</span>
     <li><span class="dfn-paneled" id="1a09160b">videoWidth</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-REQUEST]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="6a0eb819">request(permissionDesc)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBGL 2.0]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c91527f4">DEPTH24_STENCIL8</span>
     <li><span class="dfn-paneled" id="eb3c9516">DEPTH_COMPONENT24</span>
     <li><span class="dfn-paneled" id="b8493b91">RGB8</span>
     <li><span class="dfn-paneled" id="adfbda1b">RGBA8</span>
     <li><span class="dfn-paneled" id="f9fd5528">SRGB8</span>
     <li><span class="dfn-paneled" id="60e993cd">SRGB8_ALPHA8</span>
     <li><span class="dfn-paneled" id="f8715500">TEXTURE_2D_ARRAY</span>
     <li><span class="dfn-paneled" id="eb6a2780">WebGL2RenderingContext</span>
     <li><span class="dfn-paneled" id="d7d975a3">texStorage2D</span>
     <li><span class="dfn-paneled" id="f5072b69">texStorage3D</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBGL-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d384a96d">GLenum</span>
     <li><span class="dfn-paneled" id="cc56cc84">INVALID_OPERATION</span>
     <li><span class="dfn-paneled" id="c37054f1">RGB</span>
     <li><span class="dfn-paneled" id="1c1d06a6">RGBA</span>
     <li><span class="dfn-paneled" id="559bcd7a">TEXTURE_2D</span>
     <li><span class="dfn-paneled" id="79de2318">TEXTURE_CUBE_MAP</span>
     <li><span class="dfn-paneled" id="6c06778d">WebGLRenderingContext</span>
     <li><span class="dfn-paneled" id="b29d1be1">WebGLShader</span>
     <li><span class="dfn-paneled" id="0e5170dd">WebGLTexture</span>
     <li><span class="dfn-paneled" id="e6e9ebc9">clear</span>
     <li><span class="dfn-paneled" id="269eab92">deleteTexture</span>
     <li><span class="dfn-paneled" id="38a85ef5">drawArrays</span>
     <li><span class="dfn-paneled" id="387bce46">drawElements</span>
     <li><span class="dfn-paneled" id="65f302b6">extension</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="dcf5fafa">FrozenArray</span>
     <li><span class="dfn-paneled" id="797018a7">InvalidStateError</span>
     <li><span class="dfn-paneled" id="3182eb71">NotSupportedError</span>
     <li><span class="dfn-paneled" id="34443090">OperationError</span>
     <li><span class="dfn-paneled" id="a5c91173">SameObject</span>
     <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="8c800cdf">double</span>
     <li><span class="dfn-paneled" id="eec1be2d">float</span>
     <li><span class="dfn-paneled" id="56f81a8e">new</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
     <li><span class="dfn-paneled" id="e97a9688">unsigned long</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="1d718876">"bounded-floor"</span>
     <li><span class="dfn-paneled" id="79693d31">"immersive-vr"</span>
     <li><span class="dfn-paneled" id="f8e8ab73">"inline"</span>
     <li><span class="dfn-paneled" id="a5677f8e">"left"</span>
     <li><span class="dfn-paneled" id="b9124029">"local"</span>
     <li><span class="dfn-paneled" id="60b27df9">"local-floor"</span>
     <li><span class="dfn-paneled" id="2bc3d13f">"none"</span>
     <li><span class="dfn-paneled" id="b3966215">"right"</span>
     <li><span class="dfn-paneled" id="7dc19aa3">"unbounded"</span>
     <li><span class="dfn-paneled" id="2cdf537d">"viewer"</span>
     <li><span class="dfn-paneled" id="3e104f9e">XREye</span>
     <li><span class="dfn-paneled" id="7a030114">XRFrame</span>
     <li><span class="dfn-paneled" id="792a2bc2">XRLayer</span>
     <li><span class="dfn-paneled" id="2d75b7ec">XRReferenceSpace</span>
     <li><span class="dfn-paneled" id="c05c5130">XRRenderState</span>
     <li><span class="dfn-paneled" id="bebe7f3d">XRRenderStateInit</span>
     <li><span class="dfn-paneled" id="511280ad">XRRigidTransform</span>
     <li><span class="dfn-paneled" id="b23556e5">XRSession</span>
     <li><span class="dfn-paneled" id="0b566548">XRSpace</span>
     <li><span class="dfn-paneled" id="a6894dbc">XRView</span>
     <li><span class="dfn-paneled" id="14930f73">XRViewport</span>
     <li><span class="dfn-paneled" id="e14fa5cf">XRWebGLLayer</span>
     <li><span class="dfn-paneled" id="70bff367">XRWebGLRenderingContext</span>
     <li><span class="dfn-paneled" id="8af2159c">active <small>(for XRFrame)</small></span>
     <li><span class="dfn-paneled" id="ef54736d">active <small>(for view)</small></span>
     <li><span class="dfn-paneled" id="db0f4698">active immersive session</span>
     <li><span class="dfn-paneled" id="efa96fe0">active render state</span>
     <li><span class="dfn-paneled" id="56c741ec">animationFrame</span>
     <li><span class="dfn-paneled" id="bece2296">baseLayer <small>(for XRRenderState)</small></span>
     <li><span class="dfn-paneled" id="9f4ad927">baseLayer <small>(for XRRenderStateInit)</small></span>
     <li><span class="dfn-paneled" id="6779156f">feature descriptor</span>
     <li><span class="dfn-paneled" id="010bb3c9">feature requirements</span>
     <li><span class="dfn-paneled" id="6d3bd432">height</span>
     <li><span class="dfn-paneled" id="e80993fc">immersive session</span>
     <li><span class="dfn-paneled" id="15b6eedd">immersive XR device</span>
     <li><span class="dfn-paneled" id="c21106d4">layers</span>
     <li><span class="dfn-paneled" id="78d51c5b">list of views</span>
     <li><span class="dfn-paneled" id="c43de01d">native WebGL framebuffer resolution</span>
     <li><span class="dfn-paneled" id="fd00b20c">opaque framebuffer</span>
     <li><span class="dfn-paneled" id="cf990710">optionalFeatures</span>
     <li><span class="dfn-paneled" id="969e973e">orientation</span>
     <li><span class="dfn-paneled" id="9694bd75">pending render state</span>
     <li><span class="dfn-paneled" id="e31e5468">position</span>
     <li><span class="dfn-paneled" id="2e318144">primary view</span>
     <li><span class="dfn-paneled" id="fbeabdb0">recommended WebGL framebuffer resolution</span>
     <li><span class="dfn-paneled" id="124815d5">renderState</span>
     <li><span class="dfn-paneled" id="1e258aaa">requestAnimationFrame(callback)</span>
     <li><span class="dfn-paneled" id="dc9c48d6">requestSession(mode)</span>
     <li><span class="dfn-paneled" id="aecf1cb2">requiredFeatures</span>
     <li><span class="dfn-paneled" id="9398e781">secondary view</span>
     <li><span class="dfn-paneled" id="fb90aa4f">secondary-views</span>
     <li><span class="dfn-paneled" id="7c7eccf9">session <small>(for XRFrame)</small></span>
     <li><span class="dfn-paneled" id="5c4e891e">session <small>(for XRSpace)</small></span>
     <li><span class="dfn-paneled" id="45808f0c">session <small>(for XRWebGLLayer)</small></span>
     <li><span class="dfn-paneled" id="b8603d41">type</span>
     <li><span class="dfn-paneled" id="6b0b56e4">updateRenderState()</span>
     <li><span class="dfn-paneled" id="fb1796ee">view</span>
     <li><span class="dfn-paneled" id="b5ec2f0d">width</span>
     <li><span class="dfn-paneled" id="21119a76">x</span>
     <li><span class="dfn-paneled" id="f7a1b99f">XR animation frame</span>
     <li><span class="dfn-paneled" id="42894336">xr compatible</span>
     <li><span class="dfn-paneled" id="d0d9db47">xr compositor</span>
     <li><span class="dfn-paneled" id="3f9ada5b">XR device</span>
     <li><span class="dfn-paneled" id="a1042607">y</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR-AR-MODULE-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ac906c0c">"immersive-ar"</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-compositing-1">[COMPOSITING-1]
   <dd>Chris Harrelson. <a href="https://drafts.fxtf.org/compositing-1/"><cite>Compositing and Blending Level 1</cite></a>. URL: <a href="https://drafts.fxtf.org/compositing-1/">https://drafts.fxtf.org/compositing-1/</a>
   <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
   <dd>Elika Etemad; Koji Ishii. <a href="https://drafts.csswg.org/css-writing-modes-4/"><cite>CSS Writing Modes Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/css-writing-modes-4/">https://drafts.csswg.org/css-writing-modes-4/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-geometry-1">[GEOMETRY-1]
   <dd>Simon Pieters; Chris Harrelson. <a href="https://drafts.fxtf.org/geometry/"><cite>Geometry Interfaces Module Level 1</cite></a>. URL: <a href="https://drafts.fxtf.org/geometry/">https://drafts.fxtf.org/geometry/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-webgl-2">[WEBGL-2]
   <dd>Dean Jackson; Jeff Gilbert. <a href="https://www.khronos.org/registry/webgl/specs/latest/2.0/"><cite>WebGL 2.0 Specification</cite></a>. 12 August 2017. URL: <a href="https://www.khronos.org/registry/webgl/specs/latest/2.0/">https://www.khronos.org/registry/webgl/specs/latest/2.0/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
   <dt id="biblio-webxr">[WEBXR]
   <dd>Brandon Jones; Manish Goregaokar; Rik Cabanier. <a href="https://immersive-web.github.io/webxr/"><cite>WebXR Device API</cite></a>. URL: <a href="https://immersive-web.github.io/webxr/">https://immersive-web.github.io/webxr/</a>
   <dt id="biblio-webxr-ar-module-1">[WEBXR-AR-MODULE-1]
   <dd>Brandon Jones; Manish Goregaokar; Rik Cabanier. <a href="https://immersive-web.github.io/webxr-ar-module/"><cite>WebXR Augmented Reality Module - Level 1</cite></a>. URL: <a href="https://immersive-web.github.io/webxr-ar-module/">https://immersive-web.github.io/webxr-ar-module/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-permissions-request">[PERMISSIONS-REQUEST]
   <dd><a href="https://wicg.github.io/permissions-request/"><cite>Requesting Permissions</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/permissions-request/">https://wicg.github.io/permissions-request/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-xrlayerlayout"><code><c- g>XRLayerLayout</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-default"><c- s>"default"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-mono"><c- s>"mono"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-stereo"><c- s>"stereo"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-stereo-left-right"><c- s>"stereo-left-right"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrlayerlayout-stereo-top-bottom"><c- s>"stereo-top-bottom"</c-></a>
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrcompositionlayer"><code><c- g>XRCompositionLayer</c-></code></a> : <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrlayer"><c- n>XRLayer</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-xrlayerlayout"><c- n>XRLayerLayout</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="XRLayerLayout" href="#dom-xrcompositionlayer-layout"><c- g>layout</c-></a>;

  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-type="boolean" href="#dom-xrcompositionlayer-blendtexturesourcealpha"><c- g>blendTextureSourceAlpha</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>? <a class="idl-code" data-link-type="attribute" data-type="boolean?" href="#dom-xrcompositionlayer-chromaticaberrationcorrection"><c- g>chromaticAberrationCorrection</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrcompositionlayer-miplevels"><c- g>mipLevels</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-xrcompositionlayer-needsredraw"><c- g>needsRedraw</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-xrcompositionlayer-destroy"><code><c- g>destroy</c-></code></a>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrprojectionlayer"><code><c- g>XRProjectionLayer</c-></code></a> : <a data-link-type="idl-name" href="#xrcompositionlayer"><c- n>XRCompositionLayer</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrprojectionlayer-texturewidth"><c- g>textureWidth</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrprojectionlayer-textureheight"><c- g>textureHeight</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrprojectionlayer-texturearraylength"><c- g>textureArrayLength</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-xrprojectionlayer-ignoredepthvalues"><c- g>ignoreDepthValues</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a>? <a class="idl-code" data-link-type="attribute" data-type="float?" href="#dom-xrprojectionlayer-fixedfoveation"><c- g>fixedFoveation</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrquadlayer"><code><c- g>XRQuadLayer</c-></code></a> : <a data-link-type="idl-name" href="#xrcompositionlayer"><c- n>XRCompositionLayer</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRSpace" href="#dom-xrquadlayer-space"><c- g>space</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRRigidTransform" href="#dom-xrquadlayer-transform"><c- g>transform</c-></a>;

  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrquadlayer-width"><c- g>width</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrquadlayer-height"><c- g>height</c-></a>;

  // Events
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-xrquadlayer-onredraw"><c- g>onredraw</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrcylinderlayer"><code><c- g>XRCylinderLayer</c-></code></a> : <a data-link-type="idl-name" href="#xrcompositionlayer"><c- n>XRCompositionLayer</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRSpace" href="#dom-xrcylinderlayer-space"><c- g>space</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRRigidTransform" href="#dom-xrcylinderlayer-transform"><c- g>transform</c-></a>;

  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrcylinderlayer-radius"><c- g>radius</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrcylinderlayer-centralangle"><c- g>centralAngle</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrcylinderlayer-aspectratio"><c- g>aspectRatio</c-></a>;

  // Events
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-xrcylinderlayer-onredraw"><c- g>onredraw</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrequirectlayer"><code><c- g>XREquirectLayer</c-></code></a> : <a data-link-type="idl-name" href="#xrcompositionlayer"><c- n>XRCompositionLayer</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace"><c- n>XRSpace</c-></a> <a data-type="XRSpace" href="#dom-xrequirectlayer-space"><code><c- g>space</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRRigidTransform" href="#dom-xrequirectlayer-transform"><c- g>transform</c-></a>;

  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrequirectlayer-radius"><c- g>radius</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrequirectlayer-centralhorizontalangle"><c- g>centralHorizontalAngle</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrequirectlayer-upperverticalangle"><c- g>upperVerticalAngle</c-></a>;
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a class="idl-code" data-link-type="attribute" data-type="float" href="#dom-xrequirectlayer-lowerverticalangle"><c- g>lowerVerticalAngle</c-></a>;

  // Events
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-xrequirectlayer-onredraw"><c- g>onredraw</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrcubelayer"><code><c- g>XRCubeLayer</c-></code></a> : <a data-link-type="idl-name" href="#xrcompositionlayer"><c- n>XRCompositionLayer</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="attribute" data-type="XRSpace" href="#dom-xrcubelayer-space"><c- g>space</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dompointreadonly"><c- n>DOMPointReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMPointReadOnly" href="#dom-xrcubelayer-orientation"><c- g>orientation</c-></a>;

  // Events
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-xrcubelayer-onredraw"><c- g>onredraw</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrsubimage"><code><c- g>XRSubImage</c-></code></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrviewport"><c- n>XRViewport</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="XRViewport" href="#dom-xrsubimage-viewport"><c- g>viewport</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrwebglsubimage"><code><c- g>XRWebGLSubImage</c-></code></a> : <a data-link-type="idl-name" href="#xrsubimage"><c- n>XRSubImage</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLTexture"><c- n>WebGLTexture</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="WebGLTexture" href="#dom-xrwebglsubimage-colortexture"><c- g>colorTexture</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLTexture"><c- n>WebGLTexture</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="WebGLTexture?" href="#dom-xrwebglsubimage-depthstenciltexture"><c- g>depthStencilTexture</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long?" href="#dom-xrwebglsubimage-imageindex"><c- g>imageIndex</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrwebglsubimage-texturewidth"><c- g>textureWidth</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long" href="#dom-xrwebglsubimage-textureheight"><c- g>textureHeight</c-></a>;
};

<c- b>enum</c-> <a href="#enumdef-xrtexturetype"><code><c- g>XRTextureType</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrtexturetype-texture"><c- s>"texture"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-xrtexturetype-texture-array"><c- s>"texture-array"</c-></a>
};

<c- b>dictionary</c-> <a href="#dictdef-xrprojectionlayerinit"><code><c- g>XRProjectionLayerInit</c-></code></a> {
  <a data-link-type="idl-name" href="#enumdef-xrtexturetype"><c- n>XRTextureType</c-></a> <a class="idl-code" data-default="&quot;texture&quot;" data-link-type="dict-member" data-type="XRTextureType" href="#dom-xrprojectionlayerinit-texturetype"><c- g>textureType</c-></a> = "texture";
  <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1"><c- n>GLenum</c-></a> <a class="idl-code" data-default="0x1908" data-link-type="dict-member" data-type="GLenum" href="#dom-xrprojectionlayerinit-colorformat"><c- g>colorFormat</c-></a> = 0x1908; // RGBA
  <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1"><c- n>GLenum</c-></a> <a class="idl-code" data-default="0x1902" data-link-type="dict-member" data-type="GLenum" href="#dom-xrprojectionlayerinit-depthformat"><c- g>depthFormat</c-></a> = 0x1902; // DEPTH_COMPONENT
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a class="idl-code" data-default="1.0" data-link-type="dict-member" data-type="double" href="#dom-xrprojectionlayerinit-scalefactor"><c- g>scaleFactor</c-></a> = 1.0;
};

<c- b>dictionary</c-> <a href="#dictdef-xrlayerinit"><code><c- g>XRLayerInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="XRSpace" href="#dom-xrlayerinit-space"><c- g>space</c-></a>;
  <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1"><c- n>GLenum</c-></a> <a class="idl-code" data-default="0x1908" data-link-type="dict-member" data-type="GLenum" href="#dom-xrlayerinit-colorformat"><c- g>colorFormat</c-></a> = 0x1908; // RGBA
  <a data-link-type="idl-name" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.1"><c- n>GLenum</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="GLenum?" href="#dom-xrlayerinit-depthformat"><c- g>depthFormat</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-default="1" data-link-type="dict-member" data-type="unsigned long" href="#dom-xrlayerinit-miplevels"><c- g>mipLevels</c-></a> = 1;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="unsigned long" href="#dom-xrlayerinit-viewpixelwidth"><c- g>viewPixelWidth</c-></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="unsigned long" href="#dom-xrlayerinit-viewpixelheight"><c- g>viewPixelHeight</c-></a>;
  <a data-link-type="idl-name" href="#enumdef-xrlayerlayout"><c- n>XRLayerLayout</c-></a> <a class="idl-code" data-default="&quot;mono&quot;" data-link-type="dict-member" data-type="XRLayerLayout" href="#dom-xrlayerinit-layout"><c- g>layout</c-></a> = "mono";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-xrlayerinit-isstatic"><code><c- g>isStatic</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-xrquadlayerinit"><code><c- g>XRQuadLayerInit</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-xrlayerinit"><c- n>XRLayerInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-xrtexturetype"><c- n>XRTextureType</c-></a> <a data-default="&quot;texture&quot;" data-type="XRTextureType" href="#dom-xrquadlayerinit-texturetype"><code><c- g>textureType</c-></code></a> = "texture";
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a>? <a data-type="XRRigidTransform?" href="#dom-xrquadlayerinit-transform"><code><c- g>transform</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="1.0" data-type="float" href="#dom-xrquadlayerinit-width"><code><c- g>width</c-></code></a> = 1.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="1.0" data-type="float" href="#dom-xrquadlayerinit-height"><code><c- g>height</c-></code></a> = 1.0;
};

<c- b>dictionary</c-> <a href="#dictdef-xrcylinderlayerinit"><code><c- g>XRCylinderLayerInit</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-xrlayerinit"><c- n>XRLayerInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-xrtexturetype"><c- n>XRTextureType</c-></a> <a data-default="&quot;texture&quot;" data-type="XRTextureType" href="#dom-xrcylinderlayerinit-texturetype"><code><c- g>textureType</c-></code></a> = "texture";
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a>? <a data-type="XRRigidTransform?" href="#dom-xrcylinderlayerinit-transform"><code><c- g>transform</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="2.0" data-type="float" href="#dom-xrcylinderlayerinit-radius"><code><c- g>radius</c-></code></a> = 2.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="0.78539" data-type="float" href="#dom-xrcylinderlayerinit-centralangle"><code><c- g>centralAngle</c-></code></a> = 0.78539;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="2.0" data-type="float" href="#dom-xrcylinderlayerinit-aspectratio"><code><c- g>aspectRatio</c-></code></a> = 2.0;
};

<c- b>dictionary</c-> <a href="#dictdef-xrequirectlayerinit"><code><c- g>XREquirectLayerInit</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-xrlayerinit"><c- n>XRLayerInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-xrtexturetype"><c- n>XRTextureType</c-></a> <a data-default="&quot;texture&quot;" data-type="XRTextureType" href="#dom-xrequirectlayerinit-texturetype"><code><c- g>textureType</c-></code></a> = "texture";
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a>? <a data-type="XRRigidTransform?" href="#dom-xrequirectlayerinit-transform"><code><c- g>transform</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="0" data-type="float" href="#dom-xrequirectlayerinit-radius"><code><c- g>radius</c-></code></a> = 0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="6.28318" data-type="float" href="#dom-xrequirectlayerinit-centralhorizontalangle"><code><c- g>centralHorizontalAngle</c-></code></a> = 6.28318;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="1.570795" data-type="float" href="#dom-xrequirectlayerinit-upperverticalangle"><code><c- g>upperVerticalAngle</c-></code></a> = 1.570795;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="-1.570795" data-type="float" href="#dom-xrequirectlayerinit-lowerverticalangle"><code><c- g>lowerVerticalAngle</c-></code></a> = -1.570795;
};

<c- b>dictionary</c-> <a href="#dictdef-xrcubelayerinit"><code><c- g>XRCubeLayerInit</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-xrlayerinit"><c- n>XRLayerInit</c-></a> {
  <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dompointreadonly"><c- n>DOMPointReadOnly</c-></a>? <a data-type="DOMPointReadOnly?" href="#dom-xrcubelayerinit-orientation"><code><c- g>orientation</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrwebglbinding"><code><c- g>XRWebGLBinding</c-></code></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-xrwebglbinding-xrwebglbinding"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrsession"><c- n>XRSession</c-></a> <a href="#dom-xrwebglbinding-xrwebglbinding-session-context-session"><code><c- g>session</c-></code></a>, <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#typedefdef-xrwebglrenderingcontext"><c- n>XRWebGLRenderingContext</c-></a> <a href="#dom-xrwebglbinding-xrwebglbinding-session-context-context"><code><c- g>context</c-></code></a>);

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-readonly data-type="double" href="#dom-xrwebglbinding-nativeprojectionscalefactor"><code><c- g>nativeProjectionScaleFactor</c-></code></a>;

  <a data-link-type="idl-name" href="#xrprojectionlayer"><c- n>XRProjectionLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createprojectionlayer"><c- g>createProjectionLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrprojectionlayerinit"><c- n>XRProjectionLayerInit</c-></a> <a href="#dom-xrwebglbinding-createprojectionlayer-init-init"><code><c- g>init</c-></code></a> = {});
  <a data-link-type="idl-name" href="#xrquadlayer"><c- n>XRQuadLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createquadlayer"><c- g>createQuadLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrquadlayerinit"><c- n>XRQuadLayerInit</c-></a> <a href="#dom-xrwebglbinding-createquadlayer-init-init"><code><c- g>init</c-></code></a> = {});
  <a data-link-type="idl-name" href="#xrcylinderlayer"><c- n>XRCylinderLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createcylinderlayer"><c- g>createCylinderLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrcylinderlayerinit"><c- n>XRCylinderLayerInit</c-></a> <a href="#dom-xrwebglbinding-createcylinderlayer-init-init"><code><c- g>init</c-></code></a> = {});
  <a data-link-type="idl-name" href="#xrequirectlayer"><c- n>XREquirectLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createequirectlayer"><c- g>createEquirectLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrequirectlayerinit"><c- n>XREquirectLayerInit</c-></a> <a href="#dom-xrwebglbinding-createequirectlayer-init-init"><code><c- g>init</c-></code></a> = {});
  <a data-link-type="idl-name" href="#xrcubelayer"><c- n>XRCubeLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-createcubelayer"><c- g>createCubeLayer</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrcubelayerinit"><c- n>XRCubeLayerInit</c-></a> <a href="#dom-xrwebglbinding-createcubelayer-init-init"><code><c- g>init</c-></code></a> = {});

  <a data-link-type="idl-name" href="#xrwebglsubimage"><c- n>XRWebGLSubImage</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-getsubimage"><c- g>getSubImage</c-></a>(<a data-link-type="idl-name" href="#xrcompositionlayer"><c- n>XRCompositionLayer</c-></a> <a href="#dom-xrwebglbinding-getsubimage-layer-frame-eye-layer"><code><c- g>layer</c-></code></a>, <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrframe"><c- n>XRFrame</c-></a> <a href="#dom-xrwebglbinding-getsubimage-layer-frame-eye-frame"><code><c- g>frame</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xreye"><c- n>XREye</c-></a> <a href="#dom-xrwebglbinding-getsubimage-layer-frame-eye-eye"><code><c- g>eye</c-></code></a> = "none");
  <a data-link-type="idl-name" href="#xrwebglsubimage"><c- n>XRWebGLSubImage</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrwebglbinding-getviewsubimage"><c- g>getViewSubImage</c-></a>(<a data-link-type="idl-name" href="#xrprojectionlayer"><c- n>XRProjectionLayer</c-></a> <a href="#dom-xrwebglbinding-getviewsubimage-layer-view-layer"><code><c- g>layer</c-></code></a>, <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrview"><c- n>XRView</c-></a> <a href="#dom-xrwebglbinding-getviewsubimage-layer-view-view"><code><c- g>view</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-xrmedialayerinit"><code><c- g>XRMediaLayerInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrspace"><c- n>XRSpace</c-></a> <a class="idl-code" data-link-type="dict-member" data-type="XRSpace" href="#dom-xrmedialayerinit-space"><c- g>space</c-></a>;
  <a data-link-type="idl-name" href="#enumdef-xrlayerlayout"><c- n>XRLayerLayout</c-></a> <a class="idl-code" data-default="&quot;mono&quot;" data-link-type="dict-member" data-type="XRLayerLayout" href="#dom-xrmedialayerinit-layout"><c- g>layout</c-></a> = "mono";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-default="false" data-link-type="dict-member" data-type="boolean" href="#dom-xrmedialayerinit-invertstereo"><c- g>invertStereo</c-></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-xrmediaquadlayerinit"><code><c- g>XRMediaQuadLayerInit</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-xrmedialayerinit"><c- n>XRMediaLayerInit</c-></a> {
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a>? <a data-type="XRRigidTransform?" href="#dom-xrmediaquadlayerinit-transform"><code><c- g>transform</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a>? <a data-type="float?" href="#dom-xrmediaquadlayerinit-width"><code><c- g>width</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a>? <a data-type="float?" href="#dom-xrmediaquadlayerinit-height"><code><c- g>height</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-xrmediacylinderlayerinit"><code><c- g>XRMediaCylinderLayerInit</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-xrmedialayerinit"><c- n>XRMediaLayerInit</c-></a> {
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a>? <a data-type="XRRigidTransform?" href="#dom-xrmediacylinderlayerinit-transform"><code><c- g>transform</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="2.0" data-type="float" href="#dom-xrmediacylinderlayerinit-radius"><code><c- g>radius</c-></code></a> = 2.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="0.78539" data-type="float" href="#dom-xrmediacylinderlayerinit-centralangle"><code><c- g>centralAngle</c-></code></a> = 0.78539;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a>? <a data-type="float?" href="#dom-xrmediacylinderlayerinit-aspectratio"><code><c- g>aspectRatio</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-xrmediaequirectlayerinit"><code><c- g>XRMediaEquirectLayerInit</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-xrmedialayerinit"><c- n>XRMediaLayerInit</c-></a> {
  <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrrigidtransform"><c- n>XRRigidTransform</c-></a>? <a data-type="XRRigidTransform?" href="#dom-xrmediaequirectlayerinit-transform"><code><c- g>transform</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="0.0" data-type="float" href="#dom-xrmediaequirectlayerinit-radius"><code><c- g>radius</c-></code></a> = 0.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="6.28318" data-type="float" href="#dom-xrmediaequirectlayerinit-centralhorizontalangle"><code><c- g>centralHorizontalAngle</c-></code></a> = 6.28318;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="1.570795" data-type="float" href="#dom-xrmediaequirectlayerinit-upperverticalangle"><code><c- g>upperVerticalAngle</c-></code></a> = 1.570795;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="-1.570795" data-type="float" href="#dom-xrmediaequirectlayerinit-lowerverticalangle"><code><c- g>lowerVerticalAngle</c-></code></a> = -1.570795;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrmediabinding"><code><c- g>XRMediaBinding</c-></code></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-xrmediabinding-xrmediabinding"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrsession"><c- n>XRSession</c-></a> <a href="#dom-xrmediabinding-xrmediabinding-session-session"><code><c- g>session</c-></code></a>);

  <a data-link-type="idl-name" href="#xrquadlayer"><c- n>XRQuadLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrmediabinding-createquadlayer"><c- g>createQuadLayer</c-></a>(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement"><c- n>HTMLVideoElement</c-></a> <a href="#dom-xrmediabinding-createquadlayer-video-init-video"><code><c- g>video</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrmediaquadlayerinit"><c- n>XRMediaQuadLayerInit</c-></a> <a href="#dom-xrmediabinding-createquadlayer-video-init-init"><code><c- g>init</c-></code></a> = {});
  <a data-link-type="idl-name" href="#xrcylinderlayer"><c- n>XRCylinderLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrmediabinding-createcylinderlayer"><c- g>createCylinderLayer</c-></a>(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement"><c- n>HTMLVideoElement</c-></a> <a href="#dom-xrmediabinding-createcylinderlayer-video-init-video"><code><c- g>video</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrmediacylinderlayerinit"><c- n>XRMediaCylinderLayerInit</c-></a> <a href="#dom-xrmediabinding-createcylinderlayer-video-init-init"><code><c- g>init</c-></code></a> = {});
  <a data-link-type="idl-name" href="#xrequirectlayer"><c- n>XREquirectLayer</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrmediabinding-createequirectlayer"><c- g>createEquirectLayer</c-></a>(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement"><c- n>HTMLVideoElement</c-></a> <a href="#dom-xrmediabinding-createequirectlayer-video-init-video"><code><c- g>video</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-xrmediaequirectlayerinit"><c- n>XRMediaEquirectLayerInit</c-></a> <a href="#dom-xrmediabinding-createequirectlayer-video-init-init"><code><c- g>init</c-></code></a> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>interface</c-> <a href="#xrlayerevent"><code><c- g>XRLayerEvent</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event"><c- n>Event</c-></a> {
  <a href="#dom-xrlayerevent-xrlayerevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-xrlayerevent-xrlayerevent-type-eventinitdict-type"><code><c- g>type</c-></code></a>, <a data-link-type="idl-name" href="#dictdef-xrlayereventinit"><c- n>XRLayerEventInit</c-></a> <a href="#dom-xrlayerevent-xrlayerevent-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code></a>);
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrlayer"><c- n>XRLayer</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="XRLayer" href="#dom-xrlayerevent-layer"><c- g>layer</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-xrlayereventinit"><code><c- g>XRLayerEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><c- n>EventInit</c-></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrlayer"><c- n>XRLayer</c-></a> <a data-type="XRLayer" href="#dom-xrlayereventinit-layer"><code><c- g>layer</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://immersive-web.github.io/webxr/#xrrenderstate"><c- g>XRRenderState</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#xrlayer"><c- n>XRLayer</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FrozenArray<XRLayer>" href="#dom-xrrenderstate-layers"><c- g>layers</c-></a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> how to do hit testing? Should it be done by the UA? <a class="issue-return" href="#issue-f8fc5b4f" title="Jump to section">↵</a></div>
   <div class="issue"> this section needs clarification <a class="issue-return" href="#issue-9b6533f8" title="Jump to section">↵</a></div>
   <div class="issue"> this section needs clarification <a class="issue-return" href="#issue-9b6533f8①" title="Jump to section">↵</a></div>
   <div class="issue"> the init dictionaries shouldn’t be optional. This is bikeshed issue 1566. <a class="issue-return" href="#issue-2325a847" title="Jump to section">↵</a></div>
   <div class="issue"> special case UA behavior if the size causes the layout to change (ie if the requested width exceeds a limit with <code class="idl"><a data-link-type="idl" href="#dom-xrlayerlayout-stereo-left-right">"stereo-left-right"</a></code>) <a class="issue-return" href="#issue-c5f51eda" title="Jump to section">↵</a></div>
   <div class="issue"> the scaleFactor needs to be recalculated for the secondary views. <a class="issue-return" href="#issue-72d3b5f4" title="Jump to section">↵</a></div>
   <div class="issue"> Define how cubemap sizes are determined. <a class="issue-return" href="#issue-0072179b" title="Jump to section">↵</a></div>
   <div class="issue"> How should space be handled. Can you walk to the edge of a cubemap? <a class="issue-return" href="#issue-ec6c3781" title="Jump to section">↵</a></div>
   <div class="issue"> determine the initial state of <code class="idl"><a data-link-type="idl" href="#dom-xrcubelayer-orientation">orientation</a></code>. <a class="issue-return" href="#issue-61920327" title="Jump to section">↵</a></div>
   <div class="issue"> the init dictionaries shouldn’t be optional. This is bikeshed issue 1566. <a class="issue-return" href="#issue-2325a847①" title="Jump to section">↵</a></div>
   <div class="issue"> more clarification is needed on how the video is blitted to the layers. <a class="issue-return" href="#issue-fe682fc5" title="Jump to section">↵</a></div>
   <div class="issue"> add a better algorithm to describe the drawing. <a class="issue-return" href="#issue-da8fb26d" title="Jump to section">↵</a></div>
   <div class="issue"> define how the <code class="idl"><a data-link-type="idl" href="#xrequirectlayer">XREquirectLayer</a></code>’s parameters affect the video display. <a class="issue-return" href="#issue-2d8617d8" title="Jump to section">↵</a></div>
  </div>