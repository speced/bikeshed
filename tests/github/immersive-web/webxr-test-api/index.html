<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>WebXR Test API</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://immersive-web.github.io/webxr-test-api/" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
  <link href="favicon-96x96.png" rel="icon" sizes="96x96" type="image/png">
<style>
  .unstable::before {
    content: "This section is not stable";
    display: block;
    font-weight: bold;
    text-align: right;
    color: red;
  }
  .unstable {
    border: thin solid pink;
    border-radius: .5em;
    padding: .5em;
    margin: .5em calc(-0.5em - 1px);
    background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='290'><text transform='rotate(-45)' text-anchor='middle' font-family='sans-serif' font-weight='bold' font-size='70' y='210' opacity='.1'>Unstable</text></svg>");
    background-repeat: repeat;
    background-color: #FFF4F4;
  }
  .unstable h3:first-of-type {
    margin-top: 0.5rem;
  }

  .unstable.example:not(.no-marker)::before {
    content: "Example " counter(example) " (Unstable)";
    float: none;
  }

  .non-normative::before {
    content: "This section is non-normative.";
    font-style: italic;
  }
  .tg {
    border-collapse: collapse;
    border-spacing: 0;
  }
  .tg th {
    border-style: solid;
    border-width: 1px;
    background: #90b8de;
    color: #fff;
    font-family: sans-serif;
    font-weight: bold;
    border-color: grey;
  }
  .tg td {
    padding: 4px 5px;
    background-color: rgb(221, 238, 255);
    font-family: monospace;
    border-style: solid;
    border-width: 1px;
    border-color: grey;
    overflow: hidden;
    word-break: normal;
  }
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">WebXR Test API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://immersive-web.github.io/webxr-test-api/">https://immersive-web.github.io/webxr-test-api/</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="109489"><a class="p-name fn u-email email" href="mailto:manishearth@google.com">Manish Goregaokar</a> (<span class="p-org org">Google [Mozilla until 2020]</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="114716"><a class="p-name fn u-email email" href="mailto:alcooper@google.com">Alex Cooper</a> (<a class="p-org org" href="http://google.com/">Google</a>)
     </dl>
    </div>
   </details>
   <div data-fill-with="warning">
    <details class="annoying-warning" open>
     <summary>Testing-only API</summary>
     <p><b>The API represented in this document is for testing only and should not be exposed to users.</b></p>
    </details>
   </div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span><a class="self-link" href="#abstract"></a></h2>
   <p>The WebXR Test API module provides a mocking interface for <a href="https://github.com/web-platform-tests/">Web Platform Tests</a> to be able to test the <a href="https://www.w3.org/TR/webxr/">WebXR Device API</a>.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this
    technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical
    reports index</a> at http://www.w3.org/TR/.</em> </p>
   <p> This document was published by the <a href="https://www.w3.org/groups/wg/immersive-web">Immersive Web Working Group</a> as an Editors' Draft. This document is intended to become a W3C Recommendation.

    Feedback and comments on this specification are welcome. Please use <a href="https://github.com/immersive-web/webxr-test-api/issues">Github issues</a>.
    Discussions may also be found in the <a href="http://lists.w3.org/Archives/Public/public-immersive-web-wg/">public-immersive-web-wg@w3.org archives</a>. </p>
   <p> Publication as an Editors' Draft does not imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. This is a draft document and may
    be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite
    this document as other than work in progress. </p>
   <p> This document was produced by a group operating under the <a href="https://www.w3.org/policies/patent-policy/">W3C Patent Policy</a>.
    W3C maintains a <a href="https://www.w3.org/groups/wg/immersive-web/ipr" rel="disclosure">public list of any patent
    disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential
    Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section
    6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref heading settled" id="contents"><span class="content">Table of Contents</span></h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#conformance"><span class="secno">2</span> <span class="content">Conformance</span></a>
    <li>
     <a href="#simulated-devices"><span class="secno">3</span> <span class="content">Simulated devices</span></a>
     <ol class="toc">
      <li><a href="#simulated-devices-xr"><span class="secno">3.1</span> <span class="content">Simulated XR Device</span></a>
      <li><a href="#simulated-devices-input"><span class="secno">3.2</span> <span class="content">Simulated Input Device</span></a>
     </ol>
    <li>
     <a href="#initialization"><span class="secno">4</span> <span class="content">Initialization</span></a>
     <ol class="toc">
      <li><a href="#xr-test-attribute"><span class="secno">4.1</span> <span class="content">navigator.xr.test</span></a>
      <li><a href="#xrtest-interface"><span class="secno">4.2</span> <span class="content">XRTest</span></a>
      <li><a href="#fakexrdeviceinit-dict"><span class="secno">4.3</span> <span class="content">FakeXRDeviceInit</span></a>
      <li><a href="#fakexrrigidtransform-base-space"><span class="secno">4.4</span> <span class="content">FakeXRRigidTransformInit</span></a>
     </ol>
    <li>
     <a href="#mocking"><span class="secno">5</span> <span class="content">Mocking</span></a>
     <ol class="toc">
      <li><a href="#fakexrdevice-interface"><span class="secno">5.1</span> <span class="content">FakeXRDevice</span></a>
      <li><a href="#fakexrinputcontroller-init"><span class="secno">5.2</span> <span class="content">FakeXRInputController</span></a>
     </ol>
    <li><a href="#hit-test-extensions"><span class="secno">6</span> <span class="content">Hit test extensions</span></a>
    <li><a href="#dom-overlay-extensions"><span class="secno">7</span> <span class="content">DOM overlay extensions</span></a>
    <li><a href="#anchors-extensions"><span class="secno">8</span> <span class="content">Anchors extensions</span></a>
    <li><a href="#lighting-estimation-extensions"><span class="secno">9</span> <span class="content">Lighting estimation extensions</span></a>
    <li><a href="#depth-sensing-extensions"><span class="secno">10</span> <span class="content">Depth sensing extensions</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> </a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> </a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> </a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <section class="non-normative">
    <p>In order to allow <a href="https://web-platform-tests.org/">Web Platform Tests</a> for WebXR there are some basic functions which are common across all tests, such as adding a fake test device and specifying poses. Below is an API which attempts to capture the necessary functions, based off what was defined in the spec. Different browser vendors can implement this API in whatever way is most compatible with their browser. For example, some browsers may back the interface with a WebDriver API while others may use HTTP or IPC mechanisms to communicate with an out of process fake backend.</p>
    <p>These initialization object and control interfaces do not represent a complete set of WebXR functionality, and are expected to be expanded on as the WebXR spec grows.</p>
   </section>
   <h2 class="heading settled" data-level="2" id="conformance"><span class="secno">2. </span><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p>Interfaces and functionality exposed by this specification SHOULD NOT be exposed to typical browsing experiences, and instead SHOULD only be used when running <a href="https://web-platform-tests.org/">Web Platform Tests</a>.</p>
   <h2 class="heading settled" data-level="3" id="simulated-devices"><span class="secno">3. </span><span class="content">Simulated devices</span><a class="self-link" href="#simulated-devices"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="simulated-devices-xr"><span class="secno">3.1. </span><span class="content">Simulated XR Device</span><a class="self-link" href="#simulated-devices-xr"></a></h3>
    This API gives tests the ability to spin up a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="simulated-xr-device">simulated XR device</dfn> which is an <a data-link-type="dfn">XR device</a> which from the point of view of the WebXR API behaves like a normal <a data-link-type="dfn">XR device</a>. These <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device">simulated XR devices</a> can be controlled by the associated <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice">FakeXRDevice</a></code> object. 
   <p>Every <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device①">simulated XR device</a> may have an <dfn class="dfn-paneled" data-dfn-for="simulated XR device" data-dfn-type="dfn" data-noexport id="simulated-xr-device-native-bounds-geometry">native bounds geometry</dfn> which is an array of <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dompointreadonly" id="ref-for-dompointreadonly">DOMPointReadOnly</a></code>s, used to initialize the <a data-link-type="dfn">native bounds geometry</a> of any <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrboundedreferencespace" id="ref-for-xrboundedreferencespace">XRBoundedReferenceSpace</a></code>s created for the device. If <code>null</code>, the device is treated as if it is not currently tracking a bounded reference space.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device②">simulated XR device</a> may have a <dfn class="dfn-paneled" data-dfn-for="simulated XR device" data-dfn-type="dfn" data-noexport id="simulated-xr-device-floor-origin">floor origin</dfn> which is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform">XRRigidTransform</a></code> used to note the position of the physical floor. If <code>null</code>, the device is treated as if it is unable to identify the physical floor.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device③">simulated XR device</a> may have an <dfn class="dfn-paneled" data-dfn-for="simulated XR device" data-dfn-type="dfn" data-noexport id="simulated-xr-device-viewer-origin">viewer origin</dfn> which is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform①">XRRigidTransform</a></code> used to set the position and orientation of the <a data-link-type="dfn">viewer</a>. If <code>null</code>, the device is treated as if it has lost tracking.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device④">simulated XR device</a> has an <dfn class="dfn-paneled" data-dfn-for="simulated XR device" data-dfn-type="dfn" data-noexport id="simulated-xr-device-emulated-position-boolean">emulated position boolean</dfn> which is a boolean used to set the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrpose-emulatedposition" id="ref-for-dom-xrpose-emulatedposition">emulatedPosition</a></code> of any <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrpose" id="ref-for-xrpose">XRPose</a></code>s produced involving the <a data-link-type="dfn">viewer</a>. This is initially <code>false</code>.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device⑤">simulated XR device</a> has an <dfn class="dfn-paneled" data-dfn-for="simulated XR device" data-dfn-type="dfn" data-noexport id="simulated-xr-device-visibility-state">visibility state</dfn> which is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#enumdef-xrvisibilitystate" id="ref-for-enumdef-xrvisibilitystate">XRVisibilityState</a></code> used to set the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-visibilitystate" id="ref-for-dom-xrsession-visibilitystate">visibilityState</a></code> of any <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession">XRSession</a></code>s associated with the <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device⑥">simulated XR device</a> . This is initially <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrvisibilitystate-visible" id="ref-for-dom-xrvisibilitystate-visible">"visible"</a></code>. When it is changed, the associated changes must be reflected on the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession①">XRSession</a></code>, including triggering <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-onvisibilitychange" id="ref-for-dom-xrsession-onvisibilitychange">onvisibilitychange</a></code> events if necessary.</p>
   <p>Every <a data-link-type="dfn">view</a> for a <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device⑦">simulated XR device</a> has an associated <dfn class="dfn-paneled" data-dfn-for="view" data-dfn-type="dfn" data-noexport id="view-device-resolution">device resolution</dfn>, which is an instance of <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrdeviceresolution" id="ref-for-dictdef-fakexrdeviceresolution">FakeXRDeviceResolution</a></code>. This resolution must be used when constructing <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrviewport" id="ref-for-xrviewport">XRViewport</a></code> values for the <a data-link-type="dfn">view</a>, based on the canvas size.</p>
   <p>Every <a data-link-type="dfn">view</a> for a <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device⑧">simulated XR device</a> may have an associated <dfn class="dfn-paneled" data-dfn-for="view" data-dfn-type="dfn" data-noexport id="view-field-of-view">field of view</dfn>, which is an instance of <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrfieldofviewinit" id="ref-for-dictdef-fakexrfieldofviewinit">FakeXRFieldOfViewInit</a></code> used to calculate projection matrices using depth values. If the <a data-link-type="dfn" href="#view-field-of-view" id="ref-for-view-field-of-view">field of view</a> is set, projection matrix values are calculated using the <a data-link-type="dfn" href="#view-field-of-view" id="ref-for-view-field-of-view①">field of view</a> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstate-depthnear" id="ref-for-dom-xrrenderstate-depthnear">depthNear</a></code> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstate-depthfar" id="ref-for-dom-xrrenderstate-depthfar">depthFar</a></code> values.</p>
   <h3 class="heading settled" data-level="3.2" id="simulated-devices-input"><span class="secno">3.2. </span><span class="content">Simulated Input Device</span><a class="self-link" href="#simulated-devices-input"></a></h3>
   <p>This API gives tests the ability to spin up a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source">simulated XR input source</dfn> which is an <a data-link-type="dfn">XR input source</a> which from the point of view of the WebXR API behaves like a normal <a data-link-type="dfn">XR input source</a>. These <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source">simulated XR input sources</a> can be controlled by the associated <code class="idl"><a data-link-type="idl" href="#fakexrinputcontroller" id="ref-for-fakexrinputcontroller">FakeXRInputController</a></code> object.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source①">simulated XR input source</a> has a <dfn class="dfn-paneled" data-dfn-for="simulated XR input source" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source-handedness">handedness</dfn> which is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#enumdef-xrhandedness" id="ref-for-enumdef-xrhandedness">XRHandedness</a></code> value that MUST be returned for the corresponding <a data-link-type="dfn">XR input source’s</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrinputsource-handedness" id="ref-for-dom-xrinputsource-handedness">handedness</a></code> attribute.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source②">simulated XR input source</a> has a <dfn class="dfn-paneled" data-dfn-for="simulated XR input source" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source-targetraymode">targetRayMode</dfn> which is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#enumdef-xrtargetraymode" id="ref-for-enumdef-xrtargetraymode">XRTargetRayMode</a></code> value that MUST be returned for the corresponding <a data-link-type="dfn">XR input source’s</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrinputsource-targetraymode" id="ref-for-dom-xrinputsource-targetraymode">targetRayMode</a></code> attribute.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source③">simulated XR input source</a> has a <dfn class="dfn-paneled" data-dfn-for="simulated XR input source" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source-pointerorigin">pointerOrigin</dfn> which is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform②">XRRigidTransform</a></code> used to note the origin of the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrinputsource-targetrayspace" id="ref-for-dom-xrinputsource-targetrayspace">targetRaySpace</a></code>.</p>
   <p>A <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source④">simulated XR input source</a> may have a <dfn class="dfn-paneled" data-dfn-for="simulated XR input source" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source-griporigin">gripOrigin</dfn> which is an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrrigidtransform" id="ref-for-xrrigidtransform③">XRRigidTransform</a></code> used to note the origin of the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrinputsource-gripspace" id="ref-for-dom-xrinputsource-gripspace">gripSpace</a></code>. If this is <code>null</code> the <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source⑤">simulated XR input source</a> is not tracked.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source⑥">simulated XR input source</a> has a <dfn class="dfn-paneled" data-dfn-for="simulated XR input source" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source-profiles">profiles</dfn> array which is an array of <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString">DOMString</a></code>s which MUST be returned for the corresponding <a data-link-type="dfn">XR input source’s</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrinputsource-profiles" id="ref-for-dom-xrinputsource-profiles">profiles</a></code> attribute.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source⑦">simulated XR input source</a> has a <dfn class="dfn-paneled" data-dfn-for="simulated XR input source" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source-buttonstate">buttonState</dfn> array which is an array of <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrbuttonstateinit" id="ref-for-dictdef-fakexrbuttonstateinit">FakeXRButtonStateInit</a></code>s. If a <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttontype-grip" id="ref-for-dom-fakexrbuttontype-grip">"grip"</a></code> button is specified, it SHOULD drive the <a data-link-type="dfn">primary squeeze action</a>. If a UA implements the <a href="https://immersive-web.github.io/webxr-gamepads-module/">WebXR Gamepads Module</a> <a data-link-type="dfn" href="#simulated-xr-input-source-buttonstate" id="ref-for-simulated-xr-input-source-buttonstate">buttonState</a> SHOULD be used to set the state for the corresponding <a data-link-type="dfn">XR input source’s</a> <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr-gamepads-module/#dom-xrinputsource-gamepad" id="ref-for-dom-xrinputsource-gamepad">gamepad</a></code> object, which SHOULD be of type <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dom-gamepadmappingtype-xr-standard" id="ref-for-dom-gamepadmappingtype-xr-standard">"xr-standard"</a></code> if enough buttons are specified to support it.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source⑧">simulated XR input source</a> has a <dfn class="dfn-paneled" data-dfn-for="simulated XR input source" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source-connectionstate">connectionState</dfn> which is a boolean that is initially <code>true</code> and indicates whether the associated <a data-link-type="dfn">XR input source</a> should appear in <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-inputsources" id="ref-for-dom-xrsession-inputsources">inputSources</a></code>. When it is changed the associated changes must be reflected on the XRSession, including triggering the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#eventdef-xrsession-inputsourceschange" id="ref-for-eventdef-xrsession-inputsourceschange">inputsourceschange</a></code> event if necessary by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame">next animation frame</a>.</p>
   <p>Every <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source⑨">simulated XR input source</a> has a <dfn class="dfn-paneled" data-dfn-for="simulated XR input source" data-dfn-type="dfn" data-noexport id="simulated-xr-input-source-primaryactionstarted">primaryActionStarted</dfn> which is a boolean, initially set to <code>false</code>, that indicates whether or not the primary action of the XR input source has been started.</p>
   <h2 class="heading settled" data-level="4" id="initialization"><span class="secno">4. </span><span class="content">Initialization</span><a class="self-link" href="#initialization"></a></h2>
   <h3 class="heading settled" data-level="4.1" id="xr-test-attribute"><span class="secno">4.1. </span><span class="content">navigator.xr.test</span><a class="self-link" href="#xr-test-attribute"></a></h3>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://immersive-web.github.io/webxr/#xrsystem" id="ref-for-xrsystem"><c- g>XRSystem</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#xrtest" id="ref-for-xrtest"><c- n>XRTest</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="XRTest" href="#dom-xrsystem-test" id="ref-for-dom-xrsystem-test"><c- g>test</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="XRSystem" data-dfn-type="attribute" data-export id="dom-xrsystem-test"><code>test</code></dfn> attribute’s getter MUST return the <code class="idl"><a data-link-type="idl" href="#xrtest" id="ref-for-xrtest①">XRTest</a></code> object that is associated with it. This object MAY be lazily created.</p>
   <h3 class="heading settled" data-level="4.2" id="xrtest-interface"><span class="secno">4.2. </span><span class="content">XRTest</span><a class="self-link" href="#xrtest-interface"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#xrtest" id="ref-for-xrtest②">XRTest</a></code> object is the entry point for all testing.</p>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="xrtest"><code><c- g>XRTest</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#fakexrdevice" id="ref-for-fakexrdevice①"><c- n>FakeXRDevice</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-xrtest-simulatedeviceconnection" id="ref-for-dom-xrtest-simulatedeviceconnection"><c- g>simulateDeviceConnection</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrdeviceinit" id="ref-for-dictdef-fakexrdeviceinit"><c- n>FakeXRDeviceInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRTest/simulateDeviceConnection(init)" data-dfn-type="argument" data-export id="dom-xrtest-simulatedeviceconnection-init-init"><code><c- g>init</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrtest-simulateuseractivation" id="ref-for-dom-xrtest-simulateuseractivation"><c- g>simulateUserActivation</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#Function" id="ref-for-Function"><c- n>Function</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="XRTest/simulateUserActivation(f)" data-dfn-type="argument" data-export id="dom-xrtest-simulateuseractivation-f-f"><code><c- g>f</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name"><c- n>void</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-xrtest-disconnectalldevices" id="ref-for-dom-xrtest-disconnectalldevices"><c- g>disconnectAllDevices</c-></a>();
};
</pre>
   <div class="algorithm" data-algorithm="simulate-device-connection">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="XRTest" data-dfn-type="method" data-export id="dom-xrtest-simulatedeviceconnection"><code>simulateDeviceConnection(<var>init</var>)</code></dfn> method creates a new <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device⑨">simulated XR device</a>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new Promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>device</var> be a new <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device①⓪">simulated XR device</a>.</p>
       <li data-md>
        <p>For each <var>view</var> in <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-views" id="ref-for-dom-fakexrdeviceinit-views">views</a></code>:</p>
        <ol>
         <li data-md>
          <p>Let <var>v</var> be the result of running <a data-link-type="dfn" href="#parse-a-view" id="ref-for-parse-a-view">parse a view</a> on <var>view</var>.</p>
         <li data-md>
          <p>If running <a data-link-type="dfn" href="#parse-a-view" id="ref-for-parse-a-view①">parse a view</a> threw an error, reject <var>promise</var> with this error and abort these steps.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>v</var> to <var>device</var>’s list of views.</p>
        </ol>
       <li data-md>
        <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-boundscoordinates" id="ref-for-dom-fakexrdeviceinit-boundscoordinates">boundsCoordinates</a></code> is set, perform the following steps:</p>
        <ol>
         <li data-md>
          <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-boundscoordinates" id="ref-for-dom-fakexrdeviceinit-boundscoordinates①">boundsCoordinates</a></code> has less than 3 elements, reject <var>promise</var> with <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code> and abort these steps.</p>
         <li data-md>
          <p>Set <var>device</var>’s <a data-link-type="dfn" href="#simulated-xr-device-native-bounds-geometry" id="ref-for-simulated-xr-device-native-bounds-geometry">native bounds geometry</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-boundscoordinates" id="ref-for-dom-fakexrdeviceinit-boundscoordinates②">boundsCoordinates</a></code>.</p>
        </ol>
       <li data-md>
        <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-floororigin" id="ref-for-dom-fakexrdeviceinit-floororigin">floorOrigin</a></code> is set, set <var>device</var>’s <a data-link-type="dfn" href="#simulated-xr-device-floor-origin" id="ref-for-simulated-xr-device-floor-origin">floor origin</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-floororigin" id="ref-for-dom-fakexrdeviceinit-floororigin①">floorOrigin</a></code>.</p>
       <li data-md>
        <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-viewerorigin" id="ref-for-dom-fakexrdeviceinit-viewerorigin">viewerOrigin</a></code> is set, set <var>device</var>’s <a data-link-type="dfn" href="#simulated-xr-device-viewer-origin" id="ref-for-simulated-xr-device-viewer-origin">viewer origin</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-viewerorigin" id="ref-for-dom-fakexrdeviceinit-viewerorigin①">viewerOrigin</a></code>.</p>
       <li data-md>
        <p>Let <var>supportedModes</var> be an empty list of <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#enumdef-xrsessionmode" id="ref-for-enumdef-xrsessionmode">XRSessionMode</a></code>s.</p>
       <li data-md>
        <p>Modify <var>supportedModes</var> as follows:</p>
        <dl class="switch">
         <dt>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-supportedmodes" id="ref-for-dom-fakexrdeviceinit-supportedmodes">supportedModes</a></code> is present:
         <dd>
          <ol>
           <li data-md>
            <p>Append the contents of <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-supportedmodes" id="ref-for-dom-fakexrdeviceinit-supportedmodes①">supportedModes</a></code> to <var>supportedModes</var>.</p>
           <li data-md>
            <p>If <var>supportedModes</var> is empty, append <code>"inline"</code> to it.</p>
          </ol>
         <dt>Else
         <dd>
          <ol>
           <li data-md>
            <p>Append <code>"inline"</code> to <var>supportedModes</var>.</p>
           <li data-md>
            <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-supportsimmersive" id="ref-for-dom-fakexrdeviceinit-supportsimmersive">supportsImmersive</a></code> is <code>true</code>, append <code>"immersive-vr"</code> to <var>supportedModes</var>.</p>
          </ol>
        </dl>
       <li data-md>
        <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-supportedfeatures" id="ref-for-dom-fakexrdeviceinit-supportedfeatures">supportedFeatures</a></code> is set, for each <var>mode</var> in <var>supportedModes</var>:</p>
       <li data-md>
        <p>Associate <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-supportedfeatures" id="ref-for-dom-fakexrdeviceinit-supportedfeatures①">supportedFeatures</a></code> to <var>mode</var></p>
      </ol>
    </ol>
    <p class="note" role="note"><span class="marker">NOTE:</span> each <var>device</var> stores a <a data-link-type="dfn">list of features it is capable of supporting</a> per <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#enumdef-xrsessionmode" id="ref-for-enumdef-xrsessionmode①">XRSessionMode</a></code>. Most tests only test one mode anyway so there isn’t much to be gained by splitting features per mode in <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrdeviceinit" id="ref-for-dictdef-fakexrdeviceinit①">FakeXRDeviceInit</a></code>. Users wishing different modes supporting different features should create multiple devices instead.</p>
    <ol>
     <li data-md>
      <p>Set <var>device</var>’s <a data-link-type="dfn">list of supported modes</a> to <var>supportedModes</var>.</p>
     <li data-md>
      <p>Register <var>device</var> based on the following:</p>
      <ol>
       <li data-md>
        <p>If <var>supportedModes</var> contains <code>"immersive-vr"</code> or <code>"immersive-ar"</code>, append <var>device</var> to the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-navigator-xr" id="ref-for-dom-navigator-xr">xr</a></code>’s <a data-link-type="dfn">list of immersive XR devices</a>.</p>
       <li data-md>
        <p>If <var>supportedModes</var> contains <code>"inline"</code>, set the <a data-link-type="dfn">inline XR device</a> to <var>device</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>d</var> be a new <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice②">FakeXRDevice</a></code> object with <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device">device</a> as <var>device</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">Resolve</a> <var>promise</var> with <var>d</var>.</p>
    </ol>
    <ol>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <p>When <dfn class="dfn-paneled idl-code" data-dfn-for="XRTest" data-dfn-type="method" data-export id="dom-xrtest-simulateuseractivation"><code>simulateUserActivation(f)</code></dfn> is called, invoke <code>f</code> as if it had <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation">transient activation</a>.</p>
   <p>When <dfn class="dfn-paneled idl-code" data-dfn-for="XRTest" data-dfn-type="method" data-export id="dom-xrtest-disconnectalldevices"><code>disconnectAllDevices()</code></dfn> is called, remove all <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device①①">simulated XR devices</a> from the <a data-link-type="dfn">context object</a>’s <code class="idl"><a data-link-type="idl">XR</a></code> object’s <a data-link-type="dfn">list of immersive XR devices</a> as if they were disconnected. If the <a data-link-type="dfn">inline XR device</a> is a <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device①②">simulated XR device</a>, reset it to the default <a data-link-type="dfn">inline XR device</a>.</p>
   <h3 class="heading settled" data-level="4.3" id="fakexrdeviceinit-dict"><span class="secno">4.3. </span><span class="content">FakeXRDeviceInit</span><a class="self-link" href="#fakexrdeviceinit-dict"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrdeviceinit"><code><c- g>FakeXRDeviceInit</c-></code></dfn> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-fakexrdeviceinit-supportsimmersive"><code><c- g>supportsImmersive</c-></code></dfn>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrsessionmode" id="ref-for-enumdef-xrsessionmode②"><c- n>XRSessionMode</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="sequence<XRSessionMode>" id="dom-fakexrdeviceinit-supportedmodes"><code><c- g>supportedModes</c-></code></dfn>;
    <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrviewinit" id="ref-for-dictdef-fakexrviewinit"><c- n>FakeXRViewInit</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="sequence<FakeXRViewInit>" id="dom-fakexrdeviceinit-views"><code><c- g>views</c-></code></dfn>;

    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="sequence<any>" id="dom-fakexrdeviceinit-supportedfeatures"><code><c- g>supportedFeatures</c-></code></dfn>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrboundspoint" id="ref-for-dictdef-fakexrboundspoint"><c- n>FakeXRBoundsPoint</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="sequence<FakeXRBoundsPoint>" id="dom-fakexrdeviceinit-boundscoordinates"><code><c- g>boundsCoordinates</c-></code></dfn>;
    <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="FakeXRRigidTransformInit" id="dom-fakexrdeviceinit-floororigin"><code><c- g>floorOrigin</c-></code></dfn>;
    <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit①"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="FakeXRRigidTransformInit" id="dom-fakexrdeviceinit-viewerorigin"><code><c- g>viewerOrigin</c-></code></dfn>;

    // Hit test extensions:
    <a data-link-type="idl-name" href="#dictdef-fakexrworldinit" id="ref-for-dictdef-fakexrworldinit"><c- n>FakeXRWorldInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="FakeXRWorldInit" id="dom-fakexrdeviceinit-world"><code><c- g>world</c-></code></dfn>;

    // Depth sensing extensions:
    <a data-link-type="idl-name" href="#dictdef-fakexrdepthsensingdatainit" id="ref-for-dictdef-fakexrdepthsensingdatainit"><c- n>FakeXRDepthSensingDataInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceInit" data-dfn-type="dict-member" data-export data-type="FakeXRDepthSensingDataInit" id="dom-fakexrdeviceinit-depthsensingdata"><code><c- g>depthSensingData</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrviewinit"><code><c- g>FakeXRViewInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xreye" id="ref-for-enumdef-xreye"><c- n>XREye</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRViewInit" data-dfn-type="dict-member" data-export data-type="XREye" id="dom-fakexrviewinit-eye"><code><c- g>eye</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence④"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float"><c- b>float</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRViewInit" data-dfn-type="dict-member" data-export data-type="sequence<float>" id="dom-fakexrviewinit-projectionmatrix"><code><c- g>projectionMatrix</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-fakexrdeviceresolution" id="ref-for-dictdef-fakexrdeviceresolution①"><c- n>FakeXRDeviceResolution</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRViewInit" data-dfn-type="dict-member" data-export data-type="FakeXRDeviceResolution" id="dom-fakexrviewinit-resolution"><code><c- g>resolution</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit②"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRViewInit" data-dfn-type="dict-member" data-export data-type="FakeXRRigidTransformInit" id="dom-fakexrviewinit-viewoffset"><code><c- g>viewOffset</c-></code></dfn>;
  <a data-link-type="idl-name" href="#dictdef-fakexrfieldofviewinit" id="ref-for-dictdef-fakexrfieldofviewinit①"><c- n>FakeXRFieldOfViewInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRViewInit" data-dfn-type="dict-member" data-export data-type="FakeXRFieldOfViewInit" id="dom-fakexrviewinit-fieldofview"><code><c- g>fieldOfView</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrfieldofviewinit"><code><c- g>FakeXRFieldOfViewInit</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRFieldOfViewInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-fakexrfieldofviewinit-updegrees"><code><c- g>upDegrees</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float②"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRFieldOfViewInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-fakexrfieldofviewinit-downdegrees"><code><c- g>downDegrees</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float③"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRFieldOfViewInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-fakexrfieldofviewinit-leftdegrees"><code><c- g>leftDegrees</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float④"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRFieldOfViewInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-fakexrfieldofviewinit-rightdegrees"><code><c- g>rightDegrees</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrdeviceresolution"><code><c- g>FakeXRDeviceResolution</c-></code></dfn> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long"><c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceResolution" data-dfn-type="dict-member" data-export data-type="long" id="dom-fakexrdeviceresolution-width"><code><c- g>width</c-></code></dfn>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long①"><c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDeviceResolution" data-dfn-type="dict-member" data-export data-type="long" id="dom-fakexrdeviceresolution-height"><code><c- g>height</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrboundspoint"><code><c- g>FakeXRBoundsPoint</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRBoundsPoint" data-dfn-type="dict-member" data-export data-type="double" id="dom-fakexrboundspoint-x"><code><c- g>x</c-></code></dfn>; <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRBoundsPoint" data-dfn-type="dict-member" data-export data-type="double" id="dom-fakexrboundspoint-z"><code><c- g>z</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrrigidtransforminit"><code><c- g>FakeXRRigidTransformInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑤"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑤"><c- b>float</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRRigidTransformInit" data-dfn-type="dict-member" data-export data-type="sequence<float>" id="dom-fakexrrigidtransforminit-position"><code><c- g>position</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑥"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑥"><c- b>float</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRRigidTransformInit" data-dfn-type="dict-member" data-export data-type="sequence<float>" id="dom-fakexrrigidtransforminit-orientation"><code><c- g>orientation</c-></code></dfn>;
};

</pre>
   <p class="advisement"> The <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-supportsimmersive" id="ref-for-dom-fakexrdeviceinit-supportsimmersive①">supportsImmersive</a></code> is deprecated in favor of <code class="idl"><a data-link-type="idl" href="#dom-fakexrdeviceinit-supportedmodes" id="ref-for-dom-fakexrdeviceinit-supportedmodes②">supportedModes</a></code> and will be removed in future revisions of the specification. </p>
   <div class="algorithm" data-algorithm="parse-rigid-transform">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-a-rigid-transform">parse a rigid transform</dfn> given a <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit③">FakeXRRigidTransformInit</a></code> <var>init</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> be <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrrigidtransforminit-position" id="ref-for-dom-fakexrrigidtransforminit-position">position</a></code>.</p>
     <li data-md>
      <p>If <var>p</var> does not have three elements, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>o</var> be <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrrigidtransforminit-orientation" id="ref-for-dom-fakexrrigidtransforminit-orientation">orientation</a></code>.</p>
     <li data-md>
      <p>If <var>o</var> does not have four elements, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>position</var> be a <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit" id="ref-for-dictdef-dompointinit">DOMPointInit</a></code> with <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-x" id="ref-for-dom-dompointinit-x">x</a></code>, <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-y" id="ref-for-dom-dompointinit-y">y</a></code> and <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-z" id="ref-for-dom-dompointinit-z">z</a></code> equal to the three elements of <var>p</var> in order, and <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-w" id="ref-for-dom-dompointinit-w">w</a></code> equal to <code>1</code>.</p>
     <li data-md>
      <p>Let <var>orientation</var> be a <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit" id="ref-for-dictdef-dompointinit①">DOMPointInit</a></code> with <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-x" id="ref-for-dom-dompointinit-x①">x</a></code>, <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-y" id="ref-for-dom-dompointinit-y①">y</a></code>, <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-z" id="ref-for-dom-dompointinit-z①">z</a></code>, and <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-w" id="ref-for-dom-dompointinit-w①">w</a></code> equal to the four elements of <var>o</var> in order.</p>
     <li data-md>
      <p><code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-xrrigidtransform" id="ref-for-dom-xrrigidtransform-xrrigidtransform">Construct an XRRigidTransform</a></code> <var>transform</var> with <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-position" id="ref-for-dom-xrrigidtransform-position">position</a></code> <var>position</var> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrigidtransform-orientation" id="ref-for-dom-xrrigidtransform-orientation">orientation</a></code> <var>orientation</var>.</p>
     <li data-md>
      <p>Return <var>transform</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="parse-view">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-a-view">parse a view</dfn> given a <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrviewinit" id="ref-for-dictdef-fakexrviewinit①">FakeXRViewInit</a></code> <var>init</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>view</var> be a new <a data-link-type="dfn">view</a>.</p>
     <li data-md>
      <p>Set <var>view</var>’s <a data-link-type="dfn">eye</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrviewinit-eye" id="ref-for-dom-fakexrviewinit-eye">eye</a></code>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrviewinit-projectionmatrix" id="ref-for-dom-fakexrviewinit-projectionmatrix">projectionMatrix</a></code> does not have 16 elements, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code>.</p>
     <li data-md>
      <p>Set <var>view</var>’s <a data-link-type="dfn">projection matrix</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrviewinit-projectionmatrix" id="ref-for-dom-fakexrviewinit-projectionmatrix①">projectionMatrix</a></code>.</p>
     <li data-md>
      <p>Set <var>view</var>’s <a data-link-type="dfn">view offset</a> to the result of running <a data-link-type="dfn" href="#parse-a-rigid-transform" id="ref-for-parse-a-rigid-transform">parse a rigid transform</a> <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrviewinit-viewoffset" id="ref-for-dom-fakexrviewinit-viewoffset">viewOffset</a></code>.</p>
     <li data-md>
      <p>Set <var>view</var>’s <a data-link-type="dfn" href="#view-device-resolution" id="ref-for-view-device-resolution">device resolution</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrviewinit-resolution" id="ref-for-dom-fakexrviewinit-resolution">resolution</a></code>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrviewinit-fieldofview" id="ref-for-dom-fakexrviewinit-fieldofview">fieldOfView</a></code> is set, perform the following steps:</p>
      <ol>
       <li data-md>
        <p>Set <var>view</var>’s <a data-link-type="dfn" href="#view-field-of-view" id="ref-for-view-field-of-view②">field of view</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrviewinit-fieldofview" id="ref-for-dom-fakexrviewinit-fieldofview①">fieldOfView</a></code>.</p>
       <li data-md>
        <p>Set <var>view</var>’s <a data-link-type="dfn">projection matrix</a> to the projection matrix corresponding to this field of view, and depth values equal to <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstate-depthnear" id="ref-for-dom-xrrenderstate-depthnear①">depthNear</a></code> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrrenderstate-depthfar" id="ref-for-dom-xrrenderstate-depthfar①">depthFar</a></code> of any <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession②">XRSession</a></code> associated with the device. If there currently is none, use the default values of <code>near=0.1, far=1000.0</code>.</p>
      </ol>
     <li data-md>
      <p>Return <var>view</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="4.4" id="fakexrrigidtransform-base-space"><span class="secno">4.4. </span><span class="content">FakeXRRigidTransformInit</span><a class="self-link" href="#fakexrrigidtransform-base-space"></a></h3>
    The WebXR API never exposes native origins directly, instead exposing transforms between them, so we need to specify a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="base-reference-space">base reference space</dfn> for <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit④">FakeXRRigidTransformInit</a></code>s so that we can have consistent numerical values across implementations. When used as an origin, <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit⑤">FakeXRRigidTransformInit</a></code>s are in the <a data-link-type="dfn" href="#base-reference-space" id="ref-for-base-reference-space">base reference space</a> where the <a data-link-type="dfn">viewer</a>’s <a data-link-type="dfn">native origin</a> is identity at initialization, unless otherwise specified. In this space, the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrreferencespacetype-local" id="ref-for-dom-xrreferencespacetype-local">"local"</a></code> reference space has a <a data-link-type="dfn">native origin</a> of identity. This is an arbitrary choice: changing this reference space doesn’t affect the data returned by the WebXR API, but we must make such a choice so that the tests produce the same results across different UAs. When used as an origin it is logically a transform <i>from</i> the origin’s space <i>to</i> the underlying <a data-link-type="dfn" href="#base-reference-space" id="ref-for-base-reference-space①">base reference space</a> described above. 
   <h2 class="heading settled" data-level="5" id="mocking"><span class="secno">5. </span><span class="content">Mocking</span><a class="self-link" href="#mocking"></a></h2>
   <h3 class="heading settled" data-level="5.1" id="fakexrdevice-interface"><span class="secno">5.1. </span><span class="content">FakeXRDevice</span><a class="self-link" href="#fakexrdevice-interface"></a></h3>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="fakexrdevice"><code><c- g>FakeXRDevice</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setviews" id="ref-for-dom-fakexrdevice-setviews"><c- g>setViews</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑦"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrviewinit" id="ref-for-dictdef-fakexrviewinit②"><c- n>FakeXRViewInit</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setViews(views)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setviews-views-views"><code><c- g>views</c-></code></dfn>);

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name"><c- n>void</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-disconnect" id="ref-for-dom-fakexrdevice-disconnect"><c- g>disconnect</c-></a>();

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setviewerorigin" id="ref-for-dom-fakexrdevice-setviewerorigin"><c- g>setViewerOrigin</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit⑥"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setViewerOrigin(origin, emulatedPosition), FakeXRDevice/setViewerOrigin(origin)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setviewerorigin-origin-emulatedposition-origin"><code><c- g>origin</c-></code></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setViewerOrigin(origin, emulatedPosition), FakeXRDevice/setViewerOrigin(origin)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setviewerorigin-origin-emulatedposition-emulatedposition"><code><c- g>emulatedPosition</c-></code></dfn> = <c- b>false</c->);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-clearviewerorigin" id="ref-for-dom-fakexrdevice-clearviewerorigin"><c- g>clearViewerOrigin</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setfloororigin" id="ref-for-dom-fakexrdevice-setfloororigin"><c- g>setFloorOrigin</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit⑦"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setFloorOrigin(origin)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setfloororigin-origin-origin"><code><c- g>origin</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-clearfloororigin" id="ref-for-dom-fakexrdevice-clearfloororigin"><c- g>clearFloorOrigin</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setboundsgeometry" id="ref-for-dom-fakexrdevice-setboundsgeometry"><c- g>setBoundsGeometry</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑧"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrboundspoint" id="ref-for-dictdef-fakexrboundspoint①"><c- n>FakeXRBoundsPoint</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setBoundsGeometry(boundsCoordinates)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setboundsgeometry-boundscoordinates-boundscoordinates"><code><c- g>boundsCoordinates</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-simulateresetpose" id="ref-for-dom-fakexrdevice-simulateresetpose"><c- g>simulateResetPose</c-></a>();

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-simulatevisibilitychange" id="ref-for-dom-fakexrdevice-simulatevisibilitychange"><c- g>simulateVisibilityChange</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrvisibilitystate" id="ref-for-enumdef-xrvisibilitystate①"><c- n>XRVisibilityState</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/simulateVisibilityChange(state)" data-dfn-type="argument" data-export id="dom-fakexrdevice-simulatevisibilitychange-state-state"><code><c- g>state</c-></code></dfn>);

  <a data-link-type="idl-name" href="#fakexrinputcontroller" id="ref-for-fakexrinputcontroller①"><c- n>FakeXRInputController</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-simulateinputsourceconnection" id="ref-for-dom-fakexrdevice-simulateinputsourceconnection"><c- g>simulateInputSourceConnection</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrinputsourceinit" id="ref-for-dictdef-fakexrinputsourceinit"><c- n>FakeXRInputSourceInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/simulateInputSourceConnection(init)" data-dfn-type="argument" data-export id="dom-fakexrdevice-simulateinputsourceconnection-init-init"><code><c- g>init</c-></code></dfn>);

  // Hit test extensions:
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export data-lt="setWorld(world)" id="dom-fakexrdevice-setworld"><code><c- g>setWorld</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-fakexrworldinit" id="ref-for-dictdef-fakexrworldinit①"><c- n>FakeXRWorldInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setWorld(world)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setworld-world-world"><code><c- g>world</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export data-lt="clearWorld()" id="dom-fakexrdevice-clearworld"><code><c- g>clearWorld</c-></code></dfn>();

  // Depth sensing extensions:
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export data-lt="setDepthSensingData(depthSensingData)" id="dom-fakexrdevice-setdepthsensingdata"><code><c- g>setDepthSensingData</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-fakexrdepthsensingdatainit" id="ref-for-dictdef-fakexrdepthsensingdatainit①"><c- n>FakeXRDepthSensingDataInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setDepthSensingData(depthSensingData)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setdepthsensingdata-depthsensingdata-depthsensingdata"><code><c- g>depthSensingData</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export data-lt="clearDepthSensingData()" id="dom-fakexrdevice-cleardepthsensingdata"><code><c- g>clearDepthSensingData</c-></code></dfn>();
};

</pre>
   <p>Each <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice③">FakeXRDevice</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="FakeXRDevice" data-dfn-type="dfn" data-noexport id="fakexrdevice-device">device</dfn>, which is a <a data-link-type="dfn" href="#simulated-xr-device" id="ref-for-simulated-xr-device①③">simulated XR device</a> that it is able to control.</p>
   <div class="algorithm" data-algorithm="next-animation-frame">
    <p>Operations on the <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice④">FakeXRDevice</a></code>’s <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device①">device</a> typically take place on the <dfn class="dfn-paneled" data-dfn-for="XRSession" data-dfn-type="dfn" data-noexport id="xrsession-next-animation-frame">next animation frame</dfn>, i.e. they are not immediately observable until a future <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-requestanimationframe" id="ref-for-dom-xrsession-requestanimationframe">requestAnimationFrame()</a></code> callback.</p>
    <p>To determine when this frame is, for a given operation, choose a frame based on the following:</p>
    <dl class="switch">
     <dt>If such an operation is triggered within an <a data-link-type="dfn">XR animation frame</a>:
     <dd>Choose the next <a data-link-type="dfn">XR animation frame</a>, whenever it may occur
     <dt>If such an operation is triggered outside of an <a data-link-type="dfn">XR animation frame</a>:
     <dd>Choose either the next or next-to-next <a data-link-type="dfn">XR animation frame</a>. The precise choice is up to the user agent and may be dependent on the exact timing of these events. 
    </dl>
    <p class="note" role="note"><span class="marker">NOTE:</span> The reason we defer an extra frame when there are pending animation frame callbacks is to avoid having to deal with potential race conditions when the device is ready to trigger an animation frame callback, but has not yet. In practice, this means that tests should be written so that they wait until they have performed all such operations <i>before</i> calling the next <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-requestanimationframe" id="ref-for-dom-xrsession-requestanimationframe①">requestAnimationFrame()</a></code>, and in case they are running outside of an <a data-link-type="dfn">XR animation frame</a>, should always wait two frames before expecting any updates to take effect.</p>
   </div>
   <div class="algorithm" data-algorithm="set-views">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-setviews"><code>setViews(<var>views</var>)</code></dfn> method performs the following steps: 
    <ol>
     <li data-md>
      <p>On the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①">next animation frame</a>, run the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>l</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a>.</p>
       <li data-md>
        <p>For each <var>view</var> in <var>views</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>v</var> be the result of running <a data-link-type="dfn" href="#parse-a-view" id="ref-for-parse-a-view②">parse a view</a> on <var>view</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> <var>v</var> to <var>l</var>.</p>
        </ol>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device②">device</a>’s list of views to <var>l</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="disconnect">
    <p>When <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-disconnect"><code>disconnect()</code></dfn> method is called, perform the following steps:</p>
    <ol>
     <li data-md>
      <p>Remove <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device③">device</a> from the <a data-link-type="dfn">context object</a>’s <code class="idl"><a data-link-type="idl">XR</a></code> object’s <a data-link-type="dfn">list of immersive XR devices</a> as if it were disconnected.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn">inline XR device</a> is equal to the <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice⑤">FakeXRDevice</a></code>, reset it to the default <a data-link-type="dfn">inline XR device</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="set-viewer-origin">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export data-lt="setViewerOrigin(origin, emulatedPosition)|setViewerOrigin(origin)" id="dom-fakexrdevice-setviewerorigin"><code>setViewerOrigin(<var>origin</var>, <var>emulatedPosition</var>)</code></dfn> performs the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>o</var> be the result of running <a data-link-type="dfn" href="#parse-a-rigid-transform" id="ref-for-parse-a-rigid-transform①">parse a rigid transform</a> on <var>origin</var>.</p>
     <li data-md>
      <p>On the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame②">next animation frame</a>, perform the following steps:</p>
      <ol>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device④">device</a>’s <a data-link-type="dfn" href="#simulated-xr-device-viewer-origin" id="ref-for-simulated-xr-device-viewer-origin①">viewer origin</a> to <var>o</var>.</p>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device⑤">device</a>’s <a data-link-type="dfn" href="#simulated-xr-device-emulated-position-boolean" id="ref-for-simulated-xr-device-emulated-position-boolean">emulated position boolean</a> to <var>emulatedPosition</var>.</p>
      </ol>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-clearviewerorigin"><code>clearViewerOrigin()</code></dfn> method will, on the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame③">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device⑥">device</a>’s <a data-link-type="dfn" href="#simulated-xr-device-viewer-origin" id="ref-for-simulated-xr-device-viewer-origin②">viewer origin</a> to <code>null</code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-simulatevisibilitychange"><code>simulateVisibilityChange(<var>state</var>)</code></dfn> method will, as soon as possible, set <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device⑦">device</a>’s <a data-link-type="dfn" href="#simulated-xr-device-visibility-state" id="ref-for-simulated-xr-device-visibility-state">visibility state</a> to <var>state</var>.</p>
   <div class="algorithm" data-algorithm="set-floor-origin">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-setfloororigin"><code>setFloorOrigin(<var>origin</var>)</code></dfn> performs the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>o</var> be the result of running <a data-link-type="dfn" href="#parse-a-rigid-transform" id="ref-for-parse-a-rigid-transform②">parse a rigid transform</a> on <var>origin</var>.</p>
     <li data-md>
      <p>On the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame④">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device⑧">device</a>’s <a data-link-type="dfn" href="#simulated-xr-device-floor-origin" id="ref-for-simulated-xr-device-floor-origin①">floor origin</a> to <var>o</var>.</p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-clearfloororigin"><code>clearFloorOrigin()</code></dfn> method will, on the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame⑤">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device⑨">device</a>’s <a data-link-type="dfn" href="#simulated-xr-device-floor-origin" id="ref-for-simulated-xr-device-floor-origin②">floor origin</a> to <code>null</code>.</p>
   <div class="algorithm" data-algorithm="set-bounds-geometry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-setboundsgeometry"><code>setBoundsGeometry(<var>boundsCoordinates</var>)</code></dfn> performs the following steps: 
    <ol>
     <li data-md>
      <p>If <var>boundsCoordinates</var> has fewer than 3 elements, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code>.</p>
     <li data-md>
      <p>On the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame⑥">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device①⓪">device</a>’s <a data-link-type="dfn" href="#simulated-xr-device-native-bounds-geometry" id="ref-for-simulated-xr-device-native-bounds-geometry①">native bounds geometry</a> to <var>boundsCoordinates</var>.</p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-simulateresetpose"><code>simulateResetPose()</code></dfn> method will, as soon as possible, behave as if the <a data-link-type="dfn" href="#fakexrdevice-device" id="ref-for-fakexrdevice-device①①">device</a>’s <a data-link-type="dfn">viewer</a>’s <a data-link-type="dfn">native origin</a> had a discontinuity, triggering appropriate <code class="idl"><a data-link-type="idl">reset</a></code> events.</p>
   <div class="algorithm" data-algorithm="simulate-input-source-connection">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-simulateinputsourceconnection"><code>simulateInputSourceConnection(<var>init</var>)</code></dfn> method creates a new <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source①⓪">simulated XR input source</a>. 
    <p>When this method is invoked, the user agent MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>inputSource</var> be a new <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source①①">simulated XR input source</a>.</p>
     <li data-md>
      <p>Set <var>inputSource</var>’s <a data-link-type="dfn" href="#simulated-xr-input-source-handedness" id="ref-for-simulated-xr-input-source-handedness">handedness</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-handedness" id="ref-for-dom-fakexrinputsourceinit-handedness">handedness</a></code>.</p>
     <li data-md>
      <p>Set <var>inputSource</var>’s <a data-link-type="dfn" href="#simulated-xr-input-source-targetraymode" id="ref-for-simulated-xr-input-source-targetraymode">targetRayMode</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-targetraymode" id="ref-for-dom-fakexrinputsourceinit-targetraymode">targetRayMode</a></code>.</p>
     <li data-md>
      <p>Set <var>inputSource</var>’s <a data-link-type="dfn" href="#simulated-xr-input-source-profiles" id="ref-for-simulated-xr-input-source-profiles">profiles</a> to <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-profiles" id="ref-for-dom-fakexrinputsourceinit-profiles">profiles</a></code></p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-griporigin" id="ref-for-dom-fakexrinputsourceinit-griporigin">gripOrigin</a></code> is set, set <var>inputSource</var>’s <a data-link-type="dfn" href="#simulated-xr-input-source-griporigin" id="ref-for-simulated-xr-input-source-griporigin">gripOrigin</a> to the result of running <a data-link-type="dfn" href="#parse-a-rigid-transform" id="ref-for-parse-a-rigid-transform③">parse a rigid transform</a> on <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-griporigin" id="ref-for-dom-fakexrinputsourceinit-griporigin①">gripOrigin</a></code></p>
     <li data-md>
      <p>Set <var>inputSource</var>’s <a data-link-type="dfn" href="#simulated-xr-input-source-pointerorigin" id="ref-for-simulated-xr-input-source-pointerorigin">pointerOrigin</a> to the result of running <a data-link-type="dfn" href="#parse-a-rigid-transform" id="ref-for-parse-a-rigid-transform④">parse a rigid transform</a> on <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-pointerorigin" id="ref-for-dom-fakexrinputsourceinit-pointerorigin">pointerOrigin</a></code></p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-supportedbuttons" id="ref-for-dom-fakexrinputsourceinit-supportedbuttons">supportedButtons</a></code> is set, set <var>inputSource</var>’s <a data-link-type="dfn" href="#simulated-xr-input-source-buttonstate" id="ref-for-simulated-xr-input-source-buttonstate①">buttonState</a> to the result of running <a data-link-type="dfn" href="#parse-supported-buttons" id="ref-for-parse-supported-buttons">parse supported buttons</a> on <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-supportedbuttons" id="ref-for-dom-fakexrinputsourceinit-supportedbuttons①">supportedButtons</a></code></p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-selectionclicked" id="ref-for-dom-fakexrinputsourceinit-selectionclicked">selectionClicked</a></code> is set to <code>true</code>, run <a data-link-type="dfn" href="#simulate-a-full-primary-action" id="ref-for-simulate-a-full-primary-action">simulate a full primary action</a> on <var>inputSource</var>.</p>
     <li data-md>
      <p>If <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrinputsourceinit-selectionstarted" id="ref-for-dom-fakexrinputsourceinit-selectionstarted">selectionStarted</a></code> is set to <code>true</code>, run <a data-link-type="dfn" href="#start-a-primary-action" id="ref-for-start-a-primary-action">start a primary action</a> on <var>inputSource</var>.</p>
     <li data-md>
      <p>By the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame⑦">next animation frame</a> notify <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession③">XRSession</a></code> of the new <a data-link-type="dfn">XR input source</a>.</p>
     <li data-md>
      <p>Let <var>c</var> be a new <code class="idl"><a data-link-type="idl" href="#fakexrinputcontroller" id="ref-for-fakexrinputcontroller②">FakeXRInputController</a></code> object with {<a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource">inputSource</a> as <var>inputSource</var>.</p>
     <li data-md>
      <p>Return <var>c</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="5.2" id="fakexrinputcontroller-init"><span class="secno">5.2. </span><span class="content">FakeXRInputController</span><a class="self-link" href="#fakexrinputcontroller-init"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrinputsourceinit"><code><c- g>FakeXRInputSourceInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrhandedness" id="ref-for-enumdef-xrhandedness①"><c- n>XRHandedness</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputSourceInit" data-dfn-type="dict-member" data-export data-type="XRHandedness" id="dom-fakexrinputsourceinit-handedness"><code><c- g>handedness</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrtargetraymode" id="ref-for-enumdef-xrtargetraymode①"><c- n>XRTargetRayMode</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputSourceInit" data-dfn-type="dict-member" data-export data-type="XRTargetRayMode" id="dom-fakexrinputsourceinit-targetraymode"><code><c- g>targetRayMode</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit⑧"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputSourceInit" data-dfn-type="dict-member" data-export data-type="FakeXRRigidTransformInit" id="dom-fakexrinputsourceinit-pointerorigin"><code><c- g>pointerOrigin</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑨"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputSourceInit" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>" id="dom-fakexrinputsourceinit-profiles"><code><c- g>profiles</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FakeXRInputSourceInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-fakexrinputsourceinit-selectionstarted"><code><c- g>selectionStarted</c-></code></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FakeXRInputSourceInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-fakexrinputsourceinit-selectionclicked"><code><c- g>selectionClicked</c-></code></dfn> = <c- b>false</c->;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①⓪"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrbuttonstateinit" id="ref-for-dictdef-fakexrbuttonstateinit①"><c- n>FakeXRButtonStateInit</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputSourceInit" data-dfn-type="dict-member" data-export data-type="sequence<FakeXRButtonStateInit>" id="dom-fakexrinputsourceinit-supportedbuttons"><code><c- g>supportedButtons</c-></code></dfn>;
  <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit⑨"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputSourceInit" data-dfn-type="dict-member" data-export data-type="FakeXRRigidTransformInit" id="dom-fakexrinputsourceinit-griporigin"><code><c- g>gripOrigin</c-></code></dfn>;
};

<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="fakexrinputcontroller"><code><c- g>FakeXRInputController</c-></code></dfn> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-sethandedness" id="ref-for-dom-fakexrinputcontroller-sethandedness"><c- g>setHandedness</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrhandedness" id="ref-for-enumdef-xrhandedness②"><c- n>XRHandedness</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setHandedness(handedness)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-sethandedness-handedness-handedness"><code><c- g>handedness</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-settargetraymode" id="ref-for-dom-fakexrinputcontroller-settargetraymode"><c- g>setTargetRayMode</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrtargetraymode" id="ref-for-enumdef-xrtargetraymode②"><c- n>XRTargetRayMode</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setTargetRayMode(targetRayMode)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-settargetraymode-targetraymode-targetraymode"><code><c- g>targetRayMode</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setprofiles" id="ref-for-dom-fakexrinputcontroller-setprofiles"><c- g>setProfiles</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setProfiles(profiles)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-setprofiles-profiles-profiles"><code><c- g>profiles</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setgriporigin" id="ref-for-dom-fakexrinputcontroller-setgriporigin"><c- g>setGripOrigin</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit①⓪"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setGripOrigin(gripOrigin, emulatedPosition), FakeXRInputController/setGripOrigin(gripOrigin)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-setgriporigin-griporigin-emulatedposition-griporigin"><code><c- g>gripOrigin</c-></code></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setGripOrigin(gripOrigin, emulatedPosition), FakeXRInputController/setGripOrigin(gripOrigin)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-setgriporigin-griporigin-emulatedposition-emulatedposition"><code><c- g>emulatedPosition</c-></code></dfn> = <c- b>false</c->);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-cleargriporigin" id="ref-for-dom-fakexrinputcontroller-cleargriporigin"><c- g>clearGripOrigin</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setpointerorigin" id="ref-for-dom-fakexrinputcontroller-setpointerorigin"><c- g>setPointerOrigin</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit①①"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setPointerOrigin(pointerOrigin, emulatedPosition), FakeXRInputController/setPointerOrigin(pointerOrigin)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-setpointerorigin-pointerorigin-emulatedposition-pointerorigin"><code><c- g>pointerOrigin</c-></code></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setPointerOrigin(pointerOrigin, emulatedPosition), FakeXRInputController/setPointerOrigin(pointerOrigin)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-setpointerorigin-pointerorigin-emulatedposition-emulatedposition"><code><c- g>emulatedPosition</c-></code></dfn> = <c- b>false</c->);

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-disconnect" id="ref-for-dom-fakexrinputcontroller-disconnect"><c- g>disconnect</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-reconnect" id="ref-for-dom-fakexrinputcontroller-reconnect"><c- g>reconnect</c-></a>();

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-startselection" id="ref-for-dom-fakexrinputcontroller-startselection"><c- g>startSelection</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-endselection" id="ref-for-dom-fakexrinputcontroller-endselection"><c- g>endSelection</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-simulateselect" id="ref-for-dom-fakexrinputcontroller-simulateselect"><c- g>simulateSelect</c-></a>();

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setsupportedbuttons" id="ref-for-dom-fakexrinputcontroller-setsupportedbuttons"><c- g>setSupportedButtons</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrbuttonstateinit" id="ref-for-dictdef-fakexrbuttonstateinit②"><c- n>FakeXRButtonStateInit</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setSupportedButtons(supportedButtons)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-setsupportedbuttons-supportedbuttons-supportedbuttons"><code><c- g>supportedButtons</c-></code></dfn>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-updatebuttonstate" id="ref-for-dom-fakexrinputcontroller-updatebuttonstate"><c- g>updateButtonState</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrbuttonstateinit" id="ref-for-dictdef-fakexrbuttonstateinit③"><c- n>FakeXRButtonStateInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/updateButtonState(buttonState)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-updatebuttonstate-buttonstate-buttonstate"><code><c- g>buttonState</c-></code></dfn>);
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-fakexrbuttontype"><code><c- g>FakeXRButtonType</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonType" data-dfn-type="enum-value" data-export id="dom-fakexrbuttontype-grip"><code><c- s>"grip"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonType" data-dfn-type="enum-value" data-export id="dom-fakexrbuttontype-touchpad"><code><c- s>"touchpad"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonType" data-dfn-type="enum-value" data-export id="dom-fakexrbuttontype-thumbstick"><code><c- s>"thumbstick"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonType" data-dfn-type="enum-value" data-export id="dom-fakexrbuttontype-optional-button"><code><c- s>"optional-button"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonType" data-dfn-type="enum-value" data-export id="dom-fakexrbuttontype-optional-thumbstick"><code><c- s>"optional-thumbstick"</c-></code></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrbuttonstateinit"><code><c- g>FakeXRButtonStateInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-fakexrbuttontype" id="ref-for-enumdef-fakexrbuttontype"><c- n>FakeXRButtonType</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonStateInit" data-dfn-type="dict-member" data-export data-type="FakeXRButtonType" id="dom-fakexrbuttonstateinit-buttontype"><code><c- g>buttonType</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑥"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonStateInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-fakexrbuttonstateinit-pressed"><code><c- g>pressed</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑦"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonStateInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-fakexrbuttonstateinit-touched"><code><c- g>touched</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑦"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRButtonStateInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-fakexrbuttonstateinit-pressedvalue"><code><c- g>pressedValue</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑧"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="0.0" data-dfn-for="FakeXRButtonStateInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-fakexrbuttonstateinit-xvalue"><code><c- g>xValue</c-></code></dfn> = 0.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float⑨"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-default="0.0" data-dfn-for="FakeXRButtonStateInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-fakexrbuttonstateinit-yvalue"><code><c- g>yValue</c-></code></dfn> = 0.0;
};
</pre>
   <p>Each <code class="idl"><a data-link-type="idl" href="#fakexrinputcontroller" id="ref-for-fakexrinputcontroller③">FakeXRInputController</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="FakeXRInputController" data-dfn-type="dfn" data-noexport id="fakexrinputcontroller-inputsource">inputSource</dfn>, which is a <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source①②">simulated XR input source</a> that it is able to control.</p>
   <p>Since user agents may opt to send input events on a per-frame basis, the results of all <code class="idl"><a data-link-type="idl" href="#fakexrinputcontroller" id="ref-for-fakexrinputcontroller④">FakeXRInputController</a></code> methods and <code class="idl"><a data-link-type="idl" href="#dom-fakexrdevice-simulateinputsourceconnection" id="ref-for-dom-fakexrdevice-simulateinputsourceconnection①">simulateInputSourceConnection()</a></code> are not guaranteed to be visible (via, e.g. <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-inputsources" id="ref-for-dom-xrsession-inputsources①">inputSources</a></code> or <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-oninputsourceschange" id="ref-for-dom-xrsession-oninputsourceschange">oninputsourceschange</a></code> events) until the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame⑧">next animation frame</a>.</p>
   <div class="algorithm" data-algorithm="start-a-primary-action">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="start-a-primary-action">start a primary action</dfn> on a <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source①③">simulated XR input source</a> run the following steps: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#simulated-xr-input-source-primaryactionstarted" id="ref-for-simulated-xr-input-source-primaryactionstarted">primaryActionStarted</a> is true, abort these steps.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="#simulated-xr-input-source-primaryactionstarted" id="ref-for-simulated-xr-input-source-primaryactionstarted①">primaryActionStarted</a> to true.</p>
     <li data-md>
      <p>By the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame⑨">next animation frame</a> indicate to the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession④">XRSession</a></code> that the corresponding <a data-link-type="dfn">XR input source’s</a> <a data-link-type="dfn">primary action</a> has started.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="stop-a-primary-action">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="stop-a-primary-action">stop a primary action</dfn> on a <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source①④">simulated XR input source</a> run the following steps: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#simulated-xr-input-source-primaryactionstarted" id="ref-for-simulated-xr-input-source-primaryactionstarted②">primaryActionStarted</a> is false, abort these steps.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="#simulated-xr-input-source-primaryactionstarted" id="ref-for-simulated-xr-input-source-primaryactionstarted③">primaryActionStarted</a> to false.</p>
     <li data-md>
      <p>By the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①⓪">next animation frame</a> indicate to the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession⑤">XRSession</a></code> that the corresponding <a data-link-type="dfn">XR input source’s</a> <a data-link-type="dfn">primary action</a> has stopped.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="simulate-a-full-primary-action">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="simulate-a-full-primary-action">simulate a full primary action</dfn> on a <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source①⑤">simulated XR input source</a> <var>source</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>current</var> be the current value of <a data-link-type="dfn" href="#simulated-xr-input-source-primaryactionstarted" id="ref-for-simulated-xr-input-source-primaryactionstarted④">primaryActionStarted</a>.</p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#start-a-primary-action" id="ref-for-start-a-primary-action①">start a primary action</a> on <var>source</var></p>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="#stop-a-primary-action" id="ref-for-stop-a-primary-action">stop a primary action</a> on <var>source</var></p>
     <li data-md>
      <p>If <var>current</var> is <code>true</code> run <a data-link-type="dfn" href="#start-a-primary-action" id="ref-for-start-a-primary-action②">start a primary action</a> on <var>source</var></p>
    </ol>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> If a gamepad is attached to the <a data-link-type="dfn" href="#simulated-xr-input-source" id="ref-for-simulated-xr-input-source①⑥">simulated XR input source</a>, then running <a data-link-type="dfn" href="#start-a-primary-action" id="ref-for-start-a-primary-action③">start a primary action</a> or <a data-link-type="dfn" href="#stop-a-primary-action" id="ref-for-stop-a-primary-action①">stop a primary action</a> should also ensure that the primary input’s corresponding gamepad button is updated accordingly.</p>
   <p class="note" role="note"><span class="marker">Note:</span> If both <a data-link-type="dfn" href="#start-a-primary-action" id="ref-for-start-a-primary-action④">start a primary action</a> and <a data-link-type="dfn" href="#stop-a-primary-action" id="ref-for-stop-a-primary-action②">stop a primary action</a> are run in the same frame, then by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①①">next animation frame</a> It is expected that <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-onselect" id="ref-for-dom-xrsession-onselect">onselect</a></code> and <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsession-onselectend" id="ref-for-dom-xrsession-onselectend">onselectend</a></code> events will fire.</p>
   <div class="algorithm" data-algorithm="parse-supported-buttons">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-supported-buttons">parse supported buttons</dfn> on a sequence of <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrbuttonstateinit" id="ref-for-dictdef-fakexrbuttonstateinit④">FakeXRButtonStateInit</a></code>s, <var>buttons</var> run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>l</var> be an empty list of <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrbuttonstateinit" id="ref-for-dictdef-fakexrbuttonstateinit⑤">FakeXRButtonStateInit</a></code>s</p>
     <li data-md>
      <p>For each <var>button</var> in <var>buttons</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>l</var> does not contain a <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrbuttonstateinit" id="ref-for-dictdef-fakexrbuttonstateinit⑥">FakeXRButtonStateInit</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-buttontype" id="ref-for-dom-fakexrbuttonstateinit-buttontype">buttonType</a></code> matches <var>button</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-buttontype" id="ref-for-dom-fakexrbuttonstateinit-buttontype①">buttonType</a></code>, append <var>button</var> to <var>l</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>l</var></p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-sethandedness"><code>setHandedness(<var>handedness</var>)</code></dfn> method will, by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①②">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource①">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-handedness" id="ref-for-simulated-xr-input-source-handedness①">handedness</a> to <var>handedness</var>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-settargetraymode"><code>setTargetRayMode(<var>targetRayMode</var>)</code></dfn> method will, by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①③">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource②">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-targetraymode" id="ref-for-simulated-xr-input-source-targetraymode①">targetRayMode</a> to <var>targetRayMode</var>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-setprofiles"><code>setProfiles(<var>profiles</var>)</code></dfn> method will, by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①④">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource③">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-profiles" id="ref-for-simulated-xr-input-source-profiles①">profiles</a> to <var>profiles</var>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export data-lt="setGripOrigin(gripOrigin, emulatedPosition)|setGripOrigin(gripOrigin)" id="dom-fakexrinputcontroller-setgriporigin"><code>setGripOrigin(<var>gripOrigin</var>)</code></dfn> method will, by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①⑤">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource④">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-griporigin" id="ref-for-simulated-xr-input-source-griporigin①">gripOrigin</a> to the result of running <a data-link-type="dfn" href="#parse-a-rigid-transform" id="ref-for-parse-a-rigid-transform⑤">parse a rigid transform</a> on <var>gripOrigin</var>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-cleargriporigin"><code>clearGripOrigin()</code></dfn> method will, by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①⑥">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource⑤">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-griporigin" id="ref-for-simulated-xr-input-source-griporigin②">gripOrigin</a> to <code>null</code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export data-lt="setPointerOrigin(pointerOrigin, emulatedPosition)|setPointerOrigin(pointerOrigin)" id="dom-fakexrinputcontroller-setpointerorigin"><code>setPointerOrigin(<var>pointerOrigin</var>)</code></dfn> method will, by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①⑦">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource⑥">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-pointerorigin" id="ref-for-simulated-xr-input-source-pointerorigin①">pointerOrigin</a> to the result of running <a data-link-type="dfn" href="#parse-a-rigid-transform" id="ref-for-parse-a-rigid-transform⑥">parse a rigid transform</a> on <var>pointerOrigin</var>.</p>
   <div class="algorithm" data-algorithm="fakexrinputcontroller-disconnect">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-disconnect"><code>disconnect()</code></dfn> method will run the following steps: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource⑦">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-connectionstate" id="ref-for-simulated-xr-input-source-connectionstate">connectionState</a> is <code>false</code>, abort these steps.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource⑧">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-connectionstate" id="ref-for-simulated-xr-input-source-connectionstate①">connectionState</a> to <code>false</code>.</p>
     <li data-md>
      <p>By the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①⑧">next animation frame</a>, notify the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession⑥">XRSession</a></code> that this <a data-link-type="dfn">XR input source</a> has been removed.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="fakexrinputcontroller-reconnect">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-reconnect"><code>reconnect()</code></dfn> method will run the following steps: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource⑨">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-connectionstate" id="ref-for-simulated-xr-input-source-connectionstate②">connectionState</a> is <code>true</code>, abort these steps.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource①⓪">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-connectionstate" id="ref-for-simulated-xr-input-source-connectionstate③">connectionState</a> to <code>true</code>.</p>
     <li data-md>
      <p>By the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame①⑨">next animation frame</a>, notify the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrsession" id="ref-for-xrsession⑦">XRSession</a></code> that this <a data-link-type="dfn">XR input source</a> has been added.</p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-startselection"><code>startSelection()</code></dfn> method will run <a data-link-type="dfn" href="#start-a-primary-action" id="ref-for-start-a-primary-action⑤">start a primary action</a> on <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource①①">inputSource</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-endselection"><code>endSelection()</code></dfn> method will run <a data-link-type="dfn" href="#stop-a-primary-action" id="ref-for-stop-a-primary-action③">stop a primary action</a> on <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource①②">inputSource</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-simulateselect"><code>simulateSelect()</code></dfn> method will run <a data-link-type="dfn" href="#simulate-a-full-primary-action" id="ref-for-simulate-a-full-primary-action①">simulate a full primary action</a> on <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource①③">inputSource</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-setsupportedbuttons"><code>setSupportedButtons(<var>supportedButtons</var>)</code></dfn> will, by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame②⓪">next animation frame</a>, set <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource①④">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-buttonstate" id="ref-for-simulated-xr-input-source-buttonstate②">buttonState</a> to the result of running <a data-link-type="dfn" href="#parse-supported-buttons" id="ref-for-parse-supported-buttons①">parse supported buttons</a> on <var>supportedButtons</var>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> As user agents may recreate the <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#xrinputsource" id="ref-for-xrinputsource">XRInputSource</a></code> or <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr-gamepads-module/#dom-xrinputsource-gamepad" id="ref-for-dom-xrinputsource-gamepad①">gamepad</a></code> objects on buttons being changed, this method SHOULD NOT be used to simulate changes to button state.</p>
   <div class="algorithm" data-algorithm="update-button-state">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-updatebuttonstate"><code>updateButtonState(<var>buttonState</var>)</code></dfn> will run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>validState</var> equal the results of running <a data-link-type="dfn" href="#validate-a-button-state" id="ref-for-validate-a-button-state">validate a button state</a> on <var>buttonState</var>.</p>
     <li data-md>
      <p>Let <var>foundState</var> be <code>null</code>.</p>
     <li data-md>
      <p>For every <var>state</var> in <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource①⑤">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-buttonstate" id="ref-for-simulated-xr-input-source-buttonstate③">buttonState</a> array:</p>
      <ol>
       <li data-md>
        <p>If <var>state</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-buttontype" id="ref-for-dom-fakexrbuttonstateinit-buttontype②">buttonType</a></code> matches <var>buttonState</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-buttontype" id="ref-for-dom-fakexrbuttonstateinit-buttontype③">buttonType</a></code>:</p>
        <ol>
         <li data-md>
          <p>Set <var>foundState</var> to a reference of <var>state</var></p>
         <li data-md>
          <p>Break out of this loop</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>foundState</var> is <code>null</code> throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notfounderror" id="ref-for-notfounderror">NotFoundError</a></code></p>
     <li data-md>
      <p>Update <var>foundState</var>’s attributes in <a data-link-type="dfn" href="#fakexrinputcontroller-inputsource" id="ref-for-fakexrinputcontroller-inputsource①⑥">inputSource</a>’s <a data-link-type="dfn" href="#simulated-xr-input-source-buttonstate" id="ref-for-simulated-xr-input-source-buttonstate④">buttonState</a> to match those of <var>validState</var>. Note: If <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-buttontype" id="ref-for-dom-fakexrbuttonstateinit-buttontype④">buttonType</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttontype-grip" id="ref-for-dom-fakexrbuttontype-grip①">grip</a></code>, then <a data-link-type="dfn">XR input source</a>’s <a data-link-type="dfn">primary squeeze action</a> should be updated.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="validate-a-button-state">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-a-button-state">validate a button state</dfn> on a <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrbuttonstateinit" id="ref-for-dictdef-fakexrbuttonstateinit⑦">FakeXRButtonStateInit</a></code> <var>buttonState</var> run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>validState</var> equal <var>buttonState</var>.</p>
     <li data-md>
      <p>If <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-pressed" id="ref-for-dom-fakexrbuttonstateinit-pressed">pressed</a></code> is <code>true</code> and <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-touched" id="ref-for-dom-fakexrbuttonstateinit-touched">touched</a></code> is <code>false</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>If <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-pressedvalue" id="ref-for-dom-fakexrbuttonstateinit-pressedvalue">pressedValue</a></code> is less than <code>0.0</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>If <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-pressedvalue" id="ref-for-dom-fakexrbuttonstateinit-pressedvalue①">pressedValue</a></code> is greater than <code>0.0</code> and <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-touched" id="ref-for-dom-fakexrbuttonstateinit-touched①">touched</a></code> is <code>false</code> throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>If <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-buttontype" id="ref-for-dom-fakexrbuttonstateinit-buttontype⑤">buttonType</a></code> is not one of: <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttontype-touchpad" id="ref-for-dom-fakexrbuttontype-touchpad">"touchpad"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttontype-thumbstick" id="ref-for-dom-fakexrbuttontype-thumbstick">"thumbstick"</a></code>, or <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttontype-optional-thumbstick" id="ref-for-dom-fakexrbuttontype-optional-thumbstick">"optional-thumbstick"</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>validState</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-xvalue" id="ref-for-dom-fakexrbuttonstateinit-xvalue">xValue</a></code> to <code>0.0</code>.</p>
       <li data-md>
        <p>Set <var>validState</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrbuttonstateinit-yvalue" id="ref-for-dom-fakexrbuttonstateinit-yvalue">yValue</a></code> to <code>0.0</code>.</p>
      </ol>
     <li data-md>
      <p>Return <var>validState</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="6" id="hit-test-extensions"><span class="secno">6. </span><span class="content">Hit test extensions</span><a class="self-link" href="#hit-test-extensions"></a></h2>
   <p>The hit test extensions for test API SHOULD be implemented by all user agents that implement <a href="https://immersive-web.github.io/hit-test/">WebXR Hit Test Module</a>.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrworldinit"><code><c- g>FakeXRWorldInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrregioninit" id="ref-for-dictdef-fakexrregioninit"><c- n>FakeXRRegionInit</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRWorldInit" data-dfn-type="dict-member" data-export data-type="sequence<FakeXRRegionInit>" id="dom-fakexrworldinit-hittestregions"><code><c- g>hitTestRegions</c-></code></dfn>;
};

</pre>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-fakexrworldinit" id="ref-for-dictdef-fakexrworldinit②">FakeXRWorldInit</a></code> dictionary describes the state of the world that will be used when computing hit test results on a <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice⑥">FakeXRDevice</a></code>.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-fakexrworldinit-hittestregions" id="ref-for-dom-fakexrworldinit-hittestregions">hitTestRegions</a></code> contains a collection of <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrregioninit" id="ref-for-dictdef-fakexrregioninit①">FakeXRRegionInit</a></code>s that are used to describe specific regions of the fake world. The order of the regions does not matter.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrregioninit"><code><c- g>FakeXRRegionInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①④"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrtriangleinit" id="ref-for-dictdef-fakexrtriangleinit"><c- n>FakeXRTriangleInit</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRRegionInit" data-dfn-type="dict-member" data-export data-type="sequence<FakeXRTriangleInit>" id="dom-fakexrregioninit-faces"><code><c- g>faces</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-fakexrregiontype" id="ref-for-enumdef-fakexrregiontype"><c- n>FakeXRRegionType</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRRegionInit" data-dfn-type="dict-member" data-export data-type="FakeXRRegionType" id="dom-fakexrregioninit-type"><code><c- g>type</c-></code></dfn>;
};

</pre>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-fakexrregioninit" id="ref-for-dictdef-fakexrregioninit②">FakeXRRegionInit</a></code> dictionary describes the contents of a specific region of the world.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-fakexrregioninit-faces" id="ref-for-dom-fakexrregioninit-faces">faces</a></code> contains a collection of <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrtriangleinit" id="ref-for-dictdef-fakexrtriangleinit①">FakeXRTriangleInit</a></code>s that enumerate all the faces contained by the region. The order of the faces does not matter.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-fakexrregioninit-type" id="ref-for-dom-fakexrregioninit-type">type</a></code> contains a type of the region that will be used during computation of hit test results.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrtriangleinit"><code><c- g>FakeXRTriangleInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①⑤"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit" id="ref-for-dictdef-dompointinit②"><c- n>DOMPointInit</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRTriangleInit" data-dfn-type="dict-member" data-export data-type="sequence<DOMPointInit>" id="dom-fakexrtriangleinit-vertices"><code><c- g>vertices</c-></code></dfn>;  // size = 3
};

</pre>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-fakexrtriangleinit" id="ref-for-dictdef-fakexrtriangleinit②">FakeXRTriangleInit</a></code> dictionary describes a single face of a region.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-fakexrtriangleinit-vertices" id="ref-for-dom-fakexrtriangleinit-vertices">vertices</a></code> contains a collection of <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit" id="ref-for-dictdef-dompointinit③">DOMPointInit</a></code>s that comprise the face. The face will be considered as solid when computing hit test results and as such, the winding order of the vertices does not matter.</p>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-fakexrregiontype"><code><c- g>FakeXRRegionType</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRRegionType" data-dfn-type="enum-value" data-export id="dom-fakexrregiontype-point"><code><c- s>"point"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRRegionType" data-dfn-type="enum-value" data-export id="dom-fakexrregiontype-plane"><code><c- s>"plane"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRRegionType" data-dfn-type="enum-value" data-export id="dom-fakexrregiontype-mesh"><code><c- s>"mesh"</c-></code></dfn>
};

</pre>
   <p><code class="idl"><a data-link-type="idl" href="#enumdef-fakexrregiontype" id="ref-for-enumdef-fakexrregiontype①">FakeXRRegionType</a></code> enum is used to describe a type of the world region.</p>
   <h2 class="heading settled" data-level="7" id="dom-overlay-extensions"><span class="secno">7. </span><span class="content">DOM overlay extensions</span><a class="self-link" href="#dom-overlay-extensions"></a></h2>
   <p>The DOM Overlay extensions for test API SHOULD be implemented by all user agents that implement <a href="https://immersive-web.github.io/dom-overlays/">WebXR DOM Overlay Module</a>.</p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#fakexrinputcontroller" id="ref-for-fakexrinputcontroller⑤"><c- g>FakeXRInputController</c-></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setoverlaypointerposition" id="ref-for-dom-fakexrinputcontroller-setoverlaypointerposition"><c- g>setOverlayPointerPosition</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①⓪"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setOverlayPointerPosition(x, y)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-setoverlaypointerposition-x-y-x"><code><c- g>x</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①①"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController/setOverlayPointerPosition(x, y)" data-dfn-type="argument" data-export id="dom-fakexrinputcontroller-setoverlaypointerposition-x-y-y"><code><c- g>y</c-></code></dfn>);
};
</pre>
   <p>When <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRInputController" data-dfn-type="method" data-export id="dom-fakexrinputcontroller-setoverlaypointerposition"><code>setOverlayPointerPosition(x, y)</code></dfn> is called, it sets a position within the DOM overlay in DOM coordinates for the next <a data-link-type="dfn">XR animation frame</a>, and is cleared after that frame. It is intended to be used along with a <a data-link-type="dfn">primary action</a> for that frame, simulating that the user is interacting with the DOM overlay. The UA will emit a <a data-link-type="dfn" href="https://immersive-web.github.io/dom-overlays#beforexrselect" id="ref-for-beforexrselect">beforexrselect</a> event at this location before generating XR select events.</p>
   <h2 class="heading settled" data-level="8" id="anchors-extensions"><span class="secno">8. </span><span class="content">Anchors extensions</span><a class="self-link" href="#anchors-extensions"></a></h2>
   <p>The anchors extensions for test API SHOULD be implemented by all user agents that implement <a href="https://immersive-web.github.io/anchors/">WebXR Anchors</a>.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexranchorcreationparameters"><code><c- g>FakeXRAnchorCreationParameters</c-></code></dfn> {
  <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit①②"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorCreationParameters" data-dfn-type="dict-member" data-export data-type="FakeXRRigidTransformInit" id="dom-fakexranchorcreationparameters-requestedanchororigin"><code><c- g>requestedAnchorOrigin</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑧"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorCreationParameters" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-fakexranchorcreationparameters-isattachedtoentity"><code><c- g>isAttachedToEntity</c-></code></dfn>;
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-fakexranchorcreationcallback"><code><c- g>FakeXRAnchorCreationCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑨"><c- b>boolean</c-></a>> (<a data-link-type="idl-name" href="#dictdef-fakexranchorcreationparameters" id="ref-for-dictdef-fakexranchorcreationparameters"><c- n>FakeXRAnchorCreationParameters</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorCreationCallback" data-dfn-type="argument" data-export id="dom-fakexranchorcreationcallback-parameters"><code><c- g>parameters</c-></code></dfn>, <a data-link-type="idl-name" href="#fakexranchorcontroller" id="ref-for-fakexranchorcontroller"><c- n>FakeXRAnchorController</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorCreationCallback" data-dfn-type="argument" data-export id="dom-fakexranchorcreationcallback-anchorcontroller"><code><c- g>anchorController</c-></code></dfn>);

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#fakexrdevice" id="ref-for-fakexrdevice⑦"><c- g>FakeXRDevice</c-></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export data-lt="setAnchorCreationCallback(callback)" id="dom-fakexrdevice-setanchorcreationcallback"><code><c- g>setAnchorCreationCallback</c-></code></dfn>(<a data-link-type="idl-name" href="#callbackdef-fakexranchorcreationcallback" id="ref-for-callbackdef-fakexranchorcreationcallback"><c- n>FakeXRAnchorCreationCallback</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setAnchorCreationCallback(callback)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setanchorcreationcallback-callback-callback"><code><c- g>callback</c-></code></dfn>);
};

</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#callbackdef-fakexranchorcreationcallback" id="ref-for-callbackdef-fakexranchorcreationcallback①">FakeXRAnchorCreationCallback</a></code> callback can be used by the Web Platform Tests to control the result of a call to create an anchor, and to be able to subsequently control the newly created anchor.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice⑧">FakeXRDevice</a></code> interface is extended with internal <dfn class="dfn-paneled" data-dfn-for="FakeXRDevice" data-dfn-type="dfn" data-noexport id="fakexrdevice-anchorcreationcallback">anchorCreationCallback</dfn>, initially set to <code>null</code>. When the device receives a request to create an anchor, it MUST run the <a data-link-type="dfn" href="#determine-if-the-anchor-creation-succeeded" id="ref-for-determine-if-the-anchor-creation-succeeded">determine if the anchor creation succeeded</a> algorithm.</p>
   <div class="algorithm" data-algorithm="determine-if-anchor-creation-succeded">
    <p>In order to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="determine-if-the-anchor-creation-succeeded">determine if the anchor creation succeeded</dfn>, the <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice⑨">FakeXRDevice</a></code> <var>device</var> MUST run the following steps:</p>
    <ol>
     <li data-md>
      <p>If the <var>device</var>’s <a data-link-type="dfn" href="#fakexrdevice-anchorcreationcallback" id="ref-for-fakexrdevice-anchorcreationcallback">anchorCreationCallback</a> is <code>null</code>, return <code>false</code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>promise</var> be the result of invoking <a data-link-type="dfn" href="#fakexrdevice-anchorcreationcallback" id="ref-for-fakexrdevice-anchorcreationcallback①">anchorCreationCallback</a> with parameters set so that they reflect the parameters passed to anchor creation request.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" id="ref-for-dfn-perform-steps-once-promise-is-settled">React</a> to <var>promise</var>:</p>
      <ul>
       <li data-md>
        <p>If <var>promise</var> was fulfilled with value <var>v</var>, then return <var>v</var> and abort these steps.</p>
       <li data-md>
        <p>If <var>promise</var> was rejected, then return <code>false</code> and abort these steps.</p>
      </ul>
    </ol>
   </div>
   <p>The WPTs can set the anchor creation callback by calling <code class="idl"><a data-link-type="idl" href="#dom-fakexrdevice-setanchorcreationcallback" id="ref-for-dom-fakexrdevice-setanchorcreationcallback">setAnchorCreationCallback(callback)</a></code>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-fakexranchorcreationparameters-requestedanchororigin" id="ref-for-dom-fakexranchorcreationparameters-requestedanchororigin">requestedAnchorOrigin</a></code> attribute represents a transform expressed relative to <a data-link-type="dfn" href="#base-reference-space" id="ref-for-base-reference-space②">base reference space</a> used by the device.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-fakexranchorcreationparameters-isattachedtoentity" id="ref-for-dom-fakexranchorcreationparameters-isattachedtoentity">isAttachedToEntity</a></code> attribute will be set to <code>true</code> if the created anchor should be treated as attached to some entity. If so, the tests could emulate entity changing location by appropriately controlling the anchor via <a data-link-type="dfn" href="#fakexranchorcreationcallback-anchorcontroller" id="ref-for-fakexranchorcreationcallback-anchorcontroller">anchorController</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-for="FakeXRAnchorCreationCallback" data-dfn-type="dfn" data-noexport id="fakexranchorcreationcallback-anchorcontroller">anchorController</dfn> parameter passed in to <code class="idl"><a data-link-type="idl" href="#callbackdef-fakexranchorcreationcallback" id="ref-for-callbackdef-fakexranchorcreationcallback②">FakeXRAnchorCreationCallback</a></code> can be used to update the state of the anchor, assuming that the creation request was deemed successful. Tests SHOULD store it and issue commands to it for the entire duration of controlled anchor’s lifetime.</p>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="fakexranchorcontroller"><code><c- g>FakeXRAnchorController</c-></code></dfn> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①⓪"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorController" data-dfn-type="attribute" data-export data-readonly data-type="boolean" id="dom-fakexranchorcontroller-deleted"><code><c- g>deleted</c-></code></dfn>;

  // Controlling anchor state:
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorController" data-dfn-type="method" data-export data-lt="pauseTracking()" id="dom-fakexranchorcontroller-pausetracking"><code><c- g>pauseTracking</c-></code></dfn>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorController" data-dfn-type="method" data-export data-lt="resumeTracking()" id="dom-fakexranchorcontroller-resumetracking"><code><c- g>resumeTracking</c-></code></dfn>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorController" data-dfn-type="method" data-export data-lt="stopTracking()" id="dom-fakexranchorcontroller-stoptracking"><code><c- g>stopTracking</c-></code></dfn>();

  // Controlling anchor location:
  <a data-link-type="idl-name"><c- n>void</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorController" data-dfn-type="method" data-export data-lt="setAnchorOrigin(anchorOrigin)" id="dom-fakexranchorcontroller-setanchororigin"><code><c- g>setAnchorOrigin</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit①③"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRAnchorController/setAnchorOrigin(anchorOrigin)" data-dfn-type="argument" data-export id="dom-fakexranchorcontroller-setanchororigin-anchororigin-anchororigin"><code><c- g>anchorOrigin</c-></code></dfn>);
};

</pre>
   <p>Successfully created anchors can be controlled by the test through the use of <code class="idl"><a data-link-type="idl" href="#fakexranchorcontroller" id="ref-for-fakexranchorcontroller①">FakeXRAnchorController</a></code> interface.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#fakexranchorcontroller" id="ref-for-fakexranchorcontroller②">FakeXRAnchorController</a></code> has an associated internal <dfn class="dfn-paneled" data-dfn-for="FakeXRAnchorController" data-dfn-type="dfn" data-noexport id="fakexranchorcontroller-anchor-origin">anchor origin</dfn>, which is a <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit①④">FakeXRRigidTransformInit</a></code> describing the current state of the anchor’s <a data-link-type="dfn" href="https://immersive-web.github.io/anchors/#xranchor-native-origin" id="ref-for-xranchor-native-origin">native origin</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-fakexranchorcontroller-deleted" id="ref-for-dom-fakexranchorcontroller-deleted">deleted</a></code> attribute will be set to <code>true</code> when the application has invoked an <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/anchors/#dom-xranchor-delete" id="ref-for-dom-xranchor-delete">delete()</a></code> method on the anchor - in that case, the changes to the fake anchor controller will be ignored.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-fakexranchorcontroller-pausetracking" id="ref-for-dom-fakexranchorcontroller-pausetracking">pauseTracking()</a></code> method can be used by the tests to signal that the controlled anchor is temporarily untracked (i.e. its location will be unknown). Calling this method does not modify <a data-link-type="dfn" href="#fakexranchorcontroller-anchor-origin" id="ref-for-fakexranchorcontroller-anchor-origin">anchor origin</a> of the controller.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-fakexranchorcontroller-resumetracking" id="ref-for-dom-fakexranchorcontroller-resumetracking">resumeTracking()</a></code> method can be used by the tests to signal that the controlled anchor should have its tracking resumed, if it was temporarily untracked. Calling this method does not modify <a data-link-type="dfn" href="#fakexranchorcontroller-anchor-origin" id="ref-for-fakexranchorcontroller-anchor-origin①">anchor origin</a> of the controller.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-fakexranchorcontroller-stoptracking" id="ref-for-dom-fakexranchorcontroller-stoptracking">stopTracking()</a></code> method can be used by the tests to signal that the controlled anchor is no longer tracked and that anchor tracking will not be resumed. After calling this method, the other calls on anchor controller will be ignored.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-fakexranchorcontroller-setanchororigin" id="ref-for-dom-fakexranchorcontroller-setanchororigin">setAnchorOrigin(anchorOrigin)</a></code> method can be used to set the controller’s <a data-link-type="dfn" href="#fakexranchorcontroller-anchor-origin" id="ref-for-fakexranchorcontroller-anchor-origin②">anchor origin</a>. Tests can use this method to simulate updates in anchor pose.</p>
   <h2 class="heading settled" data-level="9" id="lighting-estimation-extensions"><span class="secno">9. </span><span class="content">Lighting estimation extensions</span><a class="self-link" href="#lighting-estimation-extensions"></a></h2>
   <p>The lighting estimation extensions for test API SHOULD be implemented by all user agents that implement <a href="https://immersive-web.github.io/lighting-estimation/">WebXR Lighting Estimation</a>.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrlightestimateinit"><code><c- g>FakeXRLightEstimateInit</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①⑥"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①②"><c- b>float</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRLightEstimateInit" data-dfn-type="dict-member" data-export data-type="sequence<float>" id="dom-fakexrlightestimateinit-sphericalharmonicscoefficients"><code><c- g>sphericalHarmonicsCoefficients</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit" id="ref-for-dictdef-dompointinit④"><c- n>DOMPointInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRLightEstimateInit" data-dfn-type="dict-member" data-export data-type="DOMPointInit" id="dom-fakexrlightestimateinit-primarylightdirection"><code><c- g>primaryLightDirection</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit" id="ref-for-dictdef-dompointinit⑤"><c- n>DOMPointInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRLightEstimateInit" data-dfn-type="dict-member" data-export data-type="DOMPointInit" id="dom-fakexrlightestimateinit-primarylightintensity"><code><c- g>primaryLightIntensity</c-></code></dfn>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#fakexrdevice" id="ref-for-fakexrdevice①⓪"><c- g>FakeXRDevice</c-></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setlightestimate" id="ref-for-dom-fakexrdevice-setlightestimate"><c- g>setLightEstimate</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrlightestimateinit" id="ref-for-dictdef-fakexrlightestimateinit"><c- n>FakeXRLightEstimateInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice/setLightEstimate(init)" data-dfn-type="argument" data-export id="dom-fakexrdevice-setlightestimate-init-init"><code><c- g>init</c-></code></dfn>);
};

</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice①①">FakeXRDevice</a></code> is extended with internal <dfn class="dfn-paneled" data-dfn-for="FakeXRDevice" data-dfn-type="dfn" data-noexport id="fakexrdevice-light-estimate">light estimate</dfn> which is a <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrlightestimateinit" id="ref-for-dictdef-fakexrlightestimateinit①">FakeXRLightEstimateInit</a></code>, used to supply data for any requested <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/lighting-estimation/#xrlightestimate-interface" id="ref-for-xrlightestimate-interface">XRLightEstimate</a></code>.</p>
   <div class="algorithm" data-algorithm="set-light-estimate">
     When the <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDevice" data-dfn-type="method" data-export id="dom-fakexrdevice-setlightestimate"><code>setLightEstimate(<var>init</var>)</code></dfn> method is invoked on <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice①②">FakeXRDevice</a></code> <var>device</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>c</var> be <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrlightestimateinit-sphericalharmonicscoefficients" id="ref-for-dom-fakexrlightestimateinit-sphericalharmonicscoefficients">sphericalHarmonicsCoefficients</a></code>.</p>
     <li data-md>
      <p>If <var>c</var> does not have 27 elements, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>d</var> be <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrlightestimateinit-primarylightdirection" id="ref-for-dom-fakexrlightestimateinit-primarylightdirection">primaryLightDirection</a></code>.</p>
     <li data-md>
      <p>If <var>d</var> is set and <var>d</var>’s <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-w" id="ref-for-dom-dompointinit-w②">w</a></code> value does not equal <code>0</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Let <var>i</var> be <var>init</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrlightestimateinit-primarylightintensity" id="ref-for-dom-fakexrlightestimateinit-primarylightintensity">primaryLightIntensity</a></code>.</p>
     <li data-md>
      <p>If <var>i</var> is set and <var>i</var>’s <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#dom-dompointinit-w" id="ref-for-dom-dompointinit-w③">w</a></code> value does not equal <code>1</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Set <var>device</var>’s <a data-link-type="dfn" href="#fakexrdevice-light-estimate" id="ref-for-fakexrdevice-light-estimate">light estimate</a> to <var>init</var> by the <a data-link-type="dfn" href="#xrsession-next-animation-frame" id="ref-for-xrsession-next-animation-frame②①">next animation frame</a>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="10" id="depth-sensing-extensions"><span class="secno">10. </span><span class="content">Depth sensing extensions</span><a class="self-link" href="#depth-sensing-extensions"></a></h2>
   <p>The depth sensing extensions for test API SHOULD be implemented by all user agents that implement <a href="https://immersive-web.github.io/depth-sensing/">WebXR Depth Sensing Module</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice①③">FakeXRDevice</a></code> is extended with internal <dfn class="dfn-paneled" data-dfn-for="FakeXRDevice" data-dfn-type="dfn" data-noexport id="fakexrdevice-depth-sensing-data">depth sensing data</dfn> which is a <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrdepthsensingdatainit" id="ref-for-dictdef-fakexrdepthsensingdatainit②">FakeXRDepthSensingDataInit</a></code>, used to supply data for requests to <a data-link-type="dfn" href="https://immersive-web.github.io/depth-sensing/#native-depth-sensing" id="ref-for-native-depth-sensing">native depth sensing</a>.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fakexrdepthsensingdatainit"><code><c- g>FakeXRDepthSensingDataInit</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer"><c- b>ArrayBuffer</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDepthSensingDataInit" data-dfn-type="dict-member" data-export data-type="ArrayBuffer" id="dom-fakexrdepthsensingdatainit-depthdata"><code><c- g>depthData</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit" id="ref-for-dictdef-fakexrrigidtransforminit①⑤"><c- n>FakeXRRigidTransformInit</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDepthSensingDataInit" data-dfn-type="dict-member" data-export data-type="FakeXRRigidTransformInit" id="dom-fakexrdepthsensingdatainit-normdepthbufferfromnormview"><code><c- g>normDepthBufferFromNormView</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float" id="ref-for-idl-float①③"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDepthSensingDataInit" data-dfn-type="dict-member" data-export data-type="float" id="dom-fakexrdepthsensingdatainit-rawvaluetometers"><code><c- g>rawValueToMeters</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDepthSensingDataInit" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-fakexrdepthsensingdatainit-width"><code><c- g>width</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long①"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FakeXRDepthSensingDataInit" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-fakexrdepthsensingdatainit-height"><code><c- g>height</c-></code></dfn>;
};

</pre>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-fakexrdepthsensingdatainit" id="ref-for-dictdef-fakexrdepthsensingdatainit③">FakeXRDepthSensingDataInit</a></code> dictionary describes the state of the depth sensing data that should be used when returning latest depth information in <a data-link-type="dfn" href="https://immersive-web.github.io/depth-sensing/#create-a-cpu-depth-information-instance" id="ref-for-create-a-cpu-depth-information-instance">creating a CPU depth information instance</a> and <a data-link-type="dfn" href="https://immersive-web.github.io/depth-sensing/#create-a-gpu-depth-information-instance" id="ref-for-create-a-gpu-depth-information-instance">creating a GPU depth information instance</a> algorithms. All keys present in <code class="idl"><a data-link-type="idl" href="#dictdef-fakexrdepthsensingdatainit" id="ref-for-dictdef-fakexrdepthsensingdatainit④">FakeXRDepthSensingDataInit</a></code> correspond to the data required to be returned by <a data-link-type="dfn" href="https://immersive-web.github.io/depth-sensing/#native-depth-sensing" id="ref-for-native-depth-sensing①">native depth sensing</a> capabilities of the device.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-fakexrdepthsensingdatainit-depthdata" id="ref-for-dom-fakexrdepthsensingdatainit-depthdata">depthData</a></code> corresponds to the desired depth buffer that is to be set on native depth information returned from querying the native device. Not setting <code class="idl"><a data-link-type="idl" href="#dom-fakexrdepthsensingdatainit-depthdata" id="ref-for-dom-fakexrdepthsensingdatainit-depthdata①">depthData</a></code> key in the dictionary signals that the returned native depth information should be <code>null</code>.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-fakexrdepthsensingdatainit-normdepthbufferfromnormview" id="ref-for-dom-fakexrdepthsensingdatainit-normdepthbufferfromnormview">normDepthBufferFromNormView</a></code> corresponds to the desired <a data-link-type="dfn" href="https://immersive-web.github.io/depth-sensing/#depth-coordinates-transformation-matrix" id="ref-for-depth-coordinates-transformation-matrix">depth coordinates transformation matrix</a> that is to be set on native depth information returned from querying the native device.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-fakexrdepthsensingdatainit-rawvaluetometers" id="ref-for-dom-fakexrdepthsensingdatainit-rawvaluetometers">rawValueToMeters</a></code> corresponds to the desired conversion factor that is to be set on native depth information returned from querying the native device.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-fakexrdepthsensingdatainit-width" id="ref-for-dom-fakexrdepthsensingdatainit-width">width</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-fakexrdepthsensingdatainit-height" id="ref-for-dom-fakexrdepthsensingdatainit-height">height</a></code> correspond to the desired dimensions of the depth buffer that are to be set on native depth information returned from querying the native device.</p>
   <div class="algorithm" data-algorithm="set-depth-sensing-information">
    <p>When the <code class="idl"><a data-link-type="idl" href="#dom-fakexrdevice-setdepthsensingdata" id="ref-for-dom-fakexrdevice-setdepthsensingdata">setDepthSensingData()</a></code> method is invoked on <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice①④">FakeXRDevice</a></code> <var>device</var> with <var>depthSensingData</var>, run the following steps:</p>
    <ol>
     <li data-md>
      <p>If <var>depthSensingData</var>’s <code class="idl"><a data-link-type="idl" href="#dom-fakexrdepthsensingdatainit-depthdata" id="ref-for-dom-fakexrdepthsensingdatainit-depthdata②">depthData</a></code> is <code>null</code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>Set <var>device</var>’s <a data-link-type="dfn" href="#fakexrdevice-depth-sensing-data" id="ref-for-fakexrdevice-depth-sensing-data">depth sensing data</a> to <var>depthSensingData</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="clear-depth-sensing-information">
    <p>When the <code class="idl"><a data-link-type="idl" href="#dom-fakexrdevice-cleardepthsensingdata" id="ref-for-dom-fakexrdevice-cleardepthsensingdata">clearDepthSensingData()</a></code> method is invoked on <code class="idl"><a data-link-type="idl" href="#fakexrdevice" id="ref-for-fakexrdevice①⑤">FakeXRDevice</a></code> <var>device</var>, run the following steps:</p>
    <ol>
     <li data-md>
      <p>Set <var>device</var>’s <a data-link-type="dfn" href="#fakexrdevice-depth-sensing-data" id="ref-for-fakexrdevice-depth-sensing-data①">depth sensing data</a> to <code>null</code>.</p>
    </ol>
   </div>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <wpt open title="Tests relating to the content of this specification
                     may be documented in “Tests” blocks like this one.
                     Any such block is non-normative."></wpt>
   <section>
    <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span></h3>
    <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
    <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
   </section>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#fakexranchorcreationcallback-anchorcontroller">anchorController</a><span>, in § 8</span>
   <li><a href="#fakexrdevice-anchorcreationcallback">anchorCreationCallback</a><span>, in § 8</span>
   <li><a href="#fakexranchorcontroller-anchor-origin">anchor origin</a><span>, in § 8</span>
   <li><a href="#base-reference-space">base reference space</a><span>, in § 4.4</span>
   <li><a href="#dom-fakexrdeviceinit-boundscoordinates">boundsCoordinates</a><span>, in § 4.3</span>
   <li><a href="#simulated-xr-input-source-buttonstate">buttonState</a><span>, in § 3.2</span>
   <li><a href="#dom-fakexrbuttonstateinit-buttontype">buttonType</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrdevice-cleardepthsensingdata">clearDepthSensingData()</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdevice-clearfloororigin">clearFloorOrigin()</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrinputcontroller-cleargriporigin">clearGripOrigin()</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrdevice-clearviewerorigin">clearViewerOrigin()</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdevice-clearworld">clearWorld()</a><span>, in § 5.1</span>
   <li><a href="#simulated-xr-input-source-connectionstate">connectionState</a><span>, in § 3.2</span>
   <li><a href="#dom-fakexranchorcontroller-deleted">deleted</a><span>, in § 8</span>
   <li><a href="#dom-fakexrdepthsensingdatainit-depthdata">depthData</a><span>, in § 10</span>
   <li><a href="#fakexrdevice-depth-sensing-data">depth sensing data</a><span>, in § 10</span>
   <li><a href="#dom-fakexrdeviceinit-depthsensingdata">depthSensingData</a><span>, in § 4.3</span>
   <li><a href="#determine-if-the-anchor-creation-succeeded">determine if the anchor creation succeeded</a><span>, in § 8</span>
   <li><a href="#fakexrdevice-device">device</a><span>, in § 5.1</span>
   <li><a href="#view-device-resolution">device resolution</a><span>, in § 3.1</span>
   <li>
    disconnect()
    <ul>
     <li><a href="#dom-fakexrdevice-disconnect">method for FakeXRDevice</a><span>, in § 5.1</span>
     <li><a href="#dom-fakexrinputcontroller-disconnect">method for FakeXRInputController</a><span>, in § 5.2</span>
    </ul>
   <li><a href="#dom-xrtest-disconnectalldevices">disconnectAllDevices()</a><span>, in § 4.2</span>
   <li><a href="#dom-fakexrfieldofviewinit-downdegrees">downDegrees</a><span>, in § 4.3</span>
   <li><a href="#simulated-xr-device-emulated-position-boolean">emulated position boolean</a><span>, in § 3.1</span>
   <li><a href="#dom-fakexrinputcontroller-endselection">endSelection()</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrviewinit-eye">eye</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrregioninit-faces">faces</a><span>, in § 6</span>
   <li><a href="#fakexranchorcontroller">FakeXRAnchorController</a><span>, in § 8</span>
   <li><a href="#callbackdef-fakexranchorcreationcallback">FakeXRAnchorCreationCallback</a><span>, in § 8</span>
   <li><a href="#dictdef-fakexranchorcreationparameters">FakeXRAnchorCreationParameters</a><span>, in § 8</span>
   <li><a href="#dictdef-fakexrboundspoint">FakeXRBoundsPoint</a><span>, in § 4.3</span>
   <li><a href="#dictdef-fakexrbuttonstateinit">FakeXRButtonStateInit</a><span>, in § 5.2</span>
   <li><a href="#enumdef-fakexrbuttontype">FakeXRButtonType</a><span>, in § 5.2</span>
   <li><a href="#dictdef-fakexrdepthsensingdatainit">FakeXRDepthSensingDataInit</a><span>, in § 10</span>
   <li><a href="#fakexrdevice">FakeXRDevice</a><span>, in § 5.1</span>
   <li><a href="#dictdef-fakexrdeviceinit">FakeXRDeviceInit</a><span>, in § 4.3</span>
   <li><a href="#dictdef-fakexrdeviceresolution">FakeXRDeviceResolution</a><span>, in § 4.3</span>
   <li><a href="#dictdef-fakexrfieldofviewinit">FakeXRFieldOfViewInit</a><span>, in § 4.3</span>
   <li><a href="#fakexrinputcontroller">FakeXRInputController</a><span>, in § 5.2</span>
   <li><a href="#dictdef-fakexrinputsourceinit">FakeXRInputSourceInit</a><span>, in § 5.2</span>
   <li><a href="#dictdef-fakexrlightestimateinit">FakeXRLightEstimateInit</a><span>, in § 9</span>
   <li><a href="#dictdef-fakexrregioninit">FakeXRRegionInit</a><span>, in § 6</span>
   <li><a href="#enumdef-fakexrregiontype">FakeXRRegionType</a><span>, in § 6</span>
   <li><a href="#dictdef-fakexrrigidtransforminit">FakeXRRigidTransformInit</a><span>, in § 4.3</span>
   <li><a href="#dictdef-fakexrtriangleinit">FakeXRTriangleInit</a><span>, in § 6</span>
   <li><a href="#dictdef-fakexrviewinit">FakeXRViewInit</a><span>, in § 4.3</span>
   <li><a href="#dictdef-fakexrworldinit">FakeXRWorldInit</a><span>, in § 6</span>
   <li><a href="#view-field-of-view">field of view</a><span>, in § 3.1</span>
   <li><a href="#dom-fakexrviewinit-fieldofview">fieldOfView</a><span>, in § 4.3</span>
   <li><a href="#simulated-xr-device-floor-origin">floor origin</a><span>, in § 3.1</span>
   <li><a href="#dom-fakexrdeviceinit-floororigin">floorOrigin</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrbuttontype-grip">"grip"</a><span>, in § 5.2</span>
   <li>
    gripOrigin
    <ul>
     <li><a href="#simulated-xr-input-source-griporigin">dfn for simulated XR input source</a><span>, in § 3.2</span>
     <li><a href="#dom-fakexrinputsourceinit-griporigin">dict-member for FakeXRInputSourceInit</a><span>, in § 5.2</span>
    </ul>
   <li>
    handedness
    <ul>
     <li><a href="#simulated-xr-input-source-handedness">dfn for simulated XR input source</a><span>, in § 3.2</span>
     <li><a href="#dom-fakexrinputsourceinit-handedness">dict-member for FakeXRInputSourceInit</a><span>, in § 5.2</span>
    </ul>
   <li>
    height
    <ul>
     <li><a href="#dom-fakexrdepthsensingdatainit-height">dict-member for FakeXRDepthSensingDataInit</a><span>, in § 10</span>
     <li><a href="#dom-fakexrdeviceresolution-height">dict-member for FakeXRDeviceResolution</a><span>, in § 4.3</span>
    </ul>
   <li><a href="#dom-fakexrworldinit-hittestregions">hitTestRegions</a><span>, in § 6</span>
   <li><a href="#fakexrinputcontroller-inputsource">inputSource</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexranchorcreationparameters-isattachedtoentity">isAttachedToEntity</a><span>, in § 8</span>
   <li><a href="#dom-fakexrfieldofviewinit-leftdegrees">leftDegrees</a><span>, in § 4.3</span>
   <li><a href="#fakexrdevice-light-estimate">light estimate</a><span>, in § 9</span>
   <li><a href="#dom-fakexrregiontype-mesh">"mesh"</a><span>, in § 6</span>
   <li><a href="#simulated-xr-device-native-bounds-geometry">native bounds geometry</a><span>, in § 3.1</span>
   <li><a href="#xrsession-next-animation-frame">next animation frame</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdepthsensingdatainit-normdepthbufferfromnormview">normDepthBufferFromNormView</a><span>, in § 10</span>
   <li><a href="#dom-fakexrbuttontype-optional-button">"optional-button"</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrbuttontype-optional-thumbstick">"optional-thumbstick"</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrrigidtransforminit-orientation">orientation</a><span>, in § 4.3</span>
   <li><a href="#parse-a-rigid-transform">parse a rigid transform</a><span>, in § 4.3</span>
   <li><a href="#parse-a-view">parse a view</a><span>, in § 4.3</span>
   <li><a href="#parse-supported-buttons">parse supported buttons</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexranchorcontroller-pausetracking">pauseTracking()</a><span>, in § 8</span>
   <li><a href="#dom-fakexrregiontype-plane">"plane"</a><span>, in § 6</span>
   <li><a href="#dom-fakexrregiontype-point">"point"</a><span>, in § 6</span>
   <li>
    pointerOrigin
    <ul>
     <li><a href="#simulated-xr-input-source-pointerorigin">dfn for simulated XR input source</a><span>, in § 3.2</span>
     <li><a href="#dom-fakexrinputsourceinit-pointerorigin">dict-member for FakeXRInputSourceInit</a><span>, in § 5.2</span>
    </ul>
   <li><a href="#dom-fakexrrigidtransforminit-position">position</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrbuttonstateinit-pressed">pressed</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrbuttonstateinit-pressedvalue">pressedValue</a><span>, in § 5.2</span>
   <li><a href="#simulated-xr-input-source-primaryactionstarted">primaryActionStarted</a><span>, in § 3.2</span>
   <li><a href="#dom-fakexrlightestimateinit-primarylightdirection">primaryLightDirection</a><span>, in § 9</span>
   <li><a href="#dom-fakexrlightestimateinit-primarylightintensity">primaryLightIntensity</a><span>, in § 9</span>
   <li>
    profiles
    <ul>
     <li><a href="#simulated-xr-input-source-profiles">dfn for simulated XR input source</a><span>, in § 3.2</span>
     <li><a href="#dom-fakexrinputsourceinit-profiles">dict-member for FakeXRInputSourceInit</a><span>, in § 5.2</span>
    </ul>
   <li><a href="#dom-fakexrviewinit-projectionmatrix">projectionMatrix</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrdepthsensingdatainit-rawvaluetometers">rawValueToMeters</a><span>, in § 10</span>
   <li><a href="#dom-fakexrinputcontroller-reconnect">reconnect()</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexranchorcreationparameters-requestedanchororigin">requestedAnchorOrigin</a><span>, in § 8</span>
   <li><a href="#dom-fakexrviewinit-resolution">resolution</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexranchorcontroller-resumetracking">resumeTracking()</a><span>, in § 8</span>
   <li><a href="#dom-fakexrfieldofviewinit-rightdegrees">rightDegrees</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrinputsourceinit-selectionclicked">selectionClicked</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrinputsourceinit-selectionstarted">selectionStarted</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrdevice-setanchorcreationcallback">setAnchorCreationCallback(callback)</a><span>, in § 8</span>
   <li><a href="#dom-fakexranchorcontroller-setanchororigin">setAnchorOrigin(anchorOrigin)</a><span>, in § 8</span>
   <li><a href="#dom-fakexrdevice-setboundsgeometry">setBoundsGeometry(boundsCoordinates)</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdevice-setdepthsensingdata">setDepthSensingData(depthSensingData)</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdevice-setfloororigin">setFloorOrigin(origin)</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrinputcontroller-setgriporigin">setGripOrigin(gripOrigin)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrinputcontroller-setgriporigin">setGripOrigin(gripOrigin, emulatedPosition)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrinputcontroller-sethandedness">setHandedness(handedness)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrdevice-setlightestimate">setLightEstimate(init)</a><span>, in § 9</span>
   <li><a href="#dom-fakexrinputcontroller-setoverlaypointerposition">setOverlayPointerPosition(x, y)</a><span>, in § 7</span>
   <li><a href="#dom-fakexrinputcontroller-setpointerorigin">setPointerOrigin(pointerOrigin)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrinputcontroller-setpointerorigin">setPointerOrigin(pointerOrigin, emulatedPosition)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrinputcontroller-setprofiles">setProfiles(profiles)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrinputcontroller-setsupportedbuttons">setSupportedButtons(supportedButtons)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrinputcontroller-settargetraymode">setTargetRayMode(targetRayMode)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrdevice-setviewerorigin">setViewerOrigin(origin)</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdevice-setviewerorigin">setViewerOrigin(origin, emulatedPosition)</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdevice-setviews">setViews(views)</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdevice-setworld">setWorld(world)</a><span>, in § 5.1</span>
   <li><a href="#simulate-a-full-primary-action">simulate a full primary action</a><span>, in § 5.2</span>
   <li><a href="#dom-xrtest-simulatedeviceconnection">simulateDeviceConnection(init)</a><span>, in § 4.2</span>
   <li><a href="#simulated-xr-device">simulated XR device</a><span>, in § 3.1</span>
   <li><a href="#simulated-xr-input-source">simulated XR input source</a><span>, in § 3.2</span>
   <li><a href="#dom-fakexrdevice-simulateinputsourceconnection">simulateInputSourceConnection(init)</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrdevice-simulateresetpose">simulateResetPose()</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrinputcontroller-simulateselect">simulateSelect()</a><span>, in § 5.2</span>
   <li><a href="#dom-xrtest-simulateuseractivation">simulateUserActivation(f)</a><span>, in § 4.2</span>
   <li><a href="#dom-fakexrdevice-simulatevisibilitychange">simulateVisibilityChange(state)</a><span>, in § 5.1</span>
   <li><a href="#dom-fakexrlightestimateinit-sphericalharmonicscoefficients">sphericalHarmonicsCoefficients</a><span>, in § 9</span>
   <li><a href="#start-a-primary-action">start a primary action</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrinputcontroller-startselection">startSelection()</a><span>, in § 5.2</span>
   <li><a href="#stop-a-primary-action">stop a primary action</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexranchorcontroller-stoptracking">stopTracking()</a><span>, in § 8</span>
   <li><a href="#dom-fakexrinputsourceinit-supportedbuttons">supportedButtons</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrdeviceinit-supportedfeatures">supportedFeatures</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrdeviceinit-supportedmodes">supportedModes</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrdeviceinit-supportsimmersive">supportsImmersive</a><span>, in § 4.3</span>
   <li>
    targetRayMode
    <ul>
     <li><a href="#simulated-xr-input-source-targetraymode">dfn for simulated XR input source</a><span>, in § 3.2</span>
     <li><a href="#dom-fakexrinputsourceinit-targetraymode">dict-member for FakeXRInputSourceInit</a><span>, in § 5.2</span>
    </ul>
   <li><a href="#dom-xrsystem-test">test</a><span>, in § 4.1</span>
   <li><a href="#dom-fakexrbuttontype-thumbstick">"thumbstick"</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrbuttonstateinit-touched">touched</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrbuttontype-touchpad">"touchpad"</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrregioninit-type">type</a><span>, in § 6</span>
   <li><a href="#dom-fakexrinputcontroller-updatebuttonstate">updateButtonState(buttonState)</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrfieldofviewinit-updegrees">upDegrees</a><span>, in § 4.3</span>
   <li><a href="#validate-a-button-state">validate a button state</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrtriangleinit-vertices">vertices</a><span>, in § 6</span>
   <li><a href="#simulated-xr-device-viewer-origin">viewer origin</a><span>, in § 3.1</span>
   <li><a href="#dom-fakexrdeviceinit-viewerorigin">viewerOrigin</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrviewinit-viewoffset">viewOffset</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrdeviceinit-views">views</a><span>, in § 4.3</span>
   <li><a href="#simulated-xr-device-visibility-state">visibility state</a><span>, in § 3.1</span>
   <li>
    width
    <ul>
     <li><a href="#dom-fakexrdepthsensingdatainit-width">dict-member for FakeXRDepthSensingDataInit</a><span>, in § 10</span>
     <li><a href="#dom-fakexrdeviceresolution-width">dict-member for FakeXRDeviceResolution</a><span>, in § 4.3</span>
    </ul>
   <li><a href="#dom-fakexrdeviceinit-world">world</a><span>, in § 4.3</span>
   <li><a href="#dom-fakexrboundspoint-x">x</a><span>, in § 4.3</span>
   <li><a href="#xrtest">XRTest</a><span>, in § 4.2</span>
   <li><a href="#dom-fakexrbuttonstateinit-xvalue">xValue</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrbuttonstateinit-yvalue">yValue</a><span>, in § 5.2</span>
   <li><a href="#dom-fakexrboundspoint-z">z</a><span>, in § 4.3</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GAMEPAD]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0c3a8579">xr-standard</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GEOMETRY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="289ee1c2">DOMPointInit</span>
     <li><span class="dfn-paneled" id="5cce610d">DOMPointReadOnly</span>
     <li><span class="dfn-paneled" id="0173c6c0">w</span>
     <li><span class="dfn-paneled" id="dae466b2">x</span>
     <li><span class="dfn-paneled" id="e097c631">y</span>
     <li><span class="dfn-paneled" id="a5b295b1">z</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="47fe679e">transient activation</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2f8afbfe">ArrayBuffer</span>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="ae46556f">Function</span>
     <li><span class="dfn-paneled" id="9eda9b58">NotFoundError</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="a5c91173">SameObject</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="dacde8b5">a new promise</span>
     <li><span class="dfn-paneled" id="6c6b1005">any</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="8c800cdf">double</span>
     <li><span class="dfn-paneled" id="eec1be2d">float</span>
     <li><span class="dfn-paneled" id="f8de33a3">long</span>
     <li><span class="dfn-paneled" id="750a2f08">react</span>
     <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="e97a9688">unsigned long</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b9124029">"local"</span>
     <li><span class="dfn-paneled" id="d36ad083">"visible"</span>
     <li><span class="dfn-paneled" id="6ad69c44">XRBoundedReferenceSpace</span>
     <li><span class="dfn-paneled" id="3e104f9e">XREye</span>
     <li><span class="dfn-paneled" id="d5b236d5">XRHandedness</span>
     <li><span class="dfn-paneled" id="ea90e02f">XRInputSource</span>
     <li><span class="dfn-paneled" id="9dfd38d6">XRPose</span>
     <li><span class="dfn-paneled" id="511280ad">XRRigidTransform</span>
     <li><span class="dfn-paneled" id="b23556e5">XRSession</span>
     <li><span class="dfn-paneled" id="7a6a64a7">XRSessionMode</span>
     <li><span class="dfn-paneled" id="8f974556">XRSystem</span>
     <li><span class="dfn-paneled" id="419f7c8c">XRTargetRayMode</span>
     <li><span class="dfn-paneled" id="14930f73">XRViewport</span>
     <li><span class="dfn-paneled" id="c1b7d4ab">XRVisibilityState</span>
     <li><span class="dfn-paneled" id="3099627f">constructor()</span>
     <li><span class="dfn-paneled" id="6f2bad18">depthFar</span>
     <li><span class="dfn-paneled" id="9ee4518a">depthNear</span>
     <li><span class="dfn-paneled" id="ffba969d">emulatedPosition</span>
     <li><span class="dfn-paneled" id="de78be73">gripSpace</span>
     <li><span class="dfn-paneled" id="efba0ad8">handedness</span>
     <li><span class="dfn-paneled" id="4bb10651">inputSources</span>
     <li><span class="dfn-paneled" id="dbe575a4">inputsourceschange</span>
     <li><span class="dfn-paneled" id="cb1c960a">oninputsourceschange</span>
     <li><span class="dfn-paneled" id="9ca937fb">onselect</span>
     <li><span class="dfn-paneled" id="67c0ed6e">onselectend</span>
     <li><span class="dfn-paneled" id="9e74733d">onvisibilitychange</span>
     <li><span class="dfn-paneled" id="969e973e">orientation</span>
     <li><span class="dfn-paneled" id="e31e5468">position</span>
     <li><span class="dfn-paneled" id="4dd97d27">profiles</span>
     <li><span class="dfn-paneled" id="1e258aaa">requestAnimationFrame(callback)</span>
     <li><span class="dfn-paneled" id="fb050ffc">targetRayMode</span>
     <li><span class="dfn-paneled" id="53ce93e0">targetRaySpace</span>
     <li><span class="dfn-paneled" id="d790ba5d">visibilityState</span>
     <li><span class="dfn-paneled" id="82af0c92">xr</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR ANCHORS MODULE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="33b916dd">delete()</span>
     <li><span class="dfn-paneled" id="f7497add">native origin</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR DEPTH SENSING MODULE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="fa29f3a9">create a CPU depth information instance</span>
     <li><span class="dfn-paneled" id="f67f5d12">create a GPU depth information instance</span>
     <li><span class="dfn-paneled" id="b9d15de0">depth coordinates transformation matrix</span>
     <li><span class="dfn-paneled" id="fb771a1f">native depth sensing</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR LIGHTING ESTIMATION]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="06b23bbd">XRLightEstimate</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR-DOM-OVERLAYS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="bcc5c3c2">beforexrselect</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR-GAMEPADS-MODULE-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="655a3368">gamepad</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-gamepad">[GAMEPAD]
   <dd>Steve Agoston; Matthew Reynolds. <a href="https://w3c.github.io/gamepad/"><cite>Gamepad</cite></a>. URL: <a href="https://w3c.github.io/gamepad/">https://w3c.github.io/gamepad/</a>
   <dt id="biblio-geometry-1">[GEOMETRY-1]
   <dd>Simon Pieters; Chris Harrelson. <a href="https://drafts.fxtf.org/geometry/"><cite>Geometry Interfaces Module Level 1</cite></a>. URL: <a href="https://drafts.fxtf.org/geometry/">https://drafts.fxtf.org/geometry/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
   <dt id="biblio-webxr">[WEBXR]
   <dd>Brandon Jones; Manish Goregaokar; Rik Cabanier. <a href="https://immersive-web.github.io/webxr/"><cite>WebXR Device API</cite></a>. URL: <a href="https://immersive-web.github.io/webxr/">https://immersive-web.github.io/webxr/</a>
   <dt id="biblio-webxr-gamepads-module-1">[WEBXR-GAMEPADS-MODULE-1]
   <dd>Brandon Jones; Manish Goregaokar; Rik Cabanier. <a href="https://immersive-web.github.io/webxr-gamepads-module/"><cite>WebXR Gamepads Module - Level 1</cite></a>. URL: <a href="https://immersive-web.github.io/webxr-gamepads-module/">https://immersive-web.github.io/webxr-gamepads-module/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://immersive-web.github.io/webxr/#xrsystem"><c- g>XRSystem</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#xrtest"><c- n>XRTest</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="XRTest" href="#dom-xrsystem-test"><c- g>test</c-></a>;
};

<c- b>interface</c-> <a href="#xrtest"><code><c- g>XRTest</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#fakexrdevice"><c- n>FakeXRDevice</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-xrtest-simulatedeviceconnection"><c- g>simulateDeviceConnection</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrdeviceinit"><c- n>FakeXRDeviceInit</c-></a> <a href="#dom-xrtest-simulatedeviceconnection-init-init"><code><c- g>init</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-xrtest-simulateuseractivation"><c- g>simulateUserActivation</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#Function"><c- n>Function</c-></a> <a href="#dom-xrtest-simulateuseractivation-f-f"><code><c- g>f</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name"><c- n>void</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-xrtest-disconnectalldevices"><c- g>disconnectAllDevices</c-></a>();
};

<c- b>dictionary</c-> <a href="#dictdef-fakexrdeviceinit"><code><c- g>FakeXRDeviceInit</c-></code></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-fakexrdeviceinit-supportsimmersive"><code><c- g>supportsImmersive</c-></code></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrsessionmode"><c- n>XRSessionMode</c-></a>> <a data-type="sequence<XRSessionMode>" href="#dom-fakexrdeviceinit-supportedmodes"><code><c- g>supportedModes</c-></code></a>;
    <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrviewinit"><c- n>FakeXRViewInit</c-></a>> <a data-type="sequence<FakeXRViewInit>" href="#dom-fakexrdeviceinit-views"><code><c- g>views</c-></code></a>;

    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a data-type="sequence<any>" href="#dom-fakexrdeviceinit-supportedfeatures"><code><c- g>supportedFeatures</c-></code></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrboundspoint"><c- n>FakeXRBoundsPoint</c-></a>> <a data-type="sequence<FakeXRBoundsPoint>" href="#dom-fakexrdeviceinit-boundscoordinates"><code><c- g>boundsCoordinates</c-></code></a>;
    <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a data-type="FakeXRRigidTransformInit" href="#dom-fakexrdeviceinit-floororigin"><code><c- g>floorOrigin</c-></code></a>;
    <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a data-type="FakeXRRigidTransformInit" href="#dom-fakexrdeviceinit-viewerorigin"><code><c- g>viewerOrigin</c-></code></a>;

    // Hit test extensions:
    <a data-link-type="idl-name" href="#dictdef-fakexrworldinit"><c- n>FakeXRWorldInit</c-></a> <a data-type="FakeXRWorldInit" href="#dom-fakexrdeviceinit-world"><code><c- g>world</c-></code></a>;

    // Depth sensing extensions:
    <a data-link-type="idl-name" href="#dictdef-fakexrdepthsensingdatainit"><c- n>FakeXRDepthSensingDataInit</c-></a> <a data-type="FakeXRDepthSensingDataInit" href="#dom-fakexrdeviceinit-depthsensingdata"><code><c- g>depthSensingData</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-fakexrviewinit"><code><c- g>FakeXRViewInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xreye"><c- n>XREye</c-></a> <a data-type="XREye" href="#dom-fakexrviewinit-eye"><code><c- g>eye</c-></code></a>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a>> <a data-type="sequence<float>" href="#dom-fakexrviewinit-projectionmatrix"><code><c- g>projectionMatrix</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-fakexrdeviceresolution"><c- n>FakeXRDeviceResolution</c-></a> <a data-type="FakeXRDeviceResolution" href="#dom-fakexrviewinit-resolution"><code><c- g>resolution</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a data-type="FakeXRRigidTransformInit" href="#dom-fakexrviewinit-viewoffset"><code><c- g>viewOffset</c-></code></a>;
  <a data-link-type="idl-name" href="#dictdef-fakexrfieldofviewinit"><c- n>FakeXRFieldOfViewInit</c-></a> <a data-type="FakeXRFieldOfViewInit" href="#dom-fakexrviewinit-fieldofview"><code><c- g>fieldOfView</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-fakexrfieldofviewinit"><code><c- g>FakeXRFieldOfViewInit</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-type="float" href="#dom-fakexrfieldofviewinit-updegrees"><code><c- g>upDegrees</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-type="float" href="#dom-fakexrfieldofviewinit-downdegrees"><code><c- g>downDegrees</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-type="float" href="#dom-fakexrfieldofviewinit-leftdegrees"><code><c- g>leftDegrees</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-type="float" href="#dom-fakexrfieldofviewinit-rightdegrees"><code><c- g>rightDegrees</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-fakexrdeviceresolution"><code><c- g>FakeXRDeviceResolution</c-></code></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a> <a data-type="long" href="#dom-fakexrdeviceresolution-width"><code><c- g>width</c-></code></a>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a> <a data-type="long" href="#dom-fakexrdeviceresolution-height"><code><c- g>height</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-fakexrboundspoint"><code><c- g>FakeXRBoundsPoint</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-type="double" href="#dom-fakexrboundspoint-x"><code><c- g>x</c-></code></a>; <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-type="double" href="#dom-fakexrboundspoint-z"><code><c- g>z</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-fakexrrigidtransforminit"><code><c- g>FakeXRRigidTransformInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a>> <a data-type="sequence<float>" href="#dom-fakexrrigidtransforminit-position"><code><c- g>position</c-></code></a>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a>> <a data-type="sequence<float>" href="#dom-fakexrrigidtransforminit-orientation"><code><c- g>orientation</c-></code></a>;
};


<c- b>interface</c-> <a href="#fakexrdevice"><code><c- g>FakeXRDevice</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setviews"><c- g>setViews</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrviewinit"><c- n>FakeXRViewInit</c-></a>> <a href="#dom-fakexrdevice-setviews-views-views"><code><c- g>views</c-></code></a>);

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name"><c- n>void</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-disconnect"><c- g>disconnect</c-></a>();

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setviewerorigin"><c- g>setViewerOrigin</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a href="#dom-fakexrdevice-setviewerorigin-origin-emulatedposition-origin"><code><c- g>origin</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-fakexrdevice-setviewerorigin-origin-emulatedposition-emulatedposition"><code><c- g>emulatedPosition</c-></code></a> = <c- b>false</c->);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-clearviewerorigin"><c- g>clearViewerOrigin</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setfloororigin"><c- g>setFloorOrigin</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a href="#dom-fakexrdevice-setfloororigin-origin-origin"><code><c- g>origin</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-clearfloororigin"><c- g>clearFloorOrigin</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setboundsgeometry"><c- g>setBoundsGeometry</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrboundspoint"><c- n>FakeXRBoundsPoint</c-></a>> <a href="#dom-fakexrdevice-setboundsgeometry-boundscoordinates-boundscoordinates"><code><c- g>boundsCoordinates</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-simulateresetpose"><c- g>simulateResetPose</c-></a>();

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-simulatevisibilitychange"><c- g>simulateVisibilityChange</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrvisibilitystate"><c- n>XRVisibilityState</c-></a> <a href="#dom-fakexrdevice-simulatevisibilitychange-state-state"><code><c- g>state</c-></code></a>);

  <a data-link-type="idl-name" href="#fakexrinputcontroller"><c- n>FakeXRInputController</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-simulateinputsourceconnection"><c- g>simulateInputSourceConnection</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrinputsourceinit"><c- n>FakeXRInputSourceInit</c-></a> <a href="#dom-fakexrdevice-simulateinputsourceconnection-init-init"><code><c- g>init</c-></code></a>);

  // Hit test extensions:
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexrdevice-setworld"><code><c- g>setWorld</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-fakexrworldinit"><c- n>FakeXRWorldInit</c-></a> <a href="#dom-fakexrdevice-setworld-world-world"><code><c- g>world</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexrdevice-clearworld"><code><c- g>clearWorld</c-></code></a>();

  // Depth sensing extensions:
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexrdevice-setdepthsensingdata"><code><c- g>setDepthSensingData</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-fakexrdepthsensingdatainit"><c- n>FakeXRDepthSensingDataInit</c-></a> <a href="#dom-fakexrdevice-setdepthsensingdata-depthsensingdata-depthsensingdata"><code><c- g>depthSensingData</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexrdevice-cleardepthsensingdata"><code><c- g>clearDepthSensingData</c-></code></a>();
};


<c- b>dictionary</c-> <a href="#dictdef-fakexrinputsourceinit"><code><c- g>FakeXRInputSourceInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrhandedness"><c- n>XRHandedness</c-></a> <a data-type="XRHandedness" href="#dom-fakexrinputsourceinit-handedness"><code><c- g>handedness</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrtargetraymode"><c- n>XRTargetRayMode</c-></a> <a data-type="XRTargetRayMode" href="#dom-fakexrinputsourceinit-targetraymode"><code><c- g>targetRayMode</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a data-type="FakeXRRigidTransformInit" href="#dom-fakexrinputsourceinit-pointerorigin"><code><c- g>pointerOrigin</c-></code></a>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString>" href="#dom-fakexrinputsourceinit-profiles"><code><c- g>profiles</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-fakexrinputsourceinit-selectionstarted"><code><c- g>selectionStarted</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-fakexrinputsourceinit-selectionclicked"><code><c- g>selectionClicked</c-></code></a> = <c- b>false</c->;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrbuttonstateinit"><c- n>FakeXRButtonStateInit</c-></a>> <a data-type="sequence<FakeXRButtonStateInit>" href="#dom-fakexrinputsourceinit-supportedbuttons"><code><c- g>supportedButtons</c-></code></a>;
  <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a data-type="FakeXRRigidTransformInit" href="#dom-fakexrinputsourceinit-griporigin"><code><c- g>gripOrigin</c-></code></a>;
};

<c- b>interface</c-> <a href="#fakexrinputcontroller"><code><c- g>FakeXRInputController</c-></code></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-sethandedness"><c- g>setHandedness</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrhandedness"><c- n>XRHandedness</c-></a> <a href="#dom-fakexrinputcontroller-sethandedness-handedness-handedness"><code><c- g>handedness</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-settargetraymode"><c- g>setTargetRayMode</c-></a>(<a data-link-type="idl-name" href="https://immersive-web.github.io/webxr/#enumdef-xrtargetraymode"><c- n>XRTargetRayMode</c-></a> <a href="#dom-fakexrinputcontroller-settargetraymode-targetraymode-targetraymode"><code><c- g>targetRayMode</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setprofiles"><c- g>setProfiles</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a href="#dom-fakexrinputcontroller-setprofiles-profiles-profiles"><code><c- g>profiles</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setgriporigin"><c- g>setGripOrigin</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a href="#dom-fakexrinputcontroller-setgriporigin-griporigin-emulatedposition-griporigin"><code><c- g>gripOrigin</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-fakexrinputcontroller-setgriporigin-griporigin-emulatedposition-emulatedposition"><code><c- g>emulatedPosition</c-></code></a> = <c- b>false</c->);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-cleargriporigin"><c- g>clearGripOrigin</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setpointerorigin"><c- g>setPointerOrigin</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a href="#dom-fakexrinputcontroller-setpointerorigin-pointerorigin-emulatedposition-pointerorigin"><code><c- g>pointerOrigin</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-fakexrinputcontroller-setpointerorigin-pointerorigin-emulatedposition-emulatedposition"><code><c- g>emulatedPosition</c-></code></a> = <c- b>false</c->);

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-disconnect"><c- g>disconnect</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-reconnect"><c- g>reconnect</c-></a>();

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-startselection"><c- g>startSelection</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-endselection"><c- g>endSelection</c-></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-simulateselect"><c- g>simulateSelect</c-></a>();

  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setsupportedbuttons"><c- g>setSupportedButtons</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrbuttonstateinit"><c- n>FakeXRButtonStateInit</c-></a>> <a href="#dom-fakexrinputcontroller-setsupportedbuttons-supportedbuttons-supportedbuttons"><code><c- g>supportedButtons</c-></code></a>);
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-updatebuttonstate"><c- g>updateButtonState</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrbuttonstateinit"><c- n>FakeXRButtonStateInit</c-></a> <a href="#dom-fakexrinputcontroller-updatebuttonstate-buttonstate-buttonstate"><code><c- g>buttonState</c-></code></a>);
};

<c- b>enum</c-> <a href="#enumdef-fakexrbuttontype"><code><c- g>FakeXRButtonType</c-></code></a> {
  <a href="#dom-fakexrbuttontype-grip"><code><c- s>"grip"</c-></code></a>,
  <a href="#dom-fakexrbuttontype-touchpad"><code><c- s>"touchpad"</c-></code></a>,
  <a href="#dom-fakexrbuttontype-thumbstick"><code><c- s>"thumbstick"</c-></code></a>,
  <a href="#dom-fakexrbuttontype-optional-button"><code><c- s>"optional-button"</c-></code></a>,
  <a href="#dom-fakexrbuttontype-optional-thumbstick"><code><c- s>"optional-thumbstick"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-fakexrbuttonstateinit"><code><c- g>FakeXRButtonStateInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-fakexrbuttontype"><c- n>FakeXRButtonType</c-></a> <a data-type="FakeXRButtonType" href="#dom-fakexrbuttonstateinit-buttontype"><code><c- g>buttonType</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-fakexrbuttonstateinit-pressed"><code><c- g>pressed</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-fakexrbuttonstateinit-touched"><code><c- g>touched</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-type="float" href="#dom-fakexrbuttonstateinit-pressedvalue"><code><c- g>pressedValue</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="0.0" data-type="float" href="#dom-fakexrbuttonstateinit-xvalue"><code><c- g>xValue</c-></code></a> = 0.0;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-default="0.0" data-type="float" href="#dom-fakexrbuttonstateinit-yvalue"><code><c- g>yValue</c-></code></a> = 0.0;
};

<c- b>dictionary</c-> <a href="#dictdef-fakexrworldinit"><code><c- g>FakeXRWorldInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrregioninit"><c- n>FakeXRRegionInit</c-></a>> <a data-type="sequence<FakeXRRegionInit>" href="#dom-fakexrworldinit-hittestregions"><code><c- g>hitTestRegions</c-></code></a>;
};


<c- b>dictionary</c-> <a href="#dictdef-fakexrregioninit"><code><c- g>FakeXRRegionInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-fakexrtriangleinit"><c- n>FakeXRTriangleInit</c-></a>> <a data-type="sequence<FakeXRTriangleInit>" href="#dom-fakexrregioninit-faces"><code><c- g>faces</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-fakexrregiontype"><c- n>FakeXRRegionType</c-></a> <a data-type="FakeXRRegionType" href="#dom-fakexrregioninit-type"><code><c- g>type</c-></code></a>;
};


<c- b>dictionary</c-> <a href="#dictdef-fakexrtriangleinit"><code><c- g>FakeXRTriangleInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit"><c- n>DOMPointInit</c-></a>> <a data-type="sequence<DOMPointInit>" href="#dom-fakexrtriangleinit-vertices"><code><c- g>vertices</c-></code></a>;  // size = 3
};


<c- b>enum</c-> <a href="#enumdef-fakexrregiontype"><code><c- g>FakeXRRegionType</c-></code></a> {
  <a href="#dom-fakexrregiontype-point"><code><c- s>"point"</c-></code></a>,
  <a href="#dom-fakexrregiontype-plane"><code><c- s>"plane"</c-></code></a>,
  <a href="#dom-fakexrregiontype-mesh"><code><c- s>"mesh"</c-></code></a>
};


<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#fakexrinputcontroller"><c- g>FakeXRInputController</c-></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrinputcontroller-setoverlaypointerposition"><c- g>setOverlayPointerPosition</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a href="#dom-fakexrinputcontroller-setoverlaypointerposition-x-y-x"><code><c- g>x</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a href="#dom-fakexrinputcontroller-setoverlaypointerposition-x-y-y"><code><c- g>y</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-fakexranchorcreationparameters"><code><c- g>FakeXRAnchorCreationParameters</c-></code></a> {
  <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a data-type="FakeXRRigidTransformInit" href="#dom-fakexranchorcreationparameters-requestedanchororigin"><code><c- g>requestedAnchorOrigin</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-fakexranchorcreationparameters-isattachedtoentity"><code><c- g>isAttachedToEntity</c-></code></a>;
};

<c- b>callback</c-> <a href="#callbackdef-fakexranchorcreationcallback"><code><c- g>FakeXRAnchorCreationCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> (<a data-link-type="idl-name" href="#dictdef-fakexranchorcreationparameters"><c- n>FakeXRAnchorCreationParameters</c-></a> <a href="#dom-fakexranchorcreationcallback-parameters"><code><c- g>parameters</c-></code></a>, <a data-link-type="idl-name" href="#fakexranchorcontroller"><c- n>FakeXRAnchorController</c-></a> <a href="#dom-fakexranchorcreationcallback-anchorcontroller"><code><c- g>anchorController</c-></code></a>);

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#fakexrdevice"><c- g>FakeXRDevice</c-></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexrdevice-setanchorcreationcallback"><code><c- g>setAnchorCreationCallback</c-></code></a>(<a data-link-type="idl-name" href="#callbackdef-fakexranchorcreationcallback"><c- n>FakeXRAnchorCreationCallback</c-></a>? <a href="#dom-fakexrdevice-setanchorcreationcallback-callback-callback"><code><c- g>callback</c-></code></a>);
};


<c- b>interface</c-> <a href="#fakexranchorcontroller"><code><c- g>FakeXRAnchorController</c-></code></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-readonly data-type="boolean" href="#dom-fakexranchorcontroller-deleted"><code><c- g>deleted</c-></code></a>;

  // Controlling anchor state:
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexranchorcontroller-pausetracking"><code><c- g>pauseTracking</c-></code></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexranchorcontroller-resumetracking"><code><c- g>resumeTracking</c-></code></a>();
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexranchorcontroller-stoptracking"><code><c- g>stopTracking</c-></code></a>();

  // Controlling anchor location:
  <a data-link-type="idl-name"><c- n>void</c-></a> <a href="#dom-fakexranchorcontroller-setanchororigin"><code><c- g>setAnchorOrigin</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a href="#dom-fakexranchorcontroller-setanchororigin-anchororigin-anchororigin"><code><c- g>anchorOrigin</c-></code></a>);
};


<c- b>dictionary</c-> <a href="#dictdef-fakexrlightestimateinit"><code><c- g>FakeXRLightEstimateInit</c-></code></a> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a>> <a data-type="sequence<float>" href="#dom-fakexrlightestimateinit-sphericalharmonicscoefficients"><code><c- g>sphericalHarmonicsCoefficients</c-></code></a>;
  <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit"><c- n>DOMPointInit</c-></a> <a data-type="DOMPointInit" href="#dom-fakexrlightestimateinit-primarylightdirection"><code><c- g>primaryLightDirection</c-></code></a>;
  <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#dictdef-dompointinit"><c- n>DOMPointInit</c-></a> <a data-type="DOMPointInit" href="#dom-fakexrlightestimateinit-primarylightintensity"><code><c- g>primaryLightIntensity</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#fakexrdevice"><c- g>FakeXRDevice</c-></a> {
  <a data-link-type="idl-name"><c- n>void</c-></a> <a class="idl-code" data-link-type="method" href="#dom-fakexrdevice-setlightestimate"><c- g>setLightEstimate</c-></a>(<a data-link-type="idl-name" href="#dictdef-fakexrlightestimateinit"><c- n>FakeXRLightEstimateInit</c-></a> <a href="#dom-fakexrdevice-setlightestimate-init-init"><code><c- g>init</c-></code></a>);
};


<c- b>dictionary</c-> <a href="#dictdef-fakexrdepthsensingdatainit"><code><c- g>FakeXRDepthSensingDataInit</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><c- b>ArrayBuffer</c-></a> <a data-type="ArrayBuffer" href="#dom-fakexrdepthsensingdatainit-depthdata"><code><c- g>depthData</c-></code></a>;
  <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-fakexrrigidtransforminit"><c- n>FakeXRRigidTransformInit</c-></a> <a data-type="FakeXRRigidTransformInit" href="#dom-fakexrdepthsensingdatainit-normdepthbufferfromnormview"><code><c- g>normDepthBufferFromNormView</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-float"><c- b>float</c-></a> <a data-type="float" href="#dom-fakexrdepthsensingdatainit-rawvaluetometers"><code><c- g>rawValueToMeters</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long" href="#dom-fakexrdepthsensingdatainit-width"><code><c- g>width</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long" href="#dom-fakexrdepthsensingdatainit-height"><code><c- g>height</c-></code></a>;
};


</pre>