<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>File System Access</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <link href="https://wicg.github.io/file-system-access/" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
.domintro dt {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;

    padding-top: 0.5em;
    padding-bottom: 1em;
}
.domintro dt a {
    color: inherit; border-bottom-style: none;
}
.domintro dt code {
    font-size: inherit;
}
.domintro::before {
    content: 'For web developers (non-normative)';
    text-transform: initial;

}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">File System Access</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/file-system-access/">https://wicg.github.io/file-system-access/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="72440"><a class="p-name fn u-email email" href="mailto:mek@chromium.org">Marijn Kruisselbrink</a> (<span class="p-org org">Google</span>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 1970 the Contributors to the File System Access Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document defines a web platform API that enables developers to build
powerful web apps that interact with files on the user’s local device.
It builds on <a data-link-type="biblio" href="#biblio-file-api" title="File API">File API</a> for file reading capabilities, and adds new API
surface to enable modifying files, as well as working with directories.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#files-and-directories"><span class="secno">2</span> <span class="content">Files and Directories</span></a>
     <ol class="toc">
      <li><a href="#concepts"><span class="secno">2.1</span> <span class="content">Concepts</span></a>
      <li><a href="#permissions"><span class="secno">2.2</span> <span class="content">Permissions</span></a>
      <li>
       <a href="#api-filesystemhandle"><span class="secno">2.3</span> <span class="content">The <code class="idl"><span>FileSystemHandle</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemhandle-issameentry"><span class="secno">2.3.1</span> <span class="content">The <code class="idl"><span>isSameEntry()</span></code> method</span></a>
        <li><a href="#api-filesystemhandle-querypermission"><span class="secno">2.3.2</span> <span class="content">The <code class="idl"><span>queryPermission()</span></code> method</span></a>
        <li><a href="#api-filesystemhandle-requestpermission"><span class="secno">2.3.3</span> <span class="content">The <code class="idl"><span>requestPermission()</span></code> method</span></a>
       </ol>
      <li>
       <a href="#api-filesystemfilehandle"><span class="secno">2.4</span> <span class="content">The <code class="idl"><span>FileSystemFileHandle</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemfilehandle-getfile"><span class="secno">2.4.1</span> <span class="content">The <code class="idl"><span>getFile()</span></code> method</span></a>
        <li><a href="#api-filesystemfilehandle-createwritable"><span class="secno">2.4.2</span> <span class="content">The <code class="idl"><span>createWritable()</span></code> method</span></a>
       </ol>
      <li>
       <a href="#api-filesystemdirectoryhandle"><span class="secno">2.5</span> <span class="content">The <code class="idl"><span>FileSystemDirectoryHandle</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemdirectoryhandle-asynciterable"><span class="secno">2.5.1</span> <span class="content">Directory iteration</span></a>
        <li><a href="#api-filesystemdirectoryhandle-getfilehandle"><span class="secno">2.5.2</span> <span class="content">The <code class="idl"><span>getFileHandle()</span></code> method</span></a>
        <li><a href="#api-filesystemdirectoryhandle-getdirectoryhandle"><span class="secno">2.5.3</span> <span class="content">The <code class="idl"><span>getDirectoryHandle()</span></code> method</span></a>
        <li><a href="#api-filesystemdirectoryhandle-removeentry"><span class="secno">2.5.4</span> <span class="content">The <code class="idl"><span>removeEntry()</span></code> method</span></a>
        <li><a href="#api-filesystemdirectoryhandle-resolve"><span class="secno">2.5.5</span> <span class="content">The <code class="idl"><span>resolve()</span></code> method</span></a>
       </ol>
      <li>
       <a href="#api-filesystemwritablefilestream"><span class="secno">2.6</span> <span class="content">The <code class="idl"><span>FileSystemWritableFileStream</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemwritablefilestream-write"><span class="secno">2.6.1</span> <span class="content">The <code class="idl"><span>write()</span></code> method</span></a>
        <li><a href="#api-filesystemwritablefilestream-seek"><span class="secno">2.6.2</span> <span class="content">The <code class="idl"><span>seek()</span></code> method</span></a>
        <li><a href="#api-filesystemwritablefilestream-truncate"><span class="secno">2.6.3</span> <span class="content">The <code class="idl"><span>truncate()</span></code> method</span></a>
       </ol>
     </ol>
    <li>
     <a href="#local-filesystem"><span class="secno">3</span> <span class="content">Accessing Local File System</span></a>
     <ol class="toc">
      <li><a href="#local-file-system-permissions"><span class="secno">3.1</span> <span class="content">Local File System Permissions</span></a>
      <li><a href="#api-showopenfilepicker"><span class="secno">3.2</span> <span class="content">The <code class="idl"><span>showOpenFilePicker()</span></code> method</span></a>
      <li><a href="#api-showsavefilepicker"><span class="secno">3.3</span> <span class="content">The <code class="idl"><span>showSaveFilePicker()</span></code> method</span></a>
      <li><a href="#api-filpickeroptions-types"><span class="secno">3.4</span> <span class="content"><code class="idl"><span>FilePickerOptions</span></code>.<code class="idl"><span>types</span></code></span></a>
      <li><a href="#api-showdirectorypicker"><span class="secno">3.5</span> <span class="content">The <code class="idl"><span>showDirectoryPicker()</span></code> method</span></a>
      <li><a href="#drag-and-drop"><span class="secno">3.6</span> <span class="content">Drag and Drop</span></a>
     </ol>
    <li><a href="#sandboxed-filesystem"><span class="secno">4</span> <span class="content">Accessing the Origin Private File System</span></a>
    <li><a href="#accessibility-considerations"><span class="secno">5</span> <span class="content">Accessibility Considerations</span></a>
    <li>
     <a href="#privacy-considerations"><span class="secno">6</span> <span class="content">Privacy Considerations</span></a>
     <ol class="toc">
      <li><a href="#privacy-wide-access"><span class="secno">6.1</span> <span class="content">Users giving access to more, or more sensitive files than they intended.</span></a>
      <li><a href="#privacy-tracking"><span class="secno">6.2</span> <span class="content">Websites trying to use this API for tracking.</span></a>
      <li><a href="#privacy-third-party"><span class="secno">6.3</span> <span class="content">First-party vs third-party contexts.</span></a>
     </ol>
    <li>
     <a href="#security-considerations"><span class="secno">7</span> <span class="content">Security Considerations</span></a>
     <ol class="toc">
      <li><a href="#security-malware"><span class="secno">7.1</span> <span class="content">Malware</span></a>
      <li><a href="#security-ransomware"><span class="secno">7.2</span> <span class="content">Ransomware attacks</span></a>
      <li><a href="#filling-up-disk"><span class="secno">7.3</span> <span class="content">Filling up a users disk</span></a>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>This API enables developers to build powerful apps that interact with other
(non-Web) apps on the user’s device via the device’s file system. Prominent
examples of applications where users expect this functionality are IDEs,
photo and video editors, text editors, and more.
After a user grants a web app access, this API allows the app to read or save
changes directly to files and folders on the user’s device. Beyond reading and
writing files, this API provides the ability to open a directory and enumerate
its contents. Additionally, web apps can use this API to store references to
files and directories they’ve been given access to, allowing the web apps to
later regain access to the same content without requiring the user to select the
same file again.</p>
   <p>This API is similar to <a href="https://html.spec.whatwg.org/multipage/input.html#file-upload-state-(type=file)"><code>&lt;input type=file></code></a> and <a href="https://wicg.github.io/entries-api/#html-forms"><code>&lt;input type=file webkitdirectory></code></a> <a data-link-type="biblio" href="#biblio-entries-api" title="File and Directory Entries API">[entries-api]</a> in that user interaction happens through file and directory picker dialogs.
Unlike those APIs, this API is currently purely a javascript API, and
does not integrate with forms and/or input elements.</p>
   <p>Additionally this API also makes it possible for websites to get access to some
directory without having to first prompt the user for access. This enables use
cases where a website wants to save data to disk before a user has picked a
location to save to, without forcing the website to use a completely different
storage mechanism with a different API for such files. It also makes it easier
to write automated tests for code using this API. The entry point for this is the <code class="idl"><a data-link-type="idl" href="#dom-storagemanager-getdirectory" id="ref-for-dom-storagemanager-getdirectory">navigator.storage.getDirectory()</a></code> method. This
is similar to the temporary file system as defined in earlier drafts of <a data-link-type="biblio" href="#biblio-file-system-api" title="File API: Directories and System">File API: Directories and System</a>.</p>
   <h2 class="heading settled" data-level="2" id="files-and-directories"><span class="secno">2. </span><span class="content">Files and Directories</span><a class="self-link" href="#files-and-directories"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="concepts"><span class="secno">2.1. </span><span class="content">Concepts</span><a class="self-link" href="#concepts"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="entry">entry</dfn> is either a <a data-link-type="dfn" href="#file" id="ref-for-file">file entry</a> or a <a data-link-type="dfn" href="#directory" id="ref-for-directory">directory entry</a>.</p>
   <p>Each <a data-link-type="dfn" href="#entry" id="ref-for-entry">entry</a> has an associated <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-name">name</dfn> (a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a>).</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="valid-file-name">valid file name</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a> that is not an empty string, is not equal to "." or "..",
and does not contain '/' or any other character used as path separator on the underlying platform.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This means that '\' is not allowed in names on Windows, but might be allowed on
other operating systems. Additionally underlying file systems might have further restrictions
on what names are or aren’t allowed, so a string merely being a <a data-link-type="dfn" href="#valid-file-name" id="ref-for-valid-file-name">valid file name</a> is not
a guarantee that creating a file or directory with that name will succeed.</p>
   <p class="issue" id="issue-58d5d75b"><a class="self-link" href="#issue-58d5d75b"></a> We should consider having further normative restrictions on file names that will
never be allowed using this API, rather than leaving it entirely up to underlying file
systems.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="valid-suffix-code-point">valid suffix code point</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point">code point</a> that is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alphanumeric" id="ref-for-ascii-alphanumeric">ASCII alphanumeric</a>,
U+002B (+), or U+002E (.).</p>
   <p class="note" role="note"><span class="marker">Note:</span> These code points were chosen to support most pre-existing file formats. The vast
majority of file extensions are purely alphanumeric, but compound extensions (such as <code>.tar.gz</code>) and extensions such as <code>.c++</code> for C++ source code are also fairly common,
hence the inclusion of + and . as allowed code points.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="file|file entry" data-noexport id="file">file entry</dfn> additionally consists of <dfn class="dfn-paneled" data-dfn-for="file entry" data-dfn-type="dfn" data-noexport id="file-entry-binary-data">binary data</dfn> (a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence">byte sequence</a>) and a <dfn class="dfn-paneled" data-dfn-for="file entry" data-dfn-type="dfn" data-noexport id="file-entry-modification-timestamp">modification timestamp</dfn> (a number representing the number of milliseconds since the <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#UnixEpoch" id="ref-for-UnixEpoch">Unix Epoch</a>).</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="directory|directory entry" data-noexport id="directory">directory entry</dfn> additionally consists of a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">set</a> of <dfn class="dfn-paneled" data-dfn-for="directory entry" data-dfn-type="dfn" data-noexport id="directory-entry-children">children</dfn>, which are themselves <a data-link-type="dfn" href="#entry" id="ref-for-entry①">entries</a>. Each member is either a <a data-link-type="dfn" href="#file" id="ref-for-file①">file</a> or a <a data-link-type="dfn" href="#directory" id="ref-for-directory①">directory</a>.</p>
   <p>An <a data-link-type="dfn" href="#entry" id="ref-for-entry②">entry</a> <var>entry</var> should be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contained</a> in the <a data-link-type="dfn">children</a> of at most one <a data-link-type="dfn" href="#directory" id="ref-for-directory②">directory entry</a>, and that directory entry is also known as <var>entry</var>’s <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-parent">parent</dfn>.
An <a data-link-type="dfn" href="#entry" id="ref-for-entry③">entry</a>'s <a data-link-type="dfn" href="#entry-parent" id="ref-for-entry-parent">parent</a> is null if no such directory entry exists.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Two different <a data-link-type="dfn" href="#entry" id="ref-for-entry④">entries</a> can represent the same file or directory on disk, in which
case it is possible for both entries to have a different parent, or for one entry to have a
parent while the other entry does not have a parent. Typically an entry does not have a parent
if it was returned by <code class="idl"><a data-link-type="idl" href="#dom-storagemanager-getdirectory" id="ref-for-dom-storagemanager-getdirectory①">navigator.storage.getDirectory()</a></code> or one of the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories">local file system handle factories</a>,
and an entry will have a parent in all other cases.</p>
   <p><a data-link-type="dfn" href="#entry" id="ref-for-entry⑤">Entries</a> can (but don’t have to) be backed by files on the host operating system’s local file system,
so it is possible for the <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data">binary data</a>, <a data-link-type="dfn" href="#file-entry-modification-timestamp" id="ref-for-file-entry-modification-timestamp">modification timestamp</a>,
and <a data-link-type="dfn">children</a> of entries to be modified by applications outside of this specification.
Exactly how external changes are reflected in the data structures defined by this specification,
as well as how changes made to the data structures defined here are reflected externally
is left up to individual user-agent implementations.</p>
   <p>An <a data-link-type="dfn" href="#entry" id="ref-for-entry⑥">entry</a> <var>a</var> is <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-the-same-as">the same as</dfn> an <a data-link-type="dfn" href="#entry" id="ref-for-entry⑦">entry</a> <var>b</var> if <var>a</var> is equal to <var>b</var>, or
if <var>a</var> and <var>b</var> are backed by the same file or directory on the local file system.</p>
   <p class="issue" id="issue-88e7ec9d"><a class="self-link" href="#issue-88e7ec9d"></a> TODO: Explain better how entries map to files on disk (multiple entries can map to the same file or
directory on disk but an entry doesn’t have to map to any file on disk).</p>
   <div class="algorithm" data-algorithm="resolve" data-algorithm-for="entry">
     To <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-resolve">resolve</dfn> an <a data-link-type="dfn" href="#entry" id="ref-for-entry⑧">entry</a> <var>child</var> relative to a <a data-link-type="dfn" href="#directory" id="ref-for-directory③">directory entry</a> <var>root</var>,
run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>child</var> is <a data-link-type="dfn" href="#entry-the-same-as" id="ref-for-entry-the-same-as">the same as</a> <var>root</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">resolve</a> <var>result</var> with an empty list, and abort.</p>
       <li data-md>
        <p>Let <var>childPromises</var> be « ».</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>entry</var> of <var>root</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry">entry</a>'s <a data-link-type="dfn">children</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>p</var> be the result of <a data-link-type="dfn" href="#entry-resolve" id="ref-for-entry-resolve">resolving</a> <var>child</var> relative to <var>entry</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>p</var> to <var>childPromises</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment" id="ref-for-upon-fulfillment">Upon fulfillment</a> of <var>p</var> with value <var>path</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>path</var> is not null:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-prepend" id="ref-for-list-prepend">Prepend</a> <var>entry</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name">name</a> to <var>path</var>.</p>
             <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①">Resolve</a> <var>result</var> with <var>path</var>.</p>
            </ol>
          </ol>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#wait-for-all" id="ref-for-wait-for-all">Wait for all</a> <var>childPromises</var>, with the following success steps:</p>
        <ol>
         <li data-md>
          <p>If <var>result</var> hasn’t been resolved yet, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②">resolve</a> <var>result</var> with <code>null</code>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.2" id="permissions"><span class="secno">2.2. </span><span class="content">Permissions</span><a class="self-link" href="#permissions"></a></h3>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export id="dom-permissionname-file-system"><code>"file-system"</code></dfn> <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-powerful-feature" id="ref-for-dfn-powerful-feature">powerful feature</a>'s
permission-related algorithms and types are defined as follows:</p>
   <dl>
    <dt data-md><a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-descriptor-type" id="ref-for-dfn-permission-descriptor-type">permission descriptor type</a>
    <dd data-md>
     <p><code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor">FileSystemPermissionDescriptor</a></code>, defined as:</p>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-filesystempermissionmode"><code><c- g>FileSystemPermissionMode</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemPermissionMode" data-dfn-type="enum-value" data-export id="dom-filesystempermissionmode-read"><code><c- s>"read"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemPermissionMode" data-dfn-type="enum-value" data-export id="dom-filesystempermissionmode-readwrite"><code><c- s>"readwrite"</c-></code></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystempermissiondescriptor"><code><c- g>FileSystemPermissionDescriptor</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissiondescriptor" id="ref-for-dom-permissiondescriptor"><c- n>PermissionDescriptor</c-></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle"><c- n>FileSystemHandle</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemPermissionDescriptor" data-dfn-type="dict-member" data-export data-type="FileSystemHandle" id="dom-filesystempermissiondescriptor-handle"><code><c- g>handle</c-></code></dfn>;
  <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode"><c- n>FileSystemPermissionMode</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;read&quot;" data-dfn-for="FileSystemPermissionDescriptor" data-dfn-type="dict-member" data-export data-type="FileSystemPermissionMode" id="dom-filesystempermissiondescriptor-mode"><code><c- g>mode</c-></code></dfn> = "read";
};
</pre>
    <dt data-md><a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state-constraints" id="ref-for-dfn-permission-state-constraints">permission state constraints</a>
    <dd data-md>
     <div class="algorithm" data-algorithm="permission state constraints">
       To determine <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state-constraints" id="ref-for-dfn-permission-state-constraints①">permission state constraints</a> for a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor①">FileSystemPermissionDescriptor</a></code> <var>desc</var>,
run these steps: 
      <ol>
       <li data-md>
        <p>Let <var>entry</var> be <var>desc</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle">handle</a></code>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①">entry</a>.</p>
       <li data-md>
        <p>If <var>entry</var> represents an <a data-link-type="dfn" href="#entry" id="ref-for-entry⑨">entry</a> in an <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system">origin private file system</a>,
this descriptor’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state">permission state</a> must always be <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted">"granted"</a></code>.</p>
       <li data-md>
        <p>Otherwise, if <var>entry</var>’s <a data-link-type="dfn" href="#entry-parent" id="ref-for-entry-parent①">parent</a> is not null, this descriptor’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state①">permission state</a> must be
equal to the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state②">permission state</a> for a descriptor with the same <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode">mode</a></code>,
and a <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle①">handle</a></code> representing <var>entry</var>’s <a data-link-type="dfn" href="#entry-parent" id="ref-for-entry-parent②">parent</a>.</p>
       <li data-md>
        <p>Otherwise, if <var>desc</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode①">mode</a></code> is <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite">"readwrite"</a></code>:</p>
        <ol>
         <li data-md>
          <p>Let <var>read state</var> be the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state③">permission state</a> for a descriptor
with the same <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle②">handle</a></code>,
but <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode②">mode</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read">"read"</a></code>.</p>
         <li data-md>
          <p>If <var>read state</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①">"granted"</a></code>, this descriptor’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state④">permission state</a> must be equal to <var>read state</var>.</p>
        </ol>
      </ol>
     </div>
    <dt data-md><a data-link-type="dfn" href="https://wicg.github.io/permissions-request/#permission-request-algorithm" id="ref-for-permission-request-algorithm">permission request algorithm</a>
    <dd data-md>
     <div class="algorithm" data-algorithm="permission request algorithm">
       Given a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor②">FileSystemPermissionDescriptor</a></code> <var>desc</var> and a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus" id="ref-for-dom-permissionstatus">PermissionStatus</a></code> <var>status</var>,
run these steps: 
      <ol>
       <li data-md>
        <p>Run the <a data-link-type="dfn">boolean permission query algorithm</a> on <var>desc</var> and <var>status</var>.</p>
       <li data-md>
        <p>If <var>status</var>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state">state</a></code> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt">"prompt"</a></code>, abort.</p>
       <li data-md>
        <p>Let <var>settings</var> be <var>desc</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle③">handle</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>.</p>
       <li data-md>
        <p>Let <var>global</var> be <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global">global object</a>.</p>
       <li data-md>
        <p>If <var>global</var> is not a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror">SecurityError</a></code>.</p>
       <li data-md>
        <p>If <var>global</var> does not have <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation">transient activation</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror①">SecurityError</a></code>.</p>
       <li data-md>
        <p>If <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin">same origin</a> with <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin">top-level origin</a>,
 throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror②">SecurityError</a></code>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-request-permission-to-use" id="ref-for-dfn-request-permission-to-use">Request permission to use</a> <var>desc</var>.</p>
       <li data-md>
        <p>Run the <a data-link-type="dfn">boolean permission query algorithm</a> on <var>desc</var> and <var>status</var>.</p>
      </ol>
      <p class="issue" id="issue-88417955"><a class="self-link" href="#issue-88417955"></a> Ideally this user activation requirement would be defined upstream. <a href="https://github.com/WICG/permissions-request/issues/2">[Issue #WICG/permissions-request#2]</a></p>
     </div>
   </dl>
   <div class="algorithm" data-algorithm="querying file system permission">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="querying file system permission|query file system permission" data-noexport id="querying-file-system-permission">query file system permission</dfn> given a <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle①">FileSystemHandle</a></code> <var>handle</var> and a <code class="idl"><a data-link-type="idl" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode①">FileSystemPermissionMode</a></code> <var>mode</var>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>desc</var> be a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor③">FileSystemPermissionDescriptor</a></code>.</p>
     <li data-md>
      <p>Set <var>desc</var>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name">name</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system">"file-system"</a></code>.</p>
     <li data-md>
      <p>Set <var>desc</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle④">handle</a></code> to <var>handle</var>.</p>
     <li data-md>
      <p>Set <var>desc</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode③">mode</a></code> to <var>mode</var>.</p>
     <li data-md>
      <p>Return <var>desc</var>’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑤">permission state</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="requesting file system permission">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="requesting file system permission|request file system permission" data-noexport id="requesting-file-system-permission">request file system permission</dfn> given a <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle②">FileSystemHandle</a></code> <var>handle</var> and a <code class="idl"><a data-link-type="idl" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode②">FileSystemPermissionMode</a></code> <var>mode</var>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>desc</var> be a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor④">FileSystemPermissionDescriptor</a></code>.</p>
     <li data-md>
      <p>Set <var>desc</var>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①">name</a></code> to <code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system①">"file-system"</a></code>.</p>
     <li data-md>
      <p>Set <var>desc</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑤">handle</a></code> to <var>handle</var>.</p>
     <li data-md>
      <p>Set <var>desc</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode④">mode</a></code> to <var>mode</var>.</p>
     <li data-md>
      <p>Let <var>status</var> be the result of running <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-create-a-permissionstatus" id="ref-for-dfn-create-a-permissionstatus">create a PermissionStatus</a> for <var>desc</var>.</p>
     <li data-md>
      <p>Run the <a data-link-type="dfn" href="https://wicg.github.io/permissions-request/#permission-request-algorithm" id="ref-for-permission-request-algorithm①">permission request algorithm</a> for the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-file-system" id="ref-for-dom-permissionname-file-system②">"file-system"</a></code> feature, given <var>desc</var> and <var>status</var>.</p>
     <li data-md>
      <p>Return <var>desc</var>’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑥">permission state</a>.</p>
    </ol>
   </div>
   <p class="issue" id="issue-7fc2f5c7"><a class="self-link" href="#issue-7fc2f5c7"></a> Currently <code class="idl"><a data-link-type="idl" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode③">FileSystemPermissionMode</a></code> can only be <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read①">"read"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite①">"readwrite"</a></code>. In
the future we might want to add a "write" mode as well to support write-only handles. <a href="https://github.com/wicg/file-system-access/issues/119">[Issue #119]</a></p>
   <h3 class="heading settled" data-level="2.3" id="api-filesystemhandle"><span class="secno">2.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle③">FileSystemHandle</a></code> interface</span><a class="self-link" href="#api-filesystemhandle"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemhandlepermissiondescriptor"><code><c- g>FileSystemHandlePermissionDescriptor</c-></code></dfn> {
  <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode" id="ref-for-enumdef-filesystempermissionmode④"><c- n>FileSystemPermissionMode</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;read&quot;" data-dfn-for="FileSystemHandlePermissionDescriptor" data-dfn-type="dict-member" data-export data-type="FileSystemPermissionMode" id="dom-filesystemhandlepermissiondescriptor-mode"><code><c- g>mode</c-></code></dfn> = "read";
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-filesystemhandlekind"><code><c- g>FileSystemHandleKind</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandleKind" data-dfn-type="enum-value" data-export id="dom-filesystemhandlekind-file"><code><c- s>"file"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandleKind" data-dfn-type="enum-value" data-export id="dom-filesystemhandlekind-directory"><code><c- s>"directory"</c-></code></dfn>,
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable" id="ref-for-serializable"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemhandle"><code><c- g>FileSystemHandle</c-></code></dfn> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-filesystemhandlekind" id="ref-for-enumdef-filesystemhandlekind"><c- n>FileSystemHandleKind</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FileSystemHandleKind" href="#dom-filesystemhandle-kind" id="ref-for-dom-filesystemhandle-kind"><c- g>kind</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-filesystemhandle-name" id="ref-for-dom-filesystemhandle-name"><c- g>name</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-issameentry" id="ref-for-dom-filesystemhandle-issameentry"><c- g>isSameEntry</c-></a>(<a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle④"><c- n>FileSystemHandle</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle/isSameEntry(other)" data-dfn-type="argument" data-export id="dom-filesystemhandle-issameentry-other-other"><code><c- g>other</c-></code></dfn>);

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissionstate" id="ref-for-dom-permissionstate"><c- n>PermissionState</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission"><c- g>queryPermission</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemhandlepermissiondescriptor" id="ref-for-dictdef-filesystemhandlepermissiondescriptor"><c- n>FileSystemHandlePermissionDescriptor</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle/queryPermission(descriptor), FileSystemHandle/queryPermission()" data-dfn-type="argument" data-export id="dom-filesystemhandle-querypermission-descriptor-descriptor"><code><c- g>descriptor</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissionstate" id="ref-for-dom-permissionstate①"><c- n>PermissionState</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission"><c- g>requestPermission</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemhandlepermissiondescriptor" id="ref-for-dictdef-filesystemhandlepermissiondescriptor①"><c- n>FileSystemHandlePermissionDescriptor</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle/requestPermission(descriptor), FileSystemHandle/requestPermission()" data-dfn-type="argument" data-export id="dom-filesystemhandle-requestpermission-descriptor-descriptor"><code><c- g>descriptor</c-></code></dfn> = {});
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle⑤">FileSystemHandle</a></code> object represents an <a data-link-type="dfn" href="#entry" id="ref-for-entry①⓪">entry</a>. Each <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle⑥">FileSystemHandle</a></code> object is associated
with an <dfn class="dfn-paneled" data-dfn-for="FileSystemHandle" data-dfn-type="dfn" data-noexport id="filesystemhandle-entry">entry</dfn> (an <a data-link-type="dfn" href="#entry" id="ref-for-entry①①">entry</a>). Multiple separate objects implementing
the <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle⑦">FileSystemHandle</a></code> interface can all be associated with the same <a data-link-type="dfn" href="#entry" id="ref-for-entry①②">entry</a> simultaneously.</p>
   <div class="algorithm" data-algorithm="serialization steps">
     <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle⑧">FileSystemHandle</a></code> objects are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects" id="ref-for-serializable-objects">serializable objects</a>. 
    <p><strong class="advisement"> In the Origin Trial as available in Chrome 78, these objects are not yet serializable.
In Chrome 82 they are.</strong></p>
    <p>Their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps" id="ref-for-serialization-steps">serialization steps</a>, given <var>value</var>, <var>serialized</var> and <var>forStorage</var> are:</p>
    <ol>
     <li data-md>
      <p>Set <var>serialized</var>.[[Origin]] to <var>value</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①">relevant settings object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①">origin</a>.</p>
     <li data-md>
      <p>Set <var>serialized</var>.[[Entry]] to <var>value</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②">entry</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="deserialization steps">
     Their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps" id="ref-for-deserialization-steps">deserialization steps</a>, given <var>serialized</var> and <var>value</var> are: 
    <ol>
     <li data-md>
      <p>If <var>serialized</var>.[[Origin]] is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin①">same origin</a> with <var>value</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object②">relevant settings object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②">origin</a>,
 then throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#datacloneerror" id="ref-for-datacloneerror">DataCloneError</a></code>.</p>
     <li data-md>
      <p>Set <var>value</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry③">entry</a> to <var>serialized</var>.[[Entry]]</p>
    </ol>
   </div>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-kind" id="ref-for-dom-filesystemhandle-kind①">kind</a></code>
     <dd data-md>
      <p>Returns <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlekind-file" id="ref-for-dom-filesystemhandlekind-file">"file"</a></code> if <var>handle</var> is a <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle">FileSystemFileHandle</a></code>,
 or <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlekind-directory" id="ref-for-dom-filesystemhandlekind-directory">"directory"</a></code> if <var>handle</var> is a <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle">FileSystemDirectoryHandle</a></code>.</p>
      <p>This can be used to distinguish files from directories when iterating over the contents
 of a directory.</p>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-name" id="ref-for-dom-filesystemhandle-name①">name</a></code>
     <dd data-md>
      <p>Returns the <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①">name</a> of the entry represented by <var>handle</var>.</p>
    </dl>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="attribute" data-export id="dom-filesystemhandle-kind"><code>kind</code></dfn> attribute must
return <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlekind-file" id="ref-for-dom-filesystemhandlekind-file①">"file"</a></code> if the associated <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry④">entry</a> is a <a data-link-type="dfn" href="#file" id="ref-for-file②">file entry</a>,
and return <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlekind-directory" id="ref-for-dom-filesystemhandlekind-directory①">"directory"</a></code> otherwise.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="attribute" data-export id="dom-filesystemhandle-name"><code>name</code></dfn> attribute must return the <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name②">name</a> of the
associated <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑤">entry</a>.</p>
   <h4 class="heading settled" data-level="2.3.1" id="api-filesystemhandle-issameentry"><span class="secno">2.3.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-issameentry" id="ref-for-dom-filesystemhandle-issameentry①">isSameEntry()</a></code> method</span><a class="self-link" href="#api-filesystemhandle-issameentry"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>same</var> = await <var>handle1</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-issameentry" id="ref-for-dom-filesystemhandle-issameentry②">isSameEntry</a></code>( <var>handle2</var> )
     <dd data-md>
      <p>Returns true if <var>handle1</var> and <var>handle2</var> represent the same file or directory.</p>
    </dl>
   </div>
   <p><strong class="advisement"> This method is first available in Chrome 82.</strong></p>
   <div class="algorithm" data-algorithm="isSameEntry(other)" data-algorithm-for="FileSystemHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="method" data-export id="dom-filesystemhandle-issameentry"><code>isSameEntry(<var>other</var>)</code></dfn> method, when invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant Realm</a>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①">a new promise</a> in <var>realm</var>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑥">entry</a> is <a data-link-type="dfn" href="#entry-the-same-as" id="ref-for-entry-the-same-as①">the same as</a> <var>other</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑦">entry</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve③">resolve</a> <var>p</var> with <code>true</code>.</p>
       <li data-md>
        <p>Else <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve④">resolve</a> <var>p</var> with <code>false</code>.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.3.2" id="api-filesystemhandle-querypermission"><span class="secno">2.3.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission①">queryPermission()</a></code> method</span><a class="self-link" href="#api-filesystemhandle-querypermission"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission②">queryPermission</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode">mode</a></code> : <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read②">"read"</a></code> })
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission③">queryPermission()</a></code>
     <dt data-md><var>status</var> = (await navigator.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-navigator-permissions" id="ref-for-dom-navigator-permissions">permissions</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-query" id="ref-for-dom-permissions-query">query</a></code>({ <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name②">name</a></code> : "file-system", <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑥">handle</a></code> : <var>handle</var> })).<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state①">state</a></code>
     <dd data-md>
      <p>Queries the current state of the read permission of this handle. If this returns <code>"prompt"</code> the website will have to call <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission①">requestPermission()</a></code> before any
 operations on the handle can be done. If this returns <code>"denied"</code> any operations will reject.</p>
      <p>Usually handles returned by the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories①">local file system handle factories</a> will initially return <code>"granted"</code> for
 their read permission state, however other than through the user revoking permission, a handle
 retrieved from IndexedDB is also likely to return <code>"prompt"</code>.</p>
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-querypermission" id="ref-for-dom-filesystemhandle-querypermission④">queryPermission</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode①">mode</a></code> : <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite②">"readwrite"</a></code> })
     <dt data-md><var>status</var> = (await navigator.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-navigator-permissions" id="ref-for-dom-navigator-permissions①">permissions</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-query" id="ref-for-dom-permissions-query①">query</a></code>({ <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name③">name</a></code> : "file-system", <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑦">handle</a></code> : <var>handle</var>, <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑤">mode</a></code> : <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite③">"readwrite"</a></code>}).<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state②">state</a></code>
     <dd data-md>
      <p>Queries the current state of the write permission of this handle. If this returns <code>"prompt"</code>,
 attempting to modify the file or directory this handle represents will require user activation
 and will result in a confirmation prompt being shown to the user. However if the state of the
 read permission of this handle is also <code>"prompt"</code> the website will need to call <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission②">requestPermission()</a></code>. There is no automatic prompting for read access when
 attempting to read from a file or directory.</p>
    </dl>
   </div>
   <p><strong class="advisement"> The integration with the permissions API’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-query" id="ref-for-dom-permissions-query②">query()</a></code> method is not yet implemented in Chrome.</strong></p>
   <div class="algorithm" data-algorithm="queryPermission(descriptor)" data-algorithm-for="FileSystemHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="method" data-export data-lt="queryPermission(descriptor)|queryPermission()" id="dom-filesystemhandle-querypermission"><code>queryPermission(<var>descriptor</var>)</code></dfn> method, when invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise②">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>state</var> be the result of <a data-link-type="dfn" href="#querying-file-system-permission" id="ref-for-querying-file-system-permission">querying file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a></b> and <var>descriptor</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode②">mode</a></code>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑤">Resolve</a> <var>result</var> with <var>state</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.3.3" id="api-filesystemhandle-requestpermission"><span class="secno">2.3.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission③">requestPermission()</a></code> method</span><a class="self-link" href="#api-filesystemhandle-requestpermission"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission④">requestPermission</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode③">mode</a></code> : <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read③">"read"</a></code> })
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission⑤">requestPermission()</a></code>
     <dd data-md>
      <p>If the state of the read permission of this handle is anything other than <code>"prompt"</code>, this
 will return that state directly. If it is <code>"prompt"</code> however, user activation is needed and
 this will show a confirmation prompt to the user. The new read permission state is then
 returned, depending on the user’s response to the prompt.</p>
     <dt data-md><var>status</var> = await <var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission⑥">requestPermission</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode④">mode</a></code> : <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite④">"readwrite"</a></code> })
     <dd data-md>
      <p>If the state of the write permission of this handle is anything other than <code>"prompt"</code>, this
 will return that state directly. If the status of the read permission of this handle is <code>"denied"</code> this will return that.</p>
      <p>Otherwise the state of the write permission is <code>"prompt"</code> and this will show a confirmation
 prompt to the user. The new write permission state is then returned, depending on what the user
 selected.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="requestPermission(descriptor)" data-algorithm-for="FileSystemHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="method" data-export data-lt="requestPermission(descriptor)|requestPermission()" id="dom-filesystemhandle-requestpermission"><code>requestPermission(<var>descriptor</var>)</code></dfn> method, when invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise③">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel③">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>state</var> be the result of <a data-link-type="dfn" href="#requesting-file-system-permission" id="ref-for-requesting-file-system-permission">requesting file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a></b> and <var>descriptor</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlepermissiondescriptor-mode" id="ref-for-dom-filesystemhandlepermissiondescriptor-mode⑤">mode</a></code>.
 If that throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a> <var>result</var> with that exception and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑥">Resolve</a> <var>result</var> with <var>state</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.4" id="api-filesystemfilehandle"><span class="secno">2.4. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle①">FileSystemFileHandle</a></code> interface</span><a class="self-link" href="#api-filesystemfilehandle"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemcreatewritableoptions"><code><c- g>FileSystemCreateWritableOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FileSystemCreateWritableOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-filesystemcreatewritableoptions-keepexistingdata"><code><c- g>keepExistingData</c-></code></dfn> = <c- b>false</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable" id="ref-for-serializable①"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemfilehandle"><code><c- g>FileSystemFileHandle</c-></code></dfn> : <a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle⑨"><c- n>FileSystemHandle</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-file" id="ref-for-dfn-file"><c- n>File</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-getfile" id="ref-for-dom-filesystemfilehandle-getfile"><c- g>getFile</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream"><c- n>FileSystemWritableFileStream</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-createwritable" id="ref-for-dom-filesystemfilehandle-createwritable"><c- g>createWritable</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemcreatewritableoptions" id="ref-for-dictdef-filesystemcreatewritableoptions"><c- n>FileSystemCreateWritableOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemFileHandle/createWritable(options), FileSystemFileHandle/createWritable()" data-dfn-type="argument" data-export id="dom-filesystemfilehandle-createwritable-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle②">FileSystemFileHandle</a></code>'s associated <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑧">entry</a> must be a <a data-link-type="dfn" href="#file" id="ref-for-file③">file entry</a>.</p>
   <p><code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle③">FileSystemFileHandle</a></code> objects are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects" id="ref-for-serializable-objects①">serializable objects</a>. Their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps" id="ref-for-serialization-steps①">serialization steps</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps" id="ref-for-deserialization-steps①">deserialization steps</a> are the same as those for <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle①⓪">FileSystemHandle</a></code>.</p>
   <p><strong class="advisement"> In the Origin Trial as available in Chrome 78, these objects are not yet serializable.
In Chrome 82 they are.</strong></p>
   <h4 class="heading settled" data-level="2.4.1" id="api-filesystemfilehandle-getfile"><span class="secno">2.4.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-getfile" id="ref-for-dom-filesystemfilehandle-getfile①">getFile()</a></code> method</span><a class="self-link" href="#api-filesystemfilehandle-getfile"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>file</var> = await <var>fileHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-getfile" id="ref-for-dom-filesystemfilehandle-getfile②">getFile()</a></code>
     <dd data-md>
      <p>Returns a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file" id="ref-for-dfn-file①">File</a></code> representing the state on disk of the entry represented by <var>handle</var>.
 If the file on disk changes or is removed after this method is called, the returned <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file" id="ref-for-dfn-file②">File</a></code> object will likely be no longer readable.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getFile()" data-algorithm-for="FileSystemFileHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemFileHandle" data-dfn-type="method" data-export id="dom-filesystemfilehandle-getfile"><code>getFile()</code></dfn> method, when invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise④">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel④">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#querying-file-system-permission" id="ref-for-querying-file-system-permission①">querying file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a></b> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read④">"read"</a></code>.</p>
       <li data-md>
        <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted②">"granted"</a></code>,
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a></b>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑨">entry</a>.</p>
       <li data-md>
        <p>Let <var>f</var> be a new <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file" id="ref-for-dfn-file③">File</a></code>.</p>
       <li data-md>
        <p>Set <var>f</var>’s <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#snapshot-state" id="ref-for-snapshot-state">snapshot state</a> to the current state of <var>entry</var>.</p>
       <li data-md>
        <p>Set <var>f</var>’s underlying byte sequence to a copy of <var>entry</var>’s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data①">binary data</a>.</p>
       <li data-md>
        <p>Initialize the value of <var>f</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-name" id="ref-for-dfn-name">name</a></code> attribute to <var>entry</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name③">name</a>.</p>
       <li data-md>
        <p>Initialize the value of <var>f</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-lastModified" id="ref-for-dfn-lastModified">lastModified</a></code> attribute to <var>entry</var>’s <a data-link-type="dfn" href="#file-entry-modification-timestamp" id="ref-for-file-entry-modification-timestamp①">modification timestamp</a>.</p>
       <li data-md>
        <p>Initialize the value of <var>f</var>’s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-type" id="ref-for-dfn-type">type</a></code> attribute to an implementation defined value, based on for example <var>entry</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name④">name</a> and/or its file extension.</p>
        <p class="issue" id="issue-1fb8bcae"><a class="self-link" href="#issue-1fb8bcae"></a> The reading and snapshotting behavior needs to be better specified in the <a data-link-type="biblio" href="#biblio-file-api" title="File API">[FILE-API]</a> spec,
 for now this is kind of hand-wavy.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑦">Resolve</a> <var>result</var> with <var>f</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.4.2" id="api-filesystemfilehandle-createwritable"><span class="secno">2.4.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-createwritable" id="ref-for-dom-filesystemfilehandle-createwritable①">createWritable()</a></code> method</span><a class="self-link" href="#api-filesystemfilehandle-createwritable"></a></h4>
   <p><strong class="advisement"> In the Origin Trial as available in Chrome 82, createWritable replaces the createWriter method.</strong></p>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>stream</var> = await <var>fileHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-createwritable" id="ref-for-dom-filesystemfilehandle-createwritable②">createWritable()</a></code>
     <dt data-md><var>stream</var> = await <var>fileHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-createwritable" id="ref-for-dom-filesystemfilehandle-createwritable③">createWritable</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemcreatewritableoptions-keepexistingdata" id="ref-for-dom-filesystemcreatewritableoptions-keepexistingdata">keepExistingData</a></code>: true/false })
     <dd data-md>
      <p>Returns a <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream①">FileSystemWritableFileStream</a></code> that can be used to write to the file. Any changes made through <var>stream</var> won’t be reflected in the file represented by <var>fileHandle</var> until the stream has been closed.
 User agents try to ensure that no partial writes happen, i.e. the file represented by <var>fileHandle</var> will either contains its old contents or it will contain whatever data was written
 through <var>stream</var> up until the stream has been closed.</p>
      <p>This is typically implemented by writing data to a temporary file, and only replacing the file
 represented by <var>fileHandle</var> with the temporary file when the writable filestream is closed.</p>
      <p>If <code class="idl"><a data-link-type="idl" href="#dom-filesystemcreatewritableoptions-keepexistingdata" id="ref-for-dom-filesystemcreatewritableoptions-keepexistingdata①">keepExistingData</a></code> is <code>false</code> or not specified,
 the temporary file starts out empty,
 otherwise the existing file is first copied to this temporary file.</p>
    </dl>
   </div>
   <p class="issue" id="issue-0693bc11"><a class="self-link" href="#issue-0693bc11"></a> There has been some discussion around and desire for a "inPlace" mode for createWritable
(where changes will be written to the actual underlying file as they are written to the writer, for
example to support in-place modification of large files or things like databases). This is not
currently implemented in Chrome. Implementing this is currently blocked on figuring out how to
combine the desire to run malware checks with the desire to let websites make fast in-place
modifications to existing large files. <a href="https://github.com/wicg/file-system-access/issues/67">[Issue #67]</a></p>
   <div class="algorithm" data-algorithm="createWritable(options)" data-algorithm-for="FileSystemFileHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemFileHandle" data-dfn-type="method" data-export data-lt="createWritable(options)|createWritable()" id="dom-filesystemfilehandle-createwritable"><code>createWritable(<var>options</var>)</code></dfn> method, when invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑤">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑤">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#requesting-file-system-permission" id="ref-for-requesting-file-system-permission①">requesting file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a></b> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite⑤">"readwrite"</a></code>.
 If that throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a> <var>result</var> with that exception and abort.</p>
       <li data-md>
        <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted③">"granted"</a></code>,
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror①">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a></b>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⓪">entry</a>.</p>
       <li data-md>
        <p>Let <var>stream</var> be the result of <a data-link-type="dfn" href="#create-a-new-filesystemwritablefilestream" id="ref-for-create-a-new-filesystemwritablefilestream">creating a new FileSystemWritableFileStream</a> for <var>entry</var> in <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a></b>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①">relevant realm</a>.</p>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemcreatewritableoptions-keepexistingdata" id="ref-for-dom-filesystemcreatewritableoptions-keepexistingdata②">keepExistingData</a></code> is <code>true</code>:</p>
        <ol>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer">[[buffer]]</a> to a copy of <var>entry</var>’s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data②">binary data</a>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑧">Resolve</a> <var>result</var> with <var>stream</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.5" id="api-filesystemdirectoryhandle"><span class="secno">2.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①">FileSystemDirectoryHandle</a></code> interface</span><a class="self-link" href="#api-filesystemdirectoryhandle"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemgetfileoptions"><code><c- g>FileSystemGetFileOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FileSystemGetFileOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-filesystemgetfileoptions-create"><code><c- g>create</c-></code></dfn> = <c- b>false</c->;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemgetdirectoryoptions"><code><c- g>FileSystemGetDirectoryOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FileSystemGetDirectoryOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-filesystemgetdirectoryoptions-create"><code><c- g>create</c-></code></dfn> = <c- b>false</c->;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemremoveoptions"><code><c- g>FileSystemRemoveOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FileSystemRemoveOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-filesystemremoveoptions-recursive"><code><c- g>recursive</c-></code></dfn> = <c- b>false</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext②"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable" id="ref-for-serializable②"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemdirectoryhandle"><code><c- g>FileSystemDirectoryHandle</c-></code></dfn> : <a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle①①"><c- n>FileSystemHandle</c-></a> {
  <c- b>async</c-> <c- b>iterable</c->&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①"><c- b>USVString</c-></a>, <a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle①②"><c- n>FileSystemHandle</c-></a>>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle④"><c- n>FileSystemFileHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle"><c- g>getFileHandle</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle/getFileHandle(name, options), FileSystemDirectoryHandle/getFileHandle(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-getfilehandle-name-options-name"><code><c- g>name</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemgetfileoptions" id="ref-for-dictdef-filesystemgetfileoptions"><c- n>FileSystemGetFileOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle/getFileHandle(name, options), FileSystemDirectoryHandle/getFileHandle(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-getfilehandle-name-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle②"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle"><c- g>getDirectoryHandle</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString③"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle/getDirectoryHandle(name, options), FileSystemDirectoryHandle/getDirectoryHandle(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-name"><code><c- g>name</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemgetdirectoryoptions" id="ref-for-dictdef-filesystemgetdirectoryoptions"><c- n>FileSystemGetDirectoryOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle/getDirectoryHandle(name, options), FileSystemDirectoryHandle/getDirectoryHandle(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-options"><code><c- g>options</c-></code></dfn> = {});

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑦"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry"><c- g>removeEntry</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString④"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle/removeEntry(name, options), FileSystemDirectoryHandle/removeEntry(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-removeentry-name-options-name"><code><c- g>name</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemremoveoptions" id="ref-for-dictdef-filesystemremoveoptions"><c- n>FileSystemRemoveOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle/removeEntry(name, options), FileSystemDirectoryHandle/removeEntry(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-removeentry-name-options-options"><code><c- g>options</c-></code></dfn> = {});

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑧"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑤"><c- b>USVString</c-></a>>?> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-resolve" id="ref-for-dom-filesystemdirectoryhandle-resolve"><c- g>resolve</c-></a>(<a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle①③"><c- n>FileSystemHandle</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle/resolve(possibleDescendant)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-resolve-possibledescendant-possibledescendant"><code><c- g>possibleDescendant</c-></code></dfn>);
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle③">FileSystemDirectoryHandle</a></code>'s associated <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①①">entry</a> must be a <a data-link-type="dfn" href="#directory" id="ref-for-directory④">directory entry</a>.</p>
   <p><code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle④">FileSystemDirectoryHandle</a></code> objects are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects" id="ref-for-serializable-objects②">serializable objects</a>. Their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps" id="ref-for-serialization-steps②">serialization steps</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps" id="ref-for-deserialization-steps②">deserialization steps</a> are the same as those for <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle①④">FileSystemHandle</a></code>.</p>
   <p><strong class="advisement"> In the Origin Trial as available in Chrome 78, these objects are not yet serializable.
In Chrome 82 they are.</strong></p>
   <p><strong class="advisement"> In Chrome versions upto Chrome 85 <code>getFileHandle</code> and <code>getDirectoryHandle</code> where
called <code>getFile</code> and <code>getDirectory</code> instead.</strong></p>
   <h4 class="heading settled" data-level="2.5.1" id="api-filesystemdirectoryhandle-asynciterable"><span class="secno">2.5.1. </span><span class="content">Directory iteration</span><a class="self-link" href="#api-filesystemdirectoryhandle-asynciterable"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>for await (let [<var>name</var>, <var>handle</var>] of <var>directoryHandle</var>) {}
     <dt data-md>for await (let [<var>name</var>, <var>handle</var>] of <var>directoryHandle</var> . entries()) {}
     <dt data-md>for await (let <var>handle</var> of <var>directoryHandle</var> . values()) {}
     <dt data-md>for await (let <var>name</var> of <var>directoryHandle</var> . keys()) {}
     <dd data-md>
      <p>Iterates over all entries whose parent is the entry represented by <var>directoryHandle</var>. Entries
 that are created or deleted while the iteration is in progress might or might not be included.
 No guarantees are given either way.</p>
    </dl>
   </div>
   <p><strong class="advisement"> In Chrome this is currently implemented as a <code>directoryHandle.getEntries()</code> method that can be used in a <code>for await..of</code> loop.
This <code>getEntries()</code> method returns more or less the same async iterable as what is returned by <code>values()</code> in this specification.
The proper async iterable declaration is not yet implemented.</strong></p>
   <p class="issue" id="issue-cce0bb28"><a class="self-link" href="#issue-cce0bb28"></a> In the future we might want to add arguments to the async iterable declaration to
support for example recursive iteration. <a href="https://github.com/wicg/file-system-access/issues/173">[Issue #173]</a></p>
   <div class="algorithm" data-algorithm="iterator initialization">
     The <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#asynchronous-iterator-initialization-steps" id="ref-for-asynchronous-iterator-initialization-steps">asynchronous iterator initialization steps</a> for a <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑤">FileSystemDirectoryHandle</a></code> <var>handle</var> ant its async iterator <var>iterator</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#querying-file-system-permission" id="ref-for-querying-file-system-permission②">querying file system permission</a> given <var>handle</var> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read⑤">"read"</a></code>.</p>
     <li data-md>
      <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted④">"granted"</a></code>,
 throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror②">NotAllowedError</a></code>.</p>
     <li data-md>
      <p>Set <var>iterator</var>’s <dfn class="dfn-paneled" data-dfn-for="FileSystemDirectoryHandle-iterator" data-dfn-type="dfn" data-noexport id="filesystemdirectoryhandle-iterator-past-results">past results</dfn> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">set</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="next iteration result">
     To <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-get-the-next-iteration-result" id="ref-for-dfn-get-the-next-iteration-result">get the next iteration result</a> for a <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑥">FileSystemDirectoryHandle</a></code> <var>handle</var> and its async iterator <var>iterator</var>: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑥">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>directory</var> be <var>handle</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①②">entry</a>.</p>
     <li data-md>
      <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#querying-file-system-permission" id="ref-for-querying-file-system-permission③">querying file system permission</a> given <var>handle</var> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read⑥">"read"</a></code>.</p>
     <li data-md>
      <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑤">"granted"</a></code>,
 reject <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror③">NotAllowedError</a></code> and return <var>promise</var>.</p>
     <li data-md>
      <p>Let <var>child</var> be an <a data-link-type="dfn" href="#entry" id="ref-for-entry①③">entry</a> in <var>directory</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children">children</a>,
 such that <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑤">name</a> is not contained in <var>iterator</var>’s <a data-link-type="dfn" href="#filesystemdirectoryhandle-iterator-past-results" id="ref-for-filesystemdirectoryhandle-iterator-past-results">past results</a>,
 or <code>null</code> if no such entry exists.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This is intentionally very vague about the iteration order. Different platforms
 and file systems provide different guarantees about iteration order, and we want it to
 be possible to efficiently implement this on all platforms. As such no guarantees are given
 about the exact order in which elements are returned.</p>
     <li data-md>
      <p>If <var>child</var> is <code>null</code>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑨">Resolve</a> <var>promise</var> with <code>undefined</code>.</p>
      </ol>
     <li data-md>
      <p>Otherwise:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑥">name</a> to <var>iterator</var>’s <a data-link-type="dfn" href="#filesystemdirectoryhandle-iterator-past-results" id="ref-for-filesystemdirectoryhandle-iterator-past-results①">past results</a>.</p>
       <li data-md>
        <p>If <var>child</var> is a <a data-link-type="dfn" href="#file" id="ref-for-file④">file entry</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle⑤">FileSystemFileHandle</a></code> associated with <var>child</var>.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑦">FileSystemDirectoryHandle</a></code> associated with <var>child</var>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⓪">Resolve</a> <var>promise</var> with (<var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑦">name</a>, <var>result</var>).</p>
      </ol>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.2" id="api-filesystemdirectoryhandle-getfilehandle"><span class="secno">2.5.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle①">getFileHandle()</a></code> method</span><a class="self-link" href="#api-filesystemdirectoryhandle-getfilehandle"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>fileHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle②">getFileHandle</a></code>(<var>name</var>)
     <dt data-md><var>fileHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle③">getFileHandle</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create">create</a></code>: false })
     <dd data-md>
      <p>Returns a handle for a file named <var>name</var> in the directory represented by <var>directoryHandle</var>. If
 no such file exists, this rejects.</p>
     <dt data-md><var>fileHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle④">getFileHandle</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create①">create</a></code>: true })
     <dd data-md>
      <p>Returns a handle for a file named <var>name</var> in the directory represented by <var>directoryHandle</var>. If
 no such file exists, this creates a new file. If no file with named <var>name</var> can be created this
 rejects. Creation can fail because there already is a directory with the same name, because the
 name uses characters that aren’t supported in file names on the underlying file system, or
 because the user agent for security reasons decided not to allow creation of the file.</p>
      <p>This operation requires write permission, even if the file being returned already exists. If
 this handle doesn’t already have write permission, this could result in a prompt being shown to
 the user. To get an existing file without needing write permission, call this method
 with <code>{ <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create②">create</a></code>: false }</code>.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getFileHandle(name, options)" data-algorithm-for="FileSystemDirectoryHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle" data-dfn-type="method" data-export data-lt="getFileHandle(name, options)|getFileHandle(name)" id="dom-filesystemdirectoryhandle-getfilehandle"><code>getFileHandle(<var>name</var>, <var>options</var>)</code></dfn> method, when invoked,
must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑦">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑥">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>name</var> is not a <a data-link-type="dfn" href="#valid-file-name" id="ref-for-valid-file-name①">valid file name</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②">reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a></b>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①③">entry</a>.</p>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create③">create</a></code> is <code>true</code>:</p>
        <ol>
         <li data-md>
          <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#requesting-file-system-permission" id="ref-for-requesting-file-system-permission②">requesting file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a></b> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite⑥">"readwrite"</a></code>.
 If that throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③">reject</a> <var>result</var> with that exception and abort.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#querying-file-system-permission" id="ref-for-querying-file-system-permission④">querying file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a></b> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read⑦">"read"</a></code>.</p>
        </ol>
       <li data-md>
        <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑥">"granted"</a></code>,
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror④">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>child</var> of <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children①">children</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑧">name</a> equals <var>name</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>child</var> is a <a data-link-type="dfn" href="#directory" id="ref-for-directory⑤">directory entry</a>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject④">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#typemismatcherror" id="ref-for-typemismatcherror">TypeMismatchError</a></code> and abort.</p>
            </ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①①">Resolve</a> <var>result</var> with a new <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle⑥">FileSystemFileHandle</a></code> whose <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①④">entry</a> is <var>child</var> and abort.</p>
          </ol>
        </ol>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create④">create</a></code> is <code>false</code>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑤">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notfounderror" id="ref-for-notfounderror">NotFoundError</a></code> and abort.</p>
        </ol>
       <li data-md>
        <p>Let <var>child</var> be a new <a data-link-type="dfn" href="#file" id="ref-for-file⑤">file entry</a>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑨">name</a> to <var>name</var>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data③">binary data</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①">byte sequence</a>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#file-entry-modification-timestamp" id="ref-for-file-entry-modification-timestamp②">modification timestamp</a> to the current time.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append①">Append</a> <var>child</var> to <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children②">children</a>.</p>
       <li data-md>
        <p>If creating <var>child</var> in the underlying file system throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑥">reject</a> <var>result</var> with that exception and abort.</p>
        <p class="issue" id="issue-721a33e4"><a class="self-link" href="#issue-721a33e4"></a> Better specify what possible exceptions this could throw. <a href="https://github.com/wicg/file-system-access/issues/68">[Issue #68]</a></p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①②">Resolve</a> <var>result</var> with a new <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle⑦">FileSystemFileHandle</a></code> whose <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑤">entry</a> is <var>child</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.3" id="api-filesystemdirectoryhandle-getdirectoryhandle"><span class="secno">2.5.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle①">getDirectoryHandle()</a></code> method</span><a class="self-link" href="#api-filesystemdirectoryhandle-getdirectoryhandle"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>subdirHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle②">getDirectoryHandle</a></code>(<var>name</var>)
     <dt data-md><var>subdirHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle③">getDirectoryHandle</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetdirectoryoptions-create" id="ref-for-dom-filesystemgetdirectoryoptions-create">create</a></code>: false })
     <dd data-md>
      <p>Returns a handle for a directory named <var>name</var> in the directory represented by <var>directoryHandle</var>. If no such directory exists, this rejects.</p>
     <dt data-md><var>subdirHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle④">getDirectoryHandle</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetdirectoryoptions-create" id="ref-for-dom-filesystemgetdirectoryoptions-create①">create</a></code>: true })
     <dd data-md>
      <p>Returns a handle for a directory named <var>name</var> in the directory represented by <var>directoryHandle</var>. If no such directory exists, this creates a new directory. If creating the
 directory failed, this rejects. Creation can fail because there already is a file with the same
 name, or because the name uses characters that aren’t supported in file names on the underlying
 file system.</p>
      <p>This operation requires write permission, even if the directory being returned already exists.
 If this handle doesn’t already have write permission, this could result in a prompt being shown
 to the user. To get an existing directory without needing write permission, call this method
 with <code>{ <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetdirectoryoptions-create" id="ref-for-dom-filesystemgetdirectoryoptions-create②">create</a></code>: false }</code>.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getDirectoryHandle(name, options)" data-algorithm-for="FileSystemDirectoryHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle" data-dfn-type="method" data-export data-lt="getDirectoryHandle(name, options)|getDirectoryHandle(name)" id="dom-filesystemdirectoryhandle-getdirectoryhandle"><code>getDirectoryHandle(<var>name</var>, <var>options</var>)</code></dfn> method, when
invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑧">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑦">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>name</var> is not a <a data-link-type="dfn" href="#valid-file-name" id="ref-for-valid-file-name②">valid file name</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑦">reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a></b>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑥">entry</a>.</p>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemgetdirectoryoptions-create" id="ref-for-dom-filesystemgetdirectoryoptions-create③">create</a></code> is <code>true</code>:</p>
        <ol>
         <li data-md>
          <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#requesting-file-system-permission" id="ref-for-requesting-file-system-permission③">requesting file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a></b> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite⑦">"readwrite"</a></code>.
 If that throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑧">reject</a> <var>result</var> with that exception and abort.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#querying-file-system-permission" id="ref-for-querying-file-system-permission⑤">querying file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a></b> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read⑧">"read"</a></code>.</p>
        </ol>
       <li data-md>
        <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑦">"granted"</a></code>,
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror⑤">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>child</var> of <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children③">children</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①⓪">name</a> equals <var>name</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>child</var> is a <a data-link-type="dfn" href="#file" id="ref-for-file⑥">file entry</a>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑨">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#typemismatcherror" id="ref-for-typemismatcherror①">TypeMismatchError</a></code> and abort.</p>
            </ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①③">Resolve</a> <var>result</var> with a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑧">FileSystemDirectoryHandle</a></code> whose <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑦">entry</a> is <var>child</var> and abort.</p>
          </ol>
        </ol>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create⑤">create</a></code> is <code>false</code>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⓪">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notfounderror" id="ref-for-notfounderror①">NotFoundError</a></code> and abort.</p>
        </ol>
       <li data-md>
        <p>Let <var>child</var> be a new <a data-link-type="dfn" href="#directory" id="ref-for-directory⑥">directory entry</a>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①①">name</a> to <var>name</var>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children④">children</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">set</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append②">Append</a> <var>child</var> to <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑤">children</a>.</p>
       <li data-md>
        <p>If creating <var>child</var> in the underlying file system throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①①">reject</a> <var>result</var> with that exception and abort.</p>
        <p class="issue" id="issue-721a33e4①"><a class="self-link" href="#issue-721a33e4①"></a> Better specify what possible exceptions this could throw. <a href="https://github.com/wicg/file-system-access/issues/68">[Issue #68]</a></p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①④">Resolve</a> <var>result</var> with a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑨">FileSystemDirectoryHandle</a></code> whose <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑧">entry</a> is <var>child</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.4" id="api-filesystemdirectoryhandle-removeentry"><span class="secno">2.5.4. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry①">removeEntry()</a></code> method</span><a class="self-link" href="#api-filesystemdirectoryhandle-removeentry"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry②">removeEntry</a></code>(<var>name</var>)
     <dt data-md>await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry③">removeEntry</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemremoveoptions-recursive" id="ref-for-dom-filesystemremoveoptions-recursive">recursive</a></code>: false })
     <dd data-md>
      <p>If the directory represented by <var>directoryHandle</var> contains a file named <var>name</var>, or an empty
 directory named <var>name</var>, this will attempt to delete that file or directory.</p>
      <p>Attempting to delete a file or directory that does not exist is considered success,
 while attempting to delete a non-empty directory will result in a promise rejection.</p>
     <dt data-md>await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry④">removeEntry</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemremoveoptions-recursive" id="ref-for-dom-filesystemremoveoptions-recursive①">recursive</a></code>: true })
     <dd data-md>
      <p>Removes the entry named <var>name</var> in the directory represented by <var>directoryHandle</var>.
 If that entry is a directory, its contents will also be deleted recursively.
 recursively.</p>
      <p>Attempting to delete a file or directory that does not exist is considered success.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="removeEntry(name, options)" data-algorithm-for="FileSystemDirectoryHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle" data-dfn-type="method" data-export data-lt="removeEntry(name, options)|removeEntry(name)" id="dom-filesystemdirectoryhandle-removeentry"><code>removeEntry(<var>name</var>, <var>options</var>)</code></dfn> method, when invoked, must run
these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑨">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑧">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>name</var> is not a <a data-link-type="dfn" href="#valid-file-name" id="ref-for-valid-file-name③">valid file name</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①②">reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a></b>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑨">entry</a>.</p>
       <li data-md>
        <p>Let <var>permissionStatus</var> be the result of <a data-link-type="dfn" href="#requesting-file-system-permission" id="ref-for-requesting-file-system-permission④">requesting file system permission</a> given <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a></b> and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite⑧">"readwrite"</a></code>.
 If that throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①③">reject</a> <var>result</var> with that exception and abort.</p>
       <li data-md>
        <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑧">"granted"</a></code>,
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror⑥">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> <var>child</var> of <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑥">children</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①②">name</a> equals <var>name</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>child</var> is a <a data-link-type="dfn" href="#directory" id="ref-for-directory⑦">directory entry</a>:</p>
            <ol>
             <li data-md>
              <p>If <var>child</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑦">children</a> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty">empty</a> and <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemremoveoptions-recursive" id="ref-for-dom-filesystemremoveoptions-recursive②">recursive</a></code> is <code>false</code>:</p>
              <ol>
               <li data-md>
                <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①④">Reject</a> <var>result</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidmodificationerror" id="ref-for-invalidmodificationerror">InvalidModificationError</a></code> and abort.</p>
              </ol>
            </ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">Remove</a> <var>child</var> from <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑧">children</a>.</p>
           <li data-md>
            <p>If removing <var>child</var> in the underlying file system throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑤">reject</a> <var>result</var> with that exception and abort.</p>
            <p class="note" role="note"><span class="marker">Note:</span> If <code class="idl"><a data-link-type="idl" href="#dom-filesystemremoveoptions-recursive" id="ref-for-dom-filesystemremoveoptions-recursive③">recursive</a></code> is <code>true</code>, the removal can fail
 non-atomically. Some files or directories might have been removed while other files
 or directories still exist.</p>
            <p class="issue" id="issue-721a33e4②"><a class="self-link" href="#issue-721a33e4②"></a> Better specify what possible exceptions this could throw. <a href="https://github.com/wicg/file-system-access/issues/68">[Issue #68]</a></p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑤">Resolve</a> <var>result</var> with <code>undefined</code>.</p>
          </ol>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑥">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notfounderror" id="ref-for-notfounderror②">NotFoundError</a></code>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.5" id="api-filesystemdirectoryhandle-resolve"><span class="secno">2.5.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-resolve" id="ref-for-dom-filesystemdirectoryhandle-resolve①">resolve()</a></code> method</span><a class="self-link" href="#api-filesystemdirectoryhandle-resolve"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>path</var> = await <var>directory</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-resolve" id="ref-for-dom-filesystemdirectoryhandle-resolve②">resolve</a></code>( <var>child</var> )
     <dd data-md>
      <p>If <var>child</var> is equal to <var>directory</var>, <var>path</var> will be an empty array.</p>
     <dd data-md>
      <p>If <var>child</var> is a direct child of <var>directory</var>, <var>path</var> will be an array containing <var>child</var>’s name.</p>
     <dd data-md>
      <p>If <var>child</var> is a descendant of <var>directory</var>, <var>path</var> will be an array containing the names of
 all the intermediate directories and <var>child</var>’s name as last element.
 For example if <var>directory</var> represents <code>/home/user/project</code> and <var>child</var> represents <code>/home/user/project/foo/bar</code>, this will return <code>['foo', 'bar']</code>.</p>
     <dd data-md>
      <p>Otherwise (<var>directory</var> and <var>child</var> are not related), <var>path</var> will be null.</p>
      <p>This functionality can be useful if a web application shows a directory
 listing to highlight a file opened through a file picker in that directory listing.</p>
    </dl>
   </div>
   <p><strong class="advisement"> This method is first available in Chrome 82.</strong></p>
   <div class="example" id="filesystemdirectoryhandle-resolve-example">
    <a class="self-link" href="#filesystemdirectoryhandle-resolve-example"></a> 
<pre class="highlight"><c- c1>// Assume we at some point got a valid directory handle.</c->
<c- a>const</c-> dir_ref <c- o>=</c-> current_project_dir<c- p>;</c->
<c- k>if</c-> <c- p>(</c-><c- o>!</c->dir_ref<c- p>)</c-> <c- k>return</c-><c- p>;</c->

<c- c1>// Now get a file reference by showing a file picker:</c->
<c- a>const</c-> file_ref <c- o>=</c-> <c- k>await</c-> self<c- p>.</c->showOpenFilePicker<c- p>();</c->
<c- k>if</c-> <c- p>(</c-><c- o>!</c->file_ref<c- p>)</c-> <c- p>{</c->
    <c- c1>// User cancelled, or otherwise failed to open a file.</c->
    <c- k>return</c-><c- p>;</c->
<c- p>}</c->

<c- c1>// Check if file_ref exists inside dir_ref:</c->
<c- a>const</c-> relative_path <c- o>=</c-> <c- k>await</c-> dir_ref<c- p>.</c->resolve<c- p>(</c->file_ref<c- p>);</c->
<c- k>if</c-> <c- p>(</c->relative_path <c- o>===</c-> <c- kc>null</c-><c- p>)</c-> <c- p>{</c->
    <c- c1>// Not inside dir_ref</c->
<c- p>}</c-> <c- k>else</c-> <c- p>{</c->
    <c- c1>// relative_path is an array of names, giving the relative path</c->
    <c- c1>// from dir_ref to the file that is represented by file_ref:</c->
    assert relative_path<c- p>.</c->pop<c- p>()</c-> <c- o>===</c-> file_ref<c- p>.</c->name<c- p>;</c->

    <c- a>let</c-> entry <c- o>=</c-> dir_ref<c- p>;</c->
    <c- k>for</c-> <c- p>(</c-><c- a>const</c-> name <c- k>of</c-> relative_path<c- p>)</c-> <c- p>{</c->
        entry <c- o>=</c-> <c- k>await</c-> entry<c- p>.</c->getDirectory<c- p>(</c->name<c- p>);</c->
    <c- p>}</c->
    entry <c- o>=</c-> <c- k>await</c-> entry<c- p>.</c->getFile<c- p>(</c->file_ref<c- p>.</c->name<c- p>);</c->

    <c- c1>// Now |entry| will represent the same file on disk as |file_ref|.</c->
    assert <c- k>await</c-> entry<c- p>.</c->isSameEntry<c- p>(</c->file_ref<c- p>)</c-> <c- o>===</c-> <c- kc>true</c-><c- p>;</c->
<c- p>}</c->
</pre>
   </div>
   <div class="algorithm" data-algorithm="resolve(possibleDescendant)" data-algorithm-for="FileSystemDirectoryHandle"> The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle" data-dfn-type="method" data-export id="dom-filesystemdirectoryhandle-resolve"><code>resolve(<var>possibleDescendant</var>)</code></dfn> method,
when invoked, must return the result of <a data-link-type="dfn" href="#entry-resolve" id="ref-for-entry-resolve①">resolving</a> <var>possibleDescendant</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②⓪">entry</a> relative to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②①">entry</a>. </div>
   <h3 class="heading settled" data-level="2.6" id="api-filesystemwritablefilestream"><span class="secno">2.6. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream②">FileSystemWritableFileStream</a></code> interface</span><a class="self-link" href="#api-filesystemwritablefilestream"></a></h3>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-writecommandtype"><code><c- g>WriteCommandType</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="WriteCommandType" data-dfn-type="enum-value" data-export id="dom-writecommandtype-write"><code><c- s>"write"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="WriteCommandType" data-dfn-type="enum-value" data-export id="dom-writecommandtype-seek"><code><c- s>"seek"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="WriteCommandType" data-dfn-type="enum-value" data-export id="dom-writecommandtype-truncate"><code><c- s>"truncate"</c-></code></dfn>,
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-writeparams"><code><c- g>WriteParams</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-writecommandtype" id="ref-for-enumdef-writecommandtype"><c- n>WriteCommandType</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="WriteParams" data-dfn-type="dict-member" data-export data-type="WriteCommandType" id="dom-writeparams-type"><code><c- g>type</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="WriteParams" data-dfn-type="dict-member" data-export data-type="unsigned long long?" id="dom-writeparams-size"><code><c- g>size</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="WriteParams" data-dfn-type="dict-member" data-export data-type="unsigned long long?" id="dom-writeparams-position"><code><c- g>position</c-></code></dfn>;
  (<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource" id="ref-for-BufferSource"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑥"><c- b>USVString</c-></a>)? <dfn class="dfn-paneled idl-code" data-dfn-for="WriteParams" data-dfn-type="dict-member" data-export data-type="(BufferSource or Blob or USVString)?" id="dom-writeparams-data"><code><c- g>data</c-></code></dfn>;
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource" id="ref-for-BufferSource①"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob①"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑦"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams"><c- n>WriteParams</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-filesystemwritechunktype"><code><c- g>FileSystemWriteChunkType</c-></code></dfn>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext③"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemwritablefilestream"><code><c- g>FileSystemWritableFileStream</c-></code></dfn> : <a data-link-type="idl-name" href="https://streams.spec.whatwg.org/#writablestream" id="ref-for-writablestream"><c- n>WritableStream</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑨"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write"><c- g>write</c-></a>(<a data-link-type="idl-name" href="#typedefdef-filesystemwritechunktype" id="ref-for-typedefdef-filesystemwritechunktype"><c- n>FileSystemWriteChunkType</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream/write(data)" data-dfn-type="argument" data-export id="dom-filesystemwritablefilestream-write-data-data"><code><c- g>data</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⓪"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-seek" id="ref-for-dom-filesystemwritablefilestream-seek"><c- g>seek</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long②"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream/seek(position)" data-dfn-type="argument" data-export id="dom-filesystemwritablefilestream-seek-position-position"><code><c- g>position</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-truncate" id="ref-for-dom-filesystemwritablefilestream-truncate"><c- g>truncate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long③"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream/truncate(size)" data-dfn-type="argument" data-export id="dom-filesystemwritablefilestream-truncate-size-size"><code><c- g>size</c-></code></dfn>);
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream③">FileSystemWritableFileStream</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="dfn" data-noexport id="filesystemwritablefilestream-file">[[file]]</dfn> (a <a data-link-type="dfn" href="#file" id="ref-for-file⑦">file entry</a>).</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream④">FileSystemWritableFileStream</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="dfn" data-noexport id="filesystemwritablefilestream-buffer">[[buffer]]</dfn> (a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence②">byte sequence</a>).
It is initially empty.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This buffer can get arbitrarily large, so it is expected that implementations will not keep this in memory,
but instead use a temporary file for this. All access to [[buffer]] is done in promise returning methods and
algorithms, so even though operations on it seem sync, implementations can implement them async.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑤">FileSystemWritableFileStream</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="dfn" data-noexport id="filesystemwritablefilestream-seekoffset">[[seekOffset]]</dfn> (a number).
It is initially 0.</p>
   <div class="note domintro" role="note">
     A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑥">FileSystemWritableFileStream</a></code> object is a <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#writablestream" id="ref-for-writablestream①">WritableStream</a></code> object with additional
convenience methods, which operates on a single file on disk. 
    <p>Upon creation, an underlying sink will have been created and the stream will be usable.
All operations executed on the stream are queuable and producers will be able to respond to backpressure.</p>
    <p>The underlying sink’s write method, and therefore <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#default-writer-write" id="ref-for-default-writer-write">WritableStreamDefaultWriter’s write()</a></code> method, will accept byte-like data or <code class="idl"><a data-link-type="idl" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams①">WriteParams</a></code> as input.</p>
    <p>The <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑦">FileSystemWritableFileStream</a></code> has a file position cursor initialized at byte offset 0 from the top of the file.
When using <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write①">write()</a></code> or by using WritableStream capabilities through the <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#default-writer-write" id="ref-for-default-writer-write①">WritableStreamDefaultWriter’s write()</a></code> method, this position will be advanced based on the number of bytes written through the stream object.</p>
    <p>Similarly, when piping a <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#readablestream" id="ref-for-readablestream">ReadableStream</a></code> into a <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑧">FileSystemWritableFileStream</a></code> object, this position is updated with the number of bytes that passed through the stream.</p>
    <p><code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#ws-get-writer" id="ref-for-ws-get-writer">getWriter()</a></code> returns an instance of <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter" id="ref-for-writablestreamdefaultwriter">WritableStreamDefaultWriter</a></code>.</p>
   </div>
   <div class="algorithm" data-algorithm="create a new FileSystemWritableFileStream">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-new-filesystemwritablefilestream">create a new FileSystemWritableFileStream</dfn> given a <a data-link-type="dfn" href="#file" id="ref-for-file⑧">file entry</a> <var>file</var> in a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#realm" id="ref-for-realm">Realm</a> <var>realm</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>stream</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new">new</a> <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑨">FileSystemWritableFileStream</a></code> in <var>realm</var>.</p>
     <li data-md>
      <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file">[[file]]</a> to <var>file</var>.</p>
     <li data-md>
      <p>Let <var>writeAlgorithm</var> be an algorithm which takes a <var>chunk</var> argument
 and returns the result of running the <a data-link-type="dfn" href="#write-a-chunk" id="ref-for-write-a-chunk">write a chunk</a> algorithm with <var>stream</var> and <var>chunk</var>.</p>
     <li data-md>
      <p>Let <var>closeAlgorithm</var> be the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>closeResult</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①⓪">a new promise</a>.</p>
       <li data-md>
        <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑨">in parallel</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>permissionStatus</var> be the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑦">permission state</a> for a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor⑤">FileSystemPermissionDescriptor</a></code> with <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑧">handle</a></code> representing <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file①">[[file]]</a>,
 and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑥">mode</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite⑨">"readwrite"</a></code>.</p>
         <li data-md>
          <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑨">"granted"</a></code>,
 reject <var>closeResult</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror⑦">NotAllowedError</a></code> and abort.</p>
         <li data-md>
          <p>Perform user agent-specific <a data-link-type="dfn" href="#malware-scans-and-safe-browsing-checks" id="ref-for-malware-scans-and-safe-browsing-checks">malware scans and safe browsing checks</a>.
 If these checks fail, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑦">reject</a> <var>closeResult</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror">AbortError</a></code> and abort.</p>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file②">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data④">binary data</a> to <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①">[[buffer]]</a>.
 If that throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑧">reject</a> <var>closeResult</var> with that exception and abort.</p>
          <p class="note" role="note"><span class="marker">Note:</span> It is expected that this atomically updates the contents of the file on disk
 being written to.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑥">Resolve</a> <var>closeResult</var> with <code>undefined</code>.</p>
        </ol>
       <li data-md>
        <p>Return <var>closeResult</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>highWaterMark</var> be 1.</p>
     <li data-md>
      <p>Let <var>sizeAlgorithm</var> be an algorithm that returns <code>1</code>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up" id="ref-for-writablestream-set-up">Set up</a> <var>stream</var> with <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-writealgorithm" id="ref-for-writablestream-set-up-writealgorithm"><var>writeAlgorithm</var></a> set to <var>writeAlgorithm</var>, <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-closealgorithm" id="ref-for-writablestream-set-up-closealgorithm"><var>closeAlgorithm</var></a> set to <var>closeAlgorithm</var>, <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-highwatermark" id="ref-for-writablestream-set-up-highwatermark"><var>highWaterMark</var></a> set to <var>highWaterMark</var>, and <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-sizealgorithm" id="ref-for-writablestream-set-up-sizealgorithm"><var>sizeAlgorithm</var></a> set to <var>sizeAlgorithm</var>.</p>
     <li data-md>
      <p>Return <var>stream</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="write a chunk">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="write-a-chunk">write a chunk</dfn> algorithm,
given a <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream①⓪">FileSystemWritableFileStream</a></code> <var>stream</var> and <var>chunk</var>,
runs these steps: 
    <ol>
     <li data-md>
      <p>Let <var>input</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#javascript-string-convert" id="ref-for-javascript-string-convert">converting</a> <var>chunk</var> to a <code class="idl"><a data-link-type="idl" href="#typedefdef-filesystemwritechunktype" id="ref-for-typedefdef-filesystemwritechunktype①">FileSystemWriteChunkType</a></code>.
 If this throws an exception, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> that exception.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①①">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①⓪">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>permissionStatus</var> be the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑧">permission state</a> for a <code class="idl"><a data-link-type="idl" href="#dictdef-filesystempermissiondescriptor" id="ref-for-dictdef-filesystempermissiondescriptor⑥">FileSystemPermissionDescriptor</a></code> with <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle⑨">handle</a></code> representing <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file③">[[file]]</a>,
  and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑦">mode</a></code> = <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite①⓪">"readwrite"</a></code>.</p>
       <li data-md>
        <p>If <var>permissionStatus</var> is not <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①⓪">"granted"</a></code>,
  reject <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror⑧">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>command</var> be <var>input</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type">type</a></code> if <var>input</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams②">WriteParams</a></code>,
  and <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-write" id="ref-for-dom-writecommandtype-write">"write"</a></code> otherwise.</p>
       <li data-md>
        <p>If <var>command</var> is <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-write" id="ref-for-dom-writecommandtype-write①">"write"</a></code>:</p>
        <ol>
         <li data-md>
          <p>Let <var>data</var> be <var>input</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-data" id="ref-for-dom-writeparams-data">data</a></code> if <var>input</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams③">WriteParams</a></code>,
 and <var>input</var> otherwise.</p>
         <li data-md>
          <p>If <var>data</var> is <code>undefined</code>,
 reject <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code> and abort.</p>
         <li data-md>
          <p>Let <var>writePosition</var> be <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset">[[seekOffset]]</a>.</p>
         <li data-md>
          <p>If <var>input</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams④">WriteParams</a></code> and <var>input</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position">position</a></code> is not <code>undefined</code>,
 set <var>writePosition</var> to <var>input</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position①">position</a></code>.</p>
         <li data-md>
          <p>Let <var>oldSize</var> be <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer②">[[buffer]]</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length">length</a>.</p>
         <li data-md>
          <p>If <var>data</var> is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#BufferSource" id="ref-for-BufferSource②">BufferSource</a></code>,
 let <var>dataBytes</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-get-buffer-source-copy" id="ref-for-dfn-get-buffer-source-copy">a copy of</a> <var>data</var>.</p>
         <li data-md>
          <p>Else if <var>data</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob②">Blob</a></code>:</p>
          <ol>
           <li data-md>
            <p>Let <var>dataBytes</var> be the result of performing the <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#readOperation" id="ref-for-readOperation">read operation</a> on <var>data</var>.
  If this throws an exception, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑨">reject</a> <var>p</var> with that exception and abort.</p>
          </ol>
         <li data-md>
          <p>Else:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>data</var> is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑧">USVString</a></code>.</p>
           <li data-md>
            <p>Let <var>dataBytes</var> be the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode">UTF-8 encoding</a> <var>data</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>writePosition</var> is larger than <var>oldSize</var>,
 append <var>writePosition</var> - <var>oldSize</var> <code>0x00</code> (NUL) bytes to the end of <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer③">[[buffer]]</a>.</p>
          <p class="note" role="note"><span class="marker">Note:</span> Implementations are expected to behave as if the skipped over file contents
 are indeed filled with NUL bytes. That doesn’t mean these bytes have to actually be
 written to disk and take up disk space. Instead most file systems support so called
 sparse files, where these NUL bytes don’t take up actual disk space.</p>
         <li data-md>
          <p>Let <var>head</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence③">byte sequence</a> containing the first <var>writePosition</var> bytes of <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer④">[[buffer]]</a>.</p>
         <li data-md>
          <p>Let <var>tail</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence④">byte sequence</a>.</p>
         <li data-md>
          <p>If <var>writePosition</var> + <var>data</var>.<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length①">length</a> is smaller than <var>oldSize</var>:</p>
          <ol>
           <li data-md>
            <p>Let <var>tail</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑤">byte sequence</a> containing the last <var>oldSize</var> - (<var>writePosition</var> + <var>data</var>.<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length②">length</a>) bytes of <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑤">[[buffer]]</a>.</p>
          </ol>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑥">[[buffer]]</a> to the concatenation of <var>head</var>, <var>data</var> and <var>tail</var>.</p>
         <li data-md>
          <p>If the operations modifying <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑦">[[buffer]]</a> in the previous steps failed
 due to exceeding the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota">storage quota</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⓪">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#quotaexceedederror" id="ref-for-quotaexceedederror">QuotaExceededError</a></code> and abort,
 leaving <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑧">[[buffer]]</a> unmodified.</p>
          <p class="note" role="note"><span class="marker">Note:</span> <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota①">Storage quota</a> only applies to files stored in the <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system①">origin private file system</a>.
 However this operation could still fail for other files, for example if the disk being written
 to runs out of disk space.</p>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset①">[[seekOffset]]</a> to <var>writePosition</var> + <var>data</var>.<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length③">length</a>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑦">Resolve</a> <var>p</var>.</p>
        </ol>
       <li data-md>
        <p>Else if <var>command</var> is <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-seek" id="ref-for-dom-writecommandtype-seek">"seek"</a></code>:</p>
        <ol>
         <li data-md>
          <p>If <var>chunk</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position②">position</a></code> is <code>undefined</code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②①">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code> and abort.</p>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset②">[[seekOffset]]</a> to <var>chunk</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position③">position</a></code>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑧">Resolve</a> <var>p</var>.</p>
        </ol>
       <li data-md>
        <p>Else if <var>command</var> is <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate">"truncate"</a></code>:</p>
        <ol>
         <li data-md>
          <p>If <var>chunk</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-size" id="ref-for-dom-writeparams-size">size</a></code> is <code>undefined</code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②②">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code> and abort.</p>
         <li data-md>
          <p>Let <var>newSize</var> be <var>chunk</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-size" id="ref-for-dom-writeparams-size①">size</a></code>.</p>
         <li data-md>
          <p>Let <var>oldSize</var> be <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑨">[[buffer]]</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length④">length</a>.</p>
         <li data-md>
          <p>If <var>newSize</var> is larger than <var>oldSize</var>:</p>
          <ol>
           <li data-md>
            <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①⓪">[[buffer]]</a> to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑥">byte sequence</a> formed by concating <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①①">[[buffer]]</a> with a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑦">byte sequence</a> containing <var>newSize</var>-<var>oldSize</var> <code>0x00</code> bytes.</p>
           <li data-md>
            <p>If the operation in the previous step failed due to exceeding the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota②">storage quota</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②③">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#quotaexceedederror" id="ref-for-quotaexceedederror①">QuotaExceededError</a></code> and abort,
  leaving <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①②">[[buffer]]</a> unmodified.</p>
            <p class="note" role="note"><span class="marker">Note:</span> <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota③">Storage quota</a> only applies to files stored in the <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system②">origin private file system</a>.
  However this operation could still fail for other files, for example if the disk being written
  to runs out of disk space.</p>
          </ol>
         <li data-md>
          <p>Else if <var>newSize</var> is smaller than <var>oldSize</var>:</p>
          <ol>
           <li data-md>
            <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①③">[[buffer]]</a> to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑧">byte sequence</a> containing the first <var>newSize</var> bytes
  in <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①④">[[buffer]]</a>.</p>
          </ol>
         <li data-md>
          <p>If <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset③">[[seekOffset]]</a> is bigger than <var>newSize</var>,
 set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset④">[[seekOffset]]</a> to <var>newSize</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑨">Resolve</a> <var>p</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.6.1" id="api-filesystemwritablefilestream-write"><span class="secno">2.6.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write②">write()</a></code> method</span><a class="self-link" href="#api-filesystemwritablefilestream-write"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write③">write</a></code>(<var>data</var>)
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write④">write</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type①">type</a></code>: <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-write" id="ref-for-dom-writecommandtype-write②">"write"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-data" id="ref-for-dom-writeparams-data①">data</a></code>: <var>data</var> })
     <dd data-md>
      <p>Writes the content of <var>data</var> into the file associated with <var>stream</var> at the current file
 cursor offset.</p>
      <p>No changes are written to the actual file on disk until the stream has been closed.
 Changes are typically written to a temporary file instead.</p>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write⑤">write</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type②">type</a></code>: <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-write" id="ref-for-dom-writecommandtype-write③">"write"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position④">position</a></code>: <var>position</var>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-data" id="ref-for-dom-writeparams-data②">data</a></code>: <var>data</var> })
     <dd data-md>
      <p>Writes the content of <var>data</var> into the file associated with <var>stream</var> at <var>position</var> bytes from the top of the file. Also updates the current file cursor offset to the
 end of the written data.</p>
      <p>No changes are written to the actual file on disk until the stream has been closed.
 Changes are typically written to a temporary file instead.</p>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write⑥">write</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type③">type</a></code>: <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-seek" id="ref-for-dom-writecommandtype-seek①">"seek"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position⑤">position</a></code>: <var>position</var> })
     <dd data-md>
      <p>Updates the current file cursor offset the <var>position</var> bytes from the top of the file.</p>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write⑦">write</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type④">type</a></code>: <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate①">"truncate"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-size" id="ref-for-dom-writeparams-size②">size</a></code>: <var>size</var> })
     <dd data-md>
      <p>Resizes the file associated with <var>stream</var> to be <var>size</var> bytes long. If <var>size</var> is larger than
 the current file size this pads the file with null bytes, otherwise it truncates the file.</p>
      <p>The file cursor is updated when <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate②">truncate</a></code> is called. If the offset is smaller than offset,
 it remains unchanged. If the offset is larger than <var>size</var>, the offset is set to <var>size</var> to
 ensure that subsequent writes do not error.</p>
      <p>No changes are written to the actual file until on disk until the stream has been closed.
 Changes are typically written to a temporary file instead.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="write(data)" data-algorithm-for="FileSystemWritableFileStream">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="method" data-export id="dom-filesystemwritablefilestream-write"><code>write(<var>data</var>)</code></dfn> method, when invoked, must run
these steps: 
    <ol>
     <li data-md>
      <p>Let <var>writer</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-get-a-writer" id="ref-for-writablestream-get-a-writer">getting a writer</a> for <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk" id="ref-for-writablestreamdefaultwriter-write-a-chunk">writing a chunk</a> to <var>writer</var> given <var>data</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release" id="ref-for-writablestreamdefaultwriter-release">Release</a> <var>writer</var>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.6.2" id="api-filesystemwritablefilestream-seek"><span class="secno">2.6.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-seek" id="ref-for-dom-filesystemwritablefilestream-seek①">seek()</a></code> method</span><a class="self-link" href="#api-filesystemwritablefilestream-seek"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-seek" id="ref-for-dom-filesystemwritablefilestream-seek②">seek</a></code>(<var>position</var>)
     <dd data-md>
      <p>Updates the current file cursor offset the <var>position</var> bytes from the top of the file.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="seek(position)" data-algorithm-for="FileSystemWritableFileStream">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="method" data-export id="dom-filesystemwritablefilestream-seek"><code>seek(<var>position</var>)</code></dfn> method, when invoked, must run these
steps: 
    <ol>
     <li data-md>
      <p>Let <var>writer</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-get-a-writer" id="ref-for-writablestream-get-a-writer①">getting a writer</a> for <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a>.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk" id="ref-for-writablestreamdefaultwriter-write-a-chunk①">writing a chunk</a> to <var>writer</var> given
  «[ "<code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type⑤">type</a></code>" → <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-seek" id="ref-for-dom-writecommandtype-seek②">"seek"</a></code>, "<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position⑥">position</a></code>" → <var>position</var> ]».</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release" id="ref-for-writablestreamdefaultwriter-release①">Release</a> <var>writer</var>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.6.3" id="api-filesystemwritablefilestream-truncate"><span class="secno">2.6.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-truncate" id="ref-for-dom-filesystemwritablefilestream-truncate①">truncate()</a></code> method</span><a class="self-link" href="#api-filesystemwritablefilestream-truncate"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-truncate" id="ref-for-dom-filesystemwritablefilestream-truncate②">truncate</a></code>(<var>size</var>)
     <dd data-md>
      <p>Resizes the file associated with <var>stream</var> to be <var>size</var> bytes long. If <var>size</var> is larger than
 the current file size this pads the file with null bytes, otherwise it truncates the file.</p>
      <p>The file cursor is updated when <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate③">truncate</a></code> is called. If the offset is smaller than offset,
 it remains unchanged. If the offset is larger than <var>size</var>, the offset is set to <var>size</var> to
 ensure that subsequent writes do not error.</p>
      <p>No changes are written to the actual file until on disk until the stream has been closed.
 Changes are typically written to a temporary file instead.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="truncate(size)" data-algorithm-for="FileSystemWritableFileStream">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="method" data-export id="dom-filesystemwritablefilestream-truncate"><code>truncate(<var>size</var>)</code></dfn> method, when invoked, must run these
steps: 
    <ol>
     <li data-md>
      <p>Let <var>writer</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-get-a-writer" id="ref-for-writablestream-get-a-writer②">getting a writer</a> for <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a>.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk" id="ref-for-writablestreamdefaultwriter-write-a-chunk②">writing a chunk</a> to <var>writer</var> given
  «[ "<code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type⑥">type</a></code>" → <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate④">"truncate"</a></code>, "<code class="idl"><a data-link-type="idl" href="#dom-writeparams-size" id="ref-for-dom-writeparams-size③">size</a></code>" → <var>size</var> ]».</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release" id="ref-for-writablestreamdefaultwriter-release②">Release</a> <var>writer</var>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="3" id="local-filesystem"><span class="secno">3. </span><span class="content">Accessing Local File System</span><a class="self-link" href="#local-filesystem"></a></h2>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filepickeraccepttype"><code><c- g>FilePickerAcceptType</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑨"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FilePickerAcceptType" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-filepickeraccepttype-description"><code><c- g>description</c-></code></dfn>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-record" id="ref-for-idl-record"><c- b>record</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①⓪"><c- b>USVString</c-></a>, (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①①"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①②"><c- b>USVString</c-></a>>)> <dfn class="dfn-paneled idl-code" data-dfn-for="FilePickerAcceptType" data-dfn-type="dict-member" data-export data-type="record<USVString, (USVString or sequence<USVString>)>" id="dom-filepickeraccepttype-accept"><code><c- g>accept</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filepickeroptions"><code><c- g>FilePickerOptions</c-></code></dfn> {
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-filepickeraccepttype" id="ref-for-dictdef-filepickeraccepttype"><c- n>FilePickerAcceptType</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="FilePickerOptions" data-dfn-type="dict-member" data-export data-type="sequence<FilePickerAcceptType>" id="dom-filepickeroptions-types"><code><c- g>types</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FilePickerOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-filepickeroptions-excludeacceptalloption"><code><c- g>excludeAcceptAllOption</c-></code></dfn> = <c- b>false</c->;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-openfilepickeroptions"><code><c- g>OpenFilePickerOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions"><c- n>FilePickerOptions</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑥"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="OpenFilePickerOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-openfilepickeroptions-multiple"><code><c- g>multiple</c-></code></dfn> = <c- b>false</c->;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-savefilepickeroptions"><code><c- g>SaveFilePickerOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions①"><c- n>FilePickerOptions</c-></a> {
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-directorypickeroptions"><code><c- g>DirectoryPickerOptions</c-></code></dfn> {
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext④"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①"><c- g>Window</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①②"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle⑧"><c- n>FileSystemFileHandle</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker"><c- g>showOpenFilePicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-openfilepickeroptions" id="ref-for-dictdef-openfilepickeroptions"><c- n>OpenFilePickerOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Window/showOpenFilePicker(options), Window/showOpenFilePicker()" data-dfn-type="argument" data-export id="dom-window-showopenfilepicker-options-options"><code><c- g>options</c-></code></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①③"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle⑨"><c- n>FileSystemFileHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker"><c- g>showSaveFilePicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-savefilepickeroptions" id="ref-for-dictdef-savefilepickeroptions"><c- n>SaveFilePickerOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Window/showSaveFilePicker(options), Window/showSaveFilePicker()" data-dfn-type="argument" data-export id="dom-window-showsavefilepicker-options-options"><code><c- g>options</c-></code></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①④"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①⓪"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker"><c- g>showDirectoryPicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-directorypickeroptions" id="ref-for-dictdef-directorypickeroptions"><c- n>DirectoryPickerOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Window/showDirectoryPicker(options), Window/showDirectoryPicker()" data-dfn-type="argument" data-export id="dom-window-showdirectorypicker-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker①">showOpenFilePicker()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker①">showSaveFilePicker()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker①">showDirectoryPicker()</a></code> methods
are together known as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="local-file-system-handle-factories">local file system handle factories</dfn>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> What is referred to as the "local file system" in this spec, does not have to
strictly refer to the file system on the local device. What we call the local file system
could just as well be backed by a cloud provider. For example on Chrome OS these
file pickers will also let you pick files and directories on Google Drive.</p>
   <p><strong class="advisement"> In Chrome versions earlier than 85, this was implemented as a generic <code>chooseFileSystemEntries</code> method.</strong></p>
   <h3 class="heading settled" data-level="3.1" id="local-file-system-permissions"><span class="secno">3.1. </span><span class="content">Local File System Permissions</span><a class="self-link" href="#local-file-system-permissions"></a></h3>
   <p>The fact that the user picked the specific files returned by the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories②">local file system handle factories</a> in a prompt
should be treated by the user agent as the user intending to grant read access to the website
for the returned files. As such, at the time the promise returned by one of the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories③">local file system handle factories</a> resolves, <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state⑨">permission state</a> for a descriptor with <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle①⓪">handle</a></code> set to the returned handle,
and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑧">mode</a></code> set to <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read" id="ref-for-dom-filesystempermissionmode-read⑨">"read"</a></code> should be <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①①">"granted"</a></code>.</p>
   <p>Additionally for calls to <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker②">showSaveFilePicker</a></code> the <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-permission-state" id="ref-for-dfn-permission-state①⓪">permission state</a> for a descriptor with <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-handle" id="ref-for-dom-filesystempermissiondescriptor-handle①①">handle</a></code> set to the returned handle,
and <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissiondescriptor-mode" id="ref-for-dom-filesystempermissiondescriptor-mode⑨">mode</a></code> set to <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite" id="ref-for-dom-filesystempermissionmode-readwrite①①">readwrite</a></code> should be <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①②">"granted"</a></code>.</p>
   <div class="algorithm" data-algorithm="is allowed to show a file picker">
     To verify that an <var>environment</var> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="is-allowed-to-show-a-file-picker">is allowed to show a file picker</dfn>, run these steps: 
    <ol>
     <li data-md>
      <p>If <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③">origin</a> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque">opaque origin</a>,
 return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror③">SecurityError</a></code>.</p>
     <li data-md>
      <p>If <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin④">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin②">same origin</a> with <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin①">top-level origin</a>,
 return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror④">SecurityError</a></code>.</p>
     <li data-md>
      <p>Let <var>global</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global①">global object</a>.</p>
     <li data-md>
      <p>If <var>global</var> does not have <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation①">transient activation</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror⑤">SecurityError</a></code>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.2" id="api-showopenfilepicker"><span class="secno">3.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker②">showOpenFilePicker()</a></code> method</span><a class="self-link" href="#api-showopenfilepicker"></a></h3>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>[ <var>handle</var> ] = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker③">showOpenFilePicker()</a></code>
     <dt data-md>[ <var>handle</var> ] = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker④">showOpenFilePicker</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-openfilepickeroptions-multiple" id="ref-for-dom-openfilepickeroptions-multiple">multiple</a></code>: false })
     <dd data-md>
      <p>Shows a file picker that lets a user select a single existing file, returning a handle for
the selected file.</p>
     <dt data-md>handles = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker⑤">showOpenFilePicker</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-openfilepickeroptions-multiple" id="ref-for-dom-openfilepickeroptions-multiple①">multiple</a></code>: true })
     <dd data-md>
      <p>Shows a file picker that lets a user select multiple existing files, returning handles for
the selected files.</p>
      <p>Additional options can be passed to <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker⑥">showOpenFilePicker()</a></code> to indicate the types of files
the website wants the user to select. See <a href="#api-filpickeroptions-types">§ 3.4 FilePickerOptions.types</a> for details.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="showOpenFilePicker(options)" data-algorithm-for="Window">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="method" data-export data-lt="showOpenFilePicker(options)|showOpenFilePicker()" id="dom-window-showopenfilepicker"><code>showOpenFilePicker(<var>options</var>)</code></dfn> method, when invoked, must run
these steps: 
    <ol>
     <li data-md>
      <p>Let <var>accepts options</var> be the result of <a data-link-type="dfn" href="#process-accept-types" id="ref-for-process-accept-types">processing accept types</a> given <var>options</var>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a></b>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object③">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>global</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global②">global object</a>.</p>
     <li data-md>
      <p>Verify that <var>environment</var> <a data-link-type="dfn" href="#is-allowed-to-show-a-file-picker" id="ref-for-is-allowed-to-show-a-file-picker">is allowed to show a file picker</a>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①②">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①①">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Optionally, wait until any prior execution of this algorithm has terminated.</p>
       <li data-md>
        <p>Display a prompt to the user requesting that the user pick some files.
 If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-openfilepickeroptions-multiple" id="ref-for-dom-openfilepickeroptions-multiple②">multiple</a></code> is false, there must be no more than one file selected;
 otherwise any number may be selected.</p>
        <p>The displayed prompt should let the user pick one of the <var>accepts options</var> to filter the list of displayed files.
 Exactly how this is implemented, and what this prompt looks like is left up to the user agent.</p>
       <li data-md>
        <p>Wait for the user to have made their selection.</p>
       <li data-md>
        <p>If the user dismissed the prompt without making a selection, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②④">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror①">AbortError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entries</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <a data-link-type="dfn" href="#file" id="ref-for-file⑨">file entries</a> representing the selected files or directories.</p>
       <li data-md>
        <p>Let <var>result</var> be a empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate④">For each</a> <var>entry</var> of <var>entries</var>:</p>
        <ol>
         <li data-md>
          <p>If <var>entry</var> is deemed <a data-link-type="dfn" href="#too-sensitive-or-dangerous" id="ref-for-too-sensitive-or-dangerous">too sensitive or dangerous</a> to be exposed to this website by the user agent:</p>
          <ol>
           <li data-md>
            <p>Inform the user that the selected files or directories can’t be exposed to this website.</p>
           <li data-md>
            <p>At the discretion of the user agent,
 either go back to the beginning of these <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①②">in parallel</a> steps,
 or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑤">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror②">AbortError</a></code> and abort.</p>
          </ol>
         <li data-md>
          <p>Add a new <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle①⓪">FileSystemFileHandle</a></code> associated with <var>entry</var> to <var>result</var>.</p>
        </ol>
       <li data-md>
        <p>Perform the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification">activation notification</a> steps in <var>global</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc">browsing context</a>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This lets a website immediately perform operations on the returned handles that
 might require user activation, such as requesting more permissions.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②⓪">Resolve</a> <var>p</var> with <var>result</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.3" id="api-showsavefilepicker"><span class="secno">3.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker③">showSaveFilePicker()</a></code> method</span><a class="self-link" href="#api-showsavefilepicker"></a></h3>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker④">showSaveFilePicker</a></code>( <var>options</var> )
     <dd data-md>
      <p>Shows a file picker that lets a user select a single file, returning a handle for
the selected file. The selected file does not have to exist already. If the selected
file does not exist a new empty file is created before this method returns, otherwise
the existing file is cleared before this method returned.</p>
      <p>Additional <var>options</var> can be passed to <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker⑤">showSaveFilePicker()</a></code> to indicate the types of files
the website wants the user to select. See <a href="#api-filpickeroptions-types">§ 3.4 FilePickerOptions.types</a> for details.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="showSaveFilePicker(options)" data-algorithm-for="Window">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="method" data-export data-lt="showSaveFilePicker(options)|showSaveFilePicker()" id="dom-window-showsavefilepicker"><code>showSaveFilePicker(<var>options</var>)</code></dfn> method, when invoked, must run
these steps: 
    <ol>
     <li data-md>
      <p>Let <var>accepts options</var> be the result of <a data-link-type="dfn" href="#process-accept-types" id="ref-for-process-accept-types①">processing accept types</a> given <var>options</var>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②②">this</a></b>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object④">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>global</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global③">global object</a>.</p>
     <li data-md>
      <p>Verify that <var>environment</var> <a data-link-type="dfn" href="#is-allowed-to-show-a-file-picker" id="ref-for-is-allowed-to-show-a-file-picker①">is allowed to show a file picker</a>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①③">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①③">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Optionally, wait until any prior execution of this algorithm has terminated.</p>
       <li data-md>
        <p>Display a prompt to the user requesting that the user pick exactly one file.</p>
        <p>The displayed prompt should let the user pick one of the <var>accepts options</var> to filter the list of displayed files.
 Exactly how this is implemented, and what this prompt looks like is left up to the user agent.
 If <var>accepts options</var> are displayed in the UI, the selected option should also be used to suggest an extension
 to append to a user provided file name, but this is not required. In particular user agents are free to ignore
 potentially dangerous suffixes such as those ending in <code>".lnk"</code> or <code>".local"</code>.</p>
       <li data-md>
        <p>Wait for the user to have made their selection.</p>
       <li data-md>
        <p>If the user dismissed the prompt without making a selection, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑥">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror③">AbortError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be a <a data-link-type="dfn" href="#file" id="ref-for-file①⓪">file entry</a> representing the selected file.</p>
       <li data-md>
        <p>If <var>entry</var> is deemed <a data-link-type="dfn" href="#too-sensitive-or-dangerous" id="ref-for-too-sensitive-or-dangerous①">too sensitive or dangerous</a> to be exposed to this website by the user agent:</p>
        <ol>
         <li data-md>
          <p>Inform the user that the selected files or directories can’t be exposed to this website.</p>
         <li data-md>
          <p>At the discretion of the user agent,
 either go back to the beginning of these <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①④">in parallel</a> steps,
 or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑦">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror④">AbortError</a></code> and abort.</p>
        </ol>
       <li data-md>
        <p>Set <var>entry</var>’s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data⑤">binary data</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑨">byte sequence</a>.</p>
       <li data-md>
        <p>Set <var>result</var> to a new <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle①①">FileSystemFileHandle</a></code> associated with <var>entry</var>.</p>
       <li data-md>
        <p>Perform the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification①">activation notification</a> steps in <var>global</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc①">browsing context</a>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This lets a website immediately perform operations on the returned handles that
 might require user activation, such as requesting more permissions.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②①">Resolve</a> <var>p</var> with <var>result</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.4" id="api-filpickeroptions-types"><span class="secno">3.4. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions②">FilePickerOptions</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types">types</a></code></span><a class="self-link" href="#api-filpickeroptions-types"></a></h3>
   <div class="note domintro" role="note">
     The <code class="idl"><a data-link-type="idl" href="#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker⑦">showOpenFilePicker(options)</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker⑥">showSaveFilePicker(options)</a></code> methods accept a <code class="idl"><a data-link-type="idl" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions③">FilePickerOptions</a></code> argument, which lets the website specify the types of files
the file picker will let the user select. 
    <p>Each entry in <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types①">types</a></code> specifies a single user selectable option
for filtering the files displayed in the file picker.</p>
    <p>Each option consists of an <span class="allow-2119">optional</span> <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-description" id="ref-for-dom-filepickeraccepttype-description">description</a></code> and a number of MIME types and extensions (specified as a mapping of
MIME type to a list of extensions). If no description is provided one will be generated.
Extensions have to be strings that start with a "." and only contain <a data-link-type="dfn" href="#valid-suffix-code-point" id="ref-for-valid-suffix-code-point">valid suffix code points</a>.
Additionally extensions are limited to a length of 16 code points.</p>
    <p>In addition to complete MIME types, "*" can be used as the subtype of a MIME type to match
for example all image formats with "image/*".</p>
    <p>Websites <span class="allow-2119">should</span> always provide both MIME types and file
extensions for each option. On platforms that only use file extensions to describe file types
user agents can match on the extensions, while on platforms that don’t use extensions,
user agents can match on MIME type.</p>
    <p>By default the file picker will also include an option to not apply any filter,
letting the user select any file. Set <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-excludeacceptalloption" id="ref-for-dom-filepickeroptions-excludeacceptalloption">excludeAcceptAllOption</a></code> to <code>true</code> to not
include this option in the file picker.</p>
    <p>For example , the following options will let the user pick one of three different filters.
One for text files (either plain text or HTML), one for images, and a third one that doesn’t apply
any filter and lets the user select any file.</p>
<pre class="example highlight" id="filepickeroptions-example1"><a class="self-link" href="#filepickeroptions-example1"></a><c- a>const</c-> options <c- o>=</c-> <c- p>{</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types②">types</a></code><c- o>:</c-> <c- p>[</c->
    <c- p>{</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-description" id="ref-for-dom-filepickeraccepttype-description①">description</a></code><c- o>:</c-> <c- t>'Text Files'</c-><c- p>,</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept">accept</a></code><c- o>:</c-> <c- p>{</c->
        <c- t>'text/plain'</c-><c- o>:</c-> <c- p>[</c-><c- t>'.txt'</c-><c- p>,</c-> <c- t>'.text'</c-><c- p>],</c->
        <c- t>'text/html'</c-><c- o>:</c-> <c- p>[</c-><c- t>'.html'</c-><c- p>,</c-> <c- t>'.htm'</c-><c- p>]</c->
      <c- p>}</c->
    <c- p>},</c->
    <c- p>{</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-description" id="ref-for-dom-filepickeraccepttype-description②">description</a></code><c- o>:</c-> <c- t>'Images'</c-><c- p>,</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept①">accept</a></code><c- o>:</c-> <c- p>{</c->
        <c- t>'image/*'</c-><c- o>:</c-> <c- p>[</c-><c- t>'.png'</c-><c- p>,</c-> <c- t>'.gif'</c-><c- p>,</c-> <c- t>'.jpeg'</c-><c- p>,</c-> <c- t>'.jpg'</c-><c- p>]</c->
      <c- p>}</c->
    <c- p>}</c->
  <c- p>],</c->
<c- p>};</c->
</pre>
    <p>On the other hand, the following example will only let the user select SVG files. The dialog
will not show an option to not apply any filters.</p>
<pre class="example highlight" id="filepickeroptions-example2"><a class="self-link" href="#filepickeroptions-example2"></a><c- a>const</c-> options <c- o>=</c-> <c- p>{</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types③">types</a></code><c- o>:</c-> <c- p>[</c->
    <c- p>{</c->
      <code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept②">accept</a></code><c- o>:</c-> <c- p>{</c->
        <c- t>'image/svg+xml'</c-><c- o>:</c-> <c- t>'.svg'</c->
      <c- p>}</c->
    <c- p>},</c->
  <c- p>],</c->
  <code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-excludeacceptalloption" id="ref-for-dom-filepickeroptions-excludeacceptalloption①">excludeAcceptAllOption</a></code><c- o>:</c-> <c- kc>true</c->
<c- p>};</c->
</pre>
   </div>
   <div class="algorithm" data-algorithm="process accept types">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="process-accept-types">process accept types</dfn>, given <code class="idl"><a data-link-type="idl" href="#dictdef-filepickeroptions" id="ref-for-dictdef-filepickeroptions④">FilePickerOptions</a></code> <var>options</var>,
run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>accepts options</var> be a empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> of <a data-link-type="dfn">pairs</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑤">For each</a> <var>type</var> of <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-types" id="ref-for-dom-filepickeroptions-types④">types</a></code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>description</var> be <var>type</var>.<code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-description" id="ref-for-dom-filepickeraccepttype-description③">description</a></code>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">For each</a> <var>typeString</var> → <var>suffixes</var> of <var>type</var>.<code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept③">accept</a></code>:</p>
        <ol>
         <li data-md>
          <p>Let <var>parsedType</var> be the result of <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type" id="ref-for-parse-a-mime-type">parse a MIME type</a> with <var>typeString</var>.</p>
         <li data-md>
          <p>If <var>parsedType</var> is failure, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code>.</p>
         <li data-md>
          <p>If <var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parameters" id="ref-for-parameters">parameters</a> are not empty, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code>.</p>
         <li data-md>
          <p>If <var>suffixes</var> is a string:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="#validate-a-suffix" id="ref-for-validate-a-suffix">Validate a suffix</a> given <var>suffixes</var>.</p>
          </ol>
         <li data-md>
          <p>Otherwise, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑥">for each</a> <var>suffix</var> of <var>suffixes</var>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="#validate-a-suffix" id="ref-for-validate-a-suffix①">Validate a suffix</a> given <var>suffix</var>.</p>
          </ol>
        </ol>
       <li data-md>
        <p>Let <var>filter</var> be the following steps, given a <var>filename</var> (a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②">string</a>), and a <var>type</var> (a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type" id="ref-for-mime-type">MIME type</a>):</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate①">For each</a> <var>typeString</var> → <var>suffixes</var> of <var>type</var>.<code class="idl"><a data-link-type="idl" href="#dom-filepickeraccepttype-accept" id="ref-for-dom-filepickeraccepttype-accept④">accept</a></code>:</p>
         <li data-md>
          <p>Let <var>parsedType</var> be the result of <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type" id="ref-for-parse-a-mime-type①">parse a MIME type</a> with <var>typeString</var>.</p>
          <ol>
           <li data-md>
            <p>If <var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#subtype" id="ref-for-subtype">subtype</a> is "*":</p>
            <ol>
             <li data-md>
              <p>If <var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#type" id="ref-for-type">type</a> is "*", return <code>true</code>.</p>
             <li data-md>
              <p>If <var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#type" id="ref-for-type①">type</a> is <var>type</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#type" id="ref-for-type②">type</a>, return <code>true</code>.</p>
            </ol>
           <li data-md>
            <p><var>parsedType</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type-essence" id="ref-for-mime-type-essence">essence</a> is <var>type</var>’s <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type-essence" id="ref-for-mime-type-essence①">essence</a>, return <code>true</code>.</p>
           <li data-md>
            <p>If <var>suffixes</var> is a string, set <var>suffixes</var> to « <var>suffixes</var> ».</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑦">For each</a> <var>suffix</var> of <var>suffixes</var>:</p>
            <ol>
             <li data-md>
              <p>If <var>filename</var> ends with <var>suffix</var>, return <code>true</code>.</p>
            </ol>
          </ol>
         <li data-md>
          <p>Return <code>false</code>.</p>
        </ol>
       <li data-md>
        <p>If <var>description</var> is an empty string,
set <var>description</var> to some user understandable string describing <var>filter</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> <var>description</var>/<var>filter</var> to <var>accepts options</var>.</p>
      </ol>
     <li data-md>
      <p>If either <var>accepts options</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">empty</a>,
or <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filepickeroptions-excludeacceptalloption" id="ref-for-dom-filepickeroptions-excludeacceptalloption②">excludeAcceptAllOption</a></code> is <code>false</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>description</var> be a user understandable string describing "all files".</p>
        <ol>
         <li data-md>
          <p>Let <var>filter</var> be an algorithm that returns <code>true</code>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">Append</a> <var>description</var>/<var>filter</var> to <var>accepts options</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>accepts options</var> is empty, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>Return <var>accepts options</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="validate a suffix">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-a-suffix">validate a suffix</dfn> <var>suffix</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>If <var>suffix</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-starts-with" id="ref-for-string-starts-with">start with</a> ".", throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>suffix</var> contains any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point①">code points</a> that are not <a data-link-type="dfn" href="#valid-suffix-code-point" id="ref-for-valid-suffix-code-point①">valid suffix code points</a>,
 throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>suffix</var> ends with ".", throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>suffix</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length">length</a> is more than 16, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①②">TypeError</a></code>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.5" id="api-showdirectorypicker"><span class="secno">3.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker②">showDirectoryPicker()</a></code> method</span><a class="self-link" href="#api-showdirectorypicker"></a></h3>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> = await window . <code class="idl"><a data-link-type="idl" href="#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker③">showDirectoryPicker()</a></code>
     <dd data-md>
      <p>Shows a directory picker that lets the user select a single directory, returning a handle for
the selected directory.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="showDirectoryPicker(options)" data-algorithm-for="Window">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="method" data-export data-lt="showDirectoryPicker(options)|showDirectoryPicker()" id="dom-window-showdirectorypicker"><code>showDirectoryPicker(<var>options</var>)</code></dfn> method, when invoked, must run
these steps: 
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be <b><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②③">this</a></b>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑤">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>global</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global④">global object</a>.</p>
     <li data-md>
      <p>Verify that <var>environment</var> <a data-link-type="dfn" href="#is-allowed-to-show-a-file-picker" id="ref-for-is-allowed-to-show-a-file-picker②">is allowed to show a file picker</a>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①④">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①⑤">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Optionally, wait until any prior execution of this algorithm has terminated.</p>
       <li data-md>
        <p>Display a prompt to the user requesting that the user pick a directory.</p>
       <li data-md>
        <p>Wait for the user to have made their selection.</p>
       <li data-md>
        <p>If the user dismissed the prompt without making a selection, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑧">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror⑤">AbortError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be a <a data-link-type="dfn" href="#directory" id="ref-for-directory⑧">directory entry</a> representing the selected directory.</p>
       <li data-md>
        <p>If <var>entry</var> is deemed <a data-link-type="dfn" href="#too-sensitive-or-dangerous" id="ref-for-too-sensitive-or-dangerous②">too sensitive or dangerous</a> to be exposed to this website by the user agent:</p>
        <ol>
         <li data-md>
          <p>Inform the user that the selected files or directories can’t be exposed to this website.</p>
         <li data-md>
          <p>At the discretion of the user agent,
 either go back to the beginning of these <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①⑥">in parallel</a> steps,
 or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑨">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror⑥">AbortError</a></code> and abort.</p>
        </ol>
       <li data-md>
        <p>Set <var>result</var> to a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①①">FileSystemDirectoryHandle</a></code> associated with <var>entry</var>.</p>
       <li data-md>
        <p>Perform the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification②">activation notification</a> steps in <var>global</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc②">browsing context</a>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This lets a website immediately perform operations on the returned handles that
 might require user activation, such as requesting more permissions.</p>
        <p class="issue" id="issue-923f3009"><a class="self-link" href="#issue-923f3009"></a> Rather than requiring the website to prompt separately for a writable directory,
 we should provide some kind of API to request a writable directory in one step. <a href="https://github.com/wicg/file-system-access/issues/89">[Issue #89]</a></p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②②">Resolve</a> <var>p</var> with <var>result</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.6" id="drag-and-drop"><span class="secno">3.6. </span><span class="content">Drag and Drop</span><a class="self-link" href="#drag-and-drop"></a></h3>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem" id="ref-for-datatransferitem"><c- g>DataTransferItem</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⑤"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle①⑤"><c- n>FileSystemHandle</c-></a>?> <a class="idl-code" data-link-type="method" href="#dom-datatransferitem-getasfilesystemhandle" id="ref-for-dom-datatransferitem-getasfilesystemhandle"><c- g>getAsFileSystemHandle</c-></a>();
};
</pre>
   <p>During a <em>drag-and-drop operation</em>, dragged file and
directory items are associated with <a data-link-type="dfn" href="#file" id="ref-for-file①①">file entries</a> and <a data-link-type="dfn" href="#directory" id="ref-for-directory⑨">directory entries</a> respectively.</p>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> = await item . <code class="idl"><a data-link-type="idl" href="#dom-datatransferitem-getasfilesystemhandle" id="ref-for-dom-datatransferitem-getasfilesystemhandle①">getAsFileSystemHandle()</a></code>
     <dd data-md>
      <p>Returns a <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle①②">FileSystemFileHandle</a></code> object if the dragged item is a file and a <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①②">FileSystemDirectoryHandle</a></code> object if the dragged item is a directory.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getAsFileSystemHandle()" data-algorithm-for="DataTransferItem">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="DataTransferItem" data-dfn-type="method" data-export id="dom-datatransferitem-getasfilesystemhandle"><code>getAsFileSystemHandle()</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>If the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem" id="ref-for-datatransferitem①">DataTransferItem</a></code> object is not in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-rw" id="ref-for-concept-dnd-rw">read/write
  mode</a> or the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro" id="ref-for-concept-dnd-ro">read-only mode</a>, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with">a promise resolved with</a> <code>null</code>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind" id="ref-for-the-drag-data-item-kind">the drag data item kind</a> is not <em>File</em>,
  then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with①">a promise resolved with</a> <code>null</code>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①⑤">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①⑦">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>entry</var> be the <a data-link-type="dfn" href="#entry" id="ref-for-entry①④">entry</a> representing the dragged file or directory.</p>
       <li data-md>
        <p>If <var>entry</var> is a <a data-link-type="dfn" href="#file" id="ref-for-file①②">file entry</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>handle</var> be a <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle①③">FileSystemFileHandle</a></code> associated with <var>entry</var>.</p>
        </ol>
       <li data-md>
        <p>Else if <var>entry</var> is a <a data-link-type="dfn" href="#directory" id="ref-for-directory①⓪">directory entry</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>handle</var> be a <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①③">FileSystemDirectoryHandle</a></code> associated with <var>entry</var>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②③">Resolve</a> <var>p</var> with <var>entry</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="example" id="draganddrop-example">
    <a class="self-link" href="#draganddrop-example"></a> Handling drag and drop of files and directories: 
<pre class="highlight">elem<c- p>.</c->addEventListener<c- p>(</c-><c- t>'dragover'</c-><c- p>,</c-> <c- p>(</c->e<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
  <c- c1>// Prevent navigation.</c->
  e<c- p>.</c->preventDefault<c- p>();</c->
<c- p>});</c->
elem<c- p>.</c->addEventListener<c- p>(</c-><c- t>'drop'</c-><c- p>,</c-> <c- k>async</c-> <c- p>(</c->e<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
  <c- c1>// Prevent navigation.</c->
  e<c- p>.</c->preventDefault<c- p>();</c->

  <c- c1>// Process all of the items.</c->
  <c- k>for</c-> <c- p>(</c-><c- a>const</c-> item <c- k>of</c-> e<c- p>.</c->dataTransfer<c- p>.</c->items<c- p>)</c-> <c- p>{</c->
    <c- c1>// kind will be 'file' for file/directory entries.</c->
    <c- k>if</c-> <c- p>(</c->item<c- p>.</c->kind <c- o>===</c-> <c- t>'file'</c-><c- p>)</c-> <c- p>{</c->
      <c- a>const</c-> entry <c- o>=</c-> <c- k>await</c-> item<c- p>.</c->getAsFileSystemHandle<c- p>();</c->
      <c- k>if</c-> <c- p>(</c->entry<c- p>.</c->kind <c- o>===</c-> <c- t>'file'</c-><c- p>)</c-> <c- p>{</c->
        handleFileEntry<c- p>(</c->entry<c- p>);</c->
      <c- p>}</c-> <c- k>else</c-> <c- k>if</c-> <c- p>(</c->entry<c- p>.</c->kind <c- o>===</c-> <c- t>'directory'</c-><c- p>)</c-> <c- p>{</c->
        handleDirectoryEntry<c- p>(</c->entry<c- p>);</c->
      <c- p>}</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>});</c->
</pre>
   </div>
   <p class="issue" id="issue-8306b646"><a class="self-link" href="#issue-8306b646"></a> This currently does not block access to <a data-link-type="dfn" href="#too-sensitive-or-dangerous" id="ref-for-too-sensitive-or-dangerous③">too sensitive or dangerous</a> directories, to
be consistent with other APIs that give access to dropped files and directories. This is inconsistent
with the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories④">local file system handle factories</a> though, so we might want to reconsider this.</p>
   <h2 class="heading settled" data-level="4" id="sandboxed-filesystem"><span class="secno">4. </span><span class="content">Accessing the Origin Private File System</span><a class="self-link" href="#sandboxed-filesystem"></a></h2>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="origin-private-file-system">origin private file system</dfn> is a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint" id="ref-for-storage-endpoint">storage endpoint</a> whose <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-identifier" id="ref-for-storage-endpoint-identifier">identifier</a> is <code>"fileSystem"</code>, <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-types" id="ref-for-storage-endpoint-types">types</a> are <code>« "local" »</code>,
and <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-quota" id="ref-for-storage-endpoint-quota">quota</a> is null.</p>
   <p class="issue" id="issue-9c98e739"><a class="self-link" href="#issue-9c98e739"></a> Storage endpoints should be defined in <a data-link-type="biblio" href="#biblio-storage" title="Storage Standard">[storage]</a> itself, rather
than being defined here. So merge this into the table there.</p>
   <p class="note" role="note"><span class="marker">Note:</span> While user agents will typically implement this by persisting the contents of this <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system③">origin private file system</a> to disk, it is not intended that the contents are easily
user accessible. Similarly there is no expectation that files or directories with names
matching the names of children of the <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system④">origin private file system</a> exist.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext⑤"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://storage.spec.whatwg.org/#storagemanager" id="ref-for-storagemanager"><c- g>StorageManager</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⑥"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①④"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagemanager-getdirectory" id="ref-for-dom-storagemanager-getdirectory②"><c- g>getDirectory</c-></a>();
};
</pre>
   <p><strong class="advisement"> In Chrome this functionality was previously exposed as <code>FileSystemDirectoryHandle.getSystemDirectory({type: "sandbox"})</code>.
This new method is available as of Chrome 85.</strong></p>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>directoryHandle</var> = await navigator . storage . <code class="idl"><a data-link-type="idl" href="#dom-storagemanager-getdirectory" id="ref-for-dom-storagemanager-getdirectory③">getDirectory()</a></code>
     <dd data-md>
      <p>Returns the root directory of the origin private file system.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getDirectory()" data-algorithm-for="StorageManager">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageManager" data-dfn-type="method" data-export id="dom-storagemanager-getdirectory"><code>getDirectory()</code></dfn> method, when
invoked, must run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object">current settings object</a>.</p>
     <li data-md>
      <p>Let <var>map</var> be the result of running <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map" id="ref-for-obtain-a-local-storage-bottle-map">obtain a local storage bottle map</a> with <var>environment</var> and <code>"fileSystem"</code>. If this returns failure,
 return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror⑥">SecurityError</a></code>.</p>
     <li data-md>
      <p>If <var>map</var>["root"] does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exist</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>dir</var> be a new <a data-link-type="dfn" href="#directory" id="ref-for-directory①①">directory entry</a>.</p>
       <li data-md>
        <p>Set <var>dir</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①③">name</a> to <code>""</code>.</p>
       <li data-md>
        <p>Set <var>dir</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑨">children</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">set</a>.</p>
       <li data-md>
        <p>Set <var>map</var>["root"] to <var>dir</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with②">a promise resolved with</a> a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①⑤">FileSystemDirectoryHandle</a></code>,
 whose associated <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②②">entry</a> is <var>map</var>["root"].</p>
    </ol>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> In Chrome the directory entry returned by the above algorithm refers to the same storage as the <a href="https://dev.w3.org/2009/dap/file-system/file-dir-sys.html#dfn-temporary">temporary
file system</a> as used to be defined in <a data-link-type="biblio" href="#biblio-file-system-api" title="File API: Directories and System">File API: Directories and System</a>.</p>
   <h2 class="heading settled" data-level="5" id="accessibility-considerations"><span class="secno">5. </span><span class="content">Accessibility Considerations</span><a class="self-link" href="#accessibility-considerations"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>When this specification is used to present information in the user interface,
implementors will want to follow the OS level accessibility guidelines for the platform.</p>
   <h2 class="heading settled" data-level="6" id="privacy-considerations"><span class="secno">6. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy-considerations"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>This API does not give websites any more read access to data than the existing <code>&lt;input type=file></code> and <code>&lt;input type=file webkitdirectory></code> APIs already do. Furthermore similarly to those APIs, all
access to files and directories is explicitly gated behind a file or directory picker.</p>
   <p>There are however several major privacy risks with this new API:</p>
   <h3 class="heading settled" data-level="6.1" id="privacy-wide-access"><span class="secno">6.1. </span><span class="content">Users giving access to more, or more sensitive files than they intended.</span><a class="self-link" href="#privacy-wide-access"></a></h3>
   <p>This isn’t a new risk with this API, but user agents should try to make sure that users are aware
of what exactly they’re giving websites access to. This is particularly important when giving
access to a directory, where it might not be immediately clear to a user just how many files
actually exist in that directory.</p>
   <p>A related risk is having a user give access to particularly sensitive data. This
could include some of a user agent’s configuration data, network cache or cookie store,
or operating system configuration data such as password files. To protect against this, user agents
are encouraged to restrict which directories a user is allowed to select in a directory picker,
and potentially even restrict which files the user is allowed to select. This will make it much
harder to accidentally give access to a directory that contains particularly sensitive data. Care
must be taken to strike the right balance between restricting what the API can access while still
having the API be useful. After all, this API intentionally lets the user use websites to interact
with some of their most private personal data.</p>
   <p>Examples of directories that user agents might want to restrict as being <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="too-sensitive-or-dangerous">too sensitive or dangerous</dfn> include:</p>
   <ul>
    <li data-md>
     <p>The directory or directories containing the user agent itself.</p>
    <li data-md>
     <p>Directories where the user agent stores <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#site-storage" id="ref-for-site-storage">website storage</a>.</p>
    <li data-md>
     <p>Directories containing system files (such as <code>C:\Windows</code> on Windows).</p>
    <li data-md>
     <p>Directories such as <code>/dev/</code>, <code>/sys</code>, and <code>/proc</code> on Linux that would give access to low-level devices.</p>
    <li data-md>
     <p>A user’s entire "home" directory.
Individual files and directories inside the home directory should still be allowed,
but user agents should not generally let users give blanket access to the entire directory.</p>
    <li data-md>
     <p>The default directory for downloads, if the user agent has such a thing.
Individual files inside the directory again should be allowed, but the whole directory would risk leaking more data than a user realizes.</p>
    <li data-md>
     <p>Files with names that end in <code>.lnk</code>, when selecting a file to write to. Writing to
these files on Windows is similar to creating symlinks on other operating systems,
and as such can be used to attempt to trick users into giving access to files they didn’t intend to expose.</p>
    <li data-md>
     <p>Files with names that end in <code>.local</code>, when selecting a file to write to.
Windows uses these files to decide what DLLs to load, and as such writing to
these files could be used to cause code to be executed.</p>
   </ul>
   <h3 class="heading settled" data-level="6.2" id="privacy-tracking"><span class="secno">6.2. </span><span class="content">Websites trying to use this API for tracking.</span><a class="self-link" href="#privacy-tracking"></a></h3>
   <p>This API could be used by websites to track the user across clearing browsing
data. This is because, in contrast with existing file access APIs, user agents are
able to grant persistent access to files or directories and can re-prompt. In
combination with the ability to write to files, websites will be able to persist an
identifier on the users' disk. Clearing browsing data will not affect those files
in any way, making these identifiers persist through those actions.</p>
   <p>This risk is somewhat mitigated by the fact that clearing browsing data will clear all handles
that a website had persisted (for example in IndexedDB),
so websites won’t have any handles to re-prompt for permission after browsing data was cleared.
Furthermore user agents are encouraged to make it clear what files and directories a website has
access to, and to automatically expire permission grants except for particularly well trusted
origins (for example persistent permissions could be limited to "installed" web applications).</p>
   <p>User agents also are encouraged to provide a way for users to revoke permissions granted.
Clearing browsing data is expected to revoke all permissions as well.</p>
   <h3 class="heading settled" data-level="6.3" id="privacy-third-party"><span class="secno">6.3. </span><span class="content">First-party vs third-party contexts.</span><a class="self-link" href="#privacy-third-party"></a></h3>
   <p>In third-party contexts (e.g. an iframe whose origin does not match that of the top-level frame)
websites can’t gain access to data they don’t already have access to. This includes both getting
access to new files or directories via the <a data-link-type="dfn" href="#local-file-system-handle-factories" id="ref-for-local-file-system-handle-factories⑤">local file system handle factories</a>, as well as requesting
more permissions to existing handles via the <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-requestpermission" id="ref-for-dom-filesystemhandle-requestpermission⑦">requestPermission</a></code> API.</p>
   <p>Handles can also only be post-messaged to same-origin destinations. Attempts to send a handle to
a cross-origin destination will result in a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-messageerror" id="ref-for-event-messageerror">messageerror</a></code> event.</p>
   <h2 class="heading settled" data-level="7" id="security-considerations"><span class="secno">7. </span><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>This API gives websites the ability to modify existing files on disk, as well as write to new
files. This has a couple of important security considerations:</p>
   <h3 class="heading settled" data-level="7.1" id="security-malware"><span class="secno">7.1. </span><span class="content">Malware</span><a class="self-link" href="#security-malware"></a></h3>
   <p>This API could be used by websites to try to store and/or execute malware on the users system.
To mitigate this risk, this API does not provide any way to mark files as executable (on the other
hand files that are already executable likely remain that way, even after the files are modified
through this API). Furthermore user agents are encouraged to apply things like Mark-of-the-Web to
files created or modified by this API.</p>
   <p>Finally, user agents are encouraged to verify the contents of files modified by this API via <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="malware scans and safe browsing checks" data-noexport id="malware-scans-and-safe-browsing-checks">malware
scans and safe browsing checks</dfn>, unless some kind of external strong trust relation already exists.
This of course has effects on the performance characteristics of this API.</p>
   <h3 class="heading settled" data-level="7.2" id="security-ransomware"><span class="secno">7.2. </span><span class="content">Ransomware attacks</span><a class="self-link" href="#security-ransomware"></a></h3>
   <p>Another risk factor is that of ransomware attacks. The limitations described above regarding
blocking access to certain sensitive directories helps limit the damage such an attack can do.
Additionally user agents can grant write access to files at whatever granularity they deem
appropriate.</p>
   <h3 class="heading settled" data-level="7.3" id="filling-up-disk"><span class="secno">7.3. </span><span class="content">Filling up a users disk</span><a class="self-link" href="#filling-up-disk"></a></h3>
   <p>Other than files in the <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system⑤">origin private file system</a>, files written by this API are not subject
to <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota④">storage quota</a>. As such websites can fill up a users disk without being limited by
quota, which could leave a users device in a bad state (do note that even with storage that is
subject to <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota⑤">storage quota</a> it is still possible to fill up, or come close to filling up, a users
disk, since <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota⑥">storage quota</a> in general is not dependent on the amount of available disk
space).</p>
   <p>Without this API websites can write data to disk not subject to quota limitations already
by triggering downloads of large files (potentially created client side, to not incur any network
overhead). While the presence of <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-truncate" id="ref-for-dom-filesystemwritablefilestream-truncate③">truncate()</a></code> and writing at a
potentially really large offset past the end of a file makes it much easier and lower cost to
create large files, on most file systems such files should not actually take up as much disk space as
most commonly used file systems support sparse files (and thus wouldn’t actually store the NUL
bytes generated by resizing a file or seeking past the end of it).</p>
   <p>Whatever mitigations user agents use to guard against websites filling up a disk via either
quota managed storage or the existing downloads mechanism should also be employed when websites
use this API to write to disk.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-filepickeraccepttype-accept">accept</a><span>, in § 3</span>
   <li><a href="#file-entry-binary-data">binary data</a><span>, in § 2.1</span>
   <li><a href="#filesystemwritablefilestream-buffer">[[buffer]]</a><span>, in § 2.6</span>
   <li><a href="#directory-entry-children">children</a><span>, in § 2.1</span>
   <li>
    create
    <ul>
     <li><a href="#dom-filesystemgetdirectoryoptions-create">dict-member for FileSystemGetDirectoryOptions</a><span>, in § 2.5</span>
     <li><a href="#dom-filesystemgetfileoptions-create">dict-member for FileSystemGetFileOptions</a><span>, in § 2.5</span>
    </ul>
   <li><a href="#create-a-new-filesystemwritablefilestream">create a new FileSystemWritableFileStream</a><span>, in § 2.6</span>
   <li><a href="#dom-filesystemfilehandle-createwritable">createWritable()</a><span>, in § 2.4.2</span>
   <li><a href="#dom-filesystemfilehandle-createwritable">createWritable(options)</a><span>, in § 2.4.2</span>
   <li><a href="#dom-writeparams-data">data</a><span>, in § 2.6</span>
   <li><a href="#dom-filepickeraccepttype-description">description</a><span>, in § 3</span>
   <li><a href="#dom-filesystemhandlekind-directory">"directory"</a><span>, in § 2.3</span>
   <li><a href="#directory">directory</a><span>, in § 2.1</span>
   <li><a href="#directory">directory entry</a><span>, in § 2.1</span>
   <li><a href="#dictdef-directorypickeroptions">DirectoryPickerOptions</a><span>, in § 3</span>
   <li>
    entry
    <ul>
     <li><a href="#entry">definition of</a><span>, in § 2.1</span>
     <li><a href="#filesystemhandle-entry">dfn for FileSystemHandle</a><span>, in § 2.3</span>
    </ul>
   <li><a href="#dom-filepickeroptions-excludeacceptalloption">excludeAcceptAllOption</a><span>, in § 3</span>
   <li><a href="#dom-filesystemhandlekind-file">"file"</a><span>, in § 2.3</span>
   <li><a href="#filesystemwritablefilestream-file">[[file]]</a><span>, in § 2.6</span>
   <li><a href="#file">file</a><span>, in § 2.1</span>
   <li><a href="#file">file entry</a><span>, in § 2.1</span>
   <li><a href="#dictdef-filepickeraccepttype">FilePickerAcceptType</a><span>, in § 3</span>
   <li><a href="#dictdef-filepickeroptions">FilePickerOptions</a><span>, in § 3</span>
   <li><a href="#dom-permissionname-file-system">"file-system"</a><span>, in § 2.2</span>
   <li><a href="#dictdef-filesystemcreatewritableoptions">FileSystemCreateWritableOptions</a><span>, in § 2.4</span>
   <li><a href="#filesystemdirectoryhandle">FileSystemDirectoryHandle</a><span>, in § 2.5</span>
   <li><a href="#filesystemfilehandle">FileSystemFileHandle</a><span>, in § 2.4</span>
   <li><a href="#dictdef-filesystemgetdirectoryoptions">FileSystemGetDirectoryOptions</a><span>, in § 2.5</span>
   <li><a href="#dictdef-filesystemgetfileoptions">FileSystemGetFileOptions</a><span>, in § 2.5</span>
   <li><a href="#filesystemhandle">FileSystemHandle</a><span>, in § 2.3</span>
   <li><a href="#enumdef-filesystemhandlekind">FileSystemHandleKind</a><span>, in § 2.3</span>
   <li><a href="#dictdef-filesystemhandlepermissiondescriptor">FileSystemHandlePermissionDescriptor</a><span>, in § 2.3</span>
   <li><a href="#dictdef-filesystempermissiondescriptor">FileSystemPermissionDescriptor</a><span>, in § 2.2</span>
   <li><a href="#enumdef-filesystempermissionmode">FileSystemPermissionMode</a><span>, in § 2.2</span>
   <li><a href="#dictdef-filesystemremoveoptions">FileSystemRemoveOptions</a><span>, in § 2.5</span>
   <li><a href="#filesystemwritablefilestream">FileSystemWritableFileStream</a><span>, in § 2.6</span>
   <li><a href="#typedefdef-filesystemwritechunktype">FileSystemWriteChunkType</a><span>, in § 2.6</span>
   <li><a href="#dom-datatransferitem-getasfilesystemhandle">getAsFileSystemHandle()</a><span>, in § 3.6</span>
   <li><a href="#dom-storagemanager-getdirectory">getDirectory()</a><span>, in § 4</span>
   <li><a href="#dom-filesystemdirectoryhandle-getdirectoryhandle">getDirectoryHandle(name)</a><span>, in § 2.5.3</span>
   <li><a href="#dom-filesystemdirectoryhandle-getdirectoryhandle">getDirectoryHandle(name, options)</a><span>, in § 2.5.3</span>
   <li><a href="#dom-filesystemfilehandle-getfile">getFile()</a><span>, in § 2.4.1</span>
   <li><a href="#dom-filesystemdirectoryhandle-getfilehandle">getFileHandle(name)</a><span>, in § 2.5.2</span>
   <li><a href="#dom-filesystemdirectoryhandle-getfilehandle">getFileHandle(name, options)</a><span>, in § 2.5.2</span>
   <li><a href="#dom-filesystempermissiondescriptor-handle">handle</a><span>, in § 2.2</span>
   <li><a href="#is-allowed-to-show-a-file-picker">is allowed to show a file picker</a><span>, in § 3.1</span>
   <li><a href="#dom-filesystemhandle-issameentry">isSameEntry(other)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-filesystemcreatewritableoptions-keepexistingdata">keepExistingData</a><span>, in § 2.4</span>
   <li><a href="#dom-filesystemhandle-kind">kind</a><span>, in § 2.3</span>
   <li><a href="#local-file-system-handle-factories">local file system handle factories</a><span>, in § 3</span>
   <li><a href="#malware-scans-and-safe-browsing-checks">malware scans and safe browsing checks</a><span>, in § 7.1</span>
   <li>
    mode
    <ul>
     <li><a href="#dom-filesystemhandlepermissiondescriptor-mode">dict-member for FileSystemHandlePermissionDescriptor</a><span>, in § 2.3</span>
     <li><a href="#dom-filesystempermissiondescriptor-mode">dict-member for FileSystemPermissionDescriptor</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#file-entry-modification-timestamp">modification timestamp</a><span>, in § 2.1</span>
   <li><a href="#dom-openfilepickeroptions-multiple">multiple</a><span>, in § 3</span>
   <li>
    name
    <ul>
     <li><a href="#dom-filesystemhandle-name">attribute for FileSystemHandle</a><span>, in § 2.3</span>
     <li><a href="#entry-name">dfn for entry</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#dictdef-openfilepickeroptions">OpenFilePickerOptions</a><span>, in § 3</span>
   <li><a href="#origin-private-file-system">origin private file system</a><span>, in § 4</span>
   <li><a href="#entry-parent">parent</a><span>, in § 2.1</span>
   <li><a href="#filesystemdirectoryhandle-iterator-past-results">past results</a><span>, in § 2.5.1</span>
   <li><a href="#dom-writeparams-position">position</a><span>, in § 2.6</span>
   <li><a href="#process-accept-types">process accept types</a><span>, in § 3.4</span>
   <li><a href="#querying-file-system-permission">query file system permission</a><span>, in § 2.2</span>
   <li><a href="#querying-file-system-permission">querying file system permission</a><span>, in § 2.2</span>
   <li><a href="#dom-filesystemhandle-querypermission">queryPermission()</a><span>, in § 2.3.2</span>
   <li><a href="#dom-filesystemhandle-querypermission">queryPermission(descriptor)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-filesystempermissionmode-read">"read"</a><span>, in § 2.2</span>
   <li><a href="#dom-filesystempermissionmode-readwrite">"readwrite"</a><span>, in § 2.2</span>
   <li><a href="#dom-filesystemremoveoptions-recursive">recursive</a><span>, in § 2.5</span>
   <li><a href="#dom-filesystemdirectoryhandle-removeentry">removeEntry(name)</a><span>, in § 2.5.4</span>
   <li><a href="#dom-filesystemdirectoryhandle-removeentry">removeEntry(name, options)</a><span>, in § 2.5.4</span>
   <li><a href="#requesting-file-system-permission">request file system permission</a><span>, in § 2.2</span>
   <li><a href="#requesting-file-system-permission">requesting file system permission</a><span>, in § 2.2</span>
   <li><a href="#dom-filesystemhandle-requestpermission">requestPermission()</a><span>, in § 2.3.3</span>
   <li><a href="#dom-filesystemhandle-requestpermission">requestPermission(descriptor)</a><span>, in § 2.3.3</span>
   <li><a href="#entry-resolve">resolve</a><span>, in § 2.1</span>
   <li><a href="#dom-filesystemdirectoryhandle-resolve">resolve(possibleDescendant)</a><span>, in § 2.5.5</span>
   <li><a href="#dictdef-savefilepickeroptions">SaveFilePickerOptions</a><span>, in § 3</span>
   <li><a href="#dom-writecommandtype-seek">"seek"</a><span>, in § 2.6</span>
   <li><a href="#filesystemwritablefilestream-seekoffset">[[seekOffset]]</a><span>, in § 2.6</span>
   <li><a href="#dom-filesystemwritablefilestream-seek">seek(position)</a><span>, in § 2.6.2</span>
   <li><a href="#dom-window-showdirectorypicker">showDirectoryPicker()</a><span>, in § 3.5</span>
   <li><a href="#dom-window-showdirectorypicker">showDirectoryPicker(options)</a><span>, in § 3.5</span>
   <li><a href="#dom-window-showopenfilepicker">showOpenFilePicker()</a><span>, in § 3.2</span>
   <li><a href="#dom-window-showopenfilepicker">showOpenFilePicker(options)</a><span>, in § 3.2</span>
   <li><a href="#dom-window-showsavefilepicker">showSaveFilePicker()</a><span>, in § 3.3</span>
   <li><a href="#dom-window-showsavefilepicker">showSaveFilePicker(options)</a><span>, in § 3.3</span>
   <li><a href="#dom-writeparams-size">size</a><span>, in § 2.6</span>
   <li><a href="#entry-the-same-as">the same as</a><span>, in § 2.1</span>
   <li><a href="#too-sensitive-or-dangerous">too sensitive or dangerous</a><span>, in § 6.1</span>
   <li><a href="#dom-writecommandtype-truncate">"truncate"</a><span>, in § 2.6</span>
   <li><a href="#dom-filesystemwritablefilestream-truncate">truncate(size)</a><span>, in § 2.6.3</span>
   <li><a href="#dom-writeparams-type">type</a><span>, in § 2.6</span>
   <li><a href="#dom-filepickeroptions-types">types</a><span>, in § 3</span>
   <li><a href="#validate-a-suffix">validate a suffix</a><span>, in § 3.4</span>
   <li><a href="#valid-file-name">valid file name</a><span>, in § 2.1</span>
   <li><a href="#valid-suffix-code-point">valid suffix code point</a><span>, in § 2.1</span>
   <li><a href="#dom-writecommandtype-write">"write"</a><span>, in § 2.6</span>
   <li><a href="#write-a-chunk">write a chunk</a><span>, in § 2.6</span>
   <li><a href="#enumdef-writecommandtype">WriteCommandType</a><span>, in § 2.6</span>
   <li><a href="#dom-filesystemwritablefilestream-write">write(data)</a><span>, in § 2.6.1</span>
   <li><a href="#dictdef-writeparams">WriteParams</a><span>, in § 2.6</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="db6dbae4">realm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ENCODING]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0303e8e5">utf-8 encode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FILE-API]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b7d73f5b">Blob</span>
     <li><span class="dfn-paneled" id="cd028611">File</span>
     <li><span class="dfn-paneled" id="f9970195">lastModified</span>
     <li><span class="dfn-paneled" id="1441e3bf">name</span>
     <li><span class="dfn-paneled" id="0a192674">read operation</span>
     <li><span class="dfn-paneled" id="c53e5a8e">snapshot state</span>
     <li><span class="dfn-paneled" id="e303c02d">type</span>
     <li><span class="dfn-paneled" id="17625652">unix epoch</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="4ff66d05">DataTransferItem</span>
     <li><span class="dfn-paneled" id="eb5c4be3">Serializable</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="36d15a6d">activation notification</span>
     <li><span class="dfn-paneled" id="6d88ab2e">browsing context</span>
     <li><span class="dfn-paneled" id="12b8dfc0">current settings object</span>
     <li><span class="dfn-paneled" id="888d7c65">deserialization steps</span>
     <li><span class="dfn-paneled" id="8a30477b">global object</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="6b373a4a">messageerror</span>
     <li><span class="dfn-paneled" id="b01b1359">opaque origin</span>
     <li><span class="dfn-paneled" id="43ac8374">origin</span>
     <li><span class="dfn-paneled" id="bb0e27f7">read-only mode</span>
     <li><span class="dfn-paneled" id="9604548f">read/write mode</span>
     <li><span class="dfn-paneled" id="5991ccfb">relevant realm</span>
     <li><span class="dfn-paneled" id="9c4c1e66">relevant settings object</span>
     <li><span class="dfn-paneled" id="7393da89">same origin</span>
     <li><span class="dfn-paneled" id="0a422d04">serializable object</span>
     <li><span class="dfn-paneled" id="f32dc6c1">serialization steps</span>
     <li><span class="dfn-paneled" id="7e94ee2f">the drag data item kind</span>
     <li><span class="dfn-paneled" id="c63519ed">top-level origin</span>
     <li><span class="dfn-paneled" id="47fe679e">transient activation</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a3b18719">append <small>(for set)</small></span>
     <li><span class="dfn-paneled" id="f43d6978">ascii alphanumeric</span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="3de9e659">byte sequence</span>
     <li><span class="dfn-paneled" id="915aff5e">code point</span>
     <li><span class="dfn-paneled" id="ae8def21">contain</span>
     <li><span class="dfn-paneled" id="a088e610">convert</span>
     <li><span class="dfn-paneled" id="03afaf9c">empty</span>
     <li><span class="dfn-paneled" id="1243a891">exist</span>
     <li><span class="dfn-paneled" id="16d07e10">for each <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="45209803">for each <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="6b815fdd">is empty</span>
     <li><span class="dfn-paneled" id="36333997">length <small>(for byte sequence)</small></span>
     <li><span class="dfn-paneled" id="0fa357c3">length <small>(for string)</small></span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="e2fc6023">prepend</span>
     <li><span class="dfn-paneled" id="99c988d6">remove</span>
     <li><span class="dfn-paneled" id="15e48c39">set</span>
     <li><span class="dfn-paneled" id="54627f47">starts with</span>
     <li><span class="dfn-paneled" id="0698d556">string</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MIMESNIFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7c195f8b">essence</span>
     <li><span class="dfn-paneled" id="16785ec4">mime type</span>
     <li><span class="dfn-paneled" id="fc5a3214">parameters</span>
     <li><span class="dfn-paneled" id="d72dabca">parse a mime type</span>
     <li><span class="dfn-paneled" id="69d8b9f1">subtype</span>
     <li><span class="dfn-paneled" id="b5c41c63">type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ebb01253">PermissionDescriptor</span>
     <li><span class="dfn-paneled" id="6c3bee60">PermissionState</span>
     <li><span class="dfn-paneled" id="dbf8e074">PermissionStatus</span>
     <li><span class="dfn-paneled" id="113dd5ca">create a permissionstatus</span>
     <li><span class="dfn-paneled" id="c6ce3c60">granted</span>
     <li><span class="dfn-paneled" id="0310eecd">name</span>
     <li><span class="dfn-paneled" id="4b7ca52a">permission descriptor type</span>
     <li><span class="dfn-paneled" id="d124397f">permission state</span>
     <li><span class="dfn-paneled" id="3e7aa5da">permission state constraints</span>
     <li><span class="dfn-paneled" id="ec3886d6">permissions</span>
     <li><span class="dfn-paneled" id="6c2d7879">powerful feature</span>
     <li><span class="dfn-paneled" id="325da0f2">prompt</span>
     <li><span class="dfn-paneled" id="78f04503">query()</span>
     <li><span class="dfn-paneled" id="bcc085e3">request permission to use</span>
     <li><span class="dfn-paneled" id="620f832e">state</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-REQUEST]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="35725f70">permission request algorithm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8649548f">StorageManager</span>
     <li><span class="dfn-paneled" id="7140f092">identifier</span>
     <li><span class="dfn-paneled" id="6bb9d790">obtain a local storage bottle map</span>
     <li><span class="dfn-paneled" id="896f4663">quota</span>
     <li><span class="dfn-paneled" id="91461e7c">storage</span>
     <li><span class="dfn-paneled" id="98c6a112">storage endpoint</span>
     <li><span class="dfn-paneled" id="cac8dd86">storage quota</span>
     <li><span class="dfn-paneled" id="d9de012d">types</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STREAMS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="59ed4e57">ReadableStream</span>
     <li><span class="dfn-paneled" id="59dc45b5">WritableStream</span>
     <li><span class="dfn-paneled" id="4f848e3e">WritableStreamDefaultWriter</span>
     <li><span class="dfn-paneled" id="04dc6c33">closealgorithm</span>
     <li><span class="dfn-paneled" id="2231a61a">getWriter()</span>
     <li><span class="dfn-paneled" id="f4acb816">getting a writer</span>
     <li><span class="dfn-paneled" id="5958fe2e">highwatermark</span>
     <li><span class="dfn-paneled" id="a307241e">release</span>
     <li><span class="dfn-paneled" id="3dc81766">set up</span>
     <li><span class="dfn-paneled" id="5d7f2906">sizealgorithm</span>
     <li><span class="dfn-paneled" id="68d8cab8">write()</span>
     <li><span class="dfn-paneled" id="d04a8309">writealgorithm</span>
     <li><span class="dfn-paneled" id="1ee4bec2">writing a chunk</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d25dfb2c">AbortError</span>
     <li><span class="dfn-paneled" id="3aff2fb3">BufferSource</span>
     <li><span class="dfn-paneled" id="d54f5897">DataCloneError</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="cae6bf57">InvalidModificationError</span>
     <li><span class="dfn-paneled" id="ba556545">NotAllowedError</span>
     <li><span class="dfn-paneled" id="9eda9b58">NotFoundError</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="5e129c74">QuotaExceededError</span>
     <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
     <li><span class="dfn-paneled" id="c3e881ef">SecurityError</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="5d1a2ad0">TypeMismatchError</span>
     <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
     <li><span class="dfn-paneled" id="dacde8b5">a new promise</span>
     <li><span class="dfn-paneled" id="d0b4a948">a promise rejected with</span>
     <li><span class="dfn-paneled" id="8f5c2179">a promise resolved with</span>
     <li><span class="dfn-paneled" id="9a7f3f6f">asynchronous iterator initialization steps</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="92d13070">get a copy of the buffer source</span>
     <li><span class="dfn-paneled" id="e7652812">get the next iteration result</span>
     <li><span class="dfn-paneled" id="56f81a8e">new</span>
     <li><span class="dfn-paneled" id="7787d359">record</span>
     <li><span class="dfn-paneled" id="b262501e">reject</span>
     <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
     <li><span class="dfn-paneled" id="f14b47b8">unsigned long long</span>
     <li><span class="dfn-paneled" id="24bd7d25">upon fulfillment</span>
     <li><span class="dfn-paneled" id="ef8602af">wait for all</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-encoding">[ENCODING]
   <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard</cite></a>. Living Standard. URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
   <dt id="biblio-file-api">[FILE-API]
   <dd>Marijn Kruisselbrink. <a href="https://w3c.github.io/FileAPI/"><cite>File API</cite></a>. URL: <a href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-mimesniff">[MIMESNIFF]
   <dd>Gordon P. Hemsley. <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Living Standard. URL: <a href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Marcos Caceres; Mike Taylor. <a href="https://w3c.github.io/permissions/"><cite>Permissions</cite></a>. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
   <dt id="biblio-permissions-request">[PERMISSIONS-REQUEST]
   <dd><a href="https://wicg.github.io/permissions-request/"><cite>Requesting Permissions</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/permissions-request/">https://wicg.github.io/permissions-request/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-storage">[STORAGE]
   <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/"><cite>Storage Standard</cite></a>. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-streams">[STREAMS]
   <dd>Adam Rice; et al. <a href="https://streams.spec.whatwg.org/"><cite>Streams Standard</cite></a>. Living Standard. URL: <a href="https://streams.spec.whatwg.org/">https://streams.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-entries-api">[ENTRIES-API]
   <dd><a href="https://wicg.github.io/entries-api/"><cite>File and Directory Entries API</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/entries-api/">https://wicg.github.io/entries-api/</a>
   <dt id="biblio-file-system-api">[FILE-SYSTEM-API]
   <dd>Eric Uhrhane. <a href="https://dev.w3.org/2009/dap/file-system/file-dir-sys.html"><cite>File API: Directories and System</cite></a>. URL: <a href="https://dev.w3.org/2009/dap/file-system/file-dir-sys.html">https://dev.w3.org/2009/dap/file-system/file-dir-sys.html</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-filesystempermissionmode"><code><c- g>FileSystemPermissionMode</c-></code></a> {
  <a href="#dom-filesystempermissionmode-read"><code><c- s>"read"</c-></code></a>,
  <a href="#dom-filesystempermissionmode-readwrite"><code><c- s>"readwrite"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-filesystempermissiondescriptor"><code><c- g>FileSystemPermissionDescriptor</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissiondescriptor"><c- n>PermissionDescriptor</c-></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> <a data-type="FileSystemHandle" href="#dom-filesystempermissiondescriptor-handle"><code><c- g>handle</c-></code></a>;
  <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode"><c- n>FileSystemPermissionMode</c-></a> <a data-default="&quot;read&quot;" data-type="FileSystemPermissionMode" href="#dom-filesystempermissiondescriptor-mode"><code><c- g>mode</c-></code></a> = "read";
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemhandlepermissiondescriptor"><code><c- g>FileSystemHandlePermissionDescriptor</c-></code></a> {
  <a data-link-type="idl-name" href="#enumdef-filesystempermissionmode"><c- n>FileSystemPermissionMode</c-></a> <a data-default="&quot;read&quot;" data-type="FileSystemPermissionMode" href="#dom-filesystemhandlepermissiondescriptor-mode"><code><c- g>mode</c-></code></a> = "read";
};

<c- b>enum</c-> <a href="#enumdef-filesystemhandlekind"><code><c- g>FileSystemHandleKind</c-></code></a> {
  <a href="#dom-filesystemhandlekind-file"><code><c- s>"file"</c-></code></a>,
  <a href="#dom-filesystemhandlekind-directory"><code><c- s>"directory"</c-></code></a>,
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <a href="#filesystemhandle"><code><c- g>FileSystemHandle</c-></code></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-filesystemhandlekind"><c- n>FileSystemHandleKind</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FileSystemHandleKind" href="#dom-filesystemhandle-kind"><c- g>kind</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-filesystemhandle-name"><c- g>name</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-issameentry"><c- g>isSameEntry</c-></a>(<a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> <a href="#dom-filesystemhandle-issameentry-other-other"><code><c- g>other</c-></code></a>);

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissionstate"><c- n>PermissionState</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-querypermission"><c- g>queryPermission</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemhandlepermissiondescriptor"><c- n>FileSystemHandlePermissionDescriptor</c-></a> <a href="#dom-filesystemhandle-querypermission-descriptor-descriptor"><code><c- g>descriptor</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/permissions/#dom-permissionstate"><c- n>PermissionState</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-requestpermission"><c- g>requestPermission</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemhandlepermissiondescriptor"><c- n>FileSystemHandlePermissionDescriptor</c-></a> <a href="#dom-filesystemhandle-requestpermission-descriptor-descriptor"><code><c- g>descriptor</c-></code></a> = {});
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemcreatewritableoptions"><code><c- g>FileSystemCreateWritableOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-filesystemcreatewritableoptions-keepexistingdata"><code><c- g>keepExistingData</c-></code></a> = <c- b>false</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <a href="#filesystemfilehandle"><code><c- g>FileSystemFileHandle</c-></code></a> : <a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-file"><c- n>File</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-getfile"><c- g>getFile</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemwritablefilestream"><c- n>FileSystemWritableFileStream</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-createwritable"><c- g>createWritable</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemcreatewritableoptions"><c- n>FileSystemCreateWritableOptions</c-></a> <a href="#dom-filesystemfilehandle-createwritable-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemgetfileoptions"><code><c- g>FileSystemGetFileOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-filesystemgetfileoptions-create"><code><c- g>create</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemgetdirectoryoptions"><code><c- g>FileSystemGetDirectoryOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-filesystemgetdirectoryoptions-create"><code><c- g>create</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemremoveoptions"><code><c- g>FileSystemRemoveOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-filesystemremoveoptions-recursive"><code><c- g>recursive</c-></code></a> = <c- b>false</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <a href="#filesystemdirectoryhandle"><code><c- g>FileSystemDirectoryHandle</c-></code></a> : <a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> {
  <c- b>async</c-> <c- b>iterable</c->&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>, <a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a>>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemfilehandle"><c- n>FileSystemFileHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-getfilehandle"><c- g>getFileHandle</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-filesystemdirectoryhandle-getfilehandle-name-options-name"><code><c- g>name</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemgetfileoptions"><c- n>FileSystemGetFileOptions</c-></a> <a href="#dom-filesystemdirectoryhandle-getfilehandle-name-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-getdirectoryhandle"><c- g>getDirectoryHandle</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-name"><code><c- g>name</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemgetdirectoryoptions"><c- n>FileSystemGetDirectoryOptions</c-></a> <a href="#dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-options"><code><c- g>options</c-></code></a> = {});

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-removeentry"><c- g>removeEntry</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-filesystemdirectoryhandle-removeentry-name-options-name"><code><c- g>name</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemremoveoptions"><c- n>FileSystemRemoveOptions</c-></a> <a href="#dom-filesystemdirectoryhandle-removeentry-name-options-options"><code><c- g>options</c-></code></a> = {});

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>>?> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-resolve"><c- g>resolve</c-></a>(<a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> <a href="#dom-filesystemdirectoryhandle-resolve-possibledescendant-possibledescendant"><code><c- g>possibleDescendant</c-></code></a>);
};

<c- b>enum</c-> <a href="#enumdef-writecommandtype"><code><c- g>WriteCommandType</c-></code></a> {
  <a href="#dom-writecommandtype-write"><code><c- s>"write"</c-></code></a>,
  <a href="#dom-writecommandtype-seek"><code><c- s>"seek"</c-></code></a>,
  <a href="#dom-writecommandtype-truncate"><code><c- s>"truncate"</c-></code></a>,
};

<c- b>dictionary</c-> <a href="#dictdef-writeparams"><code><c- g>WriteParams</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-writecommandtype"><c- n>WriteCommandType</c-></a> <a data-type="WriteCommandType" href="#dom-writeparams-type"><code><c- g>type</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <a data-type="unsigned long long?" href="#dom-writeparams-size"><code><c- g>size</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <a data-type="unsigned long long?" href="#dom-writeparams-position"><code><c- g>position</c-></code></a>;
  (<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>)? <a data-type="(BufferSource or Blob or USVString)?" href="#dom-writeparams-data"><code><c- g>data</c-></code></a>;
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-writeparams"><c- n>WriteParams</c-></a>) <a href="#typedefdef-filesystemwritechunktype"><code><c- g>FileSystemWriteChunkType</c-></code></a>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#filesystemwritablefilestream"><code><c- g>FileSystemWritableFileStream</c-></code></a> : <a data-link-type="idl-name" href="https://streams.spec.whatwg.org/#writablestream"><c- n>WritableStream</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-write"><c- g>write</c-></a>(<a data-link-type="idl-name" href="#typedefdef-filesystemwritechunktype"><c- n>FileSystemWriteChunkType</c-></a> <a href="#dom-filesystemwritablefilestream-write-data-data"><code><c- g>data</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-seek"><c- g>seek</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-filesystemwritablefilestream-seek-position-position"><code><c- g>position</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-truncate"><c- g>truncate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-filesystemwritablefilestream-truncate-size-size"><code><c- g>size</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-filepickeraccepttype"><code><c- g>FilePickerAcceptType</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-filepickeraccepttype-description"><code><c- g>description</c-></code></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-record"><c- b>record</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>, (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>>)> <a data-type="record<USVString, (USVString or sequence<USVString>)>" href="#dom-filepickeraccepttype-accept"><code><c- g>accept</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-filepickeroptions"><code><c- g>FilePickerOptions</c-></code></a> {
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-filepickeraccepttype"><c- n>FilePickerAcceptType</c-></a>> <a data-type="sequence<FilePickerAcceptType>" href="#dom-filepickeroptions-types"><code><c- g>types</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-filepickeroptions-excludeacceptalloption"><code><c- g>excludeAcceptAllOption</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-openfilepickeroptions"><code><c- g>OpenFilePickerOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-filepickeroptions"><c- n>FilePickerOptions</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-openfilepickeroptions-multiple"><code><c- g>multiple</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-savefilepickeroptions"><code><c- g>SaveFilePickerOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-filepickeroptions"><c- n>FilePickerOptions</c-></a> {
};

<c- b>dictionary</c-> <a href="#dictdef-directorypickeroptions"><code><c- g>DirectoryPickerOptions</c-></code></a> {
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><c- g>Window</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemfilehandle"><c- n>FileSystemFileHandle</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-window-showopenfilepicker"><c- g>showOpenFilePicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-openfilepickeroptions"><c- n>OpenFilePickerOptions</c-></a> <a href="#dom-window-showopenfilepicker-options-options"><code><c- g>options</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemfilehandle"><c- n>FileSystemFileHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-window-showsavefilepicker"><c- g>showSaveFilePicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-savefilepickeroptions"><c- n>SaveFilePickerOptions</c-></a> <a href="#dom-window-showsavefilepicker-options-options"><code><c- g>options</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-window-showdirectorypicker"><c- g>showDirectoryPicker</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-directorypickeroptions"><c- n>DirectoryPickerOptions</c-></a> <a href="#dom-window-showdirectorypicker-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem"><c- g>DataTransferItem</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a>?> <a class="idl-code" data-link-type="method" href="#dom-datatransferitem-getasfilesystemhandle"><c- g>getAsFileSystemHandle</c-></a>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://storage.spec.whatwg.org/#storagemanager"><c- g>StorageManager</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagemanager-getdirectory"><c- g>getDirectory</c-></a>();
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> We should consider having further normative restrictions on file names that will
never be allowed using this API, rather than leaving it entirely up to underlying file
systems. <a class="issue-return" href="#issue-58d5d75b" title="Jump to section">↵</a></div>
   <div class="issue"> TODO: Explain better how entries map to files on disk (multiple entries can map to the same file or
directory on disk but an entry doesn’t have to map to any file on disk). <a class="issue-return" href="#issue-88e7ec9d" title="Jump to section">↵</a></div>
   <div class="issue"> Ideally this user activation requirement would be defined upstream. <a href="https://github.com/WICG/permissions-request/issues/2">[Issue #WICG/permissions-request#2]</a> <a class="issue-return" href="#issue-88417955" title="Jump to section">↵</a></div>
   <div class="issue"> Currently <code class="idl"><a data-link-type="idl" href="#enumdef-filesystempermissionmode">FileSystemPermissionMode</a></code> can only be <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-read">"read"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-filesystempermissionmode-readwrite">"readwrite"</a></code>. In
the future we might want to add a "write" mode as well to support write-only handles. <a href="https://github.com/wicg/file-system-access/issues/119">[Issue #119]</a> <a class="issue-return" href="#issue-7fc2f5c7" title="Jump to section">↵</a></div>
   <div class="issue"> The reading and snapshotting behavior needs to be better specified in the <a data-link-type="biblio" href="#biblio-file-api" title="File API">[FILE-API]</a> spec,
 for now this is kind of hand-wavy. <a class="issue-return" href="#issue-1fb8bcae" title="Jump to section">↵</a></div>
   <div class="issue"> There has been some discussion around and desire for a "inPlace" mode for createWritable
(where changes will be written to the actual underlying file as they are written to the writer, for
example to support in-place modification of large files or things like databases). This is not
currently implemented in Chrome. Implementing this is currently blocked on figuring out how to
combine the desire to run malware checks with the desire to let websites make fast in-place
modifications to existing large files. <a href="https://github.com/wicg/file-system-access/issues/67">[Issue #67]</a> <a class="issue-return" href="#issue-0693bc11" title="Jump to section">↵</a></div>
   <div class="issue"> In the future we might want to add arguments to the async iterable declaration to
support for example recursive iteration. <a href="https://github.com/wicg/file-system-access/issues/173">[Issue #173]</a> <a class="issue-return" href="#issue-cce0bb28" title="Jump to section">↵</a></div>
   <div class="issue"> Better specify what possible exceptions this could throw. <a href="https://github.com/wicg/file-system-access/issues/68">[Issue #68]</a> <a class="issue-return" href="#issue-721a33e4" title="Jump to section">↵</a></div>
   <div class="issue"> Better specify what possible exceptions this could throw. <a href="https://github.com/wicg/file-system-access/issues/68">[Issue #68]</a> <a class="issue-return" href="#issue-721a33e4①" title="Jump to section">↵</a></div>
   <div class="issue"> Better specify what possible exceptions this could throw. <a href="https://github.com/wicg/file-system-access/issues/68">[Issue #68]</a> <a class="issue-return" href="#issue-721a33e4②" title="Jump to section">↵</a></div>
   <div class="issue"> Rather than requiring the website to prompt separately for a writable directory,
 we should provide some kind of API to request a writable directory in one step. <a href="https://github.com/wicg/file-system-access/issues/89">[Issue #89]</a> <a class="issue-return" href="#issue-923f3009" title="Jump to section">↵</a></div>
   <div class="issue"> This currently does not block access to <a data-link-type="dfn" href="#too-sensitive-or-dangerous">too sensitive or dangerous</a> directories, to
be consistent with other APIs that give access to dropped files and directories. This is inconsistent
with the <a data-link-type="dfn" href="#local-file-system-handle-factories">local file system handle factories</a> though, so we might want to reconsider this. <a class="issue-return" href="#issue-8306b646" title="Jump to section">↵</a></div>
   <div class="issue"> Storage endpoints should be defined in <a data-link-type="biblio" href="#biblio-storage" title="Storage Standard">[storage]</a> itself, rather
than being defined here. So merge this into the table there. <a class="issue-return" href="#issue-9c98e739" title="Jump to section">↵</a></div>
  </div>
  <details class="mdn-anno unpositioned" data-anno-for="dom-datatransferitem-getasfilesystemhandle">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/getAsFileSystemHandle" title="The getAsFileSystemHandle() method of the DataTransferItem interface returns a FileSystemFileHandle if the dragged item is a file, or a FileSystemDirectoryHandle if the dragged item is a directory.">DataTransferItem/getAsFileSystemHandle</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>None</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-filesystemhandle-querypermission">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/FileSystemHandle/queryPermission" title="The queryPermission() method of the FileSystemHandle interface queries the current permission state of the current handle.">FileSystemHandle/queryPermission</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-filesystemhandle-requestpermission">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/FileSystemHandle/requestPermission" title="The requestPermission() method of the FileSystemHandle interface requests read or readwrite permissions for the file handle.">FileSystemHandle/requestPermission</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>None</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-showdirectorypicker">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/api/window/showdirectorypicker" title="The showDirectoryPicker() method of the Window interface displays a directory picker which allows the user to select a directory.">window/showdirectorypicker</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>None</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-showopenfilepicker">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/api/window/showopenfilepicker" title="The showOpenFilePicker() method of the Window interface shows a file picker that allows a user to select a file or multiple files and returns a handle for the file(s).">window/showopenfilepicker</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>None</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api-showsavefilepicker">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/api/window/showsavefilepicker" title="The showSaveFilePicker() method of the Window interface shows a file picker that allows a user to save a file. Either by selecting an existing file, or entering a name for a new file.">window/showsavefilepicker</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>None</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"0303e8e5": {"dfnID":"0303e8e5","dfnText":"utf-8 encode","external":true,"refSections":[{"refs":[{"id":"ref-for-utf-8-encode"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://encoding.spec.whatwg.org/#utf-8-encode"},
"0310eecd": {"dfnID":"0310eecd","dfnText":"name","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-permissiondescriptor-name"},{"id":"ref-for-dom-permissiondescriptor-name\u2460"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dom-permissiondescriptor-name\u2461"},{"id":"ref-for-dom-permissiondescriptor-name\u2462"}],"title":"2.3.2. The queryPermission() method"}],"url":"https://w3c.github.io/permissions/#dom-permissiondescriptor-name"},
"03afaf9c": {"dfnID":"03afaf9c","dfnText":"empty","external":true,"refSections":[{"refs":[{"id":"ref-for-list-empty"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#list-empty"},
"04dc6c33": {"dfnID":"04dc6c33","dfnText":"closealgorithm","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestream-set-up-closealgorithm"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#writablestream-set-up-closealgorithm"},
"0698d556": {"dfnID":"0698d556","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string"},{"id":"ref-for-string\u2460"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-string\u2461"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#string"},
"0a192674": {"dfnID":"0a192674","dfnText":"read operation","external":true,"refSections":[{"refs":[{"id":"ref-for-readOperation"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://w3c.github.io/FileAPI/#readOperation"},
"0a422d04": {"dfnID":"0a422d04","dfnText":"serializable object","external":true,"refSections":[{"refs":[{"id":"ref-for-serializable-objects"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-serializable-objects\u2460"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-serializable-objects\u2461"}],"title":"2.5. The FileSystemDirectoryHandle interface"}],"url":"https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects"},
"0fa357c3": {"dfnID":"0fa357c3","dfnText":"length (for string)","external":true,"refSections":[{"refs":[{"id":"ref-for-string-length"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#string-length"},
"113dd5ca": {"dfnID":"113dd5ca","dfnText":"create a permissionstatus","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-create-a-permissionstatus"}],"title":"2.2. Permissions"}],"url":"https://w3c.github.io/permissions/#dfn-create-a-permissionstatus"},
"1243a891": {"dfnID":"1243a891","dfnText":"exist","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"12b8dfc0": {"dfnID":"12b8dfc0","dfnText":"current settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-current-settings-object"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object"},
"1441e3bf": {"dfnID":"1441e3bf","dfnText":"name","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-name"}],"title":"2.4.1. The getFile() method"}],"url":"https://w3c.github.io/FileAPI/#dfn-name"},
"15e48c39": {"dfnID":"15e48c39","dfnText":"set","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-set"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-ordered-set\u2460"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-ordered-set\u2461"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-ordered-set\u2462"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://infra.spec.whatwg.org/#ordered-set"},
"16785ec4": {"dfnID":"16785ec4","dfnText":"mime type","external":true,"refSections":[{"refs":[{"id":"ref-for-mime-type"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://mimesniff.spec.whatwg.org/#mime-type"},
"16d07e10": {"dfnID":"16d07e10","dfnText":"for each (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-list-iterate\u2460"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-list-iterate\u2461"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-list-iterate\u2462"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-list-iterate\u2463"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-list-iterate\u2464"},{"id":"ref-for-list-iterate\u2465"},{"id":"ref-for-list-iterate\u2466"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"17625652": {"dfnID":"17625652","dfnText":"unix epoch","external":true,"refSections":[{"refs":[{"id":"ref-for-UnixEpoch"}],"title":"2.1. Concepts"}],"url":"https://w3c.github.io/FileAPI/#UnixEpoch"},
"1ee4bec2": {"dfnID":"1ee4bec2","dfnText":"writing a chunk","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestreamdefaultwriter-write-a-chunk"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-writablestreamdefaultwriter-write-a-chunk\u2460"}],"title":"2.6.2. The seek() method"},{"refs":[{"id":"ref-for-writablestreamdefaultwriter-write-a-chunk\u2461"}],"title":"2.6.3. The truncate() method"}],"url":"https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk"},
"2231a61a": {"dfnID":"2231a61a","dfnText":"getWriter()","external":true,"refSections":[{"refs":[{"id":"ref-for-ws-get-writer"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#ws-get-writer"},
"24bd7d25": {"dfnID":"24bd7d25","dfnText":"upon fulfillment","external":true,"refSections":[{"refs":[{"id":"ref-for-upon-fulfillment"}],"title":"2.1. Concepts"}],"url":"https://webidl.spec.whatwg.org/#upon-fulfillment"},
"325da0f2": {"dfnID":"325da0f2","dfnText":"prompt","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-permissionstate-prompt"}],"title":"2.2. Permissions"}],"url":"https://w3c.github.io/permissions/#dom-permissionstate-prompt"},
"35725f70": {"dfnID":"35725f70","dfnText":"permission request algorithm","external":true,"refSections":[{"refs":[{"id":"ref-for-permission-request-algorithm"},{"id":"ref-for-permission-request-algorithm\u2460"}],"title":"2.2. Permissions"}],"url":"https://wicg.github.io/permissions-request/#permission-request-algorithm"},
"36333997": {"dfnID":"36333997","dfnText":"length (for byte sequence)","external":true,"refSections":[{"refs":[{"id":"ref-for-byte-sequence-length"},{"id":"ref-for-byte-sequence-length\u2460"},{"id":"ref-for-byte-sequence-length\u2461"},{"id":"ref-for-byte-sequence-length\u2462"},{"id":"ref-for-byte-sequence-length\u2463"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://infra.spec.whatwg.org/#byte-sequence-length"},
"36d15a6d": {"dfnID":"36d15a6d","dfnText":"activation notification","external":true,"refSections":[{"refs":[{"id":"ref-for-activation-notification"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-activation-notification\u2460"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-activation-notification\u2461"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"https://html.spec.whatwg.org/multipage/interaction.html#activation-notification"},
"3aff2fb3": {"dfnID":"3aff2fb3","dfnText":"BufferSource","external":true,"refSections":[{"refs":[{"id":"ref-for-BufferSource"},{"id":"ref-for-BufferSource\u2460"},{"id":"ref-for-BufferSource\u2461"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://webidl.spec.whatwg.org/#BufferSource"},
"3b90bdcd": {"dfnID":"3b90bdcd","dfnText":"resolve","external":true,"refSections":[{"refs":[{"id":"ref-for-resolve"},{"id":"ref-for-resolve\u2460"},{"id":"ref-for-resolve\u2461"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-resolve\u2462"},{"id":"ref-for-resolve\u2463"}],"title":"2.3.1. The isSameEntry() method"},{"refs":[{"id":"ref-for-resolve\u2464"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-resolve\u2465"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-resolve\u2466"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-resolve\u2467"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-resolve\u2468"},{"id":"ref-for-resolve\u2460\u24ea"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-resolve\u2460\u2460"},{"id":"ref-for-resolve\u2460\u2461"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-resolve\u2460\u2462"},{"id":"ref-for-resolve\u2460\u2463"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-resolve\u2460\u2464"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-resolve\u2460\u2465"},{"id":"ref-for-resolve\u2460\u2466"},{"id":"ref-for-resolve\u2460\u2467"},{"id":"ref-for-resolve\u2460\u2468"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-resolve\u2461\u24ea"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-resolve\u2461\u2460"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-resolve\u2461\u2461"}],"title":"3.5. The showDirectoryPicker() method"},{"refs":[{"id":"ref-for-resolve\u2461\u2462"}],"title":"3.6. Drag and Drop"}],"url":"https://webidl.spec.whatwg.org/#resolve"},
"3dc81766": {"dfnID":"3dc81766","dfnText":"set up","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestream-set-up"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#writablestream-set-up"},
"3de9e659": {"dfnID":"3de9e659","dfnText":"byte sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-byte-sequence"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-byte-sequence\u2460"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-byte-sequence\u2461"},{"id":"ref-for-byte-sequence\u2462"},{"id":"ref-for-byte-sequence\u2463"},{"id":"ref-for-byte-sequence\u2464"},{"id":"ref-for-byte-sequence\u2465"},{"id":"ref-for-byte-sequence\u2466"},{"id":"ref-for-byte-sequence\u2467"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-byte-sequence\u2468"}],"title":"3.3. The showSaveFilePicker() method"}],"url":"https://infra.spec.whatwg.org/#byte-sequence"},
"3e7aa5da": {"dfnID":"3e7aa5da","dfnText":"permission state constraints","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-permission-state-constraints"},{"id":"ref-for-dfn-permission-state-constraints\u2460"}],"title":"2.2. Permissions"}],"url":"https://w3c.github.io/permissions/#dfn-permission-state-constraints"},
"4013a022": {"dfnID":"4013a022","dfnText":"this","external":true,"refSections":[{"refs":[{"id":"ref-for-this"},{"id":"ref-for-this\u2460"}],"title":"2.3.1. The isSameEntry() method"},{"refs":[{"id":"ref-for-this\u2461"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-this\u2462"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-this\u2463"},{"id":"ref-for-this\u2464"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-this\u2465"},{"id":"ref-for-this\u2466"},{"id":"ref-for-this\u2467"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-this\u2468"},{"id":"ref-for-this\u2460\u24ea"},{"id":"ref-for-this\u2460\u2460"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-this\u2460\u2461"},{"id":"ref-for-this\u2460\u2462"},{"id":"ref-for-this\u2460\u2463"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-this\u2460\u2464"},{"id":"ref-for-this\u2460\u2465"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-this\u2460\u2466"}],"title":"2.5.5. The resolve() method"},{"refs":[{"id":"ref-for-this\u2460\u2467"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-this\u2460\u2468"}],"title":"2.6.2. The seek() method"},{"refs":[{"id":"ref-for-this\u2461\u24ea"}],"title":"2.6.3. The truncate() method"},{"refs":[{"id":"ref-for-this\u2461\u2460"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-this\u2461\u2461"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-this\u2461\u2462"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"https://webidl.spec.whatwg.org/#this"},
"43ac8374": {"dfnID":"43ac8374","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-settings-object-origin"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2460"},{"id":"ref-for-concept-settings-object-origin\u2461"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2462"},{"id":"ref-for-concept-settings-object-origin\u2463"}],"title":"3.1. Local File System Permissions"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin"},
"45209803": {"dfnID":"45209803","dfnText":"for each (for map)","external":true,"refSections":[{"refs":[{"id":"ref-for-map-iterate"},{"id":"ref-for-map-iterate\u2460"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#map-iterate"},
"47fe679e": {"dfnID":"47fe679e","dfnText":"transient activation","external":true,"refSections":[{"refs":[{"id":"ref-for-transient-activation"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-transient-activation\u2460"}],"title":"3.1. Local File System Permissions"}],"url":"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation"},
"4b7ca52a": {"dfnID":"4b7ca52a","dfnText":"permission descriptor type","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-permission-descriptor-type"}],"title":"2.2. Permissions"}],"url":"https://w3c.github.io/permissions/#dfn-permission-descriptor-type"},
"4f848e3e": {"dfnID":"4f848e3e","dfnText":"WritableStreamDefaultWriter","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestreamdefaultwriter"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#writablestreamdefaultwriter"},
"4ff66d05": {"dfnID":"4ff66d05","dfnText":"DataTransferItem","external":true,"refSections":[{"refs":[{"id":"ref-for-datatransferitem"},{"id":"ref-for-datatransferitem\u2460"}],"title":"3.6. Drag and Drop"}],"url":"https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem"},
"53275e46": {"dfnID":"53275e46","dfnText":"append (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-list-append\u2460"},{"id":"ref-for-list-append\u2461"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-idl-boolean\u2460"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-idl-boolean\u2461"},{"id":"ref-for-idl-boolean\u2462"},{"id":"ref-for-idl-boolean\u2463"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-idl-boolean\u2464"},{"id":"ref-for-idl-boolean\u2465"}],"title":"3. Accessing Local File System"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"54627f47": {"dfnID":"54627f47","dfnText":"starts with","external":true,"refSections":[{"refs":[{"id":"ref-for-string-starts-with"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#string-starts-with"},
"56f81a8e": {"dfnID":"56f81a8e","dfnText":"new","external":true,"refSections":[{"refs":[{"id":"ref-for-new"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://webidl.spec.whatwg.org/#new"},
"5958fe2e": {"dfnID":"5958fe2e","dfnText":"highwatermark","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestream-set-up-highwatermark"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#writablestream-set-up-highwatermark"},
"5991ccfb": {"dfnID":"5991ccfb","dfnText":"relevant realm","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-realm"}],"title":"2.3.1. The isSameEntry() method"},{"refs":[{"id":"ref-for-concept-relevant-realm\u2460"}],"title":"2.4.2. The createWritable() method"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"},
"59dc45b5": {"dfnID":"59dc45b5","dfnText":"WritableStream","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestream"},{"id":"ref-for-writablestream\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#writablestream"},
"59ed4e57": {"dfnID":"59ed4e57","dfnText":"ReadableStream","external":true,"refSections":[{"refs":[{"id":"ref-for-readablestream"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#readablestream"},
"5d1a2ad0": {"dfnID":"5d1a2ad0","dfnText":"TypeMismatchError","external":true,"refSections":[{"refs":[{"id":"ref-for-typemismatcherror"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-typemismatcherror\u2460"}],"title":"2.5.3. The getDirectoryHandle() method"}],"url":"https://webidl.spec.whatwg.org/#typemismatcherror"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-window\u2460"}],"title":"3. Accessing Local File System"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"5d7f2906": {"dfnID":"5d7f2906","dfnText":"sizealgorithm","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestream-set-up-sizealgorithm"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#writablestream-set-up-sizealgorithm"},
"5e129c74": {"dfnID":"5e129c74","dfnText":"QuotaExceededError","external":true,"refSections":[{"refs":[{"id":"ref-for-quotaexceedederror"},{"id":"ref-for-quotaexceedederror\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://webidl.spec.whatwg.org/#quotaexceedederror"},
"5f90bbfb": {"dfnID":"5f90bbfb","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-idl-undefined\u2460"},{"id":"ref-for-idl-undefined\u2461"},{"id":"ref-for-idl-undefined\u2462"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"620f832e": {"dfnID":"620f832e","dfnText":"state","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-permissionstatus-state"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dom-permissionstatus-state\u2460"},{"id":"ref-for-dom-permissionstatus-state\u2461"}],"title":"2.3.2. The queryPermission() method"}],"url":"https://w3c.github.io/permissions/#dom-permissionstatus-state"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"},{"id":"ref-for-list\u2460"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-list\u2461"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#list"},
"68d8cab8": {"dfnID":"68d8cab8","dfnText":"write()","external":true,"refSections":[{"refs":[{"id":"ref-for-default-writer-write"},{"id":"ref-for-default-writer-write\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#default-writer-write"},
"69d8b9f1": {"dfnID":"69d8b9f1","dfnText":"subtype","external":true,"refSections":[{"refs":[{"id":"ref-for-subtype"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://mimesniff.spec.whatwg.org/#subtype"},
"6b373a4a": {"dfnID":"6b373a4a","dfnText":"messageerror","external":true,"refSections":[{"refs":[{"id":"ref-for-event-messageerror"}],"title":"6.3. First-party vs third-party contexts."}],"url":"https://html.spec.whatwg.org/multipage/indices.html#event-messageerror"},
"6b815fdd": {"dfnID":"6b815fdd","dfnText":"is empty","external":true,"refSections":[{"refs":[{"id":"ref-for-list-is-empty"}],"title":"2.5.4. The removeEntry() method"}],"url":"https://infra.spec.whatwg.org/#list-is-empty"},
"6bb9d790": {"dfnID":"6bb9d790","dfnText":"obtain a local storage bottle map","external":true,"refSections":[{"refs":[{"id":"ref-for-obtain-a-local-storage-bottle-map"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map"},
"6c2d7879": {"dfnID":"6c2d7879","dfnText":"powerful feature","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-powerful-feature"}],"title":"2.2. Permissions"}],"url":"https://w3c.github.io/permissions/#dfn-powerful-feature"},
"6c3bee60": {"dfnID":"6c3bee60","dfnText":"PermissionState","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-permissionstate"},{"id":"ref-for-dom-permissionstate\u2460"}],"title":"2.3. The FileSystemHandle interface"}],"url":"https://w3c.github.io/permissions/#dom-permissionstate"},
"6d88ab2e": {"dfnID":"6d88ab2e","dfnText":"browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-window-bc"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-window-bc\u2460"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-window-bc\u2461"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc"},
"7140f092": {"dfnID":"7140f092","dfnText":"identifier","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-endpoint-identifier"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://storage.spec.whatwg.org/#storage-endpoint-identifier"},
"7393da89": {"dfnID":"7393da89","dfnText":"same origin","external":true,"refSections":[{"refs":[{"id":"ref-for-same-origin"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-same-origin\u2460"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-same-origin\u2461"}],"title":"3.1. Local File System Permissions"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"7787d359": {"dfnID":"7787d359","dfnText":"record","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-record"}],"title":"3. Accessing Local File System"}],"url":"https://webidl.spec.whatwg.org/#idl-record"},
"77b4c09a": {"dfnID":"77b4c09a","dfnText":"assert","external":true,"refSections":[{"refs":[{"id":"ref-for-assert"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://infra.spec.whatwg.org/#assert"},
"78f04503": {"dfnID":"78f04503","dfnText":"query()","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-permissions-query"},{"id":"ref-for-dom-permissions-query\u2460"},{"id":"ref-for-dom-permissions-query\u2461"}],"title":"2.3.2. The queryPermission() method"}],"url":"https://w3c.github.io/permissions/#dom-permissions-query"},
"7c195f8b": {"dfnID":"7c195f8b","dfnText":"essence","external":true,"refSections":[{"refs":[{"id":"ref-for-mime-type-essence"},{"id":"ref-for-mime-type-essence\u2460"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://mimesniff.spec.whatwg.org/#mime-type-essence"},
"7e94ee2f": {"dfnID":"7e94ee2f","dfnText":"the drag data item kind","external":true,"refSections":[{"refs":[{"id":"ref-for-the-drag-data-item-kind"}],"title":"3.6. Drag and Drop"}],"url":"https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind"},
"82ca3efc": {"dfnID":"82ca3efc","dfnText":"TypeError","external":true,"refSections":[{"refs":[{"id":"ref-for-exceptiondef-typeerror"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2460"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2461"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2464"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2461"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"8649548f": {"dfnID":"8649548f","dfnText":"StorageManager","external":true,"refSections":[{"refs":[{"id":"ref-for-storagemanager"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://storage.spec.whatwg.org/#storagemanager"},
"888d7c65": {"dfnID":"888d7c65","dfnText":"deserialization steps","external":true,"refSections":[{"refs":[{"id":"ref-for-deserialization-steps"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-deserialization-steps\u2460"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-deserialization-steps\u2461"}],"title":"2.5. The FileSystemDirectoryHandle interface"}],"url":"https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-Exposed\u2460"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-Exposed\u2461"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-Exposed\u2462"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"896f4663": {"dfnID":"896f4663","dfnText":"quota","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-endpoint-quota"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://storage.spec.whatwg.org/#storage-endpoint-quota"},
"8a30477b": {"dfnID":"8a30477b","dfnText":"global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-settings-object-global"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-concept-settings-object-global\u2460"}],"title":"3.1. Local File System Permissions"},{"refs":[{"id":"ref-for-concept-settings-object-global\u2461"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-concept-settings-object-global\u2462"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-concept-settings-object-global\u2463"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global"},
"8f5c2179": {"dfnID":"8f5c2179","dfnText":"a promise resolved with","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-resolved-with"},{"id":"ref-for-a-promise-resolved-with\u2460"}],"title":"3.6. Drag and Drop"},{"refs":[{"id":"ref-for-a-promise-resolved-with\u2461"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://webidl.spec.whatwg.org/#a-promise-resolved-with"},
"91461e7c": {"dfnID":"91461e7c","dfnText":"storage","external":true,"refSections":[{"refs":[{"id":"ref-for-site-storage"}],"title":"6.1. Users giving access to more, or more sensitive files than they intended."}],"url":"https://storage.spec.whatwg.org/#site-storage"},
"915aff5e": {"dfnID":"915aff5e","dfnText":"code point","external":true,"refSections":[{"refs":[{"id":"ref-for-code-point"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-code-point\u2460"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://infra.spec.whatwg.org/#code-point"},
"92d13070": {"dfnID":"92d13070","dfnText":"get a copy of the buffer source","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-get-buffer-source-copy"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://webidl.spec.whatwg.org/#dfn-get-buffer-source-copy"},
"9604548f": {"dfnID":"9604548f","dfnText":"read/write mode","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-dnd-rw"}],"title":"3.6. Drag and Drop"}],"url":"https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-rw"},
"98c6a112": {"dfnID":"98c6a112","dfnText":"storage endpoint","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-endpoint"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://storage.spec.whatwg.org/#storage-endpoint"},
"99c988d6": {"dfnID":"99c988d6","dfnText":"remove","external":true,"refSections":[{"refs":[{"id":"ref-for-list-remove"}],"title":"2.5.4. The removeEntry() method"}],"url":"https://infra.spec.whatwg.org/#list-remove"},
"9a7f3f6f": {"dfnID":"9a7f3f6f","dfnText":"asynchronous iterator initialization steps","external":true,"refSections":[{"refs":[{"id":"ref-for-asynchronous-iterator-initialization-steps"}],"title":"2.5.1. Directory iteration"}],"url":"https://webidl.spec.whatwg.org/#asynchronous-iterator-initialization-steps"},
"9c4c1e66": {"dfnID":"9c4c1e66","dfnText":"relevant settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-relevant-settings-object"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-relevant-settings-object\u2460"},{"id":"ref-for-relevant-settings-object\u2461"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-relevant-settings-object\u2462"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-relevant-settings-object\u2463"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-relevant-settings-object\u2464"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-idl-sequence\u2460"},{"id":"ref-for-idl-sequence\u2461"},{"id":"ref-for-idl-sequence\u2462"}],"title":"3. Accessing Local File System"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"9eda9b58": {"dfnID":"9eda9b58","dfnText":"NotFoundError","external":true,"refSections":[{"refs":[{"id":"ref-for-notfounderror"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-notfounderror\u2460"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-notfounderror\u2461"}],"title":"2.5.4. The removeEntry() method"}],"url":"https://webidl.spec.whatwg.org/#notfounderror"},
"a088e610": {"dfnID":"a088e610","dfnText":"convert","external":true,"refSections":[{"refs":[{"id":"ref-for-javascript-string-convert"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://infra.spec.whatwg.org/#javascript-string-convert"},
"a307241e": {"dfnID":"a307241e","dfnText":"release","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestreamdefaultwriter-release"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-writablestreamdefaultwriter-release\u2460"}],"title":"2.6.2. The seek() method"},{"refs":[{"id":"ref-for-writablestreamdefaultwriter-release\u2461"}],"title":"2.6.3. The truncate() method"}],"url":"https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release"},
"a3b18719": {"dfnID":"a3b18719","dfnText":"append (for set)","external":true,"refSections":[{"refs":[{"id":"ref-for-set-append"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-set-append\u2460"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-set-append\u2461"}],"title":"2.5.3. The getDirectoryHandle() method"}],"url":"https://infra.spec.whatwg.org/#set-append"},
"a72449dd": {"dfnID":"a72449dd","dfnText":"in parallel","external":true,"refSections":[{"refs":[{"id":"ref-for-in-parallel"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-in-parallel\u2460"}],"title":"2.3.1. The isSameEntry() method"},{"refs":[{"id":"ref-for-in-parallel\u2461"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-in-parallel\u2462"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-in-parallel\u2463"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-in-parallel\u2464"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-in-parallel\u2465"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-in-parallel\u2466"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-in-parallel\u2467"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-in-parallel\u2468"},{"id":"ref-for-in-parallel\u2460\u24ea"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-in-parallel\u2460\u2460"},{"id":"ref-for-in-parallel\u2460\u2461"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-in-parallel\u2460\u2462"},{"id":"ref-for-in-parallel\u2460\u2463"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-in-parallel\u2460\u2464"},{"id":"ref-for-in-parallel\u2460\u2465"}],"title":"3.5. The showDirectoryPicker() method"},{"refs":[{"id":"ref-for-in-parallel\u2460\u2466"}],"title":"3.6. Drag and Drop"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"ae8def21": {"dfnID":"ae8def21","dfnText":"contain","external":true,"refSections":[{"refs":[{"id":"ref-for-list-contain"}],"title":"2.1. Concepts"}],"url":"https://infra.spec.whatwg.org/#list-contain"},
"b01b1359": {"dfnID":"b01b1359","dfnText":"opaque origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-origin-opaque"}],"title":"3.1. Local File System Permissions"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque"},
"b0d7f3c3": {"dfnID":"b0d7f3c3","dfnText":"USVString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-USVString"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-idl-USVString\u2460"},{"id":"ref-for-idl-USVString\u2461"},{"id":"ref-for-idl-USVString\u2462"},{"id":"ref-for-idl-USVString\u2463"},{"id":"ref-for-idl-USVString\u2464"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-idl-USVString\u2465"},{"id":"ref-for-idl-USVString\u2466"},{"id":"ref-for-idl-USVString\u2467"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-idl-USVString\u2468"},{"id":"ref-for-idl-USVString\u2460\u24ea"},{"id":"ref-for-idl-USVString\u2460\u2460"},{"id":"ref-for-idl-USVString\u2460\u2461"}],"title":"3. Accessing Local File System"}],"url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"b262501e": {"dfnID":"b262501e","dfnText":"reject","external":true,"refSections":[{"refs":[{"id":"ref-for-reject"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-reject\u2460"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-reject\u2461"},{"id":"ref-for-reject\u2462"},{"id":"ref-for-reject\u2463"},{"id":"ref-for-reject\u2464"},{"id":"ref-for-reject\u2465"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-reject\u2466"},{"id":"ref-for-reject\u2467"},{"id":"ref-for-reject\u2468"},{"id":"ref-for-reject\u2460\u24ea"},{"id":"ref-for-reject\u2460\u2460"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-reject\u2460\u2461"},{"id":"ref-for-reject\u2460\u2462"},{"id":"ref-for-reject\u2460\u2463"},{"id":"ref-for-reject\u2460\u2464"},{"id":"ref-for-reject\u2460\u2465"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-reject\u2460\u2466"},{"id":"ref-for-reject\u2460\u2467"},{"id":"ref-for-reject\u2460\u2468"},{"id":"ref-for-reject\u2461\u24ea"},{"id":"ref-for-reject\u2461\u2460"},{"id":"ref-for-reject\u2461\u2461"},{"id":"ref-for-reject\u2461\u2462"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-reject\u2461\u2463"},{"id":"ref-for-reject\u2461\u2464"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-reject\u2461\u2465"},{"id":"ref-for-reject\u2461\u2466"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-reject\u2461\u2467"},{"id":"ref-for-reject\u2461\u2468"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"https://webidl.spec.whatwg.org/#reject"},
"b5c41c63": {"dfnID":"b5c41c63","dfnText":"type","external":true,"refSections":[{"refs":[{"id":"ref-for-type"},{"id":"ref-for-type\u2460"},{"id":"ref-for-type\u2461"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://mimesniff.spec.whatwg.org/#type"},
"b75bb3bd": {"dfnID":"b75bb3bd","dfnText":"SecureContext","external":true,"refSections":[{"refs":[{"id":"ref-for-SecureContext"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-SecureContext\u2460"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-SecureContext\u2461"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-SecureContext\u2462"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-SecureContext\u2463"}],"title":"3. Accessing Local File System"},{"refs":[{"id":"ref-for-SecureContext\u2464"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://webidl.spec.whatwg.org/#SecureContext"},
"b7d73f5b": {"dfnID":"b7d73f5b","dfnText":"Blob","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-Blob"},{"id":"ref-for-dfn-Blob\u2460"},{"id":"ref-for-dfn-Blob\u2461"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://w3c.github.io/FileAPI/#dfn-Blob"},
"ba556545": {"dfnID":"ba556545","dfnText":"NotAllowedError","external":true,"refSections":[{"refs":[{"id":"ref-for-notallowederror"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-notallowederror\u2460"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-notallowederror\u2461"},{"id":"ref-for-notallowederror\u2462"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-notallowederror\u2463"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-notallowederror\u2464"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-notallowederror\u2465"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-notallowederror\u2466"},{"id":"ref-for-notallowederror\u2467"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://webidl.spec.whatwg.org/#notallowederror"},
"bb0e27f7": {"dfnID":"bb0e27f7","dfnText":"read-only mode","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-dnd-ro"}],"title":"3.6. Drag and Drop"}],"url":"https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro"},
"bcc085e3": {"dfnID":"bcc085e3","dfnText":"request permission to use","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-request-permission-to-use"}],"title":"2.2. Permissions"}],"url":"https://w3c.github.io/permissions/#dfn-request-permission-to-use"},
"bdbd19d1": {"dfnID":"bdbd19d1","dfnText":"Promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise"},{"id":"ref-for-idl-promise\u2460"},{"id":"ref-for-idl-promise\u2461"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-idl-promise\u2462"},{"id":"ref-for-idl-promise\u2463"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-idl-promise\u2464"},{"id":"ref-for-idl-promise\u2465"},{"id":"ref-for-idl-promise\u2466"},{"id":"ref-for-idl-promise\u2467"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-idl-promise\u2468"},{"id":"ref-for-idl-promise\u2460\u24ea"},{"id":"ref-for-idl-promise\u2460\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-idl-promise\u2460\u2461"},{"id":"ref-for-idl-promise\u2460\u2462"},{"id":"ref-for-idl-promise\u2460\u2463"}],"title":"3. Accessing Local File System"},{"refs":[{"id":"ref-for-idl-promise\u2460\u2464"}],"title":"3.6. Drag and Drop"},{"refs":[{"id":"ref-for-idl-promise\u2460\u2465"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://webidl.spec.whatwg.org/#idl-promise"},
"c3e881ef": {"dfnID":"c3e881ef","dfnText":"SecurityError","external":true,"refSections":[{"refs":[{"id":"ref-for-securityerror"},{"id":"ref-for-securityerror\u2460"},{"id":"ref-for-securityerror\u2461"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-securityerror\u2462"},{"id":"ref-for-securityerror\u2463"},{"id":"ref-for-securityerror\u2464"}],"title":"3.1. Local File System Permissions"},{"refs":[{"id":"ref-for-securityerror\u2465"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://webidl.spec.whatwg.org/#securityerror"},
"c53e5a8e": {"dfnID":"c53e5a8e","dfnText":"snapshot state","external":true,"refSections":[{"refs":[{"id":"ref-for-snapshot-state"}],"title":"2.4.1. The getFile() method"}],"url":"https://w3c.github.io/FileAPI/#snapshot-state"},
"c63519ed": {"dfnID":"c63519ed","dfnText":"top-level origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-environment-top-level-origin"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-concept-environment-top-level-origin\u2460"}],"title":"3.1. Local File System Permissions"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin"},
"c6ce3c60": {"dfnID":"c6ce3c60","dfnText":"granted","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-permissionstate-granted"},{"id":"ref-for-dom-permissionstate-granted\u2460"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dom-permissionstate-granted\u2461"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-dom-permissionstate-granted\u2462"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-dom-permissionstate-granted\u2463"},{"id":"ref-for-dom-permissionstate-granted\u2464"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-dom-permissionstate-granted\u2465"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-dom-permissionstate-granted\u2466"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-dom-permissionstate-granted\u2467"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-dom-permissionstate-granted\u2468"},{"id":"ref-for-dom-permissionstate-granted\u2460\u24ea"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-permissionstate-granted\u2460\u2460"},{"id":"ref-for-dom-permissionstate-granted\u2460\u2461"}],"title":"3.1. Local File System Permissions"}],"url":"https://w3c.github.io/permissions/#dom-permissionstate-granted"},
"cac8dd86": {"dfnID":"cac8dd86","dfnText":"storage quota","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-quota"},{"id":"ref-for-storage-quota\u2460"},{"id":"ref-for-storage-quota\u2461"},{"id":"ref-for-storage-quota\u2462"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-storage-quota\u2463"},{"id":"ref-for-storage-quota\u2464"},{"id":"ref-for-storage-quota\u2465"}],"title":"7.3. Filling up a users disk"}],"url":"https://storage.spec.whatwg.org/#storage-quota"},
"cae6bf57": {"dfnID":"cae6bf57","dfnText":"InvalidModificationError","external":true,"refSections":[{"refs":[{"id":"ref-for-invalidmodificationerror"}],"title":"2.5.4. The removeEntry() method"}],"url":"https://webidl.spec.whatwg.org/#invalidmodificationerror"},
"cd028611": {"dfnID":"cd028611","dfnText":"File","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-file"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-dfn-file\u2460"},{"id":"ref-for-dfn-file\u2461"},{"id":"ref-for-dfn-file\u2462"}],"title":"2.4.1. The getFile() method"}],"url":"https://w3c.github.io/FileAPI/#dfn-file"},
"create-a-new-filesystemwritablefilestream": {"dfnID":"create-a-new-filesystemwritablefilestream","dfnText":"create a new FileSystemWritableFileStream","external":false,"refSections":[{"refs":[{"id":"ref-for-create-a-new-filesystemwritablefilestream"}],"title":"2.4.2. The createWritable() method"}],"url":"#create-a-new-filesystemwritablefilestream"},
"d04a8309": {"dfnID":"d04a8309","dfnText":"writealgorithm","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestream-set-up-writealgorithm"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://streams.spec.whatwg.org/#writablestream-set-up-writealgorithm"},
"d0b4a948": {"dfnID":"d0b4a948","dfnText":"a promise rejected with","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-rejected-with"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-a-promise-rejected-with\u2460"},{"id":"ref-for-a-promise-rejected-with\u2461"}],"title":"3.1. Local File System Permissions"},{"refs":[{"id":"ref-for-a-promise-rejected-with\u2462"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://webidl.spec.whatwg.org/#a-promise-rejected-with"},
"d124397f": {"dfnID":"d124397f","dfnText":"permission state","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-permission-state"},{"id":"ref-for-dfn-permission-state\u2460"},{"id":"ref-for-dfn-permission-state\u2461"},{"id":"ref-for-dfn-permission-state\u2462"},{"id":"ref-for-dfn-permission-state\u2463"},{"id":"ref-for-dfn-permission-state\u2464"},{"id":"ref-for-dfn-permission-state\u2465"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dfn-permission-state\u2466"},{"id":"ref-for-dfn-permission-state\u2467"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dfn-permission-state\u2468"},{"id":"ref-for-dfn-permission-state\u2460\u24ea"}],"title":"3.1. Local File System Permissions"}],"url":"https://w3c.github.io/permissions/#dfn-permission-state"},
"d25dfb2c": {"dfnID":"d25dfb2c","dfnText":"AbortError","external":true,"refSections":[{"refs":[{"id":"ref-for-aborterror"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-aborterror\u2460"},{"id":"ref-for-aborterror\u2461"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-aborterror\u2462"},{"id":"ref-for-aborterror\u2463"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-aborterror\u2464"},{"id":"ref-for-aborterror\u2465"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"https://webidl.spec.whatwg.org/#aborterror"},
"d54f5897": {"dfnID":"d54f5897","dfnText":"DataCloneError","external":true,"refSections":[{"refs":[{"id":"ref-for-datacloneerror"}],"title":"2.3. The FileSystemHandle interface"}],"url":"https://webidl.spec.whatwg.org/#datacloneerror"},
"d72dabca": {"dfnID":"d72dabca","dfnText":"parse a mime type","external":true,"refSections":[{"refs":[{"id":"ref-for-parse-a-mime-type"},{"id":"ref-for-parse-a-mime-type\u2460"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://mimesniff.spec.whatwg.org/#parse-a-mime-type"},
"d9de012d": {"dfnID":"d9de012d","dfnText":"types","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-endpoint-types"}],"title":"4. Accessing the Origin Private File System"}],"url":"https://storage.spec.whatwg.org/#storage-endpoint-types"},
"dacde8b5": {"dfnID":"dacde8b5","dfnText":"a new promise","external":true,"refSections":[{"refs":[{"id":"ref-for-a-new-promise"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-a-new-promise\u2460"}],"title":"2.3.1. The isSameEntry() method"},{"refs":[{"id":"ref-for-a-new-promise\u2461"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-a-new-promise\u2462"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-a-new-promise\u2463"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-a-new-promise\u2464"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-a-new-promise\u2465"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-a-new-promise\u2466"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-a-new-promise\u2467"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-a-new-promise\u2468"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-a-new-promise\u2460\u24ea"},{"id":"ref-for-a-new-promise\u2460\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-a-new-promise\u2460\u2461"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-a-new-promise\u2460\u2462"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-a-new-promise\u2460\u2463"}],"title":"3.5. The showDirectoryPicker() method"},{"refs":[{"id":"ref-for-a-new-promise\u2460\u2464"}],"title":"3.6. Drag and Drop"}],"url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"db6dbae4": {"dfnID":"db6dbae4","dfnText":"realm","external":true,"refSections":[{"refs":[{"id":"ref-for-realm"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://tc39.github.io/ecma262/#realm"},
"dbf8e074": {"dfnID":"dbf8e074","dfnText":"PermissionStatus","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-permissionstatus"}],"title":"2.2. Permissions"}],"url":"https://w3c.github.io/permissions/#dom-permissionstatus"},
"dictdef-directorypickeroptions": {"dfnID":"dictdef-directorypickeroptions","dfnText":"DirectoryPickerOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-directorypickeroptions"}],"title":"3. Accessing Local File System"}],"url":"#dictdef-directorypickeroptions"},
"dictdef-filepickeraccepttype": {"dfnID":"dictdef-filepickeraccepttype","dfnText":"FilePickerAcceptType","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-filepickeraccepttype"}],"title":"3. Accessing Local File System"}],"url":"#dictdef-filepickeraccepttype"},
"dictdef-filepickeroptions": {"dfnID":"dictdef-filepickeroptions","dfnText":"FilePickerOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-filepickeroptions"},{"id":"ref-for-dictdef-filepickeroptions\u2460"}],"title":"3. Accessing Local File System"},{"refs":[{"id":"ref-for-dictdef-filepickeroptions\u2461"},{"id":"ref-for-dictdef-filepickeroptions\u2462"},{"id":"ref-for-dictdef-filepickeroptions\u2463"}],"title":"3.4. FilePickerOptions.types"}],"url":"#dictdef-filepickeroptions"},
"dictdef-filesystemcreatewritableoptions": {"dfnID":"dictdef-filesystemcreatewritableoptions","dfnText":"FileSystemCreateWritableOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-filesystemcreatewritableoptions"}],"title":"2.4. The FileSystemFileHandle interface"}],"url":"#dictdef-filesystemcreatewritableoptions"},
"dictdef-filesystemgetdirectoryoptions": {"dfnID":"dictdef-filesystemgetdirectoryoptions","dfnText":"FileSystemGetDirectoryOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-filesystemgetdirectoryoptions"}],"title":"2.5. The FileSystemDirectoryHandle interface"}],"url":"#dictdef-filesystemgetdirectoryoptions"},
"dictdef-filesystemgetfileoptions": {"dfnID":"dictdef-filesystemgetfileoptions","dfnText":"FileSystemGetFileOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-filesystemgetfileoptions"}],"title":"2.5. The FileSystemDirectoryHandle interface"}],"url":"#dictdef-filesystemgetfileoptions"},
"dictdef-filesystemhandlepermissiondescriptor": {"dfnID":"dictdef-filesystemhandlepermissiondescriptor","dfnText":"FileSystemHandlePermissionDescriptor","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-filesystemhandlepermissiondescriptor"},{"id":"ref-for-dictdef-filesystemhandlepermissiondescriptor\u2460"}],"title":"2.3. The FileSystemHandle interface"}],"url":"#dictdef-filesystemhandlepermissiondescriptor"},
"dictdef-filesystempermissiondescriptor": {"dfnID":"dictdef-filesystempermissiondescriptor","dfnText":"FileSystemPermissionDescriptor","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-filesystempermissiondescriptor"},{"id":"ref-for-dictdef-filesystempermissiondescriptor\u2460"},{"id":"ref-for-dictdef-filesystempermissiondescriptor\u2461"},{"id":"ref-for-dictdef-filesystempermissiondescriptor\u2462"},{"id":"ref-for-dictdef-filesystempermissiondescriptor\u2463"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dictdef-filesystempermissiondescriptor\u2464"},{"id":"ref-for-dictdef-filesystempermissiondescriptor\u2465"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#dictdef-filesystempermissiondescriptor"},
"dictdef-filesystemremoveoptions": {"dfnID":"dictdef-filesystemremoveoptions","dfnText":"FileSystemRemoveOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-filesystemremoveoptions"}],"title":"2.5. The FileSystemDirectoryHandle interface"}],"url":"#dictdef-filesystemremoveoptions"},
"dictdef-openfilepickeroptions": {"dfnID":"dictdef-openfilepickeroptions","dfnText":"OpenFilePickerOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-openfilepickeroptions"}],"title":"3. Accessing Local File System"}],"url":"#dictdef-openfilepickeroptions"},
"dictdef-savefilepickeroptions": {"dfnID":"dictdef-savefilepickeroptions","dfnText":"SaveFilePickerOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-savefilepickeroptions"}],"title":"3. Accessing Local File System"}],"url":"#dictdef-savefilepickeroptions"},
"dictdef-writeparams": {"dfnID":"dictdef-writeparams","dfnText":"WriteParams","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-writeparams"},{"id":"ref-for-dictdef-writeparams\u2460"},{"id":"ref-for-dictdef-writeparams\u2461"},{"id":"ref-for-dictdef-writeparams\u2462"},{"id":"ref-for-dictdef-writeparams\u2463"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#dictdef-writeparams"},
"directory": {"dfnID":"directory","dfnText":"directory entry","external":false,"refSections":[{"refs":[{"id":"ref-for-directory"},{"id":"ref-for-directory\u2460"},{"id":"ref-for-directory\u2461"},{"id":"ref-for-directory\u2462"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-directory\u2463"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-directory\u2464"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-directory\u2465"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-directory\u2466"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-directory\u2467"}],"title":"3.5. The showDirectoryPicker() method"},{"refs":[{"id":"ref-for-directory\u2468"},{"id":"ref-for-directory\u2460\u24ea"}],"title":"3.6. Drag and Drop"},{"refs":[{"id":"ref-for-directory\u2460\u2460"}],"title":"4. Accessing the Origin Private File System"}],"url":"#directory"},
"directory-entry-children": {"dfnID":"directory-entry-children","dfnText":"children","external":false,"refSections":[{"refs":[{"id":"ref-for-directory-entry-children"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-directory-entry-children\u2460"},{"id":"ref-for-directory-entry-children\u2461"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-directory-entry-children\u2462"},{"id":"ref-for-directory-entry-children\u2463"},{"id":"ref-for-directory-entry-children\u2464"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-directory-entry-children\u2465"},{"id":"ref-for-directory-entry-children\u2466"},{"id":"ref-for-directory-entry-children\u2467"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-directory-entry-children\u2468"}],"title":"4. Accessing the Origin Private File System"}],"url":"#directory-entry-children"},
"dom-datatransferitem-getasfilesystemhandle": {"dfnID":"dom-datatransferitem-getasfilesystemhandle","dfnText":"getAsFileSystemHandle()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-datatransferitem-getasfilesystemhandle"},{"id":"ref-for-dom-datatransferitem-getasfilesystemhandle\u2460"}],"title":"3.6. Drag and Drop"}],"url":"#dom-datatransferitem-getasfilesystemhandle"},
"dom-filepickeraccepttype-accept": {"dfnID":"dom-filepickeraccepttype-accept","dfnText":"accept","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filepickeraccepttype-accept"},{"id":"ref-for-dom-filepickeraccepttype-accept\u2460"},{"id":"ref-for-dom-filepickeraccepttype-accept\u2461"},{"id":"ref-for-dom-filepickeraccepttype-accept\u2462"},{"id":"ref-for-dom-filepickeraccepttype-accept\u2463"}],"title":"3.4. FilePickerOptions.types"}],"url":"#dom-filepickeraccepttype-accept"},
"dom-filepickeraccepttype-description": {"dfnID":"dom-filepickeraccepttype-description","dfnText":"description","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filepickeraccepttype-description"},{"id":"ref-for-dom-filepickeraccepttype-description\u2460"},{"id":"ref-for-dom-filepickeraccepttype-description\u2461"},{"id":"ref-for-dom-filepickeraccepttype-description\u2462"}],"title":"3.4. FilePickerOptions.types"}],"url":"#dom-filepickeraccepttype-description"},
"dom-filepickeroptions-excludeacceptalloption": {"dfnID":"dom-filepickeroptions-excludeacceptalloption","dfnText":"excludeAcceptAllOption","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filepickeroptions-excludeacceptalloption"},{"id":"ref-for-dom-filepickeroptions-excludeacceptalloption\u2460"},{"id":"ref-for-dom-filepickeroptions-excludeacceptalloption\u2461"}],"title":"3.4. FilePickerOptions.types"}],"url":"#dom-filepickeroptions-excludeacceptalloption"},
"dom-filepickeroptions-types": {"dfnID":"dom-filepickeroptions-types","dfnText":"types","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filepickeroptions-types"},{"id":"ref-for-dom-filepickeroptions-types\u2460"},{"id":"ref-for-dom-filepickeroptions-types\u2461"},{"id":"ref-for-dom-filepickeroptions-types\u2462"},{"id":"ref-for-dom-filepickeroptions-types\u2463"}],"title":"3.4. FilePickerOptions.types"}],"url":"#dom-filepickeroptions-types"},
"dom-filesystemcreatewritableoptions-keepexistingdata": {"dfnID":"dom-filesystemcreatewritableoptions-keepexistingdata","dfnText":"keepExistingData","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemcreatewritableoptions-keepexistingdata"},{"id":"ref-for-dom-filesystemcreatewritableoptions-keepexistingdata\u2460"},{"id":"ref-for-dom-filesystemcreatewritableoptions-keepexistingdata\u2461"}],"title":"2.4.2. The createWritable() method"}],"url":"#dom-filesystemcreatewritableoptions-keepexistingdata"},
"dom-filesystemdirectoryhandle-getdirectoryhandle": {"dfnID":"dom-filesystemdirectoryhandle-getdirectoryhandle","dfnText":"getDirectoryHandle(name, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle\u2460"},{"id":"ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle\u2461"},{"id":"ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle\u2462"},{"id":"ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle\u2463"}],"title":"2.5.3. The getDirectoryHandle() method"}],"url":"#dom-filesystemdirectoryhandle-getdirectoryhandle"},
"dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-name": {"dfnID":"dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-name"},
"dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-options": {"dfnID":"dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-options"},
"dom-filesystemdirectoryhandle-getfilehandle": {"dfnID":"dom-filesystemdirectoryhandle-getfilehandle","dfnText":"getFileHandle(name, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemdirectoryhandle-getfilehandle"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemdirectoryhandle-getfilehandle\u2460"},{"id":"ref-for-dom-filesystemdirectoryhandle-getfilehandle\u2461"},{"id":"ref-for-dom-filesystemdirectoryhandle-getfilehandle\u2462"},{"id":"ref-for-dom-filesystemdirectoryhandle-getfilehandle\u2463"}],"title":"2.5.2. The getFileHandle() method"}],"url":"#dom-filesystemdirectoryhandle-getfilehandle"},
"dom-filesystemdirectoryhandle-getfilehandle-name-options-name": {"dfnID":"dom-filesystemdirectoryhandle-getfilehandle-name-options-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-filesystemdirectoryhandle-getfilehandle-name-options-name"},
"dom-filesystemdirectoryhandle-getfilehandle-name-options-options": {"dfnID":"dom-filesystemdirectoryhandle-getfilehandle-name-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-filesystemdirectoryhandle-getfilehandle-name-options-options"},
"dom-filesystemdirectoryhandle-removeentry": {"dfnID":"dom-filesystemdirectoryhandle-removeentry","dfnText":"removeEntry(name, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemdirectoryhandle-removeentry"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemdirectoryhandle-removeentry\u2460"},{"id":"ref-for-dom-filesystemdirectoryhandle-removeentry\u2461"},{"id":"ref-for-dom-filesystemdirectoryhandle-removeentry\u2462"},{"id":"ref-for-dom-filesystemdirectoryhandle-removeentry\u2463"}],"title":"2.5.4. The removeEntry() method"}],"url":"#dom-filesystemdirectoryhandle-removeentry"},
"dom-filesystemdirectoryhandle-removeentry-name-options-name": {"dfnID":"dom-filesystemdirectoryhandle-removeentry-name-options-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-filesystemdirectoryhandle-removeentry-name-options-name"},
"dom-filesystemdirectoryhandle-removeentry-name-options-options": {"dfnID":"dom-filesystemdirectoryhandle-removeentry-name-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-filesystemdirectoryhandle-removeentry-name-options-options"},
"dom-filesystemdirectoryhandle-resolve": {"dfnID":"dom-filesystemdirectoryhandle-resolve","dfnText":"resolve(possibleDescendant)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemdirectoryhandle-resolve"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemdirectoryhandle-resolve\u2460"},{"id":"ref-for-dom-filesystemdirectoryhandle-resolve\u2461"}],"title":"2.5.5. The resolve() method"}],"url":"#dom-filesystemdirectoryhandle-resolve"},
"dom-filesystemdirectoryhandle-resolve-possibledescendant-possibledescendant": {"dfnID":"dom-filesystemdirectoryhandle-resolve-possibledescendant-possibledescendant","dfnText":"possibleDescendant","external":false,"refSections":[],"url":"#dom-filesystemdirectoryhandle-resolve-possibledescendant-possibledescendant"},
"dom-filesystemfilehandle-createwritable": {"dfnID":"dom-filesystemfilehandle-createwritable","dfnText":"createWritable(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemfilehandle-createwritable"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemfilehandle-createwritable\u2460"},{"id":"ref-for-dom-filesystemfilehandle-createwritable\u2461"},{"id":"ref-for-dom-filesystemfilehandle-createwritable\u2462"}],"title":"2.4.2. The createWritable() method"}],"url":"#dom-filesystemfilehandle-createwritable"},
"dom-filesystemfilehandle-createwritable-options-options": {"dfnID":"dom-filesystemfilehandle-createwritable-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-filesystemfilehandle-createwritable-options-options"},
"dom-filesystemfilehandle-getfile": {"dfnID":"dom-filesystemfilehandle-getfile","dfnText":"getFile()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemfilehandle-getfile"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemfilehandle-getfile\u2460"},{"id":"ref-for-dom-filesystemfilehandle-getfile\u2461"}],"title":"2.4.1. The getFile() method"}],"url":"#dom-filesystemfilehandle-getfile"},
"dom-filesystemgetdirectoryoptions-create": {"dfnID":"dom-filesystemgetdirectoryoptions-create","dfnText":"create","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemgetdirectoryoptions-create"},{"id":"ref-for-dom-filesystemgetdirectoryoptions-create\u2460"},{"id":"ref-for-dom-filesystemgetdirectoryoptions-create\u2461"},{"id":"ref-for-dom-filesystemgetdirectoryoptions-create\u2462"}],"title":"2.5.3. The getDirectoryHandle() method"}],"url":"#dom-filesystemgetdirectoryoptions-create"},
"dom-filesystemgetfileoptions-create": {"dfnID":"dom-filesystemgetfileoptions-create","dfnText":"create","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemgetfileoptions-create"},{"id":"ref-for-dom-filesystemgetfileoptions-create\u2460"},{"id":"ref-for-dom-filesystemgetfileoptions-create\u2461"},{"id":"ref-for-dom-filesystemgetfileoptions-create\u2462"},{"id":"ref-for-dom-filesystemgetfileoptions-create\u2463"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-dom-filesystemgetfileoptions-create\u2464"}],"title":"2.5.3. The getDirectoryHandle() method"}],"url":"#dom-filesystemgetfileoptions-create"},
"dom-filesystemhandle-issameentry": {"dfnID":"dom-filesystemhandle-issameentry","dfnText":"isSameEntry(other)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemhandle-issameentry"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemhandle-issameentry\u2460"},{"id":"ref-for-dom-filesystemhandle-issameentry\u2461"}],"title":"2.3.1. The isSameEntry() method"}],"url":"#dom-filesystemhandle-issameentry"},
"dom-filesystemhandle-issameentry-other-other": {"dfnID":"dom-filesystemhandle-issameentry-other-other","dfnText":"other","external":false,"refSections":[],"url":"#dom-filesystemhandle-issameentry-other-other"},
"dom-filesystemhandle-kind": {"dfnID":"dom-filesystemhandle-kind","dfnText":"kind","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemhandle-kind"},{"id":"ref-for-dom-filesystemhandle-kind\u2460"}],"title":"2.3. The FileSystemHandle interface"}],"url":"#dom-filesystemhandle-kind"},
"dom-filesystemhandle-name": {"dfnID":"dom-filesystemhandle-name","dfnText":"name","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemhandle-name"},{"id":"ref-for-dom-filesystemhandle-name\u2460"}],"title":"2.3. The FileSystemHandle interface"}],"url":"#dom-filesystemhandle-name"},
"dom-filesystemhandle-querypermission": {"dfnID":"dom-filesystemhandle-querypermission","dfnText":"queryPermission(descriptor)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemhandle-querypermission"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemhandle-querypermission\u2460"},{"id":"ref-for-dom-filesystemhandle-querypermission\u2461"},{"id":"ref-for-dom-filesystemhandle-querypermission\u2462"},{"id":"ref-for-dom-filesystemhandle-querypermission\u2463"}],"title":"2.3.2. The queryPermission() method"}],"url":"#dom-filesystemhandle-querypermission"},
"dom-filesystemhandle-querypermission-descriptor-descriptor": {"dfnID":"dom-filesystemhandle-querypermission-descriptor-descriptor","dfnText":"descriptor","external":false,"refSections":[],"url":"#dom-filesystemhandle-querypermission-descriptor-descriptor"},
"dom-filesystemhandle-requestpermission": {"dfnID":"dom-filesystemhandle-requestpermission","dfnText":"requestPermission(descriptor)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemhandle-requestpermission"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-dom-filesystemhandle-requestpermission\u2460"},{"id":"ref-for-dom-filesystemhandle-requestpermission\u2461"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-dom-filesystemhandle-requestpermission\u2462"},{"id":"ref-for-dom-filesystemhandle-requestpermission\u2463"},{"id":"ref-for-dom-filesystemhandle-requestpermission\u2464"},{"id":"ref-for-dom-filesystemhandle-requestpermission\u2465"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-dom-filesystemhandle-requestpermission\u2466"}],"title":"6.3. First-party vs third-party contexts."}],"url":"#dom-filesystemhandle-requestpermission"},
"dom-filesystemhandle-requestpermission-descriptor-descriptor": {"dfnID":"dom-filesystemhandle-requestpermission-descriptor-descriptor","dfnText":"descriptor","external":false,"refSections":[],"url":"#dom-filesystemhandle-requestpermission-descriptor-descriptor"},
"dom-filesystemhandlekind-directory": {"dfnID":"dom-filesystemhandlekind-directory","dfnText":"\"directory\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemhandlekind-directory"},{"id":"ref-for-dom-filesystemhandlekind-directory\u2460"}],"title":"2.3. The FileSystemHandle interface"}],"url":"#dom-filesystemhandlekind-directory"},
"dom-filesystemhandlekind-file": {"dfnID":"dom-filesystemhandlekind-file","dfnText":"\"file\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemhandlekind-file"},{"id":"ref-for-dom-filesystemhandlekind-file\u2460"}],"title":"2.3. The FileSystemHandle interface"}],"url":"#dom-filesystemhandlekind-file"},
"dom-filesystemhandlepermissiondescriptor-mode": {"dfnID":"dom-filesystemhandlepermissiondescriptor-mode","dfnText":"mode","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemhandlepermissiondescriptor-mode"},{"id":"ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2460"},{"id":"ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2461"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2462"},{"id":"ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2463"},{"id":"ref-for-dom-filesystemhandlepermissiondescriptor-mode\u2464"}],"title":"2.3.3. The requestPermission() method"}],"url":"#dom-filesystemhandlepermissiondescriptor-mode"},
"dom-filesystempermissiondescriptor-handle": {"dfnID":"dom-filesystempermissiondescriptor-handle","dfnText":"handle","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystempermissiondescriptor-handle"},{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2460"},{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2461"},{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2462"},{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2463"},{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2464"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2465"},{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2466"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2467"},{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2468"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2460\u24ea"},{"id":"ref-for-dom-filesystempermissiondescriptor-handle\u2460\u2460"}],"title":"3.1. Local File System Permissions"}],"url":"#dom-filesystempermissiondescriptor-handle"},
"dom-filesystempermissiondescriptor-mode": {"dfnID":"dom-filesystempermissiondescriptor-mode","dfnText":"mode","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystempermissiondescriptor-mode"},{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2460"},{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2461"},{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2462"},{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2463"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2464"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2465"},{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2466"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2467"},{"id":"ref-for-dom-filesystempermissiondescriptor-mode\u2468"}],"title":"3.1. Local File System Permissions"}],"url":"#dom-filesystempermissiondescriptor-mode"},
"dom-filesystempermissionmode-read": {"dfnID":"dom-filesystempermissionmode-read","dfnText":"\"read\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystempermissionmode-read"},{"id":"ref-for-dom-filesystempermissionmode-read\u2460"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-read\u2461"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-read\u2462"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-read\u2463"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-read\u2464"},{"id":"ref-for-dom-filesystempermissionmode-read\u2465"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-read\u2466"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-read\u2467"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-read\u2468"}],"title":"3.1. Local File System Permissions"}],"url":"#dom-filesystempermissionmode-read"},
"dom-filesystempermissionmode-readwrite": {"dfnID":"dom-filesystempermissionmode-readwrite","dfnText":"\"readwrite\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite"},{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2460"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2461"},{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2462"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2463"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2464"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2465"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2466"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2467"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2468"},{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2460\u24ea"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-filesystempermissionmode-readwrite\u2460\u2460"}],"title":"3.1. Local File System Permissions"}],"url":"#dom-filesystempermissionmode-readwrite"},
"dom-filesystemremoveoptions-recursive": {"dfnID":"dom-filesystemremoveoptions-recursive","dfnText":"recursive","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemremoveoptions-recursive"},{"id":"ref-for-dom-filesystemremoveoptions-recursive\u2460"},{"id":"ref-for-dom-filesystemremoveoptions-recursive\u2461"},{"id":"ref-for-dom-filesystemremoveoptions-recursive\u2462"}],"title":"2.5.4. The removeEntry() method"}],"url":"#dom-filesystemremoveoptions-recursive"},
"dom-filesystemwritablefilestream-seek": {"dfnID":"dom-filesystemwritablefilestream-seek","dfnText":"seek(position)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemwritablefilestream-seek"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-filesystemwritablefilestream-seek\u2460"},{"id":"ref-for-dom-filesystemwritablefilestream-seek\u2461"}],"title":"2.6.2. The seek() method"}],"url":"#dom-filesystemwritablefilestream-seek"},
"dom-filesystemwritablefilestream-seek-position-position": {"dfnID":"dom-filesystemwritablefilestream-seek-position-position","dfnText":"position","external":false,"refSections":[],"url":"#dom-filesystemwritablefilestream-seek-position-position"},
"dom-filesystemwritablefilestream-truncate": {"dfnID":"dom-filesystemwritablefilestream-truncate","dfnText":"truncate(size)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemwritablefilestream-truncate"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-filesystemwritablefilestream-truncate\u2460"},{"id":"ref-for-dom-filesystemwritablefilestream-truncate\u2461"}],"title":"2.6.3. The truncate() method"},{"refs":[{"id":"ref-for-dom-filesystemwritablefilestream-truncate\u2462"}],"title":"7.3. Filling up a users disk"}],"url":"#dom-filesystemwritablefilestream-truncate"},
"dom-filesystemwritablefilestream-truncate-size-size": {"dfnID":"dom-filesystemwritablefilestream-truncate-size-size","dfnText":"size","external":false,"refSections":[],"url":"#dom-filesystemwritablefilestream-truncate-size-size"},
"dom-filesystemwritablefilestream-write": {"dfnID":"dom-filesystemwritablefilestream-write","dfnText":"write(data)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-filesystemwritablefilestream-write"},{"id":"ref-for-dom-filesystemwritablefilestream-write\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-filesystemwritablefilestream-write\u2461"},{"id":"ref-for-dom-filesystemwritablefilestream-write\u2462"},{"id":"ref-for-dom-filesystemwritablefilestream-write\u2463"},{"id":"ref-for-dom-filesystemwritablefilestream-write\u2464"},{"id":"ref-for-dom-filesystemwritablefilestream-write\u2465"},{"id":"ref-for-dom-filesystemwritablefilestream-write\u2466"}],"title":"2.6.1. The write() method"}],"url":"#dom-filesystemwritablefilestream-write"},
"dom-filesystemwritablefilestream-write-data-data": {"dfnID":"dom-filesystemwritablefilestream-write-data-data","dfnText":"data","external":false,"refSections":[],"url":"#dom-filesystemwritablefilestream-write-data-data"},
"dom-openfilepickeroptions-multiple": {"dfnID":"dom-openfilepickeroptions-multiple","dfnText":"multiple","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-openfilepickeroptions-multiple"},{"id":"ref-for-dom-openfilepickeroptions-multiple\u2460"},{"id":"ref-for-dom-openfilepickeroptions-multiple\u2461"}],"title":"3.2. The showOpenFilePicker() method"}],"url":"#dom-openfilepickeroptions-multiple"},
"dom-permissionname-file-system": {"dfnID":"dom-permissionname-file-system","dfnText":"\"file-system\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-permissionname-file-system"},{"id":"ref-for-dom-permissionname-file-system\u2460"},{"id":"ref-for-dom-permissionname-file-system\u2461"}],"title":"2.2. Permissions"}],"url":"#dom-permissionname-file-system"},
"dom-storagemanager-getdirectory": {"dfnID":"dom-storagemanager-getdirectory","dfnText":"getDirectory()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-storagemanager-getdirectory"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-dom-storagemanager-getdirectory\u2460"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-dom-storagemanager-getdirectory\u2461"},{"id":"ref-for-dom-storagemanager-getdirectory\u2462"}],"title":"4. Accessing the Origin Private File System"}],"url":"#dom-storagemanager-getdirectory"},
"dom-window-showdirectorypicker": {"dfnID":"dom-window-showdirectorypicker","dfnText":"showDirectoryPicker(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-window-showdirectorypicker"},{"id":"ref-for-dom-window-showdirectorypicker\u2460"}],"title":"3. Accessing Local File System"},{"refs":[{"id":"ref-for-dom-window-showdirectorypicker\u2461"},{"id":"ref-for-dom-window-showdirectorypicker\u2462"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"#dom-window-showdirectorypicker"},
"dom-window-showdirectorypicker-options-options": {"dfnID":"dom-window-showdirectorypicker-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-window-showdirectorypicker-options-options"},
"dom-window-showopenfilepicker": {"dfnID":"dom-window-showopenfilepicker","dfnText":"showOpenFilePicker(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-window-showopenfilepicker"},{"id":"ref-for-dom-window-showopenfilepicker\u2460"}],"title":"3. Accessing Local File System"},{"refs":[{"id":"ref-for-dom-window-showopenfilepicker\u2461"},{"id":"ref-for-dom-window-showopenfilepicker\u2462"},{"id":"ref-for-dom-window-showopenfilepicker\u2463"},{"id":"ref-for-dom-window-showopenfilepicker\u2464"},{"id":"ref-for-dom-window-showopenfilepicker\u2465"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-dom-window-showopenfilepicker\u2466"}],"title":"3.4. FilePickerOptions.types"}],"url":"#dom-window-showopenfilepicker"},
"dom-window-showopenfilepicker-options-options": {"dfnID":"dom-window-showopenfilepicker-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-window-showopenfilepicker-options-options"},
"dom-window-showsavefilepicker": {"dfnID":"dom-window-showsavefilepicker","dfnText":"showSaveFilePicker(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-window-showsavefilepicker"},{"id":"ref-for-dom-window-showsavefilepicker\u2460"}],"title":"3. Accessing Local File System"},{"refs":[{"id":"ref-for-dom-window-showsavefilepicker\u2461"}],"title":"3.1. Local File System Permissions"},{"refs":[{"id":"ref-for-dom-window-showsavefilepicker\u2462"},{"id":"ref-for-dom-window-showsavefilepicker\u2463"},{"id":"ref-for-dom-window-showsavefilepicker\u2464"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-dom-window-showsavefilepicker\u2465"}],"title":"3.4. FilePickerOptions.types"}],"url":"#dom-window-showsavefilepicker"},
"dom-window-showsavefilepicker-options-options": {"dfnID":"dom-window-showsavefilepicker-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-window-showsavefilepicker-options-options"},
"dom-writecommandtype-seek": {"dfnID":"dom-writecommandtype-seek","dfnText":"\"seek\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-writecommandtype-seek"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-writecommandtype-seek\u2460"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-dom-writecommandtype-seek\u2461"}],"title":"2.6.2. The seek() method"}],"url":"#dom-writecommandtype-seek"},
"dom-writecommandtype-truncate": {"dfnID":"dom-writecommandtype-truncate","dfnText":"\"truncate\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-writecommandtype-truncate"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-writecommandtype-truncate\u2460"},{"id":"ref-for-dom-writecommandtype-truncate\u2461"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-dom-writecommandtype-truncate\u2462"},{"id":"ref-for-dom-writecommandtype-truncate\u2463"}],"title":"2.6.3. The truncate() method"}],"url":"#dom-writecommandtype-truncate"},
"dom-writecommandtype-write": {"dfnID":"dom-writecommandtype-write","dfnText":"\"write\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-writecommandtype-write"},{"id":"ref-for-dom-writecommandtype-write\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-writecommandtype-write\u2461"},{"id":"ref-for-dom-writecommandtype-write\u2462"}],"title":"2.6.1. The write() method"}],"url":"#dom-writecommandtype-write"},
"dom-writeparams-data": {"dfnID":"dom-writeparams-data","dfnText":"data","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-writeparams-data"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-writeparams-data\u2460"},{"id":"ref-for-dom-writeparams-data\u2461"}],"title":"2.6.1. The write() method"}],"url":"#dom-writeparams-data"},
"dom-writeparams-position": {"dfnID":"dom-writeparams-position","dfnText":"position","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-writeparams-position"},{"id":"ref-for-dom-writeparams-position\u2460"},{"id":"ref-for-dom-writeparams-position\u2461"},{"id":"ref-for-dom-writeparams-position\u2462"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-writeparams-position\u2463"},{"id":"ref-for-dom-writeparams-position\u2464"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-dom-writeparams-position\u2465"}],"title":"2.6.2. The seek() method"}],"url":"#dom-writeparams-position"},
"dom-writeparams-size": {"dfnID":"dom-writeparams-size","dfnText":"size","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-writeparams-size"},{"id":"ref-for-dom-writeparams-size\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-writeparams-size\u2461"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-dom-writeparams-size\u2462"}],"title":"2.6.3. The truncate() method"}],"url":"#dom-writeparams-size"},
"dom-writeparams-type": {"dfnID":"dom-writeparams-type","dfnText":"type","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-writeparams-type"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-dom-writeparams-type\u2460"},{"id":"ref-for-dom-writeparams-type\u2461"},{"id":"ref-for-dom-writeparams-type\u2462"},{"id":"ref-for-dom-writeparams-type\u2463"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-dom-writeparams-type\u2464"}],"title":"2.6.2. The seek() method"},{"refs":[{"id":"ref-for-dom-writeparams-type\u2465"}],"title":"2.6.3. The truncate() method"}],"url":"#dom-writeparams-type"},
"e2fc6023": {"dfnID":"e2fc6023","dfnText":"prepend","external":true,"refSections":[{"refs":[{"id":"ref-for-list-prepend"}],"title":"2.1. Concepts"}],"url":"https://infra.spec.whatwg.org/#list-prepend"},
"e303c02d": {"dfnID":"e303c02d","dfnText":"type","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-type"}],"title":"2.4.1. The getFile() method"}],"url":"https://w3c.github.io/FileAPI/#dfn-type"},
"e7652812": {"dfnID":"e7652812","dfnText":"get the next iteration result","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-get-the-next-iteration-result"}],"title":"2.5.1. Directory iteration"}],"url":"https://webidl.spec.whatwg.org/#dfn-get-the-next-iteration-result"},
"eb5c4be3": {"dfnID":"eb5c4be3","dfnText":"Serializable","external":true,"refSections":[{"refs":[{"id":"ref-for-serializable"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-serializable\u2460"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-serializable\u2461"}],"title":"2.5. The FileSystemDirectoryHandle interface"}],"url":"https://html.spec.whatwg.org/multipage/structured-data.html#serializable"},
"ebb01253": {"dfnID":"ebb01253","dfnText":"PermissionDescriptor","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-permissiondescriptor"}],"title":"2.2. Permissions"}],"url":"https://w3c.github.io/permissions/#dom-permissiondescriptor"},
"ec3886d6": {"dfnID":"ec3886d6","dfnText":"permissions","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-navigator-permissions"},{"id":"ref-for-dom-navigator-permissions\u2460"}],"title":"2.3.2. The queryPermission() method"}],"url":"https://w3c.github.io/permissions/#dom-navigator-permissions"},
"ef8602af": {"dfnID":"ef8602af","dfnText":"wait for all","external":true,"refSections":[{"refs":[{"id":"ref-for-wait-for-all"}],"title":"2.1. Concepts"}],"url":"https://webidl.spec.whatwg.org/#wait-for-all"},
"entry": {"dfnID":"entry","dfnText":"entry","external":false,"refSections":[{"refs":[{"id":"ref-for-entry"},{"id":"ref-for-entry\u2460"},{"id":"ref-for-entry\u2461"},{"id":"ref-for-entry\u2462"},{"id":"ref-for-entry\u2463"},{"id":"ref-for-entry\u2464"},{"id":"ref-for-entry\u2465"},{"id":"ref-for-entry\u2466"},{"id":"ref-for-entry\u2467"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-entry\u2468"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-entry\u2460\u24ea"},{"id":"ref-for-entry\u2460\u2460"},{"id":"ref-for-entry\u2460\u2461"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-entry\u2460\u2462"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-entry\u2460\u2463"}],"title":"3.6. Drag and Drop"}],"url":"#entry"},
"entry-name": {"dfnID":"entry-name","dfnText":"name","external":false,"refSections":[{"refs":[{"id":"ref-for-entry-name"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-entry-name\u2460"},{"id":"ref-for-entry-name\u2461"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-entry-name\u2462"},{"id":"ref-for-entry-name\u2463"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-entry-name\u2464"},{"id":"ref-for-entry-name\u2465"},{"id":"ref-for-entry-name\u2466"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-entry-name\u2467"},{"id":"ref-for-entry-name\u2468"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-entry-name\u2460\u24ea"},{"id":"ref-for-entry-name\u2460\u2460"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-entry-name\u2460\u2461"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-entry-name\u2460\u2462"}],"title":"4. Accessing the Origin Private File System"}],"url":"#entry-name"},
"entry-parent": {"dfnID":"entry-parent","dfnText":"parent","external":false,"refSections":[{"refs":[{"id":"ref-for-entry-parent"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-entry-parent\u2460"},{"id":"ref-for-entry-parent\u2461"}],"title":"2.2. Permissions"}],"url":"#entry-parent"},
"entry-resolve": {"dfnID":"entry-resolve","dfnText":"resolve","external":false,"refSections":[{"refs":[{"id":"ref-for-entry-resolve"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-entry-resolve\u2460"}],"title":"2.5.5. The resolve() method"}],"url":"#entry-resolve"},
"entry-the-same-as": {"dfnID":"entry-the-same-as","dfnText":"the same as","external":false,"refSections":[{"refs":[{"id":"ref-for-entry-the-same-as"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-entry-the-same-as\u2460"}],"title":"2.3.1. The isSameEntry() method"}],"url":"#entry-the-same-as"},
"enumdef-filesystemhandlekind": {"dfnID":"enumdef-filesystemhandlekind","dfnText":"FileSystemHandleKind","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-filesystemhandlekind"}],"title":"2.3. The FileSystemHandle interface"}],"url":"#enumdef-filesystemhandlekind"},
"enumdef-filesystempermissionmode": {"dfnID":"enumdef-filesystempermissionmode","dfnText":"FileSystemPermissionMode","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-filesystempermissionmode"},{"id":"ref-for-enumdef-filesystempermissionmode\u2460"},{"id":"ref-for-enumdef-filesystempermissionmode\u2461"},{"id":"ref-for-enumdef-filesystempermissionmode\u2462"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-enumdef-filesystempermissionmode\u2463"}],"title":"2.3. The FileSystemHandle interface"}],"url":"#enumdef-filesystempermissionmode"},
"enumdef-writecommandtype": {"dfnID":"enumdef-writecommandtype","dfnText":"WriteCommandType","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-writecommandtype"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#enumdef-writecommandtype"},
"f14b47b8": {"dfnID":"f14b47b8","dfnText":"unsigned long long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-unsigned-long-long"},{"id":"ref-for-idl-unsigned-long-long\u2460"},{"id":"ref-for-idl-unsigned-long-long\u2461"},{"id":"ref-for-idl-unsigned-long-long\u2462"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"https://webidl.spec.whatwg.org/#idl-unsigned-long-long"},
"f32dc6c1": {"dfnID":"f32dc6c1","dfnText":"serialization steps","external":true,"refSections":[{"refs":[{"id":"ref-for-serialization-steps"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-serialization-steps\u2460"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-serialization-steps\u2461"}],"title":"2.5. The FileSystemDirectoryHandle interface"}],"url":"https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps"},
"f43d6978": {"dfnID":"f43d6978","dfnText":"ascii alphanumeric","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-alphanumeric"}],"title":"2.1. Concepts"}],"url":"https://infra.spec.whatwg.org/#ascii-alphanumeric"},
"f4acb816": {"dfnID":"f4acb816","dfnText":"getting a writer","external":true,"refSections":[{"refs":[{"id":"ref-for-writablestream-get-a-writer"}],"title":"2.6.1. The write() method"},{"refs":[{"id":"ref-for-writablestream-get-a-writer\u2460"}],"title":"2.6.2. The seek() method"},{"refs":[{"id":"ref-for-writablestream-get-a-writer\u2461"}],"title":"2.6.3. The truncate() method"}],"url":"https://streams.spec.whatwg.org/#writablestream-get-a-writer"},
"f9970195": {"dfnID":"f9970195","dfnText":"lastModified","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-lastModified"}],"title":"2.4.1. The getFile() method"}],"url":"https://w3c.github.io/FileAPI/#dfn-lastModified"},
"fc5a3214": {"dfnID":"fc5a3214","dfnText":"parameters","external":true,"refSections":[{"refs":[{"id":"ref-for-parameters"}],"title":"3.4. FilePickerOptions.types"}],"url":"https://mimesniff.spec.whatwg.org/#parameters"},
"file": {"dfnID":"file","dfnText":"file entry","external":false,"refSections":[{"refs":[{"id":"ref-for-file"},{"id":"ref-for-file\u2460"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-file\u2461"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-file\u2462"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-file\u2463"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-file\u2464"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-file\u2465"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-file\u2466"},{"id":"ref-for-file\u2467"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-file\u2468"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-file\u2460\u24ea"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-file\u2460\u2460"},{"id":"ref-for-file\u2460\u2461"}],"title":"3.6. Drag and Drop"}],"url":"#file"},
"file-entry-binary-data": {"dfnID":"file-entry-binary-data","dfnText":"binary data","external":false,"refSections":[{"refs":[{"id":"ref-for-file-entry-binary-data"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-file-entry-binary-data\u2460"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-file-entry-binary-data\u2461"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-file-entry-binary-data\u2462"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-file-entry-binary-data\u2463"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-file-entry-binary-data\u2464"}],"title":"3.3. The showSaveFilePicker() method"}],"url":"#file-entry-binary-data"},
"file-entry-modification-timestamp": {"dfnID":"file-entry-modification-timestamp","dfnText":"modification timestamp","external":false,"refSections":[{"refs":[{"id":"ref-for-file-entry-modification-timestamp"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-file-entry-modification-timestamp\u2460"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-file-entry-modification-timestamp\u2461"}],"title":"2.5.2. The getFileHandle() method"}],"url":"#file-entry-modification-timestamp"},
"filesystemdirectoryhandle": {"dfnID":"filesystemdirectoryhandle","dfnText":"FileSystemDirectoryHandle","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemdirectoryhandle"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-filesystemdirectoryhandle\u2460"},{"id":"ref-for-filesystemdirectoryhandle\u2461"},{"id":"ref-for-filesystemdirectoryhandle\u2462"},{"id":"ref-for-filesystemdirectoryhandle\u2463"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-filesystemdirectoryhandle\u2464"},{"id":"ref-for-filesystemdirectoryhandle\u2465"},{"id":"ref-for-filesystemdirectoryhandle\u2466"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-filesystemdirectoryhandle\u2467"},{"id":"ref-for-filesystemdirectoryhandle\u2468"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-filesystemdirectoryhandle\u2460\u24ea"}],"title":"3. Accessing Local File System"},{"refs":[{"id":"ref-for-filesystemdirectoryhandle\u2460\u2460"}],"title":"3.5. The showDirectoryPicker() method"},{"refs":[{"id":"ref-for-filesystemdirectoryhandle\u2460\u2461"},{"id":"ref-for-filesystemdirectoryhandle\u2460\u2462"}],"title":"3.6. Drag and Drop"},{"refs":[{"id":"ref-for-filesystemdirectoryhandle\u2460\u2463"},{"id":"ref-for-filesystemdirectoryhandle\u2460\u2464"}],"title":"4. Accessing the Origin Private File System"}],"url":"#filesystemdirectoryhandle"},
"filesystemdirectoryhandle-iterator-past-results": {"dfnID":"filesystemdirectoryhandle-iterator-past-results","dfnText":"past results","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemdirectoryhandle-iterator-past-results"},{"id":"ref-for-filesystemdirectoryhandle-iterator-past-results\u2460"}],"title":"2.5.1. Directory iteration"}],"url":"#filesystemdirectoryhandle-iterator-past-results"},
"filesystemfilehandle": {"dfnID":"filesystemfilehandle","dfnText":"FileSystemFileHandle","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemfilehandle"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-filesystemfilehandle\u2460"},{"id":"ref-for-filesystemfilehandle\u2461"},{"id":"ref-for-filesystemfilehandle\u2462"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-filesystemfilehandle\u2463"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-filesystemfilehandle\u2464"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-filesystemfilehandle\u2465"},{"id":"ref-for-filesystemfilehandle\u2466"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-filesystemfilehandle\u2467"},{"id":"ref-for-filesystemfilehandle\u2468"}],"title":"3. Accessing Local File System"},{"refs":[{"id":"ref-for-filesystemfilehandle\u2460\u24ea"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-filesystemfilehandle\u2460\u2460"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-filesystemfilehandle\u2460\u2461"},{"id":"ref-for-filesystemfilehandle\u2460\u2462"}],"title":"3.6. Drag and Drop"}],"url":"#filesystemfilehandle"},
"filesystemhandle": {"dfnID":"filesystemhandle","dfnText":"FileSystemHandle","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemhandle"},{"id":"ref-for-filesystemhandle\u2460"},{"id":"ref-for-filesystemhandle\u2461"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-filesystemhandle\u2462"},{"id":"ref-for-filesystemhandle\u2463"},{"id":"ref-for-filesystemhandle\u2464"},{"id":"ref-for-filesystemhandle\u2465"},{"id":"ref-for-filesystemhandle\u2466"},{"id":"ref-for-filesystemhandle\u2467"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-filesystemhandle\u2468"},{"id":"ref-for-filesystemhandle\u2460\u24ea"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-filesystemhandle\u2460\u2460"},{"id":"ref-for-filesystemhandle\u2460\u2461"},{"id":"ref-for-filesystemhandle\u2460\u2462"},{"id":"ref-for-filesystemhandle\u2460\u2463"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-filesystemhandle\u2460\u2464"}],"title":"3.6. Drag and Drop"}],"url":"#filesystemhandle"},
"filesystemhandle-entry": {"dfnID":"filesystemhandle-entry","dfnText":"entry","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemhandle-entry"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2460"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2461"},{"id":"ref-for-filesystemhandle-entry\u2462"},{"id":"ref-for-filesystemhandle-entry\u2463"},{"id":"ref-for-filesystemhandle-entry\u2464"}],"title":"2.3. The FileSystemHandle interface"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2465"},{"id":"ref-for-filesystemhandle-entry\u2466"}],"title":"2.3.1. The isSameEntry() method"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2467"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2468"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2460\u24ea"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2460\u2460"}],"title":"2.5. The FileSystemDirectoryHandle interface"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2460\u2461"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2460\u2462"},{"id":"ref-for-filesystemhandle-entry\u2460\u2463"},{"id":"ref-for-filesystemhandle-entry\u2460\u2464"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2460\u2465"},{"id":"ref-for-filesystemhandle-entry\u2460\u2466"},{"id":"ref-for-filesystemhandle-entry\u2460\u2467"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2460\u2468"}],"title":"2.5.4. The removeEntry() method"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2461\u24ea"},{"id":"ref-for-filesystemhandle-entry\u2461\u2460"}],"title":"2.5.5. The resolve() method"},{"refs":[{"id":"ref-for-filesystemhandle-entry\u2461\u2461"}],"title":"4. Accessing the Origin Private File System"}],"url":"#filesystemhandle-entry"},
"filesystemwritablefilestream": {"dfnID":"filesystemwritablefilestream","dfnText":"FileSystemWritableFileStream","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemwritablefilestream"}],"title":"2.4. The FileSystemFileHandle interface"},{"refs":[{"id":"ref-for-filesystemwritablefilestream\u2460"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-filesystemwritablefilestream\u2461"},{"id":"ref-for-filesystemwritablefilestream\u2462"},{"id":"ref-for-filesystemwritablefilestream\u2463"},{"id":"ref-for-filesystemwritablefilestream\u2464"},{"id":"ref-for-filesystemwritablefilestream\u2465"},{"id":"ref-for-filesystemwritablefilestream\u2466"},{"id":"ref-for-filesystemwritablefilestream\u2467"},{"id":"ref-for-filesystemwritablefilestream\u2468"},{"id":"ref-for-filesystemwritablefilestream\u2460\u24ea"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#filesystemwritablefilestream"},
"filesystemwritablefilestream-buffer": {"dfnID":"filesystemwritablefilestream-buffer","dfnText":"[[buffer]]","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemwritablefilestream-buffer"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-filesystemwritablefilestream-buffer\u2460"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2461"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2462"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2463"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2464"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2465"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2466"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2467"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2468"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2460\u24ea"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2460\u2460"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2460\u2461"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2460\u2462"},{"id":"ref-for-filesystemwritablefilestream-buffer\u2460\u2463"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#filesystemwritablefilestream-buffer"},
"filesystemwritablefilestream-file": {"dfnID":"filesystemwritablefilestream-file","dfnText":"[[file]]","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemwritablefilestream-file"},{"id":"ref-for-filesystemwritablefilestream-file\u2460"},{"id":"ref-for-filesystemwritablefilestream-file\u2461"},{"id":"ref-for-filesystemwritablefilestream-file\u2462"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#filesystemwritablefilestream-file"},
"filesystemwritablefilestream-seekoffset": {"dfnID":"filesystemwritablefilestream-seekoffset","dfnText":"[[seekOffset]]","external":false,"refSections":[{"refs":[{"id":"ref-for-filesystemwritablefilestream-seekoffset"},{"id":"ref-for-filesystemwritablefilestream-seekoffset\u2460"},{"id":"ref-for-filesystemwritablefilestream-seekoffset\u2461"},{"id":"ref-for-filesystemwritablefilestream-seekoffset\u2462"},{"id":"ref-for-filesystemwritablefilestream-seekoffset\u2463"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#filesystemwritablefilestream-seekoffset"},
"is-allowed-to-show-a-file-picker": {"dfnID":"is-allowed-to-show-a-file-picker","dfnText":"is allowed to show a file picker","external":false,"refSections":[{"refs":[{"id":"ref-for-is-allowed-to-show-a-file-picker"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-is-allowed-to-show-a-file-picker\u2460"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-is-allowed-to-show-a-file-picker\u2461"}],"title":"3.5. The showDirectoryPicker() method"}],"url":"#is-allowed-to-show-a-file-picker"},
"local-file-system-handle-factories": {"dfnID":"local-file-system-handle-factories","dfnText":"local file system handle factories","external":false,"refSections":[{"refs":[{"id":"ref-for-local-file-system-handle-factories"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-local-file-system-handle-factories\u2460"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-local-file-system-handle-factories\u2461"},{"id":"ref-for-local-file-system-handle-factories\u2462"}],"title":"3.1. Local File System Permissions"},{"refs":[{"id":"ref-for-local-file-system-handle-factories\u2463"}],"title":"3.6. Drag and Drop"},{"refs":[{"id":"ref-for-local-file-system-handle-factories\u2464"}],"title":"6.3. First-party vs third-party contexts."}],"url":"#local-file-system-handle-factories"},
"malware-scans-and-safe-browsing-checks": {"dfnID":"malware-scans-and-safe-browsing-checks","dfnText":"malware\nscans and safe browsing checks","external":false,"refSections":[{"refs":[{"id":"ref-for-malware-scans-and-safe-browsing-checks"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#malware-scans-and-safe-browsing-checks"},
"origin-private-file-system": {"dfnID":"origin-private-file-system","dfnText":"origin private file system","external":false,"refSections":[{"refs":[{"id":"ref-for-origin-private-file-system"}],"title":"2.2. Permissions"},{"refs":[{"id":"ref-for-origin-private-file-system\u2460"},{"id":"ref-for-origin-private-file-system\u2461"}],"title":"2.6. The FileSystemWritableFileStream interface"},{"refs":[{"id":"ref-for-origin-private-file-system\u2462"},{"id":"ref-for-origin-private-file-system\u2463"}],"title":"4. Accessing the Origin Private File System"},{"refs":[{"id":"ref-for-origin-private-file-system\u2464"}],"title":"7.3. Filling up a users disk"}],"url":"#origin-private-file-system"},
"process-accept-types": {"dfnID":"process-accept-types","dfnText":"process accept types","external":false,"refSections":[{"refs":[{"id":"ref-for-process-accept-types"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-process-accept-types\u2460"}],"title":"3.3. The showSaveFilePicker() method"}],"url":"#process-accept-types"},
"querying-file-system-permission": {"dfnID":"querying-file-system-permission","dfnText":"query file system permission","external":false,"refSections":[{"refs":[{"id":"ref-for-querying-file-system-permission"}],"title":"2.3.2. The queryPermission() method"},{"refs":[{"id":"ref-for-querying-file-system-permission\u2460"}],"title":"2.4.1. The getFile() method"},{"refs":[{"id":"ref-for-querying-file-system-permission\u2461"},{"id":"ref-for-querying-file-system-permission\u2462"}],"title":"2.5.1. Directory iteration"},{"refs":[{"id":"ref-for-querying-file-system-permission\u2463"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-querying-file-system-permission\u2464"}],"title":"2.5.3. The getDirectoryHandle() method"}],"url":"#querying-file-system-permission"},
"requesting-file-system-permission": {"dfnID":"requesting-file-system-permission","dfnText":"request file system permission","external":false,"refSections":[{"refs":[{"id":"ref-for-requesting-file-system-permission"}],"title":"2.3.3. The requestPermission() method"},{"refs":[{"id":"ref-for-requesting-file-system-permission\u2460"}],"title":"2.4.2. The createWritable() method"},{"refs":[{"id":"ref-for-requesting-file-system-permission\u2461"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-requesting-file-system-permission\u2462"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-requesting-file-system-permission\u2463"}],"title":"2.5.4. The removeEntry() method"}],"url":"#requesting-file-system-permission"},
"too-sensitive-or-dangerous": {"dfnID":"too-sensitive-or-dangerous","dfnText":"too sensitive or dangerous","external":false,"refSections":[{"refs":[{"id":"ref-for-too-sensitive-or-dangerous"}],"title":"3.2. The showOpenFilePicker() method"},{"refs":[{"id":"ref-for-too-sensitive-or-dangerous\u2460"}],"title":"3.3. The showSaveFilePicker() method"},{"refs":[{"id":"ref-for-too-sensitive-or-dangerous\u2461"}],"title":"3.5. The showDirectoryPicker() method"},{"refs":[{"id":"ref-for-too-sensitive-or-dangerous\u2462"}],"title":"3.6. Drag and Drop"}],"url":"#too-sensitive-or-dangerous"},
"typedefdef-filesystemwritechunktype": {"dfnID":"typedefdef-filesystemwritechunktype","dfnText":"FileSystemWriteChunkType","external":false,"refSections":[{"refs":[{"id":"ref-for-typedefdef-filesystemwritechunktype"},{"id":"ref-for-typedefdef-filesystemwritechunktype\u2460"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#typedefdef-filesystemwritechunktype"},
"valid-file-name": {"dfnID":"valid-file-name","dfnText":"valid file name","external":false,"refSections":[{"refs":[{"id":"ref-for-valid-file-name"}],"title":"2.1. Concepts"},{"refs":[{"id":"ref-for-valid-file-name\u2460"}],"title":"2.5.2. The getFileHandle() method"},{"refs":[{"id":"ref-for-valid-file-name\u2461"}],"title":"2.5.3. The getDirectoryHandle() method"},{"refs":[{"id":"ref-for-valid-file-name\u2462"}],"title":"2.5.4. The removeEntry() method"}],"url":"#valid-file-name"},
"valid-suffix-code-point": {"dfnID":"valid-suffix-code-point","dfnText":"valid suffix code point","external":false,"refSections":[{"refs":[{"id":"ref-for-valid-suffix-code-point"},{"id":"ref-for-valid-suffix-code-point\u2460"}],"title":"3.4. FilePickerOptions.types"}],"url":"#valid-suffix-code-point"},
"validate-a-suffix": {"dfnID":"validate-a-suffix","dfnText":"validate a suffix","external":false,"refSections":[{"refs":[{"id":"ref-for-validate-a-suffix"},{"id":"ref-for-validate-a-suffix\u2460"}],"title":"3.4. FilePickerOptions.types"}],"url":"#validate-a-suffix"},
"write-a-chunk": {"dfnID":"write-a-chunk","dfnText":"write a chunk","external":false,"refSections":[{"refs":[{"id":"ref-for-write-a-chunk"}],"title":"2.6. The FileSystemWritableFileStream interface"}],"url":"#write-a-chunk"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#create-a-new-filesystemwritablefilestream": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"create a new filesystemwritablefilestream","type":"dfn","url":"#create-a-new-filesystemwritablefilestream"},
"#dictdef-directorypickeroptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"DirectoryPickerOptions","type":"dictionary","url":"#dictdef-directorypickeroptions"},
"#dictdef-filepickeraccepttype": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FilePickerAcceptType","type":"dictionary","url":"#dictdef-filepickeraccepttype"},
"#dictdef-filepickeroptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FilePickerOptions","type":"dictionary","url":"#dictdef-filepickeroptions"},
"#dictdef-filesystemcreatewritableoptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemCreateWritableOptions","type":"dictionary","url":"#dictdef-filesystemcreatewritableoptions"},
"#dictdef-filesystemgetdirectoryoptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemGetDirectoryOptions","type":"dictionary","url":"#dictdef-filesystemgetdirectoryoptions"},
"#dictdef-filesystemgetfileoptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemGetFileOptions","type":"dictionary","url":"#dictdef-filesystemgetfileoptions"},
"#dictdef-filesystemhandlepermissiondescriptor": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemHandlePermissionDescriptor","type":"dictionary","url":"#dictdef-filesystemhandlepermissiondescriptor"},
"#dictdef-filesystempermissiondescriptor": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemPermissionDescriptor","type":"dictionary","url":"#dictdef-filesystempermissiondescriptor"},
"#dictdef-filesystemremoveoptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemRemoveOptions","type":"dictionary","url":"#dictdef-filesystemremoveoptions"},
"#dictdef-openfilepickeroptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"OpenFilePickerOptions","type":"dictionary","url":"#dictdef-openfilepickeroptions"},
"#dictdef-savefilepickeroptions": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"SaveFilePickerOptions","type":"dictionary","url":"#dictdef-savefilepickeroptions"},
"#dictdef-writeparams": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"WriteParams","type":"dictionary","url":"#dictdef-writeparams"},
"#directory": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"directory entry","type":"dfn","url":"#directory"},
"#directory-entry-children": {"export":true,"for_":["directory entry"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"children","type":"dfn","url":"#directory-entry-children"},
"#dom-datatransferitem-getasfilesystemhandle": {"export":true,"for_":["DataTransferItem"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"getAsFileSystemHandle()","type":"method","url":"#dom-datatransferitem-getasfilesystemhandle"},
"#dom-filepickeraccepttype-accept": {"export":true,"for_":["FilePickerAcceptType"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"accept","type":"dict-member","url":"#dom-filepickeraccepttype-accept"},
"#dom-filepickeraccepttype-description": {"export":true,"for_":["FilePickerAcceptType"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"description","type":"dict-member","url":"#dom-filepickeraccepttype-description"},
"#dom-filepickeroptions-excludeacceptalloption": {"export":true,"for_":["FilePickerOptions"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"excludeAcceptAllOption","type":"dict-member","url":"#dom-filepickeroptions-excludeacceptalloption"},
"#dom-filepickeroptions-types": {"export":true,"for_":["FilePickerOptions"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"types","type":"dict-member","url":"#dom-filepickeroptions-types"},
"#dom-filesystemcreatewritableoptions-keepexistingdata": {"export":true,"for_":["FileSystemCreateWritableOptions"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"keepExistingData","type":"dict-member","url":"#dom-filesystemcreatewritableoptions-keepexistingdata"},
"#dom-filesystemdirectoryhandle-getdirectoryhandle": {"export":true,"for_":["FileSystemDirectoryHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"getDirectoryHandle(name, options)","type":"method","url":"#dom-filesystemdirectoryhandle-getdirectoryhandle"},
"#dom-filesystemdirectoryhandle-getfilehandle": {"export":true,"for_":["FileSystemDirectoryHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"getFileHandle(name, options)","type":"method","url":"#dom-filesystemdirectoryhandle-getfilehandle"},
"#dom-filesystemdirectoryhandle-removeentry": {"export":true,"for_":["FileSystemDirectoryHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"removeEntry(name, options)","type":"method","url":"#dom-filesystemdirectoryhandle-removeentry"},
"#dom-filesystemdirectoryhandle-resolve": {"export":true,"for_":["FileSystemDirectoryHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"resolve(possibleDescendant)","type":"method","url":"#dom-filesystemdirectoryhandle-resolve"},
"#dom-filesystemfilehandle-createwritable": {"export":true,"for_":["FileSystemFileHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"createWritable(options)","type":"method","url":"#dom-filesystemfilehandle-createwritable"},
"#dom-filesystemfilehandle-getfile": {"export":true,"for_":["FileSystemFileHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"getFile()","type":"method","url":"#dom-filesystemfilehandle-getfile"},
"#dom-filesystemgetdirectoryoptions-create": {"export":true,"for_":["FileSystemGetDirectoryOptions"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"create","type":"dict-member","url":"#dom-filesystemgetdirectoryoptions-create"},
"#dom-filesystemgetfileoptions-create": {"export":true,"for_":["FileSystemGetFileOptions"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"create","type":"dict-member","url":"#dom-filesystemgetfileoptions-create"},
"#dom-filesystemhandle-issameentry": {"export":true,"for_":["FileSystemHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"isSameEntry(other)","type":"method","url":"#dom-filesystemhandle-issameentry"},
"#dom-filesystemhandle-kind": {"export":true,"for_":["FileSystemHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"kind","type":"attribute","url":"#dom-filesystemhandle-kind"},
"#dom-filesystemhandle-name": {"export":true,"for_":["FileSystemHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"name","type":"attribute","url":"#dom-filesystemhandle-name"},
"#dom-filesystemhandle-querypermission": {"export":true,"for_":["FileSystemHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"queryPermission(descriptor)","type":"method","url":"#dom-filesystemhandle-querypermission"},
"#dom-filesystemhandle-requestpermission": {"export":true,"for_":["FileSystemHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"requestPermission(descriptor)","type":"method","url":"#dom-filesystemhandle-requestpermission"},
"#dom-filesystemhandlekind-directory": {"export":true,"for_":["FileSystemHandleKind"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"\"directory\"","type":"enum-value","url":"#dom-filesystemhandlekind-directory"},
"#dom-filesystemhandlekind-file": {"export":true,"for_":["FileSystemHandleKind"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"\"file\"","type":"enum-value","url":"#dom-filesystemhandlekind-file"},
"#dom-filesystemhandlepermissiondescriptor-mode": {"export":true,"for_":["FileSystemHandlePermissionDescriptor"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"mode","type":"dict-member","url":"#dom-filesystemhandlepermissiondescriptor-mode"},
"#dom-filesystempermissiondescriptor-handle": {"export":true,"for_":["FileSystemPermissionDescriptor"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"handle","type":"dict-member","url":"#dom-filesystempermissiondescriptor-handle"},
"#dom-filesystempermissiondescriptor-mode": {"export":true,"for_":["FileSystemPermissionDescriptor"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"mode","type":"dict-member","url":"#dom-filesystempermissiondescriptor-mode"},
"#dom-filesystempermissionmode-read": {"export":true,"for_":["FileSystemPermissionMode"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"\"read\"","type":"enum-value","url":"#dom-filesystempermissionmode-read"},
"#dom-filesystempermissionmode-readwrite": {"export":true,"for_":["FileSystemPermissionMode"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"\"readwrite\"","type":"enum-value","url":"#dom-filesystempermissionmode-readwrite"},
"#dom-filesystemremoveoptions-recursive": {"export":true,"for_":["FileSystemRemoveOptions"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"recursive","type":"dict-member","url":"#dom-filesystemremoveoptions-recursive"},
"#dom-filesystemwritablefilestream-seek": {"export":true,"for_":["FileSystemWritableFileStream"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"seek(position)","type":"method","url":"#dom-filesystemwritablefilestream-seek"},
"#dom-filesystemwritablefilestream-truncate": {"export":true,"for_":["FileSystemWritableFileStream"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"truncate(size)","type":"method","url":"#dom-filesystemwritablefilestream-truncate"},
"#dom-filesystemwritablefilestream-write": {"export":true,"for_":["FileSystemWritableFileStream"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"write(data)","type":"method","url":"#dom-filesystemwritablefilestream-write"},
"#dom-openfilepickeroptions-multiple": {"export":true,"for_":["OpenFilePickerOptions"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"multiple","type":"dict-member","url":"#dom-openfilepickeroptions-multiple"},
"#dom-permissionname-file-system": {"export":true,"for_":["PermissionName"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"\"file-system\"","type":"enum-value","url":"#dom-permissionname-file-system"},
"#dom-storagemanager-getdirectory": {"export":true,"for_":["StorageManager"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"getDirectory()","type":"method","url":"#dom-storagemanager-getdirectory"},
"#dom-window-showdirectorypicker": {"export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"showDirectoryPicker(options)","type":"method","url":"#dom-window-showdirectorypicker"},
"#dom-window-showopenfilepicker": {"export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"showOpenFilePicker(options)","type":"method","url":"#dom-window-showopenfilepicker"},
"#dom-window-showsavefilepicker": {"export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"showSaveFilePicker(options)","type":"method","url":"#dom-window-showsavefilepicker"},
"#dom-writecommandtype-seek": {"export":true,"for_":["WriteCommandType"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"\"seek\"","type":"enum-value","url":"#dom-writecommandtype-seek"},
"#dom-writecommandtype-truncate": {"export":true,"for_":["WriteCommandType"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"\"truncate\"","type":"enum-value","url":"#dom-writecommandtype-truncate"},
"#dom-writecommandtype-write": {"export":true,"for_":["WriteCommandType"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"\"write\"","type":"enum-value","url":"#dom-writecommandtype-write"},
"#dom-writeparams-data": {"export":true,"for_":["WriteParams"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"data","type":"dict-member","url":"#dom-writeparams-data"},
"#dom-writeparams-position": {"export":true,"for_":["WriteParams"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"position","type":"dict-member","url":"#dom-writeparams-position"},
"#dom-writeparams-size": {"export":true,"for_":["WriteParams"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"size","type":"dict-member","url":"#dom-writeparams-size"},
"#dom-writeparams-type": {"export":true,"for_":["WriteParams"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"type","type":"dict-member","url":"#dom-writeparams-type"},
"#entry": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"entry","type":"dfn","url":"#entry"},
"#entry-name": {"export":true,"for_":["entry"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"name","type":"dfn","url":"#entry-name"},
"#entry-parent": {"export":true,"for_":["entry"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"parent","type":"dfn","url":"#entry-parent"},
"#entry-resolve": {"export":true,"for_":["entry"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"resolve","type":"dfn","url":"#entry-resolve"},
"#entry-the-same-as": {"export":true,"for_":["entry"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"the same as","type":"dfn","url":"#entry-the-same-as"},
"#enumdef-filesystemhandlekind": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemHandleKind","type":"enum","url":"#enumdef-filesystemhandlekind"},
"#enumdef-filesystempermissionmode": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemPermissionMode","type":"enum","url":"#enumdef-filesystempermissionmode"},
"#enumdef-writecommandtype": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"WriteCommandType","type":"enum","url":"#enumdef-writecommandtype"},
"#file": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"file entry","type":"dfn","url":"#file"},
"#file-entry-binary-data": {"export":true,"for_":["file entry"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"binary data","type":"dfn","url":"#file-entry-binary-data"},
"#file-entry-modification-timestamp": {"export":true,"for_":["file entry"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"modification timestamp","type":"dfn","url":"#file-entry-modification-timestamp"},
"#filesystemdirectoryhandle": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemDirectoryHandle","type":"interface","url":"#filesystemdirectoryhandle"},
"#filesystemdirectoryhandle-iterator-past-results": {"export":true,"for_":["FileSystemDirectoryHandle-iterator"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"past results","type":"dfn","url":"#filesystemdirectoryhandle-iterator-past-results"},
"#filesystemfilehandle": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemFileHandle","type":"interface","url":"#filesystemfilehandle"},
"#filesystemhandle": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemHandle","type":"interface","url":"#filesystemhandle"},
"#filesystemhandle-entry": {"export":true,"for_":["FileSystemHandle"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"entry","type":"dfn","url":"#filesystemhandle-entry"},
"#filesystemwritablefilestream": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemWritableFileStream","type":"interface","url":"#filesystemwritablefilestream"},
"#filesystemwritablefilestream-buffer": {"export":true,"for_":["FileSystemWritableFileStream"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"[[buffer]]","type":"dfn","url":"#filesystemwritablefilestream-buffer"},
"#filesystemwritablefilestream-file": {"export":true,"for_":["FileSystemWritableFileStream"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"[[file]]","type":"dfn","url":"#filesystemwritablefilestream-file"},
"#filesystemwritablefilestream-seekoffset": {"export":true,"for_":["FileSystemWritableFileStream"],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"[[seekoffset]]","type":"dfn","url":"#filesystemwritablefilestream-seekoffset"},
"#is-allowed-to-show-a-file-picker": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"is allowed to show a file picker","type":"dfn","url":"#is-allowed-to-show-a-file-picker"},
"#local-file-system-handle-factories": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"local file system handle factories","type":"dfn","url":"#local-file-system-handle-factories"},
"#malware-scans-and-safe-browsing-checks": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"malware scans and safe browsing checks","type":"dfn","url":"#malware-scans-and-safe-browsing-checks"},
"#origin-private-file-system": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"origin private file system","type":"dfn","url":"#origin-private-file-system"},
"#process-accept-types": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"process accept types","type":"dfn","url":"#process-accept-types"},
"#querying-file-system-permission": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"querying file system permission","type":"dfn","url":"#querying-file-system-permission"},
"#requesting-file-system-permission": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"requesting file system permission","type":"dfn","url":"#requesting-file-system-permission"},
"#too-sensitive-or-dangerous": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"too sensitive or dangerous","type":"dfn","url":"#too-sensitive-or-dangerous"},
"#typedefdef-filesystemwritechunktype": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"FileSystemWriteChunkType","type":"typedef","url":"#typedefdef-filesystemwritechunktype"},
"#valid-file-name": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"valid file name","type":"dfn","url":"#valid-file-name"},
"#valid-suffix-code-point": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"valid suffix code point","type":"dfn","url":"#valid-suffix-code-point"},
"#validate-a-suffix": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"validate a suffix","type":"dfn","url":"#validate-a-suffix"},
"#write-a-chunk": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"file-system-access","spec":"file-system-access-1","status":"local","text":"write a chunk","type":"dfn","url":"#write-a-chunk"},
"https://encoding.spec.whatwg.org/#utf-8-encode": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"encoding","spec":"encoding","status":"current","text":"utf-8 encode","type":"dfn","url":"https://encoding.spec.whatwg.org/#utf-8-encode"},
"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"opaque origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque"},
"https://html.spec.whatwg.org/multipage/browsers.html#same-origin": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"same origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro": {"export":false,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"read-only mode","type":"dfn","url":"https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro"},
"https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-rw": {"export":false,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"read/write mode","type":"dfn","url":"https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-rw"},
"https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"DataTransferItem","type":"interface","url":"https://html.spec.whatwg.org/multipage/dnd.html#datatransferitem"},
"https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind": {"export":false,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"the drag data item kind","type":"dfn","url":"https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind"},
"https://html.spec.whatwg.org/multipage/indices.html#event-messageerror": {"export":true,"for_":["Window","MessagePort","BroadcastChannel","DedicatedWorkerGlobalScope","Worker","ServiceWorkerContainer"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"messageerror","type":"event","url":"https://html.spec.whatwg.org/multipage/indices.html#event-messageerror"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"in parallel","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"https://html.spec.whatwg.org/multipage/interaction.html#activation-notification": {"export":false,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"activation notification","type":"dfn","url":"https://html.spec.whatwg.org/multipage/interaction.html#activation-notification"},
"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"transient activation","type":"dfn","url":"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc": {"export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc"},
"https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"deserialization steps","type":"dfn","url":"https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps"},
"https://html.spec.whatwg.org/multipage/structured-data.html#serializable": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Serializable","type":"extended-attribute","url":"https://html.spec.whatwg.org/multipage/structured-data.html#serializable"},
"https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"serializable object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects"},
"https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"serialization steps","type":"dfn","url":"https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin": {"export":true,"for_":["environment"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"top-level origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant realm","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global": {"export":true,"for_":["environment settings object"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin": {"export":true,"for_":["environment settings object"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin"},
"https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"current settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"https://infra.spec.whatwg.org/#ascii-alphanumeric": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ascii alphanumeric","type":"dfn","url":"https://infra.spec.whatwg.org/#ascii-alphanumeric"},
"https://infra.spec.whatwg.org/#assert": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"assert","type":"dfn","url":"https://infra.spec.whatwg.org/#assert"},
"https://infra.spec.whatwg.org/#byte-sequence": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"byte sequence","type":"dfn","url":"https://infra.spec.whatwg.org/#byte-sequence"},
"https://infra.spec.whatwg.org/#byte-sequence-length": {"export":true,"for_":["byte sequence"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"length","type":"dfn","url":"https://infra.spec.whatwg.org/#byte-sequence-length"},
"https://infra.spec.whatwg.org/#code-point": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"code point","type":"dfn","url":"https://infra.spec.whatwg.org/#code-point"},
"https://infra.spec.whatwg.org/#javascript-string-convert": {"export":true,"for_":["string","JavaScript string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"convert","type":"dfn","url":"https://infra.spec.whatwg.org/#javascript-string-convert"},
"https://infra.spec.whatwg.org/#list": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-contain": {"export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"contain","type":"dfn","url":"https://infra.spec.whatwg.org/#list-contain"},
"https://infra.spec.whatwg.org/#list-empty": {"export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"empty","type":"dfn","url":"https://infra.spec.whatwg.org/#list-empty"},
"https://infra.spec.whatwg.org/#list-is-empty": {"export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"is empty","type":"dfn","url":"https://infra.spec.whatwg.org/#list-is-empty"},
"https://infra.spec.whatwg.org/#list-iterate": {"export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#list-iterate"},
"https://infra.spec.whatwg.org/#list-prepend": {"export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"prepend","type":"dfn","url":"https://infra.spec.whatwg.org/#list-prepend"},
"https://infra.spec.whatwg.org/#list-remove": {"export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"remove","type":"dfn","url":"https://infra.spec.whatwg.org/#list-remove"},
"https://infra.spec.whatwg.org/#map-exists": {"export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"exist","type":"dfn","url":"https://infra.spec.whatwg.org/#map-exists"},
"https://infra.spec.whatwg.org/#map-iterate": {"export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#map-iterate"},
"https://infra.spec.whatwg.org/#ordered-set": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"set","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-set"},
"https://infra.spec.whatwg.org/#set-append": {"export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#set-append"},
"https://infra.spec.whatwg.org/#string": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"string","type":"dfn","url":"https://infra.spec.whatwg.org/#string"},
"https://infra.spec.whatwg.org/#string-length": {"export":true,"for_":["string","JavaScript string","scalar value string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"length","type":"dfn","url":"https://infra.spec.whatwg.org/#string-length"},
"https://infra.spec.whatwg.org/#string-starts-with": {"export":true,"for_":["string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"starts with","type":"dfn","url":"https://infra.spec.whatwg.org/#string-starts-with"},
"https://mimesniff.spec.whatwg.org/#mime-type": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"mime type","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#mime-type"},
"https://mimesniff.spec.whatwg.org/#mime-type-essence": {"export":true,"for_":["MIME type"],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"essence","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#mime-type-essence"},
"https://mimesniff.spec.whatwg.org/#parameters": {"export":true,"for_":["MIME type"],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"parameters","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#parameters"},
"https://mimesniff.spec.whatwg.org/#parse-a-mime-type": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"parse a mime type","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#parse-a-mime-type"},
"https://mimesniff.spec.whatwg.org/#subtype": {"export":true,"for_":["MIME type"],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"subtype","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#subtype"},
"https://mimesniff.spec.whatwg.org/#type": {"export":true,"for_":["MIME type"],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"type","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#type"},
"https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"storage","spec":"storage","status":"current","text":"obtain a local storage bottle map","type":"dfn","url":"https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map"},
"https://storage.spec.whatwg.org/#site-storage": {"export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage","type":"dfn","url":"https://storage.spec.whatwg.org/#site-storage"},
"https://storage.spec.whatwg.org/#storage-endpoint": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"storage","spec":"storage","status":"current","text":"storage endpoint","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-endpoint"},
"https://storage.spec.whatwg.org/#storage-endpoint-identifier": {"export":false,"for_":["storage endpoint"],"level":"1","normative":true,"shortname":"storage","spec":"storage","status":"current","text":"identifier","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-endpoint-identifier"},
"https://storage.spec.whatwg.org/#storage-endpoint-quota": {"export":false,"for_":["storage endpoint"],"level":"1","normative":true,"shortname":"storage","spec":"storage","status":"current","text":"quota","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-endpoint-quota"},
"https://storage.spec.whatwg.org/#storage-endpoint-types": {"export":false,"for_":["storage endpoint"],"level":"1","normative":true,"shortname":"storage","spec":"storage","status":"current","text":"types","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-endpoint-types"},
"https://storage.spec.whatwg.org/#storage-quota": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"storage","spec":"storage","status":"current","text":"storage quota","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-quota"},
"https://storage.spec.whatwg.org/#storagemanager": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"storage","spec":"storage","status":"current","text":"StorageManager","type":"interface","url":"https://storage.spec.whatwg.org/#storagemanager"},
"https://streams.spec.whatwg.org/#default-writer-write": {"export":true,"for_":["WritableStreamDefaultWriter"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"write()","type":"method","url":"https://streams.spec.whatwg.org/#default-writer-write"},
"https://streams.spec.whatwg.org/#readablestream": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"ReadableStream","type":"interface","url":"https://streams.spec.whatwg.org/#readablestream"},
"https://streams.spec.whatwg.org/#writablestream": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"WritableStream","type":"interface","url":"https://streams.spec.whatwg.org/#writablestream"},
"https://streams.spec.whatwg.org/#writablestream-get-a-writer": {"export":true,"for_":["WritableStream"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"getting a writer","type":"dfn","url":"https://streams.spec.whatwg.org/#writablestream-get-a-writer"},
"https://streams.spec.whatwg.org/#writablestream-set-up": {"export":true,"for_":["WritableStream"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"set up","type":"dfn","url":"https://streams.spec.whatwg.org/#writablestream-set-up"},
"https://streams.spec.whatwg.org/#writablestream-set-up-closealgorithm": {"export":true,"for_":["WritableStream/set up"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"closealgorithm","type":"dfn","url":"https://streams.spec.whatwg.org/#writablestream-set-up-closealgorithm"},
"https://streams.spec.whatwg.org/#writablestream-set-up-highwatermark": {"export":true,"for_":["WritableStream/set up"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"highwatermark","type":"dfn","url":"https://streams.spec.whatwg.org/#writablestream-set-up-highwatermark"},
"https://streams.spec.whatwg.org/#writablestream-set-up-sizealgorithm": {"export":true,"for_":["WritableStream/set up"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"sizealgorithm","type":"dfn","url":"https://streams.spec.whatwg.org/#writablestream-set-up-sizealgorithm"},
"https://streams.spec.whatwg.org/#writablestream-set-up-writealgorithm": {"export":true,"for_":["WritableStream/set up"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"writealgorithm","type":"dfn","url":"https://streams.spec.whatwg.org/#writablestream-set-up-writealgorithm"},
"https://streams.spec.whatwg.org/#writablestreamdefaultwriter": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"WritableStreamDefaultWriter","type":"interface","url":"https://streams.spec.whatwg.org/#writablestreamdefaultwriter"},
"https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release": {"export":true,"for_":["WritableStreamDefaultWriter"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"release","type":"dfn","url":"https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release"},
"https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk": {"export":true,"for_":["WritableStreamDefaultWriter"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"writing a chunk","type":"dfn","url":"https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk"},
"https://streams.spec.whatwg.org/#ws-get-writer": {"export":true,"for_":["WritableStream"],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"getWriter()","type":"method","url":"https://streams.spec.whatwg.org/#ws-get-writer"},
"https://tc39.github.io/ecma262/#realm": {"export":true,"for_":[],"level":"262","normative":true,"shortname":"ecma","spec":"ecma-262","status":"anchor-block","text":"realm","type":"dfn","url":"https://tc39.github.io/ecma262/#realm"},
"https://w3c.github.io/FileAPI/#UnixEpoch": {"export":false,"for_":[],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"unix epoch","type":"dfn","url":"https://w3c.github.io/FileAPI/#UnixEpoch"},
"https://w3c.github.io/FileAPI/#dfn-Blob": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"Blob","type":"interface","url":"https://w3c.github.io/FileAPI/#dfn-Blob"},
"https://w3c.github.io/FileAPI/#dfn-file": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"File","type":"interface","url":"https://w3c.github.io/FileAPI/#dfn-file"},
"https://w3c.github.io/FileAPI/#dfn-lastModified": {"export":true,"for_":["File"],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"lastModified","type":"attribute","url":"https://w3c.github.io/FileAPI/#dfn-lastModified"},
"https://w3c.github.io/FileAPI/#dfn-name": {"export":true,"for_":["File"],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"name","type":"attribute","url":"https://w3c.github.io/FileAPI/#dfn-name"},
"https://w3c.github.io/FileAPI/#dfn-type": {"export":true,"for_":["Blob"],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"type","type":"attribute","url":"https://w3c.github.io/FileAPI/#dfn-type"},
"https://w3c.github.io/FileAPI/#readOperation": {"export":false,"for_":[],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"read operation","type":"dfn","url":"https://w3c.github.io/FileAPI/#readOperation"},
"https://w3c.github.io/FileAPI/#snapshot-state": {"export":false,"for_":["Blob"],"level":"1","normative":true,"shortname":"fileapi","spec":"fileapi","status":"current","text":"snapshot state","type":"dfn","url":"https://w3c.github.io/FileAPI/#snapshot-state"},
"https://w3c.github.io/permissions/#dfn-create-a-permissionstatus": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"create a permissionstatus","type":"dfn","url":"https://w3c.github.io/permissions/#dfn-create-a-permissionstatus"},
"https://w3c.github.io/permissions/#dfn-permission-descriptor-type": {"export":true,"for_":["powerful feature"],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"permission descriptor type","type":"dfn","url":"https://w3c.github.io/permissions/#dfn-permission-descriptor-type"},
"https://w3c.github.io/permissions/#dfn-permission-state": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"permission state","type":"dfn","url":"https://w3c.github.io/permissions/#dfn-permission-state"},
"https://w3c.github.io/permissions/#dfn-permission-state-constraints": {"export":true,"for_":["powerful feature"],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"permission state constraints","type":"dfn","url":"https://w3c.github.io/permissions/#dfn-permission-state-constraints"},
"https://w3c.github.io/permissions/#dfn-powerful-feature": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"powerful feature","type":"dfn","url":"https://w3c.github.io/permissions/#dfn-powerful-feature"},
"https://w3c.github.io/permissions/#dfn-request-permission-to-use": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"request permission to use","type":"dfn","url":"https://w3c.github.io/permissions/#dfn-request-permission-to-use"},
"https://w3c.github.io/permissions/#dom-navigator-permissions": {"export":true,"for_":["Navigator"],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"permissions","type":"attribute","url":"https://w3c.github.io/permissions/#dom-navigator-permissions"},
"https://w3c.github.io/permissions/#dom-permissiondescriptor": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"PermissionDescriptor","type":"dictionary","url":"https://w3c.github.io/permissions/#dom-permissiondescriptor"},
"https://w3c.github.io/permissions/#dom-permissiondescriptor-name": {"export":true,"for_":["PermissionDescriptor"],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"name","type":"dict-member","url":"https://w3c.github.io/permissions/#dom-permissiondescriptor-name"},
"https://w3c.github.io/permissions/#dom-permissions-query": {"export":true,"for_":["Permissions"],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"query()","type":"method","url":"https://w3c.github.io/permissions/#dom-permissions-query"},
"https://w3c.github.io/permissions/#dom-permissionstate": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"PermissionState","type":"enum","url":"https://w3c.github.io/permissions/#dom-permissionstate"},
"https://w3c.github.io/permissions/#dom-permissionstate-granted": {"export":true,"for_":["PermissionState"],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"granted","type":"enum-value","url":"https://w3c.github.io/permissions/#dom-permissionstate-granted"},
"https://w3c.github.io/permissions/#dom-permissionstate-prompt": {"export":true,"for_":["PermissionState"],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"prompt","type":"enum-value","url":"https://w3c.github.io/permissions/#dom-permissionstate-prompt"},
"https://w3c.github.io/permissions/#dom-permissionstatus": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"PermissionStatus","type":"interface","url":"https://w3c.github.io/permissions/#dom-permissionstatus"},
"https://w3c.github.io/permissions/#dom-permissionstatus-state": {"export":true,"for_":["PermissionStatus"],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"state","type":"attribute","url":"https://w3c.github.io/permissions/#dom-permissionstatus-state"},
"https://webidl.spec.whatwg.org/#BufferSource": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"BufferSource","type":"typedef","url":"https://webidl.spec.whatwg.org/#BufferSource"},
"https://webidl.spec.whatwg.org/#Exposed": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#SecureContext": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SecureContext","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#SecureContext"},
"https://webidl.spec.whatwg.org/#a-new-promise": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a new promise","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"https://webidl.spec.whatwg.org/#a-promise-rejected-with": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a promise rejected with","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-promise-rejected-with"},
"https://webidl.spec.whatwg.org/#a-promise-resolved-with": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a promise resolved with","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-promise-resolved-with"},
"https://webidl.spec.whatwg.org/#aborterror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"AbortError","type":"exception","url":"https://webidl.spec.whatwg.org/#aborterror"},
"https://webidl.spec.whatwg.org/#asynchronous-iterator-initialization-steps": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"asynchronous iterator initialization steps","type":"dfn","url":"https://webidl.spec.whatwg.org/#asynchronous-iterator-initialization-steps"},
"https://webidl.spec.whatwg.org/#datacloneerror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DataCloneError","type":"exception","url":"https://webidl.spec.whatwg.org/#datacloneerror"},
"https://webidl.spec.whatwg.org/#dfn-get-buffer-source-copy": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"get a copy of the buffer source","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-get-buffer-source-copy"},
"https://webidl.spec.whatwg.org/#dfn-get-the-next-iteration-result": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"get the next iteration result","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-get-the-next-iteration-result"},
"https://webidl.spec.whatwg.org/#exceptiondef-typeerror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"TypeError","type":"exception","url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"https://webidl.spec.whatwg.org/#idl-USVString": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"USVString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-promise": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Promise","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-promise"},
"https://webidl.spec.whatwg.org/#idl-record": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"record","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-record"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-undefined": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"undefined","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"https://webidl.spec.whatwg.org/#idl-unsigned-long-long": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"unsigned long long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-unsigned-long-long"},
"https://webidl.spec.whatwg.org/#invalidmodificationerror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"InvalidModificationError","type":"exception","url":"https://webidl.spec.whatwg.org/#invalidmodificationerror"},
"https://webidl.spec.whatwg.org/#new": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"new","type":"dfn","url":"https://webidl.spec.whatwg.org/#new"},
"https://webidl.spec.whatwg.org/#notallowederror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"NotAllowedError","type":"exception","url":"https://webidl.spec.whatwg.org/#notallowederror"},
"https://webidl.spec.whatwg.org/#notfounderror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"NotFoundError","type":"exception","url":"https://webidl.spec.whatwg.org/#notfounderror"},
"https://webidl.spec.whatwg.org/#quotaexceedederror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"QuotaExceededError","type":"exception","url":"https://webidl.spec.whatwg.org/#quotaexceedederror"},
"https://webidl.spec.whatwg.org/#reject": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"reject","type":"dfn","url":"https://webidl.spec.whatwg.org/#reject"},
"https://webidl.spec.whatwg.org/#resolve": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"resolve","type":"dfn","url":"https://webidl.spec.whatwg.org/#resolve"},
"https://webidl.spec.whatwg.org/#securityerror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SecurityError","type":"exception","url":"https://webidl.spec.whatwg.org/#securityerror"},
"https://webidl.spec.whatwg.org/#this": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"this","type":"dfn","url":"https://webidl.spec.whatwg.org/#this"},
"https://webidl.spec.whatwg.org/#typemismatcherror": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"TypeMismatchError","type":"exception","url":"https://webidl.spec.whatwg.org/#typemismatcherror"},
"https://webidl.spec.whatwg.org/#upon-fulfillment": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"upon fulfillment","type":"dfn","url":"https://webidl.spec.whatwg.org/#upon-fulfillment"},
"https://webidl.spec.whatwg.org/#wait-for-all": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"wait for all","type":"dfn","url":"https://webidl.spec.whatwg.org/#wait-for-all"},
"https://wicg.github.io/permissions-request/#permission-request-algorithm": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-request","spec":"permissions-request","status":"current","text":"permission request algorithm","type":"dfn","url":"https://wicg.github.io/permissions-request/#permission-request-algorithm"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>