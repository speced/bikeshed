<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>CSS Subtree Visibility</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="exploring" name="csswg-work-status">
  <meta content="UD" name="w3c-status">
  <meta content="This spec introduces a subtree-visibility CSS property, allowing authors            to control element subtree visibility, while at the same time providing strong            rendering performance hints to the user-agent. The user-agent can use the hints            to optimize rendering performance, making interactions with large amounts of            content perform well." name="abstract">
  <link href="../default.css" rel="stylesheet" type="text/css">
  <link href="../csslogo.ico" rel="shortcut icon" type="image/x-icon">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-UD" rel="stylesheet" type="text/css">
  <link href="https://wicg.github.io/display-locking" rel="canonical">
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #707070;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #bbb;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">CSS Subtree Visibility</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Unofficial Proposal Draft, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/display-locking">https://wicg.github.io/display-locking</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-subtree-visibility-1">CSSWG Issues Repository</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Tab Atkins-Bittner</span> (<span class="p-org org">Google</span>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Vladimir Levin</span> (<span class="p-org org">Google</span>)
     <dt>Suggest an Edit for this Spec:
     <dd><a href="https://github.com/w3c/csswg-drafts/blob/master/css-subtree-visibility-1/Overview.bs">GitHub Editor</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 1970 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This spec introduces a subtree-visibility CSS property, allowing authors

          to control element subtree visibility, while at the same time providing strong
          rendering performance hints to the user-agent. The user-agent can use the hints
          to optimize rendering performance, making interactions with large amounts of
          content perform well.</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a> is a language for describing the rendering of structured documents
(such as HTML and XML)
on screen, on paper, etc. 
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p><em>This section describes the status of this document at the time of its publication.
	Other documents may supersede this document.
	A list of current W3C publications
	and the latest revision of this technical report
	can be found in the <a href="https://www.w3.org/TR/">W3C technical reports index at https://www.w3.org/TR/.</a></em> </p>
   <p>Please send feedback
	by <a href="https://github.com/w3c/csswg-drafts/issues">filing issues in GitHub</a> (preferred),
	including the spec code “css-subtree-visibility” in the title, like this:
	“[css-subtree-visibility] <i>…summary of comment…</i>”.
	All issues and comments are <a href="https://lists.w3.org/Archives/Public/public-css-archive/">archived</a>.
	Alternately, feedback can be sent to the (<a href="https://lists.w3.org/Archives/Public/www-style/">archived</a>) public mailing list <a href="mailto:www-style@w3.org?Subject=%5Bcss-subtree-visibility%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/2020/Process-20200915/" id="w3c_process_revision">15 September 2020 W3C Process Document</a>. </p>
   <p>This document was produced by a group operating under the <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C Patent Policy</a>.
	W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes
	contains <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#motivation"><span class="secno">1.1</span> <span class="content">Motivation &amp; Background</span></a>
     </ol>
    <li><a href="#definitions"><span class="secno">2</span> <span class="content">Definitions</span></a>
    <li><a href="#subtree-visibility"><span class="secno">3</span> <span class="content">The <span class="property">subtree-visibility</span> property</span></a>
    <li><a href="#restrictions"><span class="secno">4</span> <span class="content">Restrictions and Clarifications</span></a>
    <li><a href="#accessibility"><span class="secno">5</span> <span class="content">Accessibility</span></a>
    <li><a href="#examples"><span class="secno">6</span> <span class="content">Examples</span></a>
    <li><a href="#similarity"><span class="secno">7</span> <span class="content">Similarity to visibility</span></a>
    <li><a href="#alternatives"><span class="secno">8</span> <span class="content">Alternatives Considered</span></a>
    <li><a href="#priv-sec"><span class="secno">9</span> <span class="content">Privacy &amp; Security Considerations</span></a>
    <li><a href="#footnotes"><span class="secno">10</span> <span class="content">Footnotes</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> Document conventions</span></a>
      <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content"> Conformance classes</span></a>
      <li>
       <a href="#w3c-partial"><span class="secno"></span> <span class="content"> Partial implementations</span></a>
       <ol class="toc">
        <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span class="content"> Implementations of Unstable and Proprietary Features</span></a>
       </ol>
      <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> Non-experimental implementations</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#property-index"><span class="secno"></span> <span class="content">Property Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>Subtree Visibility (a.k.a. Display Locking) is a CSS property designed to allow
developers and browsers to easily scale to large amount of content and provide
strong hints which allow the user-agent to delay rendering <a href="#f1">[1]</a> work.  More concretely, the goals are:</p>
   <ul>
    <li data-md>
     <p>Avoid rendering work for content not visible to the user.</p>
    <li data-md>
     <p>Support user-agent features and all layout algorithms (e.g. responsive
design, flexbox, grid) for this content.</p>
   </ul>
   <p>Optimizing behavior and performance of the following use-cases motivate this work:</p>
   <ul>
    <li data-md>
     <p>Fast display of large HTML documents (examples: HTML one-page spec; other
long documents)</p>
    <li data-md>
     <p>Scrollers with a large amount of content, without resorting to virtualization
(examples: Facebook and Twitter feeds, CodeMirror documents)</p>
   </ul>
   <h3 class="heading settled" data-level="1.1" id="motivation"><span class="secno">1.1. </span><span class="content">Motivation &amp; Background</span><a class="self-link" href="#motivation"></a></h3>
   <p>On the one hand, faster web page loads and interactions directly improve the
user experience of the web. On the other hand, web sites each year grow larger
and more complex than the last, in part because they support more and more use
cases, and contain more information. The most common UI pattern for the web is
scrolling, which leads to pages with a lot of non-visible (off-screen or hidden)
DOM. Since the DOM presently renders atomically, it inherently takes more and
more time to render on the same machine.</p>
   <p>Web developers are in a good position to know whether rendering a particular <a data-link-type="dfn" href="#subtree" id="ref-for-subtree">subtree</a> that is off-screen is needed for the visual representation of their
page. Specifically, if the layout of an off-screen box and its <span id="ref-for-subtree①">subtree</span> has a
visible and necessary effect on screen then such rendering is required.
Otherwise, it is not. Since web developers are in a good position to have this
information, they can provide the user-agent strong hints indicating that
rendering for a given <span id="ref-for-subtree②">subtree</span> is not required in certain cases.</p>
   <p>Traditionally, two techniques of providing this information to the user-agent
are to mark non-visible DOM as "invisible" <a href="#f2">[2]</a>, or to use
virtualization <a href="#f3">[3]</a>. Browser implementors also want to reduce
loading and rendering time of web apps. Common techniques to do so include
adding caching of rendering state <a href="#f4">[4]</a>, and avoiding rendering
work <a href="#f5">[5]</a> for content that is not visible.</p>
   <p>These techniques can work in many cases but have drawbacks and limitations:</p>
   <ul>
    <li data-md>
     <p><a href="#f2">[2]</a> and <a href="#f3">[3]</a> usually means that such content
is not available to user-agent features, such as find-in-page functionality.
Also, content that is merely placed off-screen may or may not have rendering
cost (it depends on browser heuristics), which makes the technique
unreliable.</p>
    <li data-md>
     <p>Caching intermediate rendering state is hard work, and often has performance
limitations and cliffs that are not obvious to developers.  Similarly,
relying on the browser to avoid rendering for content that is clipped out or
not visible is sometimes not reliable, as it’s hard for the browser to
efficiently detect what content is not visible and does not affect visible
content in any way.</p>
   </ul>
   <p>Previously adopted web APIs, in particular the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-contain-2/#propdef-contain" id="ref-for-propdef-contain">contain</a> and <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-will-change-1/#propdef-will-change" id="ref-for-propdef-will-change">will-change</a> CSS
properties, add ways to specify forms of rendering isolation or isolation
hints, with the intention of them being a mechanism for the web developer to
help the browser optimize rendering for the page.</p>
   <p>While these forms of isolation help, they do not guarantee that isolated
content does not need to be rendered at all.  Ideally there would be a way for
the developer to specify that specific parts of the DOM need not be rendered,
and pair that with a guarantee that when later rendered, it would not
invalidate more than a small amount of style, layout, or paint in the rest of
the document.</p>
   <h2 class="heading settled" data-level="2" id="definitions"><span class="secno">2. </span><span class="content">Definitions</span><a class="self-link" href="#definitions"></a></h2>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="subtree">subtree</dfn>: an element’s subtree are all nodes that comprise
the <a data-link-type="dfn" href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree">flattened element tree</a> rooted at the given element, with the exception
of the element itself. In other words, this refers to the <span id="ref-for-flat-tree①">flat tree</span> descendants of the element. Note that the term <em>subtree</em> in the
property name <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility">subtree-visibility</a> refers to the same descendants.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="off-screen">off-screen</dfn>: an element is considered to be off-screen if
its border box does not intersect the visual viewport plus a user-agent
specified, margin.</p>
     <div class="note" role="note"> The the user-agent is free to consider any margin around the viewport
  when computing whether the element is off-screen. The margin is meant to
  allow the user-agent to start preparing the element ahead of time, before
  it enters the viewport. A 50% viewport margin is a reasonable
  implementation default. </div>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-export id="on-screen">on-screen<a class="self-link" href="#on-screen"></a></dfn>: an element is considered to be on-screen if it
is not <a data-link-type="dfn" href="#off-screen" id="ref-for-off-screen">off-screen</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="skipped">skipped</dfn>: an element is considered skipped if its <a data-link-type="dfn" href="#subtree" id="ref-for-subtree③">subtree</a> is
not painted or hit-tested. A skipped element has <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#layout-containment" id="ref-for-layout-containment">layout containment</a>, <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#style-containment" id="ref-for-style-containment">style containment</a>, and <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#size-containment" id="ref-for-size-containment">size containment</a> applied to it in addition to
other containment values. The user-agent should avoid as much rendering work
in the skipped element’s <span id="ref-for-subtree④">subtree</span> as possible.</p>
     <div class="note" role="note"> Rendering work can be avoided due to the combination of
  containment and the fact that the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree⑤">subtree</a> is not painted.  As an example,
  because of the containment applied, in most cases it should be possible to skip
  computing styles, or determining layout box sizes and positions, unless
  explicitly requested by script. </div>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="gains-containment">gains containment</dfn>: for an an element to gain containment,
the user-agent must apply <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#layout-containment" id="ref-for-layout-containment①">layout containment</a> and <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#style-containment" id="ref-for-style-containment①">style containment</a> to it in addition to any other containment properties.</p>
   </ul>
   <h2 class="heading settled" data-level="3" id="subtree-visibility"><span class="secno">3. </span><span class="content">The <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①">subtree-visibility</a> property</span><a class="self-link" href="#subtree-visibility"></a></h2>
   <table class="def propdef" data-link-for-hint="subtree-visibility">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-subtree-visibility">subtree-visibility</dfn>
     <tr class="value">
      <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
      <td class="prod">visible <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one">|</a> auto <span id="ref-for-comb-one①">|</span> hidden
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
      <td>visible
     <tr>
      <th>Applies to:
      <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content" title="Includes ::before and ::after pseudo-elements.">all elements</a>
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
      <td>no
     <tr>
      <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
      <td>n/a
     <tr>
      <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
      <td>as specified
     <tr>
      <th>Canonical order:
      <td>per grammar
   </table>
   <dl value>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="subtree-visibility" data-dfn-type="dfn" data-export id="subtree-visibility-visible">visible</dfn>
    <dd data-md>
     <p>No effect. This provides no extra information or hints to the user-agent.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="subtree-visibility" data-dfn-type="dfn" data-export id="subtree-visibility-auto">auto</dfn>
    <dd data-md>
     <p>The element <a data-link-type="dfn" href="#gains-containment" id="ref-for-gains-containment">gains containment</a>.
 If *all of* the following conditions hold then the element is also <a data-link-type="dfn" href="#skipped" id="ref-for-skipped">skipped</a>:</p>
     <ul>
      <li data-md>
       <p>The element is <a data-link-type="dfn" href="#off-screen" id="ref-for-off-screen①">off-screen</a>.</p>
      <li data-md>
       <p>Neither the element nor any of its <a data-link-type="dfn" href="#subtree" id="ref-for-subtree⑥">subtree</a> elements are
   focused as described in the <a href="https://html.spec.whatwg.org/multipage/interaction.html#focus">focus</a> section of the HTML spec.</p>
      <li data-md>
       <p>Neither the element nor any of its <a data-link-type="dfn" href="#subtree" id="ref-for-subtree⑦">subtree</a> elements are
   selected as described in the <a href="https://drafts.csswg.org/css-pseudo-4/#highlight-pseudos">highlight
   pseudo-elements</a> section.</p>
     </ul>
     <p>It is important to note that the contents of the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree⑧">subtree</a> must be
 accessible to user-agent features such as find-in-page, tab order
 navigation, etc. This is true regardless of whether the element is <a data-link-type="dfn" href="#skipped" id="ref-for-skipped①">skipped</a> or not.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="subtree-visibility" data-dfn-type="dfn" data-export id="subtree-visibility-hidden">hidden</dfn>
    <dd data-md>
     <p>The element is <a data-link-type="dfn" href="#skipped" id="ref-for-skipped②">skipped</a>.</p>
     <p>Note that in this case, the contents of the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree⑨">subtree</a> are not accessible
 to user-agent features, such as find-in-page, tab order navigation,
 etc.</p>
   </dl>
   <p>Note that when the element is <a data-link-type="dfn" href="#skipped" id="ref-for-skipped③">skipped</a> and the rendering work is avoided,
the user-agent should retain the previously computed layout state if possible.</p>
   <div class="note" role="note">
     Intuitively, a <a data-link-type="dfn" href="#subtree-visibility-hidden" id="ref-for-subtree-visibility-hidden">hidden</a> value means that the element behaves in a way that
  does not expose the contents of its <a data-link-type="dfn" href="#subtree" id="ref-for-subtree①⓪">subtree</a> to the user (but still has an
  effect on layout, especially in conjunction with `contain-intrinsic-size`).
  Script interactions are required for the content to appear to the user. 
    <p>In contrast, a value of <a data-link-type="dfn" href="#subtree-visibility-auto" id="ref-for-subtree-visibility-auto">auto</a> means that the element behaves as if the
  contents of the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree①①">subtree</a> are accessible to the user. The content can be
  interacted with in the usual ways: scrolling will reveal the content, tab
  order navigation will visit the <span id="ref-for-subtree①②">subtree</span>, find-in-page will find matches, etc.
  The fact that <a data-link-type="dfn" href="#off-screen" id="ref-for-off-screen②">off-screen</a> elements with <a class="css" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility②">subtree-visibility: auto</a> are <a data-link-type="dfn" href="#skipped" id="ref-for-skipped④">skipped</a> is a rendering performance optimization.</p>
    <p>Note that selected and focused elements affected by <a class="css" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility③">subtree-visibility: auto</a> are treated as if they are painted, since users can interact with this
  content when it is off-screen. For example, a user can copy (via a shortcut)
  text that was selected and scrolled off-screen. For this reason, elements and
  subtrees with focus or selection remain painted.</p>
   </div>
   <div class="note" role="note"> It is worthwhile to note the interaction between <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility④">subtree-visibility</a> and
  containment: If the element has a <span class="property" id="ref-for-propdef-subtree-visibility⑤">subtree-visibility</span> value other than <a data-link-type="dfn" href="#subtree-visibility-visible" id="ref-for-subtree-visibility-visible">visible</a>, the user-agent enforces <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#style-containment" id="ref-for-style-containment②">style containment</a> and <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#layout-containment" id="ref-for-layout-containment②">layout
  containment</a> on the element. Additionally, if the element is <a data-link-type="dfn" href="#skipped" id="ref-for-skipped⑤">skipped</a>,
  then the user-agent also enforces <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#size-containment" id="ref-for-size-containment①">size containment</a>. These containment
  values are added on top of any existing containment values. </div>
   <h2 class="heading settled" data-level="4" id="restrictions"><span class="secno">4. </span><span class="content">Restrictions and Clarifications</span><a class="self-link" href="#restrictions"></a></h2>
   <ul>
    <li data-md>
     <p>In situations where <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#layout-containment" id="ref-for-layout-containment③">layout containment</a> has no effect (e.g. the
element does not generate a principal box), <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility⑥">subtree-visibility</a> values also
have no effect.</p>
    <li data-md>
     <p><a href="https://html.spec.whatwg.org/multipage/rendering.html#replaced-elements"> Replaced elements</a> do not paint their contents if they
are <a data-link-type="dfn" href="#skipped" id="ref-for-skipped⑥">skipped</a> due to <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility⑦">subtree-visibility</a>. That is, the element’s border
and background are painted, but the replaced content -- as described in
steps 7.1 and 7.2.4 of <a href="https://www.w3.org/TR/CSS21/zindex.html#painting-order">the painting
order</a> steps -- is not.</p>
    <li data-md>
     <p>From the perspective of an <a href="https://w3c.github.io/IntersectionObserver/">intersection observer</a>,
elements in the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree①③">subtree</a> of a <a data-link-type="dfn" href="#skipped" id="ref-for-skipped⑦">skipped</a> element are not intersecting the <a href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-root">root</a>.
This is true even if both the root and the target elements are in the <span id="ref-for-subtree①④">subtree</span> of a <span id="ref-for-skipped⑧">skipped</span> element.</p>
    <li data-md>
     <p>From the perpsective of a <a href="https://drafts.csswg.org/resize-observer/#resize-observer-interface">resize
observer</a>, elements in the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree①⑤">subtree</a> of a <a data-link-type="dfn" href="#skipped" id="ref-for-skipped⑨">skipped</a> element do not
change their size. If these elements become non-skipped again, the resize
observation will be delivered if the new size differs from the last size
used to notify the resize observer.</p>
   </ul>
   <h2 class="heading settled" data-level="5" id="accessibility"><span class="secno">5. </span><span class="content">Accessibility</span><a class="self-link" href="#accessibility"></a></h2>
   <p>Similar to the way <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility⑧">subtree-visibility</a> affects painted output of the element’s <a data-link-type="dfn" href="#subtree" id="ref-for-subtree①⑥">subtree</a>, it also affects information exposed to the <a href="https://w3c.github.io/css-aam/#dfn-accessibility-tree">accessibility
tree</a> and <a href="https://w3c.github.io/css-aam/#dfn-assistive-technology"> assistive technologies</a>:</p>
   <ul>
    <li data-md>
     <p>Subtrees affected by <a class="css" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility⑨">subtree-visibility: visible</a> or <span class="css" id="ref-for-propdef-subtree-visibility①⓪">subtree-visibility: auto</span> that are not <a data-link-type="dfn" href="#skipped" id="ref-for-skipped①⓪">skipped</a> should be included in the accessibility tree as usual.</p>
    <li data-md>
     <p>Subtrees of <a data-link-type="dfn" href="#skipped" id="ref-for-skipped①①">skipped</a> elements should not be included in the accessibility tree,
with the following exception:</p>
     <ul>
      <li data-md>
       <p>Subtrees which are affected by <a class="css" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①①">subtree-visibility: auto</a> and are <a data-link-type="dfn" href="#skipped" id="ref-for-skipped①②">skipped</a> should be also be included in the accessibility tree
subject to the rendering constraints below.</p>
     </ul>
   </ul>
   <div class="note" role="note">
     Since assistive technologies may provide quick access to offscreen elements,
  it is desirable that elements in <a class="css" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①②">subtree-visibility: auto</a> subtrees be made
  available to assistive technologies to provide this functionality, since they
  are intended to be observable to users. 
    <p>Conversely, since elements in <a class="css" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①③">subtree-visibility: hidden</a> subtrees are not
  intended to be observable by users, they should not be exposed to assistive
  technology.</p>
   </div>
   <ul>
    <li data-md>
     <p>The rendering performance of subtrees affected by <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①④">subtree-visibility</a> and
exposed to assistive technologies must reasonably match the rendering
performance of the same subtrees exposed to painted output.</p>
   </ul>
   <div class="note" role="note">
     The requirement of rendering performance equivalency stems from privacy
  considerations. It is imperative that the user-agent ensures that a page
  using <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①⑤">subtree-visibility</a> cannot use timing information to deduce whether
  the user is using assistive technologies. For this reason, the rendering
  performance of information exposed to assistive technologies must be the same
  as the rendering performance of information exposed to painted output. 
    <p>In other words, if the user-agent omits rendering work when producing painted
  output, then it must also omit the same rendering work when providing
  information for assistive technologies, and vice-versa.</p>
   </div>
   <div class="note" role="note">
     If the user-agent omits rendering work, then it should still make the effort
  to expose <a class="css" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①⑥">subtree-visibility: auto</a> <a data-link-type="dfn" href="#skipped" id="ref-for-skipped①③">skipped</a> elements and their
  subtrees to assistive technology without exposing any of the layout state,
  since it is not available due to omitted work. 
    <p>If such action is not possible, then the user-agent may omit these subtrees
  from the accessibility tree.</p>
   </div>
   <h2 class="heading settled" data-level="6" id="examples"><span class="secno">6. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
   <div class="example" id="example-6b713aeb">
    <a class="self-link" href="#example-6b713aeb"></a> 
<pre class="highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>.</c-><c- nc>sv</c-> <c- p>{</c->
  <c- n>subtree-visibility</c-><c- p>:</c-> <c- kc>auto</c-><c- p>;</c->
  <c- k>min-height</c-><c- p>:</c-> <c- mi>50</c-><c- b>px</c-><c- p>;</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>sv</c-><c- p>></c->
  ... some content goes here ...
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
    <p>The .sv element’s <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①⑦">subtree-visibility</a> value <a data-link-type="dfn" href="#subtree-visibility-auto" id="ref-for-subtree-visibility-auto①">auto</a> lets the user-agent
  manage whether the element is <a data-link-type="dfn" href="#skipped" id="ref-for-skipped①④">skipped</a>.  Specifically when this element is
  near the viewport, the user-agent will begin painting the element.  When the
  element moves away from the viewport, it will stop being painted. In
  addition, the user-agent should skip as much of the rendering work as
  possible when the element is <span id="ref-for-skipped①⑤">skipped</span>.</p>
   </div>
   <div class="example" id="example-d9055d5b">
    <a class="self-link" href="#example-d9055d5b"></a> 
<pre class="highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>.</c-><c- nc>sv</c-> <c- p>{</c->
  <c- n>subtree-visibility</c-><c- p>:</c-> <c- kc>hidden</c-><c- p>;</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>sv</c-><c- p>></c->
  ... some content goes here ...
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
    <p>In this case, the element is <a data-link-type="dfn" href="#skipped" id="ref-for-skipped①⑥">skipped</a> regardless of viewport intersection.
  This means that the only way to have this <a data-link-type="dfn" href="#subtree" id="ref-for-subtree①⑦">subtree</a> painted is via script
  updating the value to remove <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①⑧">subtree-visibility</a> or change its value. As
  before, the user-agent should skip as much of the rendering in the <span id="ref-for-subtree①⑧">subtree</span> as
  possible.</p>
    <p>An additional effect of skipping rendering is that the layout state of the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree①⑨">subtree</a> can be preserved by the user-agent, so that removing the <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility①⑨">subtree-visibility</a> property in the future will cause the <span id="ref-for-subtree②⓪">subtree</span> to be
  rendered quicker than otherwise possible.</p>
   </div>
   <div class="example" id="example-536d29cb">
    <a class="self-link" href="#example-536d29cb"></a> 
<pre class="highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- f>body</c-> <c- p>{</c->
  <c- k>margin</c-><c- p>:</c-> <c- mi>0</c-><c- p>;</c->
<c- p>}</c->
<c- p>.</c-><c- nc>sv</c-> <c- p>{</c->
  <c- n>subtree-visibility</c-><c- p>:</c-> <c- kc>hidden</c-><c- p>;</c->

  <c- k>position</c-><c- p>:</c-> <c- kc>relative</c-><c- p>;</c->
  <c- k>left</c-><c- p>:</c-> <c- mi>10</c-><c- b>px</c-><c- p>;</c->
  <c- k>top</c-><c- p>:</c-> <c- mi>20</c-><c- b>px</c-><c- p>;</c->
<c- p>}</c->
<c- p>#</c-><c- nn>child</c-> <c- p>{</c->
  <c- k>position</c-><c- p>:</c-> <c- kc>relative</c-><c- p>;</c->
  <c- k>left</c-><c- p>:</c-> <c- mi>1</c-><c- b>px</c-><c- p>;</c->
  <c- k>top</c-><c- p>:</c-> <c- mi>2</c-><c- b>px</c-><c- p>;</c->

  <c- k>width</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c->
  <c- k>height</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>target</c-> <c- e>class</c-><c- o>=</c-><c- s>sv</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>child</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
  ... some other content goes here ...
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  <c- p>...</c->
  <c- c1>// This will force rendering work, including layout,</c->
  <c- c1>// if the UA previously avoided it.</c->
  target<c- p>.</c->firstElementChild<c- p>.</c->getBoundingClientRect<c- p>();</c->
  <c- p>...</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
    <p>Similarly to the last example, the element is <a data-link-type="dfn" href="#skipped" id="ref-for-skipped①⑦">skipped</a>. The user-agent
  should avoid as much rendering work as possible.  However, in this example,
  at some point script accesses a layout value in the element’s <a data-link-type="dfn" href="#subtree" id="ref-for-subtree②①">subtree</a>. In
  this situation, the user-agent cannot avoid rendering work and has to process
  any previously skipped rendering work in order to return a correct value to
  the caller. In this example, the result of getBoundingClientRect is a rect
  positioned at (11, 22) with a size 100x200.</p>
    <p>Note that repeated calls to the same layout value should not
  cause any additional rendering work, since the user-agent should retain the
  last updated rendering state.</p>
    <p>Also note that this situation in which rendering work is required is not
  unique. There may be other situations in which the user-agent cannot avoid
  rendering work.</p>
   </div>
   <h2 class="heading settled" data-level="7" id="similarity"><span class="secno">7. </span><span class="content">Similarity to visibility</span><a class="self-link" href="#similarity"></a></h2>
   <p>Note that <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility②⓪">subtree-visibility</a> bears some similarity in naming to <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/#propdef-visibility" id="ref-for-propdef-visibility">visibility</a> which is important to address. Like <span class="property" id="ref-for-propdef-visibility①">visibility</span>, <span class="property" id="ref-for-propdef-subtree-visibility②①">subtree-visibility</span> controls
whether the element, or its <a data-link-type="dfn" href="#subtree" id="ref-for-subtree②②">subtree</a>, are painted and hit-tested. However, it
has important distinctions that allow both adoption in a wider set of use-cases
and ability for user-agents to optimize rendering performance:</p>
   <ul>
    <li data-md>
     <p><a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility②②">subtree-visibility</a> values cannot be reverted by descendant style. As an
example, when processing an element that has <span class="property" id="ref-for-propdef-subtree-visibility②③">subtree-visibility</span> value <a data-link-type="dfn" href="#subtree-visibility-hidden" id="ref-for-subtree-visibility-hidden①">hidden</a>, the user-agent will not paint any of its subtree, even if one of
the elements in the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree②③">subtree</a> has <span class="property" id="ref-for-propdef-subtree-visibility②④">subtree-visibility</span> value <a data-link-type="dfn" href="#subtree-visibility-visible" id="ref-for-subtree-visibility-visible①">visible</a>. This
is important as it makes it possible to skip style part of rendering in
these <span id="ref-for-subtree②④">subtree</span>, since no descendant value can override <span class="property" id="ref-for-propdef-subtree-visibility②⑤">subtree-visibility</span>.</p>
    <li data-md>
     <p><a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility②⑥">subtree-visibility</a> has an <a data-link-type="dfn" href="#subtree-visibility-auto" id="ref-for-subtree-visibility-auto②">auto</a> value, which allows the user-agent to
paint the element’s <a data-link-type="dfn" href="#subtree" id="ref-for-subtree②⑤">subtree</a> when it approaches the viewport. This allows easy
adoption of the feature. In contrast, if <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/#propdef-visibility" id="ref-for-propdef-visibility②">visibility</a> or <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-display-3/#propdef-display" id="ref-for-propdef-display">display: none</a> are
used instead, then it is up to the developer to toggle the values when they
approach the viewport.</p>
    <li data-md>
     <p><a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility②⑦">subtree-visibility</a> adds in containment. This is an important part of the
property, which allows the user-agent to skip rendering work in the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree②⑥">subtree</a>,
since it can reason that when the element’s <span id="ref-for-subtree②⑦">subtree</span> is not painted, then the
style and layout effects of the <span id="ref-for-subtree②⑧">subtree</span> will not affect any visible content.</p>
   </ul>
   <h2 class="heading settled" data-level="8" id="alternatives"><span class="secno">8. </span><span class="content">Alternatives Considered</span><a class="self-link" href="#alternatives"></a></h2>
   <p>The <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-display-3/#propdef-display" id="ref-for-propdef-display①">display: none</a> CSS property causes content subtrees not to render.
However, there is no mechanism for user-agent features to cause these subtrees
to render. Additionally, the cost of hiding and showing content cannot be
eliminated since <span class="css" id="ref-for-propdef-display②">display: none</span> does not preserve the layout state of the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree②⑨">subtree</a>.</p>
   <p><a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css2/#propdef-visibility" id="ref-for-propdef-visibility③">visibility: hidden</a> causes subtrees to not paint, but they still need style
and layout, as the <a data-link-type="dfn" href="#subtree" id="ref-for-subtree③⓪">subtree</a> takes up layout space and descendants may be <span class="css" id="ref-for-propdef-visibility④">visibility: visible</span>. Note that with sufficient containment and intersection
observer, the functionality provided by <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility②⑧">subtree-visibility</a> may be mimicked.
However, <span class="css" id="ref-for-propdef-subtree-visibility②⑨">subtree-visibility: auto</span> also permits user-agent algorithms such
as find-in-page and fragment navigation to access the element’s <span id="ref-for-subtree③①">subtree</span>, which
cannot be mimicked by <span class="css">visibility</span>. Overall, <span class="property" id="ref-for-propdef-subtree-visibility③⓪">subtree-visibility</span> property is
a stronger signal allowing the user-agent to optimize rendering.</p>
   <p>Similar to <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css2/#propdef-visibility" id="ref-for-propdef-visibility⑤">visibility: hidden</a>, <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-contain-2/#propdef-contain" id="ref-for-propdef-contain①">contain: strict</a> allows the browser to
automatically detect subtrees that are definitely off-screen, and therefore
that don’t need to be rendered. However, <span class="css" id="ref-for-propdef-contain②">contain: strict</span> on its own is not
flexible enough to allow for responsive design layouts that grow elements to
fit their content. To work around this, content could be marked as ''contain:
strict'' when off-screen and then some other value when on-screen (this is
similar to <a class="property" data-link-type="propdesc" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility③①">subtree-visibility</a>). Second, <span class="css" id="ref-for-propdef-contain③">contain: strict</span> may or may not
result in rendering work, depending on whether the browser detects the content
is actually off-screen. Third, it does not support user-agent features in
cases when it is not actually rendered to the user in the current application
view.</p>
   <h2 class="heading settled" data-level="9" id="priv-sec"><span class="secno">9. </span><span class="content">Privacy &amp; Security Considerations</span><a class="self-link" href="#priv-sec"></a></h2>
   <p>tbd</p>
   <h2 class="heading settled" data-level="10" id="footnotes"><span class="secno">10. </span><span class="content">Footnotes</span><a class="self-link" href="#footnotes"></a></h2>
   <p id="f1">[1]: Meaning, the rendering part of the browser event loop. </p>
   <p id="f2">[2]: Examples:
placing <span class="css">display:none</span> CSS on DOM subtrees,
or by placing content far off-screen via tricks like <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-box-4/#propdef-margin-left" id="ref-for-propdef-margin-left">margin-left: -10000px</a> </p>
   <p id="f3">[3]: In this context,
virtualization means representing content outside of the DOM,
and inserting it into the DOM only when visible.
This is most commonly used for virtual or infinite scrollers. </p>
   <p id="f4">[4]: Examples:
caching the computed style of DOM elements,
the output of text / block layout,
and display list output of paint. </p>
   <p id="f5">[5]: Examples:
detecting elements that are clipped out by ancestors,
or not visible in the viewport,
and avoiding some or most rendering lifecycle phases for such content. </p>
  </main>
  <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
  <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="example-ae2b6bc0">
   <a class="self-link" href="#example-ae2b6bc0"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
    this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong> </p>
  <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> Conformance classes</span><a class="self-link" href="#w3c-conformance-classes"></a></h3>
  <p>Conformance to this specification
    is defined for three conformance classes: </p>
  <dl>
   <dt>style sheet 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
            style sheet</a>. 
   <dt>renderer 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets the semantics of a style sheet and renders
            documents that use them. 
   <dt>authoring tool 
   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a style sheet. 
  </dl>
  <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module. </p>
  <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.) </p>
  <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module. </p>
  <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> Partial implementations</span><a class="self-link" href="#w3c-partial"></a></h3>
  <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong> treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>
  <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> Implementations of Unstable and Proprietary Features</span><a class="self-link" href="#w3c-conform-future-proofing"></a></h4>
  <p>To avoid clashes with future stable CSS features,
        the CSSWG recommends <a href="http://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the implementation of <a href="http://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a href="http://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
  <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> Non-experimental implementations</span><a class="self-link" href="#w3c-testing"></a></h3>
  <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec. </p>
  <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group. </p>
  <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing list.</p>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#subtree-visibility-auto">auto</a><span>, in §3</span>
   <li><a href="#gains-containment">gains containment</a><span>, in §2</span>
   <li><a href="#subtree-visibility-hidden">hidden</a><span>, in §3</span>
   <li><a href="#off-screen">off-screen</a><span>, in §2</span>
   <li><a href="#on-screen">on-screen</a><span>, in §2</span>
   <li><a href="#skipped">skipped</a><span>, in §2</span>
   <li><a href="#subtree">subtree</a><span>, in §2</span>
   <li><a href="#propdef-subtree-visibility">subtree-visibility</a><span>, in §3</span>
   <li><a href="#subtree-visibility-visible">visible</a><span>, in §3</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-propdef-margin-left">
   <a href="https://drafts.csswg.org/css-box-4/#propdef-margin-left">https://drafts.csswg.org/css-box-4/#propdef-margin-left</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-margin-left">10. Footnotes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-contain">
   <a href="https://drafts.csswg.org/css-contain-2/#propdef-contain">https://drafts.csswg.org/css-contain-2/#propdef-contain</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-contain">1.1. Motivation &amp; Background</a>
    <li><a href="#ref-for-propdef-contain①">8. Alternatives Considered</a> <a href="#ref-for-propdef-contain②">(2)</a> <a href="#ref-for-propdef-contain③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-layout-containment">
   <a href="https://drafts.csswg.org/css-contain-2/#layout-containment">https://drafts.csswg.org/css-contain-2/#layout-containment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-layout-containment">2. Definitions</a> <a href="#ref-for-layout-containment①">(2)</a>
    <li><a href="#ref-for-layout-containment②">3. The subtree-visibility property</a>
    <li><a href="#ref-for-layout-containment③">4. Restrictions and Clarifications</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-size-containment">
   <a href="https://drafts.csswg.org/css-contain-2/#size-containment">https://drafts.csswg.org/css-contain-2/#size-containment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-size-containment">2. Definitions</a>
    <li><a href="#ref-for-size-containment①">3. The subtree-visibility property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-style-containment">
   <a href="https://drafts.csswg.org/css-contain-2/#style-containment">https://drafts.csswg.org/css-contain-2/#style-containment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-style-containment">2. Definitions</a> <a href="#ref-for-style-containment①">(2)</a>
    <li><a href="#ref-for-style-containment②">3. The subtree-visibility property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-display">
   <a href="https://drafts.csswg.org/css-display-3/#propdef-display">https://drafts.csswg.org/css-display-3/#propdef-display</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-display">7. Similarity to visibility</a>
    <li><a href="#ref-for-propdef-display①">8. Alternatives Considered</a> <a href="#ref-for-propdef-display②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-flat-tree">
   <a href="https://drafts.csswg.org/css-scoping-1/#flat-tree">https://drafts.csswg.org/css-scoping-1/#flat-tree</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-flat-tree">2. Definitions</a> <a href="#ref-for-flat-tree①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-flat-tree">
   <a href="https://drafts.csswg.org/css-scoping-1/#flat-tree">https://drafts.csswg.org/css-scoping-1/#flat-tree</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-flat-tree">2. Definitions</a> <a href="#ref-for-flat-tree①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-comb-one">
   <a href="https://drafts.csswg.org/css-values-4/#comb-one">https://drafts.csswg.org/css-values-4/#comb-one</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-comb-one">3. The subtree-visibility property</a> <a href="#ref-for-comb-one①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-will-change">
   <a href="https://drafts.csswg.org/css-will-change-1/#propdef-will-change">https://drafts.csswg.org/css-will-change-1/#propdef-will-change</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-will-change">1.1. Motivation &amp; Background</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-visibility">
   <a href="https://drafts.csswg.org/css2/#propdef-visibility">https://drafts.csswg.org/css2/#propdef-visibility</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-visibility">7. Similarity to visibility</a> <a href="#ref-for-propdef-visibility①">(2)</a> <a href="#ref-for-propdef-visibility②">(3)</a>
    <li><a href="#ref-for-propdef-visibility③">8. Alternatives Considered</a> <a href="#ref-for-propdef-visibility④">(2)</a> <a href="#ref-for-propdef-visibility⑤">(3)</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[css-box-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-margin-left">margin-left</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-contain-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-contain">contain</span>
     <li><span class="dfn-paneled" id="term-for-layout-containment">layout containment</span>
     <li><span class="dfn-paneled" id="term-for-size-containment">size containment</span>
     <li><span class="dfn-paneled" id="term-for-style-containment">style containment</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-display-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-display">display</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-scoping-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-flat-tree">flat tree</span>
     <li><span class="dfn-paneled" id="term-for-flat-tree①">flattened element tree</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-values-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-comb-one">|</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-will-change-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-will-change">will-change</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS21]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-visibility">visibility</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-box-4">[CSS-BOX-4]
   <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-4/">CSS Box Model Module Level 4</a>. 21 April 2020. WD. URL: <a href="https://www.w3.org/TR/css-box-4/">https://www.w3.org/TR/css-box-4/</a>
   <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
   <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://www.w3.org/TR/css-contain-2/">CSS Containment Module Level 2</a>. 3 June 2020. WD. URL: <a href="https://www.w3.org/TR/css-contain-2/">https://www.w3.org/TR/css-contain-2/</a>
   <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-display-3/">CSS Display Module Level 3</a>. 19 May 2020. CR. URL: <a href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
   <dt id="biblio-css-scoping-1">[CSS-SCOPING-1]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-scoping-1/">CSS Scoping Module Level 1</a>. 3 April 2014. WD. URL: <a href="https://www.w3.org/TR/css-scoping-1/">https://www.w3.org/TR/css-scoping-1/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/">CSS Values and Units Module Level 4</a>. 31 January 2019. WD. URL: <a href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
   <dt id="biblio-css-will-change-1">[CSS-WILL-CHANGE-1]
   <dd>Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-will-change-1/">CSS Will Change Module Level 1</a>. 3 December 2015. CR. URL: <a href="https://www.w3.org/TR/css-will-change-1/">https://www.w3.org/TR/css-will-change-1/</a>
   <dt id="biblio-css21">[CSS21]
   <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS21/">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. REC. URL: <a href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">Property Index</span><a class="self-link" href="#property-index"></a></h2>
  <div class="big-element-wrapper">
   <table class="index">
    <thead>
     <tr>
      <th scope="col">Name
      <th scope="col">Value
      <th scope="col">Initial
      <th scope="col">Applies to
      <th scope="col">Inh.
      <th scope="col">%ages
      <th scope="col">Canonical order
      <th scope="col">Com­puted value
    <tbody>
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-subtree-visibility" id="ref-for-propdef-subtree-visibility③②">subtree-visibility</a>
      <td>visible | auto | hidden
      <td>visible
      <td>all elements
      <td>no
      <td>n/a
      <td>per grammar
      <td>as specified
   </table>
  </div>
  <aside class="dfn-panel" data-for="subtree">
   <b><a href="#subtree">#subtree</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-subtree">1.1. Motivation &amp; Background</a> <a href="#ref-for-subtree①">(2)</a> <a href="#ref-for-subtree②">(3)</a>
    <li><a href="#ref-for-subtree③">2. Definitions</a> <a href="#ref-for-subtree④">(2)</a> <a href="#ref-for-subtree⑤">(3)</a>
    <li><a href="#ref-for-subtree⑥">3. The subtree-visibility property</a> <a href="#ref-for-subtree⑦">(2)</a> <a href="#ref-for-subtree⑧">(3)</a> <a href="#ref-for-subtree⑨">(4)</a> <a href="#ref-for-subtree①⓪">(5)</a> <a href="#ref-for-subtree①①">(6)</a> <a href="#ref-for-subtree①②">(7)</a>
    <li><a href="#ref-for-subtree①③">4. Restrictions and Clarifications</a> <a href="#ref-for-subtree①④">(2)</a> <a href="#ref-for-subtree①⑤">(3)</a>
    <li><a href="#ref-for-subtree①⑥">5. Accessibility</a>
    <li><a href="#ref-for-subtree①⑦">6. Examples</a> <a href="#ref-for-subtree①⑧">(2)</a> <a href="#ref-for-subtree①⑨">(3)</a> <a href="#ref-for-subtree②⓪">(4)</a> <a href="#ref-for-subtree②①">(5)</a>
    <li><a href="#ref-for-subtree②②">7. Similarity to visibility</a> <a href="#ref-for-subtree②③">(2)</a> <a href="#ref-for-subtree②④">(3)</a> <a href="#ref-for-subtree②⑤">(4)</a> <a href="#ref-for-subtree②⑥">(5)</a> <a href="#ref-for-subtree②⑦">(6)</a> <a href="#ref-for-subtree②⑧">(7)</a>
    <li><a href="#ref-for-subtree②⑨">8. Alternatives Considered</a> <a href="#ref-for-subtree③⓪">(2)</a> <a href="#ref-for-subtree③①">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="off-screen">
   <b><a href="#off-screen">#off-screen</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-off-screen">2. Definitions</a>
    <li><a href="#ref-for-off-screen①">3. The subtree-visibility property</a> <a href="#ref-for-off-screen②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="skipped">
   <b><a href="#skipped">#skipped</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-skipped">3. The subtree-visibility property</a> <a href="#ref-for-skipped①">(2)</a> <a href="#ref-for-skipped②">(3)</a> <a href="#ref-for-skipped③">(4)</a> <a href="#ref-for-skipped④">(5)</a> <a href="#ref-for-skipped⑤">(6)</a>
    <li><a href="#ref-for-skipped⑥">4. Restrictions and Clarifications</a> <a href="#ref-for-skipped⑦">(2)</a> <a href="#ref-for-skipped⑧">(3)</a> <a href="#ref-for-skipped⑨">(4)</a>
    <li><a href="#ref-for-skipped①⓪">5. Accessibility</a> <a href="#ref-for-skipped①①">(2)</a> <a href="#ref-for-skipped①②">(3)</a> <a href="#ref-for-skipped①③">(4)</a>
    <li><a href="#ref-for-skipped①④">6. Examples</a> <a href="#ref-for-skipped①⑤">(2)</a> <a href="#ref-for-skipped①⑥">(3)</a> <a href="#ref-for-skipped①⑦">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="gains-containment">
   <b><a href="#gains-containment">#gains-containment</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-gains-containment">3. The subtree-visibility property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="propdef-subtree-visibility">
   <b><a href="#propdef-subtree-visibility">#propdef-subtree-visibility</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-subtree-visibility">2. Definitions</a>
    <li><a href="#ref-for-propdef-subtree-visibility①">3. The subtree-visibility property</a> <a href="#ref-for-propdef-subtree-visibility②">(2)</a> <a href="#ref-for-propdef-subtree-visibility③">(3)</a> <a href="#ref-for-propdef-subtree-visibility④">(4)</a> <a href="#ref-for-propdef-subtree-visibility⑤">(5)</a>
    <li><a href="#ref-for-propdef-subtree-visibility⑥">4. Restrictions and Clarifications</a> <a href="#ref-for-propdef-subtree-visibility⑦">(2)</a>
    <li><a href="#ref-for-propdef-subtree-visibility⑧">5. Accessibility</a> <a href="#ref-for-propdef-subtree-visibility⑨">(2)</a> <a href="#ref-for-propdef-subtree-visibility①⓪">(3)</a> <a href="#ref-for-propdef-subtree-visibility①①">(4)</a> <a href="#ref-for-propdef-subtree-visibility①②">(5)</a> <a href="#ref-for-propdef-subtree-visibility①③">(6)</a> <a href="#ref-for-propdef-subtree-visibility①④">(7)</a> <a href="#ref-for-propdef-subtree-visibility①⑤">(8)</a> <a href="#ref-for-propdef-subtree-visibility①⑥">(9)</a>
    <li><a href="#ref-for-propdef-subtree-visibility①⑦">6. Examples</a> <a href="#ref-for-propdef-subtree-visibility①⑧">(2)</a> <a href="#ref-for-propdef-subtree-visibility①⑨">(3)</a>
    <li><a href="#ref-for-propdef-subtree-visibility②⓪">7. Similarity to visibility</a> <a href="#ref-for-propdef-subtree-visibility②①">(2)</a> <a href="#ref-for-propdef-subtree-visibility②②">(3)</a> <a href="#ref-for-propdef-subtree-visibility②③">(4)</a> <a href="#ref-for-propdef-subtree-visibility②④">(5)</a> <a href="#ref-for-propdef-subtree-visibility②⑤">(6)</a> <a href="#ref-for-propdef-subtree-visibility②⑥">(7)</a> <a href="#ref-for-propdef-subtree-visibility②⑦">(8)</a>
    <li><a href="#ref-for-propdef-subtree-visibility②⑧">8. Alternatives Considered</a> <a href="#ref-for-propdef-subtree-visibility②⑨">(2)</a> <a href="#ref-for-propdef-subtree-visibility③⓪">(3)</a> <a href="#ref-for-propdef-subtree-visibility③①">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="subtree-visibility-visible">
   <b><a href="#subtree-visibility-visible">#subtree-visibility-visible</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-subtree-visibility-visible">3. The subtree-visibility property</a>
    <li><a href="#ref-for-subtree-visibility-visible①">7. Similarity to visibility</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="subtree-visibility-auto">
   <b><a href="#subtree-visibility-auto">#subtree-visibility-auto</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-subtree-visibility-auto">3. The subtree-visibility property</a>
    <li><a href="#ref-for-subtree-visibility-auto①">6. Examples</a>
    <li><a href="#ref-for-subtree-visibility-auto②">7. Similarity to visibility</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="subtree-visibility-hidden">
   <b><a href="#subtree-visibility-hidden">#subtree-visibility-hidden</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-subtree-visibility-hidden">3. The subtree-visibility property</a>
    <li><a href="#ref-for-subtree-visibility-hidden①">7. Similarity to visibility</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>