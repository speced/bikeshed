<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Encrypted Media: Encryption Scheme Query</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <link href="https://wicg.github.io/encrypted-media-encryption-scheme/" rel="canonical">
<style>/* style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}
</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}
</style>
<style>/* style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    min-width: min-content;
    max-width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Encrypted Media: Encryption Scheme Query</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/encrypted-media-encryption-scheme/">https://wicg.github.io/encrypted-media-encryption-scheme/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="105371"><span class="p-name fn">Joey Parrish</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
     <dt>Participate:
     <dd><a href="https://github.com/wicg/encrypted-media-encryption-scheme">Git Repository.</a>
     <dd><a href="https://github.com/wicg/encrypted-media-encryption-scheme/issues/new">File an issue.</a>
     <dt>Version History:
     <dd><a href="https://github.com/wicg/encrypted-media-encryption-scheme/commits">https://github.com/wicg/encrypted-media-encryption-scheme/commits</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 1970 the Contributors to the Encrypted Media: Encryption Scheme Query Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This is an extension to the W3C Encrypted Media Extensions

specification, to be integrated into EME vNext. The API will allow
authors to query support for specific encryption schemes in the CDM.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#mediakeysystemmediacapability-extension"><span class="secno">1</span> <span class="content"> MediaKeySystemMediaCapability dictionary extension </span></a>
    <li><a href="#algorithm-extension"><span class="secno">2</span> <span class="content"> Algorithm Extensions </span></a>
    <li><a href="#clearkey-requirements"><span class="secno">3</span> <span class="content"> Clear Key Requirements </span></a>
    <li><a href="#application-notes"><span class="secno">4</span> <span class="content"> Application Notes </span></a>
    <li><a href="#polyfills"><span class="secno">5</span> <span class="content"> Polyfills and Backward Compatibility </span></a>
    <li>
     <a href="#security-privacy-considerations"><span class="secno">6</span> <span class="content"> Security and Privacy Considerations </span></a>
     <ol class="toc">
      <li><a href="#fingerprinting"><span class="secno">6.1</span> <span class="content"> Fingerprinting </span></a>
      <li><a href="#user-consent"><span class="secno">6.2</span> <span class="content"> User Consent </span></a>
     </ol>
    <li><a href="#examples"><span class="secno">7</span> <span class="content">Examples</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <section>
    <h2 class="heading settled" data-level="1" id="mediakeysystemmediacapability-extension"><span class="secno">1. </span><span class="content"> MediaKeySystemMediaCapability dictionary extension </span><a class="self-link" href="#mediakeysystemmediacapability-extension"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="https://w3c.github.io/encrypted-media/#dom-mediakeysystemmediacapability" id="ref-for-dom-mediakeysystemmediacapability"><c- g>MediaKeySystemMediaCapability</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="MediaKeySystemMediaCapability" data-dfn-type="dict-member" data-export data-type="DOMString? " id="dom-mediakeysystemmediacapability-encryptionscheme"><code><c- g>encryptionScheme</c-></code></dfn> = <c- b>null</c->;
};
</pre>
    <p> The <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme">encryptionScheme</a></code> field indicates an encryption scheme required by
    the application in combination with the other fields of the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability" id="ref-for-dom-mediakeysystemmediacapability①">MediaKeySystemMediaCapability</a></code> dictionary.  A value which is null or <a data-link-type="dfn">not present</a> indicates to the user agent that no specific encryption
    scheme is required by the application, and therefore any encryption scheme
    is acceptable. </p>
    <p class="note" role="note"><span class="marker">NOTE:</span> Applications that are aware of this field should always specify a
    value.  See <a href="#application-notes">§ 4 Application Notes</a> for details.</p>
    <p class="note" role="note"><span class="marker">NOTE:</span> If <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme①">encryptionScheme</a></code> is <a data-link-type="dfn">not present</a>, the <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme②">encryptionScheme</a></code> field of the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability" id="ref-for-dom-mediakeysystemmediacapability②">MediaKeySystemMediaCapability</a></code> object
    returned from <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess" id="ref-for-dom-mediakeysystemaccess">MediaKeySystemAccess</a></code>.<code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess-getconfiguration" id="ref-for-dom-mediakeysystemaccess-getconfiguration">getConfiguration()</a></code> must be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-present" id="ref-for-dfn-present">present</a> and set to the default value of null.  This enables detection
    of this feature in polyfills for user agents which do not support this
    field.  See also <a href="#polyfills">§ 5 Polyfills and Backward Compatibility</a>.</p>
    <p class="note" role="note"><span class="marker">NOTE:</span> The empty string is distinct from null or <a data-link-type="dfn">not present</a>, and so
    would be treated as an unrecognized encryption scheme.</p>
    <p>Well-known values for <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme③">encryptionScheme</a></code> are:</p>
    <ul>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="cenc">cenc</dfn>: The "cenc" mode, defined in ISO 23001-7:2016, section
               4.2a.  AES-CTR mode full sample and video NAL
               subsample encryption.</p>
     <li data-md>
      <p><dfn data-dfn-type="dfn" data-noexport id="cbcs">cbcs<a class="self-link" href="#cbcs"></a></dfn>: The "cbcs" mode, defined in ISO 23001-7:2016, section
               4.2d.  AES-CBC mode partial video NAL pattern
               encryption.  For video, the spec allows various
               encryption patterns.</p>
     <li data-md>
      <p><dfn data-dfn-type="dfn" data-noexport id="cbcs-1-9">cbcs-1-9<a class="self-link" href="#cbcs-1-9"></a></dfn>: The same as "cbcs" mode, but with a specific
                   encrypt:skip pattern of 1:9 for video, as
                   recommended in ISO 23001-7:2016, section 10.4.2.</p>
    </ul>
    <p class="note" role="note"><span class="marker">NOTE:</span> The document WebM Encryption defines WebM encryption to be equivalent
          to and compatible with the "cenc" encryption mode defined in ISO
          23001-7:2016.</p>
    <p class="issue" id="issue-7472f44c"><a class="self-link" href="#issue-7472f44c"></a> A registry should be created for encryption schemes, and the
    existing format registry should be updated with respect to encryption
    schemes. <a href="https://github.com/wicg/encrypted-media-encryption-scheme/issues/#9">[Issue ##9]</a></p>
    <p></p>
   </section>
   <section>
    <h2 class="heading settled" data-level="2" id="algorithm-extension"><span class="secno">2. </span><span class="content"> Algorithm Extensions </span><a class="self-link" href="#algorithm-extension"></a></h2>
    <p> In the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#get-supported-capabilities-for-audio-video-type" id="ref-for-get-supported-capabilities-for-audio-video-type">Get Supported Capabilities...</a></code> algorithm, the following changes
    should be made: </p>
    <ol>
     <li data-md>
      <p>In the loop that begins with "For each <var>requested media
capability</var> in <var> requested media capabilities</var>",
the user agent MUST run the following steps at the beginning of the
loop:</p>
      <ol>
       <li data-md>
        <p>Let <var>encryption scheme</var> be <var>requested media capability</var>’s <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme④">encryptionScheme</a></code> member.</p>
       <li data-md>
        <p>If <var>encryption scheme</var> is non-null and is not recognized or not
supported by the user agent, continue to the next iteration.</p>
      </ol>
     <li data-md>
      <p>In the step that says "If the user agent and <var>implementation</var> definitely
support playback of encrypted <a data-link-type="dfn" href="https://www.w3.org/TR/html51/semantics-embedded-content.html#media-data" id="ref-for-media-data">media data</a> for the combination of <var>container</var>, <var>media types</var>, <var>robustness</var> and <var>local accumulated
configuration</var> in combination with <var>restrictions</var>", the user agent MUST
replace the condition with the following condition:</p>
      <ol>
       <li data-md>
        <p>If the user agent and <var>implementation</var> definitely support playback of
encrypted <a data-link-type="dfn" href="https://www.w3.org/TR/html51/semantics-embedded-content.html#media-data" id="ref-for-media-data①">media data</a> for the combination of <var>container</var>, <var>media types</var>, <var>robustness</var>, <var>encryption scheme</var>, and <var>local
accumulated configuration</var> in combination with <var>restrictions</var>...</p>
      </ol>
    </ol>
    <p></p>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="clearkey-requirements"><span class="secno">3. </span><span class="content"> Clear Key Requirements </span><a class="self-link" href="#clearkey-requirements"></a></h2>
    <p> <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#clear-key" id="ref-for-clear-key">Clear Key</a></code> implementations MUST support the <a data-link-type="dfn" href="#cenc" id="ref-for-cenc">cenc</a> scheme at a
    minimum, to ensure interoperability for users of this common key system. </p>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="4" id="application-notes"><span class="secno">4. </span><span class="content"> Application Notes </span><a class="self-link" href="#application-notes"></a></h2>
    <p> Applications that are aware of the <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑤">encryptionScheme</a></code> field should always
    specify the encryption scheme(s) they require, since different encryption
    schemes are generally incompatible with one another.  It is unrealistic for
    an application to be accepting of "any" encryption scheme, but the default
    of null and the interpretation of null as "any" provide backward
    compatibility for unaware applications and a path to a polyfill for older
    user agents.  See also <a href="#polyfills">§ 5 Polyfills and Backward Compatibility</a>. </p>
    <p> Applications may specify multiple encryption schemes in separate <span spec-section="#dom-mediakeysystemconfiguration">configurations</span>, or in
    multiple <span spec-section="#dom-mediakeysystemmediacapability">capabilities</span> of the same configuration. </p>
    <p> The user agent only selects one configuration.  So if different encryption
    schemes are specified in separate configurations, the application will be
    given back a configuration containing only one encryption scheme. </p>
    <p> If different encryption schemes appear in the same configuration, the user
    agent’s accumulated configuration will contain the supported subset of the
    capabilities specified by the application.  The configuration returned from <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess-getconfiguration" id="ref-for-dom-mediakeysystemaccess-getconfiguration①">getConfiguration()</a></code> may therefore contain more than one encryption
    scheme. </p>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="5" id="polyfills"><span class="secno">5. </span><span class="content"> Polyfills and Backward Compatibility </span><a class="self-link" href="#polyfills"></a></h2>
    <p> Omission of <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑥">encryptionScheme</a></code> is supported only to maintain backward
    compatibility for applications that are unaware of this field.  Applications
    should always specify the encryption scheme(s) they require.  See also <a href="#application-notes">§ 4 Application Notes</a>. </p>
    <p> Applications which do not specify <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑦">encryptionScheme</a></code> will get the same
    behavior they did before this feature existed: encryption scheme will not be
    considered during <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#navigator-extension:-requestmediakeysystemaccess()" id="ref-for-navigator-extension:-requestmediakeysystemaccess()">requestMediaKeySystemAccess()</a></code>, and they will have to
    make assumptions about which encryption scheme(s) the user agent supports. </p>
    <p> User agents which implement this specification will always have an <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑧">encryptionScheme</a></code> field in the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability" id="ref-for-dom-mediakeysystemmediacapability③">MediaKeySystemMediaCapability</a></code> object
    returned from <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess" id="ref-for-dom-mediakeysystemaccess①">MediaKeySystemAccess</a></code>.<code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess-getconfiguration" id="ref-for-dom-mediakeysystemaccess-getconfiguration②">getConfiguration()</a></code>, even if the
    field is <a data-link-type="dfn">not present</a> in the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability" id="ref-for-dom-mediakeysystemmediacapability④">MediaKeySystemMediaCapability</a></code> object
    given by the application.  This enables a <a href="https://remysharp.com/2010/10/08/what-is-a-polyfill">polyfill</a> to be written which detects the lack of <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑨">encryptionScheme</a></code> to determine
    whether or not a browser supports it. </p>
    <p> If the user agent does not support the <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme①⓪">encryptionScheme</a></code> field, a
    polyfill can use assumptions about the encryption scheme(s) supported by
    various user agents to emulate this specification and reject <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability" id="ref-for-dom-mediakeysystemmediacapability⑤">MediaKeySystemMediaCapability</a></code> objects which specify (assumed)
    unsupported schemes.  Note that these are the same assumptions already made
    by existing applications.  A polyfill would allow an application to offload
    those assumptions.  The application could then always use the <code class="idl"><a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme①①">encryptionScheme</a></code> field to specify their needs using a standard API. </p>
    <p class="issue" id="issue-74d893e8"><a class="self-link" href="#issue-74d893e8"></a> Publish and link to a polyfill for this feature. <a href="https://github.com/wicg/encrypted-media-encryption-scheme/issues/#13">[Issue ##13]</a></p>
    <p> Any user agent which deprecates support for an existing encryption scheme
    could introduce backward compatibility issues for older applications which
    do not use this new feature.  Appropriate communication with developers will
    be necessary to ensure that applications are updated in a timely manner
    ahead of any such deprecation.  The need for good communication around
    deprecations is not unique to this proposal. </p>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="6" id="security-privacy-considerations"><span class="secno">6. </span><span class="content"> Security and Privacy Considerations </span><a class="self-link" href="#security-privacy-considerations"></a></h2>
    <section>
     <p> This specification does not introduce any security-sensitive information
      or APIs. </p>
     <section>
      <h3 class="heading settled" data-level="6.1" id="fingerprinting"><span class="secno">6.1. </span><span class="content"> Fingerprinting </span><a class="self-link" href="#fingerprinting"></a></h3>
      <p> This extension offers an additional field an application can use to
        determine the device’s decryption capabilities.  This does not increase
        the fingerprint surface by much, since decryption capabilities are
        generally the same for any given user agent and operating system.  This
        extension simply offers applications a way to avoid hard-coding this
        knowledge. </p>
     </section>
     <section>
      <h3 class="heading settled" data-level="6.2" id="user-consent"><span class="secno">6.2. </span><span class="content"> User Consent </span><a class="self-link" href="#user-consent"></a></h3>
      <p> Fingerprinting concerns are mitigated by the fact that this new field is
        part of the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/encrypted-media/#navigator-extension:-requestmediakeysystemaccess()" id="ref-for-navigator-extension:-requestmediakeysystemaccess()①">requestMediaKeySystemAccess()</a></code> API, which
        may require user consent.  User agents that would require user consent
        in order to access the CDM will therefore require user consent to make
        use of this new field. </p>
     </section>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="examples"><span class="secno">7. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
    <div class="example" id="example-a675a946">
     <a class="self-link" href="#example-a675a946"></a> 
<pre class="highlight"><c- a>function</c-> tryTwoEncryptionSchemesInSeparateConfigurations<c- p>(</c->keySystem<c- p>)</c-> <c- p>{</c->
  <c- c1>// Query two configurations with different encryption schemes.</c->
  <c- c1>// Only one will be chosen by the user agent.</c->

  <c- k>return</c-> navigator<c- p>.</c->requestMediaKeySystemAccess<c- p>(</c->keySystem<c- p>,</c-> <c- p>[</c->
    <c- p>{</c-> <c- c1>// A configuration which uses the "cenc" encryption scheme</c->
      videoCapabilities<c- o>:</c-> <c- p>[{</c->
        contentType<c- o>:</c-> <c- t>'video/mp4; codecs="avc1.640028"'</c-><c- p>,</c->
        encryptionScheme<c- o>:</c-> <c- t>'cenc'</c-><c- p>,</c->
      <c- p>}],</c->
      audioCapabilities<c- o>:</c-> <c- p>[{</c->
        contentType<c- o>:</c-> <c- t>'audio/mp4; codecs="mp4a.40.2"'</c-><c- p>,</c->
        encryptionScheme<c- o>:</c-> <c- t>'cenc'</c-><c- p>,</c->
      <c- p>}],</c->
      initDataTypes<c- o>:</c-> <c- p>[</c-><c- t>'keyids'</c-><c- p>],</c->
    <c- p>},</c->

    <c- p>{</c-> <c- c1>// A configuration which uses the "cbcs-1-9" encryption scheme</c->
      videoCapabilities<c- o>:</c-> <c- p>[{</c->
        contentType<c- o>:</c-> <c- t>'video/mp4; codecs="avc1.640028"'</c-><c- p>,</c->
        encryptionScheme<c- o>:</c-> <c- t>'cbcs-1-9'</c-><c- p>,</c->
      <c- p>}],</c->
      audioCapabilities<c- o>:</c-> <c- p>[{</c->
        contentType<c- o>:</c-> <c- t>'audio/mp4; codecs="mp4a.40.2"'</c-><c- p>,</c->
        encryptionScheme<c- o>:</c-> <c- t>'cbcs-1-9'</c-><c- p>,</c->
      <c- p>}],</c->
      initDataTypes<c- o>:</c-> <c- p>[</c-><c- t>'keyids'</c-><c- p>],</c->
    <c- p>},</c->
  <c- p>]);</c->
<c- p>}</c->
</pre>
    </div>
    <div class="example" id="example-636e32dd">
     <a class="self-link" href="#example-636e32dd"></a> 
<pre class="highlight"><c- a>function</c-> tryTwoEncryptionSchemesInOneConfiguration<c- p>(</c->keySystem<c- p>)</c-> <c- p>{</c->
  <c- c1>// Query one configuration with two different encryption schemes.</c->
  <c- c1>// The user agent will eliminate any capabilities object it cannot support,</c->
  <c- c1>// so the accumulated configuration may contain one encryption scheme or both.</c->

  <c- k>return</c-> navigator<c- p>.</c->requestMediaKeySystemAccess<c- p>(</c->keySystem<c- p>,</c-> <c- p>[{</c->
    videoCapabilities<c- o>:</c-> <c- p>[</c->
      <c- p>{</c-> <c- c1>// A capability object which uses the "cenc" encryption scheme</c->
        contentType<c- o>:</c-> <c- t>'video/mp4; codecs="avc1.640028"'</c-><c- p>,</c->
        encryptionScheme<c- o>:</c-> <c- t>'cenc'</c-><c- p>,</c->
      <c- p>},</c->
      <c- p>{</c-> <c- c1>// A capability object which uses the "cbcs-1-9" encryption</c->
        <c- c1>// scheme</c->
        contentType<c- o>:</c-> <c- t>'video/mp4; codecs="avc1.640028"'</c-><c- p>,</c->
        encryptionScheme<c- o>:</c-> <c- t>'cbcs-1-9'</c-><c- p>,</c->
      <c- p>},</c->
    <c- p>],</c->
    audioCapabilities<c- o>:</c-> <c- p>[</c->
      <c- p>{</c-> <c- c1>// A capability object which uses the "cenc" encryption scheme</c->
        contentType<c- o>:</c-> <c- t>'audio/mp4; codecs="mp4a.40.2"'</c-><c- p>,</c->
        encryptionScheme<c- o>:</c-> <c- t>'cenc'</c-><c- p>,</c->
      <c- p>},</c->
      <c- p>{</c-> <c- c1>// A capability object which uses the "cbcs-1-9" encryption</c->
        <c- c1>// scheme</c->
        contentType<c- o>:</c-> <c- t>'audio/mp4; codecs="mp4a.40.2"'</c-><c- p>,</c->
        encryptionScheme<c- o>:</c-> <c- t>'cbcs-1-9'</c-><c- p>,</c->
      <c- p>},</c->
    <c- p>],</c->
    initDataTypes<c- o>:</c-> <c- p>[</c-><c- t>'keyids'</c-><c- p>],</c->
  <c- p>}]);</c->
<c- p>}</c->
</pre>
    </div>
   </section>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
   <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
  </div>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#cbcs">cbcs</a><span>, in § 1</span>
   <li><a href="#cbcs-1-9">cbcs-1-9</a><span>, in § 1</span>
   <li><a href="#cenc">cenc</a><span>, in § 1</span>
   <li><a href="#dom-mediakeysystemmediacapability-encryptionscheme">encryptionScheme</a><span>, in § 1</span>
  </ul>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['d7bda972c06ede0511fd4784e269a89d'] = {'external': 1, 'id': 'd7bda972c06ede0511fd4784e269a89d', 'url': 'https://www.w3.org/TR/encrypted-media/#clear-key', 'dfnText': 'Clear Key', 'items': [{'ids': [{'linkID': 'ref-for-clear-key'}], 'text': '3. \n    Clear Key Requirements\n  '}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['01851e593d470ce20f0669a53cf67c35'] = {'external': 1, 'id': '01851e593d470ce20f0669a53cf67c35', 'url': 'https://www.w3.org/TR/encrypted-media/#get-supported-capabilities-for-audio-video-type', 'dfnText': 'Get Supported Capabilities...', 'items': [{'ids': [{'linkID': 'ref-for-get-supported-capabilities-for-audio-video-type'}], 'text': '2. \n    Algorithm Extensions\n  '}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['c8d3849b9685519cbad8f40721927cb5'] = {'external': 1, 'id': 'c8d3849b9685519cbad8f40721927cb5', 'url': 'https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess', 'dfnText': 'MediaKeySystemAccess', 'items': [{'ids': [{'linkID': 'ref-for-dom-mediakeysystemaccess'}], 'text': '1. \n    MediaKeySystemMediaCapability dictionary extension\n  '}, {'ids': [{'linkID': 'ref-for-dom-mediakeysystemaccess①'}], 'text': '5. \n    Polyfills and Backward Compatibility\n  '}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['a56ba464f7dac4d4ce9996901fec5ec0'] = {'external': 1, 'id': 'a56ba464f7dac4d4ce9996901fec5ec0', 'url': 'https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability', 'dfnText': 'MediaKeySystemMediaCapability', 'items': [{'ids': [{'linkID': 'ref-for-dom-mediakeysystemmediacapability①'}, {'linkID': 'ref-for-dom-mediakeysystemmediacapability②'}], 'text': '1. \n    MediaKeySystemMediaCapability dictionary extension\n  '}, {'ids': [{'linkID': 'ref-for-dom-mediakeysystemmediacapability③'}, {'linkID': 'ref-for-dom-mediakeysystemmediacapability④'}, {'linkID': 'ref-for-dom-mediakeysystemmediacapability⑤'}], 'text': '5. \n    Polyfills and Backward Compatibility\n  '}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['cab56edf3cbea3e293aae153d63fe284'] = {'external': 1, 'id': 'cab56edf3cbea3e293aae153d63fe284', 'url': 'https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess-getconfiguration', 'dfnText': 'getConfiguration()', 'items': [{'ids': [{'linkID': 'ref-for-dom-mediakeysystemaccess-getconfiguration'}], 'text': '1. \n    MediaKeySystemMediaCapability dictionary extension\n  '}, {'ids': [{'linkID': 'ref-for-dom-mediakeysystemaccess-getconfiguration①'}], 'text': '4. \n    Application Notes\n  '}, {'ids': [{'linkID': 'ref-for-dom-mediakeysystemaccess-getconfiguration②'}], 'text': '5. \n    Polyfills and Backward Compatibility\n  '}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['bbd9c171d9ff69f7043668529fe49929'] = {'external': 1, 'id': 'bbd9c171d9ff69f7043668529fe49929', 'url': 'https://www.w3.org/TR/encrypted-media/#navigator-extension:-requestmediakeysystemaccess()', 'dfnText': 'requestMediaKeySystemAccess()', 'items': [{'ids': [{'linkID': 'ref-for-navigator-extension:-requestmediakeysystemaccess()'}], 'text': '5. \n    Polyfills and Backward Compatibility\n  '}, {'ids': [{'linkID': 'ref-for-navigator-extension:-requestmediakeysystemaccess()①'}], 'text': '6.2. \n        User Consent\n      '}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['a108de702f03f6fbc82b99dcdb08c162'] = {'external': 1, 'id': 'a108de702f03f6fbc82b99dcdb08c162', 'url': 'https://www.w3.org/TR/html51/semantics-embedded-content.html#media-data', 'dfnText': 'media data', 'items': [{'ids': [{'linkID': 'ref-for-media-data'}, {'linkID': 'ref-for-media-data①'}], 'text': '2. \n    Algorithm Extensions\n  '}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['d0f238a61de9310f1738a214749fab18'] = {'external': 1, 'id': 'd0f238a61de9310f1738a214749fab18', 'url': 'https://webidl.spec.whatwg.org/#idl-DOMString', 'dfnText': 'DOMString', 'items': [{'ids': [{'linkID': 'ref-for-idl-DOMString'}], 'text': '1. \n    MediaKeySystemMediaCapability dictionary extension\n  '}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['59c3f822dee2c9857f146809fb1e9887'] = {'external': 1, 'id': '59c3f822dee2c9857f146809fb1e9887', 'url': 'https://heycam.github.io/webidl/#dfn-present', 'dfnText': 'present', 'items': [{'ids': [{'linkID': 'ref-for-dfn-present'}], 'text': '1. \n    MediaKeySystemMediaCapability dictionary extension\n  '}]};
</script>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[ENCRYPTED-MEDIA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d7bda972c06ede0511fd4784e269a89d">Clear Key</span>
     <li><span class="dfn-paneled" id="01851e593d470ce20f0669a53cf67c35">Get Supported Capabilities...</span>
     <li><span class="dfn-paneled" id="c8d3849b9685519cbad8f40721927cb5">MediaKeySystemAccess</span>
     <li><span class="dfn-paneled" id="a56ba464f7dac4d4ce9996901fec5ec0">MediaKeySystemMediaCapability</span>
     <li><span class="dfn-paneled" id="cab56edf3cbea3e293aae153d63fe284">getConfiguration()</span>
     <li><span class="dfn-paneled" id="bbd9c171d9ff69f7043668529fe49929">requestMediaKeySystemAccess()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML51]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a108de702f03f6fbc82b99dcdb08c162">media data</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d0f238a61de9310f1738a214749fab18">DOMString</span>
     <li><span class="dfn-paneled" id="59c3f822dee2c9857f146809fb1e9887">present</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-encrypted-media">[ENCRYPTED-MEDIA]
   <dd>David Dorwin; et al. <a href="https://w3c.github.io/encrypted-media/"><cite>Encrypted Media Extensions</cite></a>. URL: <a href="https://w3c.github.io/encrypted-media/">https://w3c.github.io/encrypted-media/</a>
   <dt id="biblio-html51">[HTML51]
   <dd>Steve Faulkner; et al. <a href="https://rawgit.com/w3c/html/html5.1-2/single-page.html"><cite>HTML 5.1 2nd Edition</cite></a>. URL: <a href="https://rawgit.com/w3c/html/html5.1-2/single-page.html">https://rawgit.com/w3c/html/html5.1-2/single-page.html</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="https://w3c.github.io/encrypted-media/#dom-mediakeysystemmediacapability"><c- g>MediaKeySystemMediaCapability</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>? <a data-default="null" data-type="DOMString? " href="#dom-mediakeysystemmediacapability-encryptionscheme"><code><c- g>encryptionScheme</c-></code></a> = <c- b>null</c->;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> A registry should be created for encryption schemes, and the
    existing format registry should be updated with respect to encryption
    schemes. <a href="https://github.com/wicg/encrypted-media-encryption-scheme/issues/#9">[Issue ##9]</a> <a class="issue-return" href="#issue-7472f44c" title="Jump to section">↵</a></div>
   <div class="issue"> Publish and link to a polyfill for this feature. <a href="https://github.com/wicg/encrypted-media-encryption-scheme/issues/#13">[Issue ##13]</a> <a class="issue-return" href="#issue-74d893e8" title="Jump to section">↵</a></div>
  </div>
<script>
window.dfnsJson ??= {};
window.dfnsJson['dom-mediakeysystemmediacapability-encryptionscheme'] = {'id': 'dom-mediakeysystemmediacapability-encryptionscheme', 'url': '#dom-mediakeysystemmediacapability-encryptionscheme', 'dfnText': 'encryptionScheme', 'items': [{'ids': [{'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme'}, {'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme①'}, {'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme②'}, {'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme③'}], 'text': '1. \n    MediaKeySystemMediaCapability dictionary extension\n  '}, {'ids': [{'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme④'}], 'text': '2. \n    Algorithm Extensions\n  '}, {'ids': [{'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑤'}], 'text': '4. \n    Application Notes\n  '}, {'ids': [{'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑥'}, {'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑦'}, {'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑧'}, {'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme⑨'}, {'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme①⓪'}, {'refID': 'ref-for-dom-mediakeysystemmediacapability-encryptionscheme①①'}], 'text': '5. \n    Polyfills and Backward Compatibility\n  '}]};
window.dfnsJson['cenc'] = {'id': 'cenc', 'url': '#cenc', 'dfnText': 'cenc', 'items': [{'ids': [{'refID': 'ref-for-cenc'}], 'text': '3. \n    Clear Key Requirements\n  '}]};
</script>
<script>/* script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    function genDfnPanel([key, value]) {
        const {id, url, dfnText, items, external}  = value;
        const itemsHtml = items.map((item) => {
            const idsHtml = item.ids.map((id, index) => {
                const href = `#${external ? id.linkID : id.refID}`;
                const anchorText = (index == 0) ? item.text : `(${index + 1})`;
                return /* html */`
                    <li><a href="${href}">${anchorText}</a></li>`;
            });
            return idsHtml.join('');
        });

        return /* html */`
            <aside
                class="dfn-panel"
                id="infopanel-for-${id}"
                data-for="${id}"
                aria-labelledby="infopaneltitle-for-${id}">
                <span id="infopaneltitle-for-${id}" style="display:none">
                    Info about the '${dfnText}'
                    ${external ? 'external': ''} reference.
                </span>
                <a href=${url}>${url}</a>
                <b>Referenced in:</b>
                <ul>${itemsHtml.join('')}</ul>
            </aside>`;
    }

    function genAllDfnPanels() {
        const html = Object.entries(dfnsJson).map(genDfnPanel).join('\n');
        const div = document.createElement('div');
        div.innerHTML = html;
        document.body.appendChild(div);
    }

    genAllDfnPanels();

    function queryAll(sel) {
        return [].slice.call(document.querySelectorAll(sel));
    }

    // Add popup behavior to all dfns to show the corresponding dfn-panel.
    var dfns = document.querySelectorAll('.dfn-paneled');
    for (let dfn of dfns) { insertDfnPopupAction(dfn); }

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });

    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn) {
        // Find dfn panel
        const dfnPanel = document.querySelector(`.dfn-panel[data-for='${dfn.id}']`);
        if (dfnPanel) {
            const panelWrapper = document.createElement('span');
            panelWrapper.appendChild(dfnPanel);
            panelWrapper.style.position = "relative";
            panelWrapper.style.height = "0px";
            dfn.insertAdjacentElement("afterend", panelWrapper);
            dfn.setAttribute('role', 'button');
            dfn.setAttribute('aria-expanded', 'false')
            dfn.tabIndex = 0;
            dfn.classList.add('has-dfn-panel');
            dfn.addEventListener('click', (event) => {
                showDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
            });
            dfn.addEventListener('keypress', (event) => {
                const kc = event.keyCode;
                // 32->Space, 13->Enter
                if(kc == 32 || kc == 13) {
                    toggleDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                    event.preventDefault();
                }
            });

            dfnPanel.addEventListener('click', (event) => {
                if (event.target.nodeName != 'A') {
                    pinDfnPanel(dfnPanel);
                }
                event.stopPropagation();
            });

            dfnPanel.addEventListener('keydown', (event) => {
                if(event.keyCode == 27) { // Escape key
                    hideDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                    event.preventDefault();
                }
            })

        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + dfn.id + "']");
        }
    }
}
</script>