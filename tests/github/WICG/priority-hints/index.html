<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Priority Hints</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <link href="https://wicg.github.io/priority-hints" rel="canonical">
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Priority Hints</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/priority-hints">https://wicg.github.io/priority-hints</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://twitter.com/patmeenan">Patrick Meenan</a> (<span class="p-org org">Google Inc.</span>) <a class="u-email email" href="mailto:patmeenan@gmail.com">patmeenan@gmail.com</a>
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://addyosmani.com/">Addy Osmani</a> (<span class="p-org org">Google Inc.</span>) <a class="u-email email" href="mailto:addyosmani@gmail.com">addyosmani@gmail.com</a>
     <dt class="editor">Former Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="58673"><a class="p-name fn u-url url" href="https://blog.yoav.ws">Yoav Weiss</a> (<span class="p-org org">Google Inc.</span>) <a class="u-email email" href="mailto:yoav@yoav.ws">yoav@yoav.ws</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 1970 the Contributors to the Priority Hints Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Priority Hints exposes a mechanism for developers to signal a relative priority for browsers to consider when fetching resources.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#solution"><span class="secno">2</span> <span class="content">Solution</span></a>
    <li>
     <a href="#proposal"><span class="secno">3</span> <span class="content">Proposal</span></a>
     <ol class="toc">
      <li><a href="#definitions"><span class="secno">3.1</span> <span class="content">Definitions</span></a>
      <li><a href="#fetch-integration"><span class="secno">3.2</span> <span class="content">Fetch Integration</span></a>
      <li>
       <a href="#html-integration"><span class="secno">3.3</span> <span class="content">HTML Integration</span></a>
       <ol class="toc">
        <li><a href="#img"><span class="secno">3.3.1</span> <span class="content">img</span></a>
        <li><a href="#picture"><span class="secno">3.3.2</span> <span class="content">picture</span></a>
        <li><a href="#link"><span class="secno">3.3.3</span> <span class="content">link</span></a>
        <li><a href="#script"><span class="secno">3.3.4</span> <span class="content">script</span></a>
        <li><a href="#iframe"><span class="secno">3.3.5</span> <span class="content">iframe</span></a>
       </ol>
     </ol>
    <li><a href="#effects-of-priority-hints"><span class="secno">4</span> <span class="content">Effects of Priority Hints</span></a>
    <li><a href="#examples"><span class="secno">5</span> <span class="content">Examples</span></a>
    <li><a href="#adoptionpath"><span class="secno">6</span> <span class="content">Adoption path</span></a>
    <li><a href="#outofscope"><span class="secno">7</span> <span class="content">Out of scope</span></a>
    <li>
     <a href="#use-cases"><span class="secno">8</span> <span class="content">Use Cases</span></a>
     <ol class="toc">
      <li><a href="#communicateresourcefetchprioritytothebrowser"><span class="secno">8.1</span> <span class="content">Communicate resource fetch priority to the browser</span></a>
      <li><a href="#signalaresourceasnoncritical"><span class="secno">8.2</span> <span class="content">Signal a resource as non-critical</span></a>
      <li><a href="#avoidbandwidthcontentioninmultipleoriginscenarios"><span class="secno">8.3</span> <span class="content">Avoid bandwidth contention in multiple origin scenarios</span></a>
      <li><a href="#provideprioritysignalsformarkupbasedresources"><span class="secno">8.4</span> <span class="content">Provide priority signals for markup-based resources</span></a>
      <li><a href="#provideprioritysignalsfordynamicallyloadedresources"><span class="secno">8.5</span> <span class="content">Provide priority signals for dynamically loaded resources</span></a>
     </ol>
    <li><a href="#safe-usage"><span class="secno">9</span> <span class="content">Safe usage</span></a>
    <li>
     <a href="#security_privacy"><span class="secno">10</span> <span class="content">Security and Privacy Considerations</span></a>
     <ol class="toc">
      <li><a href="#fingerprintability"><span class="secno">10.1</span> <span class="content">Fingerprintability</span></a>
      <li><a href="#ecosystem"><span class="secno">10.2</span> <span class="content">Negative ecosystem side-effects</span></a>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <section>
    <p> This specification describes a browser API enabling developers to signal the priority of each resource they need to download.
      It introduces the <a href="#solution">fetchpriority</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage#enumerated-attribute" id="ref-for-enumerated-attribute">attribute</a> that may be used with <code class="highlight">HTML</code> elements such as <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element">img</a></code>, <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element">link</a></code>, <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script">script</a></code> and <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code> and the <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-requestinit-priority" id="ref-for-dom-requestinit-priority">priority</a></code> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage#enumerated-attribute" id="ref-for-enumerated-attribute①">attribute</a> on the <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request" id="ref-for-request">RequestInit</a></code> of <a href="https://fetch.spec.whatwg.org/#fetch-method">fetch</a>. </p>
   </section>
   <section id="sotd">
    <p> This is an unofficial proposal. </p>
   </section>
   <section>
    <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
    <p> <em>This section is non-normative.</em> </p>
    <p>The browser’s resource loading process is a complex one. Browsers discover needed resources and download them according
      to their heuristic priority. Browsers might also use this heuristic resource priority to delay sending certain requests
      in order to avoid bandwidth contention of these resources with more critical ones.</p>
    <p>Browsers mostly determine a request’s priority based on the
      request’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org#concept-request-destination" id="ref-for-concept-request-destination">destination</a>, and location in the containing document if applicable.</p>
    <p>This document details use cases and modifications to <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">Fetch</a> and <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">HTML</a> markup that provide developers
      control to indicate a resource’s relative priority to the browser, enabling the browser to act on those indications to influence
      the request’s overall priority in ways described in the <a href="#effects-of-priority-hints">Effects of Priority Hints</a> section. </p>
    <p>It is important to note that changing the priority of one resource usually comes at the cost of another resource so
    hints should be applied sparingly. Marking everything in the document as high-priority will likely make for a worse user experience
    but correctly tagging a few resources that the browser would otherwise not load optimally can have a huge benefit. </p>
   </section>
   <section>
    <h2 class="heading settled" data-level="2" id="solution"><span class="secno">2. </span><span class="content">Solution</span><a class="self-link" href="#solution"></a></h2>
    <p>The <code class="highlight">fetchpriority</code> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage#enumerated-attribute" id="ref-for-enumerated-attribute②">enumerated attribute</a> may be used with resource-requesting elements including <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element①">link</a></code>, <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element①">img</a></code>, <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script①">script</a></code> and <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code>. This keyword hints to the browser the relative fetch priority
      a developer intends for a resource to have.</p>
    <ul>
     <li>
      The <code class="highlight">fetchpriority</code> attribute has three states: 
      <ul>
       <li> <code class="highlight">high</code> - The developer considers the resource as being
            important relative to the default priority for resources of the
            same type. 
       <li> <code class="highlight">low</code> - The developer considers the resource as being
            less important relative to the default priority for resources of
            the same type. 
       <li> <code class="highlight">auto</code> - The developer does not indicate a preference and defers to
            the browser’s default heuristics. This also serves as the attribute’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage#invalid-value-default" id="ref-for-invalid-value-default">invalid value default</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage#missing-value-default" id="ref-for-missing-value-default">missing value default</a>. 
      </ul>
    </ul>
    <p>With this attribute, the browser should make an effort to respect the developer’s preference for the priority of a
      resource when fetching it. Note that this is intentionally weak language, allowing for a browser to apply its own preferences
      for resource priority or heuristics if deemed important. See the below section for more information. </p>
    <p></p>
    <div class="note" role="note">
     <p>Priority Hints complement existing browser loading primitives such as preload. Preload is a mandatory fetch for a resource
          that is necessary for the current navigation. Priority Hints can hint that a resource’s priority should be lower or higher than
          its default, and can also be used to provide more granular prioritization to preloads.</p>
    </div>
    <p></p>
    <p>This is how we conceptually think about different resource types under the hood in browsers today. It may translate well
      to user-space where different types of content share similar properties.</p>
    <h2 class="heading settled" data-level="3" id="proposal"><span class="secno">3. </span><span class="content">Proposal</span><a class="self-link" href="#proposal"></a></h2>
    <h3 class="heading settled" data-level="3.1" id="definitions"><span class="secno">3.1. </span><span class="content">Definitions</span><a class="self-link" href="#definitions"></a></h3>
     <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="fetchpriority-enum">FetchPriority enum</dfn> 
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="idl-code" data-dfn-type="enum" data-export id="enumdef-fetchpriority"><code class="highlight"><c- g>FetchPriority</c-></code><a class="self-link" href="#enumdef-fetchpriority"></a></dfn> { <dfn class="idl-code" data-dfn-for="FetchPriority" data-dfn-type="enum-value" data-export id="dom-fetchpriority-high"><code class="highlight"><c- s><c- u>"high"</c-></c-></code><a class="self-link" href="#dom-fetchpriority-high"></a></dfn>, <dfn class="idl-code" data-dfn-for="FetchPriority" data-dfn-type="enum-value" data-export id="dom-fetchpriority-low"><code class="highlight"><c- s><c- u>"low"</c-></c-></code><a class="self-link" href="#dom-fetchpriority-low"></a></dfn>, <dfn class="idl-code" data-dfn-for="FetchPriority" data-dfn-type="enum-value" data-export id="dom-fetchpriority-auto"><code class="highlight"><c- s><c- u>"auto"</c-></c-></code><a class="self-link" href="#dom-fetchpriority-auto"></a></dfn> };
</pre>
    <table>
     <thead>
      <tr>
       <th>Value 
       <th>Description 
     <tbody>
      <tr>
       <td><dfn data-dfn-type="dfn" data-export id="fetchpriority-enum-high">high<a class="self-link" href="#fetchpriority-enum-high"></a></dfn> 
       <td>Signal a high-priority fetch relative to the default priority for resources of the same type. 
      <tr>
       <td><dfn data-dfn-type="dfn" data-export id="fetchpriority-enum-low">low<a class="self-link" href="#fetchpriority-enum-low"></a></dfn> 
       <td>Signal a low-priority fetch relative to the default priority for resources of the same type. 
      <tr>
       <td><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="fetchpriority-enum-auto">auto</dfn> 
       <td>Signal automatic determination of fetch priority. 
    </table>
    <h3 class="heading settled" data-level="3.2" id="fetch-integration"><span class="secno">3.2. </span><span class="content">Fetch Integration</span><a class="self-link" href="#fetch-integration"></a></h3>
    <p>The <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-requestinit-priority" id="ref-for-dom-requestinit-priority①">priority</a></code> attribute is documented in the <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">Fetch</a> specification.</p>
    <h3 class="heading settled" data-level="3.3" id="html-integration"><span class="secno">3.3. </span><span class="content">HTML Integration</span><a class="self-link" href="#html-integration"></a></h3>
     <em>This section will be removed once the <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">HTML</a> specification has been modified.</em> 
    <p>For the supported elements (<code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element②">img</a></code>, <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element②">link</a></code>, <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script②">script</a></code> and <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element②">iframe</a></code>) the integration
    with HTML is to add an <code class="highlight" data-x>fetchpriority</code> attribute to the relevant element
    specification and pass the value through to the underlying fetch priority for the resource
    referenced by the given element.</p>
    <p>The fetchpriority value is plumbed through to the fetch for the referenced resource with
    no downstream impact on later behaviors of the given element (i.e. later fetches initiated by
    a frame or script are not impacted nor is the scheduling of execution or prioritization of
    tasks affected).</p>
    <ol>
     <li>
      <p>We extend the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#fetching-resources" id="ref-for-fetching-resources">Fetching resources</a> process with an additional section:</p>
      <p>FetchPriority attributes</p>
      <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="fetchpriority-attribute">fetchpriority attribute</dfn> is an <span>enumerated attribute</span>.  Each <a data-link-type="dfn" href="#fetchpriority-enum" id="ref-for-fetchpriority-enum">FetchPriority enum</a> is a keyword for this attribute, mapping
        to a state of the same name.</p>
      <p>The attribute’s <i data-x="missing value default">missing value default</i> and <i data-x="invalid value default">invalid value default</i> are both the <a data-link-type="dfn" href="#fetchpriority-enum-auto" id="ref-for-fetchpriority-enum-auto">auto</a> state.</p>
      <p>The impact of these states on the processing model of various <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch">fetches</a> is defined
      in more detail throughout this specification, in <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">Fetch</a>, and in <a data-link-type="biblio" href="#biblio-priority-hints" title="Priority Hints">Priority Hints</a>.</p>
    </ol>
    <h4 class="heading settled" data-level="3.3.1" id="img"><span class="secno">3.3.1. </span><span class="content">img</span><a class="self-link" href="#img"></a></h4>
    <ol>
     <li>
      <p>We add to the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element③">img</a></code> element content attributes:</p>
      <p><code class="highlight" data-x>fetchpriority</code> - FetchPriority for <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch①">fetches</a> initiated by
          the element. </p>
     <li>
      We extend the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element④">img</a></code> element DOM interface as follows: 
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement" id="ref-for-htmlimageelement"><c- g>HTMLImageElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-htmlimageelement-fetchpriority" id="ref-for-dom-htmlimageelement-fetchpriority"><c- g>fetchPriority</c-></a>;
};
</pre>
     <li>
      <p>We add to the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element⑤">img</a></code> element content attribute descriptions:</p>
      <p>The <dfn data-dfn-for="img" data-dfn-type="element-attr" data-export data-lt="fetchpriority" id="element-attrdef-img-fetchpriority"><code class="highlight" data-x="attr-img-fetchpriority">fetchpriority</code> <a class="self-link" href="#element-attrdef-img-fetchpriority"></a></dfn> attribute is a <a data-link-type="dfn" href="#fetchpriority-attribute" id="ref-for-fetchpriority-attribute">fetchpriority attribute</a>. Its purpose is to set the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority">priority</a> used when <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch②">fetching</a> the image.</p>
      <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLImageElement" data-dfn-type="attribute" data-export id="dom-htmlimageelement-fetchpriority"><code class="highlight" data-x="dom-img-fetchpriority">fetchPriority</code></dfn> IDL attribute must <span>reflect</span> the <code class="highlight" data-x="attr-img-fetchpriority">fetchpriority</code> content attribute, <span>limited to only known values</span>.</p>
     <li>
      <p>We add a step to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/images.html#update-the-image-data" id="ref-for-update-the-image-data">Updating the image data</a> before fetching the
          image:</p>
      <p>Set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority①">priority</a> to the current state of the element’s <code class="highlight" data-x="attr-img-fetchpriority">fetchpriority</code> attribute.</p>
     <li>
      <p>We add a step to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/images.html#reacting-to-environment-changes" id="ref-for-reacting-to-environment-changes">Reacting to environment changes</a> when setting the image request’s
          image data, before the request is fetched:</p>
      <p>Set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority②">priority</a> to the current state of the element’s <code class="highlight" data-x="attr-img-fetchpriority">fetchpriority</code> attribute.</p>
     <li>We modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/indices.html#elements-3" id="ref-for-elements-3">List of elements</a> to include the <span data-x="attr-img-fetchpriority">fetchpriority</span> attribute on the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element⑥">img</a></code> element. 
    </ol>
    <h4 class="heading settled" data-level="3.3.2" id="picture"><span class="secno">3.3.2. </span><span class="content">picture</span><a class="self-link" href="#picture"></a></h4>
    <p>In the case of the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-picture-element" id="ref-for-the-picture-element">picture</a></code> element, no changes are necessary. The fetchpriority is applied
    to the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element⑦">img</a></code> element within the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-picture-element" id="ref-for-the-picture-element①">picture</a></code> and applied to whatever <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element" id="ref-for-the-source-element">source</a></code> ends up being
    used. </p>
    <h4 class="heading settled" data-level="3.3.3" id="link"><span class="secno">3.3.3. </span><span class="content">link</span><a class="self-link" href="#link"></a></h4>
    <ol>
     <li>
      <p>We add to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element③">link element</a> content attributes:</p>
      <p><code class="highlight" data-x>fetchpriority</code> - FetchPriority for <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch③">fetches</a> initiated by the
          element. </p>
     <li>
      <p>We add to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element④">link element</a> content attribute descriptions:</p>
      <p>The <dfn data-dfn-for="link" data-dfn-type="element-attr" data-export data-lt="fetchpriority" id="element-attrdef-link-fetchpriority"><code class="highlight" data-x="attr-link-fetchpriority">fetchpriority</code> <a class="self-link" href="#element-attrdef-link-fetchpriority"></a></dfn> attribute is a <a data-link-type="dfn" href="#fetchpriority-attribute" id="ref-for-fetchpriority-attribute①">fetchpriority attribute</a>. It is intended for use with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#external-resource-link" id="ref-for-external-resource-link">external resource links</a>, where it helps set the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority③">priority</a> used when <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#fetch-and-process-the-linked-resource" id="ref-for-fetch-and-process-the-linked-resource">fetching and processing the linked resource</a>.</p>
     <li>
      We extend the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element⑤">link</a></code> element as follows: 
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement" id="ref-for-htmllinkelement"><c- g>HTMLLinkElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions①"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="HTMLLinkElement" data-dfn-type="attribute" data-export data-type="DOMString" id="dom-htmllinkelement-fetchpriority"><code class="highlight"><c- g>fetchPriority</c-></code><a class="self-link" href="#dom-htmllinkelement-fetchpriority"></a></dfn>;
};
</pre>
     <li>
      <p>We extend <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#create-a-link-request" id="ref-for-create-a-link-request">create a link request</a> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#fetching-and-processing-a-resource-from-a-link-element" id="ref-for-fetching-and-processing-a-resource-from-a-link-element">Fetching and processing a resource
        from a link element</a> by adding a step before returning the request:</p>
      <p>Set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority④">priority</a> to the current state of <var> el</var>’s <code class="highlight" data-x="attr-link-fetchpriority">fetchpriority</code> content attribute.</p>
     <li>
      <p>We extend the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#fetch-and-process-the-linked-resource" id="ref-for-fetch-and-process-the-linked-resource①">fetch and process the linked resource</a> algorithm of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#link-type-modulepreload" id="ref-for-link-type-modulepreload">modulepreload</a> links by adding a step before setting the render-blocking state:</p>
      <p>Let <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority⑤">priority</a> be the current state of the element’s <code class="highlight" data-x="attr-link-fetchpriority">fetchpriority</code> attribute.</p>
     <li>We modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/indices.html#elements-3" id="ref-for-elements-3①">List of elements</a> to include the <span data-x="attr-link-fetchpriority">fetchpriority</span> attribute on the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element⑥">link</a></code> element. 
    </ol>
    <h4 class="heading settled" data-level="3.3.4" id="script"><span class="secno">3.3.4. </span><span class="content">script</span><a class="self-link" href="#script"></a></h4>
    <ol>
     <li>
      <p>We add to the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script③">script</a></code> element content attributes:</p>
      <p><code class="highlight" data-x>fetchpriority</code> - FetchPriority for <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch④">fetches</a> initiated by the
          element. </p>
     <li>
      We extend the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script④">script</a></code> element DOM interface as follows: 
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement"><c- g>HTMLScriptElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions②"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-htmlscriptelement-fetchpriority" id="ref-for-dom-htmlscriptelement-fetchpriority"><c- g>fetchPriority</c-></a>;
};
</pre>
     <li>
      <p>We add to the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script⑤">script</a></code> element content attribute descriptions:</p>
      <ol>
       <li>The <dfn data-dfn-for="script" data-dfn-type="element-attr" data-export data-lt="fetchpriority" id="element-attrdef-script-fetchpriority"><code class="highlight" data-x="attr-script-fetchpriority">fetchpriority </code><a class="self-link" href="#element-attrdef-script-fetchpriority"></a></dfn> attribute is a <a data-link-type="dfn" href="#fetchpriority-attribute" id="ref-for-fetchpriority-attribute②">fetchpriority attribute</a>. Its purpose is to set the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority⑥">priority</a> used when <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch⑤">fetching</a> the script. 
       <li>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLScriptElement" data-dfn-type="attribute" data-export id="dom-htmlscriptelement-fetchpriority"><code class="highlight" data-x="dom-script-fetchpriority">fetchPriority</code></dfn> IDL attribute must <span>reflect</span> the <code class="highlight" data-x="attr-script-fetchpriority">fetchpriority</code> content attribute, <span>limited to only known values</span>. 
       <li>We add <code class="highlight" data-x="attr-script-fetchpriority">fetchpriority</code> to the list of
            attributes that have no <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#:~:text=dynamically%20has%20no%20direct%20effect" id="ref-for-:~:text=dynamically%20has%20no%20direct%20effect">direct effect when changed dynamically</a> (For browsers that
            don’t support text linking, search for "dynamically has no direct effect"). 
      </ol>
     <li>We modify the list of attributes not to be specified when used in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#the-script-element:data-block-2" id="ref-for-the-script-element:data-block-2">data blocks</a> to
        include the <code class="highlight" data-x="attr-script-fetchpriority">fetchpriority</code> attribute. 
     <li>
      <p>We extend the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#script-fetch-options" id="ref-for-script-fetch-options">Script fetch options</a> struct:</p>
      <p></p>
      <p><span data-x="concept-script-fetch-options-fetchpriority">fetchpriority</span> - The <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority⑦">priority</a> for the initial <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch⑥">fetch</a>.</p>
     <li>We extend <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#default-classic-script-fetch-options" id="ref-for-default-classic-script-fetch-options">default classic script fetch options</a> to include "<code class="highlight">auto</code>"
        as the default value for <code class="highlight" data-x="concept-script-fetch-options-fetchpriority"> fetchpriority </code>. 
     <li>We extend <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#set-up-the-classic-script-request" id="ref-for-set-up-the-classic-script-request">set up the classic script request</a> to set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority⑧">priority</a> to <var>option</var>’s <code class="highlight" data-x="concept-script-fetch-options-fetchpriority">fetchpriority</code> 
     <li>
      <p>We insert a step before step 24 of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#prepare-a-script" id="ref-for-prepare-a-script">prepare a script</a>:</p>
      <p>Let <var>fetchpriority</var> be the current state of the element’s <code class="highlight" data-x="attr-script-fetchpriority">fetchpriority</code> attribute.</p>
     <li>
      <p>We modify step 24 of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#prepare-a-script" id="ref-for-prepare-a-script①">prepare a script</a> to include:</p>
      <p><code class="highlight" data-x="concept-script-fetch-options-fetchpriority">fetchpriority</code> is <var>fetchpriority</var>.</p>
     <li>We extend <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#set-up-the-module-script-request" id="ref-for-set-up-the-module-script-request">set up the module script request</a> to set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority⑨">priority</a> to <var>option</var>’s <code class="highlight" data-x="concept-script-fetch-options-fetchpriority">fetchpriority</code> 
     <li>We modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/indices.html#elements-3" id="ref-for-elements-3②">List of elements</a> to include the <span data-x="attr-script-fetchpriority">fetchpriority</span> attribute on the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script⑥">script</a></code> element. 
    </ol>
    <h4 class="heading settled" data-level="3.3.5" id="iframe"><span class="secno">3.3.5. </span><span class="content">iframe</span><a class="self-link" href="#iframe"></a></h4>
    <ol>
     <li>
      <p>We add to the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element③">iframe</a></code> element content attributes:</p>
      <p><code class="highlight" data-x>fetchpriority</code> - FetchPriority for <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch⑦">fetches</a> initiated by the
          element. </p>
     <li>
      We extend the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element④">iframe</a></code> element DOM interface as follows: 
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement" id="ref-for-htmliframeelement"><c- g>HTMLIFrameElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions③"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-htmliframeelement-fetchpriority" id="ref-for-dom-htmliframeelement-fetchpriority"><c- g>fetchPriority</c-></a>;
};
</pre>
     <li>
      <p>We add to the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑤">iframe</a></code> content attribute descriptions:</p>
      <p>The <dfn data-dfn-for="iframe" data-dfn-type="element-attr" data-export data-lt="fetchpriority" id="element-attrdef-iframe-fetchpriority"><code class="highlight" data-x="attr-iframe-fetchpriority">fetchpriority </code><a class="self-link" href="#element-attrdef-iframe-fetchpriority"></a></dfn> attribute is a <a data-link-type="dfn" href="#fetchpriority-attribute" id="ref-for-fetchpriority-attribute③">fetchpriority attribute</a>. Its purpose is to set the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority①⓪">priority</a> used when <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#process-the-iframe-attributes" id="ref-for-process-the-iframe-attributes">processing the iframe attributes</a>.</p>
      <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLIFrameElement" data-dfn-type="attribute" data-export id="dom-htmliframeelement-fetchpriority"><code class="highlight" data-x="dom-iframe-fetchpriority">fetchPriority</code></dfn> IDL attribute must <span>reflect</span> the <code class="highlight" data-x="attr-iframe-fetchpriority">fetchpriority</code> content attribute, <span>limited to only known values</span>.</p>
     <li>
      <p>We modify step 5 (the resource creation step) of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#shared-attribute-processing-steps-for-iframe-and-frame-elements" id="ref-for-shared-attribute-processing-steps-for-iframe-and-frame-elements">shared attribute processing steps for iframe and frame elements</a> to include:</p>
      <p>...and whose <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority①①">priority</a> is the current state of element’s <code class="highlight" data-x="attr-iframe-fetchpriority">fetchpriority</code> content attribute</p>
     <li>We modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/indices.html#elements-3" id="ref-for-elements-3③">List of elements</a> to include the <span data-x="attr-iframe-fetchpriority">fetchpriority</span> attribute on the <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑥">iframe</a></code> element. 
    </ol>
    <h2 class="heading settled" data-level="4" id="effects-of-priority-hints"><span class="secno">4. </span><span class="content">Effects of Priority Hints</span><a class="self-link" href="#effects-of-priority-hints"></a></h2>
    <p>Since the user agents' resource loading pipeline is largely unspecified, this document doesn’t describe a specific mapping
      between Priority Hints and request prioritization. However, it does describe ways in which implementations are encouraged to
      influence a request’s overall fetch priority given a Priority Hint.</p>
    <p><strong>HTTP Stream Priority</strong></p>
    <p></p>
    <p>Implementations are encouraged to use Priority Hints to influence the <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-priority.html#name-urgency">stream urgency</a> assigned to
      a given request when <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-priority.html">HTTP extensible prioritization</a> is
      being used at the transport layer (for example, with HTTP/3).
      It is not the intention of the different <code class="highlight">priority</code> states to directly map to existing browser priority values,
      but instead act as a relative influencer among requests of a similar type.</p>
    <p></p>
    <div class="example" id="example-69e5b29d">
     <a class="self-link" href="#example-69e5b29d"></a> 
     <p> If requests for <code class="highlight">image</code> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org#concept-request-destination" id="ref-for-concept-request-destination①">destinations</a> in a particular implementation are typically assigned a stream urgency of <code class="highlight"><c- mf>3</c-></code>, a request for an image with <code class="highlight">fetchpriority<c- o>=</c-><c- u>"high"</c-></code> might be assigned a stream urgency less than <code class="highlight"><c- mf>3</c-></code> (where lower values are higher priority).</p>
    </div>
    <p><strong>HTTP/2 Relative Stream Priority</strong></p>
    <p>Implementations are encouraged to use Priority Hints to influence the HTTP/2 stream priority assigned to a given request
      when <a href="https://httpwg.org/http2-spec/draft-ietf-httpbis-http2bis.html#name-prioritization">HTTP/2 prioritization</a> is being used at the transport layer.
      It is not the intention of the different <code class="highlight">priority</code> states to directly map to existing browser priority values,
      but instead act as a relative influencer among requests of a similar type.</p>
    <div class="example" id="example-5350b444">
     <a class="self-link" href="#example-5350b444"></a> 
     <p> If requests for <code class="highlight">image</code> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org#concept-request-destination" id="ref-for-concept-request-destination②">destinations</a> in a particular implementation are typically assigned a stream weight of <code class="highlight"><c- mf>60</c-></code>, a request for an image with <code class="highlight">fetchpriority<c- o>=</c-><c- u>"high"</c-></code> might be assigned a stream weight higher than <code class="highlight"><c- mf>60</c-></code>. </p>
    </div>
    <p><strong>Queueing</strong></p>
    <p>A user agent might choose to queue up certain low-priority requests until higher-priority requests are sent out or finished
      in order to reduce bandwidth contention. Implementations are encouraged to use Priority Hints to determine whether a given
      request is a candidate for such queueing so that more important resources are fetched and used earlier, in order to improve
      the user’s experience.</p>
    <h2 class="heading settled" data-level="5" id="examples"><span class="secno">5. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
    <p><strong>Provide parse-time hints about image priorities</strong></p>
    <p>Browsers make a best-effort to assign a reasonable fetch priority to images so those in-viewport appear as soon as possible.
      In many cases, this will not cause issues, however, what if some above-the-fold imagery is not as critical as others?
      Making the in-viewport evaluation also relies on waiting for layout and adjusting the priority of in-flight images.</p>
    <div class="example" id="example-6e803901" title="Images Example Before">
     <a class="self-link" href="#example-6e803901"></a> 
     <p>FastCorp Inc. have a carousel of images at the top of a page with the first image visible and the remaining images
        images off screen. The markup of this carousel may look as follows:</p>
<pre class="highlight"><c- p>&lt;</c-><c- f>ul</c-> <c- e>class</c-><c- o>=</c-><c- s>"carousel"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"img/carousel-1.jpg"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"img/carousel-2.jpg"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"img/carousel-3.jpg"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"img/carousel-4.jpg"</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>ul</c-><c- p>></c->
</pre>
    </div>
    <p>Browser heuristics may cause all four images to be initially queued at a low priority
      and increased to a high priprity once layout determines they are within the viewport,
      despite three of them not initially being visible. This may cause the initial image
      fetch to be delayed and the fetches for the hidden images to
      delay the first image from completing fetching or contend with fetches for other
      in-viewport resources.</p>
    <p>A developer could use rel=preload to preload the first image in the carousel,
      however doing so may not provide the outcome one expects: rel=preload may just change
      when the image is discovered but will not necessarily influence the priority of the image.
      Priority Hints may help here.</p>
    <div class="example" id="example-e38d9c01" title="Images Example with Priority Hints">
     <a class="self-link" href="#example-e38d9c01"></a> 
<pre class="highlight"><c- p>&lt;</c-><c- f>ul</c-> <c- e>class</c-><c- o>=</c-><c- s>"carousel"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"img/carousel-1.jpg"</c-> <c- e>fetchpriority</c-><c- o>=</c-><c- s>"high"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"img/carousel-2.jpg"</c-> <c- e>fetchpriority</c-><c- o>=</c-><c- s>"low"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"img/carousel-3.jpg"</c-> <c- e>fetchpriority</c-><c- o>=</c-><c- s>"low"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"img/carousel-4.jpg"</c-> <c- e>fetchpriority</c-><c- o>=</c-><c- s>"low"</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>ul</c-><c- p>></c->
</pre>
    </div>
    <p>When we assign the first image high fetchpriority, this can start the image at a high
    priority as soon as it is discovered without having to wait for layout.</p>
    <p>When we assign the off-screen images low fetchpriority, this will create less contention
      between the remaining high-priority images and other high-priority resources.</p>
    <p><strong>Signal Priority of Asynchronous Scripts</strong></p>
    <p>A browser may treat parser-blocking scripts, async scripts and preloaded scripts
    differently based on heuristics that work well in a general case but may not behave exactly
    as a developer desires.</p>
    <div class="example" id="example-129bfae4" title="Async Script Example Before">
     <a class="self-link" href="#example-129bfae4"></a> 
     <p>if a browser treats preloaded scripts as high-priority and async scripts as low-priority
      by default, it could be difficult to preload a dependency of an async script and still have
      them load in the desired order. For example, if we have a script <code class="highlight">a<c- p>.</c->js</code> that
      imports <code class="highlight">b<c- p>.</c->js</code>, it could be useful to preload <code class="highlight">b<c- p>.</c->js</code> so the fetch can
      start in parallel with the loading of <code class="highlight">a<c- p>.</c->js</code>. A trivial implementation of
      preloading the dependency after the main script: </p>
<pre class="highlight"><c- p>&lt;</c-><c- f>script</c-> <c- e>src</c-><c- o>=</c-><c- s>a.js</c-> <c- e>async</c-><c- p>>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;</c-><c- f>link</c-> <c- e>rel</c-><c- o>=</c-><c- s>preload</c-> <c- e>href</c-><c- o>=</c-><c- s>b.js</c-> <c- e>as</c-><c- o>=</c-><c- s>script</c-><c- p>></c->
</pre>
     <p>may result in <code class="highlight">b<c- p>.</c->js</code> being loaded before <code class="highlight">a<c- p>.</c->js</code> in a browser where
      preloaded scripts are given a higher priority than async scripts. </p>
    </div>
    <p>By using priority hints and assigning the same priority to both scripts, they can be loaded
    in the preferred order and at a priority that makes sense depending on the context of what the
    script is being used for (say, high-priority for user-facing UI or functionality or
    low-priority for scripts responsible for background work).</p>
    <div class="example" id="example-539815ea" title="Async Script Example with Priority Hints">
     <a class="self-link" href="#example-539815ea"></a> 
<pre class="highlight"><c- p>&lt;</c-><c- f>script</c-> <c- e>src</c-><c- o>=</c-><c- s>a.js</c-> <c- e>async</c-> <c- e>fetchpriority</c-><c- o>=</c-><c- s>high</c-><c- p>>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;</c-><c- f>link</c-> <c- e>rel</c-><c- o>=</c-><c- s>preload</c-> <c- e>href</c-><c- o>=</c-><c- s>b.js</c-> <c- e>as</c-><c- o>=</c-><c- s>script</c-> <c- e>fetchpriority</c-><c- o>=</c-><c- s>high</c-><c- p>></c->
</pre>
    </div>
    <p><strong>Reduce network contention from non-critical Fetch API requests</strong></p>
    <p>Priority Hints can be used to lower the priority of non-critical Fetch API requests to avoid
    them contending with more important ones. </p>
    <p>A news site making a critical Fetch API request for article content might end up contending
    with requests for less important resources like related content. </p>
    <div class="example" id="example-6542b8d6" title="Fetch Example Before">
     <a class="self-link" href="#example-6542b8d6"></a> 
<pre class="highlight"><c- c1>// Critical Fetch request for article content</c->
fetch<c- p>(</c-><c- t>'/api/articles.json'</c-><c- p>).</c->then<c- p>(</c-><c- d>/*...*/</c-><c- p>)</c->

<c- c1>// Request for related content contending with the above request</c->
fetch<c- p>(</c-><c- t>'/api/related.json'</c-><c- p>).</c->then<c- p>(</c-><c- d>/*...*/</c-><c- p>)</c->
</pre>
    </div>
    <p>By using the <code class="highlight">priority</code> property on the second Fetch request, we can hint that
    the priority of that request is <code class="highlight">low</code>, reducing the chances of it contending with the
    Fetch request for article content. We can also explicitly state the priority of the first
    request is <code class="highlight">high</code> so that browsers where Fetch requests do not already have a high
    priority know that it is important to the page.</p>
    <div class="example" id="example-900fa3e9" title="Fetch Example with Priority Hints">
     <a class="self-link" href="#example-900fa3e9"></a> 
<pre class="highlight"><c- c1>// Critical Fetch request for article content</c->
fetch<c- p>(</c-><c- t>'/api/articles.json'</c-><c- p>,</c-> <c- p>{</c-> priority<c- o>:</c-> <c- t>'high'</c-> <c- p>}).</c->then<c- p>(</c-><c- d>/*...*/</c-><c- p>)</c->

<c- c1>// Request for related content now reduced in priority</c->
<c- c1>// reducing the opportunity for contention</c->
fetch<c- p>(</c-><c- t>'/api/related.json'</c-><c- p>,</c-> <c- p>{</c-> priority<c- o>:</c-> <c- t>'low'</c-> <c- p>}).</c->then<c- p>(</c-><c- d>/*...*/</c-><c- p>)</c->
</pre>
    </div>
    <p>This might be more pronounced on HTTP 1.1 with the impact being more visible with HTTP/2
    multiplexing if a large number of Fetch requests are being made and are contending with one
    another.</p>
    <p><strong>Providing Priority Hints through HTTP Headers</strong></p>
    <p>The fetchpriority hint MAY be specified in the document markup, MAY be provided via JavaScript,
    MAY be provided via the HTTP header, and MAY be dynamically added to the document.</p>
    <div class="example" id="example-bb9ce34d" title="HTTP Header Example">
     <a class="self-link" href="#example-bb9ce34d"></a> 
<pre class="highlight">Link<c- o>:</c-> <c- o>&lt;</c->/app/style.css>; fetchpriority=high
Link<c- o>:</c-> <c- o>&lt;</c->/app/script.js>; fetchpriority=low
</pre>
    </div>
    <p>As above examples illustrate, fetchpriority can be specified via declarative markup, Link HTTP header (<a data-link-type="biblio" href="#biblio-rfc5988" title="Web Linking">RFC5988</a>), 
    or scheduled via JavaScript.</p>
    <h2 class="heading settled" data-level="6" id="adoptionpath"><span class="secno">6. </span><span class="content">Adoption path</span><a class="self-link" href="#adoptionpath"></a></h2>
    <p>The markup signals and script APIs are backward-compatible in that
    non-supporting browsers will simply ignore them and load all resources as they
    normally would without the additional hints.</p>
    <h2 class="heading settled" data-level="7" id="outofscope"><span class="secno">7. </span><span class="content">Out of scope</span><a class="self-link" href="#outofscope"></a></h2>
    <ul>
     <li>Signal that certain images should not block the load event.
     <li>Signals relating the script execution order, script execution grouping, execution dependency, etc.
     <li>Signal the execution priority of <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script⑦">script</a></code> or <code class="highlight"><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑦">iframe</a></code> elements beyond the load of the initial resource.
    </ul>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="use-cases"><span class="secno">8. </span><span class="content">Use Cases</span><a class="self-link" href="#use-cases"></a></h2>
    <p>This section outlines the different use-cases Priority Hints sets out to address.</p>
    <h3 class="heading settled" data-level="8.1" id="communicateresourcefetchprioritytothebrowser"><span class="secno">8.1. </span><span class="content">Communicate resource fetch priority to the browser</span><a class="self-link" href="#communicateresourcefetchprioritytothebrowser"></a></h3>
    <p>The browser assigns priorities and certain dependencies to downloaded resources and uses them to determine:</p>
    <ul>
     <li>When the resource’s request is sent to the server.
     <li>What HTTP/2 dependencies and weights or HTTP/3 priorities are assigned to the resource’s request.
    </ul>
    <p>The browser uses various heuristics in order to do the above, which are based on the type of resource, its location in
      the document, and more.</p>
    <p>Web developers can often be in a better position to know which resources are more impactful than others on their
      users' loading experience, and need a way to communicate that to the browser.</p>
    <h3 class="heading settled" data-level="8.2" id="signalaresourceasnoncritical"><span class="secno">8.2. </span><span class="content">Signal a resource as non-critical</span><a class="self-link" href="#signalaresourceasnoncritical"></a></h3>
    <p>Using <code class="highlight"><c- o>&lt;</c->link rel<c- o>=</c->preload<c- o>></c-></code> in order to get the browser to early-discover certain resources, especially in its header form, means that the browser
      may discover these resources before other, more critical resources and send their request to the server first. That
      can result in loading regressions as the server may start sending those non-critical resources before other, more critical
      ones, which may fill up the TCP socket sending queues.</p>
    <p>While better transport protocols (e.g. QUIC) may address that at a lower layer for the single origin case, developers
      should be able to signal to the browser that a certain resource is not critical, and therefore should be queued until
      such resources are discovered. Such marking as "non-critical" should be orthogonal to the signaling of the resource’s
      "fetch priority" (e.g. this could be applied to high priority resources that shouldn’t contend with rendering-critical
      resources as well as low priority ones).</p>
    <h3 class="heading settled" data-level="8.3" id="avoidbandwidthcontentioninmultipleoriginscenarios"><span class="secno">8.3. </span><span class="content">Avoid bandwidth contention in multiple origin scenarios</span><a class="self-link" href="#avoidbandwidthcontentioninmultipleoriginscenarios"></a></h3>
    <p>When loading resources from multiple origins, setting HTTP/2 dependencies and weights do very little to avoid bandwidth
      contention between the origins, as each origin tries to send down its most critical resource without knowing of more
      critical resources in other origins. Signaling resource priority to the browser can enable it to defer sending of
      non-critical third party requests while critical resources are still being downloaded.</p>
    <h3 class="heading settled" data-level="8.4" id="provideprioritysignalsformarkupbasedresources"><span class="secno">8.4. </span><span class="content">Provide priority signals for markup-based resources</span><a class="self-link" href="#provideprioritysignalsformarkupbasedresources"></a></h3>
    <p>Developers need a way to provide the above signals for resources that are loaded through markup (or through markup-equivalent
      HTTP headers, e.g. <code class="highlight">Link<c- o>:</c-></code>)</p>
    <h3 class="heading settled" data-level="8.5" id="provideprioritysignalsfordynamicallyloadedresources"><span class="secno">8.5. </span><span class="content">Provide priority signals for dynamically loaded resources</span><a class="self-link" href="#provideprioritysignalsfordynamicallyloadedresources"></a></h3>
    <p>Developers need a way to provide the above signals for resources that are fetched through JavaScript, e.g., using the <code class="highlight">fetch<c- p>()</c-></code> API. That would enable them both to upgrade and downgrade those resource’s "priority". </p>
   </section>
   <section>
    <h2 class="heading settled" data-level="9" id="safe-usage"><span class="secno">9. </span><span class="content">Safe usage</span><a class="self-link" href="#safe-usage"></a></h2>
    <div class="note" role="note">
     <p>If the <code class="highlight">fetchpriority</code> keyword is used as an optimization to initiate earlier fetch then no additional feature detection checks are necessary:
        browsers that support <code class="highlight">fetchpriority</code> may initiate earlier fetch, and those that do not will ignore it and fetch the resource as previously. Otherwise,
        if the application intends to rely on <code class="highlight">fetchpriority</code> to fetch the resource, then it can execute a feature detection check to verify that it is supported. </p>
    </div>
    <p>Applying <code class="highlight">fetchpriority</code> appropriately to the resources in a page should never degrade performance. This should hold true for both browsers that support
      Priority Hints as well as browsers that do not. UAs are free to apply other heuristics in addition to Priority Hints
      to decide on how they load content.</p>
    <p>With in-viewport images, a browser may automatically detect if the image is important and boost priority if it gets to
      layout early enough. However, all browsers would benefit from knowing which images an author wants to load "earlier"
      and which are safe to load "later", regardless of how they use this information.</p>
    <p>This same logic applies for scripts. Browsers may have different heuristics that work differently across browsers for
      scripts (e.g with <code class="highlight"><c- k>async</c-></code>, <code class="highlight">defer</code>) but a site could fix any misguesses across the board by being explicit using Priority Hints.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="10" id="security_privacy"><span class="secno">10. </span><span class="content">Security and Privacy Considerations</span><a class="self-link" href="#security_privacy"></a></h2>
    <h3 class="heading settled" data-level="10.1" id="fingerprintability"><span class="secno">10.1. </span><span class="content">Fingerprintability</span><a class="self-link" href="#fingerprintability"></a></h3>
    <p>This specification does not expose any new information about the user and their preferences, so does not increase the risk of user fingerprinting.
    At the same time, it does expose priority information to web servers that enables them to distinguish between browsers that support the feature and ones that do not support it.
    This is not dissimilar to other web platform features, but with one important distinction:
    this information is exposed at the HTTP layer, allowing the server implementation to discover discrepancies between the User-Agent string the request is sent with and the browser that sent the request.
    It is not clear that this is a significant issue, but it is something for implementing user agents (and user agents which try to spoof others) to be aware of.
    It is also possible that the network patterns that result from the use of the feature would be observable to passive network-based observers and will enable them to distinguish supporting and non-supporting browsers. </p>
    <h3 class="heading settled" data-level="10.2" id="ecosystem"><span class="secno">10.2. </span><span class="content">Negative ecosystem side-effects</span><a class="self-link" href="#ecosystem"></a></h3>
    <p> There’s a risk that monetizing third-party components, and ad networks in particular, will require publishers to use the feature in order to upgrade the priority of their resource requests.
    While they certainly can do that, and enforce such a requirement by inspecting the HTTP/2 priorities of the resource requests they receive, the risk for that is rather small. </p>
    <ul>
     <li>
      <p>Such "priority upgrade" is already available in the platform today, e.g., when switching scripts from blocking to deferred or async ones.
            There’s no existing evidence that advertisers have required such hacks in order to make sure their resources load first.</p>
     <li>
      <p>Furthermore, monitoring that publishers complied with that requirement can be difficult for advertisers that run outside of the main frame, as it will require coordination between the their HTTP/2 termination point and the application layer.
            Depending on their architecture, such coordination may not be trivial.</p>
    </ul>
    <p></p>
    <p>If such a problem arise in the future, browsers will be able to find creative ways to fight against it.
    For example, since Priority Hints are hints by their nature, browsers will be able to ignore those hints for third-party hosts that are known to abuse the feature.
    In such a case, advertisers will not be able to distinguish such user agent intervention from lack of compliance with their Priority Hints requirements. </p>
   </section>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code class="highlight"><c- a>class</c-><c- o>=</c-><c- u>"example"</c-></code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code class="highlight"><c- a>class</c-><c- o>=</c-><c- u>"note"</c-></code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
   <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
  </div>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-fetchpriority-auto">"auto"</a><span>, in § 3.1</span>
   <li><a href="#fetchpriority-enum-auto">auto</a><span>, in § 3.1</span>
   <li><a href="#enumdef-fetchpriority">FetchPriority</a><span>, in § 3.1</span>
   <li>
    fetchPriority
    <ul>
     <li><a href="#dom-htmliframeelement-fetchpriority">attribute for HTMLIFrameElement</a><span>, in § 3.3.5</span>
     <li><a href="#dom-htmlimageelement-fetchpriority">attribute for HTMLImageElement</a><span>, in § 3.3.1</span>
     <li><a href="#dom-htmllinkelement-fetchpriority">attribute for HTMLLinkElement</a><span>, in § 3.3.3</span>
     <li><a href="#dom-htmlscriptelement-fetchpriority">attribute for HTMLScriptElement</a><span>, in § 3.3.4</span>
    </ul>
   <li>
    fetchpriority
    <ul>
     <li><a href="#element-attrdef-iframe-fetchpriority">element-attr for iframe</a><span>, in § 3.3.5</span>
     <li><a href="#element-attrdef-img-fetchpriority">element-attr for img</a><span>, in § 3.3.1</span>
     <li><a href="#element-attrdef-link-fetchpriority">element-attr for link</a><span>, in § 3.3.3</span>
     <li><a href="#element-attrdef-script-fetchpriority">element-attr for script</a><span>, in § 3.3.4</span>
    </ul>
   <li><a href="#fetchpriority-attribute">fetchpriority attribute</a><span>, in § 3.3</span>
   <li><a href="#fetchpriority-enum">FetchPriority enum</a><span>, in § 3.1</span>
   <li><a href="#dom-fetchpriority-high">"high"</a><span>, in § 3.1</span>
   <li><a href="#fetchpriority-enum-high">high</a><span>, in § 3.1</span>
   <li><a href="#dom-fetchpriority-low">"low"</a><span>, in § 3.1</span>
   <li><a href="#fetchpriority-enum-low">low</a><span>, in § 3.1</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-request">
   <a href="https://fetch.spec.whatwg.org/#request">https://fetch.spec.whatwg.org/#request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request">Unnumbered Section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-request-destination">
   <a href="https://fetch.spec.whatwg.org#concept-request-destination">https://fetch.spec.whatwg.org#concept-request-destination</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-request-destination">1. Introduction</a>
    <li><a href="#ref-for-concept-request-destination①">4. Effects of Priority Hints</a> <a href="#ref-for-concept-request-destination②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-fetch">
   <a href="https://fetch.spec.whatwg.org/#concept-fetch">https://fetch.spec.whatwg.org/#concept-fetch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-fetch">3.3. HTML Integration</a>
    <li><a href="#ref-for-concept-fetch①">3.3.1. img</a> <a href="#ref-for-concept-fetch②">(2)</a>
    <li><a href="#ref-for-concept-fetch③">3.3.3. link</a>
    <li><a href="#ref-for-concept-fetch④">3.3.4. script</a> <a href="#ref-for-concept-fetch⑤">(2)</a> <a href="#ref-for-concept-fetch⑥">(3)</a>
    <li><a href="#ref-for-concept-fetch⑦">3.3.5. iframe</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-requestinit-priority">
   <a href="https://fetch.spec.whatwg.org/#dom-requestinit-priority">https://fetch.spec.whatwg.org/#dom-requestinit-priority</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-requestinit-priority">Unnumbered Section</a>
    <li><a href="#ref-for-dom-requestinit-priority①">3.2. Fetch Integration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-request-priority">
   <a href="https://fetch.spec.whatwg.org/#request-priority">https://fetch.spec.whatwg.org/#request-priority</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-priority">3.3.1. img</a> <a href="#ref-for-request-priority①">(2)</a> <a href="#ref-for-request-priority②">(3)</a>
    <li><a href="#ref-for-request-priority③">3.3.3. link</a> <a href="#ref-for-request-priority④">(2)</a> <a href="#ref-for-request-priority⑤">(3)</a>
    <li><a href="#ref-for-request-priority⑥">3.3.4. script</a> <a href="#ref-for-request-priority⑦">(2)</a> <a href="#ref-for-request-priority⑧">(3)</a> <a href="#ref-for-request-priority⑨">(4)</a>
    <li><a href="#ref-for-request-priority①⓪">3.3.5. iframe</a> <a href="#ref-for-request-priority①①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cereactions">
   <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions">https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cereactions">3.3.1. img</a>
    <li><a href="#ref-for-cereactions①">3.3.3. link</a>
    <li><a href="#ref-for-cereactions②">3.3.4. script</a>
    <li><a href="#ref-for-cereactions③">3.3.5. iframe</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmliframeelement">
   <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement">https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmliframeelement">3.3.5. iframe</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmlimageelement">
   <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement">https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmlimageelement">3.3.1. img</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmllinkelement">
   <a href="https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement">https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmllinkelement">3.3.3. link</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmlscriptelement">
   <a href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement">https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmlscriptelement">3.3.4. script</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-create-a-link-request">
   <a href="https://html.spec.whatwg.org/multipage/semantics.html#create-a-link-request">https://html.spec.whatwg.org/multipage/semantics.html#create-a-link-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-create-a-link-request">3.3.3. link</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-script-element:data-block-2">
   <a href="https://html.spec.whatwg.org/multipage/scripting.html#the-script-element:data-block-2">https://html.spec.whatwg.org/multipage/scripting.html#the-script-element:data-block-2</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-script-element:data-block-2">3.3.4. script</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-default-classic-script-fetch-options">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#default-classic-script-fetch-options">https://html.spec.whatwg.org/multipage/webappapis.html#default-classic-script-fetch-options</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-default-classic-script-fetch-options">3.3.4. script</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-:~:text=dynamically%20has%20no%20direct%20effect">
   <a href="https://html.spec.whatwg.org/multipage/scripting.html#:~:text=dynamically%20has%20no%20direct%20effect">https://html.spec.whatwg.org/multipage/scripting.html#:~:text=dynamically%20has%20no%20direct%20effect</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-:~:text=dynamically%2520has%2520no%2520direct%2520effect">3.3.4. script</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-enumerated-attribute">
   <a href="https://html.spec.whatwg.org/multipage#enumerated-attribute">https://html.spec.whatwg.org/multipage#enumerated-attribute</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumerated-attribute">Unnumbered Section</a> <a href="#ref-for-enumerated-attribute①">(2)</a>
    <li><a href="#ref-for-enumerated-attribute②">2. Solution</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-external-resource-link">
   <a href="https://html.spec.whatwg.org/multipage/links.html#external-resource-link">https://html.spec.whatwg.org/multipage/links.html#external-resource-link</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-external-resource-link">3.3.3. link</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-fetch-and-process-the-linked-resource">
   <a href="https://html.spec.whatwg.org/multipage/semantics.html#fetch-and-process-the-linked-resource">https://html.spec.whatwg.org/multipage/semantics.html#fetch-and-process-the-linked-resource</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fetch-and-process-the-linked-resource">3.3.3. link</a> <a href="#ref-for-fetch-and-process-the-linked-resource①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-fetching-and-processing-a-resource-from-a-link-element">
   <a href="https://html.spec.whatwg.org/multipage/semantics.html#fetching-and-processing-a-resource-from-a-link-element">https://html.spec.whatwg.org/multipage/semantics.html#fetching-and-processing-a-resource-from-a-link-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fetching-and-processing-a-resource-from-a-link-element">3.3.3. link</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-fetch-and-process-the-linked-resource">
   <a href="https://html.spec.whatwg.org/multipage/semantics.html#fetch-and-process-the-linked-resource">https://html.spec.whatwg.org/multipage/semantics.html#fetch-and-process-the-linked-resource</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fetch-and-process-the-linked-resource">3.3.3. link</a> <a href="#ref-for-fetch-and-process-the-linked-resource①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-fetching-resources">
   <a href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#fetching-resources">https://html.spec.whatwg.org/multipage/urls-and-fetching.html#fetching-resources</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fetching-resources">3.3. HTML Integration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-iframe-element">
   <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element">https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-iframe-element">Unnumbered Section</a>
    <li><a href="#ref-for-the-iframe-element①">2. Solution</a>
    <li><a href="#ref-for-the-iframe-element②">3.3. HTML Integration</a>
    <li><a href="#ref-for-the-iframe-element③">3.3.5. iframe</a> <a href="#ref-for-the-iframe-element④">(2)</a> <a href="#ref-for-the-iframe-element⑤">(3)</a> <a href="#ref-for-the-iframe-element⑥">(4)</a>
    <li><a href="#ref-for-the-iframe-element⑦">7. Out of scope</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-img-element">
   <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element">https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-img-element">Unnumbered Section</a>
    <li><a href="#ref-for-the-img-element①">2. Solution</a>
    <li><a href="#ref-for-the-img-element②">3.3. HTML Integration</a>
    <li><a href="#ref-for-the-img-element③">3.3.1. img</a> <a href="#ref-for-the-img-element④">(2)</a> <a href="#ref-for-the-img-element⑤">(3)</a> <a href="#ref-for-the-img-element⑥">(4)</a>
    <li><a href="#ref-for-the-img-element⑦">3.3.2. picture</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-invalid-value-default">
   <a href="https://html.spec.whatwg.org/multipage#invalid-value-default">https://html.spec.whatwg.org/multipage#invalid-value-default</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalid-value-default">2. Solution</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-link-element">
   <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">https://html.spec.whatwg.org/multipage/semantics.html#the-link-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-link-element">Unnumbered Section</a>
    <li><a href="#ref-for-the-link-element①">2. Solution</a>
    <li><a href="#ref-for-the-link-element②">3.3. HTML Integration</a>
    <li><a href="#ref-for-the-link-element③">3.3.3. link</a> <a href="#ref-for-the-link-element④">(2)</a> <a href="#ref-for-the-link-element⑤">(3)</a> <a href="#ref-for-the-link-element⑥">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-link-element">
   <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">https://html.spec.whatwg.org/multipage/semantics.html#the-link-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-link-element">Unnumbered Section</a>
    <li><a href="#ref-for-the-link-element①">2. Solution</a>
    <li><a href="#ref-for-the-link-element②">3.3. HTML Integration</a>
    <li><a href="#ref-for-the-link-element③">3.3.3. link</a> <a href="#ref-for-the-link-element④">(2)</a> <a href="#ref-for-the-link-element⑤">(3)</a> <a href="#ref-for-the-link-element⑥">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-elements-3">
   <a href="https://html.spec.whatwg.org/multipage/indices.html#elements-3">https://html.spec.whatwg.org/multipage/indices.html#elements-3</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-elements-3">3.3.1. img</a>
    <li><a href="#ref-for-elements-3①">3.3.3. link</a>
    <li><a href="#ref-for-elements-3②">3.3.4. script</a>
    <li><a href="#ref-for-elements-3③">3.3.5. iframe</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-missing-value-default">
   <a href="https://html.spec.whatwg.org/multipage#missing-value-default">https://html.spec.whatwg.org/multipage#missing-value-default</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-missing-value-default">2. Solution</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-link-type-modulepreload">
   <a href="https://html.spec.whatwg.org/multipage/links.html#link-type-modulepreload">https://html.spec.whatwg.org/multipage/links.html#link-type-modulepreload</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-link-type-modulepreload">3.3.3. link</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-picture-element">
   <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-picture-element">https://html.spec.whatwg.org/multipage/embedded-content.html#the-picture-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-picture-element">3.3.2. picture</a> <a href="#ref-for-the-picture-element①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-prepare-a-script">
   <a href="https://html.spec.whatwg.org/multipage/scripting.html#prepare-a-script">https://html.spec.whatwg.org/multipage/scripting.html#prepare-a-script</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prepare-a-script">3.3.4. script</a> <a href="#ref-for-prepare-a-script①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-process-the-iframe-attributes">
   <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#process-the-iframe-attributes">https://html.spec.whatwg.org/multipage/iframe-embed-object.html#process-the-iframe-attributes</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-process-the-iframe-attributes">3.3.5. iframe</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-reacting-to-environment-changes">
   <a href="https://html.spec.whatwg.org/multipage/images.html#reacting-to-environment-changes">https://html.spec.whatwg.org/multipage/images.html#reacting-to-environment-changes</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reacting-to-environment-changes">3.3.1. img</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-script">
   <a href="https://html.spec.whatwg.org/multipage/scripting.html#script">https://html.spec.whatwg.org/multipage/scripting.html#script</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-script">Unnumbered Section</a>
    <li><a href="#ref-for-script①">2. Solution</a>
    <li><a href="#ref-for-script②">3.3. HTML Integration</a>
    <li><a href="#ref-for-script③">3.3.4. script</a> <a href="#ref-for-script④">(2)</a> <a href="#ref-for-script⑤">(3)</a> <a href="#ref-for-script⑥">(4)</a>
    <li><a href="#ref-for-script⑦">7. Out of scope</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-script-fetch-options">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#script-fetch-options">https://html.spec.whatwg.org/multipage/webappapis.html#script-fetch-options</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-script-fetch-options">3.3.4. script</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-set-up-the-classic-script-request">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#set-up-the-classic-script-request">https://html.spec.whatwg.org/multipage/webappapis.html#set-up-the-classic-script-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-up-the-classic-script-request">3.3.4. script</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-set-up-the-module-script-request">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#set-up-the-module-script-request">https://html.spec.whatwg.org/multipage/webappapis.html#set-up-the-module-script-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-up-the-module-script-request">3.3.4. script</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-shared-attribute-processing-steps-for-iframe-and-frame-elements">
   <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#shared-attribute-processing-steps-for-iframe-and-frame-elements">https://html.spec.whatwg.org/multipage/iframe-embed-object.html#shared-attribute-processing-steps-for-iframe-and-frame-elements</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-shared-attribute-processing-steps-for-iframe-and-frame-elements">3.3.5. iframe</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-source-element">
   <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element">https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-source-element">3.3.2. picture</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-update-the-image-data">
   <a href="https://html.spec.whatwg.org/multipage/images.html#update-the-image-data">https://html.spec.whatwg.org/multipage/images.html#update-the-image-data</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-update-the-image-data">3.3.1. img</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMString">
   <a href="https://webidl.spec.whatwg.org/#idl-DOMString">https://webidl.spec.whatwg.org/#idl-DOMString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMString">3.3.1. img</a>
    <li><a href="#ref-for-idl-DOMString①">3.3.3. link</a>
    <li><a href="#ref-for-idl-DOMString②">3.3.4. script</a>
    <li><a href="#ref-for-idl-DOMString③">3.3.5. iframe</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-request">Request</span>
     <li><span class="dfn-paneled" id="term-for-concept-request-destination">destination</span>
     <li><span class="dfn-paneled" id="term-for-concept-fetch">fetch</span>
     <li><span class="dfn-paneled" id="term-for-dom-requestinit-priority">priority <small>(for RequestInit)</small></span>
     <li><span class="dfn-paneled" id="term-for-request-priority">priority <small>(for request)</small></span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-cereactions">CEReactions</span>
     <li><span class="dfn-paneled" id="term-for-htmliframeelement">HTMLIFrameElement</span>
     <li><span class="dfn-paneled" id="term-for-htmlimageelement">HTMLImageElement</span>
     <li><span class="dfn-paneled" id="term-for-htmllinkelement">HTMLLinkElement</span>
     <li><span class="dfn-paneled" id="term-for-htmlscriptelement">HTMLScriptElement</span>
     <li><span class="dfn-paneled" id="term-for-create-a-link-request">create a link request</span>
     <li><span class="dfn-paneled" id="term-for-the-script-element:data-block-2">data blocks</span>
     <li><span class="dfn-paneled" id="term-for-default-classic-script-fetch-options">default classic script fetch options</span>
     <li><span class="dfn-paneled" id="term-for-:~:text=dynamically%20has%20no%20direct%20effect">direct effect when changed dynamically</span>
     <li><span class="dfn-paneled" id="term-for-enumerated-attribute">enumerated attribute</span>
     <li><span class="dfn-paneled" id="term-for-external-resource-link">external resource links</span>
     <li><span class="dfn-paneled" id="term-for-fetch-and-process-the-linked-resource">fetch and process the linked resource</span>
     <li><span class="dfn-paneled" id="term-for-fetching-and-processing-a-resource-from-a-link-element">fetching and processing a resource from a link element</span>
     <li><span class="dfn-paneled" id="term-for-fetch-and-process-the-linked-resource①">fetching and processing the linked resource</span>
     <li><span class="dfn-paneled" id="term-for-fetching-resources">fetching resources</span>
     <li><span class="dfn-paneled" id="term-for-the-iframe-element">iframe</span>
     <li><span class="dfn-paneled" id="term-for-the-img-element">img</span>
     <li><span class="dfn-paneled" id="term-for-invalid-value-default">invalid value default</span>
     <li><span class="dfn-paneled" id="term-for-the-link-element">link</span>
     <li><span class="dfn-paneled" id="term-for-the-link-element①">link element</span>
     <li><span class="dfn-paneled" id="term-for-elements-3">list of elements</span>
     <li><span class="dfn-paneled" id="term-for-missing-value-default">missing value default</span>
     <li><span class="dfn-paneled" id="term-for-link-type-modulepreload">modulepreload</span>
     <li><span class="dfn-paneled" id="term-for-the-picture-element">picture</span>
     <li><span class="dfn-paneled" id="term-for-prepare-a-script">prepare a script</span>
     <li><span class="dfn-paneled" id="term-for-process-the-iframe-attributes">processing the iframe attributes</span>
     <li><span class="dfn-paneled" id="term-for-reacting-to-environment-changes">reacting to environment changes</span>
     <li><span class="dfn-paneled" id="term-for-script">script</span>
     <li><span class="dfn-paneled" id="term-for-script-fetch-options">script fetch options</span>
     <li><span class="dfn-paneled" id="term-for-set-up-the-classic-script-request">set up the classic script request</span>
     <li><span class="dfn-paneled" id="term-for-set-up-the-module-script-request">set up the module script request</span>
     <li><span class="dfn-paneled" id="term-for-shared-attribute-processing-steps-for-iframe-and-frame-elements">shared attribute processing steps for iframe and frame elements</span>
     <li><span class="dfn-paneled" id="term-for-the-source-element">source</span>
     <li><span class="dfn-paneled" id="term-for-update-the-image-data">update the image data</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-priority-hints">[PRIORITY-HINTS]
   <dd><a href="https://wicg.github.io/priority-hints/"><cite>Priority Hints</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/priority-hints/">https://wicg.github.io/priority-hints/</a>
   <dt id="biblio-rfc5988">[RFC5988]
   <dd>Mark Nottingham. <a href="https://tools.ietf.org/html/rfc5988"><cite>Web Linking</cite></a>. URL: <a href="https://tools.ietf.org/html/rfc5988">https://tools.ietf.org/html/rfc5988</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-fetchpriority"><code class="highlight"><c- g>FetchPriority</c-></code></a> { <a href="#dom-fetchpriority-high"><code class="highlight"><c- s><c- u>"high"</c-></c-></code></a>, <a href="#dom-fetchpriority-low"><code class="highlight"><c- s><c- u>"low"</c-></c-></code></a>, <a href="#dom-fetchpriority-auto"><code class="highlight"><c- s><c- u>"auto"</c-></c-></code></a> };

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement"><c- g>HTMLImageElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-htmlimageelement-fetchpriority"><c- g>fetchPriority</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement"><c- g>HTMLLinkElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-htmllinkelement-fetchpriority"><code class="highlight"><c- g>fetchPriority</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement"><c- g>HTMLScriptElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-htmlscriptelement-fetchpriority"><c- g>fetchPriority</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"><c- g>HTMLIFrameElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-htmliframeelement-fetchpriority"><c- g>fetchPriority</c-></a>;
};

</pre>
  <aside class="dfn-panel" data-for="fetchpriority-enum">
   <b><a href="#fetchpriority-enum">#fetchpriority-enum</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fetchpriority-enum">3.3. HTML Integration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fetchpriority-enum-auto">
   <b><a href="#fetchpriority-enum-auto">#fetchpriority-enum-auto</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fetchpriority-enum-auto">3.3. HTML Integration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fetchpriority-attribute">
   <b><a href="#fetchpriority-attribute">#fetchpriority-attribute</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fetchpriority-attribute">3.3.1. img</a>
    <li><a href="#ref-for-fetchpriority-attribute①">3.3.3. link</a>
    <li><a href="#ref-for-fetchpriority-attribute②">3.3.4. script</a>
    <li><a href="#ref-for-fetchpriority-attribute③">3.3.5. iframe</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-htmlimageelement-fetchpriority">
   <b><a href="#dom-htmlimageelement-fetchpriority">#dom-htmlimageelement-fetchpriority</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-htmlimageelement-fetchpriority">3.3.1. img</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-htmlscriptelement-fetchpriority">
   <b><a href="#dom-htmlscriptelement-fetchpriority">#dom-htmlscriptelement-fetchpriority</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-htmlscriptelement-fetchpriority">3.3.4. script</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-htmliframeelement-fetchpriority">
   <b><a href="#dom-htmliframeelement-fetchpriority">#dom-htmliframeelement-fetchpriority</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-htmliframeelement-fetchpriority">3.3.5. iframe</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>