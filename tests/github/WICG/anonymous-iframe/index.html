<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Iframe credentialless</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <link href="https://wicg.github.io/anonymous-iframe/" rel="canonical">
<style>
.monkey-patch {
    padding: .5em;
    border: thin solid #ddd;
    border: thin solid 1px;
    border-radius: .5em;
    margin: .5em calc(-0.5em - 1px);
    background-color: rgba(255, 255, 0, 0.03);
    backdrop-filter: blur(5px);
    box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.05);
}

.brief {
  line-height: 10%;
}

.customHighlight {
  padding-top:9px ;
  padding-bottom:9px ;
  background-color: rgba(255,255,0,0.3)
}

</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-wpt */

:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Iframe credentialless</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/anonymous-iframe/">https://wicg.github.io/anonymous-iframe/</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:arthursonzogni@google.com">Arthur Sonzogni</a> (<span class="p-org org">Google</span>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:clamy@google.com">Camille Lamy</a> (<span class="p-org org">Google</span>)
     <dt>Tests:
     <dd><a href="https://github.com/w3c/web-platform-tests/tree/master/html/anonymous-iframe">web-platform-tests html/anonymous-iframe/</a> (<a href="https://github.com/w3c/web-platform-tests/labels/html/anonymous-iframe">ongoing work</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright">©2022, Google, Inc. All rights reserved.</p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Iframe credentialless gives developers a way to load documents in third party

  iframe using new and ephemeral network/storage/cookies context. In return, the <a href="https://wicg.github.io/cross-origin-embedder-policy/">Cross-Origin-Embedder-Policy</a> (COEP) embedding rules can be lifted.</p>
   <p>Developers using COEP can now embed third party iframes that do not.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#recommended-readings"><span class="secno">1.1</span> <span class="content">Recommended readings</span></a>
     </ol>
    <li><a href="#problem"><span class="secno">2</span> <span class="content">A problem</span></a>
    <li>
     <a href="#explainer"><span class="secno">3</span> <span class="content">Explainer</span></a>
     <ol class="toc">
      <li><a href="#proposal-whatis"><span class="secno">3.1</span> <span class="content">What are iframes credentialless?</span></a>
      <li><a href="#proposal-credentials"><span class="secno">3.2</span> <span class="content">Credentialless iframes and credentials</span></a>
      <li><a href="#proposal-interactions"><span class="secno">3.3</span> <span class="content">How do credentialless iframes interact with COEP</span></a>
      <li><a href="#proposal-autofill"><span class="secno">3.4</span> <span class="content">Credentialless iframes and autofill/password managers</span></a>
      <li><a href="#proposal-coep-credentialless"><span class="secno">3.5</span> <span class="content">Comparison with COEP:credentialless</span></a>
     </ol>
    <li>
     <a href="#alternatives"><span class="secno">4</span> <span class="content">Alternatives considered</span></a>
     <ol class="toc">
      <li><a href="#alternatives-sandbox"><span class="secno">4.1</span> <span class="content">Sandboxed iframe</span></a>
      <li><a href="#alternatives-opaque-origins"><span class="secno">4.2</span> <span class="content">Opaque origins</span></a>
      <li><a href="#alternatives-coep-credentialless"><span class="secno">4.3</span> <span class="content">Make COEP:credentialless to affect <code>&lt;iframe></code></span></a>
     </ol>
    <li><a href="#tests"><span class="secno">5</span> <span class="content">Tests</span></a>
    <li>
     <a href="#specification"><span class="secno">6</span> <span class="content">Specification</span></a>
     <ol class="toc">
      <li>
       <a href="#spec-html"><span class="secno">6.1</span> <span class="content">Integration with HTML</span></a>
       <ol class="toc">
        <li><a href="#spec-iframe-attribute"><span class="secno">6.1.1</span> <span class="content">The Iframe attribute</span></a>
        <li><a href="#spec-window-attribute"><span class="secno">6.1.2</span> <span class="content">The Window attribute</span></a>
        <li><a href="#spec-new-browsing-context"><span class="secno">6.1.3</span> <span class="content">Creating new browsing context</span></a>
        <li><a href="#spec-navigating-browsing-context"><span class="secno">6.1.4</span> <span class="content">Navigating a browsing context</span></a>
        <li><a href="#spec-popup-noopener"><span class="secno">6.1.5</span> <span class="content">Open popup with noopener</span></a>
        <li><a href="#spec-section"><span class="secno">6.1.6</span> <span class="content">General section</span></a>
        <li><a href="#spec-coep-embedder-check"><span class="secno">6.1.7</span> <span class="content">COEP embedder checks</span></a>
        <li><a href="#spec-autofill"><span class="secno">6.1.8</span> <span class="content">Autofill</span></a>
        <li>
         <a href="#spec-environment-partition-nonce"><span class="secno">6.1.9</span> <span class="content">Environment’s partition nonce</span></a>
         <ol class="toc">
          <li><a href="#spec-navigation-partition-nonce"><span class="secno">6.1.9.1</span> <span class="content">For Navigation</span></a>
          <li><a href="#spec-window-partition-nonce"><span class="secno">6.1.9.2</span> <span class="content">For Window</span></a>
          <li><a href="#spec-worker-partition-nonce"><span class="secno">6.1.9.3</span> <span class="content">For Worker</span></a>
          <li><a href="#spec-worklet-partition-nonce"><span class="secno">6.1.9.4</span> <span class="content">For Worklet</span></a>
         </ol>
       </ol>
      <li>
       <a href="#spec-fetch"><span class="secno">6.2</span> <span class="content">Integration with Fetch</span></a>
       <ol class="toc">
        <li><a href="#spec-network-partition-key"><span class="secno">6.2.1</span> <span class="content">Plumb the partition-nonce</span></a>
       </ol>
      <li><a href="#spec-chips"><span class="secno">6.3</span> <span class="content">Integration with CHIPS</span></a>
      <li><a href="#spec-storage-partitioning"><span class="secno">6.4</span> <span class="content">Integration with storage-partitioning</span></a>
      <li>
       <a href="#spec-storage"><span class="secno">6.5</span> <span class="content">Integration with storage</span></a>
       <ol class="toc">
        <li><a href="#spec-storage-key"><span class="secno">6.5.1</span> <span class="content">storage-key</span></a>
       </ol>
     </ol>
    <li>
     <a href="#security"><span class="secno">7</span> <span class="content">Security considerations</span></a>
     <ol class="toc">
      <li><a href="#threat-model"><span class="secno">7.1</span> <span class="content">Threat model</span></a>
      <li><a href="#security-existing-credentials"><span class="secno">7.2</span> <span class="content">Usage of existing credentials</span></a>
      <li><a href="#security-new-credentials"><span class="secno">7.3</span> <span class="content">Usage of new credentials</span></a>
      <li><a href="#security-network-id"><span class="secno">7.4</span> <span class="content">Personalized resources based on network position</span></a>
      <li><a href="#security-user-input-capture"><span class="secno">7.5</span> <span class="content">Capture of user input</span></a>
      <li><a href="#security-side-channel"><span class="secno">7.6</span> <span class="content">Credentialless iframes using side-channels to personalize themselves</span></a>
     </ol>
    <li><a href="#privacy"><span class="secno">8</span> <span class="content">Privacy considerations</span></a>
    <li>
     <a href="#questionnaire"><span class="secno">9</span> <span class="content">Self-Review Questionnaire</span></a>
     <ol class="toc">
      <li><a href="#questionnaire-purpose"><span class="secno">9.1</span> <span class="content">What information might this feature expose to Web sites or other parties, and for what purposes is that exposure necessary?</span></a>
      <li><a href="#questionnaire-minimum-data"><span class="secno">9.2</span> <span class="content">Do features in your specification expose the minimum amount of information necessary to enable their intended uses?</span></a>
      <li><a href="#questionnaire-personal-data"><span class="secno">9.3</span> <span class="content">How do the features in your specification deal with personal information, personally-identifiable information (PII), or information derived from them?</span></a>
      <li><a href="#questionnaire-sensitive-data"><span class="secno">9.4</span> <span class="content">How do the features in your specification deal with sensitive information?</span></a>
      <li><a href="#questionnaire-persistent-origin-specific-state"><span class="secno">9.5</span> <span class="content">Do the features in your specification introduce new state for an origin that persists across browsing sessions?</span></a>
      <li><a href="#questionnaire-underlying-platform-data"><span class="secno">9.6</span> <span class="content">Do the features in your specification expose information about the underlying platform to origins?</span></a>
      <li><a href="#questionnaire-send-to-platform"><span class="secno">9.7</span> <span class="content">Does this specification allow an origin to send data to the underlying platform?</span></a>
      <li><a href="#questionnaire-sensor-data"><span class="secno">9.8</span> <span class="content">Do features in this specification allow an origin access to sensors on a user’s device?</span></a>
      <li><a href="#questionnaire-string-to-script"><span class="secno">9.9</span> <span class="content">Do features in this specification enable new script execution/loading mechanisms?</span></a>
      <li><a href="#questionnaire-remote-device"><span class="secno">9.10</span> <span class="content">Do features in this specification allow an origin to access other devices?</span></a>
      <li><a href="#questionnaire-native-ui"><span class="secno">9.11</span> <span class="content">Do features in this specification allow an origin some measure of control over a user agent’s native UI?</span></a>
      <li><a href="#questionnaire-temporary-id"><span class="secno">9.12</span> <span class="content">What temporary identifiers do the feautures in this specification create or expose to the web?</span></a>
      <li><a href="#questionnaire-first-third-party"><span class="secno">9.13</span> <span class="content">How does this specification distinguish between behavior in first-party and third-party contexts?</span></a>
      <li><a href="#questionnaire-private-browsing"><span class="secno">9.14</span> <span class="content">How do the features in this specification work in the context of a browser’s Private Browsing or Incognito mode?</span></a>
      <li><a href="#questionnaire-considerations"><span class="secno">9.15</span> <span class="content">Does this specification have both "Security Considerations" and "Privacy Considerations" sections?</span></a>
      <li><a href="#questionnaire-relaxed-sop"><span class="secno">9.16</span> <span class="content">Do features in your specification enable origins to downgrade default security protections?</span></a>
      <li><a href="#questionnaire-non-fully-active"><span class="secno">9.17</span> <span class="content">How does your feature handle non-"fully active" documents?</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is not normative.</em></p>
   <h3 class="heading settled" data-level="1.1" id="recommended-readings"><span class="secno">1.1. </span><span class="content">Recommended readings</span><a class="self-link" href="#recommended-readings"></a></h3>
   <ul>
    <li data-md>
     <p>The <a data-link-type="biblio" href="#biblio-spectre" title="Spectre Attacks: Exploiting Speculative Execution">[Spectre]</a> vulnerability.</p>
    <li data-md>
     <p>The <a data-link-type="biblio" href="#biblio-coep-require-corp" title="COEP">[COEP-require-corp]</a> and <a data-link-type="biblio" href="#biblio-coep-credentialless" title="COEP: credentialless">[COEP-credentialless]</a> headers.</p>
    <li data-md>
     <p>How and why <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#cross-origin-opener-policies" id="ref-for-cross-origin-opener-policies">Cross-Origin-Opener-Policy</a> (<a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#cross-origin-opener-policies" id="ref-for-cross-origin-opener-policies①">COOP</a>) and <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep">Cross-Origin-Embedder-Policy</a> (<a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep①">COEP</a>) are granting the <a href="concept-settings-object-cross-origin-isolated-capability">crossOriginIsolated</a> capability. See <a data-link-type="biblio" href="#biblio-whycoopcoep" title="Why you need &quot;cross-origin isolated&quot; for powerful features">[WhyCoopCoep]</a>.</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="problem"><span class="secno">2. </span><span class="content">A problem</span><a class="self-link" href="#problem"></a></h2>
   <p><em>This section is not normative.</em></p>
   <p>Deploying <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep②">COEP</a> is difficult for some developers, because of third party
iframes. Here is the typical scenario:</p>
   <ol>
    <li data-md>
     <p>End users needs performant websites.</p>
    <li data-md>
     <p>Some developers get performant websites, by using
 multithreading/<code class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/#sec-sharedarraybuffer-objects" id="ref-for-sec-sharedarraybuffer-objects">SharedArrayBuffer</a></code> in their top-level document.</p>
    <li data-md>
     <p>To mitigate <a data-link-type="biblio" href="#biblio-spectre" title="Spectre Attacks: Exploiting Speculative Execution">[Spectre]</a> attacks, browsers vendors like Chrome, Firefox and
 Safari gate <code class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/#sec-sharedarraybuffer-objects" id="ref-for-sec-sharedarraybuffer-objects①">SharedArrayBuffer</a></code> usage behind the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-settings-object-cross-origin-isolated-capability" id="ref-for-concept-settings-object-cross-origin-isolated-capability">crossOriginIsolated</a> capability. This requires deploying both <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep③">COEP</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#cross-origin-opener-policies" id="ref-for-cross-origin-opener-policies②">COOP</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep④">COEP</a> requirement is recursive: third party iframes are required to
 deploy <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep⑤">COEP</a> in order to be embeddable inside a <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep⑥">COEP</a> parent.</p>
    <li data-md>
     <p>Waiting for third party to deploy <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep⑦">COEP</a> is painful for developers. This
 is often out of their control most of the time.</p>
   </ol>
   <p>Beyond performance, there are additionnal features gated behind the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-settings-object-cross-origin-isolated-capability" id="ref-for-concept-settings-object-cross-origin-isolated-capability①">crossOriginIsolated</a> capability: <a data-link-type="dfn" href="https://www.w3.org/TR/hr-time//issues/1#issuecomment-812" id="ref-for-issuecomment-812">high resolution timers</a>, <a data-link-type="dfn" href="https://github.com/w3c/mediacapture-viewport#/issues/1" id="ref-for-/issues/1">getViewportMedia</a>, etc...</p>
   <p>Deploying <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep⑧">COEP</a> is challenging in cases where there’s not a single developer
involved, but many. Google Ads, for example, includes third-party content, and
it seems somewhat unlikely that they’ll be able to ensure that all the ads
creators will do the work to opt-into being loadable.</p>
   <h2 class="heading settled" data-level="3" id="explainer"><span class="secno">3. </span><span class="content">Explainer</span><a class="self-link" href="#explainer"></a></h2>
   <p><em>This section is not normative.</em></p>
   <p><a data-link-type="biblio" href="#biblio-coep-require-corp" title="COEP">[COEP-require-corp]</a> currently tackles data leak attacks by ensuring that
cross-origin resources explicitly opt into being loaded in an environment with
higher risks. This way, servers can protect vulnerable resources by not having
them opt into being loaded in high risk environments.</p>
   <p>It would be ideal if we could find an approach that provided robust-enough
protection against accidental cross-process leakage without requiring an
explicit opt-in.</p>
   <p><a data-link-type="biblio" href="#biblio-coep-credentialless" title="COEP: credentialless">[COEP-credentialless]</a> fixed the problem for simple subresources: Instead of
requiring an opt-in from the response, the resource is requested without
credentials. This way, only public resources are potentially leaked to the
attacker. They don’t bring any additional value to the attacker.</p>
   <p><strong>Credentialless iframes</strong> are similar, but for <code>&lt;iframe></code>.
Iframes are more difficult to tackle. They not only fetch a resource via a
navigation request, but also create a new context. The new context is able to
fetch data on its own. It can also access data from storage APIs: <a data-link-type="biblio" href="#biblio-webstorage" title="Web Storage (Second Edition)">[WebStorage]</a>, <a data-link-type="biblio" href="#biblio-indexeddb" title="Indexed Database API">[IndexedDB]</a>, <a data-link-type="biblio" href="#biblio-web-sql" title="Web SQL Database">[web-sql]</a>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#broadcasting-to-other-browsing-contexts" id="ref-for-broadcasting-to-other-browsing-contexts">BroadcastChannel</a>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#sharedworer" id="ref-for-sharedworer">SharedWorker</a>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#service-worker-obj" id="ref-for-service-worker-obj">ServiceWorker</a>, etc</p>
   <p>Credentialless iframes is a flag to load documents in iframes, using a new and
ephemeral context. This ensures only a "public" version of the embedded website
can be leaked to the attacker.</p>
   <h3 class="heading settled" data-level="3.1" id="proposal-whatis"><span class="secno">3.1. </span><span class="content">What are iframes credentialless?</span><a class="self-link" href="#proposal-whatis"></a></h3>
   <p>Documents can create an iframe credentialless by adding an <code>credentialless</code> attribute to the iframe tag:</p>
<pre class="language-html highlight"><c- p>&lt;</c-><c- f>iframe</c-> <c- e>credentialless</c-> <c- e>src</c-><c- o>=</c-><c- s>”https://example.com”</c-><c- p>>&lt;/</c-><c- f>iframe</c-><c- p>></c->
</pre>
   <p>This property is stored on the iframe. It is also stored and inherited to new <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window">Window</a> loaded inside e.g.:</p>
   <p><img alt="credentialless inheritance" src="./resources/inheritance.png"></p>
   <p><em>Credentialless flag inheritance.</em></p>
   <p>The attribute can be changed programmatically on the <code>&lt;iframe></code>. It will take
effect on new <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window①">Window</a> loaded inside. It means the effect will only take place
after an additional navigation.</p>
   <p>The state of the credentialless flag is exposed to the <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window②">Window</a> through a read-only
constant attribute:</p>
<pre class="language-js highlight">window<c- p>.</c->credentialless
</pre>
   It is true for <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window③">Window</a> loaded immediately inside an credentialless iframe, or
deeper below it. 
   <h3 class="heading settled" data-level="3.2" id="proposal-credentials"><span class="secno">3.2. </span><span class="content">Credentialless iframes and credentials</span><a class="self-link" href="#proposal-credentials"></a></h3>
   <p>Iframes credentialless cannot use existing credentials and shared storage for
their origin. They are given a blank slate. Unlike sandboxed frames, they can
use storage APIs and register cookies. However, those credentials and storage
can only be shared by documents in credentialless iframes in the page (provided
they meet origin restrictions). They will no longer be accessible once the user
has navigate toward a different top-level document. Essentially, credentialless
iframes are given a temporary <a href="https://storage.spec.whatwg.org/#storage-shelf">storage
shelf</a> partitioned to
credentialless iframes in the current top-level document.</p>
   <p>To achieve this, we rely on modifying the <a href="https://storage.spec.whatwg.org/#storage-key" id="termref-for-storage-key">storage
key</a> used to access shared storage
by credentialless iframes. As part of the <a href="https://privacycg.github.io/storage-partitioning/">client-side storage partitioning
effort</a> (declined across <a href="https://github.com/wanderview/quota-storage-partitioning/blob/main/explainer.md">storage
APIs</a>, <a href="https://github.com/MattMenke2/Explainer---Partition-Network-State">network
state</a> and <a href="https://github.com/DCtheTall/CHIPS">Cookie State</a>), the storage key of an
environment will no longer be its simple origin as currently described in the
spec. Instead it will be a combination of the origin and the top-level site URL.
In an credentialless iframe, we will replace the top-level site URL in the
partition key by a nonce value, determined once per top-level document. As a
result, the nonce is shared for every credentialless iframe that is a descendant
of the same top-level document. Because the nonce is different every time the
user navigate to a different document, credentialless iframes do not share
storage across different pages, or across cross-document navigations.</p>
   <p><img alt="nonce in partition-key" src="./resources/partition-key.png"></p>
   <p><em>Storage and credentials are only shared among credentialless iframes, following normal site/origin access checks.</em></p>
   <p><img alt="page’s nonce" src="./resources/page-change-nonce.png"></p>
   <p>*Storage and credentials created by credentialless iframes are no longer
accessible after the top level frame navigated away toward a different top-level
document, because the Storage key for credentialless iframes will be different.
It means when the top-level document is released after a navigation, the storage
used by credentialless iframes can be cleared by the browser, because it will
never be used anymore.</p>
   <p>The back-forward cache can keep the top-level document and its credentialless
iframe alive for longer. The nonce assigned to them continue to be used when the
they are restored.</p>
   <p>Popups opened by credentialless iframes are not credentialless. However, we
impose that popups opened by credentialless iframes are opened with rel =
noopener set. This is done to prevent OAuth popup flows from being used in
credentialless iframes. See the <a data-link-type="dfn" href="/#threat-model" id="ref-for-threat-model">threat model</a> part for a discussion on why
we impose this restriction.</p>
   <h3 class="heading settled" data-level="3.3" id="proposal-interactions"><span class="secno">3.3. </span><span class="content">How do credentialless iframes interact with COEP</span><a class="self-link" href="#proposal-interactions"></a></h3>
   <p>Our proposition is that credentialless iframes are safe enough to embed in a
COEP page, even if they haven’t opted to do so by sending a COEP header. Thus,
when navigating to a document in an credentialless iframe, we do not check
whether it has a COEP and CORP header, even if its parent does not have a COEP
of unsafe-none.</p>
   <p>This also means that credentialless iframes can be embedded in cross-origin
isolated pages without documents in them having to deploy COEP.</p>
   <h3 class="heading settled" data-level="3.4" id="proposal-autofill"><span class="secno">3.4. </span><span class="content">Credentialless iframes and autofill/password managers</span><a class="self-link" href="#proposal-autofill"></a></h3>
   <p>Browsers that implement autofill or password manager functionalities should make
them unavailable in credentialless iframes. The goal of credentialless iframes
is to preserve storage critical to an iframe function, but to avoid users
logging into credentialless iframes. Autofill and password managers make logging
in easier, and so should be avoided to prevent users accidentally logging in.
This also allows credentialless iframes to have a <a data-link-type="dfn" href="/#threat-model" id="ref-for-threat-model①">threat model</a> similar to
a phishing page (see the <a data-link-type="dfn" href="/#threat-model" id="ref-for-threat-model②">Threat model</a> part of this explainer below)</p>
   <h3 class="heading settled" data-level="3.5" id="proposal-coep-credentialless"><span class="secno">3.5. </span><span class="content">Comparison with COEP:credentialless</span><a class="self-link" href="#proposal-coep-credentialless"></a></h3>
   <p><code>COEP:credentialless</code> and <code>iframe credentialless</code> are two proposals sharing the
same goal: helping developers to deploy COEP. Both are based on the idea
public resources are worthless to an attacker. Public data can enter a process
safely without an explicit opt-in from the server. The attacker on the same
process can read the data back using Spectre, but won’t get any benefits.</p>
   <p>The comparison do not extend further than that. The two features implementations
are very different. One is for simple subresources loaded into the document, the
other is for loading different documents in <code>&lt;iframe></code>.</p>
   <p>The name <code>credentialless</code> means something very different:</p>
   <ul>
    <li data-md>
     <p><code>COEP:credentialless</code>: it means loading <code>no-cors</code> request without
credentials (e.g. Cookies).</p>
    <li data-md>
     <p><code>Iframe credentialless</code>: it means mainly associating the document with a
fresh and short lived Cookie/Network/Storage state context.</p>
   </ul>
   <h2 class="heading settled" data-level="4" id="alternatives"><span class="secno">4. </span><span class="content">Alternatives considered</span><a class="self-link" href="#alternatives"></a></h2>
   <p><em>This section is not normative.</em></p>
   <h3 class="heading settled" data-level="4.1" id="alternatives-sandbox"><span class="secno">4.1. </span><span class="content">Sandboxed iframe</span><a class="self-link" href="#alternatives-sandbox"></a></h3>
   <p>Sandboxed iframes without the allow-same-origin flag do not have access to
storage APIs or cookies for their subresource requests. However, the document of
a sandbox iframe can still be requested with credentials, which does not fit the <a data-link-type="dfn" href="/#threat-model" id="ref-for-threat-model③">threat model</a>. We could change sandboxed iframes so that documents are
also requested without credentials.</p>
   <p>So why are we proposing introducing a new attribute instead of just using
sandboxed iframes with a new sandbox flag?</p>
   <p>First, changing the behavior of sandboxed iframes so that their main resource is
always requested without credentials could break existing websites, as opposed
to introducing a new concept.</p>
   <p>Second, we want to minimize the amount of disruption imposed to the content
inside the iframe. Using sandboxed iframes means the iframes cannot use cookies
or storage APIs at all, nor could they access any other frame in the document.
We are worried that this would limit the deployability of the credentialless
solution for opting into crossOriginIsolation. We’re looking to provide
developers with a solution that is as deployable as possible, which is why we’d
rather introduce a new solution that imposes as few restrictions to the iframes
as possible.</p>
   <p>We could try to codify these restrictions as a sandbox flag, e.g.
allow-partitioned-storage. This is probably hard to reconcile with the storage
access sandbox flag shipped by Firefox and Safari, especially since a new
sandbox flag would be off by default.</p>
   <p>This in turn is another issue with relying on sandboxed iframes for COEP
deployment. Because all flags are off by default, any new flag could impact the
behavior of sandboxed iframes. Not to mention that the syntax is a bit complex
due to the need to add every flag but the allow-same-origin to get all
functionality but access to cookies/storage.</p>
   <h3 class="heading settled" data-level="4.2" id="alternatives-opaque-origins"><span class="secno">4.2. </span><span class="content">Opaque origins</span><a class="self-link" href="#alternatives-opaque-origins"></a></h3>
   <p>The credentialless iframes model that we propose relies on partitioned storage
(see explainer), using a nonce in the storage key. We have also considered
attributing opaque origins to the credentialless iframes, similar to sandboxed
iframes. This would ensure that the credentialless iframes do not have access to
existing credentials and shared storage since their origin has been changed to
an opaque one.</p>
   <p>This solution runs into compatibility issues:</p>
   <ul>
    <li data-md>
     <p>To allow credentialless iframes to access one another if they are coming from
the same origin we must maintain a mapping of original origin to opaque origin
for each credentialless iframe subtree, which is complex.</p>
    <li data-md>
     <p>We would probably need to standardize what happens when a frame with an opaque
origin wants to access a storage API since sandboxed iframes with opaque
origins do not have access to storage APIs at all.</p>
    <li data-md>
     <p>It is not clear how this would interact with other checks pertaining on origin
(e.g. X-Frame-Options, various CSP checks, …) potentially leading to further
breakages.</p>
   </ul>
   <h3 class="heading settled" data-level="4.3" id="alternatives-coep-credentialless"><span class="secno">4.3. </span><span class="content">Make COEP:credentialless to affect <code>&lt;iframe></code></span><a class="self-link" href="#alternatives-coep-credentialless"></a></h3>
   <p>Originally, <code>COEP:credentialless</code> scope was meant to include both simple
subresources like it does today, but also the <code>&lt;iframe></code>. The latter is very
  different in kind, because this is not only about the request’s credentials,
  but also about every storage API usage made later by the document. So it has
  been postponed here.</p>
   <p>The difficulty is that most of the time, a website will include a mix of:</p>
   <ul>
    <li data-md>
     <p>Cross-origin <code>&lt;iframe></code> where credentials are important. The URL is
known to the parent, so it can reasonably ask its children website to be
updated so that COEP and CORP headers will be sent. It can wait for the child
to opt-in being embedded.</p>
    <li data-md>
     <p>Cross-Origin <code>&lt;iframe></code> like ads. The credentials do not really matters, and
the parent do not really control the website being loaded.</p>
   </ul>
   <p>So, it is important for the parent to be able to make the decision on a
per-iframe basis. Please note that the decision can never be made directly by
the children, because this affects the navigation’s request’s credentials. It
would be too late.</p>
   <p>With <code>COEP:credentialless</code>, site authors can decide to send credentials on a
per-resource basis, by tweaking the <code>request.mode</code> and decide in between <code>cors</code> and <code>no-cors</code>. One requires the subresource to opt-in being embedded, the other
omit credentials.</p>
   <p>We need a similar mechanism for the <code>&lt;iframe></code> element. This became the <code>credentialless</code> attribute as a result.</p>
   <h2 class="heading settled" data-level="5" id="tests"><span class="secno">5. </span><span class="content">Tests</span><a class="self-link" href="#tests"></a></h2>
   <p>Status: <a href="https://wpt.fyi/results/html/credentialless-iframe/">https://wpt.fyi/results/html/credentialless-iframe/</a></p>
   <h2 class="heading settled" data-level="6" id="specification"><span class="secno">6. </span><span class="content">Specification</span><a class="self-link" href="#specification"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="spec-html"><span class="secno">6.1. </span><span class="content">Integration with HTML</span><a class="self-link" href="#spec-html"></a></h3>
   <p class="note" role="note"><span class="marker">Note:</span> This corresponds to the following HTML specification change: <a href="https://github.com/whatwg/html/pull/7695">whatwg/html/pull/7695</a>. <br> When merged this section will become obsolete.</p>
   <h4 class="heading settled" data-level="6.1.1" id="spec-iframe-attribute"><span class="secno">6.1.1. </span><span class="content">The Iframe attribute</span><a class="self-link" href="#spec-iframe-attribute"></a></h4>
   <p>In the <a href="https://html.spec.whatwg.org/#the-iframe-element">the iframe element</a> section, define the HTML <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#the-iframe-element" id="ref-for-the-iframe-element">iframe</a> <a data-link-type="dfn" href="#attr-iframe-credentialless" id="ref-for-attr-iframe-credentialless">credentialless</a> attribute:</p>
   <div class="monkey-patch"> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="attr-iframe-credentialless" data-noexport id="attr-iframe-credentialless">credentialless</dfn> attribute, enables loading documents hosted by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a> with a
new and ephemeral storage partition. It is a boolean value. The default is
false. </div>
   <p>It is exposed to the Javascript <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#HTMLIframeElement" id="ref-for-HTMLIframeElement">HTMLIFrameElement</a> interface:</p>
   <div class="monkey-patch">
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="idl-code" data-dfn-type="interface" data-export id="htmliframeelement"><code><c- g>HTMLIFrameElement</c-></code><a class="self-link" href="#htmliframeelement"></a></dfn> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement" id="ref-for-htmlelement"><c- n>HTMLElement</c-></a> {
  // [...]
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="idl-code" data-dfn-for="HTMLIFrameElement" data-dfn-type="attribute" data-export data-type="boolean" id="dom-htmliframeelement-credentialless"><code><c- g>credentialless</c-></code><a class="self-link" href="#dom-htmliframeelement-credentialless"></a></dfn>;
  // [...]
};
</pre>
    <p>The IDL attributes <dfn data-dfn-type="dfn" data-export data-lt="dom-iframe-credentialless" id="dom-iframe-credentialless">credentialless<a class="self-link" href="#dom-iframe-credentialless"></a></dfn>,
must <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-reflect" id="ref-for-concept-reflect">reflect</a> the respective content attributes of the same name.</p>
   </div>
   <h4 class="heading settled" data-level="6.1.2" id="spec-window-attribute"><span class="secno">6.1.2. </span><span class="content">The Window attribute</span><a class="self-link" href="#spec-window-attribute"></a></h4>
   <p>Add a read-only constant <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless">credentialless</a></code> attribute
to the <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window④">Window</a> object.</p>
   <div class="monkey-patch">
<pre class="idl highlight def">[
  <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Global" id="ref-for-Global"><c- g>Global</c-></a>=<a data-link-type="idl-name" href="#window" id="ref-for-window⑤"><c- n>Window</c-></a>,
  <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->,
  <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyUnenumerableNamedProperties" id="ref-for-LegacyUnenumerableNamedProperties"><c- g>LegacyUnenumerableNamedProperties</c-></a>
]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="window"><code><c- g>Window</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
  // ...
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="attribute" data-export data-readonly data-type="boolean" id="dom-window-credentialless"><code><c- g>credentialless</c-></code></dfn>;
  // ...
};
</pre>
   </div>
   <h4 class="heading settled" data-level="6.1.3" id="spec-new-browsing-context"><span class="secno">6.1.3. </span><span class="content">Creating new browsing context</span><a class="self-link" href="#spec-new-browsing-context"></a></h4>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#creating-a-new-browsing-context" id="ref-for-creating-a-new-browsing-context">creating a new browsing context</a> section:
Add step 5:</p>
   <div class="monkey-patch">
    <ol start="5">
     <li data-md>
      <p>Let <var>credentialless</var> be the result of determining the <a data-link-type="dfn" href="#initial-window-credentialless" id="ref-for-initial-window-credentialless">initial window credentialless</a> flag, given <var>browsingContext</var>.</p>
    </ol>
   </div>
   <p>Then later, use it for creating a new <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window⑥">Window</a>.</p>
   <div class="monkey-patch">
    <ul>
     <li data-md>
      <p>For the global object, create a new <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window⑦">Window</a> object<span class="customHighlight">, with <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless①">credentialless</a></code> set to <var>credentialless</var>.</span></p>
    </ul>
   </div>
   <h4 class="heading settled" data-level="6.1.4" id="spec-navigating-browsing-context"><span class="secno">6.1.4. </span><span class="content">Navigating a browsing context</span><a class="self-link" href="#spec-navigating-browsing-context"></a></h4>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#navigation-params" id="ref-for-navigation-params">navigation params</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">struct</a>, adds the credentialless parameter:</p>
   <div class="monkey-patch">
    <dl>
     <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="navigation-params-credentialless" data-noexport id="navigation-params-credentialless">credentialless</dfn>
     <dd>The <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless②">credentialless</a></code> flag to impose on the new <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window⑧">Window</a>
    </dl>
   </div>
   <hr>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate">navigate</a> algorithm, adds step 18:</p>
   <div class="monkey-patch">
    <ol start="18">
     <li data-md>
      <p>Let <var>credentialless</var> be the result of computing the <a data-link-type="dfn" href="#navigation-credentialless" id="ref-for-navigation-credentialless">navigation’s credentialless flag</a>, given <var>browsingContext</var>.</p>
     <p></p>
    </ol>
   </div>
   <p>Then later in the same algorithm, use this variable to build the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#navigation-params" id="ref-for-navigation-params①">navigation
params</a>.</p>
   <p>It is also passed as a new argument to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#process-a-navigate-fetch" id="ref-for-process-a-navigate-fetch">process a navigate fetch</a> algorithm, which is also used to create a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#navigation-params" id="ref-for-navigation-params②">navigation params</a>.</p>
   <hr>
   <p>Then, in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#initialise-the-document-object" id="ref-for-initialise-the-document-object">initialize the document object</a> algorithm:</p>
   <p>When creating a new <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window⑨">Window</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc">browsing context</a>, pass the <var>credentialless</var> value.</p>
   <div class="monkey-patch">
    <ul>
     <li data-md>
      <p>For the global object, create a new <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window①⓪">Window</a> object<span class="customHighlight">, with <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless③">credentialless</a></code> set to <var>navigationParams</var>’s <a data-link-type="dfn" href="#navigation-params-credentialless" id="ref-for-navigation-params-credentialless">credentialless</a>.</span></p>
    </ul>
   </div>
   <hr>
   <p>The <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window①①">Window</a> object must not be reused, when it would lead to keeping an
credentialless flag different from what is in the navigation params.</p>
   <p>Example: This is useful in this case:</p>
<pre class="language-js highlight"><c- a>const</c-> iframe <c- o>=</c-> document<c- p>.</c->body<c- p>.</c->createElement<c- p>(</c-><c- u>"iframe"</c-><c- p>);</c->
iframe<c- p>.</c->credentialless <c- o>=</c-> <c- kc>true</c-><c- p>;</c->
document<c- p>.</c->body<c- p>.</c->appendChild<c- p>(</c->iframe<c- p>);</c->
iframe<c- p>.</c->credentialless <c- o>=</c-> <c- kc>false</c-><c- p>;</c->
iframe<c- p>.</c->src <c- o>=</c-> <c- u>"https://example.test"</c-><c- p>;</c->
<c- c1>// Window for about:blank and for https://example.test must be different.</c->
</pre>
   <div class="monkey-patch">
    <ul>
     <li data-md>
      <p>If <var>browsingContext</var> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#still-on-its-initial-about:blank-document" id="ref-for-still-on-its-initial-about:blank-document">still on its initial about:blank Document</a>, and <var>navigationParams</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#navigation-params-hh" id="ref-for-navigation-params-hh">history handling</a> is "<a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#hh-replace" id="ref-for-hh-replace">replace</a>", and <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document">active document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-document-origin" id="ref-for-concept-document-origin">origin</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain" id="ref-for-same-origin-domain">same origin-domain</a> with <var>navigationParams</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#navigation-params-origin" id="ref-for-navigation-params-origin">origin</a>, <span class="customHighlight">and <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#active-window" id="ref-for-active-window">active window</a>’s <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless④">credentialless</a></code> flag matches <var>navigationParams</var>’s <a data-link-type="dfn" href="#navigation-params-credentialless" id="ref-for-navigation-params-credentialless①">credentialless</a> flag</span>, then do
nothing.</p>
      <p></p>
      <p class="note" role="note"><span class="marker">Note:</span> This means that both the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#is-initial-about:blank" id="ref-for-is-initial-about:blank">initial
about:blank</a> <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">Document</a>, and the new <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①">Document</a> that is
about to be created, will share the same <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window①②">Window</a> object.</p>
      <p></p>
    </ul>
   </div>
   <div></div>
   <h4 class="heading settled" data-level="6.1.5" id="spec-popup-noopener"><span class="secno">6.1.5. </span><span class="content">Open popup with noopener</span><a class="self-link" href="#spec-popup-noopener"></a></h4>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#window-open-steps" id="ref-for-window-open-steps">window open steps</a>, adds step 5:</p>
   <div class="monkey-patch">
    <ol start="5">
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#entry-global-object" id="ref-for-entry-global-object">entry global object</a>’s <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless⑤">credentialless</a></code> flag is true, then set <var>noopener</var> to true.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.1.6" id="spec-section"><span class="secno">6.1.6. </span><span class="content">General section</span><a class="self-link" href="#spec-section"></a></h4>
   <p>Add an "Credentialless iframe" sub-section inside <a href="https://html.spec.whatwg.org/C/#browsers">Loading web
pages</a> section, in between the <a href="https://html.spec.whatwg.org/C/#sandboxing">Sandboxing
one</a> and the <a href="https://html.spec.whatwg.org/C/#sandboxing">Sandboxing
one</a> and the <a href="https://html.spec.whatwg.org/C/#cross-origin-opener-policies" id="termref-for-cross-origin-opener-policies">Cross-origin opener
policies</a> ones:</p>
   <div class="monkey-patch"> <strong>7.7 Credentialless iframe</strong> </div>
   <div class="monkey-patch"> Each <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-requestdestination-iframe" id="ref-for-dom-requestdestination-iframe">iframe</a></code> element has a mutable <a data-link-type="dfn" href="#attr-iframe-credentialless" id="ref-for-attr-iframe-credentialless①">credentialless</a> flag attribute. </div>
   <div class="monkey-patch">
     Each <code class="idl"><a data-link-type="idl" href="#window" id="ref-for-window①③">Window</a></code> has a constant <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless⑥">credentialless</a></code> flag. 
    <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="credentialless-window">credentialless Window</dfn> is a <code class="idl"><a data-link-type="idl" href="#window" id="ref-for-window①④">Window</a></code>, whose <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless⑦">credentialless</a></code> flag is true.</p>
   </div>
   <div class="monkey-patch">
     To compute the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="initial-window-credentialless" id="initial-window-credentialless">initial window
  credentialless flag</dfn>, given a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-document-bc" id="ref-for-concept-document-bc">browsing
  context</a> <var>browsing context</var>: 
    <ol class="brief">
     <li>
      <p>Set <var>embedder</var> be <var>browsing context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#bc-container" id="ref-for-bc-container">container</a>.</p>
     <li>
      <p>If <var>embedder</var> is not an element, return false.</p>
     <li>
      <p>Otherwise, set <var>parentWindow</var> be the <var>embedder</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node
   document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a>.</p>
     <li>
      <p>Return the union of:</p>
      <ul class="brief">
       <li>
        <p><var>parentWindow</var>’s <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless⑧">credentialless</a></code></p>
       <li>
        <p><var>embedder</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#the-iframe-element" id="ref-for-the-iframe-element②">iframe</a>’s <a data-link-type="dfn" href="#attr-iframe-credentialless" id="ref-for-attr-iframe-credentialless②">credentialless</a></p>
      </ul>
    </ol>
   </div>
   <div class="monkey-patch"> To compute the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="navigation-credentialless" id="navigation-credentialless">navigation’s credentialless flag</dfn>,
given <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-document-bc" id="ref-for-concept-document-bc①">browsing context</a> <var>browsing
context</var>, follows the same steps as in the <a data-link-type="dfn" href="#initial-window-credentialless" id="ref-for-initial-window-credentialless①">initial window credentialless flag</a> algorithm. </div>
   <p>Add several notes in the general section, gathering changes spread elsewhere in
the other algorithms.</p>
   <div class="monkey-patch">
    <p class="note" role="note"><span class="marker">Note:</span> New <a data-link-type="dfn" href="https://drafts.csswg.org/css-color-3/#window" id="ref-for-window①⑤">Window</a>'s <code class="idl"><a data-link-type="idl" href="#dom-window-credentialless" id="ref-for-dom-window-credentialless⑨">credentialless</a></code> flag is computed either from the <a data-link-type="dfn" href="#initial-window-credentialless" id="ref-for-initial-window-credentialless②">initial window credentialless flag</a> algorithm for
new <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-document-bc" id="ref-for-concept-document-bc②">browsing context</a>, or from the <a data-link-type="dfn" href="#navigation-credentialless" id="ref-for-navigation-credentialless①">navigation’s credentialless flag</a> algorithm, executed
when the navigation started, for navigations inside pre-existing <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-document-bc" id="ref-for-concept-document-bc③">browsing context</a>.</p>
    <p class="note" role="note"><span class="marker">Note:</span> Popup opened from <a data-link-type="dfn" href="#credentialless-window" id="ref-for-credentialless-window">credentialless Window</a> are always with <code>noopener</code> set.</p>
    <p class="note" role="note"><span class="marker">Note:</span> Top-level <a data-link-type="dfn" href="#credentialless-window" id="ref-for-credentialless-window①">credentialless Window</a> do not exist.</p>
   </div>
   <h4 class="heading settled" data-level="6.1.7" id="spec-coep-embedder-check"><span class="secno">6.1.7. </span><span class="content">COEP embedder checks</span><a class="self-link" href="#spec-coep-embedder-check"></a></h4>
   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#coep" id="ref-for-coep⑨">COEP</a> embedding checks can be lifted.</p>
   <p>Add a new parameters <var>credentialless</var> parameter to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#check-a-navigation-response&apos;s-adherence-to-its-embedder-policy" id="ref-for-check-a-navigation-response&apos;s-adherence-to-its-embedder-policy">check a navigation
response’s adherence to its embedder policy</a> and pass <var>navigationParams</var>’s <a data-link-type="dfn" href="#navigation-params-credentialless" id="ref-for-navigation-params-credentialless②">credentialless</a>.</p>
   <div class="monkey-patch">
    <p>To <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#check-a-navigation-response&apos;s-adherence-to-its-embedder-policy" id="ref-for-check-a-navigation-response&apos;s-adherence-to-its-embedder-policy①">check a navigation response’s adherence to its embedder policy</a> given a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response">response</a> <var>response</var>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc①">browsing context</a> <var>target</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#policy-container-embedder-policy" id="ref-for-policy-container-embedder-policy">embedder policy</a> <var>responsePolicy</var>, <span class="customHighlight">and a boolean <var>credentialless</var></span>:</p>
    <ol>
     <li>
      <p>If <var>target</var> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#child-browsing-context" id="ref-for-child-browsing-context">child browsing context</a>, then
   return true.</p>
     <li>
      <p>Let <var>parentPolicy</var> be <var>target</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#bc-container-document" id="ref-for-bc-container-document">container document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-document-policy-container" id="ref-for-concept-document-policy-container">policy container</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#policy-container-embedder-policy" id="ref-for-policy-container-embedder-policy①">embedder policy</a>.</p>
     <li>
      <p>If <var>parentPolicy</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#embedder-policy-report-only-value" id="ref-for-embedder-policy-report-only-value">report-only value</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#compatible-with-cross-origin-isolation" id="ref-for-compatible-with-cross-origin-isolation">compatible
   with cross-origin isolation</a> and <var>responsePolicy</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#embedder-policy-value" id="ref-for-embedder-policy-value">value</a> is not, <span class="customHighlight">and <var>credentialless</var> is false</span>, then <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#queue-a-cross-origin-embedder-policy-inheritance-violation" id="ref-for-queue-a-cross-origin-embedder-policy-inheritance-violation">queue a cross-origin embedder policy inheritance violation</a> with <var>response</var>, "<code data-lt>navigation</code>", <var>parentPolicy</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#embedder-policy-report-only-reporting-endpoint" id="ref-for-embedder-policy-report-only-reporting-endpoint">report only reporting
   endpoint</a>, "<code data-lt>reporting</code>", and <var>target</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#bc-container-document" id="ref-for-bc-container-document①">container document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings
   object</a>.</p>
     <li>
      <p>If <var>parentPolicy</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#embedder-policy-value" id="ref-for-embedder-policy-value①">value</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#compatible-with-cross-origin-isolation" id="ref-for-compatible-with-cross-origin-isolation①">compatible with cross-origin isolation</a> or <var>responsePolicy</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#embedder-policy-value" id="ref-for-embedder-policy-value②">value</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#compatible-with-cross-origin-isolation" id="ref-for-compatible-with-cross-origin-isolation②">compatible with cross-origin isolation</a>, <span class="customHighlight">or <var>credentialless</var> is true, </span>then return
   true.</p>
     <li>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#queue-a-cross-origin-embedder-policy-inheritance-violation" id="ref-for-queue-a-cross-origin-embedder-policy-inheritance-violation①">Queue a cross-origin embedder policy inheritance violation</a> with <var>response</var>, "<code data-lt>navigation</code>", <var>parentPolicy</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#embedder-policy-reporting-endpoint" id="ref-for-embedder-policy-reporting-endpoint">reporting endpoint</a>, "<code data-lt>enforce</code>", and <var>target</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#bc-container-document" id="ref-for-bc-container-document②">container document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①">relevant settings
   object</a>.</p>
     <li>
      <p>Return false.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.1.8" id="spec-autofill"><span class="secno">6.1.8. </span><span class="content">Autofill</span><a class="self-link" href="#spec-autofill"></a></h4>
   <p>In the "Credentialless iframe" section. Defining the how web browser should configure
their autofilling features.</p>
   <div class="monkey-patch">
    <p><dfn data-dfn-type="dfn" data-export id="autofill-and-credentialless-iframe">Autofill and credentialless iframe<a class="self-link" href="#autofill-and-credentialless-iframe"></a></dfn>: User agents sometimes
    have features for helping users fill forms in: for example prefilling the
    user’s address, password, or payment informations. User agents must disable
    those features when the data is both specific to the user and to the
    website. </p>
   </div>
   <h4 class="heading settled" data-level="6.1.9" id="spec-environment-partition-nonce"><span class="secno">6.1.9. </span><span class="content">Environment’s partition nonce</span><a class="self-link" href="#spec-environment-partition-nonce"></a></h4>
   <p>In the "Credentialless iframe" section. Defining the <a data-link-type="dfn" href="#page-credentialless-nonce" id="ref-for-page-credentialless-nonce">page credentialless nonce</a>.</p>
   <div class="monkey-patch">
    <p>Each top-level <code class="idl"><a data-link-type="idl" href="#window" id="ref-for-window①⑥">Window</a></code> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="page credentialless nonce" id="page-credentialless-nonce">page credentialless
  nonce</dfn>. It is an immutable nonce ("number used once").</p>
   </div>
   <p>Add the <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce">partition nonce</a> attribute to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment">environment</a> object.</p>
   <div class="monkey-patch">
    <dl>
     <dt>A <dfn class="dfn-paneled" data-dfn-for="environment" data-dfn-type="dfn" data-export id="environment-partition-nonce">partition nonce</dfn>
     <dd>
      <p>An identifier or null. This is used to discriminate and isolate
  environments further. Among others, it is non null for <a data-link-type="dfn" href="#credentialless-window" id="ref-for-credentialless-window②">credentialless
  Window</a></p>
    </dl>
   </div>
   <h5 class="heading settled" data-level="6.1.9.1" id="spec-navigation-partition-nonce"><span class="secno">6.1.9.1. </span><span class="content">For Navigation</span><a class="self-link" href="#spec-navigation-partition-nonce"></a></h5>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#process-a-navigate-fetch" id="ref-for-process-a-navigate-fetch①">process a navigate fetch</a>, add step:</p>
   <div class="monkey-patch">
    <ol start="13">
     <li data-md>
      <p>If <var>credentialless</var> is true, let <var>partitionNonce</var> be <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context">top-level browsing context</a>’s <a data-link-type="dfn" href="#page-credentialless-nonce" id="ref-for-page-credentialless-nonce①">page
  credentialless nonce</a>, null otherwise.</p>
    </ol>
   </div>
   <p><var>partitionNonce</var> is used later to create the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①">Environment</a>. Modify step
13.3.4:</p>
   <div class="monkey-patch"> 13.3.4. Set <var>request</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-request-reserved-client" id="ref-for-concept-request-reserved-client">reserved client</a> to a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment②">environment</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-environment-id" id="ref-for-concept-environment-id">id</a> is a unique
  opaque string, <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context">target
  browsing context</a> is <var>browsingContext</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-environment-creation-url" id="ref-for-concept-environment-creation-url">creation URL</a> is <var>currentURL</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-creation-url" id="ref-for-concept-environment-top-level-creation-url">top-level creation URL</a> is <var>topLevelCreationURL</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin">top-level origin</a> is <var>topLevelOrigin</var>, <span class="customHighlight">and <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce①">partition nonce</a> is <var>partitionNonce</var></span></div>
   . 
   <h5 class="heading settled" data-level="6.1.9.2" id="spec-window-partition-nonce"><span class="secno">6.1.9.2. </span><span class="content">For Window</span><a class="self-link" href="#spec-window-partition-nonce"></a></h5>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#initialise-the-document-object" id="ref-for-initialise-the-document-object①">initialize the document object</a>, add step 6.9:</p>
   <div class="monkey-patch"> 6.9. If <var>navigationParams</var>’s <a data-link-type="dfn" href="#navigation-params-credentialless" id="ref-for-navigation-params-credentialless③">credentialless</a> is true, let <var>partitionNonce</var> be <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①">top-level browsing
  context</a>’s <a data-link-type="dfn" href="#page-credentialless-nonce" id="ref-for-page-credentialless-nonce②">page credentialless nonce</a>, null otherwise. </div>
   <p>Then, plumb it to create the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment③">Environment</a> in step 6.10:</p>
   <div class="monkey-patch">
    <p>6.10 <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#set-up-a-window-environment-settings-object" id="ref-for-set-up-a-window-environment-settings-object">Set up a window environment settings object</a> with <var>creationURL</var>, <var>realm execution context</var>, <var>navigationParams</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#navigation-params-reserved-environment" id="ref-for-navigation-params-reserved-environment">reserved environment</a>, <var>topLevelCreationURL</var>, <var>topLevelOrigin</var>, <span class="customHighlight">and <var>partitionNonce</var>.</span></p>
   </div>
   <p><var>partitionNonce</var> is passed to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#set-up-a-window-environment-settings-object" id="ref-for-set-up-a-window-environment-settings-object①">set up a window environment settings
object</a> this way:</p>
   <div class="monkey-patch">
     To <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#set-up-a-window-environment-settings-object" id="ref-for-set-up-a-window-environment-settings-object②">set up a window environment settings object</a>, given a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a> <var>creationURL</var>, a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-execution-contextssec-execution-contexts" id="ref-for-sec-execution-contextssec-execution-contexts">JavaScript execution context</a> <var>execution
context</var>, null or an <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment④">environment</a> <var>reservedEnvironment</var>, a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①">URL</a> <var>topLevelCreationURL</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-origin" id="ref-for-concept-origin">origin</a> <var>topLevelOrigin</var>, and <span class="customHighlight">an identifier <var>partitionNonce</var></span> run these steps:
    <p></p>
   </div>
   <p>It is used in step 6.</p>
   <div class="monkey-patch">
    <ol start="6">
     <li data-md>
      <p>Set <var>settings object</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-environment-creation-url" id="ref-for-concept-environment-creation-url①">creation
URL</a> to <var>creationURL</var>, <var>settings object</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-creation-url" id="ref-for-concept-environment-top-level-creation-url①">top-level creation URL</a> to <var>topLevelCreationURL</var>, <var>settings object</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin①">top-level origin</a> to <var>topLevelOrigin</var>, <span class="customHighlight">and <var>settings object</var>’s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce②">partition nonce</a> to <var>partitionNonce</var>.</span></p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.1.9.3" id="spec-worker-partition-nonce"><span class="secno">6.1.9.3. </span><span class="content">For Worker</span><a class="self-link" href="#spec-worker-partition-nonce"></a></h5>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#script-:settings-for-workers" id="ref-for-script-:settings-for-workers">script settings for workers</a> algorithm, add step 8:</p>
   <div class="monkey-patch">
    <ol start="8">
     <li data-md>
      <p>Set <var>settings object</var>’s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce③">partition nonce</a> to <var>outside settings</var>’s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce④">partition nonce</a>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.1.9.4" id="spec-worklet-partition-nonce"><span class="secno">6.1.9.4. </span><span class="content">For Worklet</span><a class="self-link" href="#spec-worklet-partition-nonce"></a></h5>
   <p>In the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#set-up-a-worklet-environment-settings-object" id="ref-for-set-up-a-worklet-environment-settings-object">set up a worklet environment settings object</a> algorithm, modify
step 7:</p>
   <div class="monkey-patch">
    <ol start="7">
     <li data-md>
      <p>Set <var>settingsObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-environment-id" id="ref-for-concept-environment-id①">id</a> to a new
 unique opaque string, <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-environment-creation-url" id="ref-for-concept-environment-creation-url②">creation URL</a> to <var>inheritedAPIBaseURL</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-creation-url" id="ref-for-concept-environment-top-level-creation-url②">top-level creation URL</a> to null, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin②">top-level
 origin</a> to <var>outsideSettings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin③">top-level origin</a>, <span class="customHighlight"><a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce⑤">partition nonce</a> to <var>outsideSettings</var>’s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce⑥">partition
 nonce</a></span>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context①">target browsing context</a> to null,
 and <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-environment-active-service-worker" id="ref-for-concept-environment-active-service-worker">active service
 worker</a> to null.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.2" id="spec-fetch"><span class="secno">6.2. </span><span class="content">Integration with Fetch</span><a class="self-link" href="#spec-fetch"></a></h3>
   <p class="note" role="note"><span class="marker">Note:</span> This corresponds to the following HTML specification change: <a href="https://github.com/whatwg/fetch/pull/1416">whatwg/fetch/pull/1416</a>. <br> When merged this section will become obsolete.</p>
   <h4 class="heading settled" data-level="6.2.1" id="spec-network-partition-key"><span class="secno">6.2.1. </span><span class="content">Plumb the partition-nonce</span><a class="self-link" href="#spec-network-partition-key"></a></h4>
   <p>Add the <code>environment</code>'s <code>partition nonce</code> into the network partition key.
Proceed the following changes:</p>
   <div class="monkey-patch">
    <p>A <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#network-partition-key" id="ref-for-network-partition-key">network partition key</a> is a tuple consisting of:</p>
    <ul>
     <li data-md>
      <p>A <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site">site</a>.</p>
     <li data-md>
      <p>null or an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> value.</p>
     <li data-md>
      <p><span class="customHighlight">null or a nonce.</span></p>
    </ul>
   </div>
   <div class="monkey-patch">
    <p>To <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#determine-the-network-partition-key" id="ref-for-determine-the-network-partition-key">determine the network
  partition key, given an </a><a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment⑤">environment</a> <var>environment</var>,
  run these steps: </p>
    <ol>
     <li>
      <p>Let <var>topLevelOrigin</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin④">top-level origin</a>. </p>
     <li>
      <p>If <var>topLevelOrigin</var> is null, then set <var>topLevelOrigin</var> to <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-creation-url" id="ref-for-concept-environment-top-level-creation-url③">top-level creation URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin">origin</a>. </p>
     <li>
      <p>Assert: <var>topLevelOrigin</var> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-origin" id="ref-for-concept-origin①">origin</a>. </p>
     <li>
      <p>Let <var>topLevelSite</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site" id="ref-for-obtain-a-site">obtaining a site</a>,
   given <var>topLevelOrigin</var>. </p>
     <li>
      <p>Let <var>secondKey</var> be null or an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined①">implementation-defined</a> value. </p>
      <p class="XXX">The second key is intentionally a little vague as the finer points are still
   evolving. See <a href="https://github.com/whatwg/fetch/issues/1035">issue #1035</a>. </p>
     <li>
      <p class="customHighlight">Let <var>nonce</var> be <var>environment</var>’s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce⑦">partition nonce</a></p>
     <li>
      <p>Return (<var>topLevelSite</var>, <var>secondKey</var>, <var class="customHighlight">nonce</var>). </p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.3" id="spec-chips"><span class="secno">6.3. </span><span class="content">Integration with CHIPS</span><a class="self-link" href="#spec-chips"></a></h3>
   <p>This section defines a monkey-patch over: <a data-link-type="biblio" href="#biblio-chips" title="CHIPS (Cookies Having Independent Partitioned State)">[CHIPS]</a>, which is itself a
monkey-patch over <a data-link-type="biblio" href="#biblio-cookies" title="Cookies: HTTP State Management Mechanism">[COOKIES]</a>.</p>
   <div class="note" role="note">
     Note / Summary: <a href="https://github.com/WICG/CHIPS">Cookies Having Independent Partitioned
  State</a> (CHIPS) introduce the cookie’s partition
  key. To implement credentialless iframe, when the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment⑥">environment</a>'s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce⑧">partition nonce</a> is defined: 
    <ol>
     <li data-md>
      <p>Even in the absence of the "Partitioned" cookie attribute, the
 "partition-key" is defined and contains: (top-level-site, partition-nonce).</p>
     <li data-md>
      <p>The __Host- prefix is not required.</p>
     <li data-md>
      <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment⑦">environment</a> only have access to cookies whose "partition-key" is
 defined.</p>
    </ol>
   </div>
   <p>Modify the <a data-link-type="biblio" href="#biblio-chips" title="CHIPS (Cookies Having Independent Partitioned State)">[CHIPS]</a> section: <a href="https://github.com/WICG/CHIPS/blob/main/README.md#algorithm">https://github.com/WICG/CHIPS/blob/main/README.md#algorithm</a></p>
   <div class="monkey-patch">
    <p>Below is the algorithm that browsers can use to parse cookie lines. This
algorithm could be added to <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-07#section-5.3">section 5.3 of
RFC6265bis</a>.</p>
    <ol>
     <li data-md>
      <p>Let "partition-key" be null.</p>
     <li data-md>
      <p>If <span class="customHighlight">If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment⑧">environment</a>'s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce⑨">partition nonce</a> is defined</span> or an attribute-name
 case-insensitively matches the string <code>"Partitioned"</code>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>site</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment⑨">environment</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin⑤">top-level origin</a>’s <a href="https://html.spec.whatwg.org/#sites">site</a>.</p>
       <li data-md>
        <p>If <var>site</var> is in a <a href="https://github.com/privacycg/first-party-sets">First-Party
  Set</a>, then set <var>site</var> be
  the concatenation of "https://" and the "owner domain" of the site’s set.</p>
       <li data-md>
        <p><span class="customHighlight">Let <var>nonce</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①⓪">environment</a>'s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce①⓪">partition nonce</a>.</span></p>
       <li data-md>
        <p><span class="customHighlight">Set <var>partition-key</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">tuple</a> (<var>site</var>, <var>nonce</var>)</span></p>
      </ol>
     <li data-md>
      <p>Append an attribute to the cookie-attribute-list with an attribute-name of
 "PartitionKey" and an attribute-value of <var>partition-key</var>.</p>
    </ol>
   </div>
   <div class="monkey-patch">
    <p>Below is the algorithm for storing <code>Partitioned</code> cookies. These steps could be
added to <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-07#section-5.4">section 5.4 of
RFC6265bis</a> after the user agent processes the cookie’s __Host- prefix.</p>
    <ol>
     <li data-md>
      <p>If the cookie-attribute-list contains an attribute with an attribute-name of
 "PartitionKey", and attribute-value is null <span class="customHighlight"> or
 a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple①">tuple</a> (<var>site</var>, <var>nonce</var>), with a non-null <var>nonce</var></span>, then
 skip the following steps and insert the cookie into the cookie store.</p>
     <li data-md>
      <p>If the cookie-name does not start with a case-sensitive match for the string
 "__Host-", then abort the following steps and ignore the cookie entirely.</p>
     <li data-md>
      <p>If the cookie line also contains the [<code>SameParty</code> attribute](https://github.com/cfredric/sameparty) (the exact semantics of how
 the <code>SameParty</code> attribute is loaded into the cookie-attribute-list is TBD)
 then abort the following steps and ignore the cookie entirely.</p>
     <li data-md>
      <p>Set the cookie’s partition-key to the attribute-value of the element in the
 attribute-list whose attribute-name is "PartitionKey".</p>
    </ol>
   </div>
   <div class="monkey-patch">
    <p>Below is an algorithm for attaching <code>Partitioned</code> cookies to a request. These
steps could be added to the algorithm described in <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-07#section-5.5">section 5.5 of
RFC6265bis</a> after the first step.</p>
    <p>For each cookie in the cookie-list do the following:</p>
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①①">environment</a> that initiated the request.</p>
     <li data-md>
      <p>If the cookie’s partition-key is null, <span class="customHighlight">and <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①②">environment</a>'s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce①①">partition nonce</a> is null</span>, skip the
 following parts of this step.</p>
     <li data-md>
      <p>Let <var>request-top-site</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①③">environment</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" id="ref-for-concept-environment-top-level-origin⑥">top-level
 origin</a>’s <a href="https://html.spec.whatwg.org/#sites">site</a>.</p>
     <li data-md>
      <p><span class="customHighlight">Let <var>request-partition-nonce</var> be the <var>environment</var>’s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce①②">partition nonce</a>.</span></p>
     <li data-md>
      <p>If <var>request-top-site</var> is in a <a href="https://github.com/privacycg/first-party-sets">First-Party
 Set</a>, then set <var>request-top-site</var> be the concatenation of "https://" and the "owner domain"
 of the <var>request-top-site</var>’s set.</p>
     <li data-md>
      <p>Let <var>request-partition-key</var> be the tuple (<var>request-top-site</var>, <var>request-partition-nonce</var>).</p>
     <li data-md>
      <p>If the cookie’s partition-key is not an exact match of <var>request-partition-key</var>, then remove that cookie from the cookie-list.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.4" id="spec-storage-partitioning"><span class="secno">6.4. </span><span class="content">Integration with storage-partitioning</span><a class="self-link" href="#spec-storage-partitioning"></a></h3>
   <p>In the <a data-link-type="biblio" href="#biblio-storagepartition" title="Client-Side Storage Partitioning">[StoragePartition]</a> (<a href="https://privacycg.github.io/storage-partitioning/">link</a>) Work Item. Most
storage APIs will be keyed by an additional key: the top-level site.</p>
   <p>To implement credentialless iframe, another key should be added and defined as the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①④">environment</a>'s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce①③">partition nonce</a>.</p>
   <div class="monkey-patch">
    <dl>
     <dt><dfn data-dfn-type="dfn" data-export data-lt="storage-key-nonce" id="storage-key-nonce">nonce<a class="self-link" href="#storage-key-nonce"></a></dfn>
     <dd>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①⑤">environment</a>'s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce①④">partition nonce</a>
    </dl>
   </div>
   <h3 class="heading settled" data-level="6.5" id="spec-storage"><span class="secno">6.5. </span><span class="content">Integration with storage</span><a class="self-link" href="#spec-storage"></a></h3>
   <p class="note" role="note"><span class="marker">Note:</span> This corresponds to the following <a data-link-type="biblio" href="#biblio-storage" title="Storage">[STORAGE]</a> specification change: <a href="https://github.com/whatwg/storage/pull/139">whatwg/storage/pull/139</a>. <br> When merged this section will become obsolete.</p>
   <h4 class="heading settled" data-level="6.5.1" id="spec-storage-key"><span class="secno">6.5.1. </span><span class="content">storage-key</span><a class="self-link" href="#spec-storage-key"></a></h4>
   <p>Add the <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①⑥">environment</a>'s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce①⑤">partition nonce</a> as an additional key
in the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-key" id="ref-for-storage-key">storage key</a>.</p>
   <div class="monkey-patch">
    <p>A <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-key" id="ref-for-storage-key①">storage key</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple②">tuple</a> consisting of:</p>
    <ul>
     <li data-md>
      <p>An <dfn data-dfn-for="storage key" data-dfn-type="dfn" data-export data-lt="storage-key-origin" id="storage-key-storage-key-origin">origin<a class="self-link" href="#storage-key-storage-key-origin"></a></dfn> (an <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-origin" id="ref-for-concept-origin②">origin</a>). <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a></p>
     <li data-md>
      <div class="customHighlight">A <dfn data-dfn-for="storage key" data-dfn-type="dfn" data-export data-lt="storage-key-nonce" id="storage-key-storage-key-nonce">nonce<a class="self-link" href="#storage-key-storage-key-nonce"></a></dfn> (an identifier or null). <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> </div>
    </ul>
   </div>
   <div class="monkey-patch">
    <p>To <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-storage-key-for-non-storage-purposes" id="ref-for-obtain-a-storage-key-for-non-storage-purposes">obtain a storage key for non-storage purposes</a>, given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#environment" id="ref-for-environment①⑦">environment</a> <var>environment</var>, run these steps:</p>
    <ul>
     <li data-md>
      <p>Let <var>origin</var> be <var>environment</var>’s origin <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a> if <var>environment</var> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings
object</a>; otherwise <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-creation-url" id="ref-for-concept-environment-creation-url③">creation URL</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①">origin</a>.</p>
     <li data-md>
      <p><span class="customHighlight">Let <var>nonce</var> be <var>environment</var>’s <a data-link-type="dfn" href="#environment-partition-nonce" id="ref-for-environment-partition-nonce①⑥">partition nonce</a>.</span></p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple③">tuple</a> consisting of <var>origin</var> <span class="customHighlight">and <var>nonce</var></span>.</p>
    </ul>
   </div>
   <h2 class="heading settled" data-level="7" id="security"><span class="secno">7. </span><span class="content">Security considerations</span><a class="self-link" href="#security"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="threat-model"><span class="secno">7.1. </span><span class="content">Threat model</span><a class="self-link" href="#threat-model"></a></h3>
   <p>Because credentialless iframes can be embedded in <a data-link-type="dfn" href="https://html.spec.whatwg.org/C/#concept-settings-object-cross-origin-isolated-capability" id="ref-for-concept-settings-object-cross-origin-isolated-capability②">crossOriginIsolated</a> contexts,
in browsers without Out-of-Process-Iframes, we have to consider that their
embedder can perform a <a data-link-type="biblio" href="#biblio-spectre" title="Spectre Attacks: Exploiting Speculative Execution">[Spectre]</a> attack to read any of the credentialless iframes
resources, including the HTML. The victim is the document loaded inside the
credentialless iframe and the other documents are the attackers.</p>
   <p>Our approach to this threat is not to prevent the attack from happening, but to
avoid loading personalized data so that an attacker has only access to publicly
available data.</p>
   <p>To do so, we consider a variety of possible attacks:</p>
   <h3 class="heading settled" data-level="7.2" id="security-existing-credentials"><span class="secno">7.2. </span><span class="content">Usage of existing credentials</span><a class="self-link" href="#security-existing-credentials"></a></h3>
   <p>The most dangerous attack is also the most straightforward. The attacker embeds
an credentialless iframe with resources for which the user already has credentials.
The attacker then reads the personalized resources inside the iframe, which are
not public data.</p>
   <p><strong>Mitigation:</strong></p>
   <p>Credentialless iframes do not have access to existing credentials stored by their
origin. This includes cookies. This also includes any data in the origin shared
storage, as it could have been retrieved using credentials, hence personalized.
Credentialless iframes start from a blank slate to prevent an attacker from loading
resources using existing credentials.</p>
   <h3 class="heading settled" data-level="7.3" id="security-new-credentials"><span class="secno">7.3. </span><span class="content">Usage of new credentials</span><a class="self-link" href="#security-new-credentials"></a></h3>
   <p>In this attack, the attacker embeds an credentialless iframe. As explained above, the
credentialless iframe starts from a blank slate when it comes to credentials and
shared storage. However, the credentialless iframe could register new credentials and
use those to request personalized resources. The attacker can then read those.
In practice, we can divide this scenario into two. First usage of credentials
storing state necessary to make the iframe site work, but which is not
particular to a user. This case is not problematic, as it is publicly accessible
data. The second one is state personalized by user, which would be acquired
after the user logs into the credentialless iframe.</p>
   <p>Finally, there is the question of how long such credentials should persist, and
how they should be shared across credentialless iframes. For example, one could
imagine that the user visits a legitimate page with an credentialless iframe A where
they log in. Then they visit an attacker page with an credentialless iframe of the
same origin A. If they are still logged into A, the attacker page could steal
data from personalized subresources.</p>
   <p><strong>Mitigation:</strong></p>
   <p>If the user is directly typing their credentials in the iframe to log-in, they
are logging into the iframe, in a page with a different URL shown in the
omnibox. This is similar to a phishing attack both in user action needed for the
attack to happen and outcome. This case shouldn’t require extra-mitigation.</p>
   <p>When the user is using a popup-driven OAuth flow (or the upcoming WebID API),
the situation is harder to understand from the user’s perspective. To prevent
this from happening, we restrict the iframe ability to open popups (e.g. all
popups are opened with no-opener set), and access the WebID API when it ships.</p>
   <p>In terms of lifetime and sharing of credentials, they are bound to the lifetime
of the credentialless iframe. So if a page creates an credentialless iframe, documents in
the subtree of the credentialless iframe get a clean slate of credentials and shared
storage. Documents in the subtree can create credentials. They can share them
among themselves (as long as they respect the same-origin policy), and only
among themselves. So if two pages are opened at the same time with two credentialless
iframes with the same origin, the credentialless iframes cannot share their
credentials. Once the credentialless iframe is destroyed, the credentials that were
created in its subtree should no longer be accessible. This ensures that we
preserve as much functionality for the credentialless iframe as possible, while
minimizing the risk of accidentally leaking data.</p>
   <h3 class="heading settled" data-level="7.4" id="security-network-id"><span class="secno">7.4. </span><span class="content">Personalized resources based on network position</span><a class="self-link" href="#security-network-id"></a></h3>
   <p>This is a variant of the previous attack, where the user embeds an iframe with
private subresources the user is only allowed to access due to their network
position. For example, resources found on the user private network, or resources
personalized based on a user IP address.</p>
   <p><strong>Mitigation:</strong></p>
   <p>We plan on dealing with the private network case by deploying Private Network
Access restrictions. During the CORS preflight introduced by <a href="https://wicg.github.io/private-network-access/">Private Network
Access restrictions</a>, the
servers will be able to check that their resource will be rendered in an
credentialless iframe context by checking the Sec-Fetch-COEP header. Note that only
local-network documents which enable HTTPS could potentially be exposed (because
MIX should prevent HTTP resources from being loaded by a page with COI). This
isn’t a strong mitigation, but will matter for things like common IoT devices.
The other cases of resources personalized based on IP address are arguably a
security footgun already. We think that the increased risk there is okay
compared to the advantage of not using credentials on more requests overall.</p>
   <h3 class="heading settled" data-level="7.5" id="security-user-input-capture"><span class="secno">7.5. </span><span class="content">Capture of user input</span><a class="self-link" href="#security-user-input-capture"></a></h3>
   <p>In this attack, the attacker embeds an credentialless iframe that can receive user
input. It then reads the user input.</p>
   <p><strong>Mitigation:</strong></p>
   <p>This is not in scope for credentialless iframes. An attacker can already do a
phishing attack where they construct a fake page using publicly available
resources and trick the user into entering data. This attack is equivalent,
since the URL shown to the user in the navigation bar will still be that of the
attacker.</p>
   <h3 class="heading settled" data-level="7.6" id="security-side-channel"><span class="secno">7.6. </span><span class="content">Credentialless iframes using side-channels to personalize themselves</span><a class="self-link" href="#security-side-channel"></a></h3>
   <p>The credentialless iframe could use side-channels (e.g. broadcast channels,
postMessage) to attempt to get a form of personalization despite the lack of
credentials. The personalized resources are then readable by the embedder.</p>
   <p><strong>Mitigation:</strong></p>
   <p>Depending on whether the mechanisms highlighted above are a common way of
personalizing resources, this might be out-of-scope. What we want to defend
against is unsuspecting websites being embedded and attacked by their embedder
to steal user data. If the credentialless iframe is bent on escaping the constraints
of credentialless iframes to personalize itself, then one can argue that it
understands the contexts and risks it is loaded in and accepts them. Provided
our security model is safe enough outside of credentialless iframes, the
personalization will only affect resources that are same-origin with the iframe
anyway. Cross-origin resources to the framed document will still be
unpersonalized, making this equivalent to COEP:credentiallesss from a security
perspective.</p>
   <h2 class="heading settled" data-level="8" id="privacy"><span class="secno">8. </span><span class="content">Privacy considerations</span><a class="self-link" href="#privacy"></a></h2>
   <p>The main privacy threat posed by this API is the risk of a data leak through a
side channel attack like <a data-link-type="biblio" href="#biblio-spectre" title="Spectre Attacks: Exploiting Speculative Execution">[Spectre]</a>. As detailed in the <a data-link-type="dfn" href="/#threat-model" id="ref-for-threat-model④">threat model</a> above, we believe the API provides a meaningful defense against <a data-link-type="biblio" href="#biblio-spectre" title="Spectre Attacks: Exploiting Speculative Execution">[Spectre]</a> attacks, and thus does not pose a privacy risk.</p>
   <h2 class="heading settled" data-level="9" id="questionnaire"><span class="secno">9. </span><span class="content">Self-Review Questionnaire</span><a class="self-link" href="#questionnaire"></a></h2>
   <p>See <a data-link-type="biblio" href="#biblio-securityprivacyquestionnaire" title="Self-Review Questionnaire: Security and Privacy">[SecurityPrivacyQuestionnaire]</a> (<a href="https://www.w3.org/TR/security-privacy-questionnaire/">link</a>)</p>
   <h3 class="heading settled" data-level="9.1" id="questionnaire-purpose"><span class="secno">9.1. </span><span class="content">What information might this feature expose to Web sites or other parties, and for what purposes is that exposure necessary?</span><a class="self-link" href="#questionnaire-purpose"></a></h3>
   <p>The <code>window.credentialless</code> method exposes whether a document is loaded in an
credentialless iframe or not, allowing a document to change its behavior depending on
the availability of existing credentials or stored resources.</p>
   <h3 class="heading settled" data-level="9.2" id="questionnaire-minimum-data"><span class="secno">9.2. </span><span class="content">Do features in your specification expose the minimum amount of information necessary to enable their intended uses?</span><a class="self-link" href="#questionnaire-minimum-data"></a></h3>
   <p>Yes. The only thing exposed is whether a document is embedded inside an
credentialless iframe or not.</p>
   <h3 class="heading settled" data-level="9.3" id="questionnaire-personal-data"><span class="secno">9.3. </span><span class="content">How do the features in your specification deal with personal information, personally-identifiable information (PII), or information derived from them?</span><a class="self-link" href="#questionnaire-personal-data"></a></h3>
   <p>The feature does not deal with PII.</p>
   <h3 class="heading settled" data-level="9.4" id="questionnaire-sensitive-data"><span class="secno">9.4. </span><span class="content">How do the features in your specification deal with sensitive information?</span><a class="self-link" href="#questionnaire-sensitive-data"></a></h3>
   <p>The feature does not deal with sensitive information.</p>
   <h3 class="heading settled" data-level="9.5" id="questionnaire-persistent-origin-specific-state"><span class="secno">9.5. </span><span class="content">Do the features in your specification introduce new state for an origin that persists across browsing sessions?</span><a class="self-link" href="#questionnaire-persistent-origin-specific-state"></a></h3>
   <p>No the feature does not introduce new state for an origin.</p>
   <h3 class="heading settled" data-level="9.6" id="questionnaire-underlying-platform-data"><span class="secno">9.6. </span><span class="content">Do the features in your specification expose information about the underlying platform to origins?</span><a class="self-link" href="#questionnaire-underlying-platform-data"></a></h3>
   <p>No the feature behaves the same regardless of the underlying platform.</p>
   <h3 class="heading settled" data-level="9.7" id="questionnaire-send-to-platform"><span class="secno">9.7. </span><span class="content">Does this specification allow an origin to send data to the underlying platform?</span><a class="self-link" href="#questionnaire-send-to-platform"></a></h3>
   <p>No this feature does not change what data an origin is allowed to send to the underlying platform.</p>
   <h3 class="heading settled" data-level="9.8" id="questionnaire-sensor-data"><span class="secno">9.8. </span><span class="content">Do features in this specification allow an origin access to sensors on a user’s device?</span><a class="self-link" href="#questionnaire-sensor-data"></a></h3>
   <p>No the feature has no impacty on sensor access.</p>
   <h3 class="heading settled" data-level="9.9" id="questionnaire-string-to-script"><span class="secno">9.9. </span><span class="content">Do features in this specification enable new script execution/loading mechanisms?</span><a class="self-link" href="#questionnaire-string-to-script"></a></h3>
   <p>No the feature does not enable new script execution/loading.</p>
   <h3 class="heading settled" data-level="9.10" id="questionnaire-remote-device"><span class="secno">9.10. </span><span class="content">Do features in this specification allow an origin to access other devices?</span><a class="self-link" href="#questionnaire-remote-device"></a></h3>
   <p>No the feature is strictly confined to one device.</p>
   <h3 class="heading settled" data-level="9.11" id="questionnaire-native-ui"><span class="secno">9.11. </span><span class="content">Do features in this specification allow an origin some measure of control over a user agent’s native UI?</span><a class="self-link" href="#questionnaire-native-ui"></a></h3>
   <p>No the feature has no impact on UI.</p>
   <h3 class="heading settled" data-level="9.12" id="questionnaire-temporary-id"><span class="secno">9.12. </span><span class="content">What temporary identifiers do the feautures in this specification create or expose to the web?</span><a class="self-link" href="#questionnaire-temporary-id"></a></h3>
   <p>No temporary identifiers are created.</p>
   <h3 class="heading settled" data-level="9.13" id="questionnaire-first-third-party"><span class="secno">9.13. </span><span class="content">How does this specification distinguish between behavior in first-party and third-party contexts?</span><a class="self-link" href="#questionnaire-first-third-party"></a></h3>
   <p>There is no distinction between first-party and third-party ability to embed
credentialless iframes. This is due to the recursive nature of COEP. To deploy COEP
in a frame, all child frames need to deploy COEP first. Since this is a
mechanism to help with the deployment of COEP, we want to offer third-party
iframes the option to ease their own COEP deployment by being able to embed
their own third party content as credentialless iframes.</p>
   <h3 class="heading settled" data-level="9.14" id="questionnaire-private-browsing"><span class="secno">9.14. </span><span class="content">How do the features in this specification work in the context of a browser’s Private Browsing or Incognito mode?</span><a class="self-link" href="#questionnaire-private-browsing"></a></h3>
   <p>No difference with regular mode.</p>
   <h3 class="heading settled" data-level="9.15" id="questionnaire-considerations"><span class="secno">9.15. </span><span class="content">Does this specification have both "Security Considerations" and "Privacy Considerations" sections?</span><a class="self-link" href="#questionnaire-considerations"></a></h3>
   <p>Yes:</p>
   <ul>
    <li data-md>
     <p><a href="#security">Security considerations</a></p>
    <li data-md>
     <p><a href="#privacy">Privacy considerations</a></p>
   </ul>
   <h3 class="heading settled" data-level="9.16" id="questionnaire-relaxed-sop"><span class="secno">9.16. </span><span class="content">Do features in your specification enable origins to downgrade default security protections?</span><a class="self-link" href="#questionnaire-relaxed-sop"></a></h3>
   <p>This feature has no impact on secure context and same-origin policy. It does
allow to use features which are right now gated behind having COOP and COEP
enabled. However, it imposes restrictions on documents to make this safe.</p>
   <h3 class="heading settled" data-level="9.17" id="questionnaire-non-fully-active"><span class="secno">9.17. </span><span class="content">How does your feature handle non-"fully active" documents?</span><a class="self-link" href="#questionnaire-non-fully-active"></a></h3>
   <p>Credentialless iframe only affect documents inside iframes. It is a general
assumption <a data-link-type="dfn" href="https://web.dev/bfcache/" id="termref-for-">back/forward cache</a> features are implemented only for main frame
navigations. With this assumption, there is nothing special to do.</p>
   <p>Hypothetical web browsers implementing <a data-link-type="dfn" href="https://web.dev/bfcache/" id="termref-for-①">back/forward cache</a> at the
sub-frame level must definitively think about what happens when restoring a
document inside an iframe whose "credentialless" attribute has changed. For instance,
they could prevent the back/forward cache from restoring the document.</p>
  </main>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#attr-iframe-credentialless">attr-iframe-credentialless</a><span>, in § 6.1.1</span>
   <li><a href="#autofill-and-credentialless-iframe">Autofill and credentialless iframe</a><span>, in § 6.1.8</span>
   <li>
    credentialless
    <ul>
     <li><a href="#dom-htmliframeelement-credentialless">attribute for HTMLIFrameElement</a><span>, in § 6.1.1</span>
     <li><a href="#dom-window-credentialless">attribute for Window</a><span>, in § 6.1.2</span>
    </ul>
   <li><a href="#credentialless-window">credentialless Window</a><span>, in § 6.1.6</span>
   <li><a href="#dom-iframe-credentialless">dom-iframe-credentialless</a><span>, in § 6.1.1</span>
   <li><a href="#htmliframeelement">HTMLIFrameElement</a><span>, in § 6.1.1</span>
   <li><a href="#initial-window-credentialless">initial-window-credentialless</a><span>, in § 6.1.6</span>
   <li><a href="#navigation-credentialless">navigation-credentialless</a><span>, in § 6.1.6</span>
   <li><a href="#navigation-params-credentialless">navigation-params-credentialless</a><span>, in § 6.1.4</span>
   <li><a href="#page-credentialless-nonce">page credentialless nonce</a><span>, in § 6.1.9</span>
   <li><a href="#environment-partition-nonce">partition nonce</a><span>, in § 6.1.9</span>
   <li>
    storage-key-nonce
    <ul>
     <li><a href="#storage-key-nonce">definition of</a><span>, in § 6.4</span>
     <li><a href="#storage-key-storage-key-nonce">dfn for storage key</a><span>, in § 6.5.1</span>
    </ul>
   <li><a href="#storage-key-storage-key-origin">storage-key-origin</a><span>, in § 6.5.1</span>
   <li><a href="#window">Window</a><span>, in § 6.1.2</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://web.dev/bfcache/">https://web.dev/bfcache/</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">9.17. How does your feature handle non-"fully active" documents?</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response">
   <a href="https://fetch.spec.whatwg.org/#concept-response">https://fetch.spec.whatwg.org/#concept-response</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-/issues/1">
   <a href="https://github.com/w3c/mediacapture-viewport#/issues/1">https://github.com/w3c/mediacapture-viewport#/issues/1</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-/issues/1">2. A problem</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-issuecomment-812">
   <a href="https://www.w3.org/TR/hr-time//issues/1#issuecomment-812">https://www.w3.org/TR/hr-time//issues/1#issuecomment-812</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-issuecomment-812">2. A problem</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-sec-execution-contextssec-execution-contexts">
   <a href="https://tc39.es/ecma262/#sec-execution-contextssec-execution-contexts">https://tc39.es/ecma262/#sec-execution-contextssec-execution-contexts</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sec-execution-contextssec-execution-contexts">6.1.9.2. For Window</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-network-partition-key">
   <a href="https://fetch.spec.whatwg.org/#network-partition-key">https://fetch.spec.whatwg.org/#network-partition-key</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-network-partition-key">6.2.1. Plumb the partition-nonce</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-storage-key">
   <a href="https://storage.spec.whatwg.org/#storage-key">https://storage.spec.whatwg.org/#storage-key</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-storage-key">3.2. Credentialless iframes and credentials</a>
    <li><a href="#ref-for-storage-key">6.5.1. storage-key</a> <a href="#ref-for-storage-key①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-threat-model">
   <a href="/#threat-model">/#threat-model</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-threat-model">3.2. Credentialless iframes and credentials</a>
    <li><a href="#ref-for-threat-model①">3.4. Credentialless iframes and autofill/password managers</a> <a href="#ref-for-threat-model②">(2)</a>
    <li><a href="#ref-for-threat-model③">4.1. Sandboxed iframe</a>
    <li><a href="#ref-for-threat-model④">8. Privacy considerations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-window">
   <a href="https://drafts.csswg.org/css-color-3/#window">https://drafts.csswg.org/css-color-3/#window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window">3.1. What are iframes credentialless?</a> <a href="#ref-for-window①">(2)</a> <a href="#ref-for-window②">(3)</a> <a href="#ref-for-window③">(4)</a>
    <li><a href="#ref-for-window④">6.1.2. The Window attribute</a>
    <li><a href="#ref-for-window⑥">6.1.3. Creating new browsing context</a> <a href="#ref-for-window⑦">(2)</a>
    <li><a href="#ref-for-window⑧">6.1.4. Navigating a browsing context</a> <a href="#ref-for-window⑨">(2)</a> <a href="#ref-for-window①⓪">(3)</a> <a href="#ref-for-window①①">(4)</a> <a href="#ref-for-window①②">(5)</a>
    <li><a href="#ref-for-window①⑤">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-eventtarget">
   <a href="https://dom.spec.whatwg.org/#eventtarget">https://dom.spec.whatwg.org/#eventtarget</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventtarget">6.1.2. The Window attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document">
   <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document">6.1.4. Navigating a browsing context</a> <a href="#ref-for-concept-document①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-node-document">
   <a href="https://dom.spec.whatwg.org/#concept-node-document">https://dom.spec.whatwg.org/#concept-node-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-node-document">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-reflect">
   <a href="https://dom.spec.whatwg.org/#concept-reflect">https://dom.spec.whatwg.org/#concept-reflect</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-reflect">6.1.1. The Iframe attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-sec-sharedarraybuffer-objects">
   <a href="https://tc39.es/ecma262/#sec-sharedarraybuffer-objects">https://tc39.es/ecma262/#sec-sharedarraybuffer-objects</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sec-sharedarraybuffer-objects">2. A problem</a> <a href="#ref-for-sec-sharedarraybuffer-objects①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-requestdestination-iframe">
   <a href="https://fetch.spec.whatwg.org/#dom-requestdestination-iframe">https://fetch.spec.whatwg.org/#dom-requestdestination-iframe</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-requestdestination-iframe">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-determine-the-network-partition-key">
   <a href="https://fetch.spec.whatwg.org/#determine-the-network-partition-key">https://fetch.spec.whatwg.org/#determine-the-network-partition-key</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-determine-the-network-partition-key">6.2.1. Plumb the partition-nonce</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmlelement">
   <a href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">https://html.spec.whatwg.org/multipage/dom.html#htmlelement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmlelement">6.1.1. The Iframe attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-nav-document">
   <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document">https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-nav-document">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-active-window">
   <a href="https://html.spec.whatwg.org/C/#active-window">https://html.spec.whatwg.org/C/#active-window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-window">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-bc-container">
   <a href="https://html.spec.whatwg.org/C/#bc-container">https://html.spec.whatwg.org/C/#bc-container</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bc-container">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-bc-container-document">
   <a href="https://html.spec.whatwg.org/C/#bc-container-document">https://html.spec.whatwg.org/C/#bc-container-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bc-container-document">6.1.7. COEP embedder checks</a> <a href="#ref-for-bc-container-document①">(2)</a> <a href="#ref-for-bc-container-document②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-broadcasting-to-other-browsing-contexts">
   <a href="https://html.spec.whatwg.org/C/#broadcasting-to-other-browsing-contexts">https://html.spec.whatwg.org/C/#broadcasting-to-other-browsing-contexts</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-broadcasting-to-other-browsing-contexts">3. Explainer</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-window-bc">
   <a href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc">https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window-bc">6.1.4. Navigating a browsing context</a>
    <li><a href="#ref-for-window-bc①">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-check-a-navigation-response&apos;s-adherence-to-its-embedder-policy">
   <a href="https://html.spec.whatwg.org/C/#check-a-navigation-response&apos;s-adherence-to-its-embedder-policy">https://html.spec.whatwg.org/C/#check-a-navigation-response's-adherence-to-its-embedder-policy</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-check-a-navigation-response&apos;s-adherence-to-its-embedder-policy">6.1.7. COEP embedder checks</a> <a href="#ref-for-check-a-navigation-response&apos;s-adherence-to-its-embedder-policy①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-child-browsing-context">
   <a href="https://html.spec.whatwg.org/C/#child-browsing-context">https://html.spec.whatwg.org/C/#child-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-child-browsing-context">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-coep">
   <a href="https://html.spec.whatwg.org/C/#coep">https://html.spec.whatwg.org/C/#coep</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-coep">1.1. Recommended readings</a> <a href="#ref-for-coep①">(2)</a>
    <li><a href="#ref-for-coep②">2. A problem</a> <a href="#ref-for-coep③">(2)</a> <a href="#ref-for-coep④">(3)</a> <a href="#ref-for-coep⑤">(4)</a> <a href="#ref-for-coep⑥">(5)</a> <a href="#ref-for-coep⑦">(6)</a> <a href="#ref-for-coep⑧">(7)</a>
    <li><a href="#ref-for-coep⑨">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-compatible-with-cross-origin-isolation">
   <a href="https://html.spec.whatwg.org/C/#compatible-with-cross-origin-isolation">https://html.spec.whatwg.org/C/#compatible-with-cross-origin-isolation</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compatible-with-cross-origin-isolation">6.1.7. COEP embedder checks</a> <a href="#ref-for-compatible-with-cross-origin-isolation①">(2)</a> <a href="#ref-for-compatible-with-cross-origin-isolation②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document-bc">
   <a href="https://html.spec.whatwg.org/C/#concept-document-bc">https://html.spec.whatwg.org/C/#concept-document-bc</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document-bc">6.1.6. General section</a> <a href="#ref-for-concept-document-bc①">(2)</a> <a href="#ref-for-concept-document-bc②">(3)</a> <a href="#ref-for-concept-document-bc③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document-origin">
   <a href="https://html.spec.whatwg.org/C/#concept-document-origin">https://html.spec.whatwg.org/C/#concept-document-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document-origin">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document-policy-container">
   <a href="https://html.spec.whatwg.org/C/#concept-document-policy-container">https://html.spec.whatwg.org/C/#concept-document-policy-container</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document-policy-container">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-environment-active-service-worker">
   <a href="https://html.spec.whatwg.org/C/#concept-environment-active-service-worker">https://html.spec.whatwg.org/C/#concept-environment-active-service-worker</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-environment-active-service-worker">6.1.9.4. For Worklet</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-environment-creation-url">
   <a href="https://html.spec.whatwg.org/C/#concept-environment-creation-url">https://html.spec.whatwg.org/C/#concept-environment-creation-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-environment-creation-url">6.1.9.1. For Navigation</a>
    <li><a href="#ref-for-concept-environment-creation-url①">6.1.9.2. For Window</a>
    <li><a href="#ref-for-concept-environment-creation-url②">6.1.9.4. For Worklet</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-environment-id">
   <a href="https://html.spec.whatwg.org/C/#concept-environment-id">https://html.spec.whatwg.org/C/#concept-environment-id</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-environment-id">6.1.9.1. For Navigation</a>
    <li><a href="#ref-for-concept-environment-id①">6.1.9.4. For Worklet</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-environment-target-browsing-context">
   <a href="https://html.spec.whatwg.org/C/#concept-environment-target-browsing-context">https://html.spec.whatwg.org/C/#concept-environment-target-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-environment-target-browsing-context">6.1.9.1. For Navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-request-reserved-client">
   <a href="https://html.spec.whatwg.org/C/#concept-request-reserved-client">https://html.spec.whatwg.org/C/#concept-request-reserved-client</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-request-reserved-client">6.1.9.1. For Navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cross-origin-opener-policies">
   <a href="https://html.spec.whatwg.org/C/#cross-origin-opener-policies">https://html.spec.whatwg.org/C/#cross-origin-opener-policies</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cross-origin-opener-policies">1.1. Recommended readings</a> <a href="#ref-for-cross-origin-opener-policies①">(2)</a>
    <li><a href="#ref-for-cross-origin-opener-policies②">2. A problem</a>
    <li><a href="#termref-for-cross-origin-opener-policies">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-creating-a-new-browsing-context">
   <a href="https://html.spec.whatwg.org/C/#creating-a-new-browsing-context">https://html.spec.whatwg.org/C/#creating-a-new-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-creating-a-new-browsing-context">6.1.3. Creating new browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-environment-creation-url">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-creation-url">https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-creation-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-environment-creation-url③">6.5.1. storage-key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-coep">
   <a href="https://html.spec.whatwg.org/C/#coep">https://html.spec.whatwg.org/C/#coep</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-coep">1.1. Recommended readings</a> <a href="#ref-for-coep①">(2)</a>
    <li><a href="#ref-for-coep②">2. A problem</a> <a href="#ref-for-coep③">(2)</a> <a href="#ref-for-coep④">(3)</a> <a href="#ref-for-coep⑤">(4)</a> <a href="#ref-for-coep⑥">(5)</a> <a href="#ref-for-coep⑦">(6)</a> <a href="#ref-for-coep⑧">(7)</a>
    <li><a href="#ref-for-coep⑨">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cross-origin-opener-policies">
   <a href="https://html.spec.whatwg.org/C/#cross-origin-opener-policies">https://html.spec.whatwg.org/C/#cross-origin-opener-policies</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cross-origin-opener-policies">1.1. Recommended readings</a> <a href="#ref-for-cross-origin-opener-policies①">(2)</a>
    <li><a href="#ref-for-cross-origin-opener-policies②">2. A problem</a>
    <li><a href="#termref-for-cross-origin-opener-policies">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-settings-object-cross-origin-isolated-capability">
   <a href="https://html.spec.whatwg.org/C/#concept-settings-object-cross-origin-isolated-capability">https://html.spec.whatwg.org/C/#concept-settings-object-cross-origin-isolated-capability</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-settings-object-cross-origin-isolated-capability">2. A problem</a> <a href="#ref-for-concept-settings-object-cross-origin-isolated-capability①">(2)</a>
    <li><a href="#ref-for-concept-settings-object-cross-origin-isolated-capability②">7.1. Threat model</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-policy-container-embedder-policy">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#policy-container-embedder-policy">https://html.spec.whatwg.org/multipage/browsers.html#policy-container-embedder-policy</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-policy-container-embedder-policy">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-embedder-policy-report-only-reporting-endpoint">
   <a href="https://html.spec.whatwg.org/C/#embedder-policy-report-only-reporting-endpoint">https://html.spec.whatwg.org/C/#embedder-policy-report-only-reporting-endpoint</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-embedder-policy-report-only-reporting-endpoint">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-embedder-policy-report-only-value">
   <a href="https://html.spec.whatwg.org/C/#embedder-policy-report-only-value">https://html.spec.whatwg.org/C/#embedder-policy-report-only-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-embedder-policy-report-only-value">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-embedder-policy-reporting-endpoint">
   <a href="https://html.spec.whatwg.org/C/#embedder-policy-reporting-endpoint">https://html.spec.whatwg.org/C/#embedder-policy-reporting-endpoint</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-embedder-policy-reporting-endpoint">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-embedder-policy-value">
   <a href="https://html.spec.whatwg.org/C/#embedder-policy-value">https://html.spec.whatwg.org/C/#embedder-policy-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-embedder-policy-value">6.1.7. COEP embedder checks</a> <a href="#ref-for-embedder-policy-value①">(2)</a> <a href="#ref-for-embedder-policy-value②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-entry-global-object">
   <a href="https://html.spec.whatwg.org/C/#entry-global-object">https://html.spec.whatwg.org/C/#entry-global-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-global-object">6.1.5. Open popup with noopener</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-environment">
   <a href="https://html.spec.whatwg.org/C/#environment">https://html.spec.whatwg.org/C/#environment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-environment">6.1.9. Environment’s partition nonce</a>
    <li><a href="#ref-for-environment①">6.1.9.1. For Navigation</a> <a href="#ref-for-environment②">(2)</a>
    <li><a href="#ref-for-environment③">6.1.9.2. For Window</a> <a href="#ref-for-environment④">(2)</a>
    <li><a href="#ref-for-environment⑤">6.2.1. Plumb the partition-nonce</a>
    <li><a href="#ref-for-environment⑥">6.3. Integration with CHIPS</a> <a href="#ref-for-environment⑦">(2)</a> <a href="#ref-for-environment⑧">(3)</a> <a href="#ref-for-environment⑨">(4)</a> <a href="#ref-for-environment①⓪">(5)</a> <a href="#ref-for-environment①①">(6)</a> <a href="#ref-for-environment①②">(7)</a> <a href="#ref-for-environment①③">(8)</a>
    <li><a href="#ref-for-environment①④">6.4. Integration with storage-partitioning</a> <a href="#ref-for-environment①⑤">(2)</a>
    <li><a href="#ref-for-environment①⑥">6.5.1. storage-key</a> <a href="#ref-for-environment①⑦">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-environment-settings-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-environment-settings-object">6.5.1. storage-key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-hh-replace">
   <a href="https://html.spec.whatwg.org/C/#hh-replace">https://html.spec.whatwg.org/C/#hh-replace</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-hh-replace">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-HTMLIframeElement">
   <a href="https://html.spec.whatwg.org/C/#HTMLIframeElement">https://html.spec.whatwg.org/C/#HTMLIframeElement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-HTMLIframeElement">6.1.1. The Iframe attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-iframe-element">
   <a href="https://html.spec.whatwg.org/C/#the-iframe-element">https://html.spec.whatwg.org/C/#the-iframe-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-iframe-element">6.1.1. The Iframe attribute</a> <a href="#ref-for-the-iframe-element①">(2)</a>
    <li><a href="#ref-for-the-iframe-element②">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-initialise-the-document-object">
   <a href="https://html.spec.whatwg.org/C/#initialise-the-document-object">https://html.spec.whatwg.org/C/#initialise-the-document-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-initialise-the-document-object">6.1.4. Navigating a browsing context</a>
    <li><a href="#ref-for-initialise-the-document-object①">6.1.9.2. For Window</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-is-initial-about:blank">
   <a href="https://html.spec.whatwg.org/C/#is-initial-about:blank">https://html.spec.whatwg.org/C/#is-initial-about:blank</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-is-initial-about:blank">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigate">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate">https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigate">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigation-params">
   <a href="https://html.spec.whatwg.org/C/#navigation-params">https://html.spec.whatwg.org/C/#navigation-params</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-params">6.1.4. Navigating a browsing context</a> <a href="#ref-for-navigation-params①">(2)</a> <a href="#ref-for-navigation-params②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigation-params-hh">
   <a href="https://html.spec.whatwg.org/C/#navigation-params-hh">https://html.spec.whatwg.org/C/#navigation-params-hh</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-params-hh">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigation-params-origin">
   <a href="https://html.spec.whatwg.org/C/#navigation-params-origin">https://html.spec.whatwg.org/C/#navigation-params-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-params-origin">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigation-params-reserved-environment">
   <a href="https://html.spec.whatwg.org/C/#navigation-params-reserved-environment">https://html.spec.whatwg.org/C/#navigation-params-reserved-environment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-params-reserved-environment">6.1.9.2. For Window</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-obtain-a-site">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site">https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-obtain-a-site">6.2.1. Plumb the partition-nonce</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-origin">
   <a href="https://html.spec.whatwg.org/C/#concept-origin">https://html.spec.whatwg.org/C/#concept-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-origin">6.1.9.2. For Window</a>
    <li><a href="#ref-for-concept-origin①">6.2.1. Plumb the partition-nonce</a>
    <li><a href="#ref-for-concept-origin②">6.5.1. storage-key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-settings-object-origin">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-settings-object-origin">6.5.1. storage-key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-policy-container-embedder-policy">
   <a href="https://html.spec.whatwg.org/C/#policy-container-embedder-policy">https://html.spec.whatwg.org/C/#policy-container-embedder-policy</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-policy-container-embedder-policy①">6.1.7. COEP embedder checks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-process-a-navigate-fetch">
   <a href="https://html.spec.whatwg.org/C/#process-a-navigate-fetch">https://html.spec.whatwg.org/C/#process-a-navigate-fetch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-process-a-navigate-fetch">6.1.4. Navigating a browsing context</a>
    <li><a href="#ref-for-process-a-navigate-fetch①">6.1.9.1. For Navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-queue-a-cross-origin-embedder-policy-inheritance-violation">
   <a href="https://html.spec.whatwg.org/C/#queue-a-cross-origin-embedder-policy-inheritance-violation">https://html.spec.whatwg.org/C/#queue-a-cross-origin-embedder-policy-inheritance-violation</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-queue-a-cross-origin-embedder-policy-inheritance-violation">6.1.7. COEP embedder checks</a> <a href="#ref-for-queue-a-cross-origin-embedder-policy-inheritance-violation①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-relevant-global">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-relevant-global">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-relevant-settings-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-relevant-settings-object">6.1.7. COEP embedder checks</a> <a href="#ref-for-relevant-settings-object①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-same-origin-domain">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain">https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-same-origin-domain">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-script-:settings-for-workers">
   <a href="https://html.spec.whatwg.org/C/#script-:settings-for-workers">https://html.spec.whatwg.org/C/#script-:settings-for-workers</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-script-:settings-for-workers">6.1.9.3. For Worker</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-service-worker-obj">
   <a href="https://html.spec.whatwg.org/C/#service-worker-obj">https://html.spec.whatwg.org/C/#service-worker-obj</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-service-worker-obj">3. Explainer</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-set-up-a-window-environment-settings-object">
   <a href="https://html.spec.whatwg.org/C/#set-up-a-window-environment-settings-object">https://html.spec.whatwg.org/C/#set-up-a-window-environment-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-up-a-window-environment-settings-object">6.1.9.2. For Window</a> <a href="#ref-for-set-up-a-window-environment-settings-object①">(2)</a> <a href="#ref-for-set-up-a-window-environment-settings-object②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-set-up-a-worklet-environment-settings-object">
   <a href="https://html.spec.whatwg.org/C/#set-up-a-worklet-environment-settings-object">https://html.spec.whatwg.org/C/#set-up-a-worklet-environment-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-up-a-worklet-environment-settings-object">6.1.9.4. For Worklet</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-sharedworer">
   <a href="https://html.spec.whatwg.org/C/#sharedworer">https://html.spec.whatwg.org/C/#sharedworer</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sharedworer">3. Explainer</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-site">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#site">https://html.spec.whatwg.org/multipage/browsers.html#site</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-site">6.2.1. Plumb the partition-nonce</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-still-on-its-initial-about:blank-document">
   <a href="https://html.spec.whatwg.org/C/#still-on-its-initial-about:blank-document">https://html.spec.whatwg.org/C/#still-on-its-initial-about:blank-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-still-on-its-initial-about:blank-document">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-environment-target-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context">https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-environment-target-browsing-context①">6.1.9.4. For Worklet</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-top-level-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context">https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-top-level-browsing-context">6.1.9.1. For Navigation</a>
    <li><a href="#ref-for-top-level-browsing-context①">6.1.9.2. For Window</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-environment-top-level-creation-url">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-creation-url">https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-creation-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-environment-top-level-creation-url">6.1.9.1. For Navigation</a>
    <li><a href="#ref-for-concept-environment-top-level-creation-url①">6.1.9.2. For Window</a>
    <li><a href="#ref-for-concept-environment-top-level-creation-url②">6.1.9.4. For Worklet</a>
    <li><a href="#ref-for-concept-environment-top-level-creation-url③">6.2.1. Plumb the partition-nonce</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-environment-top-level-origin">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin">https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-environment-top-level-origin">6.1.9.1. For Navigation</a>
    <li><a href="#ref-for-concept-environment-top-level-origin①">6.1.9.2. For Window</a>
    <li><a href="#ref-for-concept-environment-top-level-origin②">6.1.9.4. For Worklet</a> <a href="#ref-for-concept-environment-top-level-origin③">(2)</a>
    <li><a href="#ref-for-concept-environment-top-level-origin④">6.2.1. Plumb the partition-nonce</a>
    <li><a href="#ref-for-concept-environment-top-level-origin⑤">6.3. Integration with CHIPS</a> <a href="#ref-for-concept-environment-top-level-origin⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-window-open-steps">
   <a href="https://html.spec.whatwg.org/C/#window-open-steps">https://html.spec.whatwg.org/C/#window-open-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window-open-steps">6.1.5. Open popup with noopener</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-implementation-defined">
   <a href="https://infra.spec.whatwg.org/#implementation-defined">https://infra.spec.whatwg.org/#implementation-defined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-implementation-defined">6.2.1. Plumb the partition-nonce</a> <a href="#ref-for-implementation-defined①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-struct">
   <a href="https://infra.spec.whatwg.org/#struct">https://infra.spec.whatwg.org/#struct</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-struct">6.1.4. Navigating a browsing context</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-tuple">
   <a href="https://infra.spec.whatwg.org/#tuple">https://infra.spec.whatwg.org/#tuple</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-tuple">6.3. Integration with CHIPS</a> <a href="#ref-for-tuple①">(2)</a>
    <li><a href="#ref-for-tuple②">6.5.1. storage-key</a> <a href="#ref-for-tuple③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-obtain-a-storage-key-for-non-storage-purposes">
   <a href="https://storage.spec.whatwg.org/#obtain-a-storage-key-for-non-storage-purposes">https://storage.spec.whatwg.org/#obtain-a-storage-key-for-non-storage-purposes</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-obtain-a-storage-key-for-non-storage-purposes">6.5.1. storage-key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-origin">
   <a href="https://url.spec.whatwg.org/#concept-url-origin">https://url.spec.whatwg.org/#concept-url-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-origin">6.2.1. Plumb the partition-nonce</a>
    <li><a href="#ref-for-concept-url-origin①">6.5.1. storage-key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url">
   <a href="https://url.spec.whatwg.org/#concept-url">https://url.spec.whatwg.org/#concept-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url">6.1.9.2. For Window</a> <a href="#ref-for-concept-url①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-Exposed">
   <a href="https://webidl.spec.whatwg.org/#Exposed">https://webidl.spec.whatwg.org/#Exposed</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-Exposed">6.1.1. The Iframe attribute</a>
    <li><a href="#ref-for-Exposed①">6.1.2. The Window attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-Global">
   <a href="https://webidl.spec.whatwg.org/#Global">https://webidl.spec.whatwg.org/#Global</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-Global">6.1.2. The Window attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-LegacyUnenumerableNamedProperties">
   <a href="https://webidl.spec.whatwg.org/#LegacyUnenumerableNamedProperties">https://webidl.spec.whatwg.org/#LegacyUnenumerableNamedProperties</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-LegacyUnenumerableNamedProperties">6.1.2. The Window attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-boolean">
   <a href="https://webidl.spec.whatwg.org/#idl-boolean">https://webidl.spec.whatwg.org/#idl-boolean</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-boolean">6.1.1. The Iframe attribute</a>
    <li><a href="#ref-for-idl-boolean①">6.1.2. The Window attribute</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-">back/forward cache</span>
     <li><span class="dfn-paneled" id="term-for-concept-response">concept-response</span>
     <li><span class="dfn-paneled" id="term-for-/issues/1">getviewportmedia</span>
     <li><span class="dfn-paneled" id="term-for-issuecomment-812">high resolution timers</span>
     <li><span class="dfn-paneled" id="term-for-sec-execution-contextssec-execution-contexts">javascript execution context</span>
     <li><span class="dfn-paneled" id="term-for-network-partition-key">network partition key</span>
     <li><span class="dfn-paneled" id="term-for-storage-key">storage key</span>
     <li><span class="dfn-paneled" id="term-for-threat-model">threat model</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-COLOR-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-window">window</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-eventtarget">EventTarget</span>
     <li><span class="dfn-paneled" id="term-for-concept-document">document</span>
     <li><span class="dfn-paneled" id="term-for-concept-node-document">node document</span>
     <li><span class="dfn-paneled" id="term-for-concept-reflect">reflect</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-sec-sharedarraybuffer-objects">SharedArrayBuffer</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-requestdestination-iframe">"iframe"</span>
     <li><span class="dfn-paneled" id="term-for-determine-the-network-partition-key">determine the network partition key</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-htmlelement">HTMLElement</span>
     <li><span class="dfn-paneled" id="term-for-nav-document">active document</span>
     <li><span class="dfn-paneled" id="term-for-active-window">active window</span>
     <li><span class="dfn-paneled" id="term-for-bc-container">bc-container</span>
     <li><span class="dfn-paneled" id="term-for-bc-container-document">bc-container-document</span>
     <li><span class="dfn-paneled" id="term-for-broadcasting-to-other-browsing-contexts">broadcastchannel</span>
     <li><span class="dfn-paneled" id="term-for-window-bc">browsing context</span>
     <li><span class="dfn-paneled" id="term-for-check-a-navigation-response&apos;s-adherence-to-its-embedder-policy">check a navigation response's adherence to its embedder policy</span>
     <li><span class="dfn-paneled" id="term-for-child-browsing-context">child browsing context</span>
     <li><span class="dfn-paneled" id="term-for-coep">coep</span>
     <li><span class="dfn-paneled" id="term-for-compatible-with-cross-origin-isolation">compatible with cross-origin isolation</span>
     <li><span class="dfn-paneled" id="term-for-concept-document-bc">concept-document-bc</span>
     <li><span class="dfn-paneled" id="term-for-concept-document-origin">concept-document-origin</span>
     <li><span class="dfn-paneled" id="term-for-concept-document-policy-container">concept-document-policy-container</span>
     <li><span class="dfn-paneled" id="term-for-concept-environment-active-service-worker">concept-environment-active-service-worker</span>
     <li><span class="dfn-paneled" id="term-for-concept-environment-creation-url">concept-environment-creation-url</span>
     <li><span class="dfn-paneled" id="term-for-concept-environment-id">concept-environment-id</span>
     <li><span class="dfn-paneled" id="term-for-concept-environment-target-browsing-context">concept-environment-target-browsing-context</span>
     <li><span class="dfn-paneled" id="term-for-concept-request-reserved-client">concept-request-reserved-client</span>
     <li><span class="dfn-paneled" id="term-for-cross-origin-opener-policies">coop</span>
     <li><span class="dfn-paneled" id="term-for-creating-a-new-browsing-context">creating a new browsing context</span>
     <li><span class="dfn-paneled" id="term-for-concept-environment-creation-url①">creation url</span>
     <li><span class="dfn-paneled" id="term-for-coep①">cross-origin-embedder-policy</span>
     <li><span class="dfn-paneled" id="term-for-cross-origin-opener-policies①">cross-origin-opener-policy</span>
     <li><span class="dfn-paneled" id="term-for-concept-settings-object-cross-origin-isolated-capability">crossoriginisolated</span>
     <li><span class="dfn-paneled" id="term-for-policy-container-embedder-policy">embedder policy</span>
     <li><span class="dfn-paneled" id="term-for-embedder-policy-report-only-reporting-endpoint">embedder-policy-report-only-reporting-endpoint</span>
     <li><span class="dfn-paneled" id="term-for-embedder-policy-report-only-value">embedder-policy-report-only-value</span>
     <li><span class="dfn-paneled" id="term-for-embedder-policy-reporting-endpoint">embedder-policy-reporting-endpoint</span>
     <li><span class="dfn-paneled" id="term-for-embedder-policy-value">embedder-policy-value</span>
     <li><span class="dfn-paneled" id="term-for-entry-global-object">entry global object</span>
     <li><span class="dfn-paneled" id="term-for-environment">environment</span>
     <li><span class="dfn-paneled" id="term-for-environment-settings-object">environment settings object</span>
     <li><span class="dfn-paneled" id="term-for-hh-replace">hh-replace</span>
     <li><span class="dfn-paneled" id="term-for-HTMLIframeElement">htmliframeelement</span>
     <li><span class="dfn-paneled" id="term-for-the-iframe-element">iframe</span>
     <li><span class="dfn-paneled" id="term-for-initialise-the-document-object">initialize the document object</span>
     <li><span class="dfn-paneled" id="term-for-is-initial-about:blank">is initial about:blank</span>
     <li><span class="dfn-paneled" id="term-for-navigate">navigate</span>
     <li><span class="dfn-paneled" id="term-for-navigation-params">navigation params</span>
     <li><span class="dfn-paneled" id="term-for-navigation-params-hh">navigation-params-hh</span>
     <li><span class="dfn-paneled" id="term-for-navigation-params-origin">navigation-params-origin</span>
     <li><span class="dfn-paneled" id="term-for-navigation-params-reserved-environment">navigation-params-reserved-environment</span>
     <li><span class="dfn-paneled" id="term-for-obtain-a-site">obtain a site</span>
     <li><span class="dfn-paneled" id="term-for-concept-origin">origin</span>
     <li><span class="dfn-paneled" id="term-for-concept-settings-object-origin">origin <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="term-for-policy-container-embedder-policy①">policy-container-embedder-policy</span>
     <li><span class="dfn-paneled" id="term-for-process-a-navigate-fetch">process a navigate fetch</span>
     <li><span class="dfn-paneled" id="term-for-queue-a-cross-origin-embedder-policy-inheritance-violation">queue a cross-origin embedder policy inheritance violation</span>
     <li><span class="dfn-paneled" id="term-for-concept-relevant-global">relevant global object</span>
     <li><span class="dfn-paneled" id="term-for-relevant-settings-object">relevant settings object</span>
     <li><span class="dfn-paneled" id="term-for-same-origin-domain">same origin-domain</span>
     <li><span class="dfn-paneled" id="term-for-script-:settings-for-workers">script settings for workers</span>
     <li><span class="dfn-paneled" id="term-for-service-worker-obj">serviceworker</span>
     <li><span class="dfn-paneled" id="term-for-set-up-a-window-environment-settings-object">set up a window environment settings object</span>
     <li><span class="dfn-paneled" id="term-for-set-up-a-worklet-environment-settings-object">set up a worklet environment settings object</span>
     <li><span class="dfn-paneled" id="term-for-sharedworer">sharedworker</span>
     <li><span class="dfn-paneled" id="term-for-site">site</span>
     <li><span class="dfn-paneled" id="term-for-still-on-its-initial-about:blank-document">still on its initial about:blank document</span>
     <li><span class="dfn-paneled" id="term-for-concept-environment-target-browsing-context①">target browsing context</span>
     <li><span class="dfn-paneled" id="term-for-top-level-browsing-context">top-level browsing context</span>
     <li><span class="dfn-paneled" id="term-for-concept-environment-top-level-creation-url">top-level creation url</span>
     <li><span class="dfn-paneled" id="term-for-concept-environment-top-level-origin">top-level origin</span>
     <li><span class="dfn-paneled" id="term-for-window-open-steps">window open steps</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-implementation-defined">implementation-defined</span>
     <li><span class="dfn-paneled" id="term-for-struct">struct</span>
     <li><span class="dfn-paneled" id="term-for-tuple">tuple</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-obtain-a-storage-key-for-non-storage-purposes">obtain a storage key for non-storage purposes</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-concept-url-origin">origin</span>
     <li><span class="dfn-paneled" id="term-for-concept-url">url</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
     <li><span class="dfn-paneled" id="term-for-Global">Global</span>
     <li><span class="dfn-paneled" id="term-for-LegacyUnenumerableNamedProperties">LegacyUnenumerableNamedProperties</span>
     <li><span class="dfn-paneled" id="term-for-idl-boolean">boolean</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-chips">[CHIPS]
   <dd>Dylan Cutler; Kaustubha Govind. <a href="https://github.com/WICG/CHIPS"><cite>CHIPS (Cookies Having Independent Partitioned State)</cite></a>. URL: <a href="https://github.com/WICG/CHIPS">https://github.com/WICG/CHIPS</a>
   <dt id="biblio-cookies">[COOKIES]
   <dd>Mike West; John Wilander. <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-07"><cite>Cookies: HTTP State Management Mechanism</cite></a>. URL: <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-07">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-07</a>
   <dt id="biblio-css-color-3">[CSS-COLOR-3]
   <dd>Tantek Çelik; Chris Lilley; David Baron. <a href="https://drafts.csswg.org/css-color-3/"><cite>CSS Color Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-color-3/">https://drafts.csswg.org/css-color-3/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-storage">[STORAGE]
   <dd><a href="https://storage.spec.whatwg.org/"><cite>Storage</cite></a>. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-storagepartition">[StoragePartition]
   <dd><a href="https://privacycg.github.io/storage-partitioning/"><cite>Client-Side Storage Partitioning</cite></a>. URL: <a href="https://privacycg.github.io/storage-partitioning/">https://privacycg.github.io/storage-partitioning/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-coep-credentialless">[COEP-credentialless]
   <dd>Arthur Sonzogni; et al. <a href="https://wicg.github.io/cross-origin-embedder-policy/"><cite>COEP: credentialless</cite></a>. URL: <a href="https://wicg.github.io/cross-origin-embedder-policy/">https://wicg.github.io/cross-origin-embedder-policy/</a>
   <dt id="biblio-coep-require-corp">[COEP-require-corp]
   <dd>Mike West. <a href="https://wicg.github.io/cross-origin-embedder-policy/"><cite>COEP</cite></a>. URL: <a href="https://wicg.github.io/cross-origin-embedder-policy/">https://wicg.github.io/cross-origin-embedder-policy/</a>
   <dt id="biblio-indexeddb">[IndexedDB]
   <dd>Nikunj Mehta; et al. <a href="https://w3c.github.io/IndexedDB/"><cite>Indexed Database API</cite></a>. URL: <a href="https://w3c.github.io/IndexedDB/">https://w3c.github.io/IndexedDB/</a>
   <dt id="biblio-securityprivacyquestionnaire">[SecurityPrivacyQuestionnaire]
   <dd>Theresa O’Connor; et al. <a href="https://www.w3.org/TR/security-privacy-questionnaire/"><cite>Self-Review Questionnaire: Security and Privacy</cite></a>. URL: <a href="https://www.w3.org/TR/security-privacy-questionnaire/">https://www.w3.org/TR/security-privacy-questionnaire/</a>
   <dt id="biblio-spectre">[Spectre]
   <dd>Paul Kocher; et al. <a href="https://spectreattack.com/spectre.pdf"><cite>Spectre Attacks: Exploiting Speculative Execution</cite></a>. URL: <a href="https://spectreattack.com/spectre.pdf">https://spectreattack.com/spectre.pdf</a>
   <dt id="biblio-web-sql">[WEB-SQL]
   <dd>Ian Hickson. <a href="https://www.w3.org/TR/webdatabase/"><cite>Web SQL Database</cite></a>. 18 November 2010. NOTE. URL: <a href="https://www.w3.org/TR/webdatabase/">https://www.w3.org/TR/webdatabase/</a>
   <dt id="biblio-webstorage">[WebStorage]
   <dd>Ian Hickson. <a href="https://w3c.github.io/webstorage/"><cite>Web Storage (Second Edition)</cite></a>. URL: <a href="https://w3c.github.io/webstorage/">https://w3c.github.io/webstorage/</a>
   <dt id="biblio-whycoopcoep">[WhyCoopCoep]
   <dd>Eiji Kitamura; Demenic Denicola. <a href="https://web.dev/why-coop-coep/"><cite>Why you need "cross-origin isolated" for powerful features</cite></a>. URL: <a href="https://web.dev/why-coop-coep/">https://web.dev/why-coop-coep/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#htmliframeelement"><code><c- g>HTMLIFrameElement</c-></code></a> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><c- n>HTMLElement</c-></a> {
  // [...]
  <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-htmliframeelement-credentialless"><code><c- g>credentialless</c-></code></a>;
  // [...]
};

[
  <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Global"><c- g>Global</c-></a>=<a data-link-type="idl-name" href="#window"><c- n>Window</c-></a>,
  <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->,
  <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyUnenumerableNamedProperties"><c- g>LegacyUnenumerableNamedProperties</c-></a>
]
<c- b>interface</c-> <a href="#window"><code><c- g>Window</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  // ...
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-readonly data-type="boolean" href="#dom-window-credentialless"><code><c- g>credentialless</c-></code></a>;
  // ...
};

</pre>
  <aside class="dfn-panel" data-for="attr-iframe-credentialless">
   <b><a href="#attr-iframe-credentialless">#attr-iframe-credentialless</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attr-iframe-credentialless">6.1.1. The Iframe attribute</a>
    <li><a href="#ref-for-attr-iframe-credentialless①">6.1.6. General section</a> <a href="#ref-for-attr-iframe-credentialless②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="window">
   <b><a href="#window">#window</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window⑤">6.1.2. The Window attribute</a>
    <li><a href="#ref-for-window①③">6.1.6. General section</a> <a href="#ref-for-window①④">(2)</a>
    <li><a href="#ref-for-window①⑥">6.1.9. Environment’s partition nonce</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-window-credentialless">
   <b><a href="#dom-window-credentialless">#dom-window-credentialless</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-window-credentialless">6.1.2. The Window attribute</a>
    <li><a href="#ref-for-dom-window-credentialless①">6.1.3. Creating new browsing context</a>
    <li><a href="#ref-for-dom-window-credentialless②">6.1.4. Navigating a browsing context</a> <a href="#ref-for-dom-window-credentialless③">(2)</a> <a href="#ref-for-dom-window-credentialless④">(3)</a>
    <li><a href="#ref-for-dom-window-credentialless⑤">6.1.5. Open popup with noopener</a>
    <li><a href="#ref-for-dom-window-credentialless⑥">6.1.6. General section</a> <a href="#ref-for-dom-window-credentialless⑦">(2)</a> <a href="#ref-for-dom-window-credentialless⑧">(3)</a> <a href="#ref-for-dom-window-credentialless⑨">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="navigation-params-credentialless">
   <b><a href="#navigation-params-credentialless">#navigation-params-credentialless</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-params-credentialless">6.1.4. Navigating a browsing context</a> <a href="#ref-for-navigation-params-credentialless①">(2)</a>
    <li><a href="#ref-for-navigation-params-credentialless②">6.1.7. COEP embedder checks</a>
    <li><a href="#ref-for-navigation-params-credentialless③">6.1.9.2. For Window</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="credentialless-window">
   <b><a href="#credentialless-window">#credentialless-window</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-credentialless-window">6.1.6. General section</a> <a href="#ref-for-credentialless-window①">(2)</a>
    <li><a href="#ref-for-credentialless-window②">6.1.9. Environment’s partition nonce</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="initial-window-credentialless">
   <b><a href="#initial-window-credentialless">#initial-window-credentialless</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-initial-window-credentialless">6.1.3. Creating new browsing context</a>
    <li><a href="#ref-for-initial-window-credentialless①">6.1.6. General section</a> <a href="#ref-for-initial-window-credentialless②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="navigation-credentialless">
   <b><a href="#navigation-credentialless">#navigation-credentialless</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-credentialless">6.1.4. Navigating a browsing context</a>
    <li><a href="#ref-for-navigation-credentialless①">6.1.6. General section</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="page-credentialless-nonce">
   <b><a href="#page-credentialless-nonce">#page-credentialless-nonce</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-page-credentialless-nonce">6.1.9. Environment’s partition nonce</a>
    <li><a href="#ref-for-page-credentialless-nonce①">6.1.9.1. For Navigation</a>
    <li><a href="#ref-for-page-credentialless-nonce②">6.1.9.2. For Window</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="environment-partition-nonce">
   <b><a href="#environment-partition-nonce">#environment-partition-nonce</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-environment-partition-nonce">6.1.9. Environment’s partition nonce</a>
    <li><a href="#ref-for-environment-partition-nonce①">6.1.9.1. For Navigation</a>
    <li><a href="#ref-for-environment-partition-nonce②">6.1.9.2. For Window</a>
    <li><a href="#ref-for-environment-partition-nonce③">6.1.9.3. For Worker</a> <a href="#ref-for-environment-partition-nonce④">(2)</a>
    <li><a href="#ref-for-environment-partition-nonce⑤">6.1.9.4. For Worklet</a> <a href="#ref-for-environment-partition-nonce⑥">(2)</a>
    <li><a href="#ref-for-environment-partition-nonce⑦">6.2.1. Plumb the partition-nonce</a>
    <li><a href="#ref-for-environment-partition-nonce⑧">6.3. Integration with CHIPS</a> <a href="#ref-for-environment-partition-nonce⑨">(2)</a> <a href="#ref-for-environment-partition-nonce①⓪">(3)</a> <a href="#ref-for-environment-partition-nonce①①">(4)</a> <a href="#ref-for-environment-partition-nonce①②">(5)</a>
    <li><a href="#ref-for-environment-partition-nonce①③">6.4. Integration with storage-partitioning</a> <a href="#ref-for-environment-partition-nonce①④">(2)</a>
    <li><a href="#ref-for-environment-partition-nonce①⑤">6.5.1. storage-key</a> <a href="#ref-for-environment-partition-nonce①⑥">(2)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>