<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>App History API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <link href="https://wicg.github.io/app-history/" rel="canonical">
<style>
.selected-text-file-an-issue {
  position: fixed;
  bottom: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.8);
  font-size: smaller;
  padding: 4px 10px;
  z-index: 4;
}

dfn var {
  font-style: italic;
}

table {
  margin: 1em 0;
}

/* WHATWG-style <hr>s, instead of WICG-style. Specific selector is necessary to override WICG styles. */
:not(.head) > :not(.head) + hr {
  display: block;
  background: none;
  border: none;
  padding: 0;
  margin: 3em 0;
  height: auto;
}
:not(.head) > :not(.head) + hr::before {
  content: none;
}

/* domintro from https://resources.whatwg.org/standard.css */
.domintro {
  position: relative;
  color: green;
  background: #DDFFDD;
  margin: 2.5em 0 2em 0;
  padding: 1.5em 1em 0.5em 2em;
}

.domintro dt, .domintro dt * {
  color: black;
  font-size: inherit;
}
.domintro dd {
  margin: 0.5em 0 1em 2em; padding: 0;
}
.domintro dd p {
  margin: 0.5em 0;
}
.domintro::before {
  content: 'For web developers (non-normative)';
  background: green;
  color: white;
  padding: 0.15em 0.25em;
  font-style: normal;
  position: absolute;
  top: -0.8em;
  left: -0.8em;
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    /* white-space: pre; /* Do we need this? */
    /* display: inline-block; /* This forces multiple refs to wrap */
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    /* white-space: pre; /* Do we need this? */
    /* display: inline-block; /* This forces multiple refs to wrap */
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
</style>
<style>/* Boilerplate: style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */


@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)
*/
var { cursor: pointer; }
var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">App History API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/app-history/">https://wicg.github.io/app-history/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://domenic.me/">Domenic Denicola</a> (<a class="p-org org" href="https://www.google.com/">Google</a>) <a class="u-email email" href="mailto:d@domenic.me">d@domenic.me</a>
     <dt>Participate:
     <dd><a href="https://github.com/WICG/app-history">GitHub WICG/app-history</a> (<a href="https://github.com/WICG/app-history/issues/new">new issue</a>, <a href="https://github.com/WICG/app-history/issues?state=open">open issues</a>)
     <dt>Commits:
     <dd><a href="https://github.com/WICG/app-history/commits/master/spec.bs">GitHub spec.bs commits</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 1970 the Contributors to the App History API Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The app history API provides a web application-focused way of managing same-origin same-frame history entries and navigations.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#global"><span class="secno">1</span> <span class="content">The <code class="idl"><span>AppHistory</span></code> class</span></a>
    <li><a href="#navigate-event"><span class="secno">2</span> <span class="content">The <code class="idl"><span>navigate</span></code> event</span></a>
    <li><a href="#apphistoryentry-class"><span class="secno">3</span> <span class="content">App history entries</span></a>
    <li>
     <a href="#navigate-patches"><span class="secno">4</span> <span class="content">Patches to fire the <code class="idl"><span>navigate</span></code> event</span></a>
     <ol class="toc">
      <li><a href="#form-patches"><span class="secno">4.1</span> <span class="content">Form submission patches</span></a>
      <li><a href="#user-initiated-patches"><span class="secno">4.2</span> <span class="content">Browser UI/user-initiated patches</span></a>
      <li><a href="#navigate-algorithm-patches"><span class="secno">4.3</span> <span class="content">Navigation algorithm updates</span></a>
     </ol>
    <li>
     <a href="#session-history-patches"><span class="secno">5</span> <span class="content">Patches to session history</span></a>
     <ol class="toc">
      <li><a href="#session-history-new-she-fields"><span class="secno">5.1</span> <span class="content">New <span>session history entry</span> items</span></a>
      <li><a href="#session-history-patches-key"><span class="secno">5.2</span> <span class="content">Carrying over the app history key</span></a>
      <li><a href="#session-history-patches-origin"><span class="secno">5.3</span> <span class="content">Tracking the <span>origin</span> member</span></a>
      <li><a href="#session-history-patches-update"><span class="secno">5.4</span> <span class="content">Updating the <code class="idl"><span>AppHistory</span></code> object</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
<script async src="https://resources.whatwg.org/file-issue.js"></script>
   <h2 class="heading settled" data-level="1" id="global"><span class="secno">1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory">AppHistory</a></code> class</span><a class="self-link" href="#global"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window"><c- g>Window</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistory" id="ref-for-apphistory①"><c- n>AppHistory</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistory" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory"><c- g>appHistory</c-></a>;
};
</pre>
   <p>Each <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①">Window</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="Window" data-dfn-type="dfn" data-noexport id="window-app-history">app history</dfn>, which is a new <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②">AppHistory</a></code> instance created alongside the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②">Window</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="attribute" data-export id="dom-window-apphistory"><code>appHistory</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history">app history</a>.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="apphistory"><code><c- g>AppHistory</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistoryentry" id="ref-for-apphistoryentry"><c- n>AppHistoryEntry</c-></a>? <a class="idl-code" data-link-type="attribute" data-type="AppHistoryEntry?" href="#dom-apphistory-current" id="ref-for-dom-apphistory-current"><c- g>current</c-></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#apphistoryentry" id="ref-for-apphistoryentry①"><c- n>AppHistoryEntry</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-entries" id="ref-for-dom-apphistory-entries"><c- g>entries</c-></a>();

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistory-cangoback" id="ref-for-dom-apphistory-cangoback"><c- g>canGoBack</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistory-cangoforward" id="ref-for-dom-apphistory-cangoforward"><c- g>canGoForward</c-></a>;

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigate" id="ref-for-dom-apphistory-onnavigate"><c- g>onnavigate</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigatesuccess" id="ref-for-dom-apphistory-onnavigatesuccess"><c- g>onnavigatesuccess</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigateerror" id="ref-for-dom-apphistory-onnavigateerror"><c- g>onnavigateerror</c-></a>;
};
</pre>
   <dl class="domintro non-normative">
    <dt><code><code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory①">appHistory</a></code> . <code class="idl"><a data-link-type="idl" href="#dom-apphistory-current" id="ref-for-dom-apphistory-current①">current</a></code></code> 
    <dd>
     <p>The current <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry②">AppHistoryEntry</a></code>. </p>
    <dt><code><code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory②">appHistory</a></code> . <code class="idl"><a data-link-type="idl" href="#dom-apphistory-entries" id="ref-for-dom-apphistory-entries①">entries()</a></code></code> 
    <dd>
     <p>Returns an array of <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry③">AppHistoryEntry</a></code> instances representing the current app history list, i.e. all session history entries for this <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③">Window</a></code> that are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin">same origin</a> and contiguous to the current session history entry. </p>
    <dt><code><code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory③">appHistory</a></code> . <code class="idl"><a data-link-type="idl" href="#dom-apphistory-cangoback" id="ref-for-dom-apphistory-cangoback①">canGoBack</a></code></code> 
    <dd>
     <p>Returns true if the current <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry④">AppHistoryEntry</a></code> is not the first one in the app history entries list. </p>
    <dt><code><code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory④">appHistory</a></code> . <code class="idl"><a data-link-type="idl" href="#dom-apphistory-cangoforward" id="ref-for-dom-apphistory-cangoforward①">canGoForward</a></code></code> 
    <dd>
     <p>Returns true if the current <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑤">AppHistoryEntry</a></code> is not the last one in the app history entries list. </p>
   </dl>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory③">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-entry-list">entry list</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑥">AppHistoryEntry</a></code> objects, initially empty.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory④">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-current-index">current index</dfn>, an integer, initially −1.</p>
   <div class="algorithm" data-algorithm="current" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-current"><code>current</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active">fully active</a>, then return null.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index">current index</a> is −1, then return null.</p>
      <p class="note" role="note">This occurs if accessing the API while on the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>, where the <a data-link-type="dfn" href="#apphistory-update-the-entries" id="ref-for-apphistory-update-the-entries">update the entries</a> algorithm will not yet have been run to completion. </p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list">entry list</a>[<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index①">current index</a>].</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="entries()" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="method" data-export id="dom-apphistory-entries"><code>entries()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①">fully active</a>, then return the empty list.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list①">entries list</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canGoBack" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-cangoback"><code>canGoBack</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window②">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active②">fully active</a>, then return false.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index②">current index</a> is −1, then return false.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index③">current index</a> is 0, then return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canGoForward" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-cangoforward"><code>canGoForward</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window③">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active③">fully active</a>, then return false.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index④">current index</a> is −1, then return false.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index⑤">current index</a> is equal to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list②">entry list</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size">size</a> − 1, then return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <p>The following are the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers">event handlers</a> (and their corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type">event handler event types</a>) that must be supported, as <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes">event handler IDL attributes</a>, by objects implementing the <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑤">AppHistory</a></code> interface:</p>
   <table>
    <thead>
     <tr>
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers①">Event handler</a> 
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type①">Event handler event type</a> 
    <tbody>
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-onnavigate"><code>onnavigate</code></dfn> 
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="event" data-export id="eventdef-apphistory-navigate"><code>navigate</code></dfn> 
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-onnavigatesuccess"><code>onnavigatesuccess</code></dfn> 
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="event" data-export id="eventdef-apphistory-navigatesuccess"><code>navigatesuccess</code></dfn> 
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-onnavigateerror"><code>onnavigateerror</code></dfn> 
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="event" data-export id="eventdef-apphistory-navigateerror"><code>navigateerror</code></dfn> 
   </table>
   <div algoithm>
     To <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-update-the-entries">update the entries</dfn> for an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑥">AppHistory</a></code> instance <var>appHistory</var>: 
    <ol>
     <li data-md>
      <p>Let <var>browsingContext</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global④">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window④">associated Document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc">browsing context</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>browsingContext</var> is not null.</p>
     <li data-md>
      <p>Let <var>sessionHistory</var> be <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history">session history</a>.</p>
     <li data-md>
      <p>If <var>browsingContext</var> is <a data-link-type="dfn">still on its initial <code>about:blank</code> <code>Document</code></a>, then:</p>
      <ol>
       <li data-md>
        <p class="assertion">Assert: <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list③">entry list</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty">is empty</a>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
      <p class="note" role="note">This can occur if running the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps">URL and history update steps</a>, e.g. via <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/multipage/dynamic-markup-insertion.html#dom-document-open" id="ref-for-dom-document-open">document.open()</a></code>, on the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>. The app history API chooses not to expose the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code>, so we bail early. </p>
     <li data-md>
      <p>Let <var>appHistorySHEs</var> be a new empty list.</p>
     <li data-md>
      <p>Let <var>currentSHE</var> be <var>sessionHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry">current entry</a>.</p>
     <li data-md>
      <p>Let <var>backwardIndex</var> be the index of <var>currentSHE</var> within <var>sessionHistory</var>, minus 1.</p>
     <li data-md>
      <p>While <var>backwardIndex</var> > 0:</p>
      <ol>
       <li data-md>
        <p>Let <var>she</var> be <var>sessionHistory</var>[<var>backwardIndex</var>].</p>
       <li data-md>
        <p>If <var>she</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin">origin</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin①">same origin</a> with <var>currentSHE</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin①">origin</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-prepend" id="ref-for-list-prepend">prepend</a> <var>she</var> to <var>appHistorySHEs</var>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break">break</a>.</p>
       <li data-md>
        <p>Set <var>backwardIndex</var> to <var>backwardIndex</var> − 1.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>currentSHE</var> to <var>appHistorySHEs</var>.</p>
     <li data-md>
      <p>Let <var>forwardIndex</var> be the index of <var>currentSHE</var> within <var>sessionHistory</var>, plus 1.</p>
     <li data-md>
      <p>While <var>forwardIndex</var> &lt; <var>sessionHistory</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size①">size</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>she</var> be <var>sessionHistory</var>[<var>forwardIndex</var>].</p>
       <li data-md>
        <p>If <var>she</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin②">origin</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin②">same origin</a> with <var>currentSHE</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin③">origin</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">append</a> <var>she</var> to <var>appHistorySHEs</var>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break①">break</a>.</p>
       <li data-md>
        <p>Set <var>forwardIndex</var> to <var>forwardIndex</var> + 1.</p>
      </ol>
     <li data-md>
      <p>Let <var>newCurrentIndex</var> be the index of <var>currentSHE</var> within <var>appHistorySHEs</var>.</p>
     <li data-md>
      <p>Let <var>newEntryList</var> be an empty list.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>oldAHE</var> of <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list④">entry list</a>:</p>
      <ol>
       <li data-md>
        <p>Set <var>oldAHE</var>’s <a data-link-type="dfn" href="#apphistoryentry-index" id="ref-for-apphistoryentry-index">index</a> to −1.</p>
      </ol>
     <li data-md>
      <p>Let <var>index</var> be 0.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>she</var> of <var>appHistorySHEs</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list⑤">entry list</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> an <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑦">AppHistoryEntry</a></code> <var>existingAHE</var> whose <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry">session history entry</a> is <var>she</var>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">append</a> <var>existingAHE</var> to <var>newEntryList</var>.</p>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>newAHE</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new">new</a> <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑧">AppHistoryEntry</a></code> created in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant realm</a> of <var>appHistory</var>.</p>
         <li data-md>
          <p>Set <var>newAHE</var>’s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry①">session history entry</a> to <var>she</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append③">Append</a> <var>newAHE</var> to <var>newEntryList</var>.</p>
        </ol>
       <li data-md>
        <p>Set <var>newEntryList</var>[<var>index</var>]'s <a data-link-type="dfn" href="#apphistoryentry-index" id="ref-for-apphistoryentry-index①">index</a> to <var>index</var>.</p>
       <li data-md>
        <p>Set <var>index</var> to <var>index</var> + 1.</p>
      </ol>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list⑥">entry list</a> to <var>newEntryList</var>.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index⑥">current index</a> to <var>newCurrentIndex</var>.</p>
    </ol>
    <p class="note" role="note">For same-document navigations only the <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index⑦">current index</a> and the <a data-link-type="dfn" href="#apphistoryentry-index" id="ref-for-apphistoryentry-index②">indices</a> of the various <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑨">AppHistoryEntry</a></code> objects will ultimately be updated by this algorithm. Implementations can special-case same-document navigations and avoid reassembling the <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list⑦">entry list</a>. </p>
   </div>
   <h2 class="heading settled" data-level="2" id="navigate-event"><span class="secno">2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate">navigate</a></code> event</span><a class="self-link" href="#navigate-event"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="apphistorynavigateevent"><code><c- g>AppHistoryNavigateEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event" id="ref-for-event"><c- n>Event</c-></a> {
  <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="constructor" data-export data-lt="AppHistoryNavigateEvent(type, eventInit)|constructor(type, eventInit)|AppHistoryNavigateEvent(type)|constructor(type)" id="dom-apphistorynavigateevent-apphistorynavigateevent"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-apphistorynavigateevent-apphistorynavigateevent"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEvent/AppHistoryNavigateEvent(type, eventInit), AppHistoryNavigateEvent/constructor(type, eventInit), AppHistoryNavigateEvent/AppHistoryNavigateEvent(type), AppHistoryNavigateEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-type"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigateeventinit" id="ref-for-dictdef-apphistorynavigateeventinit"><c- n>AppHistoryNavigateEventInit</c-></a> <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEvent/AppHistoryNavigateEvent(type, eventInit), AppHistoryNavigateEvent/constructor(type, eventInit), AppHistoryNavigateEvent/AppHistoryNavigateEvent(type), AppHistoryNavigateEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-eventinit"><code><c- g>eventInit</c-></code><a class="self-link" href="#dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-eventinit"></a></dfn> = {});

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-apphistorynavigationtype" id="ref-for-enumdef-apphistorynavigationtype"><c- n>AppHistoryNavigationType</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistoryNavigationType" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype"><c- g>navigationType</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond"><c- g>canRespond</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-userinitiated" id="ref-for-dom-apphistorynavigateevent-userinitiated"><c- g>userInitiated</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-hashchange" id="ref-for-dom-apphistorynavigateevent-hashchange"><c- g>hashChange</c-></a>;
//  readonly attribute AppHistoryEntry destination;
//  readonly attribute AbortSignal signal;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata"><c- n>FormData</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="FormData?" href="#dom-apphistorynavigateevent-formdata" id="ref-for-dom-apphistorynavigateevent-formdata"><c- g>formData</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="any" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info"><c- g>info</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith"><c- g>respondWith</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEvent/respondWith(newNavigationAction)" data-dfn-type="argument" data-export id="dom-apphistorynavigateevent-respondwith-newnavigationaction-newnavigationaction"><code><c- g>newNavigationAction</c-></code><a class="self-link" href="#dom-apphistorynavigateevent-respondwith-newnavigationaction-newnavigationaction"></a></dfn>);
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-apphistorynavigateeventinit"><code><c- g>AppHistoryNavigateEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit" id="ref-for-dictdef-eventinit"><c- n>EventInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-apphistorynavigationtype" id="ref-for-enumdef-apphistorynavigationtype①"><c- n>AppHistoryNavigationType</c-></a> <dfn class="idl-code" data-default="&quot;push&quot;" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="AppHistoryNavigationType " id="dom-apphistorynavigateeventinit-navigationtype"><code><c- g>navigationType</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-navigationtype"></a></dfn> = "push";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-apphistorynavigateeventinit-canrespond"><code><c- g>canRespond</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-canrespond"></a></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑥"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-apphistorynavigateeventinit-userinitiated"><code><c- g>userInitiated</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-userinitiated"></a></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑦"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-apphistorynavigateeventinit-hashchange"><code><c- g>hashChange</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-hashchange"></a></dfn> = <c- b>false</c->;
//  required AppHistoryEntry destination;
//  required AbortSignal signal;
  <a data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata①"><c- n>FormData</c-></a>? <dfn class="idl-code" data-default="null" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="FormData? " id="dom-apphistorynavigateeventinit-formdata"><code><c- g>formData</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-formdata"></a></dfn> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①"><c- b>any</c-></a> <dfn class="idl-code" data-default="null" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="any " id="dom-apphistorynavigateeventinit-info"><code><c- g>info</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-info"></a></dfn> = <c- b>null</c->;
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-apphistorynavigationtype"><code><c- g>AppHistoryNavigationType</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigationType" data-dfn-type="enum-value" data-export id="dom-apphistorynavigationtype-push"><code><c- s>"push"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigationType" data-dfn-type="enum-value" data-export id="dom-apphistorynavigationtype-replace"><code><c- s>"replace"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigationType" data-dfn-type="enum-value" data-export id="dom-apphistorynavigationtype-traverse"><code><c- s>"traverse"</c-></code></dfn>
};
</pre>
   <dl class="domintro non-normative">
    <dt><code>event . <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype①">navigationType</a></code></code> 
    <dd>
     <p>One of "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push">push</a></code>", "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace">replace</a></code>", or "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse">traverse</a></code>", indicating what type of navigation this is. </p>
    <dt><code>event . <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond①">canRespond</a></code></code> 
    <dd>
     <p>True if <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①">respondWith()</a></code> can be called to convert this navigation into a single-page navigation; false otherwise. </p>
     <p>Generally speaking, this will be true whenever the destination URL is <a data-link-type="dfn" href="#rewritable" id="ref-for-rewritable">rewritable</a> relative to the page’s current URL, except for cross-document back/forward navigations, where it will always be false. </p>
    <dt><code>event . <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-userinitiated" id="ref-for-dom-apphistorynavigateevent-userinitiated①">userInitiated</a></code></code> 
    <dd>
     <p>True if this navigation was due to a user clicking on an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element">a</a></code> element, submitting a <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/forms.html#the-form-element" id="ref-for-the-form-element">form</a></code> element, or using the browser UI to navigate; false otherwise. </p>
    <dt><code>event . <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-hashchange" id="ref-for-dom-apphistorynavigateevent-hashchange①">hashChange</a></code></code> 
    <dd>
     <p>True if this navigation is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid">fragment navigation</a>; false otherwise. </p>
    <dt><code>event . <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-formdata" id="ref-for-dom-apphistorynavigateevent-formdata①">formData</a></code></code> 
    <dd>
     <p>The <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata②">FormData</a></code> representing the submitted form entries for this navigation, if this navigation is a POST <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit">form submission</a>; null otherwise. </p>
    <dt><code>event . <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info①">info</a></code></code> 
    <dd>
     <p>An arbitrary JavaScript value passed via other app history APIs that initiated this navigation, or null if the navigation was initiated by the user or via a non-app history API. </p>
    <dt><code>event . <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith②">respondWith</a></code>( <var>newNavigationAction</var> )</code> 
    <dd>
     <p>Synchronously converts this navigation into a same-document navigation to the destination URL. </p>
     <p>The given <var>newNavigationAction</var> promise is used to signal the duration, and success or failure, of the navigation. After it settles, the browser signals to the user (e.g. via a loading spinner UI, or assistive technology) that the navigation is finished. Additionally, it fires <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigatesuccess" id="ref-for-eventdef-apphistory-navigatesuccess">navigatesuccess</a></code> or <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigateerror" id="ref-for-eventdef-apphistory-navigateerror">navigateerror</a></code> events as appropriate, which other parts of the web application can respond to. </p>
     <p>This method will throw a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code> if <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond②">canRespond</a></code> is false, or if <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted">isTrusted</a></code> is false. It will throw an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code> if not called synchronously, during event dispatch. </p>
   </dl>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-navigationtype"><code>navigationType</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-canrespond"><code>canRespond</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-userinitiated"><code>userInitiated</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-hashchange"><code>hashChange</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-formdata"><code>formData</code></dfn>, and <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-info"><code>info</code></dfn> getter steps are to return the value that the corresponding attribute was initialized to.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent">AppHistoryNavigateEvent</a></code> has the following associated values that are used when its <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype②">navigationType</a></code> is "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push①">push</a></code>" or "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace①">replace</a></code>":</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="dfn" data-noexport id="apphistorynavigateevent-destination-url">destination URL</dfn>, a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="dfn" data-noexport id="apphistorynavigateevent-classic-history-api-serialized-data">classic history API serialized data</dfn>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state">serialized state</a>-or-null</p>
   </ul>
   <p>It has the following associated value that is used when its <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype③">navigationType</a></code> is "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse①">traverse</a></code>":</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="dfn" data-noexport id="apphistorynavigateevent-destination-entry">destination entry</dfn>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry">session history entry</a></p>
   </ul>
   <p>These are set appropriately when the event is <a data-link-type="dfn" href="#fire-a-navigate-event" id="ref-for-fire-a-navigate-event">fired</a>.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent①">AppHistoryNavigateEvent</a></code> also has an associated <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①">Promise</a></code>-or-null <dfn class="dfn-paneled" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="dfn" data-noexport id="apphistorynavigateevent-navigation-action-promise">navigation action promise</dfn>, initially null.</p>
   <div class="algorithm" data-algorithm="respondWith(newNavigationAction)" data-algorithm-for="AppHistoryNavigateEvent">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="method" data-export id="dom-apphistorynavigateevent-respondwith"><code>respondWith(<var>newNavigationAction</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑤">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc">browsing context</a> is null, then throw an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>'s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted①">isTrusted</a></code> attribute was initialized to false, then throw a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror①">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond③">canRespond</a></code> attribute was initialized to false, then throw a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror②">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#dispatch-flag" id="ref-for-dispatch-flag">dispatch flag</a> is unset, then throw an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag" id="ref-for-canceled-flag">canceled flag</a> is set, then throw an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror③">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑥">DOMException</a></code>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag" id="ref-for-canceled-flag①">canceled flag</a>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a>'s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promise" id="ref-for-apphistorynavigateevent-navigation-action-promise">navigation action promise</a> to <var>newNavigationAction</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype④">navigationType</a></code> attribute was initialized to "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push②">push</a></code>" or "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace②">replace</a></code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>isPush</var> be true if <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②②">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype⑤">navigationType</a></code> attribute was initialized to "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push③">push</a></code>"; otherwise, false.</p>
       <li data-md>
        <p>Run the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps①">URL and history update steps</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②③">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑥">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑤">associated document</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②④">this</a>'s <a data-link-type="dfn" href="#apphistorynavigateevent-destination-url" id="ref-for-apphistorynavigateevent-destination-url">destination URL</a>, with <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#uhus-serializeddata" id="ref-for-uhus-serializeddata">serializedData</a></i> set to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑤">this</a>'s <a data-link-type="dfn" href="#apphistorynavigateevent-classic-history-api-serialized-data" id="ref-for-apphistorynavigateevent-classic-history-api-serialized-data">classic history API serialized data</a> and <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#uhus-ispush" id="ref-for-uhus-ispush">isPush</a></i> set to <var>isPush</var>.</p>
      </ol>
     <li data-md>
      <p>Otherwise:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn">Traverse the history</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑥">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑦">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc①">browsing context</a> to <a data-link-type="dfn" href="#apphistorynavigateevent-destination-entry" id="ref-for-apphistorynavigateevent-destination-entry">destination entry</a>.</p>
      </ol>
    </ol>
   </div>
   <hr>
   <div class="algorithm" data-algorithm="fire a navigate event">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fire-a-navigate-event">fire a <code>navigate</code> event</dfn> at an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑦">AppHistory</a></code> <var>appHistory</var> given an <code class="idl"><a data-link-type="idl" href="#enumdef-apphistorynavigationtype" id="ref-for-enumdef-apphistorynavigationtype②">AppHistoryNavigationType</a></code> <dfn class="dfn-paneled" data-dfn-for="fire a navigate event" data-dfn-type="dfn" data-noexport id="fire-a-navigate-event-navigationtype"><var>navigationType</var></dfn>, a boolean <dfn class="dfn-paneled" data-dfn-for="fire a navigate event" data-dfn-type="dfn" data-noexport id="fire-a-navigate-event-issamedocument"><var>isSameDocument</var></dfn>, an optional <a data-link-type="dfn" href="#user-navigation-involvement" id="ref-for-user-navigation-involvement">user navigation involvement</a> <dfn class="dfn-paneled" data-dfn-for="fire a navigate event" data-dfn-type="dfn" data-noexport id="fire-a-navigate-event-userinvolvement"><var>userInvolvement</var></dfn> (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none">none</a></code>"), an optional value <var>navigateInfo</var> (default null), an optional <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata③">FormData</a></code> <a data-link-type="dfn">entries</a> or null <dfn class="dfn-paneled" data-dfn-for="fire a navigate event" data-dfn-type="dfn" data-noexport id="fire-a-navigate-event-formdataentrylist"><var>formDataEntryList</var></dfn> (default null), an optional <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①">URL</a> <dfn class="dfn-paneled" data-dfn-for="fire a navigate event" data-dfn-type="dfn" data-noexport id="fire-a-navigate-event-destinationurl"><var>destinationURL</var></dfn>, an optional <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state①">serialized state</a>-or-null <dfn class="dfn-paneled" data-dfn-for="fire a navigate event" data-dfn-type="dfn" data-noexport id="fire-a-navigate-event-classichistoryapiserializeddata"><var>classicHistoryAPISerializedData</var></dfn> (default null), and an optional <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry①">session history entry</a> <dfn class="dfn-paneled" data-dfn-for="fire a navigate event" data-dfn-type="dfn" data-noexport id="fire-a-navigate-event-destinationentry"><var>destinationEntry</var></dfn>: 
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①">relevant Realm</a>.</p>
     <li data-md>
      <p>Let <var>event</var> be the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-create" id="ref-for-concept-event-create">creating an event</a> given <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent②">AppHistoryNavigateEvent</a></code>, in <var>realm</var>.</p>
     <li data-md>
      <p>Initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type" id="ref-for-dom-event-type">type</a></code> to "<code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①">navigate</a></code>".</p>
     <li data-md>
      <p>Initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype⑥">navigationType</a></code> to <var>navigationType</var>.</p>
     <li data-md>
      <p>Initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info②">info</a></code> to <var>navigateInfo</var>.</p>
     <li data-md>
      <p>If <var>navigationType</var> is either "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push④">push</a></code>" or "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace③">replace</a></code>":</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: <var>destinationURL</var> was given, and <var>destinationEntry</var> was not.</p>
       <li data-md>
        <p>Set <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-destination-url" id="ref-for-apphistorynavigateevent-destination-url①">destination URL</a> to <var>destinationURL</var>.</p>
       <li data-md>
        <p>Set <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-classic-history-api-serialized-data" id="ref-for-apphistorynavigateevent-classic-history-api-serialized-data①">classic history API serialized data</a> to <var>classicHistoryAPISerializedData</var>.</p>
      </ol>
     <li data-md>
      <p>Otherwise:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>: <var>destinationEntry</var> was given</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>: <var>destinationURL</var> was not given, and <var>classicHistoryAPISerializedData</var> and <var>formDataEntryList</var> are null.</p>
       <li data-md>
        <p>Set <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-destination-entry" id="ref-for-apphistorynavigateevent-destination-entry①">destination entry</a> to <var>destinationEntry</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>currentURL</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑧">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑥">associated document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url" id="ref-for-concept-document-url">URL</a>.</p>
     <li data-md>
      <p>If all of the following are true:</p>
      <ul>
       <li data-md>
        <p><var>isSameDocument</var> is true;</p>
       <li data-md>
        <p><var>destinationURL</var> <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-equals" id="ref-for-concept-url-equals">equals</a> <var>currentURL</var> with <i><a data-link-type="dfn" href="https://url.spec.whatwg.org/#url-equals-exclude-fragments" id="ref-for-url-equals-exclude-fragments">exclude fragments</a></i> set to true; and</p>
       <li data-md>
        <p><var>destinationURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment" id="ref-for-concept-url-fragment">fragment</a> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-is" id="ref-for-string-is">identical to</a> <var>currentURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment" id="ref-for-concept-url-fragment①">fragment</a></p>
      </ul>
      <p>then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-hashchange" id="ref-for-dom-apphistorynavigateevent-hashchange②">hashChange</a></code> to true. Otherwise, initialize it to false.</p>
     <li data-md>
      <p>If <var>destinationURL</var> is <a data-link-type="dfn" href="#rewritable" id="ref-for-rewritable①">rewritable</a> relative to <var>currentURL</var>, and either <var>isSameDocument</var> is true or <var>navigationType</var> is not "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse②">traverse</a></code>", then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond④">canRespond</a></code> to true. Otherwise, initialize it to false.</p>
     <li data-md>
      <p>If either <var>userInvolvement</var> is not "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui">browser UI</a></code>" or <var>navigationType</var> is not "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse③">traverse</a></code>", then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-cancelable" id="ref-for-dom-event-cancelable">cancelable</a></code> to true.</p>
     <li data-md>
      <p>If <var>userInvolvement</var> is "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none①">none</a></code>", then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-userinitiated" id="ref-for-dom-apphistorynavigateevent-userinitiated②">userInitiated</a></code> to false. Otherwise, initialize it to true.</p>
     <li data-md>
      <p>If <var>formDataEntryList</var> is not null, then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-formdata" id="ref-for-dom-apphistorynavigateevent-formdata②">formData</a></code> to a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①">new</a> <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata④">FormData</a></code> created in <var>realm</var>, associated to <var>formDataEntryList</var>. Otherwise, initialize it to null.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-dispatch" id="ref-for-concept-event-dispatch">dispatching</a> <var>event</var> at <var>appHistory</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑦">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑨">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc②">browsing context</a> is null, then return false.</p>
      <p class="note" role="note">This can occurr if an event listener disconnected the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code> corresponding to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑧">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⓪">relevant global object</a>.</p>
     <li data-md>
      <p>If <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promise" id="ref-for-apphistorynavigateevent-navigation-action-promise①">navigation action promise</a> is non-null, or both <var>result</var> and <var>isSameDocument</var> are true, then:</p>
      <ol>
       <li data-md>
        <p>If <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promise" id="ref-for-apphistorynavigateevent-navigation-action-promise②">navigation action promise</a> is null, then set it to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with">a promise resolved with</a> undefined, created in <var>realm</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" id="ref-for-dfn-perform-steps-once-promise-is-settled">React</a> to <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promise" id="ref-for-apphistorynavigateevent-navigation-action-promise③">navigation action promise</a> with the following fulfillment steps:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">Fire an event</a> named <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigatesuccess" id="ref-for-eventdef-apphistory-navigatesuccess①">navigatesuccess</a></code> at <var>appHistory</var>.</p>
        </ol>
        and the following rejection steps given reason <var>rejectionReason</var>: 
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire①">Fire an event</a> named <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigateerror" id="ref-for-eventdef-apphistory-navigateerror①">navigateerror</a></code> at <var>appHistory</var> using <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#errorevent" id="ref-for-errorevent">ErrorEvent</a></code>, with <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-error" id="ref-for-dom-errorevent-error">error</a></code> initialized to <var>rejectionReason</var>, and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-message" id="ref-for-dom-errorevent-message">message</a></code>, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-filename" id="ref-for-dom-errorevent-filename">filename</a></code>, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-lineno" id="ref-for-dom-errorevent-lineno">lineno</a></code>, and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-colno" id="ref-for-dom-errorevent-colno">colno</a></code> initialized to appropriate values that can be extracted from <var>rejectionReason</var> in the same underspecified way the user agent typically does for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception" id="ref-for-report-the-exception">report an exception</a> algorithm.</p>
        </ol>
      </ol>
      <p class="note" role="note">If <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promise" id="ref-for-apphistorynavigateevent-navigation-action-promise④">navigation action promise</a> is non-null, then <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith③">respondWith()</a></code> was called and so we’re performing a same-document navigation, for which we want to fire <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigatesuccess" id="ref-for-eventdef-apphistory-navigatesuccess②">navigatesuccess</a></code> or <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigateerror" id="ref-for-eventdef-apphistory-navigateerror②">navigateerror</a></code> events as appropriate. Otherwise, if the navigation is same-document and was not canceled, we still fire <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigatesuccess" id="ref-for-eventdef-apphistory-navigatesuccess③">navigatesuccess</a></code> after a microtask. </p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <p>A <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url②">URL</a> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="rewritable">rewritable</dfn> relative to another <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url③">URL</a> if they differ in only the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-path" id="ref-for-concept-url-path">path</a>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-query" id="ref-for-concept-url-query">query</a>, or <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment" id="ref-for-concept-url-fragment②">fragment</a> components.</p>
   <div class="example" id="example-rewritable-url">
    <a class="self-link" href="#example-rewritable-url"></a> <code>https://example.com/foo?bar#baz</code> is rewritable relative to <code>https://example.com/qux</code>. 
    <p>However, the concept is not the same as the two URLs' <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin">origins</a> being <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin③">the same</a>: <code>https://user:password@example.com/qux</code> is not rewritable relative to <code>https://example.com/qux</code>.</p>
    <p>Similarly, <code>about:blank</code> or <code>blob:</code> URLs are not rewritable relative to <code>https:</code> URLs, despite there being cases where a <code>https</code>:-<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url" id="ref-for-concept-document-url①">URL</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③">Document</a></code> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin④">same origin</a> with an <code>about:blank</code> or <code>blob:</code>-derived <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">Document</a></code>.</p>
   </div>
   <h2 class="heading settled" data-level="3" id="apphistoryentry-class"><span class="secno">3. </span><span class="content">App history entries</span><a class="self-link" href="#apphistoryentry-class"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="apphistoryentry"><code><c- g>AppHistoryEntry</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-apphistoryentry-key" id="ref-for-dom-apphistoryentry-key"><c- g>key</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-apphistoryentry-id" id="ref-for-dom-apphistoryentry-id"><c- g>id</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-apphistoryentry-url" id="ref-for-dom-apphistoryentry-url"><c- g>url</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long-long" id="ref-for-idl-long-long"><c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="long long" href="#dom-apphistoryentry-index" id="ref-for-dom-apphistoryentry-index"><c- g>index</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑧"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistoryentry-samedocument" id="ref-for-dom-apphistoryentry-samedocument"><c- g>sameDocument</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②"><c- b>any</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistoryentry-getstate" id="ref-for-dom-apphistoryentry-getstate"><c- g>getState</c-></a>();

  // TODO event handlers
};
</pre>
   <dl class="domintro non-normative">
    <dt><code>entry . <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-key" id="ref-for-dom-apphistoryentry-key①">key</a></code></code> 
    <dd>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent">user agent</a>-generated random UUID string representing this app history entry’s place in the app history list. This value will be reused by other <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①⓪">AppHistoryEntry</a></code> instances that replace this one due to replace-style navigations. This value will survive session restores. </p>
     <p>This is useful for navigating back to this location in the app history entry list, using <code>appHistory.goTo(key)</code>. </p>
    <dt><code>entry . <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-id" id="ref-for-dom-apphistoryentry-id①">id</a></code></code> 
    <dd>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①">user agent</a>-generated random UUID string representing this specific app history entry. This value will <em>not</em> be reused by other <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①①">AppHistoryEntry</a></code> instances. This value will survive session restores. </p>
     <p>This is useful for associating data with this app history entry using other storage APIs. </p>
    <dt><code>entry . <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-url" id="ref-for-dom-apphistoryentry-url①">url</a></code></code> 
    <dd>
     <p>The URL of this app history entry. </p>
    <dt><code>entry . <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-index" id="ref-for-dom-apphistoryentry-index①">index</a></code></code> 
    <dd>
     <p>The index of this app history entry within <code class="idl"><a data-link-type="idl" href="#dom-apphistory-entries" id="ref-for-dom-apphistory-entries②">appHistory.entries()</a></code>, or −1 if the entry is not in the app history list. </p>
    <dt><code>entry . <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-samedocument" id="ref-for-dom-apphistoryentry-samedocument①">sameDocument</a></code></code> 
    <dd>
     <p>Indicates whether or not this app history entry is for the same <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a></code> as the current <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2">document</a></code> value, or not. This will be true, for example, in cases of fragment navigations or single-page app navigations. </p>
    <dt><code>entry . <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-getstate" id="ref-for-dom-apphistoryentry-getstate①">getState()</a></code></code> 
    <dd>
     <p>Returns the deserialization of the state stored in this entry, which was added to the entry using <code>appHistory.navigate()</code>. This state survives session restores. </p>
     <p>Note that in general, unless the state value is a primitive, <code>entry.getState() !== entry.getState()</code>, since a fresh copy is returned each time. </p>
     <p>This state is unrelated to the classic history API’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-history-state" id="ref-for-dom-history-state">history.state</a></code>. </p>
   </dl>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①②">AppHistoryEntry</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryEntry" data-dfn-type="dfn" data-noexport id="apphistoryentry-session-history-entry">session history entry</dfn>, which is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry②">session history entry</a>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①③">AppHistoryEntry</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryEntry" data-dfn-type="dfn" data-noexport id="apphistoryentry-index">index</dfn>, which is an integer.</p>
   <div class="algorithm" data-algorithm="key" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-key"><code>key</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑨">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①①">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑦">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active④">fully active</a>, then return the empty string.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⓪">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry②">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key">app history key</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="id" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-id"><code>id</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①②">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑧">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑤">fully active</a>, then return the empty string.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③②">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry③">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-id" id="ref-for-session-history-entry-app-history-id">app history id</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="url" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-url"><code>url</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③③">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①③">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑨">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑥">fully active</a>, then return the empty string.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③④">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry④">session history entry</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-url" id="ref-for-she-url">URL</a>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer">serialized</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="index" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-index"><code>index</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑤">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①④">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①⓪">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑦">fully active</a>, then return −1.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑥">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑤">session history entry</a>'s <a data-link-type="dfn" href="#apphistoryentry-index" id="ref-for-apphistoryentry-index③">index</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="sameDocument" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-samedocument"><code>sameDocument</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑦">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑤">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①①">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑧">fully active</a>, then return false.</p>
     <li data-md>
      <p>Return true if <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑧">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑥">session history entry</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document">document</a> equals <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑨">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑥">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①②">associated Document</a>, and false otherwise.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="getState()" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="method" data-export id="dom-apphistoryentry-getstate"><code>getState()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⓪">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑦">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①③">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑨">fully active</a>, then return null.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④①">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑦">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state">app history state</a> is null, then return null.</p>
     <li data-md>
      <p>Return <a data-link-type="abstract-op" href="https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize" id="ref-for-structureddeserialize">StructuredDeserialize</a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④②">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑧">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state①">app history state</a>).</p>
    </ol>
    <p class="note" role="note">Unlike <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-history-state" id="ref-for-dom-history-state①">history.state</a></code>, this will deserialize upon each access. </p>
    <p class="note" role="note">This can in theory throw an exception, if attempting to deserialize a large <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer">ArrayBuffer</a></code> when not enough memory is available. </p>
   </div>
   <h2 class="heading settled" data-level="4" id="navigate-patches"><span class="secno">4. </span><span class="content">Patches to fire the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate②">navigate</a></code> event</span><a class="self-link" href="#navigate-patches"></a></h2>
   <p>The following section details monkeypatches to <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> that cause the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate③">navigate</a></code> event to be fired appropriately, and for canceling the event to cancel the navigation. The first few sections detail slight tweaks to existing algorithms to pass through useful information into the navigation and history traversal algorithms. Then, <a href="#navigate-algorithm-patches">§ 4.3 Navigation algorithm updates</a> contains the actual firing of the event.</p>
   <h3 class="heading settled" data-level="4.1" id="form-patches"><span class="secno">4.1. </span><span class="content">Form submission patches</span><a class="self-link" href="#form-patches"></a></h3>
   <p>To properly thread the form entry list from its creation through to <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent③">AppHistoryNavigateEvent</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-formdata" id="ref-for-dom-apphistorynavigateevent-formdata③">formData</a></code> property, we need the following modifications:</p>
   <div class="algorithm" data-algorithm="form navigate">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate">navigate</a> algorithm to take a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> of <a data-link-type="dfn">entries</a> or null <dfn class="dfn-paneled" data-dfn-for="navigate" data-dfn-type="dfn" data-noexport id="navigate-entrylist"><var>entryList</var></dfn> (default null), replacing its <var>navigationType</var> parameter. Then insert a step somewhere early in the algorithm to convert this back into the <var>navigationType</var> variable used by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a> section that is ultimately passed to <a data-link-type="biblio" href="#biblio-csp" title="Content Security Policy Level 3">[CSP]</a>: 
    <ol>
     <li data-md>
      <p>Let <var>navigationType</var> be "<code>form-submission</code>" if <var>entryList</var> is non-null; otherwise, "<code>other</code>".</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="plan to navigate">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate" id="ref-for-plan-to-navigate">plan to navigate</a> algorithm to take an additional optional argument <var>entryList</var> (default null). Then, modify the step which calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate①">navigate</a> to pass it along: 
    <ol>
     <li data-md>
      <p>
       <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate②">Navigate</a> <var>target browsing context</var> to <var>destination</var>, with <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-hh" id="ref-for-navigation-hh">historyHandling</a></i> set to <var>historyHandling</var> 
       <del>and <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-navigationtype" id="ref-for-navigation-navigationtype">navigationType</a></i> set to "<code>form-submission</code>"</del>
       <ins><i><a data-link-type="dfn" href="#navigate-entrylist" id="ref-for-navigate-entrylist">entryList</a></i> set to <var>entryList</var></ins>
       .
      </p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="submit as entity body"> Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#submit-body" id="ref-for-submit-body">submit as entity body</a> algorithm to pass <var>entry list</var> along to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate" id="ref-for-plan-to-navigate①">plan to navigate</a> as a second argument. </div>
   <h3 class="heading settled" data-level="4.2" id="user-initiated-patches"><span class="secno">4.2. </span><span class="content">Browser UI/user-initiated patches</span><a class="self-link" href="#user-initiated-patches"></a></h3>
   <p>To more rigorously specify when a navigation is initiated from browser UI or by the user interacting with <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element①">a</a></code>, <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element" id="ref-for-the-area-element">area</a></code>, and <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/forms.html#the-form-element" id="ref-for-the-form-element①">form</a></code> elements, both for the purposes of the <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent④">AppHistoryNavigateEvent</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-userinitiated" id="ref-for-dom-apphistorynavigateevent-userinitiated③">userInitiated</a></code> property and for prohibiting interception of certain types of browser-UI-initiated navigations, we need the following modifications:</p>
   <p>Introduce (right before the definition of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate③">navigate</a> algorithm) the concept of a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="user-navigation-involvement">user navigation involvement</dfn>, which is one of the following:</p>
   <dl>
    <dt data-md>"<dfn class="dfn-paneled" data-dfn-for="user navigation involvement" data-dfn-type="dfn" data-noexport id="user-navigation-involvement-browser-ui"><code>browser UI</code></dfn>"
    <dd data-md>
     <p>The navigation was initiated by the user via browser UI mechanisms</p>
    <dt data-md>"<dfn class="dfn-paneled" data-dfn-for="user navigation involvement" data-dfn-type="dfn" data-noexport id="user-navigation-involvement-activation"><code>activation</code></dfn>"
    <dd data-md>
     <p>The navigation was initiated by the user via the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior">activation behavior</a> of an element</p>
    <dt data-md>"<dfn class="dfn-paneled" data-dfn-for="user navigation involvement" data-dfn-type="dfn" data-noexport id="user-navigation-involvement-none"><code>none</code></dfn>"
    <dd data-md>
     <p>The navigation was not initiated by the user</p>
   </dl>
   <p>Define the <dfn class="dfn-paneled" data-dfn-for="Event" data-dfn-type="dfn" data-noexport id="event-user-navigation-involvement">user navigation involvement</dfn> for an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code> <var>event</var> as "<code><a data-link-type="dfn" href="#user-navigation-involvement-activation" id="ref-for-user-navigation-involvement-activation">activation</a></code>" if <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted②">isTrusted</a></code> attribute is initialized to true, and "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none②">none</a></code>" otherwise.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate④">navigate</a> algorithm to take an optional named argument <dfn class="dfn-paneled" data-dfn-for="navigate" data-dfn-type="dfn" data-noexport id="navigate-userinvolvement"><var>userInvolvement</var></dfn> (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none③">none</a></code>"). Then, update the paragraph talking about browser-UI initiated navigation as follows:</p>
   <blockquote>
     A user agent may provide various ways for the user to explicitly cause a browsing context to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑤">navigate</a>, in addition to those defined in this specification.
    <ins> Such cases must set the <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement">userInvolvement</a></i> argument to "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui①">browser UI</a></code>".</ins>
   </blockquote>
   <p class="note" role="note">This infrastructure partially solves <a href="https://github.com/whatwg/html/issues/5381">whatwg/html#5381</a>, and it’d be ideal to update the `<a data-link-type="http-header" href="https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-site" id="ref-for-http-headerdef-sec-fetch-site"><code>Sec-Fetch-Site</code></a>` spec at the same time.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid①">navigate to a fragment</a> algorithm to take a new <var>userInvolvement</var> argument. Then, update the call to it from <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑥">navigate</a> to set <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement①">userInvolvement</a></i> to this <var>userInvolvement</var> value.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history-by-a-delta" id="ref-for-traverse-the-history-by-a-delta">traverse the history by a delta</a> argument to take an optional named argument <dfn class="dfn-paneled" data-dfn-for="traverse the history by a delta" data-dfn-type="dfn" data-noexport id="traverse-the-history-by-a-delta-userinvolvement"><var>userInvolvement</var></dfn> (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none④">none</a></code>"). Then, update the paragraph talking about user-initiated navigation as follows:</p>
   <blockquote>
     When the user navigates through a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context">browsing context</a>, e.g. using a browser’s back and forward buttons, the user agent must <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history-by-a-delta" id="ref-for-traverse-the-history-by-a-delta①">traverse the history by a delta</a> with a delta equivalent to the action specified by the user
    <del> and</del>
    <ins>,</ins>
     the browsing context being operated on
    <ins>, and <i><a data-link-type="dfn" href="#traverse-the-history-by-a-delta-userinvolvement" id="ref-for-traverse-the-history-by-a-delta-userinvolvement">userInvolvement</a></i> set to "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui②">browser UI</a></code>"</ins>
    . 
   </blockquote>
   <hr>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2">follow the hyperlink</a> algorithm to take a new <var>userInvolvement</var> argument. Then, update the call to it from <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑦">navigate</a> to set <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement②">userInvolvement</a></i> to this <var>userInvolvement</var> value.</p>
   <div class="algorithm" data-algorithm="area activation behavior">
     Modify the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior①">activation behavior</a> of <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element" id="ref-for-the-area-element①">area</a></code> elements by introducing the <var>event</var> argument and replacing the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2①">follow the hyperlink</a> step with the following: 
    <ol>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2②">follow the hyperlink</a> created by <var>element</var> with the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement">user navigation involvement</a> for <var>event</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="a activation behavior">
     Modify the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior②">activation behavior</a> of <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element②">a</a></code> elements by replacing its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2③">follow the hyperlink</a> step with the following: 
    <ol>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2④">follow the hyperlink</a> created by <var>element</var> with the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement①">user navigation involvement</a> for <var>event</var>.</p>
    </ol>
   </div>
   <p>Expand the section on "<a href="https://html.spec.whatwg.org/multipage/semantics.html#providing-users-with-a-means-to-follow-hyperlinks-created-using-the-link-element">Providing users with a means to follow hyperlinks created using the <code>link</code> element</a>" by adding the following sentence:</p>
   <blockquote>
    <ins>Such invocations of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2⑤">follow the hyperlink</a> algorithm must set the <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement③">userInvolvement</a></i> argument to "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui③">browser UI</a></code>".</ins>
   </blockquote>
   <hr>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate" id="ref-for-plan-to-navigate②">plan to navigate</a> algorithm to take a <var>userInvolvement</var> argument. Then, update the call to it from <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑧">navigate</a> to set <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement④">userInvolvement</a></i> to this <var>userInvolvement</var> value.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit①">submit</a> algorithm to take an optional <var>userInvolvement</var> argument (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none⑤">none</a></code>").  Have the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit②">submit</a> algorithm pass along its value to all invocations of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate" id="ref-for-plan-to-navigate③">plan to navigate</a>.</p>
   <p>Modify the definition of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior③">activation behavior</a> for <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element">input</a></code> elements to take an <var>event</var> argument. Then, pass along this argument to the invocation of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior" id="ref-for-input-activation-behavior">input activation behavior</a>.</p>
   <p>Modify the Submit Button state’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior" id="ref-for-input-activation-behavior①">input activation behavior</a> by having it take an <var>event<var> argument and pass along the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement②">user navigation involvement</a> for <var>event</var> as the final argument when it calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit③">submit</a>.</var></var></p>
   <p>Modify the Image Button state’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior" id="ref-for-input-activation-behavior②">input activation behavior</a> by having it take an <var>event<var> argument and pass along the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement③">user navigation involvement</a> for <var>event</var> as the final argument when it calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit④">submit</a>.</var></var></p>
   <p>Modify the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" id="ref-for-the-button-element">button</a></code> element’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior④">activation behavior</a> by having it take an <var>event</var> argument and, in the Submit Button case, to pass along the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement④">user navigation involvement</a> for <var>event</var> as the final argument when it calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit⑤">submit</a>.</p>
   <p>Modify the no-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-elements.html#attr-button-type-submit-state" id="ref-for-attr-button-type-submit-state">submit button</a> case for <a href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#implicit-submission">implicit form submission</a> to pass along "<code><a data-link-type="dfn" href="#user-navigation-involvement-activation" id="ref-for-user-navigation-involvement-activation①">activation</a></code>" as the final argument when it calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit⑥">submit</a>.</p>
   <p class="note" role="note">The case of implicit submission when a submit button is present is automatically taken care of because it fires a (trusted) click event at the submit button.</p>
   <h3 class="heading settled" data-level="4.3" id="navigate-algorithm-patches"><span class="secno">4.3. </span><span class="content">Navigation algorithm updates</span><a class="self-link" href="#navigate-algorithm-patches"></a></h3>
   <p>With the above infrastructure in place, we can actually fire and handle the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate④">navigate</a></code> event in the following locations:</p>
   <div class="algorithm" data-algorithm="shared history push/replace steps">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#shared-history-push/replace-state-steps" id="ref-for-shared-history-push/replace-state-steps">shared history push/replace state steps</a> by inserting the following steps right before the step that runs the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps②">URL and history update steps</a>. 
    <ol>
     <li data-md>
      <p>Let <var>appHistory</var> be <var>history</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑧">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history①">app history</a>.</p>
     <li data-md>
      <p>Let <var>navigationType</var> be "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push⑤">push</a></code>" if <var>isPush</var> is true, and "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace④">replace</a></code>" otherwise.</p>
     <li data-md>
      <p>Let <var>continue</var> be the result of <a data-link-type="dfn" href="#fire-a-navigate-event" id="ref-for-fire-a-navigate-event①">firing a navigate event</a> at <var>appHistory</var> with <i><a data-link-type="dfn" href="#fire-a-navigate-event-navigationtype" id="ref-for-fire-a-navigate-event-navigationtype">navigationType</a></i> set to <var>navigationType</var>, <i><a data-link-type="dfn" href="#fire-a-navigate-event-issamedocument" id="ref-for-fire-a-navigate-event-issamedocument">isSameDocument</a></i> set to true, <i><a data-link-type="dfn" href="#fire-a-navigate-event-destinationurl" id="ref-for-fire-a-navigate-event-destinationurl">destinationURL</a></i> set to <var>newURL</var>, and <i><a data-link-type="dfn" href="#fire-a-navigate-event-classichistoryapiserializeddata" id="ref-for-fire-a-navigate-event-classichistoryapiserializeddata">classicHistoryAPISerializedData</a></i> set to <var>serializedData</var>.</p>
     <li data-md>
      <p>If <var>continue</var> is false, return.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="navigate to a fragment">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid②">navigate to a fragment</a> algorithm by prepending the following steps. Recall that per <a href="#user-initiated-patches">§ 4.2 Browser UI/user-initiated patches</a> we have introduced a <var>userInvolvement</var> argument. 
    <ol>
     <li data-md>
      <p>Let <var>appHistory</var> be the <a data-link-type="dfn">current entry</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document①">document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑨">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history②">app history</a>.</p>
     <li data-md>
      <p>Let <var>navigationType</var> be "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push⑥">push</a></code>" if <var>historyHandling</var> is "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default" id="ref-for-hh-default"><code>default</code></a>"; otherwise, "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace⑤">replace</a></code>".</p>
     <li data-md>
      <p>Let <var>continue</var> be the result of <a data-link-type="dfn" href="#fire-a-navigate-event" id="ref-for-fire-a-navigate-event②">firing a navigate event</a> at <var>appHistory</var> given with <i><a data-link-type="dfn" href="#fire-a-navigate-event-navigationtype" id="ref-for-fire-a-navigate-event-navigationtype①">navigationType</a></i> set to <var>navigationType</var>, <i><a data-link-type="dfn" href="#fire-a-navigate-event-issamedocument" id="ref-for-fire-a-navigate-event-issamedocument①">isSameDocument</a></i> set to true, <i><a data-link-type="dfn" href="#fire-a-navigate-event-userinvolvement" id="ref-for-fire-a-navigate-event-userinvolvement">userInvolvement</a></i> set to <var>userInvolvement</var>, and <i><a data-link-type="dfn" href="#fire-a-navigate-event-destinationurl" id="ref-for-fire-a-navigate-event-destinationurl①">destinationURL</a></i> set to <var>url</var>.</p>
     <li data-md>
      <p>If <var>continue</var> is false, return.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="navigate" id="navigate-modifications">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑨">navigate</a> algorithm by inserting the following step right before the step which goes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>. Recall that per <a href="#user-initiated-patches">§ 4.2 Browser UI/user-initiated patches</a> we have introduced <var>userInvolvement</var> argument, and per <a href="#form-patches">§ 4.1 Form submission patches</a> we have introduced an <var>entryList</var> argument. 
    <ol>
     <li data-md>
      <p>If none of the following are true:</p>
      <ul>
       <li data-md>
        <p><var>historyHandling</var> is "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update" id="ref-for-hh-entry-update"><code>entry update</code></a>"</p>
       <li data-md>
        <p><var>userInvolvement</var> is "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui④">browser UI</a></code>"</p>
       <li data-md>
        <p><var>browsingContext</var>’s <a data-link-type="dfn">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain" id="ref-for-same-origin-domain">same origin-domain</a> with the <a data-link-type="dfn">source browsing context</a>'s <a data-link-type="dfn">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin①">origin</a></p>
       <li data-md>
        <p><var>browsingContext</var>’s only entry in its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history①">session history</a> is the <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code> that was added when <var>browsingContext</var> was <a data-link-type="dfn">created</a></p>
      </ul>
      <p>then:</p>
      <ol>
       <li data-md>
        <p>Let <var>appHistory</var> be <var>browsingContext</var>’s <a data-link-type="dfn">active window</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history③">app history</a>.</p>
       <li data-md>
        <p>Let <var>navigationType</var> be "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push⑦">push</a></code>" if <var>historyHandling</var> is "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default" id="ref-for-hh-default①"><code>default</code></a>"; otherwise, "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace⑥">replace</a></code>".</p>
       <li data-md>
        <p>Let <var>continue</var> be the result of <a data-link-type="dfn" href="#fire-a-navigate-event" id="ref-for-fire-a-navigate-event③">firing a navigate event</a> at <var>appHistory</var> with <i><a data-link-type="dfn" href="#fire-a-navigate-event-navigationtype" id="ref-for-fire-a-navigate-event-navigationtype②">navigationType</a></i> set to <var>navigationType</var>, <i><a data-link-type="dfn" href="#fire-a-navigate-event-issamedocument" id="ref-for-fire-a-navigate-event-issamedocument②">isSameDocument</a></i> set to false, <i><a data-link-type="dfn" href="#fire-a-navigate-event-userinvolvement" id="ref-for-fire-a-navigate-event-userinvolvement①">userInvolvement</a></i> set to <var>userInvolvement</var>, <i><a data-link-type="dfn" href="#fire-a-navigate-event-formdataentrylist" id="ref-for-fire-a-navigate-event-formdataentrylist">formDataEntryList</a></i> set to <var>entryList</var>, and <i><a data-link-type="dfn" href="#fire-a-navigate-event-destinationurl" id="ref-for-fire-a-navigate-event-destinationurl②">destinationURL</a></i> set to <var>url</var>.</p>
       <li data-md>
        <p>If <var>continue</var> is false, return.</p>
      </ol>
      <p class="note" role="note">"<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update" id="ref-for-hh-entry-update①"><code>entry update</code></a>" is excluded since <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate⑤">navigate</a></code> would have fired earlier as part of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history-by-a-delta" id="ref-for-traverse-the-history-by-a-delta②">traversing the history by a delta</a>. </p>
      <p class="note" role="note">"<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui⑤">browser UI</a></code>" or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain" id="ref-for-same-origin-domain①">cross origin-domain</a> navigations that cause <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid③">fragment navigations</a> <em>do</em> fire the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate⑥">navigate</a></code> event; those are handled as part of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid④">navigate to a fragment</a> algorithm called earlier in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate①⓪">navigate</a>, which is not guarded by this condition. </p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="traverse the history by a delta">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history-by-a-delta" id="ref-for-traverse-the-history-by-a-delta③">traverse the history by a delta</a> algorithm by inserting the following steps inside the queued task, before the call to <a data-link-type="dfn">traverse the history</a>. Recall that per <a href="#user-initiated-patches">§ 4.2 Browser UI/user-initiated patches</a> we have introduced a <var>userInvolvement</var> argument. 
    <ol>
     <li data-md>
      <p>Let <var>appHistory</var> be <var>specified browsing context</var>’s <a data-link-type="dfn">active window</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history④">app history</a>.</p>
     <li data-md>
      <p>Let <var>isSameDocument</var> be true if <var>specified browsing context</var>’s <a data-link-type="dfn">active document</a> equals <var>specified entry</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document②">document</a>; otherwise, false.</p>
     <li data-md>
      <p>If either <var>isSameDocument</var> is true or <var>userInvolvement</var> is not "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui⑥">browser UI</a></code>", then:</p>
      <ol>
       <li data-md>
        <p>Let <var>continue</var> be the result of <a data-link-type="dfn" href="#fire-a-navigate-event" id="ref-for-fire-a-navigate-event④">firing a navigate event</a> at <var>appHistory</var> with <i><a data-link-type="dfn" href="#fire-a-navigate-event-navigationtype" id="ref-for-fire-a-navigate-event-navigationtype③">navigationType</a></i> set to "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse④">traverse</a></code>", <i><a data-link-type="dfn" href="#fire-a-navigate-event-issamedocument" id="ref-for-fire-a-navigate-event-issamedocument③">isSameDocument</a></i> set to <var>isSameDocument</var>, <i><a data-link-type="dfn" href="#fire-a-navigate-event-userinvolvement" id="ref-for-fire-a-navigate-event-userinvolvement②">userInvolvement</a></i> set to <var>userInvolvement</var>, and <i><a data-link-type="dfn" href="#fire-a-navigate-event-destinationentry" id="ref-for-fire-a-navigate-event-destinationentry">destinationEntry</a></i> set to <var>specified entry</var>.</p>
       <li data-md>
        <p>If <var>continue</var> is false, abort these steps.</p>
      </ol>
    </ol>
   </div>
   <h2 class="heading settled" data-level="5" id="session-history-patches"><span class="secno">5. </span><span class="content">Patches to session history</span><a class="self-link" href="#session-history-patches"></a></h2>
   <p>This section details monkeypatches to <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> to track appropriate data for associating an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑧">AppHistory</a></code> with a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry③">session history entry</a>.</p>
   <h3 class="heading settled" data-level="5.1" id="session-history-new-she-fields"><span class="secno">5.1. </span><span class="content">New <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry④">session history entry</a> items</span><a class="self-link" href="#session-history-new-she-fields"></a></h3>
   <p>Each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry⑤">session history entry</a> gains the following new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="session history entry" data-dfn-type="dfn" data-noexport id="session-history-entry-origin">origin</dfn>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin">origin</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="session history entry" data-dfn-type="dfn" data-noexport id="session-history-entry-app-history-key">app history key</dfn>, a string, initially set to the result of <a data-link-type="dfn" href="https://wicg.github.io/uuid/#dfn-generate-a-random-uuid" id="ref-for-dfn-generate-a-random-uuid">generating a random UUID</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="session history entry" data-dfn-type="dfn" data-noexport id="session-history-entry-app-history-id">app history id</dfn>, a string, initially set to the result of <a data-link-type="dfn" href="https://wicg.github.io/uuid/#dfn-generate-a-random-uuid" id="ref-for-dfn-generate-a-random-uuid①">generating a random UUID</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="session history entry" data-dfn-type="dfn" data-noexport id="session-history-entry-app-history-state">app history state</dfn>, which is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state②">serialized state</a> or null, initially null</p>
   </ul>
   <h3 class="heading settled" data-level="5.2" id="session-history-patches-key"><span class="secno">5.2. </span><span class="content">Carrying over the app history key</span><a class="self-link" href="#session-history-patches-key"></a></h3>
   <div class="algorithm" data-algorithm="update the session history with the new page key patch">
     Update the <a data-link-type="dfn">update the session history with the new page</a> algorithm’s "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace" id="ref-for-hh-replace"><code>replace</code></a>" case by adding the following step after the construction of <var>newEntry</var>: 
    <ol>
     <li data-md>
      <p>If <var>newEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin④">origin</a> is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin⑤">same</a> as <var>sessionHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry①">current entry</a>'s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑤">origin</a>, then set <var>newEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key①">app history key</a> to <var>sessionHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry②">current entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key②">app history key</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="5.3" id="session-history-patches-origin"><span class="secno">5.3. </span><span class="content">Tracking the <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑥">origin</a> member</span><a class="self-link" href="#session-history-patches-origin"></a></h3>
   <p>Update the <a data-link-type="dfn">update the session history with the new page</a> algorithm’s "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace" id="ref-for-hh-replace①"><code>replace</code></a>" and "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default" id="ref-for-hh-default②"><code>default</code></a>" cases to set <var>newEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑦">origin</a> to <var>newDocument</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin②">origin</a> as part of its creation.</p>
   <p>Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid⑤">navigate to a fragment</a> algorithm to set the new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry⑥">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑧">origin</a> to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry③">current entry</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document③">document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin③">origin</a>.</p>
   <p>Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps③">URL and history update steps</a> algorithm to set the new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry⑦">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑨">origin</a> to <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin④">origin</a>.</p>
   <p>Potentially update the <a data-link-type="dfn">traverse the history</a> algorithm to consult the new <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin①⓪">origin</a> field, instead of checking the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document④">document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin⑤">origin</a>, since the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document⑤">document</a> can disappear?? Needs further investigation.</p>
   <h3 class="heading settled" data-level="5.4" id="session-history-patches-update"><span class="secno">5.4. </span><span class="content">Updating the <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑨">AppHistory</a></code> object</span><a class="self-link" href="#session-history-patches-update"></a></h3>
   <div class="algorithm" data-algorithm="traverse the history update patch">
     Update the <a data-link-type="dfn">traverse the history</a> algorithm by adding the following step before the final step which fires various events: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#apphistory-update-the-entries" id="ref-for-apphistory-update-the-entries①">Update the entries</a> of <var>newDocument</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②⓪">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history⑤">app history</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="URL and history update steps update patch">
     Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps④">URL and history update steps</a> by appending the following final step: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#apphistory-update-the-entries" id="ref-for-apphistory-update-the-entries②">Update the entries</a> of <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②①">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history⑥">app history</a>.</p>
    </ol>
   </div>
   <p class="note" role="note">We do not <a data-link-type="dfn" href="#apphistory-update-the-entries" id="ref-for-apphistory-update-the-entries③">update the entries</a> when initially <a data-link-type="dfn">creating a new browsing context</a>, as we intentionally don’t want to include the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code> in any app history entry list. </p>
  </main>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#user-navigation-involvement-activation">activation</a><span>, in § 4.2</span>
   <li><a href="#window-app-history">app history</a><span>, in § 1</span>
   <li><a href="#apphistory">AppHistory</a><span>, in § 1</span>
   <li><a href="#dom-window-apphistory">appHistory</a><span>, in § 1</span>
   <li><a href="#apphistoryentry">AppHistoryEntry</a><span>, in § 3</span>
   <li><a href="#session-history-entry-app-history-id">app history id</a><span>, in § 5.1</span>
   <li><a href="#session-history-entry-app-history-key">app history key</a><span>, in § 5.1</span>
   <li><a href="#apphistorynavigateevent">AppHistoryNavigateEvent</a><span>, in § 2</span>
   <li><a href="#dictdef-apphistorynavigateeventinit">AppHistoryNavigateEventInit</a><span>, in § 2</span>
   <li><a href="#dom-apphistorynavigateevent-apphistorynavigateevent">AppHistoryNavigateEvent(type)</a><span>, in § 2</span>
   <li><a href="#dom-apphistorynavigateevent-apphistorynavigateevent">AppHistoryNavigateEvent(type, eventInit)</a><span>, in § 2</span>
   <li><a href="#enumdef-apphistorynavigationtype">AppHistoryNavigationType</a><span>, in § 2</span>
   <li><a href="#session-history-entry-app-history-state">app history state</a><span>, in § 5.1</span>
   <li><a href="#user-navigation-involvement-browser-ui">browser UI</a><span>, in § 4.2</span>
   <li><a href="#dom-apphistory-cangoback">canGoBack</a><span>, in § 1</span>
   <li><a href="#dom-apphistory-cangoforward">canGoForward</a><span>, in § 1</span>
   <li>
    canRespond
    <ul>
     <li><a href="#dom-apphistorynavigateevent-canrespond">attribute for AppHistoryNavigateEvent</a><span>, in § 2</span>
     <li><a href="#dom-apphistorynavigateeventinit-canrespond">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2</span>
    </ul>
   <li><a href="#apphistorynavigateevent-classic-history-api-serialized-data">classic history API serialized data</a><span>, in § 2</span>
   <li><a href="#fire-a-navigate-event-classichistoryapiserializeddata">classicHistoryAPISerializedData</a><span>, in § 2</span>
   <li><a href="#dom-apphistorynavigateevent-apphistorynavigateevent">constructor(type)</a><span>, in § 2</span>
   <li><a href="#dom-apphistorynavigateevent-apphistorynavigateevent">constructor(type, eventInit)</a><span>, in § 2</span>
   <li><a href="#dom-apphistory-current">current</a><span>, in § 1</span>
   <li><a href="#apphistory-current-index">current index</a><span>, in § 1</span>
   <li><a href="#apphistorynavigateevent-destination-entry">destination entry</a><span>, in § 2</span>
   <li><a href="#fire-a-navigate-event-destinationentry">destinationEntry</a><span>, in § 2</span>
   <li><a href="#apphistorynavigateevent-destination-url">destination URL</a><span>, in § 2</span>
   <li><a href="#fire-a-navigate-event-destinationurl">destinationURL</a><span>, in § 2</span>
   <li><a href="#dom-apphistory-entries">entries()</a><span>, in § 1</span>
   <li><a href="#apphistory-entry-list">entry list</a><span>, in § 1</span>
   <li><a href="#navigate-entrylist">entryList</a><span>, in § 4.1</span>
   <li><a href="#fire-a-navigate-event">fire a navigate event</a><span>, in § 2</span>
   <li>
    formData
    <ul>
     <li><a href="#dom-apphistorynavigateevent-formdata">attribute for AppHistoryNavigateEvent</a><span>, in § 2</span>
     <li><a href="#dom-apphistorynavigateeventinit-formdata">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2</span>
    </ul>
   <li><a href="#fire-a-navigate-event-formdataentrylist">formDataEntryList</a><span>, in § 2</span>
   <li><a href="#dom-apphistoryentry-getstate">getState()</a><span>, in § 3</span>
   <li>
    hashChange
    <ul>
     <li><a href="#dom-apphistorynavigateevent-hashchange">attribute for AppHistoryNavigateEvent</a><span>, in § 2</span>
     <li><a href="#dom-apphistorynavigateeventinit-hashchange">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2</span>
    </ul>
   <li><a href="#dom-apphistoryentry-id">id</a><span>, in § 3</span>
   <li>
    index
    <ul>
     <li><a href="#dom-apphistoryentry-index">attribute for AppHistoryEntry</a><span>, in § 3</span>
     <li><a href="#apphistoryentry-index">dfn for AppHistoryEntry</a><span>, in § 3</span>
    </ul>
   <li>
    info
    <ul>
     <li><a href="#dom-apphistorynavigateevent-info">attribute for AppHistoryNavigateEvent</a><span>, in § 2</span>
     <li><a href="#dom-apphistorynavigateeventinit-info">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2</span>
    </ul>
   <li><a href="#fire-a-navigate-event-issamedocument">isSameDocument</a><span>, in § 2</span>
   <li><a href="#dom-apphistoryentry-key">key</a><span>, in § 3</span>
   <li><a href="#eventdef-apphistory-navigate">navigate</a><span>, in § 1</span>
   <li><a href="#eventdef-apphistory-navigateerror">navigateerror</a><span>, in § 1</span>
   <li><a href="#eventdef-apphistory-navigatesuccess">navigatesuccess</a><span>, in § 1</span>
   <li><a href="#apphistorynavigateevent-navigation-action-promise">navigation action promise</a><span>, in § 2</span>
   <li>
    navigationType
    <ul>
     <li><a href="#dom-apphistorynavigateevent-navigationtype">attribute for AppHistoryNavigateEvent</a><span>, in § 2</span>
     <li><a href="#fire-a-navigate-event-navigationtype">dfn for fire a navigate event</a><span>, in § 2</span>
     <li><a href="#dom-apphistorynavigateeventinit-navigationtype">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2</span>
    </ul>
   <li><a href="#user-navigation-involvement-none">none</a><span>, in § 4.2</span>
   <li><a href="#dom-apphistory-onnavigate">onnavigate</a><span>, in § 1</span>
   <li><a href="#dom-apphistory-onnavigateerror">onnavigateerror</a><span>, in § 1</span>
   <li><a href="#dom-apphistory-onnavigatesuccess">onnavigatesuccess</a><span>, in § 1</span>
   <li><a href="#session-history-entry-origin">origin</a><span>, in § 5.1</span>
   <li><a href="#dom-apphistorynavigationtype-push">"push"</a><span>, in § 2</span>
   <li><a href="#dom-apphistorynavigationtype-replace">"replace"</a><span>, in § 2</span>
   <li><a href="#dom-apphistorynavigateevent-respondwith">respondWith(newNavigationAction)</a><span>, in § 2</span>
   <li><a href="#rewritable">rewritable</a><span>, in § 2</span>
   <li><a href="#dom-apphistoryentry-samedocument">sameDocument</a><span>, in § 3</span>
   <li><a href="#apphistoryentry-session-history-entry">session history entry</a><span>, in § 3</span>
   <li><a href="#dom-apphistorynavigationtype-traverse">"traverse"</a><span>, in § 2</span>
   <li><a href="#apphistory-update-the-entries">update the entries</a><span>, in § 1</span>
   <li><a href="#dom-apphistoryentry-url">url</a><span>, in § 3</span>
   <li>
    userInitiated
    <ul>
     <li><a href="#dom-apphistorynavigateevent-userinitiated">attribute for AppHistoryNavigateEvent</a><span>, in § 2</span>
     <li><a href="#dom-apphistorynavigateeventinit-userinitiated">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2</span>
    </ul>
   <li>
    userInvolvement
    <ul>
     <li><a href="#fire-a-navigate-event-userinvolvement">dfn for fire a navigate event</a><span>, in § 2</span>
     <li><a href="#navigate-userinvolvement">dfn for navigate</a><span>, in § 4.2</span>
     <li><a href="#traverse-the-history-by-a-delta-userinvolvement">dfn for traverse the history by a delta</a><span>, in § 4.2</span>
    </ul>
   <li>
    user navigation involvement
    <ul>
     <li><a href="#user-navigation-involvement">definition of</a><span>, in § 4.2</span>
     <li><a href="#event-user-navigation-involvement">dfn for Event</a><span>, in § 4.2</span>
    </ul>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="129bdae8">Event</span>
     <li><span class="dfn-paneled" id="44a7708c">EventInit</span>
     <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
     <li><span class="dfn-paneled" id="bec14ad5">activation behavior</span>
     <li><span class="dfn-paneled" id="8c407366">cancelable</span>
     <li><span class="dfn-paneled" id="2e9f6464">canceled flag</span>
     <li><span class="dfn-paneled" id="8abfc3b6">creating an event</span>
     <li><span class="dfn-paneled" id="1372f92a">dispatch</span>
     <li><span class="dfn-paneled" id="092f2e0b">dispatch flag</span>
     <li><span class="dfn-paneled" id="5fd23811">fire an event</span>
     <li><span class="dfn-paneled" id="838900a7">isTrusted</span>
     <li><span class="dfn-paneled" id="c62cd7cf">origin</span>
     <li><span class="dfn-paneled" id="9d09d04c">type</span>
     <li><span class="dfn-paneled" id="347e8fe9">url</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH-METADATA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="cc84e68c">sec-fetch-site</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ccfe986b">ErrorEvent</span>
     <li><span class="dfn-paneled" id="f0951476">EventHandler</span>
     <li><span class="dfn-paneled" id="0800bdf4">StructuredDeserialize</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="68bf3d31">a</span>
     <li><span class="dfn-paneled" id="a1a807e5">area</span>
     <li><span class="dfn-paneled" id="3349d69f">associated document</span>
     <li><span class="dfn-paneled" id="0d0390b4">browsing context</span>
     <li><span class="dfn-paneled" id="3b2ff63e">browsing context <small>(for Document)</small></span>
     <li><span class="dfn-paneled" id="6d88ab2e">browsing context <small>(for Window)</small></span>
     <li><span class="dfn-paneled" id="bfff6250">button</span>
     <li><span class="dfn-paneled" id="527c3ddf">colno</span>
     <li><span class="dfn-paneled" id="a7510263">current entry</span>
     <li><span class="dfn-paneled" id="a8ea6c66">default</span>
     <li><span class="dfn-paneled" id="04e0443f">document <small>(for Window)</small></span>
     <li><span class="dfn-paneled" id="f3d97e87">document <small>(for session history entry)</small></span>
     <li><span class="dfn-paneled" id="56c301bd">entry update</span>
     <li><span class="dfn-paneled" id="8adf2dfc">error</span>
     <li><span class="dfn-paneled" id="6a5a59a0">event handler</span>
     <li><span class="dfn-paneled" id="9d386f55">event handler event type</span>
     <li><span class="dfn-paneled" id="03675365">event handler idl attribute</span>
     <li><span class="dfn-paneled" id="0b8e0aa2">filename</span>
     <li><span class="dfn-paneled" id="f0246dc8">follow the hyperlink</span>
     <li><span class="dfn-paneled" id="946a9318">form</span>
     <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
     <li><span class="dfn-paneled" id="37b5f0f9">historyhandling</span>
     <li><span class="dfn-paneled" id="87fcd40c">iframe</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="d7d642a2">input</span>
     <li><span class="dfn-paneled" id="f38635aa">input activation behavior</span>
     <li><span class="dfn-paneled" id="880b9800">ispush</span>
     <li><span class="dfn-paneled" id="c4b77f43">lineno</span>
     <li><span class="dfn-paneled" id="4324934f">message</span>
     <li><span class="dfn-paneled" id="2594e562">navigate</span>
     <li><span class="dfn-paneled" id="fffd9ca9">navigate to a fragment</span>
     <li><span class="dfn-paneled" id="1fe39cd2">navigationtype</span>
     <li><span class="dfn-paneled" id="f7dfec9a">open(unused1, unused2)</span>
     <li><span class="dfn-paneled" id="086e3aff">origin</span>
     <li><span class="dfn-paneled" id="51563fba">plan to navigate</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="5991ccfb">relevant realm</span>
     <li><span class="dfn-paneled" id="c75feb22">replace</span>
     <li><span class="dfn-paneled" id="385fc270">report an exception</span>
     <li><span class="dfn-paneled" id="7393da89">same origin</span>
     <li><span class="dfn-paneled" id="521818b9">same origin-domain</span>
     <li><span class="dfn-paneled" id="078e5c59">serialized state</span>
     <li><span class="dfn-paneled" id="316ad5bf">serializeddata</span>
     <li><span class="dfn-paneled" id="48093925">session history</span>
     <li><span class="dfn-paneled" id="90c6a866">session history entry</span>
     <li><span class="dfn-paneled" id="bda66ea0">shared history push/replace state steps</span>
     <li><span class="dfn-paneled" id="d9fec0a7">state</span>
     <li><span class="dfn-paneled" id="c26b4f17">submit as entity body</span>
     <li><span class="dfn-paneled" id="967921f0">submit button</span>
     <li><span class="dfn-paneled" id="6f89ecfa">submitted</span>
     <li><span class="dfn-paneled" id="deb71015">traverse the history by a delta</span>
     <li><span class="dfn-paneled" id="0cacde69">url</span>
     <li><span class="dfn-paneled" id="220e841a">url and history update steps</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append</span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="7b0d918d">break</span>
     <li><span class="dfn-paneled" id="ae8def21">contain</span>
     <li><span class="dfn-paneled" id="16d07e10">for each</span>
     <li><span class="dfn-paneled" id="7a87d819">is</span>
     <li><span class="dfn-paneled" id="6b815fdd">is empty</span>
     <li><span class="dfn-paneled" id="c88f3887">item</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="e2fc6023">prepend</span>
     <li><span class="dfn-paneled" id="0204d188">size</span>
     <li><span class="dfn-paneled" id="6d19ac93">user agent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="6fbdf145">equal</span>
     <li><span class="dfn-paneled" id="aa8d681c">exclude fragments</span>
     <li><span class="dfn-paneled" id="ed948033">fragment</span>
     <li><span class="dfn-paneled" id="959ad97b">origin</span>
     <li><span class="dfn-paneled" id="c0868016">path</span>
     <li><span class="dfn-paneled" id="3ab2ec8b">query</span>
     <li><span class="dfn-paneled" id="dcffbccd">url</span>
     <li><span class="dfn-paneled" id="5442ea33">url serializer</span>
    </ul>
   <li>
    <a data-link-type="biblio">[UUID]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d4b32370">generate a random uuid</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2f8afbfe">ArrayBuffer</span>
     <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="797018a7">InvalidStateError</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="c3e881ef">SecurityError</span>
     <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
     <li><span class="dfn-paneled" id="8f5c2179">a promise resolved with</span>
     <li><span class="dfn-paneled" id="6c6b1005">any</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="9aeb0a82">long long</span>
     <li><span class="dfn-paneled" id="56f81a8e">new</span>
     <li><span class="dfn-paneled" id="750a2f08">react</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
    </ul>
   <li>
    <a data-link-type="biblio">[XHR]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="61cd38cd">FormData</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
   <dt id="biblio-xhr">[XHR]
   <dd>Anne van Kesteren. <a href="https://xhr.spec.whatwg.org/"><cite>XMLHttpRequest Standard</cite></a>. Living Standard. URL: <a href="https://xhr.spec.whatwg.org/">https://xhr.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-csp">[CSP]
   <dd>Mike West; Antonio Sartori. <a href="https://w3c.github.io/webappsec-csp/"><cite>Content Security Policy Level 3</cite></a>. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
   <dt id="biblio-fetch-metadata">[FETCH-METADATA]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-fetch-metadata/"><cite>Fetch Metadata Request Headers</cite></a>. URL: <a href="https://w3c.github.io/webappsec-fetch-metadata/">https://w3c.github.io/webappsec-fetch-metadata/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><c- g>Window</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistory"><c- n>AppHistory</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistory" href="#dom-window-apphistory"><c- g>appHistory</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#apphistory"><code><c- g>AppHistory</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistoryentry"><c- n>AppHistoryEntry</c-></a>? <a class="idl-code" data-link-type="attribute" data-type="AppHistoryEntry?" href="#dom-apphistory-current"><c- g>current</c-></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#apphistoryentry"><c- n>AppHistoryEntry</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-entries"><c- g>entries</c-></a>();

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistory-cangoback"><c- g>canGoBack</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistory-cangoforward"><c- g>canGoForward</c-></a>;

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigate"><c- g>onnavigate</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigatesuccess"><c- g>onnavigatesuccess</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigateerror"><c- g>onnavigateerror</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#apphistorynavigateevent"><code><c- g>AppHistoryNavigateEvent</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event"><c- n>Event</c-></a> {
  <a href="#dom-apphistorynavigateevent-apphistorynavigateevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-type"><code><c- g>type</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigateeventinit"><c- n>AppHistoryNavigateEventInit</c-></a> <a href="#dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-eventinit"><code><c- g>eventInit</c-></code></a> = {});

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-apphistorynavigationtype"><c- n>AppHistoryNavigationType</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistoryNavigationType" href="#dom-apphistorynavigateevent-navigationtype"><c- g>navigationType</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-canrespond"><c- g>canRespond</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-userinitiated"><c- g>userInitiated</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-hashchange"><c- g>hashChange</c-></a>;
//  readonly attribute AppHistoryEntry destination;
//  readonly attribute AbortSignal signal;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#formdata"><c- n>FormData</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="FormData?" href="#dom-apphistorynavigateevent-formdata"><c- g>formData</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="any" href="#dom-apphistorynavigateevent-info"><c- g>info</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistorynavigateevent-respondwith"><c- g>respondWith</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a href="#dom-apphistorynavigateevent-respondwith-newnavigationaction-newnavigationaction"><code><c- g>newNavigationAction</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-apphistorynavigateeventinit"><code><c- g>AppHistoryNavigateEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><c- n>EventInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-apphistorynavigationtype"><c- n>AppHistoryNavigationType</c-></a> <a data-default="&quot;push&quot;" data-type="AppHistoryNavigationType " href="#dom-apphistorynavigateeventinit-navigationtype"><code><c- g>navigationType</c-></code></a> = "push";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-apphistorynavigateeventinit-canrespond"><code><c- g>canRespond</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-apphistorynavigateeventinit-userinitiated"><code><c- g>userInitiated</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-apphistorynavigateeventinit-hashchange"><code><c- g>hashChange</c-></code></a> = <c- b>false</c->;
//  required AppHistoryEntry destination;
//  required AbortSignal signal;
  <a data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#formdata"><c- n>FormData</c-></a>? <a data-default="null" data-type="FormData? " href="#dom-apphistorynavigateeventinit-formdata"><code><c- g>formData</c-></code></a> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a data-default="null" data-type="any " href="#dom-apphistorynavigateeventinit-info"><code><c- g>info</c-></code></a> = <c- b>null</c->;
};

<c- b>enum</c-> <a href="#enumdef-apphistorynavigationtype"><code><c- g>AppHistoryNavigationType</c-></code></a> {
  <a href="#dom-apphistorynavigationtype-push"><code><c- s>"push"</c-></code></a>,
  <a href="#dom-apphistorynavigationtype-replace"><code><c- s>"replace"</c-></code></a>,
  <a href="#dom-apphistorynavigationtype-traverse"><code><c- s>"traverse"</c-></code></a>
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#apphistoryentry"><code><c- g>AppHistoryEntry</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-apphistoryentry-key"><c- g>key</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-apphistoryentry-id"><c- g>id</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-apphistoryentry-url"><c- g>url</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long-long"><c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="long long" href="#dom-apphistoryentry-index"><c- g>index</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistoryentry-samedocument"><c- g>sameDocument</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistoryentry-getstate"><c- g>getState</c-></a>();

  // TODO event handlers
};

</pre>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    // Functions, divided by link type, that wrap an autolink's
    // contents with the appropriate outer syntax.
    // Alternately, a string naming another type they format
    // the same as.
    const typeFormatters = {
        'dfn': (text) => `[=${text}=]`,
        'abstract-op': (text) => `[\$${text}\$]`,
        'value': (text) => `''${text}''`,
        'http-header': (text) => `[:${text}:]`,
        'idl': (text) => `{{${text}}}`,
        'interface': 'idl',
        'constructor': 'idl',
        'method': 'idl',
        'argument': 'idl',
        'attribute': 'idl',
        'callback': 'idl',
        'dictionary': 'idl',
        'dict-member': 'idl',
        'enum': 'idl',
        'enum-value': 'idl',
        'exception': 'idl',
        'const': 'idl',
        'typedef': 'idl',
        'stringifier': 'idl',
        'serializer': 'idl',
        'iterator': 'idl',
        'maplike': 'idl',
        'setlike': 'idl',
        'extended-attribute': 'idl',
        'event': 'idl',
        'element': (element) => `<{${element}}>`,
        'element-state': 'element',
        'element-attr': 'element',
        'attr-value': 'element',
        'scheme': 'dfn',
        'permission': 'dfn',
        'grammar': (text) => `${text} (within a <pre class=prod>)`,
        'type': (text)=> `<<${text}>>`,
        'property': (text) => `'${text}'`,
        'descriptor': 'property',
        'function': 'value',
        'at-rule': 'value',
        'selector': 'value',
    };
    const typesUsingFor = new Set(
        [
            "descriptor",
            "value",
            "element-attr",
            "attr-value",
            "element-state",
            "method",
            "constructor",
            "argument",
            "attribute",
            "const",
            "dict-member",
            "event",
            "enum-value",
            "stringifier",
            "serializer",
            "iterator",
            "maplike",
            "setlike",
            "state",
            "mode",
            "context",
            "facet",
        ],
    )
    const typesNotUsingFor = new Set(
        [
            "property",
            "element",
            "interface",
            "namespace",
            "callback",
            "dictionary",
            "enum",
            "exception",
            "typedef",
            "http-header",
            "permission",
        ],
    )
    function linkFormatterFromType(type) {
        const fnOrType = typeFormatters[type];
        if(typeof fnOrType === 'string') {
            // follow the alias
            return linkFormatterFromType(fnOrType);
        }
        return fnOrType;
    };

    function genLinkingSyntaxes(dfn) {
        if(dfn.tagName != "DFN") return;

        const type = dfn.getAttribute('data-dfn-type');
        if(!type) {
            console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
            return [];
        }

        // Return a function that wraps link text based on the type
        const linkFormatter = linkFormatterFromType(type);
        if(!linkFormatter) {
            console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
            return [];
        }

        let ltAlts;
        if(dfn.hasAttribute('data-lt')) {
            ltAlts = dfn.getAttribute('data-lt')
                .split("|")
                .map(x=>x.trim());
        } else {
            ltAlts = [dfn.textContent.trim()];
        }
        if(type == "type") {
            // lt of "<foo>", but "foo" is the interior;
            // <<foo/bar>> is how you write it with a for,
            // not <foo/<bar>> or whatever.
            for(var i = 0; i < ltAlts.length; i++) {
                const lt = ltAlts[i];
                const match = /<(.*)>/.exec(lt);
                if(match) { ltAlts[i] = match[1]; }
            }
        }

        let forAlts;
        if(dfn.hasAttribute('data-dfn-for')) {
            forAlts = dfn.getAttribute('data-dfn-for')
                .split(",")
                .map(x=>x.trim());
        } else {
            forAlts = [''];
        }

        let linkingSyntaxes = [];
        if(!typesUsingFor.has(type)) {
            for(const lt of ltAlts) {
                linkingSyntaxes.push(linkFormatter(lt));
            }
        }
        if(!typesNotUsingFor.has(type)) {
            for(const f of forAlts) {
                linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
            }
        }
        return [
            mk.b({}, 'Possible linking syntaxes:'),
            mk.ul({},
                ...linkingSyntaxes.map(link => {
                    const copyLink = async () =>
                        await navigator.clipboard.writeText(link);
                    return mk.li({},
                        mk.div({ class: 'link-item' },
                            mk.button({
                                class: 'copy-icon', title: 'Copy',
                                type: 'button',
                                _onclick: copyLink,
                                tabindex: 0,
                            }, mk.span({ class: 'icon' }) ),
                            mk.span({}, link)
                        )
                    );
                })
            )
        ];
    }

    function genDfnPanel({ dfn, dfnID, url, dfnText, refSections, external }) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
            genLinkingSyntaxes(dfn),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel({ ...panelData, dfn });
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    // Functions, divided by link type, that wrap an autolink's
    // contents with the appropriate outer syntax.
    // Alternately, a string naming another type they format
    // the same as.
    const typeFormatters = {
        'dfn': (text) => `[=${text}=]`,
        'abstract-op': (text) => `[\$${text}\$]`,
        'value': (text) => `''${text}''`,
        'http-header': (text) => `[:${text}:]`,
        'idl': (text) => `{{${text}}}`,
        'interface': 'idl',
        'constructor': 'idl',
        'method': 'idl',
        'argument': 'idl',
        'attribute': 'idl',
        'callback': 'idl',
        'dictionary': 'idl',
        'dict-member': 'idl',
        'enum': 'idl',
        'enum-value': 'idl',
        'exception': 'idl',
        'const': 'idl',
        'typedef': 'idl',
        'stringifier': 'idl',
        'serializer': 'idl',
        'iterator': 'idl',
        'maplike': 'idl',
        'setlike': 'idl',
        'extended-attribute': 'idl',
        'event': 'idl',
        'element': (element) => `<{${element}}>`,
        'element-state': 'element',
        'element-attr': 'element',
        'attr-value': 'element',
        'scheme': 'dfn',
        'permission': 'dfn',
        'grammar': (text) => `${text} (within a <pre class=prod>)`,
        'type': (text)=> `<<${text}>>`,
        'property': (text) => `'${text}'`,
        'descriptor': 'property',
        'function': 'value',
        'at-rule': 'value',
        'selector': 'value',
    };
    const typesUsingFor = new Set(
        [
            "descriptor",
            "value",
            "element-attr",
            "attr-value",
            "element-state",
            "method",
            "constructor",
            "argument",
            "attribute",
            "const",
            "dict-member",
            "event",
            "enum-value",
            "stringifier",
            "serializer",
            "iterator",
            "maplike",
            "setlike",
            "state",
            "mode",
            "context",
            "facet",
        ],
    )
    const typesNotUsingFor = new Set(
        [
            "property",
            "element",
            "interface",
            "namespace",
            "callback",
            "dictionary",
            "enum",
            "exception",
            "typedef",
            "http-header",
            "permission",
        ],
    )
    function linkFormatterFromType(type) {
        const fnOrType = typeFormatters[type];
        if(typeof fnOrType === 'string') {
            // follow the alias
            return linkFormatterFromType(fnOrType);
        }
        return fnOrType;
    };

    function genLinkingSyntaxes(dfn) {
        if(dfn.tagName != "DFN") return;

        const type = dfn.getAttribute('data-dfn-type');
        if(!type) {
            console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
            return [];
        }

        // Return a function that wraps link text based on the type
        const linkFormatter = linkFormatterFromType(type);
        if(!linkFormatter) {
            console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
            return [];
        }

        let ltAlts;
        if(dfn.hasAttribute('data-lt')) {
            ltAlts = dfn.getAttribute('data-lt')
                .split("|")
                .map(x=>x.trim());
        } else {
            ltAlts = [dfn.textContent.trim()];
        }
        if(type == "type") {
            // lt of "<foo>", but "foo" is the interior;
            // <<foo/bar>> is how you write it with a for,
            // not <foo/<bar>> or whatever.
            for(var i = 0; i < ltAlts.length; i++) {
                const lt = ltAlts[i];
                const match = /<(.*)>/.exec(lt);
                if(match) { ltAlts[i] = match[1]; }
            }
        }

        let forAlts;
        if(dfn.hasAttribute('data-dfn-for')) {
            forAlts = dfn.getAttribute('data-dfn-for')
                .split(",")
                .map(x=>x.trim());
        } else {
            forAlts = [''];
        }

        let linkingSyntaxes = [];
        if(!typesUsingFor.has(type)) {
            for(const lt of ltAlts) {
                linkingSyntaxes.push(linkFormatter(lt));
            }
        }
        if(!typesNotUsingFor.has(type)) {
            for(const f of forAlts) {
                linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
            }
        }
        return [
            mk.b({}, 'Possible linking syntaxes:'),
            mk.ul({},
                ...linkingSyntaxes.map(link => {
                    const copyLink = async () =>
                        await navigator.clipboard.writeText(link);
                    return mk.li({},
                        mk.div({ class: 'link-item' },
                            mk.button({
                                class: 'copy-icon', title: 'Copy',
                                type: 'button',
                                _onclick: copyLink,
                                tabindex: 0,
                            }, mk.span({ class: 'icon' }) ),
                            mk.span({}, link)
                        )
                    );
                })
            )
        ];
    }

    function genDfnPanel({ dfn, dfnID, url, dfnText, refSections, external }) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
            genLinkingSyntaxes(dfn),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel({ ...panelData, dfn });
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* Boilerplate: script-dfn-panel-json */
window.dfnpanelData = {};
window.dfnpanelData['85394472'] = {"dfnID": "85394472", "url": "https://dom.spec.whatwg.org/#document", "dfnText": "Document", "refSections": [{"refs": [{"id": "ref-for-document"}, {"id": "ref-for-document\u2460"}, {"id": "ref-for-document\u2461"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-document\u2462"}, {"id": "ref-for-document\u2463"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-document\u2464"}], "title": "3. App history entries"}, {"refs": [{"id": "ref-for-document\u2465"}], "title": "4.3. Navigation algorithm updates"}, {"refs": [{"id": "ref-for-document\u2466"}], "title": "5.4. Updating the AppHistory object"}], "external": true};
window.dfnpanelData['129bdae8'] = {"dfnID": "129bdae8", "url": "https://dom.spec.whatwg.org/#event", "dfnText": "Event", "refSections": [{"refs": [{"id": "ref-for-event"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-event\u2460"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['44a7708c'] = {"dfnID": "44a7708c", "url": "https://dom.spec.whatwg.org/#dictdef-eventinit", "dfnText": "EventInit", "refSections": [{"refs": [{"id": "ref-for-dictdef-eventinit"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['2bc0cdf4'] = {"dfnID": "2bc0cdf4", "url": "https://dom.spec.whatwg.org/#eventtarget", "dfnText": "EventTarget", "refSections": [{"refs": [{"id": "ref-for-eventtarget"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-eventtarget\u2460"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['bec14ad5'] = {"dfnID": "bec14ad5", "url": "https://dom.spec.whatwg.org/#eventtarget-activation-behavior", "dfnText": "activation behavior", "refSections": [{"refs": [{"id": "ref-for-eventtarget-activation-behavior"}, {"id": "ref-for-eventtarget-activation-behavior\u2460"}, {"id": "ref-for-eventtarget-activation-behavior\u2461"}, {"id": "ref-for-eventtarget-activation-behavior\u2462"}, {"id": "ref-for-eventtarget-activation-behavior\u2463"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['8c407366'] = {"dfnID": "8c407366", "url": "https://dom.spec.whatwg.org/#dom-event-cancelable", "dfnText": "cancelable", "refSections": [{"refs": [{"id": "ref-for-dom-event-cancelable"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['2e9f6464'] = {"dfnID": "2e9f6464", "url": "https://dom.spec.whatwg.org/#canceled-flag", "dfnText": "canceled flag", "refSections": [{"refs": [{"id": "ref-for-canceled-flag"}, {"id": "ref-for-canceled-flag\u2460"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['8abfc3b6'] = {"dfnID": "8abfc3b6", "url": "https://dom.spec.whatwg.org/#concept-event-create", "dfnText": "creating an event", "refSections": [{"refs": [{"id": "ref-for-concept-event-create"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['1372f92a'] = {"dfnID": "1372f92a", "url": "https://dom.spec.whatwg.org/#concept-event-dispatch", "dfnText": "dispatch", "refSections": [{"refs": [{"id": "ref-for-concept-event-dispatch"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['092f2e0b'] = {"dfnID": "092f2e0b", "url": "https://dom.spec.whatwg.org/#dispatch-flag", "dfnText": "dispatch flag", "refSections": [{"refs": [{"id": "ref-for-dispatch-flag"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['5fd23811'] = {"dfnID": "5fd23811", "url": "https://dom.spec.whatwg.org/#concept-event-fire", "dfnText": "fire an event", "refSections": [{"refs": [{"id": "ref-for-concept-event-fire"}, {"id": "ref-for-concept-event-fire\u2460"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['838900a7'] = {"dfnID": "838900a7", "url": "https://dom.spec.whatwg.org/#dom-event-istrusted", "dfnText": "isTrusted", "refSections": [{"refs": [{"id": "ref-for-dom-event-istrusted"}, {"id": "ref-for-dom-event-istrusted\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-dom-event-istrusted\u2461"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['c62cd7cf'] = {"dfnID": "c62cd7cf", "url": "https://dom.spec.whatwg.org/#concept-document-origin", "dfnText": "origin", "refSections": [{"refs": [{"id": "ref-for-concept-document-origin"}, {"id": "ref-for-concept-document-origin\u2460"}], "title": "4.3. Navigation algorithm updates"}, {"refs": [{"id": "ref-for-concept-document-origin\u2461"}, {"id": "ref-for-concept-document-origin\u2462"}, {"id": "ref-for-concept-document-origin\u2463"}, {"id": "ref-for-concept-document-origin\u2464"}], "title": "5.3. Tracking the origin member"}], "external": true};
window.dfnpanelData['9d09d04c'] = {"dfnID": "9d09d04c", "url": "https://dom.spec.whatwg.org/#dom-event-type", "dfnText": "type", "refSections": [{"refs": [{"id": "ref-for-dom-event-type"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['347e8fe9'] = {"dfnID": "347e8fe9", "url": "https://dom.spec.whatwg.org/#concept-document-url", "dfnText": "url", "refSections": [{"refs": [{"id": "ref-for-concept-document-url"}, {"id": "ref-for-concept-document-url\u2460"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['cc84e68c'] = {"dfnID": "cc84e68c", "url": "https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-site", "dfnText": "sec-fetch-site", "refSections": [{"refs": [{"id": "ref-for-http-headerdef-sec-fetch-site"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['ccfe986b'] = {"dfnID": "ccfe986b", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#errorevent", "dfnText": "ErrorEvent", "refSections": [{"refs": [{"id": "ref-for-errorevent"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['f0951476'] = {"dfnID": "f0951476", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler", "dfnText": "EventHandler", "refSections": [{"refs": [{"id": "ref-for-eventhandler"}, {"id": "ref-for-eventhandler\u2460"}, {"id": "ref-for-eventhandler\u2461"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['0800bdf4'] = {"dfnID": "0800bdf4", "url": "https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize", "dfnText": "StructuredDeserialize", "refSections": [{"refs": [{"id": "ref-for-structureddeserialize"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['5d7209e9'] = {"dfnID": "5d7209e9", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window", "dfnText": "Window", "refSections": [{"refs": [{"id": "ref-for-window"}, {"id": "ref-for-window\u2460"}, {"id": "ref-for-window\u2461"}, {"id": "ref-for-window\u2462"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['68bf3d31'] = {"dfnID": "68bf3d31", "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element", "dfnText": "a", "refSections": [{"refs": [{"id": "ref-for-the-a-element"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-the-a-element\u2460"}, {"id": "ref-for-the-a-element\u2461"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['a1a807e5'] = {"dfnID": "a1a807e5", "url": "https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element", "dfnText": "area", "refSections": [{"refs": [{"id": "ref-for-the-area-element"}, {"id": "ref-for-the-area-element\u2460"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['3349d69f'] = {"dfnID": "3349d69f", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window", "dfnText": "associated document", "refSections": [{"refs": [{"id": "ref-for-concept-document-window"}, {"id": "ref-for-concept-document-window\u2460"}, {"id": "ref-for-concept-document-window\u2461"}, {"id": "ref-for-concept-document-window\u2462"}, {"id": "ref-for-concept-document-window\u2463"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-concept-document-window\u2464"}, {"id": "ref-for-concept-document-window\u2465"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-concept-document-window\u2466"}, {"id": "ref-for-concept-document-window\u2467"}, {"id": "ref-for-concept-document-window\u2468"}, {"id": "ref-for-concept-document-window\u2460\u24ea"}, {"id": "ref-for-concept-document-window\u2460\u2460"}, {"id": "ref-for-concept-document-window\u2460\u2461"}, {"id": "ref-for-concept-document-window\u2460\u2462"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['0d0390b4'] = {"dfnID": "0d0390b4", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context", "dfnText": "browsing context", "refSections": [{"refs": [{"id": "ref-for-browsing-context"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['3b2ff63e'] = {"dfnID": "3b2ff63e", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc", "dfnText": "browsing context (for Document)", "refSections": [{"refs": [{"id": "ref-for-concept-document-bc"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['6d88ab2e'] = {"dfnID": "6d88ab2e", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc", "dfnText": "browsing context (for Window)", "refSections": [{"refs": [{"id": "ref-for-window-bc"}, {"id": "ref-for-window-bc\u2460"}, {"id": "ref-for-window-bc\u2461"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['bfff6250'] = {"dfnID": "bfff6250", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element", "dfnText": "button", "refSections": [{"refs": [{"id": "ref-for-the-button-element"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['527c3ddf'] = {"dfnID": "527c3ddf", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-colno", "dfnText": "colno", "refSections": [{"refs": [{"id": "ref-for-dom-errorevent-colno"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['a7510263'] = {"dfnID": "a7510263", "url": "https://html.spec.whatwg.org/multipage/history.html#current-entry", "dfnText": "current entry", "refSections": [{"refs": [{"id": "ref-for-current-entry"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-current-entry\u2460"}, {"id": "ref-for-current-entry\u2461"}], "title": "5.2. Carrying over the app history key"}, {"refs": [{"id": "ref-for-current-entry\u2462"}], "title": "5.3. Tracking the origin member"}], "external": true};
window.dfnpanelData['a8ea6c66'] = {"dfnID": "a8ea6c66", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default", "dfnText": "default", "refSections": [{"refs": [{"id": "ref-for-hh-default"}, {"id": "ref-for-hh-default\u2460"}], "title": "4.3. Navigation algorithm updates"}, {"refs": [{"id": "ref-for-hh-default\u2461"}], "title": "5.3. Tracking the origin member"}], "external": true};
window.dfnpanelData['04e0443f'] = {"dfnID": "04e0443f", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2", "dfnText": "document (for Window)", "refSections": [{"refs": [{"id": "ref-for-dom-document-2"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['f3d97e87'] = {"dfnID": "f3d97e87", "url": "https://html.spec.whatwg.org/multipage/history.html#she-document", "dfnText": "document (for session history entry)", "refSections": [{"refs": [{"id": "ref-for-she-document"}], "title": "3. App history entries"}, {"refs": [{"id": "ref-for-she-document\u2460"}, {"id": "ref-for-she-document\u2461"}], "title": "4.3. Navigation algorithm updates"}, {"refs": [{"id": "ref-for-she-document\u2462"}, {"id": "ref-for-she-document\u2463"}, {"id": "ref-for-she-document\u2464"}], "title": "5.3. Tracking the origin member"}], "external": true};
window.dfnpanelData['56c301bd'] = {"dfnID": "56c301bd", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update", "dfnText": "entry update", "refSections": [{"refs": [{"id": "ref-for-hh-entry-update"}, {"id": "ref-for-hh-entry-update\u2460"}], "title": "4.3. Navigation algorithm updates"}], "external": true};
window.dfnpanelData['8adf2dfc'] = {"dfnID": "8adf2dfc", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-error", "dfnText": "error", "refSections": [{"refs": [{"id": "ref-for-dom-errorevent-error"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['6a5a59a0'] = {"dfnID": "6a5a59a0", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers", "dfnText": "event handler", "refSections": [{"refs": [{"id": "ref-for-event-handlers"}, {"id": "ref-for-event-handlers\u2460"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['9d386f55'] = {"dfnID": "9d386f55", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type", "dfnText": "event handler event type", "refSections": [{"refs": [{"id": "ref-for-event-handler-event-type"}, {"id": "ref-for-event-handler-event-type\u2460"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['03675365'] = {"dfnID": "03675365", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes", "dfnText": "event handler idl attribute", "refSections": [{"refs": [{"id": "ref-for-event-handler-idl-attributes"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['0b8e0aa2'] = {"dfnID": "0b8e0aa2", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-filename", "dfnText": "filename", "refSections": [{"refs": [{"id": "ref-for-dom-errorevent-filename"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['f0246dc8'] = {"dfnID": "f0246dc8", "url": "https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2", "dfnText": "follow the hyperlink", "refSections": [{"refs": [{"id": "ref-for-following-hyperlinks-2"}, {"id": "ref-for-following-hyperlinks-2\u2460"}, {"id": "ref-for-following-hyperlinks-2\u2461"}, {"id": "ref-for-following-hyperlinks-2\u2462"}, {"id": "ref-for-following-hyperlinks-2\u2463"}, {"id": "ref-for-following-hyperlinks-2\u2464"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['946a9318'] = {"dfnID": "946a9318", "url": "https://html.spec.whatwg.org/multipage/forms.html#the-form-element", "dfnText": "form", "refSections": [{"refs": [{"id": "ref-for-the-form-element"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-the-form-element\u2460"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['0e3ba9f8'] = {"dfnID": "0e3ba9f8", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active", "dfnText": "fully active", "refSections": [{"refs": [{"id": "ref-for-fully-active"}, {"id": "ref-for-fully-active\u2460"}, {"id": "ref-for-fully-active\u2461"}, {"id": "ref-for-fully-active\u2462"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-fully-active\u2463"}, {"id": "ref-for-fully-active\u2464"}, {"id": "ref-for-fully-active\u2465"}, {"id": "ref-for-fully-active\u2466"}, {"id": "ref-for-fully-active\u2467"}, {"id": "ref-for-fully-active\u2468"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['37b5f0f9'] = {"dfnID": "37b5f0f9", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-hh", "dfnText": "historyhandling", "refSections": [{"refs": [{"id": "ref-for-navigation-hh"}], "title": "4.1. Form submission patches"}], "external": true};
window.dfnpanelData['87fcd40c'] = {"dfnID": "87fcd40c", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element", "dfnText": "iframe", "refSections": [{"refs": [{"id": "ref-for-the-iframe-element"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['a72449dd'] = {"dfnID": "a72449dd", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel", "dfnText": "in parallel", "refSections": [{"refs": [{"id": "ref-for-in-parallel"}], "title": "4.1. Form submission patches"}, {"refs": [{"id": "ref-for-in-parallel\u2460"}], "title": "4.3. Navigation algorithm updates"}], "external": true};
window.dfnpanelData['d7d642a2'] = {"dfnID": "d7d642a2", "url": "https://html.spec.whatwg.org/multipage/input.html#the-input-element", "dfnText": "input", "refSections": [{"refs": [{"id": "ref-for-the-input-element"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['f38635aa'] = {"dfnID": "f38635aa", "url": "https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior", "dfnText": "input activation behavior", "refSections": [{"refs": [{"id": "ref-for-input-activation-behavior"}, {"id": "ref-for-input-activation-behavior\u2460"}, {"id": "ref-for-input-activation-behavior\u2461"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['880b9800'] = {"dfnID": "880b9800", "url": "https://html.spec.whatwg.org/multipage/history.html#uhus-ispush", "dfnText": "ispush", "refSections": [{"refs": [{"id": "ref-for-uhus-ispush"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['c4b77f43'] = {"dfnID": "c4b77f43", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-lineno", "dfnText": "lineno", "refSections": [{"refs": [{"id": "ref-for-dom-errorevent-lineno"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['4324934f'] = {"dfnID": "4324934f", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-message", "dfnText": "message", "refSections": [{"refs": [{"id": "ref-for-dom-errorevent-message"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['2594e562'] = {"dfnID": "2594e562", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate", "dfnText": "navigate", "refSections": [{"refs": [{"id": "ref-for-navigate"}, {"id": "ref-for-navigate\u2460"}, {"id": "ref-for-navigate\u2461"}], "title": "4.1. Form submission patches"}, {"refs": [{"id": "ref-for-navigate\u2462"}, {"id": "ref-for-navigate\u2463"}, {"id": "ref-for-navigate\u2464"}, {"id": "ref-for-navigate\u2465"}, {"id": "ref-for-navigate\u2466"}, {"id": "ref-for-navigate\u2467"}], "title": "4.2. Browser UI/user-initiated patches"}, {"refs": [{"id": "ref-for-navigate\u2468"}, {"id": "ref-for-navigate\u2460\u24ea"}], "title": "4.3. Navigation algorithm updates"}], "external": true};
window.dfnpanelData['fffd9ca9'] = {"dfnID": "fffd9ca9", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid", "dfnText": "navigate to a fragment", "refSections": [{"refs": [{"id": "ref-for-navigate-fragid"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-navigate-fragid\u2460"}], "title": "4.2. Browser UI/user-initiated patches"}, {"refs": [{"id": "ref-for-navigate-fragid\u2461"}, {"id": "ref-for-navigate-fragid\u2462"}, {"id": "ref-for-navigate-fragid\u2463"}], "title": "4.3. Navigation algorithm updates"}, {"refs": [{"id": "ref-for-navigate-fragid\u2464"}], "title": "5.3. Tracking the origin member"}], "external": true};
window.dfnpanelData['1fe39cd2'] = {"dfnID": "1fe39cd2", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-navigationtype", "dfnText": "navigationtype", "refSections": [{"refs": [{"id": "ref-for-navigation-navigationtype"}], "title": "4.1. Form submission patches"}], "external": true};
window.dfnpanelData['f7dfec9a'] = {"dfnID": "f7dfec9a", "url": "https://html.spec.whatwg.org/multipage/multipage/dynamic-markup-insertion.html#dom-document-open", "dfnText": "open(unused1, unused2)", "refSections": [{"refs": [{"id": "ref-for-dom-document-open"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['086e3aff'] = {"dfnID": "086e3aff", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin", "dfnText": "origin", "refSections": [{"refs": [{"id": "ref-for-concept-origin"}], "title": "5.1. New session history entry items"}], "external": true};
window.dfnpanelData['51563fba'] = {"dfnID": "51563fba", "url": "https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate", "dfnText": "plan to navigate", "refSections": [{"refs": [{"id": "ref-for-plan-to-navigate"}, {"id": "ref-for-plan-to-navigate\u2460"}], "title": "4.1. Form submission patches"}, {"refs": [{"id": "ref-for-plan-to-navigate\u2461"}, {"id": "ref-for-plan-to-navigate\u2462"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['e99bd18e'] = {"dfnID": "e99bd18e", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global", "dfnText": "relevant global object", "refSections": [{"refs": [{"id": "ref-for-concept-relevant-global"}, {"id": "ref-for-concept-relevant-global\u2460"}, {"id": "ref-for-concept-relevant-global\u2461"}, {"id": "ref-for-concept-relevant-global\u2462"}, {"id": "ref-for-concept-relevant-global\u2463"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2464"}, {"id": "ref-for-concept-relevant-global\u2465"}, {"id": "ref-for-concept-relevant-global\u2466"}, {"id": "ref-for-concept-relevant-global\u2467"}, {"id": "ref-for-concept-relevant-global\u2468"}, {"id": "ref-for-concept-relevant-global\u2460\u24ea"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2460\u2460"}, {"id": "ref-for-concept-relevant-global\u2460\u2461"}, {"id": "ref-for-concept-relevant-global\u2460\u2462"}, {"id": "ref-for-concept-relevant-global\u2460\u2463"}, {"id": "ref-for-concept-relevant-global\u2460\u2464"}, {"id": "ref-for-concept-relevant-global\u2460\u2465"}, {"id": "ref-for-concept-relevant-global\u2460\u2466"}], "title": "3. App history entries"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2460\u2467"}, {"id": "ref-for-concept-relevant-global\u2460\u2468"}], "title": "4.3. Navigation algorithm updates"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2461\u24ea"}, {"id": "ref-for-concept-relevant-global\u2461\u2460"}], "title": "5.4. Updating the AppHistory object"}], "external": true};
window.dfnpanelData['5991ccfb'] = {"dfnID": "5991ccfb", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm", "dfnText": "relevant realm", "refSections": [{"refs": [{"id": "ref-for-concept-relevant-realm"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-concept-relevant-realm\u2460"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['c75feb22'] = {"dfnID": "c75feb22", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace", "dfnText": "replace", "refSections": [{"refs": [{"id": "ref-for-hh-replace"}], "title": "5.2. Carrying over the app history key"}, {"refs": [{"id": "ref-for-hh-replace\u2460"}], "title": "5.3. Tracking the origin member"}], "external": true};
window.dfnpanelData['385fc270'] = {"dfnID": "385fc270", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception", "dfnText": "report an exception", "refSections": [{"refs": [{"id": "ref-for-report-the-exception"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['7393da89'] = {"dfnID": "7393da89", "url": "https://html.spec.whatwg.org/multipage/browsers.html#same-origin", "dfnText": "same origin", "refSections": [{"refs": [{"id": "ref-for-same-origin"}, {"id": "ref-for-same-origin\u2460"}, {"id": "ref-for-same-origin\u2461"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-same-origin\u2462"}, {"id": "ref-for-same-origin\u2463"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-same-origin\u2464"}], "title": "5.2. Carrying over the app history key"}], "external": true};
window.dfnpanelData['521818b9'] = {"dfnID": "521818b9", "url": "https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain", "dfnText": "same origin-domain", "refSections": [{"refs": [{"id": "ref-for-same-origin-domain"}, {"id": "ref-for-same-origin-domain\u2460"}], "title": "4.3. Navigation algorithm updates"}], "external": true};
window.dfnpanelData['078e5c59'] = {"dfnID": "078e5c59", "url": "https://html.spec.whatwg.org/multipage/history.html#serialized-state", "dfnText": "serialized state", "refSections": [{"refs": [{"id": "ref-for-serialized-state"}, {"id": "ref-for-serialized-state\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-serialized-state\u2461"}], "title": "5.1. New session history entry items"}], "external": true};
window.dfnpanelData['316ad5bf'] = {"dfnID": "316ad5bf", "url": "https://html.spec.whatwg.org/multipage/history.html#uhus-serializeddata", "dfnText": "serializeddata", "refSections": [{"refs": [{"id": "ref-for-uhus-serializeddata"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['48093925'] = {"dfnID": "48093925", "url": "https://html.spec.whatwg.org/multipage/history.html#session-history", "dfnText": "session history", "refSections": [{"refs": [{"id": "ref-for-session-history"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-session-history\u2460"}], "title": "4.3. Navigation algorithm updates"}], "external": true};
window.dfnpanelData['90c6a866'] = {"dfnID": "90c6a866", "url": "https://html.spec.whatwg.org/multipage/history.html#session-history-entry", "dfnText": "session history entry", "refSections": [{"refs": [{"id": "ref-for-session-history-entry"}, {"id": "ref-for-session-history-entry\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-session-history-entry\u2461"}], "title": "3. App history entries"}, {"refs": [{"id": "ref-for-session-history-entry\u2462"}], "title": "5. Patches to session history"}, {"refs": [{"id": "ref-for-session-history-entry\u2463"}, {"id": "ref-for-session-history-entry\u2464"}], "title": "5.1. New session history entry items"}, {"refs": [{"id": "ref-for-session-history-entry\u2465"}, {"id": "ref-for-session-history-entry\u2466"}], "title": "5.3. Tracking the origin member"}], "external": true};
window.dfnpanelData['bda66ea0'] = {"dfnID": "bda66ea0", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#shared-history-push/replace-state-steps", "dfnText": "shared history push/replace state steps", "refSections": [{"refs": [{"id": "ref-for-shared-history-push/replace-state-steps"}], "title": "4.3. Navigation algorithm updates"}], "external": true};
window.dfnpanelData['d9fec0a7'] = {"dfnID": "d9fec0a7", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-history-state", "dfnText": "state", "refSections": [{"refs": [{"id": "ref-for-dom-history-state"}, {"id": "ref-for-dom-history-state\u2460"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['c26b4f17'] = {"dfnID": "c26b4f17", "url": "https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#submit-body", "dfnText": "submit as entity body", "refSections": [{"refs": [{"id": "ref-for-submit-body"}], "title": "4.1. Form submission patches"}], "external": true};
window.dfnpanelData['967921f0'] = {"dfnID": "967921f0", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#attr-button-type-submit-state", "dfnText": "submit button", "refSections": [{"refs": [{"id": "ref-for-attr-button-type-submit-state"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['6f89ecfa'] = {"dfnID": "6f89ecfa", "url": "https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit", "dfnText": "submitted", "refSections": [{"refs": [{"id": "ref-for-concept-form-submit"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-concept-form-submit\u2460"}, {"id": "ref-for-concept-form-submit\u2461"}, {"id": "ref-for-concept-form-submit\u2462"}, {"id": "ref-for-concept-form-submit\u2463"}, {"id": "ref-for-concept-form-submit\u2464"}, {"id": "ref-for-concept-form-submit\u2465"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": true};
window.dfnpanelData['deb71015'] = {"dfnID": "deb71015", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history-by-a-delta", "dfnText": "traverse the history by a delta", "refSections": [{"refs": [{"id": "ref-for-traverse-the-history-by-a-delta"}, {"id": "ref-for-traverse-the-history-by-a-delta\u2460"}], "title": "4.2. Browser UI/user-initiated patches"}, {"refs": [{"id": "ref-for-traverse-the-history-by-a-delta\u2461"}, {"id": "ref-for-traverse-the-history-by-a-delta\u2462"}], "title": "4.3. Navigation algorithm updates"}], "external": true};
window.dfnpanelData['0cacde69'] = {"dfnID": "0cacde69", "url": "https://html.spec.whatwg.org/multipage/history.html#she-url", "dfnText": "url", "refSections": [{"refs": [{"id": "ref-for-she-url"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['220e841a'] = {"dfnID": "220e841a", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#url-and-history-update-steps", "dfnText": "url and history update steps", "refSections": [{"refs": [{"id": "ref-for-url-and-history-update-steps"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-url-and-history-update-steps\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-url-and-history-update-steps\u2461"}], "title": "4.3. Navigation algorithm updates"}, {"refs": [{"id": "ref-for-url-and-history-update-steps\u2462"}], "title": "5.3. Tracking the origin member"}, {"refs": [{"id": "ref-for-url-and-history-update-steps\u2463"}], "title": "5.4. Updating the AppHistory object"}], "external": true};
window.dfnpanelData['53275e46'] = {"dfnID": "53275e46", "url": "https://infra.spec.whatwg.org/#list-append", "dfnText": "append", "refSections": [{"refs": [{"id": "ref-for-list-append"}, {"id": "ref-for-list-append\u2460"}, {"id": "ref-for-list-append\u2461"}, {"id": "ref-for-list-append\u2462"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['77b4c09a'] = {"dfnID": "77b4c09a", "url": "https://infra.spec.whatwg.org/#assert", "dfnText": "assert", "refSections": [{"refs": [{"id": "ref-for-assert"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-assert\u2460"}, {"id": "ref-for-assert\u2461"}, {"id": "ref-for-assert\u2462"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['7b0d918d'] = {"dfnID": "7b0d918d", "url": "https://infra.spec.whatwg.org/#iteration-break", "dfnText": "break", "refSections": [{"refs": [{"id": "ref-for-iteration-break"}, {"id": "ref-for-iteration-break\u2460"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['ae8def21'] = {"dfnID": "ae8def21", "url": "https://infra.spec.whatwg.org/#list-contain", "dfnText": "contain", "refSections": [{"refs": [{"id": "ref-for-list-contain"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['16d07e10'] = {"dfnID": "16d07e10", "url": "https://infra.spec.whatwg.org/#list-iterate", "dfnText": "for each", "refSections": [{"refs": [{"id": "ref-for-list-iterate"}, {"id": "ref-for-list-iterate\u2460"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['7a87d819'] = {"dfnID": "7a87d819", "url": "https://infra.spec.whatwg.org/#string-is", "dfnText": "is", "refSections": [{"refs": [{"id": "ref-for-string-is"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['6b815fdd'] = {"dfnID": "6b815fdd", "url": "https://infra.spec.whatwg.org/#list-is-empty", "dfnText": "is empty", "refSections": [{"refs": [{"id": "ref-for-list-is-empty"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['c88f3887'] = {"dfnID": "c88f3887", "url": "https://infra.spec.whatwg.org/#struct-item", "dfnText": "item", "refSections": [{"refs": [{"id": "ref-for-struct-item"}], "title": "5.1. New session history entry items"}], "external": true};
window.dfnpanelData['649608b9'] = {"dfnID": "649608b9", "url": "https://infra.spec.whatwg.org/#list", "dfnText": "list", "refSections": [{"refs": [{"id": "ref-for-list"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-list\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-list\u2461"}], "title": "4.1. Form submission patches"}], "external": true};
window.dfnpanelData['e2fc6023'] = {"dfnID": "e2fc6023", "url": "https://infra.spec.whatwg.org/#list-prepend", "dfnText": "prepend", "refSections": [{"refs": [{"id": "ref-for-list-prepend"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['0204d188'] = {"dfnID": "0204d188", "url": "https://infra.spec.whatwg.org/#list-size", "dfnText": "size", "refSections": [{"refs": [{"id": "ref-for-list-size"}, {"id": "ref-for-list-size\u2460"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['6d19ac93'] = {"dfnID": "6d19ac93", "url": "https://infra.spec.whatwg.org/#user-agent", "dfnText": "user agent", "refSections": [{"refs": [{"id": "ref-for-user-agent"}, {"id": "ref-for-user-agent\u2460"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['6fbdf145'] = {"dfnID": "6fbdf145", "url": "https://url.spec.whatwg.org/#concept-url-equals", "dfnText": "equal", "refSections": [{"refs": [{"id": "ref-for-concept-url-equals"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['aa8d681c'] = {"dfnID": "aa8d681c", "url": "https://url.spec.whatwg.org/#url-equals-exclude-fragments", "dfnText": "exclude fragments", "refSections": [{"refs": [{"id": "ref-for-url-equals-exclude-fragments"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['ed948033'] = {"dfnID": "ed948033", "url": "https://url.spec.whatwg.org/#concept-url-fragment", "dfnText": "fragment", "refSections": [{"refs": [{"id": "ref-for-concept-url-fragment"}, {"id": "ref-for-concept-url-fragment\u2460"}, {"id": "ref-for-concept-url-fragment\u2461"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['959ad97b'] = {"dfnID": "959ad97b", "url": "https://url.spec.whatwg.org/#concept-url-origin", "dfnText": "origin", "refSections": [{"refs": [{"id": "ref-for-concept-url-origin"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['c0868016'] = {"dfnID": "c0868016", "url": "https://url.spec.whatwg.org/#concept-url-path", "dfnText": "path", "refSections": [{"refs": [{"id": "ref-for-concept-url-path"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['3ab2ec8b'] = {"dfnID": "3ab2ec8b", "url": "https://url.spec.whatwg.org/#concept-url-query", "dfnText": "query", "refSections": [{"refs": [{"id": "ref-for-concept-url-query"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['dcffbccd'] = {"dfnID": "dcffbccd", "url": "https://url.spec.whatwg.org/#concept-url", "dfnText": "url", "refSections": [{"refs": [{"id": "ref-for-concept-url"}, {"id": "ref-for-concept-url\u2460"}, {"id": "ref-for-concept-url\u2461"}, {"id": "ref-for-concept-url\u2462"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['5442ea33'] = {"dfnID": "5442ea33", "url": "https://url.spec.whatwg.org/#concept-url-serializer", "dfnText": "url serializer", "refSections": [{"refs": [{"id": "ref-for-concept-url-serializer"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['d4b32370'] = {"dfnID": "d4b32370", "url": "https://wicg.github.io/uuid/#dfn-generate-a-random-uuid", "dfnText": "generate a random uuid", "refSections": [{"refs": [{"id": "ref-for-dfn-generate-a-random-uuid"}, {"id": "ref-for-dfn-generate-a-random-uuid\u2460"}], "title": "5.1. New session history entry items"}], "external": true};
window.dfnpanelData['2f8afbfe'] = {"dfnID": "2f8afbfe", "url": "https://webidl.spec.whatwg.org/#idl-ArrayBuffer", "dfnText": "ArrayBuffer", "refSections": [{"refs": [{"id": "ref-for-idl-ArrayBuffer"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['dca2de17'] = {"dfnID": "dca2de17", "url": "https://webidl.spec.whatwg.org/#idl-DOMException", "dfnText": "DOMException", "refSections": [{"refs": [{"id": "ref-for-idl-DOMException"}, {"id": "ref-for-idl-DOMException\u2460"}, {"id": "ref-for-idl-DOMException\u2461"}, {"id": "ref-for-idl-DOMException\u2462"}, {"id": "ref-for-idl-DOMException\u2463"}, {"id": "ref-for-idl-DOMException\u2464"}, {"id": "ref-for-idl-DOMException\u2465"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['8855a9aa'] = {"dfnID": "8855a9aa", "url": "https://webidl.spec.whatwg.org/#idl-DOMString", "dfnText": "DOMString", "refSections": [{"refs": [{"id": "ref-for-idl-DOMString"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-idl-DOMString\u2460"}, {"id": "ref-for-idl-DOMString\u2461"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['889e932f'] = {"dfnID": "889e932f", "url": "https://webidl.spec.whatwg.org/#Exposed", "dfnText": "Exposed", "refSections": [{"refs": [{"id": "ref-for-Exposed"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-Exposed\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-Exposed\u2461"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['797018a7'] = {"dfnID": "797018a7", "url": "https://webidl.spec.whatwg.org/#invalidstateerror", "dfnText": "InvalidStateError", "refSections": [{"refs": [{"id": "ref-for-invalidstateerror"}, {"id": "ref-for-invalidstateerror\u2460"}, {"id": "ref-for-invalidstateerror\u2461"}, {"id": "ref-for-invalidstateerror\u2462"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['bdbd19d1'] = {"dfnID": "bdbd19d1", "url": "https://webidl.spec.whatwg.org/#idl-promise", "dfnText": "Promise", "refSections": [{"refs": [{"id": "ref-for-idl-promise"}, {"id": "ref-for-idl-promise\u2460"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['c3e881ef'] = {"dfnID": "c3e881ef", "url": "https://webidl.spec.whatwg.org/#securityerror", "dfnText": "SecurityError", "refSections": [{"refs": [{"id": "ref-for-securityerror"}, {"id": "ref-for-securityerror\u2460"}, {"id": "ref-for-securityerror\u2461"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['b0d7f3c3'] = {"dfnID": "b0d7f3c3", "url": "https://webidl.spec.whatwg.org/#idl-USVString", "dfnText": "USVString", "refSections": [{"refs": [{"id": "ref-for-idl-USVString"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['8f5c2179'] = {"dfnID": "8f5c2179", "url": "https://webidl.spec.whatwg.org/#a-promise-resolved-with", "dfnText": "a promise resolved with", "refSections": [{"refs": [{"id": "ref-for-a-promise-resolved-with"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['6c6b1005'] = {"dfnID": "6c6b1005", "url": "https://webidl.spec.whatwg.org/#idl-any", "dfnText": "any", "refSections": [{"refs": [{"id": "ref-for-idl-any"}, {"id": "ref-for-idl-any\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-idl-any\u2461"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['5372cca8'] = {"dfnID": "5372cca8", "url": "https://webidl.spec.whatwg.org/#idl-boolean", "dfnText": "boolean", "refSections": [{"refs": [{"id": "ref-for-idl-boolean"}, {"id": "ref-for-idl-boolean\u2460"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-idl-boolean\u2461"}, {"id": "ref-for-idl-boolean\u2462"}, {"id": "ref-for-idl-boolean\u2463"}, {"id": "ref-for-idl-boolean\u2464"}, {"id": "ref-for-idl-boolean\u2465"}, {"id": "ref-for-idl-boolean\u2466"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-idl-boolean\u2467"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['9aeb0a82'] = {"dfnID": "9aeb0a82", "url": "https://webidl.spec.whatwg.org/#idl-long-long", "dfnText": "long long", "refSections": [{"refs": [{"id": "ref-for-idl-long-long"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['56f81a8e'] = {"dfnID": "56f81a8e", "url": "https://webidl.spec.whatwg.org/#new", "dfnText": "new", "refSections": [{"refs": [{"id": "ref-for-new"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-new\u2460"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['750a2f08'] = {"dfnID": "750a2f08", "url": "https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled", "dfnText": "react", "refSections": [{"refs": [{"id": "ref-for-dfn-perform-steps-once-promise-is-settled"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['9cce47fd'] = {"dfnID": "9cce47fd", "url": "https://webidl.spec.whatwg.org/#idl-sequence", "dfnText": "sequence", "refSections": [{"refs": [{"id": "ref-for-idl-sequence"}], "title": "1. The AppHistory class"}], "external": true};
window.dfnpanelData['4013a022'] = {"dfnID": "4013a022", "url": "https://webidl.spec.whatwg.org/#this", "dfnText": "this", "refSections": [{"refs": [{"id": "ref-for-this"}, {"id": "ref-for-this\u2460"}, {"id": "ref-for-this\u2461"}, {"id": "ref-for-this\u2462"}, {"id": "ref-for-this\u2463"}, {"id": "ref-for-this\u2464"}, {"id": "ref-for-this\u2465"}, {"id": "ref-for-this\u2466"}, {"id": "ref-for-this\u2467"}, {"id": "ref-for-this\u2468"}, {"id": "ref-for-this\u2460\u24ea"}, {"id": "ref-for-this\u2460\u2460"}, {"id": "ref-for-this\u2460\u2461"}, {"id": "ref-for-this\u2460\u2462"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-this\u2460\u2463"}, {"id": "ref-for-this\u2460\u2464"}, {"id": "ref-for-this\u2460\u2465"}, {"id": "ref-for-this\u2460\u2466"}, {"id": "ref-for-this\u2460\u2467"}, {"id": "ref-for-this\u2460\u2468"}, {"id": "ref-for-this\u2461\u24ea"}, {"id": "ref-for-this\u2461\u2460"}, {"id": "ref-for-this\u2461\u2461"}, {"id": "ref-for-this\u2461\u2462"}, {"id": "ref-for-this\u2461\u2463"}, {"id": "ref-for-this\u2461\u2464"}, {"id": "ref-for-this\u2461\u2465"}, {"id": "ref-for-this\u2461\u2466"}, {"id": "ref-for-this\u2461\u2467"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-this\u2461\u2468"}, {"id": "ref-for-this\u2462\u24ea"}, {"id": "ref-for-this\u2462\u2460"}, {"id": "ref-for-this\u2462\u2461"}, {"id": "ref-for-this\u2462\u2462"}, {"id": "ref-for-this\u2462\u2463"}, {"id": "ref-for-this\u2462\u2464"}, {"id": "ref-for-this\u2462\u2465"}, {"id": "ref-for-this\u2462\u2466"}, {"id": "ref-for-this\u2462\u2467"}, {"id": "ref-for-this\u2462\u2468"}, {"id": "ref-for-this\u2463\u24ea"}, {"id": "ref-for-this\u2463\u2460"}, {"id": "ref-for-this\u2463\u2461"}], "title": "3. App history entries"}], "external": true};
window.dfnpanelData['5f90bbfb'] = {"dfnID": "5f90bbfb", "url": "https://webidl.spec.whatwg.org/#idl-undefined", "dfnText": "undefined", "refSections": [{"refs": [{"id": "ref-for-idl-undefined"}, {"id": "ref-for-idl-undefined\u2460"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['61cd38cd'] = {"dfnID": "61cd38cd", "url": "https://xhr.spec.whatwg.org/#formdata", "dfnText": "FormData", "refSections": [{"refs": [{"id": "ref-for-formdata"}, {"id": "ref-for-formdata\u2460"}, {"id": "ref-for-formdata\u2461"}, {"id": "ref-for-formdata\u2462"}, {"id": "ref-for-formdata\u2463"}], "title": "2. The navigate event"}], "external": true};
window.dfnpanelData['window-app-history'] = {"dfnID": "window-app-history", "url": "#window-app-history", "dfnText": "app history", "refSections": [{"refs": [{"id": "ref-for-window-app-history"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-window-app-history\u2460"}, {"id": "ref-for-window-app-history\u2461"}, {"id": "ref-for-window-app-history\u2462"}, {"id": "ref-for-window-app-history\u2463"}], "title": "4.3. Navigation algorithm updates"}, {"refs": [{"id": "ref-for-window-app-history\u2464"}, {"id": "ref-for-window-app-history\u2465"}], "title": "5.4. Updating the AppHistory object"}], "external": false};
window.dfnpanelData['dom-window-apphistory'] = {"dfnID": "dom-window-apphistory", "url": "#dom-window-apphistory", "dfnText": "appHistory", "refSections": [{"refs": [{"id": "ref-for-dom-window-apphistory"}, {"id": "ref-for-dom-window-apphistory\u2460"}, {"id": "ref-for-dom-window-apphistory\u2461"}, {"id": "ref-for-dom-window-apphistory\u2462"}, {"id": "ref-for-dom-window-apphistory\u2463"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['apphistory'] = {"dfnID": "apphistory", "url": "#apphistory", "dfnText": "AppHistory", "refSections": [{"refs": [{"id": "ref-for-apphistory"}, {"id": "ref-for-apphistory\u2460"}, {"id": "ref-for-apphistory\u2461"}, {"id": "ref-for-apphistory\u2462"}, {"id": "ref-for-apphistory\u2463"}, {"id": "ref-for-apphistory\u2464"}, {"id": "ref-for-apphistory\u2465"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-apphistory\u2466"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-apphistory\u2467"}], "title": "5. Patches to session history"}, {"refs": [{"id": "ref-for-apphistory\u2468"}], "title": "5.4. Updating the AppHistory object"}], "external": false};
window.dfnpanelData['apphistory-entry-list'] = {"dfnID": "apphistory-entry-list", "url": "#apphistory-entry-list", "dfnText": "entry list", "refSections": [{"refs": [{"id": "ref-for-apphistory-entry-list"}, {"id": "ref-for-apphistory-entry-list\u2460"}, {"id": "ref-for-apphistory-entry-list\u2461"}, {"id": "ref-for-apphistory-entry-list\u2462"}, {"id": "ref-for-apphistory-entry-list\u2463"}, {"id": "ref-for-apphistory-entry-list\u2464"}, {"id": "ref-for-apphistory-entry-list\u2465"}, {"id": "ref-for-apphistory-entry-list\u2466"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['apphistory-current-index'] = {"dfnID": "apphistory-current-index", "url": "#apphistory-current-index", "dfnText": "current index", "refSections": [{"refs": [{"id": "ref-for-apphistory-current-index"}, {"id": "ref-for-apphistory-current-index\u2460"}, {"id": "ref-for-apphistory-current-index\u2461"}, {"id": "ref-for-apphistory-current-index\u2462"}, {"id": "ref-for-apphistory-current-index\u2463"}, {"id": "ref-for-apphistory-current-index\u2464"}, {"id": "ref-for-apphistory-current-index\u2465"}, {"id": "ref-for-apphistory-current-index\u2466"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['dom-apphistory-current'] = {"dfnID": "dom-apphistory-current", "url": "#dom-apphistory-current", "dfnText": "current", "refSections": [{"refs": [{"id": "ref-for-dom-apphistory-current"}, {"id": "ref-for-dom-apphistory-current\u2460"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['dom-apphistory-entries'] = {"dfnID": "dom-apphistory-entries", "url": "#dom-apphistory-entries", "dfnText": "entries()", "refSections": [{"refs": [{"id": "ref-for-dom-apphistory-entries"}, {"id": "ref-for-dom-apphistory-entries\u2460"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-dom-apphistory-entries\u2461"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['dom-apphistory-cangoback'] = {"dfnID": "dom-apphistory-cangoback", "url": "#dom-apphistory-cangoback", "dfnText": "canGoBack", "refSections": [{"refs": [{"id": "ref-for-dom-apphistory-cangoback"}, {"id": "ref-for-dom-apphistory-cangoback\u2460"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['dom-apphistory-cangoforward'] = {"dfnID": "dom-apphistory-cangoforward", "url": "#dom-apphistory-cangoforward", "dfnText": "canGoForward", "refSections": [{"refs": [{"id": "ref-for-dom-apphistory-cangoforward"}, {"id": "ref-for-dom-apphistory-cangoforward\u2460"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['dom-apphistory-onnavigate'] = {"dfnID": "dom-apphistory-onnavigate", "url": "#dom-apphistory-onnavigate", "dfnText": "onnavigate", "refSections": [{"refs": [{"id": "ref-for-dom-apphistory-onnavigate"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['eventdef-apphistory-navigate'] = {"dfnID": "eventdef-apphistory-navigate", "url": "#eventdef-apphistory-navigate", "dfnText": "navigate", "refSections": [{"refs": [{"id": "ref-for-eventdef-apphistory-navigate"}, {"id": "ref-for-eventdef-apphistory-navigate\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-eventdef-apphistory-navigate\u2461"}, {"id": "ref-for-eventdef-apphistory-navigate\u2462"}], "title": "4. Patches to fire the navigate event"}, {"refs": [{"id": "ref-for-eventdef-apphistory-navigate\u2463"}, {"id": "ref-for-eventdef-apphistory-navigate\u2464"}, {"id": "ref-for-eventdef-apphistory-navigate\u2465"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['dom-apphistory-onnavigatesuccess'] = {"dfnID": "dom-apphistory-onnavigatesuccess", "url": "#dom-apphistory-onnavigatesuccess", "dfnText": "onnavigatesuccess", "refSections": [{"refs": [{"id": "ref-for-dom-apphistory-onnavigatesuccess"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['eventdef-apphistory-navigatesuccess'] = {"dfnID": "eventdef-apphistory-navigatesuccess", "url": "#eventdef-apphistory-navigatesuccess", "dfnText": "navigatesuccess", "refSections": [{"refs": [{"id": "ref-for-eventdef-apphistory-navigatesuccess"}, {"id": "ref-for-eventdef-apphistory-navigatesuccess\u2460"}, {"id": "ref-for-eventdef-apphistory-navigatesuccess\u2461"}, {"id": "ref-for-eventdef-apphistory-navigatesuccess\u2462"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['dom-apphistory-onnavigateerror'] = {"dfnID": "dom-apphistory-onnavigateerror", "url": "#dom-apphistory-onnavigateerror", "dfnText": "onnavigateerror", "refSections": [{"refs": [{"id": "ref-for-dom-apphistory-onnavigateerror"}], "title": "1. The AppHistory class"}], "external": false};
window.dfnpanelData['eventdef-apphistory-navigateerror'] = {"dfnID": "eventdef-apphistory-navigateerror", "url": "#eventdef-apphistory-navigateerror", "dfnText": "navigateerror", "refSections": [{"refs": [{"id": "ref-for-eventdef-apphistory-navigateerror"}, {"id": "ref-for-eventdef-apphistory-navigateerror\u2460"}, {"id": "ref-for-eventdef-apphistory-navigateerror\u2461"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['apphistory-update-the-entries'] = {"dfnID": "apphistory-update-the-entries", "url": "#apphistory-update-the-entries", "dfnText": "update the entries", "refSections": [{"refs": [{"id": "ref-for-apphistory-update-the-entries"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-apphistory-update-the-entries\u2460"}, {"id": "ref-for-apphistory-update-the-entries\u2461"}, {"id": "ref-for-apphistory-update-the-entries\u2462"}], "title": "5.4. Updating the AppHistory object"}], "external": false};
window.dfnpanelData['apphistorynavigateevent'] = {"dfnID": "apphistorynavigateevent", "url": "#apphistorynavigateevent", "dfnText": "AppHistoryNavigateEvent", "refSections": [{"refs": [{"id": "ref-for-apphistorynavigateevent"}, {"id": "ref-for-apphistorynavigateevent\u2460"}, {"id": "ref-for-apphistorynavigateevent\u2461"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-apphistorynavigateevent\u2462"}], "title": "4.1. Form submission patches"}, {"refs": [{"id": "ref-for-apphistorynavigateevent\u2463"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": false};
window.dfnpanelData['dictdef-apphistorynavigateeventinit'] = {"dfnID": "dictdef-apphistorynavigateeventinit", "url": "#dictdef-apphistorynavigateeventinit", "dfnText": "AppHistoryNavigateEventInit", "refSections": [{"refs": [{"id": "ref-for-dictdef-apphistorynavigateeventinit"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['enumdef-apphistorynavigationtype'] = {"dfnID": "enumdef-apphistorynavigationtype", "url": "#enumdef-apphistorynavigationtype", "dfnText": "AppHistoryNavigationType", "refSections": [{"refs": [{"id": "ref-for-enumdef-apphistorynavigationtype"}, {"id": "ref-for-enumdef-apphistorynavigationtype\u2460"}, {"id": "ref-for-enumdef-apphistorynavigationtype\u2461"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['dom-apphistorynavigationtype-push'] = {"dfnID": "dom-apphistorynavigationtype-push", "url": "#dom-apphistorynavigationtype-push", "dfnText": "\"push\"", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigationtype-push"}, {"id": "ref-for-dom-apphistorynavigationtype-push\u2460"}, {"id": "ref-for-dom-apphistorynavigationtype-push\u2461"}, {"id": "ref-for-dom-apphistorynavigationtype-push\u2462"}, {"id": "ref-for-dom-apphistorynavigationtype-push\u2463"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-dom-apphistorynavigationtype-push\u2464"}, {"id": "ref-for-dom-apphistorynavigationtype-push\u2465"}, {"id": "ref-for-dom-apphistorynavigationtype-push\u2466"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['dom-apphistorynavigationtype-replace'] = {"dfnID": "dom-apphistorynavigationtype-replace", "url": "#dom-apphistorynavigationtype-replace", "dfnText": "\"replace\"", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigationtype-replace"}, {"id": "ref-for-dom-apphistorynavigationtype-replace\u2460"}, {"id": "ref-for-dom-apphistorynavigationtype-replace\u2461"}, {"id": "ref-for-dom-apphistorynavigationtype-replace\u2462"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-dom-apphistorynavigationtype-replace\u2463"}, {"id": "ref-for-dom-apphistorynavigationtype-replace\u2464"}, {"id": "ref-for-dom-apphistorynavigationtype-replace\u2465"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['dom-apphistorynavigationtype-traverse'] = {"dfnID": "dom-apphistorynavigationtype-traverse", "url": "#dom-apphistorynavigationtype-traverse", "dfnText": "\"traverse\"", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigationtype-traverse"}, {"id": "ref-for-dom-apphistorynavigationtype-traverse\u2460"}, {"id": "ref-for-dom-apphistorynavigationtype-traverse\u2461"}, {"id": "ref-for-dom-apphistorynavigationtype-traverse\u2462"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-dom-apphistorynavigationtype-traverse\u2463"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['dom-apphistorynavigateevent-navigationtype'] = {"dfnID": "dom-apphistorynavigateevent-navigationtype", "url": "#dom-apphistorynavigateevent-navigationtype", "dfnText": "navigationType", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigateevent-navigationtype"}, {"id": "ref-for-dom-apphistorynavigateevent-navigationtype\u2460"}, {"id": "ref-for-dom-apphistorynavigateevent-navigationtype\u2461"}, {"id": "ref-for-dom-apphistorynavigateevent-navigationtype\u2462"}, {"id": "ref-for-dom-apphistorynavigateevent-navigationtype\u2463"}, {"id": "ref-for-dom-apphistorynavigateevent-navigationtype\u2464"}, {"id": "ref-for-dom-apphistorynavigateevent-navigationtype\u2465"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['dom-apphistorynavigateevent-canrespond'] = {"dfnID": "dom-apphistorynavigateevent-canrespond", "url": "#dom-apphistorynavigateevent-canrespond", "dfnText": "canRespond", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigateevent-canrespond"}, {"id": "ref-for-dom-apphistorynavigateevent-canrespond\u2460"}, {"id": "ref-for-dom-apphistorynavigateevent-canrespond\u2461"}, {"id": "ref-for-dom-apphistorynavigateevent-canrespond\u2462"}, {"id": "ref-for-dom-apphistorynavigateevent-canrespond\u2463"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['dom-apphistorynavigateevent-userinitiated'] = {"dfnID": "dom-apphistorynavigateevent-userinitiated", "url": "#dom-apphistorynavigateevent-userinitiated", "dfnText": "userInitiated", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigateevent-userinitiated"}, {"id": "ref-for-dom-apphistorynavigateevent-userinitiated\u2460"}, {"id": "ref-for-dom-apphistorynavigateevent-userinitiated\u2461"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-dom-apphistorynavigateevent-userinitiated\u2462"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": false};
window.dfnpanelData['dom-apphistorynavigateevent-hashchange'] = {"dfnID": "dom-apphistorynavigateevent-hashchange", "url": "#dom-apphistorynavigateevent-hashchange", "dfnText": "hashChange", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigateevent-hashchange"}, {"id": "ref-for-dom-apphistorynavigateevent-hashchange\u2460"}, {"id": "ref-for-dom-apphistorynavigateevent-hashchange\u2461"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['dom-apphistorynavigateevent-formdata'] = {"dfnID": "dom-apphistorynavigateevent-formdata", "url": "#dom-apphistorynavigateevent-formdata", "dfnText": "formData", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigateevent-formdata"}, {"id": "ref-for-dom-apphistorynavigateevent-formdata\u2460"}, {"id": "ref-for-dom-apphistorynavigateevent-formdata\u2461"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-dom-apphistorynavigateevent-formdata\u2462"}], "title": "4.1. Form submission patches"}], "external": false};
window.dfnpanelData['dom-apphistorynavigateevent-info'] = {"dfnID": "dom-apphistorynavigateevent-info", "url": "#dom-apphistorynavigateevent-info", "dfnText": "info", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigateevent-info"}, {"id": "ref-for-dom-apphistorynavigateevent-info\u2460"}, {"id": "ref-for-dom-apphistorynavigateevent-info\u2461"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['apphistorynavigateevent-destination-url'] = {"dfnID": "apphistorynavigateevent-destination-url", "url": "#apphistorynavigateevent-destination-url", "dfnText": "destination URL", "refSections": [{"refs": [{"id": "ref-for-apphistorynavigateevent-destination-url"}, {"id": "ref-for-apphistorynavigateevent-destination-url\u2460"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['apphistorynavigateevent-classic-history-api-serialized-data'] = {"dfnID": "apphistorynavigateevent-classic-history-api-serialized-data", "url": "#apphistorynavigateevent-classic-history-api-serialized-data", "dfnText": "classic history API serialized data", "refSections": [{"refs": [{"id": "ref-for-apphistorynavigateevent-classic-history-api-serialized-data"}, {"id": "ref-for-apphistorynavigateevent-classic-history-api-serialized-data\u2460"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['apphistorynavigateevent-destination-entry'] = {"dfnID": "apphistorynavigateevent-destination-entry", "url": "#apphistorynavigateevent-destination-entry", "dfnText": "destination entry", "refSections": [{"refs": [{"id": "ref-for-apphistorynavigateevent-destination-entry"}, {"id": "ref-for-apphistorynavigateevent-destination-entry\u2460"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['apphistorynavigateevent-navigation-action-promise'] = {"dfnID": "apphistorynavigateevent-navigation-action-promise", "url": "#apphistorynavigateevent-navigation-action-promise", "dfnText": "navigation action promise", "refSections": [{"refs": [{"id": "ref-for-apphistorynavigateevent-navigation-action-promise"}, {"id": "ref-for-apphistorynavigateevent-navigation-action-promise\u2460"}, {"id": "ref-for-apphistorynavigateevent-navigation-action-promise\u2461"}, {"id": "ref-for-apphistorynavigateevent-navigation-action-promise\u2462"}, {"id": "ref-for-apphistorynavigateevent-navigation-action-promise\u2463"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['dom-apphistorynavigateevent-respondwith'] = {"dfnID": "dom-apphistorynavigateevent-respondwith", "url": "#dom-apphistorynavigateevent-respondwith", "dfnText": "respondWith(newNavigationAction)", "refSections": [{"refs": [{"id": "ref-for-dom-apphistorynavigateevent-respondwith"}, {"id": "ref-for-dom-apphistorynavigateevent-respondwith\u2460"}, {"id": "ref-for-dom-apphistorynavigateevent-respondwith\u2461"}, {"id": "ref-for-dom-apphistorynavigateevent-respondwith\u2462"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['fire-a-navigate-event'] = {"dfnID": "fire-a-navigate-event", "url": "#fire-a-navigate-event", "dfnText": "fire a navigate event", "refSections": [{"refs": [{"id": "ref-for-fire-a-navigate-event"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-fire-a-navigate-event\u2460"}, {"id": "ref-for-fire-a-navigate-event\u2461"}, {"id": "ref-for-fire-a-navigate-event\u2462"}, {"id": "ref-for-fire-a-navigate-event\u2463"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['fire-a-navigate-event-navigationtype'] = {"dfnID": "fire-a-navigate-event-navigationtype", "url": "#fire-a-navigate-event-navigationtype", "dfnText": "navigationType", "refSections": [{"refs": [{"id": "ref-for-fire-a-navigate-event-navigationtype"}, {"id": "ref-for-fire-a-navigate-event-navigationtype\u2460"}, {"id": "ref-for-fire-a-navigate-event-navigationtype\u2461"}, {"id": "ref-for-fire-a-navigate-event-navigationtype\u2462"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['fire-a-navigate-event-issamedocument'] = {"dfnID": "fire-a-navigate-event-issamedocument", "url": "#fire-a-navigate-event-issamedocument", "dfnText": "isSameDocument", "refSections": [{"refs": [{"id": "ref-for-fire-a-navigate-event-issamedocument"}, {"id": "ref-for-fire-a-navigate-event-issamedocument\u2460"}, {"id": "ref-for-fire-a-navigate-event-issamedocument\u2461"}, {"id": "ref-for-fire-a-navigate-event-issamedocument\u2462"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['fire-a-navigate-event-userinvolvement'] = {"dfnID": "fire-a-navigate-event-userinvolvement", "url": "#fire-a-navigate-event-userinvolvement", "dfnText": "userInvolvement", "refSections": [{"refs": [{"id": "ref-for-fire-a-navigate-event-userinvolvement"}, {"id": "ref-for-fire-a-navigate-event-userinvolvement\u2460"}, {"id": "ref-for-fire-a-navigate-event-userinvolvement\u2461"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['fire-a-navigate-event-formdataentrylist'] = {"dfnID": "fire-a-navigate-event-formdataentrylist", "url": "#fire-a-navigate-event-formdataentrylist", "dfnText": "formDataEntryList", "refSections": [{"refs": [{"id": "ref-for-fire-a-navigate-event-formdataentrylist"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['fire-a-navigate-event-destinationurl'] = {"dfnID": "fire-a-navigate-event-destinationurl", "url": "#fire-a-navigate-event-destinationurl", "dfnText": "destinationURL", "refSections": [{"refs": [{"id": "ref-for-fire-a-navigate-event-destinationurl"}, {"id": "ref-for-fire-a-navigate-event-destinationurl\u2460"}, {"id": "ref-for-fire-a-navigate-event-destinationurl\u2461"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['fire-a-navigate-event-classichistoryapiserializeddata'] = {"dfnID": "fire-a-navigate-event-classichistoryapiserializeddata", "url": "#fire-a-navigate-event-classichistoryapiserializeddata", "dfnText": "classicHistoryAPISerializedData", "refSections": [{"refs": [{"id": "ref-for-fire-a-navigate-event-classichistoryapiserializeddata"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['fire-a-navigate-event-destinationentry'] = {"dfnID": "fire-a-navigate-event-destinationentry", "url": "#fire-a-navigate-event-destinationentry", "dfnText": "destinationEntry", "refSections": [{"refs": [{"id": "ref-for-fire-a-navigate-event-destinationentry"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['rewritable'] = {"dfnID": "rewritable", "url": "#rewritable", "dfnText": "rewritable", "refSections": [{"refs": [{"id": "ref-for-rewritable"}, {"id": "ref-for-rewritable\u2460"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['apphistoryentry'] = {"dfnID": "apphistoryentry", "url": "#apphistoryentry", "dfnText": "AppHistoryEntry", "refSections": [{"refs": [{"id": "ref-for-apphistoryentry"}, {"id": "ref-for-apphistoryentry\u2460"}, {"id": "ref-for-apphistoryentry\u2461"}, {"id": "ref-for-apphistoryentry\u2462"}, {"id": "ref-for-apphistoryentry\u2463"}, {"id": "ref-for-apphistoryentry\u2464"}, {"id": "ref-for-apphistoryentry\u2465"}, {"id": "ref-for-apphistoryentry\u2466"}, {"id": "ref-for-apphistoryentry\u2467"}, {"id": "ref-for-apphistoryentry\u2468"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-apphistoryentry\u2460\u24ea"}, {"id": "ref-for-apphistoryentry\u2460\u2460"}, {"id": "ref-for-apphistoryentry\u2460\u2461"}, {"id": "ref-for-apphistoryentry\u2460\u2462"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['apphistoryentry-session-history-entry'] = {"dfnID": "apphistoryentry-session-history-entry", "url": "#apphistoryentry-session-history-entry", "dfnText": "session history entry", "refSections": [{"refs": [{"id": "ref-for-apphistoryentry-session-history-entry"}, {"id": "ref-for-apphistoryentry-session-history-entry\u2460"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-apphistoryentry-session-history-entry\u2461"}, {"id": "ref-for-apphistoryentry-session-history-entry\u2462"}, {"id": "ref-for-apphistoryentry-session-history-entry\u2463"}, {"id": "ref-for-apphistoryentry-session-history-entry\u2464"}, {"id": "ref-for-apphistoryentry-session-history-entry\u2465"}, {"id": "ref-for-apphistoryentry-session-history-entry\u2466"}, {"id": "ref-for-apphistoryentry-session-history-entry\u2467"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['apphistoryentry-index'] = {"dfnID": "apphistoryentry-index", "url": "#apphistoryentry-index", "dfnText": "index", "refSections": [{"refs": [{"id": "ref-for-apphistoryentry-index"}, {"id": "ref-for-apphistoryentry-index\u2460"}, {"id": "ref-for-apphistoryentry-index\u2461"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-apphistoryentry-index\u2462"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['dom-apphistoryentry-key'] = {"dfnID": "dom-apphistoryentry-key", "url": "#dom-apphistoryentry-key", "dfnText": "key", "refSections": [{"refs": [{"id": "ref-for-dom-apphistoryentry-key"}, {"id": "ref-for-dom-apphistoryentry-key\u2460"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['dom-apphistoryentry-id'] = {"dfnID": "dom-apphistoryentry-id", "url": "#dom-apphistoryentry-id", "dfnText": "id", "refSections": [{"refs": [{"id": "ref-for-dom-apphistoryentry-id"}, {"id": "ref-for-dom-apphistoryentry-id\u2460"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['dom-apphistoryentry-url'] = {"dfnID": "dom-apphistoryentry-url", "url": "#dom-apphistoryentry-url", "dfnText": "url", "refSections": [{"refs": [{"id": "ref-for-dom-apphistoryentry-url"}, {"id": "ref-for-dom-apphistoryentry-url\u2460"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['dom-apphistoryentry-index'] = {"dfnID": "dom-apphistoryentry-index", "url": "#dom-apphistoryentry-index", "dfnText": "index", "refSections": [{"refs": [{"id": "ref-for-dom-apphistoryentry-index"}, {"id": "ref-for-dom-apphistoryentry-index\u2460"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['dom-apphistoryentry-samedocument'] = {"dfnID": "dom-apphistoryentry-samedocument", "url": "#dom-apphistoryentry-samedocument", "dfnText": "sameDocument", "refSections": [{"refs": [{"id": "ref-for-dom-apphistoryentry-samedocument"}, {"id": "ref-for-dom-apphistoryentry-samedocument\u2460"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['dom-apphistoryentry-getstate'] = {"dfnID": "dom-apphistoryentry-getstate", "url": "#dom-apphistoryentry-getstate", "dfnText": "getState()", "refSections": [{"refs": [{"id": "ref-for-dom-apphistoryentry-getstate"}, {"id": "ref-for-dom-apphistoryentry-getstate\u2460"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['navigate-entrylist'] = {"dfnID": "navigate-entrylist", "url": "#navigate-entrylist", "dfnText": "entryList", "refSections": [{"refs": [{"id": "ref-for-navigate-entrylist"}], "title": "4.1. Form submission patches"}], "external": false};
window.dfnpanelData['user-navigation-involvement'] = {"dfnID": "user-navigation-involvement", "url": "#user-navigation-involvement", "dfnText": "user navigation involvement", "refSections": [{"refs": [{"id": "ref-for-user-navigation-involvement"}], "title": "2. The navigate event"}], "external": false};
window.dfnpanelData['user-navigation-involvement-browser-ui'] = {"dfnID": "user-navigation-involvement-browser-ui", "url": "#user-navigation-involvement-browser-ui", "dfnText": "browser UI", "refSections": [{"refs": [{"id": "ref-for-user-navigation-involvement-browser-ui"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-user-navigation-involvement-browser-ui\u2460"}, {"id": "ref-for-user-navigation-involvement-browser-ui\u2461"}, {"id": "ref-for-user-navigation-involvement-browser-ui\u2462"}], "title": "4.2. Browser UI/user-initiated patches"}, {"refs": [{"id": "ref-for-user-navigation-involvement-browser-ui\u2463"}, {"id": "ref-for-user-navigation-involvement-browser-ui\u2464"}, {"id": "ref-for-user-navigation-involvement-browser-ui\u2465"}], "title": "4.3. Navigation algorithm updates"}], "external": false};
window.dfnpanelData['user-navigation-involvement-activation'] = {"dfnID": "user-navigation-involvement-activation", "url": "#user-navigation-involvement-activation", "dfnText": "activation", "refSections": [{"refs": [{"id": "ref-for-user-navigation-involvement-activation"}, {"id": "ref-for-user-navigation-involvement-activation\u2460"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": false};
window.dfnpanelData['user-navigation-involvement-none'] = {"dfnID": "user-navigation-involvement-none", "url": "#user-navigation-involvement-none", "dfnText": "none", "refSections": [{"refs": [{"id": "ref-for-user-navigation-involvement-none"}, {"id": "ref-for-user-navigation-involvement-none\u2460"}], "title": "2. The navigate event"}, {"refs": [{"id": "ref-for-user-navigation-involvement-none\u2461"}, {"id": "ref-for-user-navigation-involvement-none\u2462"}, {"id": "ref-for-user-navigation-involvement-none\u2463"}, {"id": "ref-for-user-navigation-involvement-none\u2464"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": false};
window.dfnpanelData['event-user-navigation-involvement'] = {"dfnID": "event-user-navigation-involvement", "url": "#event-user-navigation-involvement", "dfnText": "user navigation involvement", "refSections": [{"refs": [{"id": "ref-for-event-user-navigation-involvement"}, {"id": "ref-for-event-user-navigation-involvement\u2460"}, {"id": "ref-for-event-user-navigation-involvement\u2461"}, {"id": "ref-for-event-user-navigation-involvement\u2462"}, {"id": "ref-for-event-user-navigation-involvement\u2463"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": false};
window.dfnpanelData['navigate-userinvolvement'] = {"dfnID": "navigate-userinvolvement", "url": "#navigate-userinvolvement", "dfnText": "userInvolvement", "refSections": [{"refs": [{"id": "ref-for-navigate-userinvolvement"}, {"id": "ref-for-navigate-userinvolvement\u2460"}, {"id": "ref-for-navigate-userinvolvement\u2461"}, {"id": "ref-for-navigate-userinvolvement\u2462"}, {"id": "ref-for-navigate-userinvolvement\u2463"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": false};
window.dfnpanelData['traverse-the-history-by-a-delta-userinvolvement'] = {"dfnID": "traverse-the-history-by-a-delta-userinvolvement", "url": "#traverse-the-history-by-a-delta-userinvolvement", "dfnText": "userInvolvement", "refSections": [{"refs": [{"id": "ref-for-traverse-the-history-by-a-delta-userinvolvement"}], "title": "4.2. Browser UI/user-initiated patches"}], "external": false};
window.dfnpanelData['session-history-entry-origin'] = {"dfnID": "session-history-entry-origin", "url": "#session-history-entry-origin", "dfnText": "origin", "refSections": [{"refs": [{"id": "ref-for-session-history-entry-origin"}, {"id": "ref-for-session-history-entry-origin\u2460"}, {"id": "ref-for-session-history-entry-origin\u2461"}, {"id": "ref-for-session-history-entry-origin\u2462"}], "title": "1. The AppHistory class"}, {"refs": [{"id": "ref-for-session-history-entry-origin\u2463"}, {"id": "ref-for-session-history-entry-origin\u2464"}], "title": "5.2. Carrying over the app history key"}, {"refs": [{"id": "ref-for-session-history-entry-origin\u2465"}, {"id": "ref-for-session-history-entry-origin\u2466"}, {"id": "ref-for-session-history-entry-origin\u2467"}, {"id": "ref-for-session-history-entry-origin\u2468"}, {"id": "ref-for-session-history-entry-origin\u2460\u24ea"}], "title": "5.3. Tracking the origin member"}], "external": false};
window.dfnpanelData['session-history-entry-app-history-key'] = {"dfnID": "session-history-entry-app-history-key", "url": "#session-history-entry-app-history-key", "dfnText": "app history key", "refSections": [{"refs": [{"id": "ref-for-session-history-entry-app-history-key"}], "title": "3. App history entries"}, {"refs": [{"id": "ref-for-session-history-entry-app-history-key\u2460"}, {"id": "ref-for-session-history-entry-app-history-key\u2461"}], "title": "5.2. Carrying over the app history key"}], "external": false};
window.dfnpanelData['session-history-entry-app-history-id'] = {"dfnID": "session-history-entry-app-history-id", "url": "#session-history-entry-app-history-id", "dfnText": "app history id", "refSections": [{"refs": [{"id": "ref-for-session-history-entry-app-history-id"}], "title": "3. App history entries"}], "external": false};
window.dfnpanelData['session-history-entry-app-history-state'] = {"dfnID": "session-history-entry-app-history-state", "url": "#session-history-entry-app-history-state", "dfnText": "app history state", "refSections": [{"refs": [{"id": "ref-for-session-history-entry-app-history-state"}, {"id": "ref-for-session-history-entry-app-history-state\u2460"}], "title": "3. App history entries"}], "external": false};
</script>
<script>/* Boilerplate: script-dom-helper */
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
/*
Color-choosing design:

Colors are ordered by goodness.
Each color has a usage count (initially zero).
Each variable has a last-used color.

* If the var has a last-used color, and that color's usage is 0,
    return that color.
* Otherwise, return the lowest-indexed color with the lowest usage.
    Increment the color's usage and set it as the last-used color
    for that var.
* On unclicking, decrement usage of the color.
*/
"use strict";
{
    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    const indexCounts = new Map();
    const indexNames = new Map();
    function highlightSameAlgoVars(v) {
        // Find the algorithm container.
        let algoContainer = null;
        let searchEl = v;
        while(algoContainer == null && searchEl != document.body) {
            searchEl = searchEl.parentNode;
            if(searchEl.hasAttribute("data-algorithm")) {
                algoContainer = searchEl;
            }
        }

        // Not highlighting document-global vars,
        // too likely to be unrelated.
        if(algoContainer == null) return;

        const algoName = algoContainer.getAttribute("data-algorithm");
        const varName = getVarName(v);
        const addClass = !v.classList.contains("selected");
        let highlightClass = null;
        if(addClass) {
            const index = chooseHighlightIndex(algoName, varName);
            indexCounts.get(algoName)[index] += 1;
            indexNames.set(algoName+"///"+varName, index);
            highlightClass = nameFromIndex(index);
        } else {
            const index = previousHighlightIndex(algoName, varName);
            indexCounts.get(algoName)[index] -= 1;
            highlightClass = nameFromIndex(index);
        }

        // Find all same-name vars, and toggle their class appropriately.
        for(const el of algoContainer.querySelectorAll("var")) {
            if(getVarName(el) == varName) {
                el.classList.toggle("selected", addClass);
                el.classList.toggle(highlightClass, addClass);
            }
        }
    }
    function getVarName(el) {
        return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
    }
    function chooseHighlightIndex(algoName, varName) {
        let indexes = null;
        if(indexCounts.has(algoName)) {
            indexes = indexCounts.get(algoName);
        } else {
            // 7 classes right now
            indexes = [0,0,0,0,0,0,0];
            indexCounts.set(algoName, indexes);
        }

        // If the element was recently unclicked,
        // *and* that color is still unclaimed,
        // give it back the same color.
        const lastIndex = previousHighlightIndex(algoName, varName);
        if(indexes[lastIndex] === 0) return lastIndex;

        // Find the earliest index with the lowest count.
        const minCount = Math.min.apply(null, indexes);
        let index = null;
        for(var i = 0; i < indexes.length; i++) {
            if(indexes[i] == minCount) {
                return i;
            }
        }
    }
    function previousHighlightIndex(algoName, varName) {
        return indexNames.get(algoName+"///"+varName);
    }
    function nameFromIndex(index) {
        return "selected" + index;
    }
}
</script>