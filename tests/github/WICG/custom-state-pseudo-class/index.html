<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Custom State Pseudo Class</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2016/cg-draft" rel="stylesheet">
  <link href="https://wicg.github.io/custom-state-pseudo-class/" rel="canonical">
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #707070;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #bbb;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Custom State Pseudo Class</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Draft Community Group Report, <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/custom-state-pseudo-class/">https://wicg.github.io/custom-state-pseudo-class/</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:tkent@google.com">Kent Tamura</a> (<a class="p-org org" href="https://www.google.com/">Google</a>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:rakina@google.com">Rakina Zata Amni</a> (<a class="p-org org" href="https://www.google.com/">Google</a>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://domenic.me/">Domenic Denicola</a> (<a class="p-org org" href="https://www.google.com/">Google</a>) <a class="u-email email" href="mailto:d@domenic.me">d@domenic.me</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 1970 the Contributors to the Custom State Pseudo Class Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This specification defines a way to expose custom element’s internal

    states, and defines the <a class="css" data-link-type="maybe" href="#selectordef-state" id="ref-for-selectordef-state">:state()</a> <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class">pseudo-class</a> matching to a custom
    element exposing a state. This specification is intended to be merged to <a data-link-type="biblio" href="#biblio-dom">[DOM]</a>, <a data-link-type="biblio" href="#biblio-html">[HTML]</a>, and <a data-link-type="biblio" href="#biblio-selectors-4">[selectors-4]</a> in the future.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#motivation"><span class="secno">1.1</span> <span class="content">Motivation</span></a>
      <li><a href="#solution"><span class="secno">1.2</span> <span class="content">Solution</span></a>
     </ol>
    <li>
     <a href="#exposing"><span class="secno">2</span> <span class="content">Exposing custom element states</span></a>
     <ol class="toc">
      <li><a href="#sec-non-attribute-domtokenlist"><span class="secno">2.1</span> <span class="content">Non-attribute <code>DOMTokenList</code></span></a>
     </ol>
    <li><a href="#selecting"><span class="secno">3</span> <span class="content">Selecting a custom element with a speicfic state</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="motivation"><span class="secno">1.1. </span><span class="content">Motivation</span><a class="self-link" href="#motivation"></a></h3>
   <p>Build-in elements provided by user agents have certain “states” that can change
over time depending on user interaction and other factors, and are exposed to
web authors through pseudo classes. For example, some form controls have the
“invalid” state, which is exposed through the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-4/#invalid-pseudo" id="ref-for-invalid-pseudo">:invalid</a> <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class①">pseudo-class</a>.</p>
   <p>Like built-in elements, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element" id="ref-for-custom-element">custom elements</a> can have various states to be in too,
and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element" id="ref-for-custom-element①">custom element</a> authors want to expose these states in a similar fashion
as the built-in elements.</p>
   <h3 class="heading settled" data-level="1.2" id="solution"><span class="secno">1.2. </span><span class="content">Solution</span><a class="self-link" href="#solution"></a></h3>
   <p>This specification defines an API to inform <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element" id="ref-for-custom-element②">custom element</a>'s states to the
user agent, and a <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class②">pseudo-class</a> to select elements with specific states.
The former is the <code class="idl"><a data-link-type="idl" href="#dom-elementinternals-states" id="ref-for-dom-elementinternals-states">states</a></code> IDL attribute of <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/custom-elements.html#elementinternals" id="ref-for-elementinternals">ElementInternals</a></code>, and the latter is the <a class="css" data-link-type="maybe" href="#selectordef-state" id="ref-for-selectordef-state①">:state()</a> <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class③">pseudo-class</a>.</p>
   <div class="example" id="ex-intro">
    <a class="self-link" href="#ex-intro"></a> 
    <p>Assume that <code>LabeledCheckbox</code> doesn’t expose its "checked" state
via a content attribute.</p>
<pre class="lang-html highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>body</c-><c- p>></c->
<c- c>&lt;!-- Basic usage: --></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
<c- a>class</c-> LabeledCheckbox <c- k>extends</c-> HTMLElement <c- p>{</c->
  constructor<c- p>()</c-> <c- p>{</c->
    <c- k>super</c-><c- p>();</c->
    <c- k>this</c-><c- p>.</c->_internals <c- o>=</c-> <c- k>this</c-><c- p>.</c->attachInternals<c- p>();</c->
    <c- k>this</c-><c- p>.</c->addEventListener<c- p>(</c-><c- t>'click'</c-><c- p>,</c-> <c- k>this</c-><c- p>.</c->_onClick<c- p>.</c->bind<c- p>(</c-><c- k>this</c-><c- p>));</c->

    <c- a>const</c-> shadowRoot <c- o>=</c-> <c- k>this</c-><c- p>.</c->attachShadow<c- p>({</c->mode<c- o>:</c-> <c- t>'closed'</c-><c- p>});</c->
    shadowRoot<c- p>.</c->innerHTML <c- o>=</c->
      <c- sb>`&lt;style></c->
<c- sb>       :host::before {</c->
<c- sb>         content: '[ ]';</c->
<c- sb>         white-space: pre;</c->
<c- sb>         font-family: monospace;</c->
<c- sb>       }</c->
<c- sb>       :host(:state(checked))::before { content: '[x]' }</c->
<c- sb>       &lt;/style></c->
<c- sb>       &lt;slot>Label&lt;/slot>`</c-><c- p>;</c->
  <c- p>}</c->

  get checked<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- k>this</c-><c- p>.</c->_internals<c- p>.</c->states<c- p>.</c->contains<c- p>(</c-><c- t>'checked'</c-><c- p>);</c-> <c- p>}</c->

  set checked<c- p>(</c->flag<c- p>)</c-> <c- p>{</c->
    <c- k>this</c-><c- p>.</c->_internals<c- p>.</c->states<c- p>.</c->toggle<c- p>(</c-><c- t>'checked'</c-><c- p>,</c-> <c- o>!!</c->flag<c- p>);</c->
  <c- p>}</c->

  _onClick<c- p>(</c->event<c- p>)</c-> <c- p>{</c->
    <c- k>this</c-><c- p>.</c->checked <c- o>=</c-> <c- o>!</c-><c- k>this</c-><c- p>.</c->checked<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->

customElements<c- p>.</c->define<c- p>(</c-><c- t>'labeled-checkbox'</c-><c- p>,</c-> LabeledCheckbox<c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->

<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- f>labeled-checkbox</c-> <c- p>{</c-> <c- k>border</c-><c- p>:</c-> <c- kc>dashed</c-> <c- kc>red</c-><c- p>;</c-> <c- p>}</c->
<c- f>labeled-checkbox</c-><c- p>:</c-><c- nd>state</c-><c- o>(</c-><c- f>checked</c-><c- o>)</c-> <c- p>{</c-> <c- k>border</c-><c- p>:</c-> <c- kc>solid</c-><c- p>;</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>labeled-checkbox</c-><c- p>></c->You need to check this<c- p>&lt;/</c-><c- f>labeled-checkbox</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
<c- a>class</c-> QuestionBox <c- k>extends</c-> HTMLElement <c- p>{</c->
  constructor<c- p>()</c-> <c- p>{</c->
    <c- k>super</c-><c- p>();</c->
    <c- a>const</c-> shadowRoot <c- o>=</c-> <c- k>this</c-><c- p>.</c->attachShadow<c- p>({</c->mode<c- o>:</c-> <c- t>'closed'</c-><c- p>});</c->
    shadowRoot<c- p>.</c->innerHTML <c- o>=</c->
      <c- sb>`&lt;div>&lt;slot>Question&lt;/slot>&lt;/div></c->
<c- sb>       &lt;labeled-checkbox part='checkbox'>Yes&lt;/labeled-checkbox>`</c-><c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
customElements<c- p>.</c->define<c- p>(</c-><c- t>'question-box'</c-><c- p>,</c-> QuestionBox<c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->

<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- f>question-box</c-><c- p>::</c-><c- nd>part</c-><c- o>(</c-><c- f>checkbox</c-><c- o>)</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> <c- kc>red</c-><c- p>;</c-> <c- p>}</c->
<c- f>question-box</c-><c- p>::</c-><c- nd>part</c-><c- o>(</c-><c- f>checkbox</c-><c- o>)</c-><c- p>:</c-><c- nd>state</c-><c- o>(</c-><c- f>checked</c-><c- o>)</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> <c- kc>green</c-><c- p>;</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>question-box</c-><c- p>></c->Continue?<c- p>&lt;/</c-><c- f>question-box</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
</pre>
   </div>
   <h2 class="heading settled" data-level="2" id="exposing"><span class="secno">2. </span><span class="content">Exposing custom element states</span><a class="self-link" href="#exposing"></a></h2>
   <p>Each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/custom-elements.html#autonomous-custom-element" id="ref-for-autonomous-custom-element">autonomous custom element</a> has <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="states-token-list">states token list</dfn>, a <a data-link-type="dfn" href="#non-attribute-domtokenlist" id="ref-for-non-attribute-domtokenlist">non-attribute <code>DOMTokenList</code></a> object associated with the custom
element, and initially associated with an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">set</a> of strings.</p>
   <p class="issue" id="issue-172e10b8"><a class="self-link" href="#issue-172e10b8"></a> Support customized built-in elements. <a href="https://github.com/whatwg/html/issues/5166">&lt;https://github.com/whatwg/html/issues/5166></a></p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/custom-elements.html#elementinternals" id="ref-for-elementinternals①"><c- g>ElementInternals</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#PutForwards" id="ref-for-PutForwards"><c- g>PutForwards</c-></a>=<a class="idl-code" data-link-type="attribute" href="https://dom.spec.whatwg.org/#dom-domtokenlist-value" id="ref-for-dom-domtokenlist-value"><c- n>value</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist"><c- n>DOMTokenList</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ElementInternals" data-dfn-type="attribute" data-export data-readonly data-type="DOMTokenList" id="dom-elementinternals-states"><code><c- g>states</c-></code></dfn>;
};
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-elementinternals-states" id="ref-for-dom-elementinternals-states①">states</a></code> IDL attribute returns the <a data-link-type="dfn" href="#states-token-list" id="ref-for-states-token-list">states token list</a> of
this’s <a href="http://html.spec.whatwg.org/C/#internals-target">target element</a>.</p>
   <div class="example" id="ex-non-boolean-state">
    <a class="self-link" href="#ex-non-boolean-state"></a> <a data-link-type="dfn" href="#states-token-list" id="ref-for-states-token-list①">States token list</a> can expose boolean states represented by
existence/non-existence of string tokens. If an author wants to expose a state
which can have three values, it can be converted to three exclusive boolean
states. For example, a state called <code>readyState</code> with <code>"loading"</code>, <code>"interactive"</code>, and <code>"complete"</code> values can be mapped to three exclusive boolean states, <code>"loading"</code>, <code>"interactive"</code>, and <code>"complete"</code>. 
<pre class="lang-js highlight"><c- c1>// Change the readyState from anything to "complete".</c->
<c- k>this</c-><c- p>.</c->_readyState <c- o>=</c-> <c- u>"complete"</c-><c- p>;</c->
<c- k>this</c-><c- p>.</c->_internals<c- p>.</c-><code class="idl"><a data-link-type="idl" href="#dom-elementinternals-states" id="ref-for-dom-elementinternals-states②">states</a></code><c- p>.</c-><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-domtokenlist-remove" id="ref-for-dom-domtokenlist-remove">remove</a></code><c- p>(</c-><c- u>"loading"</c-><c- p>,</c-> <c- u>"interactive"</c-><c- p>);</c->
<c- k>this</c-><c- p>.</c->_internals<c- p>.</c-><code class="idl"><a data-link-type="idl" href="#dom-elementinternals-states" id="ref-for-dom-elementinternals-states③">states</a></code><c- p>.</c-><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-domtokenlist-add" id="ref-for-dom-domtokenlist-add">add</a></code><c- p>(</c-><c- u>"complete"</c-><c- p>);</c->
<c- c1>// If this has no states other than _readyState, the following also works in</c->
<c- c1>// addition to remove() and add().</c->
<c- c1>// this._internals.</c-><code class="idl"><a data-link-type="idl" href="#dom-elementinternals-states" id="ref-for-dom-elementinternals-states④"><c- c1>states</c-></a></code><c- c1> = "complete";</c->
</pre>
    <p class="issue" id="issue-8463f5b0"><a class="self-link" href="#issue-8463f5b0"></a> Support non-boolean states. <a href="https://github.com/WICG/custom-state-pseudo-class/issues/4">&lt;https://github.com/WICG/custom-state-pseudo-class/issues/4></a></p>
   </div>
   <h3 class="heading settled" data-level="2.1" id="sec-non-attribute-domtokenlist"><span class="secno">2.1. </span><span class="content">Non-attribute <code>DOMTokenList</code></span><a class="self-link" href="#sec-non-attribute-domtokenlist"></a></h3>
   <p>This section defines a variant of <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist①">DOMTokenList</a></code>, called <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="non-attribute-domtokenlist">non-attribute <code>DOMTokenList</code></dfn>. It is defined by <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> as
if following edits were applied to the definition of <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist②">DOMTokenList</a></code>.</p>
   <ul>
    <li data-md>
     <p>Replace this paragraph:</p>
     <blockquote cite="https://dom.spec.whatwg.org/#domtokenlist">
      <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist③">DOMTokenList</a></code> object also has an associated element and an
attribute’s local name.</p>
     </blockquote>
     <p>with:</p>
     <blockquote>
      <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist④">DOMTokenList</a></code> object also has an associated element and an optional
attribute’s local name. If the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist⑤">DOMTokenList</a></code> object has an attribute’s
local name, then it is known as an <strong>attribute-associated <code>DOMTokenList</code></strong>; otherwise
it is a <a data-link-type="dfn" href="#non-attribute-domtokenlist" id="ref-for-non-attribute-domtokenlist①">non-attribute <code>DOMTokenList</code></a>.</p>
     </blockquote>
    <li data-md>
     <p>Replace this paragraph:</p>
     <blockquote cite="https://dom.spec.whatwg.org/#domtokenlist">
      <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist⑥">DOMTokenList</a></code> object’s <a href="https://dom.spec.whatwg.org/#concept-dtl-update">update steps</a> are:</p>
      <ol>
       <li>If the associated element does not have an associated attribute and
 token set is empty, then return.
       <li>Set an attribute value for the associated element using associated
 attribute’s local name and the result of running the ordered set serializer
 for token set.
      </ol>
     </blockquote>
     <p>with:</p>
     <blockquote>
      <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist⑦">DOMTokenList</a></code> object’s update steps are:</p>
      <ol>
       <li>If the object has no attribute’s local name, then return.
       <li>If the associated element does not have an associated attribute and
 token set is empty, then return.
       <li>Set an attribute value for the associated element using associated
 attribute’s local name and the result of running the ordered set serializer
 for token set.
      </ol>
     </blockquote>
    <li data-md>
     <p>Replace this paragraph:</p>
     <blockquote cite="https://dom.spec.whatwg.org/#domtokenlist">
      <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist⑧">DOMTokenList</a></code> object’s <a href="https://dom.spec.whatwg.org/#concept-dtl-serialize">serialize steps</a> are to return the result of running get an attribute value given the
associated element and the associated attribute’s local name.</p>
     </blockquote>
     <p>with:</p>
     <blockquote>
      <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist⑨">DOMTokenList</a></code> object’s serialize steps
are to return the result of running get an attribute value given the
associated element and the associated attribute’s local name if the object
has attribute’s local name. Otherwise, return the result of running the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-ordered-set-serializer" id="ref-for-concept-ordered-set-serializer">ordered set serializer</a> for <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-dtl-tokens" id="ref-for-concept-dtl-tokens">token set</a>.</p>
     </blockquote>
    <li data-md>
     <p>Replace this paragraph:</p>
     <blockquote cite="https://dom.spec.whatwg.org/#domtokenlist">
      <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist①⓪">DOMTokenList</a></code> object has these attribute change steps for its
associated element:</p>
      <ol>
       <li>If localName is associated attribute’s local name, namespace is null,
 and value is null, then empty token set.
       <li>Otherwise, if localName is associated attribute’s local name, namespace
 is null, then set token set to value, parsed.
      </ol>
     </blockquote>
     <p>with:</p>
     <blockquote>
      <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist①①">DOMTokenList</a></code> object has these attribute change steps for its
associated element:</p>
      <ol>
       <li>If the object has no attribute’s local name, then return.
       <li>If localName is associated attribute’s local name, namespace is null,
 and value is null, then empty token set.
       <li>Otherwise, if localName is associated attribute’s local name, namespace
 is null, then set token set to value, parsed.
      </ol>
     </blockquote>
    <li data-md>
     <p>Replace this paragraph:</p>
     <blockquote cite="https://dom.spec.whatwg.org/#domtokenlist">
      <p>Setting the value attribute must set an attribute value for the
associated element using associated attribute’s local name and the given
value.</p>
     </blockquote>
     <p>with:</p>
     <blockquote>
      <p>Setting the value attribute must set an attribute value for the
associated element using associated attribute’s local name and the given
value if this has attribute’s local name. Otherwise, it must set <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-dtl-tokens" id="ref-for-concept-dtl-tokens①">token set</a> to the given value, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-ordered-set-parser" id="ref-for-concept-ordered-set-parser">parsed</a>. </p>
     </blockquote>
   </ul>
   <h2 class="heading settled" data-level="3" id="selecting"><span class="secno">3. </span><span class="content">Selecting a custom element with a speicfic state</span><a class="self-link" href="#selecting"></a></h2>
   <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-state">:state()</dfn> <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class④">pseudo-class</a> applies while an element has a
certain state. "State" is a per-element information which can change over time
depending on user interaction and other extrinsic factors.
The <a class="css" data-link-type="maybe" href="#selectordef-state" id="ref-for-selectordef-state②">:state()</a> <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class⑤">pseudo-classs</a> must have one <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#typedef-ident" id="ref-for-typedef-ident">&lt;ident></a> argument, otherwise
the selector is invalid.</p>
   <p>The <a class="css" data-link-type="maybe" href="#selectordef-state" id="ref-for-selectordef-state③">:state()</a> <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class⑥">pseudo-class</a> must match any element that is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/custom-elements.html#autonomous-custom-element" id="ref-for-autonomous-custom-element①">autonomous custom element</a> and whose <a data-link-type="dfn" href="#states-token-list" id="ref-for-states-token-list②">states token list</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> the specified <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-4/#typedef-ident" id="ref-for-typedef-ident①">&lt;ident></a>.</p>
   <div class="example" id="ex-selector-logic"><a class="self-link" href="#ex-selector-logic"></a> <a class="css" data-link-type="maybe" href="#selectordef-state" id="ref-for-selectordef-state④">:state()</a> takes just one argument, and an element can expose multiple states.
Authors can use <a class="css" data-link-type="maybe" href="#selectordef-state" id="ref-for-selectordef-state⑤">:state()</a> with logical <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class⑦">pseudo-classes</a> like <span class="css">x-foo:is(:state(state1), :state(state2))</span>, <span class="css">x-foo:not(:state(state2))</span>,
and <span class="css">x-foo:state(state1):state(state2)</span>. </div>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note. </p>
   <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
   <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
  </div>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#non-attribute-domtokenlist">non-attribute DOMTokenList</a><span>, in §2.1</span>
   <li><a href="#selectordef-state">:state()</a><span>, in §3</span>
   <li><a href="#dom-elementinternals-states">states</a><span>, in §2</span>
   <li><a href="#states-token-list">states token list</a><span>, in §2</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-typedef-ident">
   <a href="https://drafts.csswg.org/css-values-4/#typedef-ident">https://drafts.csswg.org/css-values-4/#typedef-ident</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-typedef-ident">3. Selecting a custom element with a speicfic state</a> <a href="#ref-for-typedef-ident①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-domtokenlist">
   <a href="https://dom.spec.whatwg.org/#domtokenlist">https://dom.spec.whatwg.org/#domtokenlist</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-domtokenlist">2. Exposing custom element states</a>
    <li><a href="#ref-for-domtokenlist①">2.1. Non-attribute DOMTokenList</a> <a href="#ref-for-domtokenlist②">(2)</a> <a href="#ref-for-domtokenlist③">(3)</a> <a href="#ref-for-domtokenlist④">(4)</a> <a href="#ref-for-domtokenlist⑤">(5)</a> <a href="#ref-for-domtokenlist⑥">(6)</a> <a href="#ref-for-domtokenlist⑦">(7)</a> <a href="#ref-for-domtokenlist⑧">(8)</a> <a href="#ref-for-domtokenlist⑨">(9)</a> <a href="#ref-for-domtokenlist①⓪">(10)</a> <a href="#ref-for-domtokenlist①①">(11)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-domtokenlist-add">
   <a href="https://dom.spec.whatwg.org/#dom-domtokenlist-add">https://dom.spec.whatwg.org/#dom-domtokenlist-add</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domtokenlist-add">2. Exposing custom element states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-ordered-set-parser">
   <a href="https://dom.spec.whatwg.org/#concept-ordered-set-parser">https://dom.spec.whatwg.org/#concept-ordered-set-parser</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-ordered-set-parser">2.1. Non-attribute DOMTokenList</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-ordered-set-serializer">
   <a href="https://dom.spec.whatwg.org/#concept-ordered-set-serializer">https://dom.spec.whatwg.org/#concept-ordered-set-serializer</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-ordered-set-serializer">2.1. Non-attribute DOMTokenList</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-domtokenlist-remove">
   <a href="https://dom.spec.whatwg.org/#dom-domtokenlist-remove">https://dom.spec.whatwg.org/#dom-domtokenlist-remove</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domtokenlist-remove">2. Exposing custom element states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-dtl-tokens">
   <a href="https://dom.spec.whatwg.org/#concept-dtl-tokens">https://dom.spec.whatwg.org/#concept-dtl-tokens</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-dtl-tokens">2.1. Non-attribute DOMTokenList</a> <a href="#ref-for-concept-dtl-tokens①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-domtokenlist-value">
   <a href="https://dom.spec.whatwg.org/#dom-domtokenlist-value">https://dom.spec.whatwg.org/#dom-domtokenlist-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domtokenlist-value">2. Exposing custom element states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-elementinternals">
   <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#elementinternals">https://html.spec.whatwg.org/multipage/custom-elements.html#elementinternals</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-elementinternals">1.2. Solution</a>
    <li><a href="#ref-for-elementinternals①">2. Exposing custom element states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-autonomous-custom-element">
   <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#autonomous-custom-element">https://html.spec.whatwg.org/multipage/custom-elements.html#autonomous-custom-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-autonomous-custom-element">2. Exposing custom element states</a>
    <li><a href="#ref-for-autonomous-custom-element①">3. Selecting a custom element with a speicfic state</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-custom-element">
   <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element">https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-custom-element">1.1. Motivation</a> <a href="#ref-for-custom-element①">(2)</a>
    <li><a href="#ref-for-custom-element②">1.2. Solution</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-contain">
   <a href="https://infra.spec.whatwg.org/#list-contain">https://infra.spec.whatwg.org/#list-contain</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-contain">3. Selecting a custom element with a speicfic state</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ordered-set">
   <a href="https://infra.spec.whatwg.org/#ordered-set">https://infra.spec.whatwg.org/#ordered-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ordered-set">2. Exposing custom element states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-invalid-pseudo">
   <a href="https://drafts.csswg.org/selectors-4/#invalid-pseudo">https://drafts.csswg.org/selectors-4/#invalid-pseudo</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalid-pseudo">1.1. Motivation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-pseudo-class">
   <a href="https://drafts.csswg.org/selectors-4/#pseudo-class">https://drafts.csswg.org/selectors-4/#pseudo-class</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pseudo-class">Unnumbered Section</a>
    <li><a href="#ref-for-pseudo-class①">1.1. Motivation</a>
    <li><a href="#ref-for-pseudo-class②">1.2. Solution</a> <a href="#ref-for-pseudo-class③">(2)</a>
    <li><a href="#ref-for-pseudo-class④">3. Selecting a custom element with a speicfic state</a> <a href="#ref-for-pseudo-class⑤">(2)</a> <a href="#ref-for-pseudo-class⑥">(3)</a> <a href="#ref-for-pseudo-class⑦">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-PutForwards">
   <a href="https://heycam.github.io/webidl/#PutForwards">https://heycam.github.io/webidl/#PutForwards</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-PutForwards">2. Exposing custom element states</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-SameObject">
   <a href="https://heycam.github.io/webidl/#SameObject">https://heycam.github.io/webidl/#SameObject</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-SameObject">2. Exposing custom element states</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[css-values-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-typedef-ident">&lt;ident></span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-domtokenlist">DOMTokenList</span>
     <li><span class="dfn-paneled" id="term-for-dom-domtokenlist-add">add()</span>
     <li><span class="dfn-paneled" id="term-for-concept-ordered-set-parser">ordered set parser</span>
     <li><span class="dfn-paneled" id="term-for-concept-ordered-set-serializer">ordered set serializer</span>
     <li><span class="dfn-paneled" id="term-for-dom-domtokenlist-remove">remove()</span>
     <li><span class="dfn-paneled" id="term-for-concept-dtl-tokens">token set</span>
     <li><span class="dfn-paneled" id="term-for-dom-domtokenlist-value">value</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-elementinternals">ElementInternals</span>
     <li><span class="dfn-paneled" id="term-for-autonomous-custom-element">autonomous custom element</span>
     <li><span class="dfn-paneled" id="term-for-custom-element">custom element</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-list-contain">contain</span>
     <li><span class="dfn-paneled" id="term-for-ordered-set">set</span>
    </ul>
   <li>
    <a data-link-type="biblio">[selectors-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-invalid-pseudo">:invalid</span>
     <li><span class="dfn-paneled" id="term-for-pseudo-class">pseudo-class</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-PutForwards">PutForwards</span>
     <li><span class="dfn-paneled" id="term-for-SameObject">SameObject</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-4/">CSS Values and Units Module Level 4</a>. URL: <a href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra Standard</a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-selectors-4">[SELECTORS-4]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/selectors/">Selectors Level 4</a>. URL: <a href="https://drafts.csswg.org/selectors/">https://drafts.csswg.org/selectors/</a>
   <dt id="biblio-webidl">[WebIDL]
   <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/custom-elements.html#elementinternals"><c- g>ElementInternals</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject"><c- g>SameObject</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#PutForwards"><c- g>PutForwards</c-></a>=<a class="idl-code" data-link-type="attribute" href="https://dom.spec.whatwg.org/#dom-domtokenlist-value"><c- n>value</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#domtokenlist"><c- n>DOMTokenList</c-></a> <a data-readonly data-type="DOMTokenList" href="#dom-elementinternals-states"><code><c- g>states</c-></code></a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Support customized built-in elements. <a href="https://github.com/whatwg/html/issues/5166">&lt;https://github.com/whatwg/html/issues/5166></a><a href="#issue-172e10b8"> ↵ </a></div>
   <div class="issue"> Support non-boolean states. <a href="https://github.com/WICG/custom-state-pseudo-class/issues/4">&lt;https://github.com/WICG/custom-state-pseudo-class/issues/4></a><a href="#issue-8463f5b0"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="states-token-list">
   <b><a href="#states-token-list">#states-token-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-states-token-list">2. Exposing custom element states</a> <a href="#ref-for-states-token-list①">(2)</a>
    <li><a href="#ref-for-states-token-list②">3. Selecting a custom element with a speicfic state</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-elementinternals-states">
   <b><a href="#dom-elementinternals-states">#dom-elementinternals-states</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-elementinternals-states">1.2. Solution</a>
    <li><a href="#ref-for-dom-elementinternals-states①">2. Exposing custom element states</a> <a href="#ref-for-dom-elementinternals-states②">(2)</a> <a href="#ref-for-dom-elementinternals-states③">(3)</a> <a href="#ref-for-dom-elementinternals-states④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="non-attribute-domtokenlist">
   <b><a href="#non-attribute-domtokenlist">#non-attribute-domtokenlist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-non-attribute-domtokenlist">2. Exposing custom element states</a>
    <li><a href="#ref-for-non-attribute-domtokenlist①">2.1. Non-attribute DOMTokenList</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="selectordef-state">
   <b><a href="#selectordef-state">#selectordef-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-selectordef-state①">1.2. Solution</a>
    <li><a href="#ref-for-selectordef-state②">3. Selecting a custom element with a speicfic state</a> <a href="#ref-for-selectordef-state③">(2)</a> <a href="#ref-for-selectordef-state④">(3)</a> <a href="#ref-for-selectordef-state⑤">(4)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>