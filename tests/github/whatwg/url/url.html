<!doctype html><html lang="en">
 <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="#3c790a" name="theme-color">
  <title>[TITLE]</title>
  <link href="https://resources.whatwg.org/standard.css" rel="stylesheet">
  <link href="https://resources.whatwg.org/bikeshed.css" rel="stylesheet">
  <link href="" rel="icon">
  <meta content="Bikeshed version 67155cabad72a8ab669a7d4421c90e2999a29b68" name="generator">
  <meta content="67155cabad72a8ab669a7d4421c90e2999a29b68" name="document-revision">
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
.highlight .c { color: #708090 } /* Comment */
.highlight .k { color: #990055 } /* Keyword */
.highlight .l { color: #000000 } /* Literal */
.highlight .n { color: #0077aa } /* Name */
.highlight .o { color: #999999 } /* Operator */
.highlight .p { color: #999999 } /* Punctuation */
.highlight .cm { color: #708090 } /* Comment.Multiline */
.highlight .cp { color: #708090 } /* Comment.Preproc */
.highlight .c1 { color: #708090 } /* Comment.Single */
.highlight .cs { color: #708090 } /* Comment.Special */
.highlight .kc { color: #990055 } /* Keyword.Constant */
.highlight .kd { color: #990055 } /* Keyword.Declaration */
.highlight .kn { color: #990055 } /* Keyword.Namespace */
.highlight .kp { color: #990055 } /* Keyword.Pseudo */
.highlight .kr { color: #990055 } /* Keyword.Reserved */
.highlight .kt { color: #990055 } /* Keyword.Type */
.highlight .ld { color: #000000 } /* Literal.Date */
.highlight .m { color: #000000 } /* Literal.Number */
.highlight .s { color: #a67f59 } /* Literal.String */
.highlight .na { color: #0077aa } /* Name.Attribute */
.highlight .nc { color: #0077aa } /* Name.Class */
.highlight .no { color: #0077aa } /* Name.Constant */
.highlight .nd { color: #0077aa } /* Name.Decorator */
.highlight .ni { color: #0077aa } /* Name.Entity */
.highlight .ne { color: #0077aa } /* Name.Exception */
.highlight .nf { color: #0077aa } /* Name.Function */
.highlight .nl { color: #0077aa } /* Name.Label */
.highlight .nn { color: #0077aa } /* Name.Namespace */
.highlight .py { color: #0077aa } /* Name.Property */
.highlight .nt { color: #669900 } /* Name.Tag */
.highlight .nv { color: #222222 } /* Name.Variable */
.highlight .ow { color: #999999 } /* Operator.Word */
.highlight .mb { color: #000000 } /* Literal.Number.Bin */
.highlight .mf { color: #000000 } /* Literal.Number.Float */
.highlight .mh { color: #000000 } /* Literal.Number.Hex */
.highlight .mi { color: #000000 } /* Literal.Number.Integer */
.highlight .mo { color: #000000 } /* Literal.Number.Oct */
.highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
.highlight .sc { color: #a67f59 } /* Literal.String.Char */
.highlight .sd { color: #a67f59 } /* Literal.String.Doc */
.highlight .s2 { color: #a67f59 } /* Literal.String.Double */
.highlight .se { color: #a67f59 } /* Literal.String.Escape */
.highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
.highlight .si { color: #a67f59 } /* Literal.String.Interpol */
.highlight .sx { color: #a67f59 } /* Literal.String.Other */
.highlight .sr { color: #a67f59 } /* Literal.String.Regex */
.highlight .s1 { color: #a67f59 } /* Literal.String.Single */
.highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
.highlight .vc { color: #0077aa } /* Name.Variable.Class */
.highlight .vg { color: #0077aa } /* Name.Variable.Global */
.highlight .vi { color: #0077aa } /* Name.Variable.Instance */
.highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
</style>
 <body class="h-entry status-">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://whatwg.org/"> <img alt="WHATWG" height="100" src=""> </a> </p>
   <hgroup>
    <h1 class="p-name no-ref allcaps" id="title">URL</h1>
    <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content"> — Last Updated <time class="dt-updated" datetime="2018-01-19">19 January 2018</time></span></h2>
   </hgroup>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/foolip/bikeshed/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt>Translations <small>(non-normative and likely out-of-date)</small>:
     <dd><span title="Japanese"><a href="https://triple-underscore.github.io/URL-ja.html" hreflang="ja" lang="ja" rel="alternate">日本語</a></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The URL Standard defines URLs, domains, IP addresses, the <code>application/x-www-form-urlencoded</code> format, and their API.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#goals"><span class="secno"></span> <span class="content">Goals</span></a>
    <li>
     <a href="#infrastructure"><span class="secno">1</span> <span class="content">Infrastructure</span></a>
     <ol class="toc">
      <li><a href="#writing"><span class="secno">1.1</span> <span class="content">Writing</span></a>
      <li><a href="#parsers"><span class="secno">1.2</span> <span class="content">Parsers</span></a>
      <li><a href="#percent-encoded-bytes"><span class="secno">1.3</span> <span class="content">Percent-encoded bytes</span></a>
     </ol>
    <li><a href="#security-considerations"><span class="secno">2</span> <span class="content">Security considerations</span></a>
    <li>
     <a href="#hosts-(domains-and-ip-addresses)"><span class="secno">3</span> <span class="content">Hosts (domains and IP addresses)</span></a>
     <ol class="toc">
      <li><a href="#host-representation"><span class="secno">3.1</span> <span class="content">Host representation</span></a>
      <li><a href="#host-miscellaneous"><span class="secno">3.2</span> <span class="content">Host miscellaneous</span></a>
      <li><a href="#idna"><span class="secno">3.3</span> <span class="content">IDNA</span></a>
      <li><a href="#host-writing"><span class="secno">3.4</span> <span class="content">Host writing</span></a>
      <li><a href="#host-parsing"><span class="secno">3.5</span> <span class="content">Host parsing</span></a>
      <li><a href="#host-serializing"><span class="secno">3.6</span> <span class="content">Host serializing</span></a>
      <li><a href="#host-equivalence"><span class="secno">3.7</span> <span class="content">Host equivalence</span></a>
     </ol>
    <li>
     <a href="#urls"><span class="secno">4</span> <span class="content">URLs</span></a>
     <ol class="toc">
      <li><a href="#url-representation"><span class="secno">4.1</span> <span class="content">URL representation</span></a>
      <li><a href="#url-miscellaneous"><span class="secno">4.2</span> <span class="content">URL miscellaneous</span></a>
      <li><a href="#url-writing"><span class="secno">4.3</span> <span class="content">URL writing</span></a>
      <li><a href="#url-parsing"><span class="secno">4.4</span> <span class="content">URL parsing</span></a>
      <li><a href="#url-serializing"><span class="secno">4.5</span> <span class="content">URL serializing</span></a>
      <li><a href="#url-equivalence"><span class="secno">4.6</span> <span class="content">URL equivalence</span></a>
      <li><a href="#origin"><span class="secno">4.7</span> <span class="content">Origin</span></a>
      <li><a href="#url-rendering"><span class="secno">4.8</span> <span class="content">URL rendering</span></a>
     </ol>
    <li>
     <a href="#application/x-www-form-urlencoded"><span class="secno">5</span> <span class="content"><code>application/x-www-form-urlencoded</code></span></a>
     <ol class="toc">
      <li><a href="#urlencoded-parsing"><span class="secno">5.1</span> <span class="content"><code>application/x-www-form-urlencoded</code> parsing</span></a>
      <li><a href="#urlencoded-serializing"><span class="secno">5.2</span> <span class="content"><code>application/x-www-form-urlencoded</code> serializing</span></a>
      <li><a href="#urlencoded-hooks"><span class="secno">5.3</span> <span class="content">Hooks</span></a>
     </ol>
    <li>
     <a href="#api"><span class="secno">6</span> <span class="content">API</span></a>
     <ol class="toc">
      <li><a href="#url-class"><span class="secno">6.1</span> <span class="content">URL class</span></a>
      <li><a href="#interface-urlsearchparams"><span class="secno">6.2</span> <span class="content">URLSearchParams class</span></a>
      <li><a href="#url-apis-elsewhere"><span class="secno">6.3</span> <span class="content">URL APIs elsewhere</span></a>
     </ol>
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">Acknowledgments</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="no-num heading settled" id="goals"><span class="content">Goals</span></h2>
   <p>The URL standard takes the following approach towards making URLs fully interoperable: </p>
   <ul>
    <li>
     <p>Align RFC 3986 and RFC 3987 with contemporary implementations and
 obsolete them in the process. (E.g., spaces, other "illegal" code points,
 query encoding, equality, canonicalization, are all concepts not entirely
 shared, or defined.) URL parsing needs to become as solid as HTML parsing. <a data-link-type="biblio" href="#biblio-rfc3986">[RFC3986]</a> <a data-link-type="biblio" href="#biblio-rfc3987">[RFC3987]</a> </p>
    <li>
     <p>Standardize on the term URL. URI and IRI are just confusing. In
 practice a single algorithm is used for both so keeping them distinct is
 not helping anyone. URL also easily wins the <a href="https://trends.google.com/trends/explore?q=url,uri">search result popularity contest</a>. </p>
    <li>
     <p>Supplanting <a href="https://tools.ietf.org/html/rfc6454#section-4">Origin of a URI [sic]</a>. <a data-link-type="biblio" href="#biblio-rfc6454">[RFC6454]</a> </p>
    <li>
     <p>Define URL’s existing JavaScript API in full detail and add
 enhancements to make it easier to work with. Add a new <code><a class="idl-code" data-link-type="interface" href="#url" id="ref-for-url">URL</a></code> object as well for URL manipulation without usage of HTML elements. (Useful
 for JavaScript worker environments.) </p>
    <li>
     <p>Ensure the combination of parser, serializer, and API guarantee idempotence. For example, a
 non-failure result of a parse-then-serialize operation will not change with any further
 parse-then-serialize operations applied to it. Similarly, manipulating a non-failure result through
 the API will not change from applying any number of serialize-then-parse operations to it. </p>
   </ul>
   <p class="note" role="note">As the editors learn more about the subject matter the goals
might increase in scope somewhat. </p>
   <h2 class="heading settled" data-level="1" id="infrastructure"><span class="secno">1. </span><span class="content">Infrastructure</span><a class="self-link" href="#infrastructure"></a></h2>
   <p>This specification depends on the Infra Standard. <a data-link-type="biblio" href="#biblio-infra">[INFRA]</a> </p>
   <p>Some terms used in this specification are defined in the following standards and specifications: </p>
   <ul class="brief">
    <li>DOM Standard <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> 
    <li>Encoding Standard <a data-link-type="biblio" href="#biblio-encoding">[ENCODING]</a> 
    <li>File API <a data-link-type="biblio" href="#biblio-fileapi">[FILEAPI]</a> 
    <li>HTML Standard <a data-link-type="biblio" href="#biblio-html">[HTML]</a> 
    <li>Media Source Extensions <a data-link-type="biblio" href="#biblio-media-source">[MEDIA-SOURCE]</a> 
    <li>Media Capture and Streams <a data-link-type="biblio" href="#biblio-mediacapture-streams">[MEDIACAPTURE-STREAMS]</a> 
    <li>Unicode IDNA Compatibility Processing <a data-link-type="biblio" href="#biblio-uts46">[UTS46]</a> 
    <li>Web IDL <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> 
   </ul>
   <hr>
   <p>To <dfn data-dfn-type="dfn" data-noexport="" id="serialize-an-integer">serialize an integer<a class="self-link" href="#serialize-an-integer"></a></dfn>, represent it as the shortest possible decimal
number. </p>
   <h3 class="heading settled" data-level="1.1" id="writing"><span class="secno">1.1. </span><span class="content">Writing</span><a class="self-link" href="#writing"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-noexport="" id="validation-error">validation error<span id="syntax-violation"></span><a class="self-link" href="#validation-error"></a></dfn> indicates a mismatch between input and
valid input. User agents, especially conformance checkers, are encouraged to report them somewhere. </p>
   <div class="note no-backref" role="note">
    <p>A <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error">validation error</a> does not mean that the parser terminates. Termination of a parser is
 always stated explicitly, e.g., through a return statement. </p>
    <p>It is useful to signal <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①">validation errors</a> as error-handling can be non-intuitive, legacy
 user agents might not implement correct error-handling, and the intent of what is written might be
 unclear to other developers. </p>
   </div>
   <h3 class="heading settled" data-level="1.2" id="parsers"><span class="secno">1.2. </span><span class="content">Parsers</span><a class="self-link" href="#parsers"></a></h3>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="eof-code-point">EOF code point<a class="self-link" href="#eof-code-point"></a></dfn> is a conceptual code point that signifies the end of a
string or code point stream. </p>
   <p>Within a parser algorithm that uses a <var>pointer</var> variable, <dfn data-dfn-type="dfn" data-noexport="" id="c">c<a class="self-link" href="#c"></a></dfn> references the code point the <var>pointer</var> variable points to. </p>
   <p>Within a string-based parser algorithm that uses a <var>pointer</var> variable, <dfn data-dfn-type="dfn" data-noexport="" id="remaining">remaining<a class="self-link" href="#remaining"></a></dfn> references the substring after <var>pointer</var> in the string
being processed. </p>
   <p class="example" id="example-12672b6a"><a class="self-link" href="#example-12672b6a"></a>If "<code>mailto:username@example</code>" is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a> being processed and <var>pointer</var> points to @, <a data-link-type="dfn" href="#c" id="ref-for-c">c</a> is U+0040 (@) and <a data-link-type="dfn" href="#remaining" id="ref-for-remaining">remaining</a> is
"<code>example</code>". </p>
   <h3 class="heading settled" data-level="1.3" id="percent-encoded-bytes"><span class="secno">1.3. </span><span class="content">Percent-encoded bytes</span><a class="self-link" href="#percent-encoded-bytes"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-noexport="" id="percent-encoded-byte">percent-encoded byte<a class="self-link" href="#percent-encoded-byte"></a></dfn> is U+0025 (%), followed by two <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-hex-digit" id="ref-for-ascii-hex-digit">ASCII hex digits</a>.
Sequences of <a data-link-type="dfn" href="#percent-encoded-byte" id="ref-for-percent-encoded-byte">percent-encoded bytes</a>, after conversion to bytes,
should not cause <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom-or-fail" id="ref-for-utf-8-decode-without-bom-or-fail">UTF-8 decode without BOM or fail</a> to return failure. </p>
   <p>To <dfn data-dfn-type="dfn" data-export="" id="percent-encode">percent encode<a class="self-link" href="#percent-encode"></a></dfn> a <var>byte</var> into a <a data-link-type="dfn" href="#percent-encoded-byte" id="ref-for-percent-encoded-byte①">percent-encoded byte</a>, return
a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a> consisting of U+0025 (%), followed by two <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-upper-hex-digit" id="ref-for-ascii-upper-hex-digit">ASCII upper hex digits</a> representing <var>byte</var>. </p>
   <p>To <dfn data-dfn-type="dfn" data-export="" id="percent-decode">percent decode<a class="self-link" href="#percent-decode"></a></dfn> a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence">byte sequence</a> <var>input</var>, run these steps: </p>
   <p class="warning">Using anything but <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom" id="ref-for-utf-8-decode-without-bom">UTF-8 decode without BOM</a> when the <var>input</var> contains bytes that are not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-byte" id="ref-for-ascii-byte">ASCII bytes</a> might be insecure and is not recommended. </p>
   <ol>
    <li>
     <p>Let <var>output</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①">byte sequence</a>. </p>
    <li>
     <p>For each byte <var>byte</var> in <var>input</var>: </p>
     <ol>
      <li>
       <p>If <var>byte</var> is not 0x25 (%), then append <var>byte</var> to <var>output</var>. </p>
      <li>
       <p>Otherwise, if <var>byte</var> is 0x25 (%) and the next two bytes after <var>byte</var> in <var>input</var> are not in the ranges 0x30 (0) to 0x39 (9),
   0x41 (A) to 0x46 (F), and 0x61 (a) to 0x66 (f), all inclusive, append <var>byte</var> to <var>output</var>. </p>
      <li>
       <p>Otherwise: </p>
       <ol>
        <li>
         <p>Let <var>bytePoint</var> be the two bytes after <var>byte</var> in <var>input</var>, <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom" id="ref-for-utf-8-decode-without-bom①">decoded</a>, and then interpreted as hexadecimal number. </p>
        <li>
         <p>Append a byte whose value is <var>bytePoint</var> to <var>output</var>. </p>
        <li>
         <p>Skip the next two bytes in <var>input</var>. </p>
       </ol>
     </ol>
    <li>
     <p>Return <var>output</var>. </p>
   </ol>
   <p>To <dfn data-dfn-type="dfn" data-export="" id="string-percent-decode">string percent decode<a class="self-link" href="#string-percent-decode"></a></dfn> a string <var>input</var>, run these steps: </p>
   <ol>
    <li>
     <p>Let <var>bytes</var> be the <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode">UTF-8 encoding</a> of <var>input</var>. </p>
    <li>
     <p>Return the <a data-link-type="dfn" href="#percent-decode" id="ref-for-percent-decode">percent decoding</a> of <var>bytes</var>. </p>
   </ol>
   <hr>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="c0-control-percent-encode-set">C0 control percent-encode set<span id="simple-encode-set"></span><a class="self-link" href="#c0-control-percent-encode-set"></a></dfn> are the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#c0-control" id="ref-for-c0-control">C0 controls</a> and all <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point">code points</a> greater than U+007E (~). </p>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="fragment-percent-encode-set">fragment percent-encode set<a class="self-link" href="#fragment-percent-encode-set"></a></dfn> is the <a data-link-type="dfn" href="#c0-control-percent-encode-set" id="ref-for-c0-control-percent-encode-set">C0 control percent-encode set</a> and
U+0020 SPACE, U+0022 ("), U+003C (&lt;), U+003E (>), and U+0060 (`). </p>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="path-percent-encode-set">path percent-encode set<span id="default-encode-set"></span><a class="self-link" href="#path-percent-encode-set"></a></dfn> is the <a data-link-type="dfn" href="#fragment-percent-encode-set" id="ref-for-fragment-percent-encode-set">fragment percent-encode set</a> and U+0023 (#), U+003F (?), U+007B ({), and U+007D (}). </p>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="userinfo-percent-encode-set">userinfo percent-encode set<span id="userinfo-encode-set"></span><a class="self-link" href="#userinfo-percent-encode-set"></a></dfn> is the <a data-link-type="dfn" href="#path-percent-encode-set" id="ref-for-path-percent-encode-set">path percent-encode set</a> and U+002F (/), U+003A (:), U+003B (;), U+003D (=), U+0040 (@),
U+005B ([), U+005C (\), U+005D (]), U+005E (^), and U+007C (|). </p>
   <p>To <dfn data-dfn-type="dfn" data-noexport="" id="utf-8-percent-encode">UTF-8 percent encode<a class="self-link" href="#utf-8-percent-encode"></a></dfn> a <var>codePoint</var>, using a <var>percentEncodeSet</var>,
run these steps: </p>
   <ol>
    <li>
     <p>If <var>codePoint</var> is not in <var>percentEncodeSet</var>, then return <var>codePoint</var>. </p>
    <li>
     <p>Let <var>bytes</var> be the result of running <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode①">UTF-8 encode</a> on <var>codePoint</var>. </p>
    <li>
     <p><a data-link-type="dfn" href="#percent-encode" id="ref-for-percent-encode">Percent encode</a> each byte in <var>bytes</var>, and then return the results
 concatenated, in the same order. </p>
   </ol>
   <h2 class="heading settled" data-level="2" id="security-considerations"><span class="secno">2. </span><span class="content">Security considerations</span><a class="self-link" href="#security-considerations"></a></h2>
   <p>The security of a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url">URL</a> is a function of its environment. Care is to be
taken when rendering, interpreting, and passing <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①">URLs</a> around. </p>
   <p>When rendering and allocating new <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②">URLs</a> "spoofing" needs to be considered. An attack
whereby one <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host">host</a> or <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③">URL</a> can be confused for another. For instance,
consider how 1/l/I, m/rn/rri, 0/O, and а/a can all appear eerily similar. Or worse, consider how
U+202A LEFT-TO-RIGHT EMBEDDING and similar <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point①">code points</a> are invisible. <a data-link-type="biblio" href="#biblio-utr36">[UTR36]</a> </p>
   <p>When passing a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④">URL</a> from party <var>A</var> to <var>B</var>, both need to
carefully consider what is happening. <var>A</var> might end up leaking data it does not
want to leak. <var>B</var> might receive input it did not expect and take an action that
harms the user. In particular, <var>B</var> should never trust <var>A</var>, as at some
point <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤">URLs</a> from <var>A</var> can come from untrusted sources. </p>
   <h2 class="heading settled" data-level="3" id="hosts-(domains-and-ip-addresses)"><span class="secno">3. </span><span class="content">Hosts (domains and IP addresses)</span><a class="self-link" href="#hosts-(domains-and-ip-addresses)"></a></h2>
   <p>At a high level, a <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host①">host</a>, <a data-link-type="dfn" href="#valid-host-string" id="ref-for-valid-host-string">valid host string</a>, <a data-link-type="dfn" href="#concept-host-parser" id="ref-for-concept-host-parser">host parser</a>, and <a data-link-type="dfn" href="#concept-host-serializer" id="ref-for-concept-host-serializer">host serializer</a> relate as follows: </p>
   <ul>
    <li>
     <p>The <a data-link-type="dfn" href="#concept-host-parser" id="ref-for-concept-host-parser①">host parser</a> takes an arbitrary string and returns either failure or a <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host②">host</a>. </p>
    <li>
     <p>A <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host③">host</a> can be seen as the in-memory representation. </p>
    <li>
     <p>A <a data-link-type="dfn" href="#valid-host-string" id="ref-for-valid-host-string①">valid host string</a> defines what input would not trigger a <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②">validation error</a> or failure when given to the <a data-link-type="dfn" href="#concept-host-parser" id="ref-for-concept-host-parser②">host parser</a>. I.e., input that would be considered conforming or
 valid. </p>
    <li>
     <p>The <a data-link-type="dfn" href="#concept-host-serializer" id="ref-for-concept-host-serializer①">host serializer</a> takes a <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host④">host</a> and returns a string. (If that string
 is then <a data-link-type="dfn" href="#concept-host-parser" id="ref-for-concept-host-parser③">parsed</a>, the result will <a data-link-type="dfn" href="#concept-host-equals" id="ref-for-concept-host-equals">equal</a> the <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host⑤">host</a> that was <a data-link-type="dfn" href="#concept-host-serializer" id="ref-for-concept-host-serializer②">serialized</a>.) </p>
   </ul>
   <h3 class="heading settled" data-level="3.1" id="host-representation"><span class="secno">3.1. </span><span class="content">Host representation</span><a class="self-link" href="#host-representation"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="concept-host">host<a class="self-link" href="#concept-host"></a></dfn> is a <a data-link-type="dfn" href="#concept-domain" id="ref-for-concept-domain">domain</a>, an <a data-link-type="dfn" href="#concept-ipv4" id="ref-for-concept-ipv4">IPv4 address</a>, an <a data-link-type="dfn" href="#concept-ipv6" id="ref-for-concept-ipv6">IPv6 address</a>, an <a data-link-type="dfn" href="#opaque-host" id="ref-for-opaque-host">opaque host</a>, or an <a data-link-type="dfn" href="#empty-host" id="ref-for-empty-host">empty host</a>.
Typically a <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host⑥">host</a> serves as a network address, but it is sometimes used as opaque
identifier in <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑥">URLs</a> where a network address is not necessary. </p>
   <p class="note" role="note">The RFCs referenced in the paragraphs below are for informative purposes only. They
have no influence on <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host⑦">host</a> writing, parsing, and serialization. Unless stated otherwise
in the sections that follow. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="concept-domain">domain<a class="self-link" href="#concept-domain"></a></dfn> identifies a realm within a
network. <a data-link-type="biblio" href="#biblio-rfc1034">[RFC1034]</a> </p>
   <p class="note" role="note">The <code>example.com</code> and <code>example.com.</code> <a data-link-type="dfn" href="#concept-domain" id="ref-for-concept-domain①">domains</a> are
not equivalent and typically treated as distinct. </p>
   <p>An <dfn data-dfn-type="dfn" data-export="" id="concept-ipv4">IPv4 address<a class="self-link" href="#concept-ipv4"></a></dfn> is a 32-bit unsigned integer that identifies a
network address. <a data-link-type="biblio" href="#biblio-rfc791">[RFC791]</a> </p>
   <p>An <dfn data-dfn-type="dfn" data-export="" id="concept-ipv6">IPv6 address<a class="self-link" href="#concept-ipv6"></a></dfn> is a 128-bit unsigned integer that identifies a
network address. For the purposes of this standard it is represented as a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of eight
16-bit unsigned integers, also known as <dfn data-dfn-type="dfn" data-export="" data-lt="IPv6 piece" id="concept-ipv6-piece">IPv6 pieces<a class="self-link" href="#concept-ipv6-piece"></a></dfn>. <a data-link-type="biblio" href="#biblio-rfc4291">[RFC4291]</a> </p>
   <p class="note" role="note">Support for <code>&lt;zone_id></code> is <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27234#c2">intentionally omitted</a>. </p>
   <p>An <dfn data-dfn-type="dfn" data-export="" id="opaque-host">opaque host<a class="self-link" href="#opaque-host"></a></dfn> is a non-empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string">ASCII string</a> holding data that can be used
for further processing. </p>
   <p>An <dfn data-dfn-type="dfn" data-export="" id="empty-host">empty host<a class="self-link" href="#empty-host"></a></dfn> is the empty string. </p>
   <h3 class="heading settled" data-level="3.2" id="host-miscellaneous"><span class="secno">3.2. </span><span class="content">Host miscellaneous</span><a class="self-link" href="#host-miscellaneous"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="forbidden-host-code-point">forbidden host code point<a class="self-link" href="#forbidden-host-code-point"></a></dfn> is U+0000 NULL, U+0009 TAB, U+000A LF, U+000D CR,
U+0020 SPACE, U+0023 (#), U+0025 (%), U+002F (/), U+003A (:), U+003F (?), U+0040 (@), U+005B ([),
U+005C (\), or U+005D (]). </p>
   <h3 class="heading settled" data-level="3.3" id="idna"><span class="secno">3.3. </span><span class="content">IDNA</span><a class="self-link" href="#idna"></a></h3>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="concept-domain-to-ascii">domain to ASCII<a class="self-link" href="#concept-domain-to-ascii"></a></dfn> algorithm, given a <a data-link-type="dfn" href="#concept-domain" id="ref-for-concept-domain②">domain</a> <var>domain</var> and optionally a boolean <var>beStrict</var>, runs these steps: </p>
   <ol>
    <li>
     <p>If <var>beStrict</var> is not given, set it to false. </p>
    <li>
     <p>Let <var>result</var> be the result of running <a data-link-type="abstract-op" href="https://www.unicode.org/reports/tr46/#ToASCII" id="ref-for-ToASCII">Unicode ToASCII</a> with <i>domain_name</i> set to <var>domain</var>, <i>UseSTD3ASCIIRules</i> set to <var>beStrict</var>, <i>CheckHyphens</i> set to false, <i>CheckBidi</i> set to true, <i>CheckJoiners</i> set to true, <i>processing_option</i> set to <i>Nontransitional_Processing</i>,
 and <i>VerifyDnsLength</i> set to <var>beStrict</var>. </p>
    <li>
     <p>If <var>result</var> is a failure value, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③">validation error</a>, return failure. </p>
    <li>
     <p>Return <var>result</var>. </p>
   </ol>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="concept-domain-to-unicode">domain to Unicode<a class="self-link" href="#concept-domain-to-unicode"></a></dfn> algorithm, given a <a data-link-type="dfn" href="#concept-domain" id="ref-for-concept-domain③">domain</a> <var>domain</var>, runs these steps: </p>
   <ol>
    <li>
     <p>Let <var>result</var> be the result of running <a data-link-type="abstract-op" href="https://www.unicode.org/reports/tr46/#ToUnicode" id="ref-for-ToUnicode">Unicode ToUnicode</a> with <i>domain_name</i> set to <var>domain</var>, <i>CheckHyphens</i> set to false, <i>CheckBidi</i> set to true, <i>CheckJoiners</i> set to true,
 and <i>UseSTD3ASCIIRules</i> set to false. </p>
    <li>
     <p>Signify <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④">validation errors</a> for any returned errors, and then, return <var>result</var>. </p>
   </ol>
   <h3 class="heading settled" data-level="3.4" id="host-writing"><span class="secno">3.4. </span><span class="content">Host writing</span><span id="host-syntax"></span><a class="self-link" href="#host-writing"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="valid-host-string">valid host string<span id="syntax-host"></span><a class="self-link" href="#valid-host-string"></a></dfn> must be a <a data-link-type="dfn" href="#valid-domain-string" id="ref-for-valid-domain-string">valid domain string</a>, a <a data-link-type="dfn" href="#valid-ipv4-address-string" id="ref-for-valid-ipv4-address-string">valid IPv4-address string</a>, or: U+005B ([), followed by a <a data-link-type="dfn" href="#valid-ipv6-address-string" id="ref-for-valid-ipv6-address-string">valid IPv6-address string</a>, followed by U+005D (]). </p>
   <p>A <var>domain</var> is a <dfn data-dfn-type="dfn" data-noexport="" id="valid-domain">valid domain<a class="self-link" href="#valid-domain"></a></dfn> if these steps return success: </p>
   <ol>
    <li>
     <p>Let <var>result</var> be the result of running <a data-link-type="dfn" href="#concept-domain-to-ascii" id="ref-for-concept-domain-to-ascii">domain to ASCII</a> with <var>domain</var> and true. </p>
    <li>
     <p>If <var>result</var> is failure, then return failure. </p>
    <li>
     <p>Set <var>result</var> to the result of running <a data-link-type="abstract-op" href="https://www.unicode.org/reports/tr46/#ToUnicode" id="ref-for-ToUnicode①">Unicode ToUnicode</a> with <i>domain_name</i> set to <var>result</var>, <i>CheckHyphens</i> set to false, <i>CheckBidi</i> set to true, <i>CheckJoiners</i> set to true,
 and <i>UseSTD3ASCIIRules</i> set to true. </p>
    <li>
     <p>If <var>result</var> contains any errors, return failure. </p>
    <li>
     <p>Return success. </p>
   </ol>
   <p class="XXX">Ideally we define this in terms of a sequence of code points that make up a <a data-link-type="dfn" href="#valid-domain" id="ref-for-valid-domain">valid domain</a> rather than through a whack-a-mole: <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25334">bug 25334</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="valid-domain-string">valid domain string<span id="syntax-host-domain"></span><a class="self-link" href="#valid-domain-string"></a></dfn> must be a string that is a <a data-link-type="dfn" href="#valid-domain" id="ref-for-valid-domain①">valid domain</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="valid-ipv4-address-string">valid IPv4-address string<span id="syntax-host-ipv4"></span><a class="self-link" href="#valid-ipv4-address-string"></a></dfn> must be four sequences of
up to three <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-digit" id="ref-for-ascii-digit">ASCII digits</a> per sequence, each representing a decimal number no greater than
255, and separated from each other by U+002E (.). </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="valid-ipv6-address-string">valid IPv6-address string<span id="syntax-host-ipv6"></span><a class="self-link" href="#valid-ipv6-address-string"></a></dfn> is defined in the <a href="https://tools.ietf.org/html/rfc4291#section-2.2">"Text Representation of Addresses" chapter of IP Version 6 Addressing Architecture</a>. <a data-link-type="biblio" href="#biblio-rfc4291">[RFC4291]</a> </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="valid-opaque-host-string">valid opaque-host string<a class="self-link" href="#valid-opaque-host-string"></a></dfn> must be one or more <a data-link-type="dfn" href="#url-units" id="ref-for-url-units">URL units</a> or: U+005B ([),
followed by a <a data-link-type="dfn" href="#valid-ipv6-address-string" id="ref-for-valid-ipv6-address-string①">valid IPv6-address string</a>, followed by U+005D (]). </p>
   <p class="note no-backref" role="note">This is not part of the definition of <a data-link-type="dfn" href="#valid-host-string" id="ref-for-valid-host-string②">valid host string</a> as it
requires context to be distinguished. </p>
   <h3 class="heading settled" data-level="3.5" id="host-parsing"><span class="secno">3.5. </span><span class="content">Host parsing</span><a class="self-link" href="#host-parsing"></a></h3>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="concept-host-parser">host parser<a class="self-link" href="#concept-host-parser"></a></dfn> takes a string <var>input</var>, a boolean <var>isSpecial</var>, and then runs these steps: </p>
   <ol>
    <li>
     <p>If <var>input</var> starts with U+005B ([), then: </p>
     <ol>
      <li>
       <p>If <var>input</var> does not end with U+005D (]), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤">validation error</a>, return failure. </p>
      <li>
       <p>Return the result of <a data-link-type="dfn" href="#concept-ipv6-parser" id="ref-for-concept-ipv6-parser">IPv6 parsing</a> <var>input</var> with its
   leading U+005B ([) and trailing U+005D (]) removed. </p>
     </ol>
    <li>
     <p>If <var>isSpecial</var> is false, then return the result of <a data-link-type="dfn" href="#concept-opaque-host-parser" id="ref-for-concept-opaque-host-parser">opaque-host parsing</a> <var>input</var>. </p>
    <li>
     <p>Let <var>domain</var> be the result of running <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom" id="ref-for-utf-8-decode-without-bom②">UTF-8 decode without BOM</a> on the <a data-link-type="dfn" href="#string-percent-decode" id="ref-for-string-percent-decode">string percent decoding</a> of <var>input</var>. </p>
     <p class="note no-backref" role="note">Alternatively <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom-or-fail" id="ref-for-utf-8-decode-without-bom-or-fail①">UTF-8 decode without BOM or fail</a> can be used,
  coupled with an early return for failure, as <a data-link-type="dfn" href="#concept-domain-to-ascii" id="ref-for-concept-domain-to-ascii①">domain to ASCII</a> fails on
  U+FFFD REPLACEMENT CHARACTER. </p>
    <li>
     <p>Let <var>asciiDomain</var> be the result of running <a data-link-type="dfn" href="#concept-domain-to-ascii" id="ref-for-concept-domain-to-ascii②">domain to ASCII</a> on <var>domain</var>. </p>
    <li>
     <p>If <var>asciiDomain</var> is failure, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑥">validation error</a>, return failure. </p>
    <li>
     <p>If <var>asciiDomain</var> contains a <a data-link-type="dfn" href="#forbidden-host-code-point" id="ref-for-forbidden-host-code-point">forbidden host code point</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑦">validation error</a>, return failure. </p>
    <li>
     <p>Let <var>ipv4Host</var> be the result of <a data-link-type="dfn" href="#concept-ipv4-parser" id="ref-for-concept-ipv4-parser">IPv4 parsing</a> <var>asciiDomain</var>. </p>
    <li>
     <p>If <var>ipv4Host</var> is an <a data-link-type="dfn" href="#concept-ipv4" id="ref-for-concept-ipv4①">IPv4 address</a> or failure, return <var>ipv4Host</var>. </p>
    <li>
     <p>Return <var>asciiDomain</var>. </p>
   </ol>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="ipv4-number-parser">IPv4 number parser<a class="self-link" href="#ipv4-number-parser"></a></dfn> takes a string <var>input</var> and a <var>validationErrorFlag</var> pointer, and then runs these steps: </p>
   <ol>
    <li>
     <p>Let <var>R</var> be 10. </p>
    <li>
     <p>If <var>input</var> contains at least two code points and the first two code points are either
  "<code>0x</code>" or "<code>0X</code>", then: </p>
     <ol>
      <li>
       <p>Set <var>validationErrorFlag</var>. </p>
      <li>
       <p>Remove the first two code points from <var>input</var>. </p>
      <li>
       <p>Set <var>R</var> to 16. </p>
     </ol>
    <li>
     <p>Otherwise, if <var>input</var> contains at least two code points and the first code point is
  U+0030 (0), then: </p>
     <ol>
      <li>
       <p>Set <var>validationErrorFlag</var>. </p>
      <li>
       <p>Remove the first code point from <var>input</var>. </p>
      <li>
       <p>Set <var>R</var> to 8. </p>
     </ol>
    <li>
     <p>If <var>input</var> is the empty string, then return zero. </p>
    <li>
     <p>If <var>input</var> contains a code point that is not a radix-<var>R</var> digit, then
 return failure. </p>
    <li>
     <p>Return the mathematical integer value that is represented by <var>input</var> in
 radix-<var>R</var> notation, using <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-hex-digit" id="ref-for-ascii-hex-digit①">ASCII hex digits</a> for digits with values 0
 through 15. </p>
   </ol>
   <hr>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="concept-ipv4-parser">IPv4 parser<a class="self-link" href="#concept-ipv4-parser"></a></dfn> takes a string <var>input</var> and then runs
these steps: </p>
   <ol>
    <li>
     <p>Let <var>validationErrorFlag</var> be unset. </p>
    <li>
     <p>Let <var>parts</var> be <var>input</var> split on U+002E (.). </p>
    <li>
     <p>If the last item in <var>parts</var> is the empty string, then: </p>
     <ol>
      <li>
       <p>Set <var>validationErrorFlag</var>. </p>
      <li>
       <p>If <var>parts</var> has more than one item, then remove the last item from <var>parts</var>. </p>
     </ol>
    <li>
     <p>If <var>parts</var> has more than four items, return <var>input</var>. </p>
    <li>
     <p>Let <var>numbers</var> be the empty list. </p>
    <li>
     <p>For each <var>part</var> in <var>parts</var>: </p>
     <ol>
      <li>
       <p>If <var>part</var> is the empty string, return <var>input</var>. </p>
       <p class="example no-backref" id="example-c2afe535"><a class="self-link" href="#example-c2afe535"></a><code>0..0x300</code> is a <a data-link-type="dfn" href="#concept-domain" id="ref-for-concept-domain④">domain</a>, not an <a data-link-type="dfn" href="#concept-ipv4" id="ref-for-concept-ipv4②">IPv4 address</a>. </p>
      <li>
       <p>Let <var>n</var> be the result of <a data-link-type="dfn" href="#ipv4-number-parser" id="ref-for-ipv4-number-parser">parsing</a> <var>part</var> using <var>validationErrorFlag</var>. </p>
      <li>
       <p>If <var>n</var> is failure, return <var>input</var>. </p>
      <li>
       <p>Append <var>n</var> to <var>numbers</var>. </p>
     </ol>
    <li>
     <p>If <var>validationErrorFlag</var> is set, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑧">validation error</a>. </p>
    <li>
     <p>If any item in <var>numbers</var> is greater than 255, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑨">validation error</a>. </p>
    <li>
     <p>If any but the last item in <var>numbers</var> is greater than 255, return
 failure. </p>
    <li>
     <p>If the last item in <var>numbers</var> is greater than or equal to
 256<sup>(5 − the number of items in <var>numbers</var>)</sup>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①⓪">validation error</a>,
 return failure. </p>
    <li>
     <p>Let <var>ipv4</var> be the last item in <var>numbers</var>. </p>
    <li>
     <p>Remove the last item from <var>numbers</var>. </p>
    <li>
     <p>Let <var>counter</var> be zero. </p>
    <li>
     <p>For each <var>n</var> in <var>numbers</var>: </p>
     <ol>
      <li>
       <p>Increment <var>ipv4</var> by <var>n</var> ×
   256<sup>(3 − <var>counter</var>)</sup>. </p>
      <li>
       <p>Increment <var>counter</var> by 1. </p>
     </ol>
    <li>
     <p>Return <var>ipv4</var>. </p>
   </ol>
   <hr>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="concept-ipv6-parser">IPv6 parser<a class="self-link" href="#concept-ipv6-parser"></a></dfn> takes a string <var>input</var> and
then runs these steps: </p>
   <ol>
    <li>
     <p>Let <var>address</var> be a new <a data-link-type="dfn" href="#concept-ipv6" id="ref-for-concept-ipv6①">IPv6 address</a> whose <a data-link-type="dfn" href="#concept-ipv6-piece" id="ref-for-concept-ipv6-piece">IPv6 pieces</a> are all 0. </p>
    <li>
     <p>Let <var>pieceIndex</var> be 0. </p>
    <li>
     <p>Let <var>compress</var> be null. </p>
    <li>
     <p>Let <var>pointer</var> be a pointer into <var>input</var>, initially 0 (pointing to the
 first code point). </p>
    <li>
     <p>If <a data-link-type="dfn" href="#c" id="ref-for-c①">c</a> is U+003A (:), then: </p>
     <ol>
      <li>
       <p>If <a data-link-type="dfn" href="#remaining" id="ref-for-remaining①">remaining</a> does not start with U+003A (:), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①①">validation error</a>, return
   failure. </p>
      <li>
       <p>Increase <var>pointer</var> by 2. </p>
      <li>
       <p>Increase <var>pieceIndex</var> by 1 and then set <var>compress</var> to <var>pieceIndex</var>. </p>
     </ol>
    <li>
     <p>While <a data-link-type="dfn" href="#c" id="ref-for-c②">c</a> is not the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point">EOF code point</a>: </p>
     <ol>
      <li>
       <p>If <var>pieceIndex</var> is 8, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①②">validation error</a>, return failure. </p>
      <li>
       <p>If <a data-link-type="dfn" href="#c" id="ref-for-c③">c</a> is U+003A (:), then: </p>
       <ol>
        <li>
         <p>If <var>compress</var> is non-null, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①③">validation error</a>, return failure. </p>
        <li>Increase <var>pointer</var> and <var>pieceIndex</var> by 1, set <var>compress</var> to <var>pieceIndex</var>, and then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>. 
       </ol>
      <li>
       <p>Let <var>value</var> and <var>length</var> be 0. </p>
      <li>
       <p>While <var>length</var> is less than 4 and <a data-link-type="dfn" href="#c" id="ref-for-c④">c</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-hex-digit" id="ref-for-ascii-hex-digit②">ASCII hex digit</a>, set <var>value</var> to <var>value</var> × 0x10 + <a data-link-type="dfn" href="#c" id="ref-for-c⑤">c</a> interpreted as hexadecimal number,
   and increase <var>pointer</var> and <var>length</var> by 1. </p>
      <li>
       <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑥">c</a> is U+002E (.), then: </p>
       <ol>
        <li>
         <p>If <var>length</var> is 0, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①④">validation error</a>, return failure. </p>
        <li>
         <p>Decrease <var>pointer</var> by <var>length</var>. </p>
        <li>
         <p>If <var>pieceIndex</var> is greater than 6, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①⑤">validation error</a>, return failure. </p>
        <li>
         <p>Let <var>numbersSeen</var> be 0. </p>
        <li>
         <p>While <a data-link-type="dfn" href="#c" id="ref-for-c⑦">c</a> is not the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①">EOF code point</a>: </p>
         <ol>
          <li>
           <p>Let <var>ipv4Piece</var> be null. </p>
          <li>
           <p>If <var>numbersSeen</var> is greater than 0, then: </p>
           <ol>
            <li>
             <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑧">c</a> is a U+002E (.) and <var>numbersSeen</var> is less than 4, then increase <var>pointer</var> by 1. </p>
            <li>Otherwise, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①⑥">validation error</a>, return failure. 
           </ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑨">c</a> is not an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-digit" id="ref-for-ascii-digit①">ASCII digit</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①⑦">validation error</a>, return failure. </p>
          <li>
           <p>While <a data-link-type="dfn" href="#c" id="ref-for-c①⓪">c</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-digit" id="ref-for-ascii-digit②">ASCII digit</a>: </p>
           <ol>
            <li>
             <p>Let <var>number</var> be <a data-link-type="dfn" href="#c" id="ref-for-c①①">c</a> interpreted as decimal number. </p>
            <li>
             <p>If <var>ipv4Piece</var> is null, then set <var>ipv4Piece</var> to <var>number</var>. </p>
             <p>Otherwise, if <var>ipv4Piece</var> is 0, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①⑧">validation error</a>, return failure. </p>
             <p>Otherwise, set <var>ipv4Piece</var> to <var>ipv4Piece</var> × 10 + <var>number</var>. </p>
            <li>
             <p>If <var>ipv4Piece</var> is greater than 255, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error①⑨">validation error</a>, return
         failure. </p>
            <li>
             <p>Increase <var>pointer</var> by 1. </p>
           </ol>
          <li>
           <p>Set <var>address</var>[<var>pieceIndex</var>] to <var>address</var>[<var>pieceIndex</var>] × 0x100 + <var>ipv4Piece</var>. </p>
          <li>
           <p>Increase <var>numbersSeen</var> by 1. </p>
          <li>
           <p>If <var>numbersSeen</var> is 2 or 4, then increase <var>pieceIndex</var> by 1. </p>
         </ol>
        <li>
         <p>If <var>numbersSeen</var> is not 4, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②⓪">validation error</a>, return failure. </p>
        <li>
         <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break">Break</a>. </p>
       </ol>
      <li>
       <p>Otherwise, if <a data-link-type="dfn" href="#c" id="ref-for-c①②">c</a> is U+003A (:): </p>
       <ol>
        <li>
         <p>Increase <var>pointer</var> by 1. </p>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c①③">c</a> is the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point②">EOF code point</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②①">validation error</a>, return failure. </p>
       </ol>
      <li>
       <p>Otherwise, if <a data-link-type="dfn" href="#c" id="ref-for-c①④">c</a> is not the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point③">EOF code point</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②②">validation error</a>, return
   failure. </p>
      <li>
       <p>Set <var>address</var>[<var>pieceIndex</var>] to <var>value</var>. </p>
      <li>
       <p>Increase <var>pieceIndex</var> by 1. </p>
     </ol>
    <li>
     <p>If <var>compress</var> is non-null, then: </p>
     <ol>
      <li>
       <p>Let <var>swaps</var> be <var>pieceIndex</var> − <var>compress</var>. </p>
      <li>
       <p>Set <var>pieceIndex</var> to 7. </p>
      <li>
       <p>While <var>pieceIndex</var> is not 0 and <var>swaps</var> is greater than 0, swap <var>address</var>[<var>pieceIndex</var>] with <var>address</var>[<var>compress</var> + <var>swaps</var> − 1], and then decrease both <var>pieceIndex</var> and <var>swaps</var> by 1. </p>
     </ol>
    <li>
     <p>Otherwise, if <var>compress</var> is null and <var>pieceIndex</var> is not 8, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②③">validation error</a>, return failure. </p>
    <li>
     <p>Return <var>address</var>. </p>
   </ol>
   <hr>
   <p>The <dfn data-dfn-type="dfn" data-export="" id="concept-opaque-host-parser">opaque-host parser<a class="self-link" href="#concept-opaque-host-parser"></a></dfn> takes a string <var>input</var>, and then runs these steps: </p>
   <ol>
    <li>
     <p>If <var>input</var> contains a <a data-link-type="dfn" href="#forbidden-host-code-point" id="ref-for-forbidden-host-code-point①">forbidden host code point</a> excluding U+0025 (%), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②④">validation error</a>, return failure. </p>
    <li>
     <p>Let <var>output</var> be the empty string. </p>
    <li>
     <p>For each code point in <var>input</var>, <a data-link-type="dfn" href="#utf-8-percent-encode" id="ref-for-utf-8-percent-encode">UTF-8 percent encode</a> it using the <a data-link-type="dfn" href="#c0-control-percent-encode-set" id="ref-for-c0-control-percent-encode-set①">C0 control percent-encode set</a>, and append the result to <var>output</var>. </p>
    <li>
     <p>Return <var>output</var>. </p>
   </ol>
   <h3 class="heading settled" data-level="3.6" id="host-serializing"><span class="secno">3.6. </span><span class="content">Host serializing</span><a class="self-link" href="#host-serializing"></a></h3>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="concept-host-serializer">host serializer<a class="self-link" href="#concept-host-serializer"></a></dfn> takes a <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host⑧">host</a> <var>host</var> and then runs these steps: </p>
   <ol>
    <li>
     <p>If <var>host</var> is an <a data-link-type="dfn" href="#concept-ipv4" id="ref-for-concept-ipv4③">IPv4 address</a>, return the result of
 running the <a data-link-type="dfn" href="#concept-ipv4-serializer" id="ref-for-concept-ipv4-serializer">IPv4 serializer</a> on <var>host</var>. </p>
    <li>
     <p>Otherwise, if <var>host</var> is an <a data-link-type="dfn" href="#concept-ipv6" id="ref-for-concept-ipv6②">IPv6 address</a>, return U+005B ([), followed by the
 result of running the <a data-link-type="dfn" href="#concept-ipv6-serializer" id="ref-for-concept-ipv6-serializer">IPv6 serializer</a> on <var>host</var>, followed by U+005D (]). </p>
    <li>
     <p>Otherwise, <var>host</var> is a <a data-link-type="dfn" href="#concept-domain" id="ref-for-concept-domain⑤">domain</a>, <a data-link-type="dfn" href="#opaque-host" id="ref-for-opaque-host①">opaque host</a>, or <a data-link-type="dfn" href="#empty-host" id="ref-for-empty-host①">empty host</a>,
 return <var>host</var>. </p>
   </ol>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="concept-ipv4-serializer">IPv4 serializer<a class="self-link" href="#concept-ipv4-serializer"></a></dfn> takes an <a data-link-type="dfn" href="#concept-ipv4" id="ref-for-concept-ipv4④">IPv4 address</a> <var>address</var> and then runs these steps:</p>
   <ol>
    <li>
     <p>Let <var>output</var> be the empty string. </p>
    <li>
     <p>Let <var>n</var> be the value of <var>address</var>. </p>
    <li>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>i</var> in the range 1 to 4, inclusive: </p>
     <ol>
      <li>
       <p>Prepend <var>n</var> % 256, <a data-link-type="dfn" href="#serialize-an-integer" id="ref-for-serialize-an-integer">serialized</a>, to <var>output</var>. </p>
      <li>
       <p>If <var>i</var> is not 4, then prepend U+002E (.) to <var>output</var>. </p>
      <li>
       <p>Set <var>n</var> to floor(<var>n</var> / 256). </p>
     </ol>
    <li>
     <p>Return <var>output</var>. </p>
   </ol>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="concept-ipv6-serializer">IPv6 serializer<a class="self-link" href="#concept-ipv6-serializer"></a></dfn> takes an <a data-link-type="dfn" href="#concept-ipv6" id="ref-for-concept-ipv6③">IPv6 address</a> <var>address</var> and then runs these steps: </p>
   <ol>
    <li>
     <p>Let <var>output</var> be the empty string. </p>
    <li>
     <p>Let <var>compress</var> be an index to the first <a data-link-type="dfn" href="#concept-ipv6-piece" id="ref-for-concept-ipv6-piece①">IPv6 piece</a> in the first longest
  sequences of <var>address</var>’s <a data-link-type="dfn" href="#concept-ipv6-piece" id="ref-for-concept-ipv6-piece②">IPv6 pieces</a> that are 0. </p>
     <p class="example" id="example-e2b3492e"><a class="self-link" href="#example-e2b3492e"></a>In <code>0:f:0:0:f:f:0:0</code> it would point to
  the second 0. </p>
    <li>
     <p>If there is no sequence of <var>address</var>’s <a data-link-type="dfn" href="#concept-ipv6-piece" id="ref-for-concept-ipv6-piece③">IPv6 pieces</a> that are 0 that is
 longer than 1, then set <var>compress</var> to null. </p>
    <li>
     <p>Let <var>ignore0</var> be false. </p>
    <li>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>pieceIndex</var> in the range 0 to 7, inclusive: </p>
     <ol>
      <li>
       <p>If <var>ignore0</var> is true and <var>address</var>[<var>pieceIndex</var>] is 0, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①">continue</a>. </p>
      <li>
       <p>Otherwise, if <var>ignore0</var> is true, set <var>ignore0</var> to false. </p>
      <li>
       <p>If <var>compress</var> is <var>pieceIndex</var>, then: </p>
       <ol>
        <li>
         <p>Let <var>separator</var> be "<code>::</code>" if <var>pieceIndex</var> is 0, and
     U+003A (:) otherwise. </p>
        <li>
         <p>Append <var>separator</var> to <var>output</var>. </p>
        <li>
         <p>Set <var>ignore0</var> to true and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue②">continue</a>. </p>
       </ol>
      <li>
       <p>Append <var>address</var>[<var>pieceIndex</var>], represented as the shortest possible
   lowercase hexadecimal number, to <var>output</var>. </p>
      <li>
       <p>If <var>pieceIndex</var> is not 7, then append U+003A (:) to <var>output</var>. </p>
     </ol>
    <li>
     <p>Return <var>output</var>. </p>
   </ol>
   <p class="note" role="note">This algorithm requires the recommendation from
A Recommendation for IPv6 Address Text Representation. <a data-link-type="biblio" href="#biblio-rfc5952">[RFC5952]</a> </p>
   <h3 class="heading settled" data-level="3.7" id="host-equivalence"><span class="secno">3.7. </span><span class="content">Host equivalence</span><a class="self-link" href="#host-equivalence"></a></h3>
   <p>To determine whether a <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host⑨">host</a> <var>A</var> <dfn data-dfn-for="host" data-dfn-type="dfn" data-export="" data-lt="equal" id="concept-host-equals">equals<a class="self-link" href="#concept-host-equals"></a></dfn> <var>B</var>, return true if <var>A</var> is <var>B</var>, and false otherwise.</p>
   <p class="XXX">Certificate comparison requires a host equivalence check that ignores the
trailing dot of a domain (if any). However, those hosts have also various other facets
enforced, such as DNS length, that are not enforced here, as URLs do not enforce them. If
anyone has a good suggestion for how to bring these two closer together, or what a good
unified model would be, please file an issue. </p>
   <h2 class="heading settled" data-level="4" id="urls"><span class="secno">4. </span><span class="content">URLs</span><a class="self-link" href="#urls"></a></h2>
   <p>At a high level, a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑦">URL</a>, <a data-link-type="dfn" href="#valid-url-string" id="ref-for-valid-url-string">valid URL string</a>, <a data-link-type="dfn" href="#concept-url-parser" id="ref-for-concept-url-parser">URL parser</a>, and <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer">URL serializer</a> relate as follows: </p>
   <ul>
    <li>
     <p>The <a data-link-type="dfn" href="#concept-url-parser" id="ref-for-concept-url-parser①">URL parser</a> takes an arbitrary string and returns either failure or a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑧">URL</a>. </p>
    <li>
     <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑨">URL</a> can be seen as the in-memory representation. </p>
    <li>
     <p>A <a data-link-type="dfn" href="#valid-url-string" id="ref-for-valid-url-string①">valid URL string</a> defines what input would not trigger a <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②⑤">validation error</a> or
 failure when given to the <a data-link-type="dfn" href="#concept-url-parser" id="ref-for-concept-url-parser②">URL parser</a>. I.e., input that would be considered conforming or
 valid. </p>
    <li>
     <p>The <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer①">URL serializer</a> takes a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①⓪">URL</a> and returns a string. (If that string
 is then <a data-link-type="dfn" href="#concept-url-parser" id="ref-for-concept-url-parser③">parsed</a>, the result will <a data-link-type="dfn" href="#concept-url-equals" id="ref-for-concept-url-equals">equal</a> the <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①①">URL</a> that was <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer②">serialized</a>.) </p>
   </ul>
   <div class="example" id="example-url-parsing">
    <a class="self-link" href="#example-url-parsing"></a> 
    <table>
     <tbody>
      <tr>
       <th>Input 
       <th>Base 
       <th>Valid 
       <th>Output 
      <tr>
       <td><code>https:example.org</code> 
       <td>
       <td>❌ 
       <td><code>https://example.org/</code> 
      <tr>
       <td><code>https://////example.com///</code> 
       <td>
       <td>❌ 
       <td><code>https://example.com///</code> 
      <tr>
       <td><code>https://example.com/././foo</code> 
       <td>
       <td>✅ 
       <td><code>https://example.com/foo</code> 
      <tr>
       <td><code>hello:world</code> 
       <td><code>https://example.com/</code> 
       <td>✅ 
       <td><code>hello:world</code> 
      <tr>
       <td><code>https:example.org</code> 
       <td><code>https://example.com/</code> 
       <td>❌ 
       <td><code>https://example.com/example.org</code> 
      <tr>
       <td><code>\example\..\demo/.\</code> 
       <td><code>https://example.com/</code> 
       <td>❌ 
       <td><code>https://example.com/demo/</code> 
      <tr>
       <td><code>example</code> 
       <td><code>https://example.com/demo</code> 
       <td>✅ 
       <td><code>https://example.com/example</code> 
      <tr>
       <td><code>file:///C|/demo</code> 
       <td>
       <td>❌ 
       <td><code>file:///C:/demo</code> 
      <tr>
       <td><code>..</code> 
       <td><code>file:///C:/demo</code> 
       <td>✅ 
       <td><code>file:///C:/</code> 
      <tr>
       <td><code>file://loc%61lhost/</code> 
       <td>
       <td>✅ 
       <td><code>file:///</code> 
      <tr>
       <td><code>https://user:password@example.org/</code> 
       <td>
       <td>❌ 
       <td><code>https://user:password@example.org/</code> 
      <tr>
       <td><code>https://example.org/foo bar</code> 
       <td>
       <td>❌ 
       <td><code>https://example.org/foo%20bar</code> 
      <tr>
       <td><code>https://EXAMPLE.com/../x</code> 
       <td>
       <td>✅ 
       <td><code>https://example.com/x</code> 
      <tr>
       <td><code>https://ex ample.org/</code> 
       <td>
       <td>❌ 
       <td>Failure 
      <tr>
       <td><code>example</code> 
       <td>
       <td>❌, due to lack of base 
       <td>Failure 
      <tr>
       <td><code>https://example.com:demo</code> 
       <td>
       <td>❌ 
       <td>Failure 
      <tr>
       <td><code>http://[www.example.com]/</code> 
       <td>
       <td>❌ 
       <td>Failure 
    </table>
    <p>The base and output <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①②">URL</a> are represented in <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer③">serialized</a> form for brevity. </p>
   </div>
   <h3 class="heading settled" data-level="4.1" id="url-representation"><span class="secno">4.1. </span><span class="content">URL representation</span><a class="self-link" href="#url-representation"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-export="" data-lt="URL|URL record" id="concept-url">URL<a class="self-link" href="#concept-url"></a></dfn> is a universal identifier. To
disambiguate from a <a data-link-type="dfn" href="#valid-url-string" id="ref-for-valid-url-string②">valid URL string</a> it can also be referred to as a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①③">URL record</a>. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①④">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-scheme">scheme<a class="self-link" href="#concept-url-scheme"></a></dfn> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string①">ASCII string</a> that identifies the type of <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①⑤">URL</a> and can be used to
dispatch a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①⑥">URL</a> for further processing after <a data-link-type="dfn" href="#concept-url-parser" id="ref-for-concept-url-parser④">parsing</a>.
It is initially the empty string. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①⑦">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-username">username<a class="self-link" href="#concept-url-username"></a></dfn> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string②">ASCII string</a> identifying a username. It is initially the empty string. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①⑧">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-password">password<a class="self-link" href="#concept-url-password"></a></dfn> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string③">ASCII string</a> identifying a password. It is initially the empty string. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url①⑨">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-host">host<a class="self-link" href="#concept-url-host"></a></dfn> is null or a <a data-link-type="dfn" href="#concept-host" id="ref-for-concept-host①⓪">host</a>. It is initially null. </p>
   <div class="note" role="note">
    <p>The following table lists allowed <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②⓪">URL</a>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme">scheme</a> / <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host">host</a> combinations. </p>
    <table>
     <tbody>
      <tr>
       <th rowspan="2"><a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①">scheme</a> 
       <th colspan="6"><a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①">host</a> 
      <tr>
       <th><a data-link-type="dfn" href="#concept-domain" id="ref-for-concept-domain⑥">domain</a> 
       <th><a data-link-type="dfn" href="#concept-ipv4" id="ref-for-concept-ipv4⑤">IPv4 address</a> 
       <th><a data-link-type="dfn" href="#concept-ipv6" id="ref-for-concept-ipv6④">IPv6 address</a> 
       <th><a data-link-type="dfn" href="#opaque-host" id="ref-for-opaque-host②">opaque host</a> 
       <th><a data-link-type="dfn" href="#empty-host" id="ref-for-empty-host②">empty host</a> 
       <th>null 
      <tr>
       <td>non-"<code>file</code>" <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme">special</a> 
       <td>✅ 
       <td>✅ 
       <td>✅ 
       <td>❌ 
       <td>❌ 
       <td>❌ 
      <tr>
       <td>"<code>file</code>" 
       <td>✅ 
       <td>✅ 
       <td>✅ 
       <td>❌ 
       <td>✅ 
       <td>✅ 
      <tr>
       <td><a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme①">non-special</a> 
       <td>❌ 
       <td>❌ 
       <td>✅ 
       <td>✅ 
       <td>✅ 
       <td>✅ 
    </table>
   </div>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②①">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-port">port<a class="self-link" href="#concept-url-port"></a></dfn> is either
null or a 16-bit unsigned integer that identifies a networking port. It is initially null. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②②">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-path">path<a class="self-link" href="#concept-url-path"></a></dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of
zero or more <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string④">ASCII strings</a> holding data, usually identifying a location in hierarchical form.
It is initially empty. </p>
   <p class="note no-backref" role="note">A <a data-link-type="dfn" href="#is-special" id="ref-for-is-special">special</a> <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②③">URL</a> always has a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty">non-empty</a> <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path">path</a>. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②④">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-query">query<a class="self-link" href="#concept-url-query"></a></dfn> is either
null or an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string⑤">ASCII string</a> holding data. It is initially null. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②⑤">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-fragment">fragment<a class="self-link" href="#concept-url-fragment"></a></dfn> is
either null or an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string⑥">ASCII string</a> holding data that can be used for further processing on the
resource the <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②⑥">URL</a>’s other components identify. It is initially null. </p>
   <p id="non-relative-flag">A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②⑦">URL</a> also has an associated <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="url-cannot-be-a-base-url-flag">cannot-be-a-base-URL flag<a class="self-link" href="#url-cannot-be-a-base-url-flag"></a></dfn>. It is initially unset. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②⑧">URL</a> also has an associated <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-object">object<a class="self-link" href="#concept-url-object"></a></dfn> that is null, a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob">Blob</a></code> object, a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/media-source/#idl-def-mediasource" id="ref-for-idl-def-mediasource">MediaSource</a></code> object, or a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#idl-def-mediastream" id="ref-for-idl-def-mediastream">MediaStream</a></code> object. It is initially null. <a data-link-type="biblio" href="#biblio-fileapi">[FILEAPI]</a> <a data-link-type="biblio" href="#biblio-media-source">[MEDIA-SOURCE]</a> <a data-link-type="biblio" href="#biblio-mediacapture-streams">[MEDIACAPTURE-STREAMS]</a> </p>
   <p class="note no-backref" role="note">At this point this is used primarily to support
"<code>blob</code>" <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url②⑨">URLs</a>, but others can be added going forward, hence
"object". </p>
   <h3 class="heading settled" data-level="4.2" id="url-miscellaneous"><span class="secno">4.2. </span><span class="content">URL miscellaneous</span><a class="self-link" href="#url-miscellaneous"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="special-scheme">special scheme<a class="self-link" href="#special-scheme"></a></dfn> is a <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②">scheme</a> listed in the first column of
the following table. A <dfn data-dfn-type="dfn" data-noexport="" id="default-port">default port<a class="self-link" href="#default-port"></a></dfn> is a <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme②">special scheme</a>’s optional
corresponding <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port">port</a> and is listed in the second column on the same row. </p>
   <table>
    <tbody>
     <tr>
      <th><a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme③">scheme</a> 
      <th><a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①">port</a> 
     <tr>
      <td>"<code>ftp</code>"
      <td>21 
     <tr>
      <td>"<code>file</code>"
      <td>
     <tr>
      <td>"<code>gopher</code>"
      <td>70 
     <tr>
      <td>"<code>http</code>"
      <td>80 
     <tr>
      <td>"<code>https</code>"
      <td>443 
     <tr>
      <td>"<code>ws</code>"
      <td>80 
     <tr>
      <td>"<code>wss</code>"
      <td>443 
   </table>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③⓪">URL</a> <dfn data-dfn-type="dfn" data-export="" id="is-special">is special<a class="self-link" href="#is-special"></a></dfn> if its <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme④">scheme</a> is a <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme③">special scheme</a>. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③①">URL</a> <dfn data-dfn-type="dfn" data-export="" data-lt="include credentials|includes credentials" id="include-credentials">includes credentials<a class="self-link" href="#include-credentials"></a></dfn> if its <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username">username</a> or <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password">password</a> is not the empty string. </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③②">URL</a> <dfn data-dfn-type="dfn" data-export="" id="cannot-have-a-username-password-port">cannot have a username/password/port<a class="self-link" href="#cannot-have-a-username-password-port"></a></dfn> if its <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②">host</a> is null or the empty string, its <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag">cannot-be-a-base-URL flag</a> is
set, or its <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme⑤">scheme</a> is "<code>file</code>". </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③③">URL</a> can be designated as <dfn data-dfn-type="dfn" data-noexport="" id="concept-base-url">base URL<a class="self-link" href="#concept-base-url"></a></dfn>. </p>
   <p class="note no-backref" role="note">A <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url">base URL</a> is useful for the <a data-link-type="dfn" href="#concept-url-parser" id="ref-for-concept-url-parser⑤">URL parser</a> when the
input might be a <a data-link-type="dfn" href="#relative-url-string" id="ref-for-relative-url-string">relative-URL string</a>. </p>
   <hr>
   <p>A <dfn data-dfn-type="dfn" data-noexport="" id="windows-drive-letter">Windows drive letter<a class="self-link" href="#windows-drive-letter"></a></dfn> is two code points, of which the first is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alpha" id="ref-for-ascii-alpha">ASCII alpha</a> and the second is either U+003A (:) or U+007C (|). </p>
   <p>A <dfn data-dfn-type="dfn" data-noexport="" id="normalized-windows-drive-letter">normalized Windows drive letter<a class="self-link" href="#normalized-windows-drive-letter"></a></dfn> is a <a data-link-type="dfn" href="#windows-drive-letter" id="ref-for-windows-drive-letter">Windows drive letter</a> of which the second
code point is U+003A (:). </p>
   <p class="note" role="note">As per the <a href="#url-writing">URL writing</a> section, only a <a data-link-type="dfn" href="#normalized-windows-drive-letter" id="ref-for-normalized-windows-drive-letter">normalized Windows drive letter</a> is conforming. </p>
   <p>A string <dfn data-dfn-type="dfn" data-lt="start with a Windows drive letter|starts with a Windows drive letter" data-noexport="" id="start-with-a-windows-drive-letter">starts with a Windows drive letter<a class="self-link" href="#start-with-a-windows-drive-letter"></a></dfn> if all of the following are true: </p>
   <ul class="brief">
    <li>its <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length">length</a> is greater than or equal to 2 
    <li>its first two code points are a <a data-link-type="dfn" href="#windows-drive-letter" id="ref-for-windows-drive-letter①">Windows drive letter</a> 
    <li>its <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length①">length</a> is 2 or its third code point is U+002F (/), U+005C (\),
 U+003F (?), or U+0023 (#). 
   </ul>
   <div class="example" id="example-start-with-a-widows-drive-letter">
    <a class="self-link" href="#example-start-with-a-widows-drive-letter"></a> 
    <table>
     <tbody>
      <tr>
       <th>String 
       <th>Starts with a Windows drive letter 
      <tr>
       <td>"<code>c:</code>" 
       <td>✅ 
      <tr>
       <td>"<code>c:/</code>" 
       <td>✅ 
      <tr>
       <td>"<code>c:a</code>" 
       <td>❌ 
    </table>
   </div>
   <p id="pop-a-urls-path">To <dfn data-dfn-type="dfn" data-local-lt="shorten" data-noexport="" id="shorten-a-urls-path">shorten a <var>url</var>’s path<a class="self-link" href="#shorten-a-urls-path"></a></dfn>: </p>
   <ol>
    <li>
     <p>Let <var>path</var> be <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①">path</a>. </p>
    <li>
     <p>If <var>path</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty①">is empty</a>, then return. </p>
    <li>
     <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme⑥">scheme</a> is "<code>file</code>", <var>path</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size">size</a> is 1, and <var>path</var>[0] is a <a data-link-type="dfn" href="#normalized-windows-drive-letter" id="ref-for-normalized-windows-drive-letter①">normalized Windows drive letter</a>, then
 return. </p>
    <li>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">Remove</a> <var>path</var>’s last item. </p>
   </ol>
   <h3 class="heading settled" data-level="4.3" id="url-writing"><span class="secno">4.3. </span><span class="content">URL writing</span><span id="url-syntax"></span><a class="self-link" href="#url-writing"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="valid-url-string">valid URL string<span id="syntax-url"></span><a class="self-link" href="#valid-url-string"></a></dfn> must be either a <a data-link-type="dfn" href="#relative-url-with-fragment-string" id="ref-for-relative-url-with-fragment-string">relative-URL-with-fragment string</a> or an <a data-link-type="dfn" href="#absolute-url-with-fragment-string" id="ref-for-absolute-url-with-fragment-string">absolute-URL-with-fragment string</a>. </p>
   <p>An <dfn data-dfn-type="dfn" data-export="" id="absolute-url-with-fragment-string">absolute-URL-with-fragment string<span id="syntax-url-absolute-with-fragment"></span><a class="self-link" href="#absolute-url-with-fragment-string"></a></dfn> must be
an <a data-link-type="dfn" href="#absolute-url-string" id="ref-for-absolute-url-string">absolute-URL string</a>, optionally followed by U+0023 (#) and a <a data-link-type="dfn" href="#url-fragment-string" id="ref-for-url-fragment-string">URL-fragment string</a>. </p>
   <p>An <dfn data-dfn-type="dfn" data-export="" id="absolute-url-string">absolute-URL string<span id="syntax-url-absolute"></span><a class="self-link" href="#absolute-url-string"></a></dfn> must be one of the following </p>
   <ul class="brief">
    <li>
     <p>a <a data-link-type="dfn" href="#url-scheme-string" id="ref-for-url-scheme-string">URL-scheme string</a> that is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive">ASCII case-insensitive</a> match for a <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme④">special scheme</a> and not an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive①">ASCII case-insensitive</a> match for "<code>file</code>",
 followed by U+003A (:) and a <a data-link-type="dfn" href="#scheme-relative-special-url-string" id="ref-for-scheme-relative-special-url-string">scheme-relative-special-URL string</a> </p>
    <li>
     <p>a <a data-link-type="dfn" href="#url-scheme-string" id="ref-for-url-scheme-string①">URL-scheme string</a> that is <em>not</em> an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive②">ASCII case-insensitive</a> match for a <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme⑤">special scheme</a>, followed by U+003A (:) and a <a data-link-type="dfn" href="#relative-url-string" id="ref-for-relative-url-string①">relative-URL string</a> </p>
    <li>
     <p>a <a data-link-type="dfn" href="#url-scheme-string" id="ref-for-url-scheme-string②">URL-scheme string</a> that is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive③">ASCII case-insensitive</a> match for
 "<code>file</code>", followed by U+003A (:) and a <a data-link-type="dfn" href="#scheme-relative-file-url-string" id="ref-for-scheme-relative-file-url-string">scheme-relative-file-URL string</a> </p>
   </ul>
   <p>any optionally followed by U+003F (?) and a <a data-link-type="dfn" href="#url-query-string" id="ref-for-url-query-string">URL-query string</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="url-scheme-string">URL-scheme string<span id="syntax-url-scheme"></span><a class="self-link" href="#url-scheme-string"></a></dfn> must be one <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alpha" id="ref-for-ascii-alpha①">ASCII alpha</a>,
followed by zero or more of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alphanumeric" id="ref-for-ascii-alphanumeric">ASCII alphanumeric</a>, U+002B (+), U+002D (-), and U+002E (.). <a data-link-type="dfn" href="#url-scheme-string" id="ref-for-url-scheme-string③">Schemes</a> should be registered in the <cite>IANA URI [sic] Schemes</cite> registry. <a data-link-type="biblio" href="#biblio-iana-uri-schemes">[IANA-URI-SCHEMES]</a> <a data-link-type="biblio" href="#biblio-rfc7595">[RFC7595]</a> </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="relative-url-with-fragment-string">relative-URL-with-fragment string<span id="syntax-url-relative-with-fragment"></span><a class="self-link" href="#relative-url-with-fragment-string"></a></dfn> must be a <a data-link-type="dfn" href="#relative-url-string" id="ref-for-relative-url-string②">relative-URL string</a>, optionally followed by U+0023 (#) and a <a data-link-type="dfn" href="#url-fragment-string" id="ref-for-url-fragment-string①">URL-fragment string</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="relative-url-string">relative-URL string<span id="syntax-url-relative"></span><a class="self-link" href="#relative-url-string"></a></dfn> must be one of the following,
switching on <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url①">base URL</a>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme⑦">scheme</a>: </p>
   <dl class="switch">
    <dt>A <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme⑥">special scheme</a> that is not "<code>file</code>" 
    <dd>
     <p>a <a data-link-type="dfn" href="#scheme-relative-special-url-string" id="ref-for-scheme-relative-special-url-string①">scheme-relative-special-URL string</a> </p>
    <dd>
     <p>a <a data-link-type="dfn" href="#path-absolute-url-string" id="ref-for-path-absolute-url-string">path-absolute-URL string</a> </p>
    <dd>
     <p>a <a data-link-type="dfn" href="#path-relative-scheme-less-url-string" id="ref-for-path-relative-scheme-less-url-string">path-relative-scheme-less-URL string</a> </p>
    <dt>"<code>file</code>" 
    <dd>
     <p>a <a data-link-type="dfn" href="#scheme-relative-file-url-string" id="ref-for-scheme-relative-file-url-string①">scheme-relative-file-URL string</a> </p>
    <dd>
     <p>a <a data-link-type="dfn" href="#path-absolute-url-string" id="ref-for-path-absolute-url-string①">path-absolute-URL string</a> if <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url②">base URL</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③">host</a> is an <a data-link-type="dfn" href="#empty-host" id="ref-for-empty-host③">empty host</a> </p>
    <dd>
     <p>a <a data-link-type="dfn" href="#path-absolute-non-windows-file-url-string" id="ref-for-path-absolute-non-windows-file-url-string">path-absolute-non-Windows-file-URL string</a> if <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url③">base URL</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host④">host</a> is not an <a data-link-type="dfn" href="#empty-host" id="ref-for-empty-host④">empty host</a> </p>
    <dd>
     <p>a <a data-link-type="dfn" href="#path-relative-scheme-less-url-string" id="ref-for-path-relative-scheme-less-url-string①">path-relative-scheme-less-URL string</a> </p>
    <dt>Otherwise 
    <dd>
     <p>a <a data-link-type="dfn" href="#scheme-relative-url-string" id="ref-for-scheme-relative-url-string">scheme-relative-URL string</a> </p>
    <dd>
     <p>a <a data-link-type="dfn" href="#path-absolute-url-string" id="ref-for-path-absolute-url-string②">path-absolute-URL string</a> </p>
    <dd>
     <p>a <a data-link-type="dfn" href="#path-relative-scheme-less-url-string" id="ref-for-path-relative-scheme-less-url-string②">path-relative-scheme-less-URL string</a> </p>
   </dl>
   <p>any optionally followed by U+003F (?) and a <a data-link-type="dfn" href="#url-query-string" id="ref-for-url-query-string①">URL-query string</a>. </p>
   <p class="note no-backref" role="note">A non-null <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url④">base URL</a> is necessary when <a data-link-type="dfn" href="#concept-url-parser" id="ref-for-concept-url-parser⑥">parsing</a> a <a data-link-type="dfn" href="#relative-url-string" id="ref-for-relative-url-string③">relative-URL string</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="scheme-relative-special-url-string">scheme-relative-special-URL string<a class="self-link" href="#scheme-relative-special-url-string"></a></dfn> must be "<code>//</code>", followed by a <a data-link-type="dfn" href="#valid-host-string" id="ref-for-valid-host-string③">valid host string</a>, optionally followed by U+003A (:) and a <a data-link-type="dfn" href="#url-port-string" id="ref-for-url-port-string">URL-port string</a>, optionally
followed by a <a data-link-type="dfn" href="#path-absolute-url-string" id="ref-for-path-absolute-url-string③">path-absolute-URL string</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="url-port-string">URL-port string<span id="syntax-url-port"></span><a class="self-link" href="#url-port-string"></a></dfn> must be zero or more <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-digit" id="ref-for-ascii-digit③">ASCII digits</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="scheme-relative-url-string">scheme-relative-URL string<span id="syntax-url-scheme-relative"></span><a class="self-link" href="#scheme-relative-url-string"></a></dfn> must be
"<code>//</code>", followed by an <a data-link-type="dfn" href="#opaque-host-and-port-string" id="ref-for-opaque-host-and-port-string">opaque-host-and-port string</a>, optionally followed by a <a data-link-type="dfn" href="#path-absolute-url-string" id="ref-for-path-absolute-url-string④">path-absolute-URL string</a>. </p>
   <p>An <dfn data-dfn-type="dfn" data-export="" id="opaque-host-and-port-string">opaque-host-and-port string<a class="self-link" href="#opaque-host-and-port-string"></a></dfn> must be either the empty string or: a <a data-link-type="dfn" href="#valid-opaque-host-string" id="ref-for-valid-opaque-host-string">valid opaque-host string</a>, optionally followed by U+003A (:) and a <a data-link-type="dfn" href="#url-port-string" id="ref-for-url-port-string①">URL-port string</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="scheme-relative-file-url-string">scheme-relative-file-URL string<span id="syntax-url-file-scheme-relative"></span><a class="self-link" href="#scheme-relative-file-url-string"></a></dfn> must be
"<code>//</code>", followed by one of the following </p>
   <ul class="brief">
    <li>
     <p>a <a data-link-type="dfn" href="#valid-host-string" id="ref-for-valid-host-string④">valid host string</a>, optionally followed by a <a data-link-type="dfn" href="#path-absolute-non-windows-file-url-string" id="ref-for-path-absolute-non-windows-file-url-string①">path-absolute-non-Windows-file-URL string</a> </p>
    <li>
     <p>a <a data-link-type="dfn" href="#path-absolute-url-string" id="ref-for-path-absolute-url-string⑤">path-absolute-URL string</a>. </p>
   </ul>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="path-absolute-url-string">path-absolute-URL string<span id="syntax-url-path-absolute"></span><a class="self-link" href="#path-absolute-url-string"></a></dfn> must be U+002F (/)
followed by a <a data-link-type="dfn" href="#path-relative-url-string" id="ref-for-path-relative-url-string">path-relative-URL string</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="path-absolute-non-windows-file-url-string">path-absolute-non-Windows-file-URL string<span id="syntax-url-file-path-absolute"></span><a class="self-link" href="#path-absolute-non-windows-file-url-string"></a></dfn> must be a <a data-link-type="dfn" href="#path-absolute-url-string" id="ref-for-path-absolute-url-string⑥">path-absolute-URL string</a> that does not start with: U+002F (/), followed by a <a data-link-type="dfn" href="#windows-drive-letter" id="ref-for-windows-drive-letter②">Windows drive letter</a>, followed by U+002F (/). </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="path-relative-url-string">path-relative-URL string<span id="syntax-url-path-relative"></span><a class="self-link" href="#path-relative-url-string"></a></dfn> must be zero or more <a data-link-type="dfn" href="#url-path-segment-string" id="ref-for-url-path-segment-string">URL-path-segment strings</a>, separated from each other by U+002F (/), and not start with
U+002F (/). </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="path-relative-scheme-less-url-string">path-relative-scheme-less-URL string<span id="syntax-url-path-relative-scheme-less"></span><a class="self-link" href="#path-relative-scheme-less-url-string"></a></dfn> must be a <a data-link-type="dfn" href="#path-relative-url-string" id="ref-for-path-relative-url-string①">path-relative-URL string</a> that does not start with: a <a data-link-type="dfn" href="#url-scheme-string" id="ref-for-url-scheme-string④">URL-scheme string</a>,
followed by U+003A (:). </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="url-path-segment-string">URL-path-segment string<span id="syntax-url-path-segment"></span><a class="self-link" href="#url-path-segment-string"></a></dfn> must be one of the
following </p>
   <ul class="brief">
    <li>
     <p>zero or more <a data-link-type="dfn" href="#url-units" id="ref-for-url-units①">URL units</a>, excluding U+002F (/) and U+003F (?), that together are not a <a data-link-type="dfn" href="#single-dot-path-segment" id="ref-for-single-dot-path-segment">single-dot path segment</a> or a <a data-link-type="dfn" href="#double-dot-path-segment" id="ref-for-double-dot-path-segment">double-dot path segment</a>. </p>
    <li>
     <p>a <a data-link-type="dfn" href="#single-dot-path-segment" id="ref-for-single-dot-path-segment①">single-dot path segment</a> </p>
    <li>
     <p>a <a data-link-type="dfn" href="#double-dot-path-segment" id="ref-for-double-dot-path-segment①">double-dot path segment</a>. </p>
   </ul>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="single-dot-path-segment">single-dot path segment<span id="syntax-url-path-segment-dot"></span><a class="self-link" href="#single-dot-path-segment"></a></dfn> must be
"<code>.</code>" or an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive④">ASCII case-insensitive</a> match for "<code>%2e</code>". </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="double-dot-path-segment">double-dot path segment<span id="syntax-url-path-segment-dotdot"></span><a class="self-link" href="#double-dot-path-segment"></a></dfn> must be
"<code>..</code>" or an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive⑤">ASCII case-insensitive</a> match for "<code>.%2e</code>",
"<code>%2e.</code>", or "<code>%2e%2e</code>". </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="url-query-string">URL-query string<span id="syntax-url-query"></span><a class="self-link" href="#url-query-string"></a></dfn> must be zero or more <a data-link-type="dfn" href="#url-units" id="ref-for-url-units②">URL units</a>. </p>
   <p>A <dfn data-dfn-type="dfn" data-export="" id="url-fragment-string">URL-fragment string<span id="syntax-url-fragment"></span><a class="self-link" href="#url-fragment-string"></a></dfn> must be zero or more <a data-link-type="dfn" href="#url-units" id="ref-for-url-units③">URL units</a>. </p>
   <p>The <dfn data-dfn-type="dfn" data-export="" data-lt="URL code point" id="url-code-points">URL code points<a class="self-link" href="#url-code-points"></a></dfn> are <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alphanumeric" id="ref-for-ascii-alphanumeric①">ASCII alphanumeric</a>,
U+0021 (!),
U+0024 ($),
U+0026 (&amp;),
U+0027 ('),
U+0028 LEFT PARENTHESIS,
U+0029 RIGHT PARENTHESIS,
U+002A (*),
U+002B (+),
U+002C (,),
U+002D (-),
U+002E (.),
U+002F (/),
U+003A (:),
U+003B (;),
U+003D (=),
U+003F (?),
U+0040 (@),
U+005F (_),
U+007E (~),
and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point②">code points</a> in the range U+00A0 to U+10FFFD, inclusive, excluding <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#surrogate" id="ref-for-surrogate">surrogates</a> and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#noncharacter" id="ref-for-noncharacter">noncharacters</a>. </p>
   <p class="note" role="note">Code points greater than U+007F DELETE will be converted to <a data-link-type="dfn" href="#percent-encoded-byte" id="ref-for-percent-encoded-byte②">percent-encoded bytes</a> by the <a data-link-type="dfn" href="#concept-url-parser" id="ref-for-concept-url-parser⑦">URL parser</a>. </p>
   <p class="note" role="note">In HTML, when the document encoding is a legacy encoding, code points in the <a data-link-type="dfn" href="#url-query-string" id="ref-for-url-query-string②">URL-query string</a> that are higher than U+007F DELETE will be converted to <a data-link-type="dfn" href="#percent-encoded-byte" id="ref-for-percent-encoded-byte③">percent-encoded bytes</a> <em>using the document’s encoding</em>. This
can cause problems if a URL that works in one document is copied to another document that uses a
different document encoding. Using the <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8" id="ref-for-utf-8">UTF-8</a> encoding everywhere solves this problem. </p>
   <div class="example" id="query-encoding-example">
    <a class="self-link" href="#query-encoding-example"></a> 
    <p>For example, consider this HTML document: </p>
<pre><code class="lang-html highlight"><span class="cp">&lt;!doctype html></span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"windows-1252"</span><span class="p">></span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"?sm&amp;ouml;rg&amp;aring;sbord"</span><span class="p">></span>Test<span class="p">&lt;/</span><span class="nt">a</span><span class="p">></span></code></pre>
    <p>Since the document encoding is windows-1252, the link’s <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③④">URL</a>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query">query</a> will be "<code>sm%F6rg%E5sbord</code>". If the document encoding had been UTF-8, it would instead
 be "<code>sm%C3%B6rg%C3%A5sbord</code>". </p>
   </div>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="url-units">URL units<a class="self-link" href="#url-units"></a></dfn> are <a data-link-type="dfn" href="#url-code-points" id="ref-for-url-code-points">URL code points</a> and <a data-link-type="dfn" href="#percent-encoded-byte" id="ref-for-percent-encoded-byte④">percent-encoded bytes</a>. </p>
   <p class="note" role="note"><a data-link-type="dfn" href="#percent-encoded-byte" id="ref-for-percent-encoded-byte⑤">Percent-encoded bytes</a> can be used to encode code points that are not <a data-link-type="dfn" href="#url-code-points" id="ref-for-url-code-points①">URL code points</a> or are excluded from being written. </p>
   <hr>
   <p class="note no-backref" role="note">There is no way to express a <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①">username</a> or <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①">password</a> of a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③⑤">URL record</a> within a <a data-link-type="dfn" href="#valid-url-string" id="ref-for-valid-url-string③">valid URL string</a>. </p>
   <h3 class="heading settled" data-level="4.4" id="url-parsing"><span class="secno">4.4. </span><span class="content">URL parsing</span><a class="self-link" href="#url-parsing"></a></h3>
   <p>The <dfn data-dfn-type="dfn" data-export="" id="concept-url-parser">URL parser<a class="self-link" href="#concept-url-parser"></a></dfn> takes a string <var>input</var>, with an optional <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url⑤">base URL</a> <var>base</var> and an optional <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#encoding" id="ref-for-encoding">encoding</a> <var>encoding override</var>, and then runs these steps: </p>
   <p class="note no-backref" role="note">Non-web-browser implementations only need to implement the <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser">basic URL parser</a>. </p>
   <ol>
    <li>
     <p>Let <var>url</var> be the result of running the <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser①">basic URL parser</a> on <var>input</var> with <var>base</var>, and <var>encoding override</var> as provided. </p>
    <li>
     <p>If <var>url</var> is failure, return failure. </p>
    <li>
     <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme⑧">scheme</a> is not
 "<code>blob</code>", return <var>url</var>. </p>
    <li>
     <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②">path</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty②">is empty</a> or <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③">path</a>[0] is not in the <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#BlobURLStore" id="ref-for-BlobURLStore">Blob URL Store</a>, then return <var>url</var>. <a data-link-type="biblio" href="#biblio-fileapi">[FILEAPI]</a> </p>
    <li>
     <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-object" id="ref-for-concept-url-object">object</a> to the entry in the <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#BlobURLStore" id="ref-for-BlobURLStore①">Blob URL Store</a> corresponding to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path④">path</a>[0]. </p>
    <li>
     <p>Return <var>url</var>. </p>
   </ol>
   <hr>
   <p>The <dfn data-dfn-type="dfn" data-export="" id="concept-basic-url-parser">basic URL parser<a class="self-link" href="#concept-basic-url-parser"></a></dfn> takes a
string <var>input</var>, optionally with a <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url⑥">base URL</a> <var>base</var>, optionally with an <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#encoding" id="ref-for-encoding①">encoding</a> <var>encoding override</var>, optionally with a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③⑥">URL</a> <var>url</var> and a state override <var>state override</var>, and then runs these steps: </p>
   <div class="note no-backref" role="note">
    <p>The <var>encoding override</var> argument is a legacy concept only relevant for
 HTML. The <var>url</var> and <var>state override</var> arguments are only for use by various APIs. <a data-link-type="biblio" href="#biblio-html">[HTML]</a> </p>
    <p>When the <var>url</var> and <var>state override</var> arguments are not passed, the <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser②">basic URL parser</a> returns either a new <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③⑦">URL</a> or failure. If they are passed, the
 algorithm modifies the passed <var>url</var> and can terminate without returning anything. </p>
   </div>
   <ol>
    <li>
     <p>If <var>url</var> is not given: </p>
     <ol>
      <li>
       <p>Set <var>url</var> to a new <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③⑧">URL</a>. </p>
      <li>
       <p>If <var>input</var> contains any leading or trailing <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#c0-control-or-space" id="ref-for-c0-control-or-space">C0 control or space</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②⑥">validation error</a>. </p>
      <li>
       <p>Remove any leading and trailing <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#c0-control-or-space" id="ref-for-c0-control-or-space①">C0 control or space</a> from <var>input</var>. </p>
     </ol>
    <li>
     <p>If <var>input</var> contains any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-tab-or-newline" id="ref-for-ascii-tab-or-newline">ASCII tab or newline</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②⑦">validation error</a>. </p>
    <li>
     <p>Remove all <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-tab-or-newline" id="ref-for-ascii-tab-or-newline①">ASCII tab or newline</a> from <var>input</var>. </p>
    <li>
     <p>Let <var>state</var> be <var>state override</var> if given, or <a data-link-type="dfn" href="#scheme-start-state" id="ref-for-scheme-start-state">scheme start state</a> otherwise. </p>
    <li>
     <p>If <var>base</var> is not given, set it to null. </p>
    <li>
     <p>Let <var>encoding</var> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8" id="ref-for-utf-8①">UTF-8</a>. </p>
    <li>
     <p>If <var>encoding override</var> is given, set <var>encoding</var> to the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#get-an-output-encoding" id="ref-for-get-an-output-encoding">getting an output encoding</a> from <var>encoding override</var>. </p>
    <li>
     <p>Let <var>buffer</var> be the empty string. </p>
    <li>
     <p>Let the <var>@ flag</var>, <var>[] flag</var>, and <var>passwordTokenSeenFlag</var> be
 unset. </p>
    <li>
     <p>Let <var>pointer</var> be a pointer to first code point in <var>input</var>. </p>
    <li>
     <p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point④">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by one and continue with the state machine. </p>
     <dl class="switch">
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="scheme-start-state">scheme start state<a class="self-link" href="#scheme-start-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c①⑤">c</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alpha" id="ref-for-ascii-alpha②">ASCII alpha</a>,
     append <a data-link-type="dfn" href="#c" id="ref-for-c①⑥">c</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-lowercase" id="ref-for-ascii-lowercase">lowercased</a>, to <var>buffer</var>, and
     set <var>state</var> to <a data-link-type="dfn" href="#scheme-state" id="ref-for-scheme-state">scheme state</a>. </p>
        <li>
         <p>Otherwise, if <var>state override</var> is not given, set <var>state</var> to <a data-link-type="dfn" href="#no-scheme-state" id="ref-for-no-scheme-state">no scheme state</a>, and decrease <var>pointer</var> by one. </p>
        <li>
         <p>Otherwise, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②⑧">validation error</a>, return failure. </p>
         <p class="note" role="note">This indication of failure is used exclusively by <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#location" id="ref-for-location">Location</a></code> object’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#dom-location-protocol" id="ref-for-dom-location-protocol">protocol</a></code> attribute. </p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="scheme-state">scheme state<a class="self-link" href="#scheme-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c①⑦">c</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alphanumeric" id="ref-for-ascii-alphanumeric②">ASCII alphanumeric</a>, U+002B (+), U+002D (-), or U+002E (.),
     append <a data-link-type="dfn" href="#c" id="ref-for-c①⑧">c</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-lowercase" id="ref-for-ascii-lowercase①">lowercased</a>, to <var>buffer</var>. </p>
        <li>
         <p>Otherwise, if <a data-link-type="dfn" href="#c" id="ref-for-c①⑨">c</a> is U+003A (:), then: </p>
         <ol>
          <li>
           <p>If <var>state override</var> is given, then: </p>
           <ol>
            <li>
             <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme⑨">scheme</a> is a <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme⑦">special scheme</a> and <var>buffer</var> is not a <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme⑧">special scheme</a>, then return. </p>
            <li>
             <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①⓪">scheme</a> is not a <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme⑨">special scheme</a> and <var>buffer</var> is a <a data-link-type="dfn" href="#special-scheme" id="ref-for-special-scheme①⓪">special scheme</a>, then return. </p>
            <li>
             <p>If <var>url</var> <a data-link-type="dfn" href="#include-credentials" id="ref-for-include-credentials">includes credentials</a> or has a non-null <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port②">port</a>,
         and <var>buffer</var> is "<code>file</code>", then return. </p>
            <li>
             <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①①">scheme</a> is "<code>file</code>" and its <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host⑤">host</a> is an <a data-link-type="dfn" href="#empty-host" id="ref-for-empty-host⑤">empty host</a> or null, then return. </p>
           </ol>
          <li>
           <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①②">scheme</a> to <var>buffer</var>. </p>
          <li>
           <p>If <var>state override</var> is given, then: </p>
           <ol>
            <li>
             <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port③">port</a> is <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①③">scheme</a>’s <a data-link-type="dfn" href="#default-port" id="ref-for-default-port">default port</a>, then set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port④">port</a> to null. </p>
            <li>
             <p>Return. </p>
           </ol>
          <li>
           <p>Set <var>buffer</var> to the empty string. </p>
          <li>
           <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①④">scheme</a> is "<code>file</code>", then: </p>
           <ol>
            <li>
             <p>If <a data-link-type="dfn" href="#remaining" id="ref-for-remaining②">remaining</a> does not start with "<code>//</code>", <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error②⑨">validation error</a>. </p>
            <li>
             <p>Set <var>state</var> to <a data-link-type="dfn" href="#file-state" id="ref-for-file-state">file state</a>. </p>
           </ol>
          <li>
           <p>Otherwise, if <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①">is special</a>, <var>base</var> is non-null, and <var>base</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①⑤">scheme</a> is equal to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①⑥">scheme</a>,
        set <var>state</var> to <a data-link-type="dfn" href="#special-relative-or-authority-state" id="ref-for-special-relative-or-authority-state">special relative or authority state</a>. </p>
           <p class="note no-backref" role="note">This means that <var>base</var>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag①">cannot-be-a-base-URL flag</a> is unset. </p>
          <li>
           <p>Otherwise, if <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special②">is special</a>, set <var>state</var> to <a data-link-type="dfn" href="#special-authority-slashes-state" id="ref-for-special-authority-slashes-state">special authority slashes state</a>. </p>
          <li>
           <p>Otherwise, if <a data-link-type="dfn" href="#remaining" id="ref-for-remaining③">remaining</a> starts with an U+002F (/), set <var>state</var> to <a data-link-type="dfn" href="#path-or-authority-state" id="ref-for-path-or-authority-state">path or authority state</a> and increase <var>pointer</var> by one. </p>
          <li>
           <p>Otherwise, set <var>url</var>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag②">cannot-be-a-base-URL flag</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">append</a> an empty string to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path⑤">path</a>, and set <var>state</var> to <a data-link-type="dfn" href="#cannot-be-a-base-url-path-state" id="ref-for-cannot-be-a-base-url-path-state">cannot-be-a-base-URL path state</a>. </p>
         </ol>
        <li>
         <p>Otherwise, if <var>state override</var> is not given, set <var>buffer</var> to the empty string, <var>state</var> to <a data-link-type="dfn" href="#no-scheme-state" id="ref-for-no-scheme-state①">no scheme state</a>, and start over (from the first code point
     in <var>input</var>). </p>
        <li>
         <p>Otherwise, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③⓪">validation error</a>, return failure. </p>
         <p class="note" role="note">This indication of failure is used exclusively by <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#location" id="ref-for-location①">Location</a></code> object’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#dom-location-protocol" id="ref-for-dom-location-protocol①">protocol</a></code> attribute. Furthermore, the non-failure termination earlier in this
      state is an intentional difference for defining that attribute. </p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="no-scheme-state">no scheme state<a class="self-link" href="#no-scheme-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <var>base</var> is null, or <var>base</var>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag③">cannot-be-a-base-URL flag</a> is set and <a data-link-type="dfn" href="#c" id="ref-for-c②⓪">c</a> is not U+0023 (#), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③①">validation error</a>, return failure. </p>
        <li>
         <p>Otherwise, if <var>base</var>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag④">cannot-be-a-base-URL flag</a> is set and <a data-link-type="dfn" href="#c" id="ref-for-c②①">c</a> is U+0023 (#), set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①⑦">scheme</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①⑧">scheme</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path⑥">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path⑦">path</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①">query</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query②">query</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment">fragment</a> to the empty string, set <var>url</var>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag⑤">cannot-be-a-base-URL flag</a>, and set <var>state</var> to <a data-link-type="dfn" href="#fragment-state" id="ref-for-fragment-state">fragment state</a>. </p>
        <li>
         <p>Otherwise, if <var>base</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme①⑨">scheme</a> is not
     "<code>file</code>", set <var>state</var> to <a data-link-type="dfn" href="#relative-state" id="ref-for-relative-state">relative state</a> and decrease <var>pointer</var> by one. </p>
        <li>
         <p>Otherwise, set <var>state</var> to <a data-link-type="dfn" href="#file-state" id="ref-for-file-state①">file state</a> and decrease <var>pointer</var> by one. </p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="special-relative-or-authority-state">special relative or authority state<a class="self-link" href="#special-relative-or-authority-state"></a></dfn> 
      <dd>
       <p>If <a data-link-type="dfn" href="#c" id="ref-for-c②②">c</a> is U+002F (/) and <a data-link-type="dfn" href="#remaining" id="ref-for-remaining④">remaining</a> starts with U+002F (/), then set <var>state</var> to <a data-link-type="dfn" href="#special-authority-ignore-slashes-state" id="ref-for-special-authority-ignore-slashes-state">special authority ignore slashes state</a> and increase <var>pointer</var> by one. </p>
       <p>Otherwise, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③②">validation error</a>, set <var>state</var> to <a data-link-type="dfn" href="#relative-state" id="ref-for-relative-state①">relative state</a> and
    decrease <var>pointer</var> by one. </p>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="path-or-authority-state">path or authority state<a class="self-link" href="#path-or-authority-state"></a></dfn> 
      <dd>
       <p>If <a data-link-type="dfn" href="#c" id="ref-for-c②③">c</a> is U+002F (/), then set <var>state</var> to <a data-link-type="dfn" href="#authority-state" id="ref-for-authority-state">authority state</a>. </p>
       <p>Otherwise, set <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state">path state</a>, and decrease <var>pointer</var> by one. </p>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="relative-state">relative state<a class="self-link" href="#relative-state"></a></dfn> 
      <dd>
       <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②⓪">scheme</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②①">scheme</a>, and then, switching on <a data-link-type="dfn" href="#c" id="ref-for-c②④">c</a>: </p>
       <dl class="switch">
        <dt>The <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point⑤">EOF code point</a> 
        <dd>
         <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username②">username</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username③">username</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password②">password</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password③">password</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host⑥">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host⑦">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port⑤">port</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port⑥">port</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path⑧">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path⑨">path</a>, and <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query③">query</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query④">query</a>. </p>
        <dt>U+002F (/) 
        <dd>
         <p>Set <var>state</var> to <a data-link-type="dfn" href="#relative-slash-state" id="ref-for-relative-slash-state">relative slash state</a>. </p>
        <dt>U+003F (?) 
        <dd>
         <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username④">username</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username⑤">username</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password④">password</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password⑤">password</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host⑧">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host⑨">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port⑦">port</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port⑧">port</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①⓪">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①①">path</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query⑤">query</a> to the empty string,
     and <var>state</var> to <a data-link-type="dfn" href="#query-state" id="ref-for-query-state">query state</a>. </p>
        <dt>U+0023 (#) 
        <dd>
         <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username⑥">username</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username⑦">username</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password⑥">password</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password⑦">password</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①⓪">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①①">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port⑨">port</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①⓪">port</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①②">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①③">path</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query⑥">query</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query⑦">query</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment①">fragment</a> to the empty string,
     and <var>state</var> to <a data-link-type="dfn" href="#fragment-state" id="ref-for-fragment-state①">fragment state</a>. </p>
        <dt>Otherwise 
        <dd>
         <p>If <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special③">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c②⑤">c</a> is U+005C (\), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③③">validation error</a>,
      set <var>state</var> to <a data-link-type="dfn" href="#relative-slash-state" id="ref-for-relative-slash-state①">relative slash state</a>. </p>
         <p>Otherwise, run these steps: </p>
         <ol>
          <li>
           <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username⑧">username</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username⑨">username</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password⑧">password</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password⑨">password</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①②">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①③">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①①">port</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①②">port</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①④">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①⑤">path</a>, and then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove①">remove</a> <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①⑥">path</a>’s last item, if any. </p>
          <li>
           <p>Set <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state①">path state</a>,
       and decrease <var>pointer</var> by one. </p>
         </ol>
       </dl>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="relative-slash-state">relative slash state<a class="self-link" href="#relative-slash-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special④">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c②⑥">c</a> is U+002F (/) or U+005C (\), then: </p>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c②⑦">c</a> is U+005C (\), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③④">validation error</a>. </p>
          <li>
           <p>Set <var>state</var> to <a data-link-type="dfn" href="#special-authority-ignore-slashes-state" id="ref-for-special-authority-ignore-slashes-state①">special authority ignore slashes state</a>. </p>
         </ol>
        <li>
         <p>Otherwise, if <a data-link-type="dfn" href="#c" id="ref-for-c②⑧">c</a> is U+002F (/), then set <var>state</var> to <a data-link-type="dfn" href="#authority-state" id="ref-for-authority-state①">authority state</a>. </p>
        <li>
         <p>Otherwise, set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①⓪">username</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①①">username</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①⓪">password</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①①">password</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①④">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①⑤">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①③">port</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①④">port</a>, <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state②">path state</a>, and then, decrease <var>pointer</var> by one. </p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="special-authority-slashes-state">special authority slashes state<a class="self-link" href="#special-authority-slashes-state"></a></dfn> 
      <dd>
       <p>If <a data-link-type="dfn" href="#c" id="ref-for-c②⑨">c</a> is U+002F (/) and <a data-link-type="dfn" href="#remaining" id="ref-for-remaining⑤">remaining</a> starts with U+002F (/), then set <var>state</var> to <a data-link-type="dfn" href="#special-authority-ignore-slashes-state" id="ref-for-special-authority-ignore-slashes-state②">special authority ignore slashes state</a> and increase <var>pointer</var> by one. </p>
       <p>Otherwise, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③⑤">validation error</a>, set <var>state</var> to <a data-link-type="dfn" href="#special-authority-ignore-slashes-state" id="ref-for-special-authority-ignore-slashes-state③">special authority ignore slashes state</a>, and decrease <var>pointer</var> by one. </p>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="special-authority-ignore-slashes-state">special authority ignore slashes state<a class="self-link" href="#special-authority-ignore-slashes-state"></a></dfn> 
      <dd>
       <p>If <a data-link-type="dfn" href="#c" id="ref-for-c③⓪">c</a> is neither U+002F (/) nor U+005C (\), then set <var>state</var> to <a data-link-type="dfn" href="#authority-state" id="ref-for-authority-state②">authority state</a> and decrease <var>pointer</var> by one. </p>
       <p>Otherwise, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③⑥">validation error</a>. </p>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="authority-state">authority state<a class="self-link" href="#authority-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c③①">c</a> is U+0040 (@), then: </p>
         <ol>
          <li>
           <p><a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③⑦">Validation error</a>. </p>
          <li>
           <p>If the <var>@ flag</var> is set, prepend "<code>%40</code>" to <var>buffer</var>. </p>
          <li>
           <p>Set the <var>@ flag</var>. </p>
          <li>
           <p>For each <var>codePoint</var> in <var>buffer</var>: </p>
           <ol>
            <li>
             <p>If <var>codePoint</var> is U+003A (:) and <var>passwordTokenSeenFlag</var> is
         unset, then set <var>passwordTokenSeenFlag</var> and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue③">continue</a>. </p>
            <li>
             <p>Let <var>encodedCodePoints</var> be the result of running <a data-link-type="dfn" href="#utf-8-percent-encode" id="ref-for-utf-8-percent-encode①">UTF-8 percent encode</a> <var>codePoint</var> using the <a data-link-type="dfn" href="#userinfo-percent-encode-set" id="ref-for-userinfo-percent-encode-set">userinfo percent-encode set</a>. </p>
            <li>
             <p>If <var>passwordTokenSeenFlag</var> is set, then append <var>encodedCodePoints</var> to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①②">password</a>. </p>
            <li>
             <p>Otherwise, append <var>encodedCodePoints</var> to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①②">username</a>. </p>
           </ol>
          <li>
           <p>Set <var>buffer</var> to the empty string. </p>
         </ol>
        <li>
         <p>Otherwise, if one of the following is true </p>
         <ul class="brief">
          <li>
           <p><a data-link-type="dfn" href="#c" id="ref-for-c③②">c</a> is the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point⑥">EOF code point</a>, U+002F (/), U+003F (?), or U+0023 (#) </p>
          <li>
           <p><var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special⑤">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c③③">c</a> is U+005C (\) </p>
         </ul>
         <p>then: </p>
         <ol>
          <li>
           <p>If <var>@ flag</var> is set and <var>buffer</var> is the empty string, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③⑧">validation error</a>, return failure. </p>
          <li>
           <p>Decrease <var>pointer</var> by the number of code points in <var>buffer</var> plus
       one, set <var>buffer</var> to the empty string, and set <var>state</var> to <a data-link-type="dfn" href="#host-state" id="ref-for-host-state">host state</a>. </p>
         </ol>
        <li>
         <p>Otherwise, append <a data-link-type="dfn" href="#c" id="ref-for-c③④">c</a> to <var>buffer</var>. </p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="host-state">host state<a class="self-link" href="#host-state"></a></dfn> 
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="hostname-state">hostname state<a class="self-link" href="#hostname-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <var>state override</var> is given and <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②②">scheme</a> is
     "<code>file</code>", then decrease <var>pointer</var> by one and set <var>state</var> to <a data-link-type="dfn" href="#file-host-state" id="ref-for-file-host-state">file host state</a>. </p>
        <li>
         <p>Otherwise, if <a data-link-type="dfn" href="#c" id="ref-for-c③⑤">c</a> is U+003A (:) and the <var>[] flag</var> is unset, then: </p>
         <ol>
          <li>
           <p>If <var>buffer</var> is the empty string, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error③⑨">validation error</a>, return failure. </p>
          <li>
           <p>Let <var>host</var> be the result of <a data-link-type="dfn" href="#concept-host-parser" id="ref-for-concept-host-parser④">host parsing</a> <var>buffer</var> with <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special⑥">is special</a>. </p>
          <li>
           <p>If <var>host</var> is failure, then return failure. </p>
          <li>
           <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①⑥">host</a> to <var>host</var>, <var>buffer</var> to the empty string,
       and <var>state</var> to <a data-link-type="dfn" href="#port-state" id="ref-for-port-state">port state</a>. </p>
          <li>
           <p>If <var>state override</var> is given and <var>state override</var> is <a data-link-type="dfn" href="#hostname-state" id="ref-for-hostname-state">hostname state</a>, then return. </p>
         </ol>
        <li>
         <p>Otherwise, if one of the following is true </p>
         <ul class="brief">
          <li>
           <p><a data-link-type="dfn" href="#c" id="ref-for-c③⑥">c</a> is the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point⑦">EOF code point</a>, U+002F (/), U+003F (?), or U+0023 (#) </p>
          <li>
           <p><var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special⑦">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c③⑦">c</a> is U+005C (\) </p>
         </ul>
         <p>then decrease <var>pointer</var> by one, and then: </p>
         <ol>
          <li>
           <p>If <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special⑧">is special</a> and <var>buffer</var> is the empty string, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④⓪">validation error</a>, return failure. </p>
          <li>
           <p>Otherwise, if <var>state override</var> is given, <var>buffer</var> is the empty
       string, and either <var>url</var> <a data-link-type="dfn" href="#include-credentials" id="ref-for-include-credentials①">includes credentials</a> or <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①⑤">port</a> is non-null, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④①">validation error</a>, return. </p>
          <li>
           <p>Let <var>host</var> be the result of <a data-link-type="dfn" href="#concept-host-parser" id="ref-for-concept-host-parser⑤">host parsing</a> <var>buffer</var> with <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special⑨">is special</a>. </p>
          <li>
           <p>If <var>host</var> is failure, then return failure. </p>
          <li>
           <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①⑦">host</a> to <var>host</var>, <var>buffer</var> to the empty string,
       and <var>state</var> to <a data-link-type="dfn" href="#path-start-state" id="ref-for-path-start-state">path start state</a>. </p>
          <li>
           <p>If <var>state override</var> is given, then return. </p>
         </ol>
        <li>
         <p>Otherwise: </p>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c③⑧">c</a> is U+005B ([), then set the <var>[] flag</var>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c③⑨">c</a> is U+005D (]), then unset the <var>[] flag</var>. </p>
          <li>
           <p>Append <a data-link-type="dfn" href="#c" id="ref-for-c④⓪">c</a> to <var>buffer</var>. </p>
         </ol>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="port-state">port state<a class="self-link" href="#port-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c④①">c</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-digit" id="ref-for-ascii-digit④">ASCII digit</a>, append <a data-link-type="dfn" href="#c" id="ref-for-c④②">c</a> to <var>buffer</var>. </p>
        <li>
         <p>Otherwise, if one of the following is true </p>
         <ul class="brief">
          <li>
           <p><a data-link-type="dfn" href="#c" id="ref-for-c④③">c</a> is the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point⑧">EOF code point</a>, U+002F (/), U+003F (?), or U+0023 (#) </p>
          <li>
           <p><var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①⓪">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c④④">c</a> is U+005C (\) </p>
          <li>
           <p><var>state override</var> is given </p>
         </ul>
         <p>then: </p>
         <ol>
          <li>
           <p>If <var>buffer</var> is not the empty string, then: </p>
           <ol>
            <li>
             <p>Let <var>port</var> be the mathematical integer value that is represented
         by <var>buffer</var> in radix-10 using <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-digit" id="ref-for-ascii-digit⑤">ASCII digits</a> for digits with values
         0 through 9. </p>
            <li>
             <p>If <var>port</var> is greater than 2<sup>16</sup> − 1, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④②">validation error</a>, return failure. </p>
            <li>
             <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①⑥">port</a> to null, if <var>port</var> is <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②③">scheme</a>’s <a data-link-type="dfn" href="#default-port" id="ref-for-default-port①">default port</a>, and to <var>port</var> otherwise. </p>
            <li>
             <p>Set <var>buffer</var> to the empty string. </p>
           </ol>
          <li>
           <p>If <var>state override</var> is given, then return. </p>
          <li>
           <p>Set <var>state</var> to <a data-link-type="dfn" href="#path-start-state" id="ref-for-path-start-state①">path start state</a>, and decrease <var>pointer</var> by one. </p>
         </ol>
        <li>
         <p>Otherwise, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④③">validation error</a>, return failure. </p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="file-state">file state<a class="self-link" href="#file-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②④">scheme</a> to "<code>file</code>". </p>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c④⑤">c</a> is U+002F (/) or U+005C (\), then: </p>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c④⑥">c</a> is U+005C (\), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④④">validation error</a>. </p>
          <li>
           <p>Set <var>state</var> to <a data-link-type="dfn" href="#file-slash-state" id="ref-for-file-slash-state">file slash state</a>. </p>
         </ol>
        <li>
         <p>Otherwise, if <var>base</var> is non-null and <var>base</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②⑤">scheme</a> is
      "<code>file</code>", switch on <a data-link-type="dfn" href="#c" id="ref-for-c④⑦">c</a>: </p>
         <dl class="switch">
          <dt>The <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point⑨">EOF code point</a> 
          <dd>
           <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①⑧">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host①⑨">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①⑦">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①⑧">path</a>, and <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query⑧">query</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query⑨">query</a>. </p>
          <dt>U+003F (?) 
          <dd>
           <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②⓪">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②①">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path①⑨">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②⓪">path</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①⓪">query</a> to the empty string, and <var>state</var> to <a data-link-type="dfn" href="#query-state" id="ref-for-query-state①">query state</a>. </p>
          <dt>U+0023 (#) 
          <dd>
           <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②②">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②③">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②①">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②②">path</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①①">query</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①②">query</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment②">fragment</a> to the empty string, and <var>state</var> to <a data-link-type="dfn" href="#fragment-state" id="ref-for-fragment-state②">fragment state</a>. </p>
          <dt>Otherwise 
          <dd>
           <ol>
            <li>
             <p>If the substring from <var>pointer</var> in <var>input</var> does not <a data-link-type="dfn" href="#start-with-a-windows-drive-letter" id="ref-for-start-with-a-windows-drive-letter">start with a Windows drive letter</a>, then set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②④">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②⑤">host</a>, <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②③">path</a> to a copy of <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②④">path</a>, and then <a data-link-type="dfn" href="#shorten-a-urls-path" id="ref-for-shorten-a-urls-path">shorten</a> <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②⑤">path</a>. </p>
             <p class="note" role="note">This is a (platform-independent) Windows drive letter quirk. </p>
            <li>
             <p>Otherwise, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④⑤">validation error</a>. </p>
            <li>
             <p>Set <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state③">path state</a>, and decrease <var>pointer</var> by one. </p>
           </ol>
         </dl>
        <li>
         <p>Otherwise, set <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state④">path state</a>, and decrease <var>pointer</var> by
     one. </p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="file-slash-state">file slash state<a class="self-link" href="#file-slash-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c④⑧">c</a> is U+002F (/) or U+005C (\), then: </p>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c④⑨">c</a> is U+005C (\), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④⑥">validation error</a>. </p>
          <li>
           <p>Set <var>state</var> to <a data-link-type="dfn" href="#file-host-state" id="ref-for-file-host-state①">file host state</a>. </p>
         </ol>
        <li>
         <p>Otherwise: </p>
         <ol>
          <li>
           <p>If <var>base</var> is non-null, <var>base</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②⑥">scheme</a> is
        "<code>file</code>", and the substring from <var>pointer</var> in <var>input</var> does not <a data-link-type="dfn" href="#start-with-a-windows-drive-letter" id="ref-for-start-with-a-windows-drive-letter①">start with a Windows drive letter</a>, then: </p>
           <ol>
            <li>
             <p>If <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②⑥">path</a>[0] is a <a data-link-type="dfn" href="#normalized-windows-drive-letter" id="ref-for-normalized-windows-drive-letter②">normalized Windows drive letter</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">append</a> <var>base</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②⑦">path</a>[0] to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②⑧">path</a>. </p>
             <p class="note" role="note">This is a (platform-independent) Windows drive letter quirk. Both <var>url</var>’s and <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②⑥">host</a> are null under these conditions
          and therefore not copied. </p>
            <li>
             <p>Otherwise, set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②⑦">host</a> to <var>base</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②⑧">host</a>. </p>
           </ol>
          <li>
           <p>Set <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state⑤">path state</a>, and decrease <var>pointer</var> by one. </p>
         </ol>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="file-host-state">file host state<a class="self-link" href="#file-host-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑤⓪">c</a> is the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①⓪">EOF code point</a>, U+002F (/), U+005C (\), U+003F (?), or
      U+0023 (#), then decrease <var>pointer</var> by one and then: </p>
         <ol>
          <li>
           <p>If <var>state override</var> is not given and <var>buffer</var> is a <a data-link-type="dfn" href="#windows-drive-letter" id="ref-for-windows-drive-letter③">Windows drive letter</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④⑦">validation error</a>, set <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state⑥">path state</a>. </p>
           <p class="note" role="note">This is a (platform-independent) Windows drive letter quirk. <var>buffer</var> is not reset here and instead used in the <a data-link-type="dfn" href="#path-state" id="ref-for-path-state⑦">path state</a>. </p>
          <li>
           <p>Otherwise, if <var>buffer</var> is the empty string, then: </p>
           <ol>
            <li>
             <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host②⑨">host</a> to the empty string. </p>
            <li>
             <p>If <var>state override</var> is given, then return. </p>
            <li>
             <p>Set <var>state</var> to <a data-link-type="dfn" href="#path-start-state" id="ref-for-path-start-state②">path start state</a>. </p>
           </ol>
          <li>
           <p>Otherwise, run these steps: </p>
           <ol>
            <li>
             <p>Let <var>host</var> be the result of <a data-link-type="dfn" href="#concept-host-parser" id="ref-for-concept-host-parser⑥">host parsing</a> <var>buffer</var> with <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①①">is special</a>. </p>
            <li>
             <p>If <var>host</var> is failure, then return failure. </p>
            <li>
             <p>If <var>host</var> is "<code title="">localhost</code>", then set <var>host</var> to
         the empty string. </p>
            <li>
             <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③⓪">host</a> to <var>host</var>. </p>
            <li>
             <p>If <var>state override</var> is given, then return. </p>
            <li>
             <p>Set <var>buffer</var> to the empty string and <var>state</var> to <a data-link-type="dfn" href="#path-start-state" id="ref-for-path-start-state③">path start state</a>. </p>
           </ol>
         </ol>
        <li>
         <p>Otherwise, append <a data-link-type="dfn" href="#c" id="ref-for-c⑤①">c</a> to <var>buffer</var>. </p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="path-start-state">path start state<a class="self-link" href="#path-start-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①②">is special</a>, then: </p>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑤②">c</a> is U+005C (\), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④⑧">validation error</a>. </p>
          <li>
           <p>Set <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state⑧">path state</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑤③">c</a> is neither U+002F (/) nor U+005C (\), then decrease <var>pointer</var> by
       one. </p>
         </ol>
        <li>
         <p>Otherwise, if <var>state override</var> is not given and <a data-link-type="dfn" href="#c" id="ref-for-c⑤④">c</a> is U+003F (?), set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①③">query</a> to the empty string and <var>state</var> to <a data-link-type="dfn" href="#query-state" id="ref-for-query-state②">query state</a>. </p>
        <li>
         <p>Otherwise, if <var>state override</var> is not given and <a data-link-type="dfn" href="#c" id="ref-for-c⑤⑤">c</a> is U+0023 (#), set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment③">fragment</a> to the empty string and <var>state</var> to <a data-link-type="dfn" href="#fragment-state" id="ref-for-fragment-state③">fragment state</a>. </p>
        <li>
         <p>Otherwise, if <a data-link-type="dfn" href="#c" id="ref-for-c⑤⑥">c</a> is not the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①①">EOF code point</a>: </p>
         <ol>
          <li>
           <p>Set <var>state</var> to <a data-link-type="dfn" href="#path-state" id="ref-for-path-state⑨">path state</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑤⑦">c</a> is not U+002F (/), then decrease <var>pointer</var> by one. </p>
         </ol>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="path-state">path state<a class="self-link" href="#path-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If one of the following is true </p>
         <ul class="brief">
          <li>
           <p><a data-link-type="dfn" href="#c" id="ref-for-c⑤⑧">c</a> is the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①②">EOF code point</a> or U+002F (/) </p>
          <li>
           <p><var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①③">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c⑤⑨">c</a> is U+005C (\) </p>
          <li>
           <p><var>state override</var> is not given and <a data-link-type="dfn" href="#c" id="ref-for-c⑥⓪">c</a> is U+003F (?) or U+0023 (#) </p>
         </ul>
         <p>then: </p>
         <ol>
          <li>
           <p>If <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①④">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c⑥①">c</a> is U+005C (\), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error④⑨">validation error</a>. </p>
          <li>
           <p>If <var>buffer</var> is a <a data-link-type="dfn" href="#double-dot-path-segment" id="ref-for-double-dot-path-segment②">double-dot path segment</a>, <a data-link-type="dfn" href="#shorten-a-urls-path" id="ref-for-shorten-a-urls-path①">shorten</a> <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path②⑨">path</a>, and then if neither <a data-link-type="dfn" href="#c" id="ref-for-c⑥②">c</a> is U+002F (/), nor <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①⑤">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c⑥③">c</a> is U+005C (\), <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">append</a> the empty string to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③⓪">path</a>. </p>
          <li>
           <p>Otherwise, if <var>buffer</var> is a <a data-link-type="dfn" href="#single-dot-path-segment" id="ref-for-single-dot-path-segment②">single-dot path segment</a> and if neither <a data-link-type="dfn" href="#c" id="ref-for-c⑥④">c</a> is U+002F (/), nor <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①⑥">is special</a> and <a data-link-type="dfn" href="#c" id="ref-for-c⑥⑤">c</a> is U+005C (\), <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append③">append</a> the empty string to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③①">path</a>. </p>
          <li>
           <p>Otherwise, if <var>buffer</var> is not a <a data-link-type="dfn" href="#single-dot-path-segment" id="ref-for-single-dot-path-segment③">single-dot path segment</a>, then: </p>
           <ol>
            <li>
             <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②⑦">scheme</a> is "<code>file</code>", <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③②">path</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty③">is empty</a>, and <var>buffer</var> is a <a data-link-type="dfn" href="#windows-drive-letter" id="ref-for-windows-drive-letter④">Windows drive letter</a>, then: </p>
             <ol>
              <li>
               <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③①">host</a> is neither the empty string nor null, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤⓪">validation error</a>, set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③②">host</a> to the empty string. </p>
              <li>
               <p>Replace the second code point in <var>buffer</var> with U+003A (:). </p>
             </ol>
             <p class="note" role="note">This is a (platform-independent) Windows drive letter quirk. </p>
            <li>
             <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append④">Append</a> <var>buffer</var> to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③③">path</a>. </p>
           </ol>
          <li>
           <p>Set <var>buffer</var> to the empty string. </p>
          <li>
           <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②⑧">scheme</a> is "<code>file</code>" and <a data-link-type="dfn" href="#c" id="ref-for-c⑥⑥">c</a> is the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①③">EOF code point</a>, U+003F (?), or U+0023 (#), then while <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③④">path</a>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size①">size</a> is greater than 1 and <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③⑤">path</a>[0] is the empty string, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤①">validation error</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove②">remove</a> the first <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-item" id="ref-for-list-item">item</a> from <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③⑥">path</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑥⑦">c</a> is U+003F (?), then set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①④">query</a> to the empty
       string and <var>state</var> to <a data-link-type="dfn" href="#query-state" id="ref-for-query-state③">query state</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑥⑧">c</a> is U+0023 (#), then set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment④">fragment</a> to the
       empty string and <var>state</var> to <a data-link-type="dfn" href="#fragment-state" id="ref-for-fragment-state④">fragment state</a>. </p>
         </ol>
        <li>
         <p>Otherwise, run these steps: </p>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑥⑨">c</a> is not a <a data-link-type="dfn" href="#url-code-points" id="ref-for-url-code-points②">URL code point</a> and not U+0025 (%), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤②">validation error</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑦⓪">c</a> is U+0025 (%) and <a data-link-type="dfn" href="#remaining" id="ref-for-remaining⑥">remaining</a> does not start with two <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-hex-digit" id="ref-for-ascii-hex-digit③">ASCII hex digits</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤③">validation error</a>. </p>
          <li>
           <p><a data-link-type="dfn" href="#utf-8-percent-encode" id="ref-for-utf-8-percent-encode②">UTF-8 percent encode</a> <a data-link-type="dfn" href="#c" id="ref-for-c⑦①">c</a> using the <a data-link-type="dfn" href="#path-percent-encode-set" id="ref-for-path-percent-encode-set①">path percent-encode set</a>, and
       append the result to <var>buffer</var>. </p>
         </ol>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="cannot-be-a-base-url-path-state">cannot-be-a-base-URL path state<a class="self-link" href="#cannot-be-a-base-url-path-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑦②">c</a> is U+003F (?), then set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①⑤">query</a> to the empty
     string and <var>state</var> to <a data-link-type="dfn" href="#query-state" id="ref-for-query-state④">query state</a>. </p>
        <li>
         <p>Otherwise, if <a data-link-type="dfn" href="#c" id="ref-for-c⑦③">c</a> is U+0023 (#), then set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment⑤">fragment</a> to the empty string and <var>state</var> to <a data-link-type="dfn" href="#fragment-state" id="ref-for-fragment-state⑤">fragment state</a>. </p>
        <li>
         <p>Otherwise: </p>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑦④">c</a> is not the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①④">EOF code point</a>, not a <a data-link-type="dfn" href="#url-code-points" id="ref-for-url-code-points③">URL code point</a>, and not
       U+0025 (%), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤④">validation error</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑦⑤">c</a> is U+0025 (%) and <a data-link-type="dfn" href="#remaining" id="ref-for-remaining⑦">remaining</a> does not start with two <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-hex-digit" id="ref-for-ascii-hex-digit④">ASCII hex digits</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤⑤">validation error</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑦⑥">c</a> is not the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①⑤">EOF code point</a>, <a data-link-type="dfn" href="#utf-8-percent-encode" id="ref-for-utf-8-percent-encode③">UTF-8 percent encode</a> <a data-link-type="dfn" href="#c" id="ref-for-c⑦⑦">c</a> using the <a data-link-type="dfn" href="#c0-control-percent-encode-set" id="ref-for-c0-control-percent-encode-set②">C0 control percent-encode set</a>, and append the result to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③⑦">path</a>[0]. </p>
         </ol>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="query-state">query state<a class="self-link" href="#query-state"></a></dfn> 
      <dd>
       <ol>
        <li>
         <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑦⑧">c</a> is the <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①⑥">EOF code point</a>, or <var>state override</var> is not given and <a data-link-type="dfn" href="#c" id="ref-for-c⑦⑨">c</a> is U+0023 (#), then: </p>
         <ol>
          <li>
           <p>If <var>url</var> <a data-link-type="dfn" href="#is-special" id="ref-for-is-special①⑦">is <em>not</em> special</a> or <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme②⑨">scheme</a> is either "<code>ws</code>" or "<code>wss</code>", set <var>encoding</var> to <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8" id="ref-for-utf-8②">UTF-8</a>. </p>
          <li>
           <p>Set <var>buffer</var> to the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#encode" id="ref-for-encode">encoding</a> <var>buffer</var> using <var>encoding</var>. </p>
          <li>
           <p>For each <var>byte</var> in <var>buffer</var>: </p>
           <ol>
            <li>
             <p>If <var>byte</var> is less than 0x21 (!), greater than 0x7E (~), or is 0x22 ("),
         0x23 (#), 0x3C (&lt;), or 0x3E (>), append <var>byte</var>, <a data-link-type="dfn" href="#percent-encode" id="ref-for-percent-encode①">percent encoded</a>, to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①⑥">query</a>. </p>
            <li>
             <p>Otherwise, append a code point whose value is <var>byte</var> to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①⑦">query</a>. </p>
           </ol>
          <li>
           <p>Set <var>buffer</var> to the empty string. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑧⓪">c</a> is U+0023 (#), then set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment⑥">fragment</a> to the
       empty string and state to <a data-link-type="dfn" href="#fragment-state" id="ref-for-fragment-state⑥">fragment state</a>. </p>
         </ol>
        <li>
         <p>Otherwise: </p>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑧①">c</a> is not a <a data-link-type="dfn" href="#url-code-points" id="ref-for-url-code-points④">URL code point</a> and not U+0025 (%), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤⑥">validation error</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑧②">c</a> is U+0025 (%) and <a data-link-type="dfn" href="#remaining" id="ref-for-remaining⑧">remaining</a> does not start with two <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-hex-digit" id="ref-for-ascii-hex-digit⑤">ASCII hex digits</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤⑦">validation error</a>. </p>
          <li>
           <p>Append <a data-link-type="dfn" href="#c" id="ref-for-c⑧③">c</a> to <var>buffer</var>. </p>
         </ol>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-noexport="" id="fragment-state">fragment state<a class="self-link" href="#fragment-state"></a></dfn> 
      <dd>
       <p>Switching on <a data-link-type="dfn" href="#c" id="ref-for-c⑧④">c</a>: </p>
       <dl class="switch">
        <dt>The <a data-link-type="dfn" href="#eof-code-point" id="ref-for-eof-code-point①⑦">EOF code point</a> 
        <dd>
         <p>Do nothing. </p>
        <dt>U+0000 NULL 
        <dd>
         <p><a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤⑧">Validation error</a>. </p>
        <dt>Otherwise 
        <dd>
         <ol>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑧⑤">c</a> is not a <a data-link-type="dfn" href="#url-code-points" id="ref-for-url-code-points⑤">URL code point</a> and not U+0025 (%), <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑤⑨">validation error</a>. </p>
          <li>
           <p>If <a data-link-type="dfn" href="#c" id="ref-for-c⑧⑥">c</a> is U+0025 (%) and <a data-link-type="dfn" href="#remaining" id="ref-for-remaining⑨">remaining</a> does not start with two <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-hex-digit" id="ref-for-ascii-hex-digit⑥">ASCII hex digits</a>, <a data-link-type="dfn" href="#validation-error" id="ref-for-validation-error⑥⓪">validation error</a>. </p>
          <li>
           <p><a data-link-type="dfn" href="#utf-8-percent-encode" id="ref-for-utf-8-percent-encode④">UTF-8 percent encode</a> <a data-link-type="dfn" href="#c" id="ref-for-c⑧⑦">c</a> using the <a data-link-type="dfn" href="#fragment-percent-encode-set" id="ref-for-fragment-percent-encode-set①">fragment percent-encode set</a> and append the result to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment⑦">fragment</a>. </p>
         </ol>
       </dl>
     </dl>
    <li>
     <p>Return <var>url</var>. </p>
   </ol>
   <hr>
   <p>To <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="set-the-username">set the username<a class="self-link" href="#set-the-username"></a></dfn> given a <var>url</var> and <var>username</var>, run these steps: </p>
   <ol>
    <li>
     <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①③">username</a> to the empty string. </p>
    <li>
     <p>For each code point in <var>username</var>, <a data-link-type="dfn" href="#utf-8-percent-encode" id="ref-for-utf-8-percent-encode⑤">UTF-8 percent encode</a> it using the <a data-link-type="dfn" href="#userinfo-percent-encode-set" id="ref-for-userinfo-percent-encode-set①">userinfo percent-encode set</a>, and append the result to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①④">username</a>. </p>
   </ol>
   <p>To <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="set-the-password">set the password<a class="self-link" href="#set-the-password"></a></dfn> given a <var>url</var> and <var>password</var>, run these steps: </p>
   <ol>
    <li>
     <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①③">password</a> to the empty string. </p>
    <li>
     <p>For each code point in <var>password</var>, <a data-link-type="dfn" href="#utf-8-percent-encode" id="ref-for-utf-8-percent-encode⑥">UTF-8 percent encode</a> it using the <a data-link-type="dfn" href="#userinfo-percent-encode-set" id="ref-for-userinfo-percent-encode-set②">userinfo percent-encode set</a>, and append the result to <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①④">password</a>. </p>
   </ol>
   <h3 class="heading settled" data-level="4.5" id="url-serializing"><span class="secno">4.5. </span><span class="content">URL serializing</span><a class="self-link" href="#url-serializing"></a></h3>
   <p>The <dfn data-dfn-type="dfn" data-export="" id="concept-url-serializer">URL serializer<a class="self-link" href="#concept-url-serializer"></a></dfn> takes a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url③⑨">URL</a> <var>url</var>, an optional <i title="">exclude fragment flag</i>, and
then runs these steps: </p>
   <ol>
    <li>
     <p>Let <var>output</var> be <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme③⓪">scheme</a> and U+003A (:) concatenated. </p>
    <li>
     <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③③">host</a> is non-null: </p>
     <ol>
      <li>
       <p>Append "<code>//</code>" to <var>output</var>. </p>
      <li>
       <p>If <var>url</var> <a data-link-type="dfn" href="#include-credentials" id="ref-for-include-credentials②">includes credentials</a>, then: </p>
       <ol>
        <li>
         <p>Append <var>url</var>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①⑤">username</a> to <var>output</var>. </p>
        <li>
         <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①⑤">password</a> is not the empty string, then append
     U+003A (:), followed by <var>url</var>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①⑥">password</a>, to <var>output</var>. </p>
        <li>
         <p>Append U+0040 (@) to <var>output</var>. </p>
       </ol>
      <li>
       <p>Append <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③④">host</a>, <a data-link-type="dfn" href="#concept-host-serializer" id="ref-for-concept-host-serializer③">serialized</a>, to <var>output</var>. </p>
      <li>
       <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①⑦">port</a> is non-null, append U+003A (:) followed by <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①⑧">port</a>, <a data-link-type="dfn" href="#serialize-an-integer" id="ref-for-serialize-an-integer①">serialized</a>, to <var>output</var>. </p>
     </ol>
    <li>
     <p>Otherwise, if <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③⑤">host</a> is null and <var>url</var>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme③①">scheme</a> is "<code>file</code>", append
 "<code>//</code>" to <var>output</var>. </p>
    <li>
     <p>If <var>url</var>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag⑥">cannot-be-a-base-URL flag</a> is set, append <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③⑧">path</a>[0] to <var>output</var>. </p>
    <li>
     <p>Otherwise, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">for each</a> string in <var>url</var>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path③⑨">path</a>,
 append U+002F (/) followed by the string to <var>output</var>. </p>
    <li>
     <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①⑧">query</a> is non-null, append
 U+003F (?), followed by <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query①⑨">query</a>, to <var>output</var>. </p>
    <li>
     <p>If the <i title="">exclude fragment flag</i> is unset and <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment⑧">fragment</a> is non-null, append U+0023 (#), followed by <var>url</var>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment⑨">fragment</a>, to <var>output</var>. </p>
    <li>
     <p>Return <var>output</var>. </p>
   </ol>
   <h3 class="heading settled" data-level="4.6" id="url-equivalence"><span class="secno">4.6. </span><span class="content">URL equivalence</span><a class="self-link" href="#url-equivalence"></a></h3>
   <p>To determine whether a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④⓪">URL</a> <var>A</var> <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" data-lt="equal" id="concept-url-equals">equals<a class="self-link" href="#concept-url-equals"></a></dfn> <var>B</var>, optionally with an <i>exclude fragments flag</i>, run these steps: </p>
   <ol>
    <li>
     <p>Let <var>serializedA</var> be the result of <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer④">serializing</a> <var>A</var>, with the <i>exclude fragment flag</i> set if the <i>exclude fragments flag</i> is set. </p>
    <li>
     <p>Let <var>serializedB</var> be the result of <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer⑤">serializing</a> <var>B</var>, with the <i>exclude fragment flag</i> set if the <i>exclude fragments flag</i> is set. </p>
    <li>
     <p>Return true if <var>serializedA</var> is <var>serializedB</var>, and false
 otherwise. </p>
   </ol>
   <h3 class="heading settled" data-level="4.7" id="origin"><span class="secno">4.7. </span><span class="content">Origin</span><a class="self-link" href="#origin"></a></h3>
   <p class="note" role="note">See <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin" id="ref-for-concept-origin">origin</a>’s definition in HTML for the necessary
background information. <a data-link-type="biblio" href="#biblio-html">[HTML]</a> </p>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④①">URL</a>’s <dfn data-dfn-for="url" data-dfn-type="dfn" data-export="" id="concept-url-origin">origin<a class="self-link" href="#concept-url-origin"></a></dfn> is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin" id="ref-for-concept-origin①">origin</a> returned by running these steps, switching on <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④②">URL</a>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme③②">scheme</a>: </p>
   <dl class="switch">
    <dt>"<code>blob</code>" 
    <dd>
     <p>Let <var>url</var> be the result of <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser③">parsing</a> <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④③">URL</a>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path④⓪">path</a>[0]. </p>
     <p>Return a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-opaque" id="ref-for-concept-origin-opaque">opaque origin</a>, if <var>url</var> is failure, and <var>url</var>’s <a data-link-type="dfn" href="#concept-url-origin" id="ref-for-concept-url-origin">origin</a> otherwise. </p>
     <p class="example no-backref" id="example-43b5cea5"><a class="self-link" href="#example-43b5cea5"></a>The <a data-link-type="dfn" href="#concept-url-origin" id="ref-for-concept-url-origin①">origin</a> of <code>blob:https://whatwg.org/d0360e2f-caee-469f-9a2f-87d5b0456f6f</code> is the tuple
  (<code>https</code>, <code>whatwg.org</code>, null, null). </p>
    <dt>"<code>ftp</code>" 
    <dt>"<code>gopher</code>" 
    <dt>"<code>http</code>" 
    <dt>"<code>https</code>" 
    <dt>"<code>ws</code>" 
    <dt>"<code>wss</code>" 
    <dd>
     <p>Return a tuple consisting of <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④④">URL</a>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme③③">scheme</a>, <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④⑤">URL</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③⑥">host</a>, <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④⑥">URL</a>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port①⑨">port</a>, and null. </p>
    <dt>"<code>file</code>" 
    <dd>
     <p>Unfortunate as it is, this is left as an exercise to the reader. When in doubt,
 return a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-opaque" id="ref-for-concept-origin-opaque①">opaque origin</a>. </p>
    <dt>Otherwise 
    <dd>
     <p>Return a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-opaque" id="ref-for-concept-origin-opaque②">opaque origin</a>. </p>
     <p class="note no-backref" role="note">This does indeed mean that these <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④⑦">URLs</a> cannot be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin">same-origin</a> with themselves. </p>
   </dl>
   <h3 class="heading settled" data-level="4.8" id="url-rendering"><span class="secno">4.8. </span><span class="content">URL rendering</span><a class="self-link" href="#url-rendering"></a></h3>
   <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④⑧">URL</a> should be rendered in its <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer⑥">serialized</a> form, with these modifications: </p>
   <ul class="brief">
    <li>
     <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url④⑨">URL</a>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①⑥">username</a> and <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①⑦">password</a> should
 not be rendered as they can be mistaken for a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤⓪">URL</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③⑦">host</a>.
 E.g., consider <code>https://examplecorp.com@attacker.example/</code>. </p>
    <li>
     <p>A <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤①">URL</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③⑧">host</a> should be rendered using <a data-link-type="dfn" href="#concept-domain-to-unicode" id="ref-for-concept-domain-to-unicode">domain to Unicode</a>. </p>
    <li>
     <p>Other parts of the <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤②">URL</a> should have their sequences of <a data-link-type="dfn" href="#percent-encoded-byte" id="ref-for-percent-encoded-byte⑥">percent-encoded bytes</a> replaced with code points resulting from <a data-link-type="dfn" href="#percent-decode" id="ref-for-percent-decode①">percent decoding</a> those sequences converted to bytes, unless that renders those
 sequences invisible. </p>
   </ul>
   <p>For the purposes of bidirectional text it should be rendered as if it were in a
left-to-right embedding. <a data-link-type="biblio" href="#biblio-bidi">[BIDI]</a> </p>
   <p class="note no-backref" role="note">Unfortunately, as rendered <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤③">URLs</a> are strings and can appear
anywhere, a specific bidirectional algorithm for rendered <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤④">URLs</a> would not see wide
adoption. Bidirectional text interacts with the parts of a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤⑤">URL</a> in ways that can cause
the rendering to be different from the model. Users of bidirectional languages are thus cautioned
that this is to be expected, particularly in plain text environments. </p>
   <p>Due to the confusion that can arise between a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤⑥">URL</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host③⑨">host</a> and <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path④①">path</a> with bidirectional text, browsers are encouraged to only render a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤⑦">URL</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host④⓪">host</a> in places where it is important for users to
distinguish between the two. E.g., users are expected to make trust decisions based on a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤⑧">URL</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host④①">host</a> rendered in the address bar. </p>
   <h2 class="heading settled" data-level="5" id="application/x-www-form-urlencoded"><span class="secno">5. </span><span class="content"><code>application/x-www-form-urlencoded</code></span><a class="self-link" href="#application/x-www-form-urlencoded"></a></h2>
   <p>The <dfn data-dfn-type="dfn" data-export="" id="concept-urlencoded"><code>application/x-www-form-urlencoded</code><a class="self-link" href="#concept-urlencoded"></a></dfn> format
provides a way to encode name-value pairs. </p>
   <p class="note no-backref" role="note">The <code>application/x-www-form-urlencoded</code> format is in many ways
an aberrant monstrosity, the result of many years of implementation accidents and compromises
leading to a set of requirements necessary for interoperability, but in no way representing good
design practices. In particular, readers are cautioned to pay close attention to the twisted details
involving repeated (and in some cases nested) conversions between character encodings and byte
sequences. Unfortunately the format is in widespread use due to the prevalence of HTML forms. <a data-link-type="biblio" href="#biblio-html">[HTML]</a> </p>
   <h3 class="heading settled" data-level="5.1" id="urlencoded-parsing"><span class="secno">5.1. </span><span class="content"><code>application/x-www-form-urlencoded</code> parsing</span><a class="self-link" href="#urlencoded-parsing"></a></h3>
   <p class="note no-backref" role="note">A legacy server-oriented implementation might have to support <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#encoding" id="ref-for-encoding②">encodings</a> other than <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8" id="ref-for-utf-8③">UTF-8</a> as well as have special logic for tuples of which the
name is `<code>_charset</code>`. Such logic is not described here as only <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8" id="ref-for-utf-8④">UTF-8</a> is
conforming. </p>
   <p>The <dfn data-dfn-type="dfn" data-export="" data-lt="urlencoded parser" id="concept-urlencoded-parser"><code>application/x-www-form-urlencoded</code> parser<a class="self-link" href="#concept-urlencoded-parser"></a></dfn> takes a byte sequence <var>input</var>, and then runs these steps: </p>
   <ol>
    <li>
     <p>Let <var>sequences</var> be the result of splitting <var>input</var> on
 0x26 (&amp;). </p>
    <li>
     <p>Let <var>output</var> be an initially empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> of name-value tuples where
 both name and value hold a string. </p>
    <li>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> byte sequence <var>bytes</var> in <var>sequences</var>: </p>
     <ol>
      <li>
       <p>If <var>bytes</var> is the empty byte sequence, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue④">continue</a>. </p>
      <li>
       <p>If <var>bytes</var> contains a 0x3D (=), then let <var>name</var> be the bytes from the start of <var>bytes</var> up to but
   excluding its first 0x3D (=), and let <var>value</var> be the
   bytes, if any, after the first 0x3D (=) up to the end of <var>bytes</var>. If 0x3D (=) is the first byte, then <var>name</var> will be the empty byte sequence. If it is the last, then <var>value</var> will be the empty byte sequence. </p>
      <li>
       <p>Otherwise, let <var>name</var> have the value of <var>bytes</var> and let <var>value</var> be the empty byte sequence. </p>
      <li>
       <p>Replace any 0x2B (+) in <var>name</var> and <var>value</var> with 0x20 (SP). </p>
      <li>
       <p>Let <var>nameString</var> and <var>valueString</var> be the result of running <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom" id="ref-for-utf-8-decode-without-bom③">UTF-8
   decode without BOM</a> on the <a data-link-type="dfn" href="#percent-decode" id="ref-for-percent-decode②">percent decoding</a> of <var>name</var> and <var>value</var>, respectively. </p>
      <li>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑤">Append</a> (<var>nameString</var>, <var>valueString</var>) to <var>output</var>. </p>
     </ol>
    <li>
     <p>Return <var>output</var>. </p>
   </ol>
   <h3 class="heading settled" data-level="5.2" id="urlencoded-serializing"><span class="secno">5.2. </span><span class="content"><code>application/x-www-form-urlencoded</code> serializing</span><a class="self-link" href="#urlencoded-serializing"></a></h3>
   <p>The <dfn data-dfn-type="dfn" data-lt="urlencoded byte serializer" data-noexport="" id="concept-urlencoded-byte-serializer"><code>application/x-www-form-urlencoded</code> byte serializer<a class="self-link" href="#concept-urlencoded-byte-serializer"></a></dfn> takes a byte sequence <var>input</var> and then runs these steps: </p>
   <ol>
    <li>
     <p>Let <var>output</var> be the empty string. </p>
    <li>
     <p>For each byte in <var>input</var>, depending on <var>byte</var>: </p>
     <dl>
      <dt>0x20 (SP) 
      <dd>
       <p>Append U+002B (+) to <var>output</var>. </p>
      <dt>0x2A (*) 
      <dt>0x2D (-) 
      <dt>0x2E (.) 
      <dt>0x30 (0) to 0x39 (9) 
      <dt>0x41 (A) to 0x5A (Z) 
      <dt>0x5F (_) 
      <dt>0x61 (a) to 0x7A (z) 
      <dd>
       <p>Append a code point whose value is <var>byte</var> to <var>output</var>. </p>
      <dt>Otherwise 
      <dd>
       <p>Append <var>byte</var>, <a data-link-type="dfn" href="#percent-encode" id="ref-for-percent-encode②">percent encoded</a>, to <var>output</var>. </p>
     </dl>
    <li>
     <p>Return <var>output</var>. </p>
   </ol>
   <p>The <dfn data-dfn-type="dfn" data-export="" data-lt="urlencoded serializer" id="concept-urlencoded-serializer"><code>application/x-www-form-urlencoded</code> serializer<a class="self-link" href="#concept-urlencoded-serializer"></a></dfn> takes a list of name-value or name-value-type tuples <var>tuples</var>, optionally with an <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#encoding" id="ref-for-encoding③">encoding</a> <var>encoding override</var>, and then runs these steps: </p>
   <ol>
    <li>
     <p>Let <var>encoding</var> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8" id="ref-for-utf-8⑤">UTF-8</a>. </p>
    <li>
     <p>If <var>encoding override</var> is given, set <var>encoding</var> to the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#get-an-output-encoding" id="ref-for-get-an-output-encoding①">getting an output encoding</a> from <var>encoding override</var>. </p>
    <li>
     <p>Let <var>output</var> be the empty string. </p>
    <li>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate④">For each</a> <var>tuple</var> in <var>tuples</var>: </p>
     <ol>
      <li>
       <p>Let <var>name</var> be the result of <a data-link-type="dfn" href="#concept-urlencoded-byte-serializer" id="ref-for-concept-urlencoded-byte-serializer">serializing</a> the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#encode" id="ref-for-encode①">encoding</a> <var>tuple</var>’s name, using <var>encoding</var>. </p>
      <li>
       <p>Let <var>value</var> be <var>tuple</var>’s value. </p>
      <li>
       <p>If <var>tuple</var> has a type, then: </p>
       <ol>
        <li>
         <p>If <var>tuple</var>’s type is "<code>hidden</code>" and <var>name</var> is
     "<code>_charset_</code>", then set <var>value</var> to <var>encoding</var>’s <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#name" id="ref-for-name">name</a>. </p>
        <li>
         <p>Otherwise, if <var>tuple</var>’s type is "<code>file</code>", then set <var>value</var> to <var>value</var>’s filename. </p>
       </ol>
      <li>
       <p>Set <var>value</var> to the result of <a data-link-type="dfn" href="#concept-urlencoded-byte-serializer" id="ref-for-concept-urlencoded-byte-serializer①">serializing</a> the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#encode" id="ref-for-encode②">encoding</a> <var>value</var>, using <var>encoding</var>. </p>
      <li>
       <p>If <var>tuple</var> is not the first pair in <var>tuples</var>, then append
   U+0026 (&amp;) to <var>output</var>. </p>
      <li>Append <var>name</var>, followed by U+003D (=), followed by <var>value</var>, to <var>output</var>. 
     </ol>
    <li>Return <var>output</var>. 
   </ol>
   <p class="note no-backref" role="note">The <cite>HTML standard</cite> invokes this algorithm with
name-value-type tuples. <a data-link-type="biblio" href="#biblio-html">[HTML]</a> </p>
   <h3 class="heading settled" data-level="5.3" id="urlencoded-hooks"><span class="secno">5.3. </span><span class="content">Hooks</span><a class="self-link" href="#urlencoded-hooks"></a></h3>
   <p>The <dfn data-dfn-type="dfn" data-lt="urlencoded string parser" data-noexport="" id="concept-urlencoded-string-parser"><code>application/x-www-form-urlencoded</code> string parser<a class="self-link" href="#concept-urlencoded-string-parser"></a></dfn> takes a string <var>input</var>, <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode②">UTF-8 encodes</a> it, and then returns the result of <a data-link-type="dfn" href="#concept-urlencoded-parser" id="ref-for-concept-urlencoded-parser"><code>application/x-www-form-urlencoded</code> parsing</a> it. </p>
   <h2 class="heading settled" data-level="6" id="api"><span class="secno">6. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="url-class"><span class="secno">6.1. </span><span class="content">URL class</span><a class="self-link" href="#url-class"></a></h3>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-url-url" id="ref-for-dom-url-url">Constructor</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URL/URL(url, base)" data-dfn-type="argument" data-export="" id="dom-url-url-url-base-url"><code>url</code><a class="self-link" href="#dom-url-url-url-base-url"></a></dfn>, <span class="kt">optional</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URL/URL(url, base)" data-dfn-type="argument" data-export="" id="dom-url-url-url-base-base"><code>base</code><a class="self-link" href="#dom-url-url-url-base-base"></a></dfn>),
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>),
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#LegacyWindowAlias" id="ref-for-LegacyWindowAlias">LegacyWindowAlias</a>=<dfn class="nv idl-code" data-dfn-type="interface" data-export="" id="webkiturl"><code>webkitURL</code><a class="self-link" href="#webkiturl"></a></dfn>]
<span class="kt">interface</span> <dfn class="nv idl-code" data-dfn-type="interface" data-export="" id="url"><code>URL</code><a class="self-link" href="#url"></a></dfn> {
  <dfn class="kt" data-dfn-for="URL" data-dfn-type="dfn" data-lt="stringification behavior" data-noexport="" id="URL-stringification-behavior">stringifier<a class="self-link" href="#URL-stringification-behavior"></a></dfn> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-href" id="ref-for-dom-url-href">href</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString③"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-url-origin" id="ref-for-dom-url-origin">origin</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString④"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-protocol" id="ref-for-dom-url-protocol">protocol</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑤"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-username" id="ref-for-dom-url-username">username</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑥"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-password" id="ref-for-dom-url-password">password</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑦"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-host" id="ref-for-dom-url-host">host</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑧"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-hostname" id="ref-for-dom-url-hostname">hostname</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑨"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-port" id="ref-for-dom-url-port">port</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⓪"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-pathname" id="ref-for-dom-url-pathname">pathname</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-search" id="ref-for-dom-url-search">search</a>;
  [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject" id="ref-for-SameObject">SameObject</a>] <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#urlsearchparams" id="ref-for-urlsearchparams">URLSearchParams</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="URLSearchParams" href="#dom-url-searchparams" id="ref-for-dom-url-searchparams">searchParams</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①②"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-hash" id="ref-for-dom-url-hash">hash</a>;

  <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①③"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="method" href="#dom-url-tojson" id="ref-for-dom-url-tojson">toJSON</a>();
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#url" id="ref-for-url①">URL</a></code> object has an associated <dfn data-dfn-for="URL" data-dfn-type="dfn" data-noexport="" id="concept-url-url">url<a class="self-link" href="#concept-url-url"></a></dfn> (a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑤⑨">URL</a>) and <dfn data-dfn-for="URL" data-dfn-type="dfn" data-noexport="" id="concept-url-query-object">query object<a class="self-link" href="#concept-url-query-object"></a></dfn> (a <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams①">URLSearchParams</a></code> object). </p>
   <hr>
   <p id="constructors">The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="constructor" data-export="" data-lt="URL(url, base)" id="dom-url-url"><code>URL(<var>url</var>, <var>base</var>)</code><a class="self-link" href="#dom-url-url"></a></dfn> constructor, when invoked, must run these steps: </p>
   <ol>
    <li>
     <p>Let <var>parsedBase</var> be null. </p>
    <li>
     <p>If <var>base</var> is given, then: </p>
     <ol>
      <li>
       <p>Let <var>parsedBase</var> be the result of running the <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser④">basic URL parser</a> on <var>base</var>. </p>
      <li>
       <p>If <var>parsedBase</var> is failure, then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw">throw</a> a <code>TypeError</code> exception. </p>
     </ol>
    <li>
     <p>Let <var>parsedURL</var> be the result of running the <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser⑤">basic URL parser</a> on <var>url</var> with <var>parsedBase</var>. </p>
    <li>
     <p>If <var>parsedURL</var> is failure, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw①">throw</a> a <code>TypeError</code> exception. </p>
    <li>
     <p>Let <var>query</var> be <var>parsedURL</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query②⓪">query</a>, if that is non-null,
 and the empty string otherwise. </p>
    <li>
     <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#url" id="ref-for-url②">URL</a></code> object. </p>
    <li>
     <p>Set <var>result</var>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url">url</a> to <var>parsedURL</var>. </p>
    <li>
     <p>Set <var>result</var>’s <a data-link-type="dfn" href="#concept-url-query-object" id="ref-for-concept-url-query-object">query object</a> to a <a data-link-type="dfn" href="#concept-urlsearchparams-new" id="ref-for-concept-urlsearchparams-new">new</a> <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams②">URLSearchParams</a></code> object using <var>query</var>, and then set that <a data-link-type="dfn" href="#concept-url-query-object" id="ref-for-concept-url-query-object①">query object</a>’s <a data-link-type="dfn" href="#concept-urlsearchparams-url-object" id="ref-for-concept-urlsearchparams-url-object">url object</a> to <var>result</var>. </p>
    <li>
     <p>Return <var>result</var>. </p>
   </ol>
   <div class="example no-backref" id="example-5434421b">
    <a class="self-link" href="#example-5434421b"></a> 
    <p>To <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser⑥">parse</a> a string into a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑥⓪">URL</a> without using a <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url⑦">base URL</a>, invoke the <code class="idl"><a data-link-type="idl" href="#url" id="ref-for-url③">URL</a></code> constructor with a single argument: </p>
<pre><code class="lang-javascript highlight"><span class="kd">var</span> input <span class="o">=</span> <span class="s2">"https://example.org/💩"</span><span class="p">,</span>
    url <span class="o">=</span> <span class="k">new</span> URL<span class="p">(</span>input<span class="p">)</span>
url<span class="p">.</span>pathname <span class="c1">// "/%F0%9F%92%A9"</span></code></pre>
    <p>This throws an exception if the input is not an <a data-link-type="dfn" href="#absolute-url-string" id="ref-for-absolute-url-string①">absolute-URL string</a>: </p>
<pre><code class="lang-javascript highlight"><span class="k">try</span> <span class="p">{</span>
  <span class="kd">var</span> url <span class="o">=</span> <span class="k">new</span> URL<span class="p">(</span><span class="s2">"/🍣🍺"</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span>e<span class="p">)</span> <span class="p">{</span>
  <span class="c1">// that happened</span>
<span class="c1"></span><span class="p">}</span></code></pre>
    <p>A <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url⑧">base URL</a> is necessary if the input is a <a data-link-type="dfn" href="#relative-url-string" id="ref-for-relative-url-string④">relative-URL string</a>: </p>
<pre><code class="lang-javascript highlight"><span class="kd">var</span> input <span class="o">=</span> <span class="s2">"/🍣🍺"</span><span class="p">,</span>
    url <span class="o">=</span> <span class="k">new</span> URL<span class="p">(</span>input<span class="p">,</span> document<span class="p">.</span>baseURI<span class="p">)</span>
url<span class="p">.</span>href <span class="c1">// "https://url.spec.whatwg.org/%F0%9F%8D%A3%F0%9F%8D%BA"</span></code></pre>
    <p>A <code class="idl"><a data-link-type="idl" href="#url" id="ref-for-url④">URL</a></code> object can be used as <a data-link-type="dfn" href="#concept-base-url" id="ref-for-concept-base-url⑨">base URL</a> (while IDL requires a string as argument, a <code class="idl"><a data-link-type="idl" href="#url" id="ref-for-url⑤">URL</a></code> object stringifies to its <code class="idl"><a data-link-type="idl" href="#dom-url-href" id="ref-for-dom-url-href①">href</a></code> attribute value):</p>
<pre><code class="lang-javascript highlight"><span class="kd">var</span> url <span class="o">=</span> <span class="k">new</span> URL<span class="p">(</span><span class="s2">"🏳️‍🌈"</span><span class="p">,</span> <span class="k">new</span> URL<span class="p">(</span><span class="s2">"https://pride.example/hello-world"</span><span class="p">))</span>
url<span class="p">.</span>pathname <span class="c1">// "/%F0%9F%8F%B3%EF%B8%8F%E2%80%8D%F0%9F%8C%88"</span></code></pre>
   </div>
   <hr id="urlutils-members">
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-href"><code>href</code><a class="self-link" href="#dom-url-href"></a></dfn> attribute’s getter and the <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="method" data-export="" id="dom-url-tojson"><code>toJSON()</code><a class="self-link" href="#dom-url-tojson"></a></dfn> method, when invoked, must return the <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer⑦">serialization</a> of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①">url</a>. </p>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-href" id="ref-for-dom-url-href②">href</a></code> attribute’s setter must run these steps: </p>
   <ol>
    <li>
     <p>Let <var>parsedURL</var> be the result of running the <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser⑦">basic URL parser</a> on the given
 value. </p>
    <li>
     <p>If <var>parsedURL</var> is failure, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw②">throw</a> a <code>TypeError</code> exception. </p>
    <li>
     <p>Set <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②">url</a> to <var>parsedURL</var>. </p>
    <li>
     <p>Empty <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②">context object</a>’s <a data-link-type="dfn" href="#concept-url-query-object" id="ref-for-concept-url-query-object②">query object</a>’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list">list</a>. </p>
    <li>
     <p>Let <var>query</var> be <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③">url</a>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query②①">query</a>. </p>
    <li>
     <p>If <var>query</var> is non-null, then set <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object④">context object</a>’s <a data-link-type="dfn" href="#concept-url-query-object" id="ref-for-concept-url-query-object③">query object</a>’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list①">list</a> to the result of <a data-link-type="dfn" href="#concept-urlencoded-string-parser" id="ref-for-concept-urlencoded-string-parser">parsing</a> <var>query</var>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-origin"><code>origin</code><a class="self-link" href="#dom-url-origin"></a></dfn> attribute’s getter must return the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#ascii-serialisation-of-an-origin" id="ref-for-ascii-serialisation-of-an-origin">serialization</a> of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑤">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url④">url</a>’s <a data-link-type="dfn" href="#concept-url-origin" id="ref-for-concept-url-origin②">origin</a>. <a data-link-type="biblio" href="#biblio-html">[HTML]</a> </p>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-protocol"><code>protocol</code><a class="self-link" href="#dom-url-protocol"></a></dfn> attribute’s getter must return <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑥">context object</a> <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url⑤">url</a>’s <a data-link-type="dfn" href="#concept-url-scheme" id="ref-for-concept-url-scheme③④">scheme</a>, followed by U+003A (:). </p>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-protocol" id="ref-for-dom-url-protocol①">protocol</a></code> attribute’s setter must <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser⑧">basic URL parse</a> the given value, followed by U+003A (:), with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑦">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url⑥">url</a> as <var>url</var> and <a data-link-type="dfn" href="#scheme-start-state" id="ref-for-scheme-start-state①">scheme start state</a> as <var>state override</var>. </p>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-username"><code>username</code><a class="self-link" href="#dom-url-username"></a></dfn> attribute’s getter must return <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑧">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url⑦">url</a>’s <a data-link-type="dfn" href="#concept-url-username" id="ref-for-concept-url-username①⑦">username</a>. </p>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-username" id="ref-for-dom-url-username①">username</a></code> attribute’s setter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object⑨">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url⑧">url</a> <a data-link-type="dfn" href="#cannot-have-a-username-password-port" id="ref-for-cannot-have-a-username-password-port">cannot have a username/password/port</a>,
 then return. </p>
    <li>
     <p><a data-link-type="dfn" href="#set-the-username" id="ref-for-set-the-username">Set the username</a> given <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①⓪">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url⑨">url</a> and the
 given value. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-password"><code>password</code><a class="self-link" href="#dom-url-password"></a></dfn> attribute’s getter must return <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①①">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①⓪">url</a>’s <a data-link-type="dfn" href="#concept-url-password" id="ref-for-concept-url-password①⑧">password</a>. </p>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-password" id="ref-for-dom-url-password①">password</a></code> attribute’s setter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①②">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①①">url</a> <a data-link-type="dfn" href="#cannot-have-a-username-password-port" id="ref-for-cannot-have-a-username-password-port①">cannot have a username/password/port</a>,
 then return. </p>
    <li>
     <p><a data-link-type="dfn" href="#set-the-password" id="ref-for-set-the-password">Set the password</a> given <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①③">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①②">url</a> and the
 given value. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-host"><code>host</code><a class="self-link" href="#dom-url-host"></a></dfn> attribute’s getter must run these steps: </p>
   <ol>
    <li>
     <p>Let <var>url</var> be <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①④">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①③">url</a>. </p>
    <li>
     <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host④②">host</a> is null, return the empty string. </p>
    <li>
     <p>If <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port②⓪">port</a> is null, return <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host④③">host</a>, <a data-link-type="dfn" href="#concept-host-serializer" id="ref-for-concept-host-serializer④">serialized</a>. </p>
    <li>
     <p>Return <var>url</var>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host④④">host</a>, <a data-link-type="dfn" href="#concept-host-serializer" id="ref-for-concept-host-serializer⑤">serialized</a>,
 followed by U+003A (:) and <var>url</var>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port②①">port</a>, <a data-link-type="dfn" href="#serialize-an-integer" id="ref-for-serialize-an-integer②">serialized</a>. </p>
   </ol>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-host" id="ref-for-dom-url-host①">host</a></code> attribute’s setter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①⑤">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①④">url</a>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag⑦">cannot-be-a-base-URL flag</a> is
 set, then return. </p>
    <li>
     <p><a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser⑨">Basic URL parse</a> the given value with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①⑥">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①⑤">url</a> as <var>url</var> and <a data-link-type="dfn" href="#host-state" id="ref-for-host-state①">host state</a> as <var>state override</var>. </p>
   </ol>
   <p class="note no-backref" role="note">If the given value for the <code><a class="idl-code" data-link-type="attribute" href="#dom-url-host" id="ref-for-dom-url-host②">host</a></code> attribute’s setter lacks a <a data-link-type="dfn" href="#url-port-string" id="ref-for-url-port-string②">port</a>, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①⑦">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①⑥">url</a>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port②②">port</a> will not change. This can be unexpected as <code>host</code> attribute’s getter does return a <a data-link-type="dfn" href="#url-port-string" id="ref-for-url-port-string③">URL-port string</a> so one might have assumed
the setter to always "reset" both. </p>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-hostname"><code>hostname</code><a class="self-link" href="#dom-url-hostname"></a></dfn> attribute’s getter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①⑧">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①⑦">url</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host④⑤">host</a> is null, return the
 empty string. </p>
    <li>
     <p>Return <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object①⑨">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①⑧">url</a>’s <a data-link-type="dfn" href="#concept-url-host" id="ref-for-concept-url-host④⑥">host</a>, <a data-link-type="dfn" href="#concept-host-serializer" id="ref-for-concept-host-serializer⑥">serialized</a>. </p>
   </ol>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-hostname" id="ref-for-dom-url-hostname①">hostname</a></code> attribute’s setter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②⓪">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url①⑨">url</a>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag⑧">cannot-be-a-base-URL flag</a> is
 set, then return. </p>
    <li>
     <p><a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser①⓪">Basic URL parse</a> the given value with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②①">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②⓪">url</a> as <var>url</var> and <a data-link-type="dfn" href="#hostname-state" id="ref-for-hostname-state①">hostname state</a> as <var>state override</var>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-port"><code>port</code><a class="self-link" href="#dom-url-port"></a></dfn> attribute’s getter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②②">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②①">url</a>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port②③">port</a> is null, return the
 empty string. </p>
    <li>
     <p>Return <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②③">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②②">url</a>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port②④">port</a>, <a data-link-type="dfn" href="#serialize-an-integer" id="ref-for-serialize-an-integer③">serialized</a>. </p>
   </ol>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-port" id="ref-for-dom-url-port①">port</a></code> attribute’s setter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②④">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②③">url</a> <a data-link-type="dfn" href="#cannot-have-a-username-password-port" id="ref-for-cannot-have-a-username-password-port②">cannot have a username/password/port</a>,
 then return. </p>
    <li>
     <p>If the given value is the empty string, then set <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②⑤">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②④">url</a>’s <a data-link-type="dfn" href="#concept-url-port" id="ref-for-concept-url-port②⑤">port</a> to null.</p>
    <li>
     <p>Otherwise, <a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser①①">basic URL parse</a> the given value with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②⑥">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②⑤">url</a> as <var>url</var> and <a data-link-type="dfn" href="#port-state" id="ref-for-port-state①">port state</a> as <var>state override</var>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-pathname"><code>pathname</code><a class="self-link" href="#dom-url-pathname"></a></dfn> attribute’s getter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②⑦">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②⑥">url</a>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag⑨">cannot-be-a-base-URL flag</a> is
 set, then return <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②⑧">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②⑦">url</a>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path④②">path</a>[0]. </p>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object②⑨">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②⑧">url</a>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path④③">path</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty④">is empty</a>, then return the empty string. </p>
    <li>
     <p>Return U+002F (/), followed by the strings in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③⓪">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url②⑨">url</a>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path④④">path</a> (including empty strings), if any, separated from each
 other by U+002F (/). </p>
   </ol>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-pathname" id="ref-for-dom-url-pathname①">pathname</a></code> attribute’s setter must
run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③①">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③⓪">url</a>’s <a data-link-type="dfn" href="#url-cannot-be-a-base-url-flag" id="ref-for-url-cannot-be-a-base-url-flag①⓪">cannot-be-a-base-URL flag</a> is
 set, then return. </p>
    <li>
     <p>Empty <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③②">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③①">url</a>’s <a data-link-type="dfn" href="#concept-url-path" id="ref-for-concept-url-path④⑤">path</a>. </p>
    <li>
     <p><a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser①②">Basic URL parse</a> the given value with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③③">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③②">url</a> as <var>url</var> and <a data-link-type="dfn" href="#path-start-state" id="ref-for-path-start-state④">path start state</a> as <var>state override</var>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-search"><code>search</code><a class="self-link" href="#dom-url-search"></a></dfn> attribute’s getter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③④">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③③">url</a>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query②②">query</a> is either null or the
 empty string, return the empty string. </p>
    <li>
     <p>Return U+003F (?), followed by <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③⑤">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③④">url</a>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query②③">query</a>. </p>
   </ol>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-search" id="ref-for-dom-url-search①">search</a></code> attribute’s setter must run these
steps: </p>
   <ol>
    <li>
     <p>Let <var>url</var> be <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③⑥">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③⑤">url</a>. </p>
    <li>
     <p>If the given value is the empty string, set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query②④">query</a> to null,
 empty <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③⑦">context object</a>’s <a data-link-type="dfn" href="#concept-url-query-object" id="ref-for-concept-url-query-object④">query object</a>’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list②">list</a>,
 and then return. </p>
    <li>
     <p>Let <var>input</var> be the given value with a single leading U+003F (?) removed, if
 any. </p>
    <li>
     <p>Set <var>url</var>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query②⑤">query</a> to the empty string. </p>
    <li>
     <p><a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser①③">Basic URL parse</a> <var>input</var> with <var>url</var> as <var>url</var> and <a data-link-type="dfn" href="#query-state" id="ref-for-query-state⑤">query state</a> as <var>state override</var>. </p>
    <li>
     <p>Set <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③⑧">context object</a>’s <a data-link-type="dfn" href="#concept-url-query-object" id="ref-for-concept-url-query-object⑤">query object</a>’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list③">list</a> to
 the result of <a data-link-type="dfn" href="#concept-urlencoded-string-parser" id="ref-for-concept-urlencoded-string-parser①">parsing</a> <var>input</var>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-searchparams"><code>searchParams</code><a class="self-link" href="#dom-url-searchparams"></a></dfn> attribute’s getter must return <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object③⑨">context object</a>’s <a data-link-type="dfn" href="#concept-url-query-object" id="ref-for-concept-url-query-object⑥">query object</a>. </p>
   <p>The <dfn class="idl-code" data-dfn-for="URL" data-dfn-type="attribute" data-export="" id="dom-url-hash"><code>hash</code><a class="self-link" href="#dom-url-hash"></a></dfn> attribute’s
getter must run these steps: </p>
   <ol>
    <li>
     <p>If <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object④⓪">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③⑥">url</a>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment①⓪">fragment</a> is either null or
 the empty string, return the empty string. </p>
    <li>
     <p>Return U+0023 (#), followed by <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object④①">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③⑦">url</a>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment①①">fragment</a>. </p>
   </ol>
   <p>The <code><a class="idl-code" data-link-type="attribute" href="#dom-url-hash" id="ref-for-dom-url-hash①">hash</a></code> attribute’s setter must run these
steps: </p>
   <ol>
    <li>
     <p>If the given value is the empty string, then set <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object④②">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③⑧">url</a>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment①②">fragment</a> to null and return. </p>
    <li>
     <p>Let <var>input</var> be the given value with a single leading U+0023 (#) removed, if
 any. </p>
    <li>
     <p>Set <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object④③">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url③⑨">url</a>’s <a data-link-type="dfn" href="#concept-url-fragment" id="ref-for-concept-url-fragment①③">fragment</a> to the empty
 string. </p>
    <li>
     <p><a data-link-type="dfn" href="#concept-basic-url-parser" id="ref-for-concept-basic-url-parser①④">Basic URL parse</a> <var>input</var> with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object" id="ref-for-context-object④④">context object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url④⓪">url</a> as <var>url</var> and <a data-link-type="dfn" href="#fragment-state" id="ref-for-fragment-state⑦">fragment state</a> as <var>state override</var>. </p>
   </ol>
   <h3 class="heading settled" data-level="6.2" id="interface-urlsearchparams"><span class="secno">6.2. </span><span class="content">URLSearchParams class</span><a class="self-link" href="#interface-urlsearchparams"></a></h3>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-urlsearchparams-urlsearchparams" id="ref-for-dom-urlsearchparams-urlsearchparams">Constructor</a>(<span class="kt">optional</span> (<span class="kt">sequence</span>&lt;<span class="kt">sequence</span>&lt;<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①④"><span class="kt">USVString</span></a>>> <span class="kt">or</span> <span class="kt">record</span>&lt;<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑤"><span class="kt">USVString</span></a>, <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑥"><span class="kt">USVString</span></a>> <span class="kt">or</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑦"><span class="kt">USVString</span></a>) <dfn class="nv idl-code" data-dfn-for="URLSearchParams/URLSearchParams(init)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-urlsearchparams-init-init"><code>init</code><a class="self-link" href="#dom-urlsearchparams-urlsearchparams-init-init"></a></dfn> = ""),
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <dfn class="nv idl-code" data-dfn-type="interface" data-export="" id="urlsearchparams"><code>URLSearchParams</code><a class="self-link" href="#urlsearchparams"></a></dfn> {
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-append" id="ref-for-dom-urlsearchparams-append">append</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑧"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URLSearchParams/append(name, value)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-append-name-value-name"><code>name</code><a class="self-link" href="#dom-urlsearchparams-append-name-value-name"></a></dfn>, <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑨"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URLSearchParams/append(name, value)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-append-name-value-value"><code>value</code><a class="self-link" href="#dom-urlsearchparams-append-name-value-value"></a></dfn>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-delete" id="ref-for-dom-urlsearchparams-delete">delete</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⓪"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URLSearchParams/delete(name)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-delete-name-name"><code>name</code><a class="self-link" href="#dom-urlsearchparams-delete-name-name"></a></dfn>);
  <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②①"><span class="kt">USVString</span></a>? <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-get" id="ref-for-dom-urlsearchparams-get">get</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②②"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URLSearchParams/get(name)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-get-name-name"><code>name</code><a class="self-link" href="#dom-urlsearchparams-get-name-name"></a></dfn>);
  <span class="kt">sequence</span>&lt;<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②③"><span class="kt">USVString</span></a>> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-getall" id="ref-for-dom-urlsearchparams-getall">getAll</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②④"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URLSearchParams/getAll(name)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-getall-name-name"><code>name</code><a class="self-link" href="#dom-urlsearchparams-getall-name-name"></a></dfn>);
  <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean"><span class="kt">boolean</span></a> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-has" id="ref-for-dom-urlsearchparams-has">has</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑤"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URLSearchParams/has(name)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-has-name-name"><code>name</code><a class="self-link" href="#dom-urlsearchparams-has-name-name"></a></dfn>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-set" id="ref-for-dom-urlsearchparams-set">set</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑥"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URLSearchParams/set(name, value)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-set-name-value-name"><code>name</code><a class="self-link" href="#dom-urlsearchparams-set-name-value-name"></a></dfn>, <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑦"><span class="kt">USVString</span></a> <dfn class="nv idl-code" data-dfn-for="URLSearchParams/set(name, value)" data-dfn-type="argument" data-export="" id="dom-urlsearchparams-set-name-value-value"><code>value</code><a class="self-link" href="#dom-urlsearchparams-set-name-value-value"></a></dfn>);

  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-sort" id="ref-for-dom-urlsearchparams-sort">sort</a>();

  <span class="kt">iterable</span>&lt;<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑧"><span class="kt">USVString</span></a>, <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑨"><span class="kt">USVString</span></a>>;
  <a class="kt" data-link-type="dfn" href="#urlsearchparams-stringification-behavior" id="ref-for-urlsearchparams-stringification-behavior">stringifier</a>;
};
</pre>
   <div class="example" id="example-constructing-urlsearchparams">
    <a class="self-link" href="#example-constructing-urlsearchparams"></a> 
    <p>Constructing and stringifying a <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams③">URLSearchParams</a></code> object is fairly straightforward: </p>
<pre><code class="lang-javascript highlight"><span class="kd">let</span> params <span class="o">=</span> <span class="k">new</span> URLSearchParams<span class="p">({</span>key<span class="o">:</span> <span class="s2">"730d67"</span><span class="p">})</span>
params<span class="p">.</span>toString<span class="p">()</span> <span class="c1">// "key=730d67"</span></code></pre>
   </div>
   <p>A <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams④">URLSearchParams</a></code> object has an associated <dfn data-dfn-for="URLSearchParams" data-dfn-type="dfn" data-export="" id="concept-urlsearchparams-list">list<a class="self-link" href="#concept-urlsearchparams-list"></a></dfn> of name-value pairs,
which is initially empty. </p>
   <p>A <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams⑤">URLSearchParams</a></code> object has an associated <dfn data-dfn-for="URLSearchParams" data-dfn-type="dfn" data-export="" id="concept-urlsearchparams-url-object">url object<a class="self-link" href="#concept-urlsearchparams-url-object"></a></dfn>, which is
initially null. </p>
   <p>To create a <dfn data-dfn-for="URLSearchParams" data-dfn-type="dfn" data-export="" id="concept-urlsearchparams-new">new<a class="self-link" href="#concept-urlsearchparams-new"></a></dfn> <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams⑥">URLSearchParams</a></code> object using <var>init</var>, run these steps: </p>
   <ol>
    <li>
     <p>Let <var>query</var> be a new <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams⑦">URLSearchParams</a></code> object. </p>
    <li>
     <p>If <var>init</var> is a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence">sequence</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑤">for each</a> <var>pair</var> in <var>init</var>: </p>
     <ol>
      <li>
       <p>If <var>pair</var> does not contain exactly two items, then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw③">throw</a> a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>. </p>
      <li>
       <p>Append a new name-value pair whose name is <var>pair</var>’s first item, and value is <var>pair</var>’s second item, to <var>query</var>’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list④">list</a>. </p>
     </ol>
    <li>
     <p>Otherwise, if <var>init</var> is a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-record" id="ref-for-idl-record">record</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">for each</a> <var>name</var> → <var>value</var> in <var>init</var>, append a new name-value pair whose name is <var>name</var> and value is <var>value</var>, to <var>query</var>’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list⑤">list</a>. </p>
    <li>
     <p>Otherwise, <var>init</var> is a string, then set <var>query</var>’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list⑥">list</a> to the result of <a data-link-type="dfn" href="#concept-urlencoded-string-parser" id="ref-for-concept-urlencoded-string-parser②">parsing</a> <var>init</var>. </p>
    <li>
     <p>Return <var>query</var>. </p>
   </ol>
   <p>A <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams⑧">URLSearchParams</a></code> object’s <dfn data-dfn-for="URLSearchParams" data-dfn-type="dfn" data-noexport="" id="concept-urlsearchparams-update">update steps<a class="self-link" href="#concept-urlsearchparams-update"></a></dfn> are to run these
steps: </p>
   <ol>
    <li>
     <p>Let <var>query</var> be the <a data-link-type="dfn" href="#concept-urlencoded-serializer" id="ref-for-concept-urlencoded-serializer">serialization</a> of <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams⑨">URLSearchParams</a></code> object’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list⑦">list</a>. </p>
    <li>
     <p>If <var>query</var> is the empty string, then set <var>query</var> to null. </p>
    <li>
     <p>Set <a data-link-type="dfn" href="#concept-urlsearchparams-url-object" id="ref-for-concept-urlsearchparams-url-object①">url object</a>’s <a data-link-type="dfn" href="#concept-url-url" id="ref-for-concept-url-url④①">url</a>’s <a data-link-type="dfn" href="#concept-url-query" id="ref-for-concept-url-query②⑥">query</a> to <var>query</var>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URLSearchParams" data-dfn-type="constructor" data-export="" id="dom-urlsearchparams-urlsearchparams"><code>URLSearchParams(<var>init</var>)</code><a class="self-link" href="#dom-urlsearchparams-urlsearchparams"></a></dfn> constructor, when invoked, must run these steps:</p>
   <ol>
    <li>
     <p>If <var>init</var> is a string and starts with U+003F (?), remove the first code point from <var>init</var>. </p>
    <li>
     <p>Return a <a data-link-type="dfn" href="#concept-urlsearchparams-new" id="ref-for-concept-urlsearchparams-new①">new</a> <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams①⓪">URLSearchParams</a></code> object using <var>init</var>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URLSearchParams" data-dfn-type="method" data-export="" id="dom-urlsearchparams-append"><code>append(<var>name</var>, <var>value</var>)</code><a class="self-link" href="#dom-urlsearchparams-append"></a></dfn> method, when invoked, must run these steps: </p>
   <ol>
    <li>
     <p>Append a new name-value pair whose name is <var>name</var> and
 value is <var>value</var>, to <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list⑧">list</a>. </p>
    <li>
     <p>Run the <a data-link-type="dfn" href="#concept-urlsearchparams-update" id="ref-for-concept-urlsearchparams-update">update steps</a>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URLSearchParams" data-dfn-type="method" data-export="" id="dom-urlsearchparams-delete"><code>delete(<var>name</var>)</code><a class="self-link" href="#dom-urlsearchparams-delete"></a></dfn> method, when
invoked, must run these steps: </p>
   <ol>
    <li>
     <p>Remove all name-value pairs whose name is <var>name</var> from <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list⑨">list</a>. </p>
    <li>
     <p>Run the <a data-link-type="dfn" href="#concept-urlsearchparams-update" id="ref-for-concept-urlsearchparams-update①">update steps</a>. </p>
   </ol>
   <p>The <dfn class="idl-code" data-dfn-for="URLSearchParams" data-dfn-type="method" data-export="" id="dom-urlsearchparams-get"><code>get(<var>name</var>)</code><a class="self-link" href="#dom-urlsearchparams-get"></a></dfn> method, when invoked, must return the value of the first name-value pair whose name is <var>name</var> in <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list①⓪">list</a>, if there is such a pair, and null otherwise. </p>
   <p>The <dfn class="idl-code" data-dfn-for="URLSearchParams" data-dfn-type="method" data-export="" id="dom-urlsearchparams-getall"><code>getAll(<var>name</var>)</code><a class="self-link" href="#dom-urlsearchparams-getall"></a></dfn> method, when invoked, must return the values of all name-value pairs whose name is <var>name</var>,
in <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list①①">list</a>, in list order, and the empty sequence otherwise. </p>
   <p>The <dfn class="idl-code" data-dfn-for="URLSearchParams" data-dfn-type="method" data-export="" id="dom-urlsearchparams-has"><code>has(<var>name</var>)</code><a class="self-link" href="#dom-urlsearchparams-has"></a></dfn> method, when invoked, must return true if there is a name-value pair whose name is <var>name</var> in <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list①②">list</a>, and false otherwise. </p>
   <p>The <dfn class="idl-code" data-dfn-for="URLSearchParams" data-dfn-type="method" data-export="" id="dom-urlsearchparams-set"><code>set(<var>name</var>, <var>value</var>)</code><a class="self-link" href="#dom-urlsearchparams-set"></a></dfn> method, when invoked, must run these steps: </p>
   <ol>
    <li>
     <p>If there are any name-value pairs whose name is <var>name</var>, in <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list①③">list</a>, set the value of the first such name-value pair to <var>value</var> and remove the others. </p>
    <li>
     <p>Otherwise, append a new name-value pair whose name is <var>name</var> and value is <var>value</var>, to <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list①④">list</a>. </p>
    <li>
     <p>Run the <a data-link-type="dfn" href="#concept-urlsearchparams-update" id="ref-for-concept-urlsearchparams-update②">update steps</a>. </p>
   </ol>
   <hr>
   <div class="example" id="example-searchparams-sort">
    <a class="self-link" href="#example-searchparams-sort"></a> 
    <p>It can be useful to sort the name-value pairs in a <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams①①">URLSearchParams</a></code> object, in particular to
 increase cache hits. This can be accomplished through invoking the <code class="idl"><a data-link-type="idl" href="#dom-urlsearchparams-sort" id="ref-for-dom-urlsearchparams-sort①">sort()</a></code> method: </p>
<pre><code class="lang-javascript highlight"><span class="kr">const</span> url <span class="o">=</span> <span class="k">new</span> URL<span class="p">(</span><span class="s2">"https://example.org/?q=🏳️‍🌈&amp;key=e1f7bc78"</span><span class="p">);</span>
url<span class="p">.</span>searchParams<span class="p">.</span>sort<span class="p">();</span>
url<span class="p">.</span>search<span class="p">;</span> <span class="c1">// "?key=e1f7bc78&amp;q=%F0%9F%8F%B3%EF%B8%8F%E2%80%8D%F0%9F%8C%88"</span></code></pre>
    <p>To avoid altering the original input, e.g., for comparison purposes, construct a new <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams①②">URLSearchParams</a></code> object: </p>
<pre><code class="lang-javascript highlight"><span class="kr">const</span> sorted <span class="o">=</span> <span class="k">new</span> URLSearchParams<span class="p">(</span>url<span class="p">.</span>search<span class="p">)</span>
sorted<span class="p">.</span>sort<span class="p">()</span></code></pre>
   </div>
   <p>The <dfn class="idl-code" data-dfn-for="URLSearchParams" data-dfn-type="method" data-export="" id="dom-urlsearchparams-sort"><code>sort()</code><a class="self-link" href="#dom-urlsearchparams-sort"></a></dfn> method, when invoked, must run
these steps: </p>
   <ol>
    <li>
     <p>Sort all name-value pairs, if any, by their names. Sorting must be done by comparison of
 code units. The relative order between name-value pairs with equal names must be preserved. </p>
    <li>
     <p>Run the <a data-link-type="dfn" href="#concept-urlsearchparams-update" id="ref-for-concept-urlsearchparams-update③">update steps</a>. </p>
   </ol>
   <hr>
   <p>The <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-value-pairs-to-iterate-over" id="ref-for-dfn-value-pairs-to-iterate-over">value pairs to iterate over</a> are the <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list①⑤">list</a> name-value pairs with the key being
the name and the value being the value. </p>
   <p>The <dfn data-dfn-for="URLSearchParams" data-dfn-type="dfn" data-noexport="" id="urlsearchparams-stringification-behavior">stringification behavior<a class="self-link" href="#urlsearchparams-stringification-behavior"></a></dfn> must return the <a data-link-type="dfn" href="#concept-urlencoded-serializer" id="ref-for-concept-urlencoded-serializer①">serialization</a> of the <code class="idl"><a data-link-type="idl" href="#urlsearchparams" id="ref-for-urlsearchparams①③">URLSearchParams</a></code> object’s <a data-link-type="dfn" href="#concept-urlsearchparams-list" id="ref-for-concept-urlsearchparams-list①⑥">list</a>. </p>
   <h3 class="heading settled" data-level="6.3" id="url-apis-elsewhere"><span class="secno">6.3. </span><span class="content">URL APIs elsewhere</span><a class="self-link" href="#url-apis-elsewhere"></a></h3>
   <p>A standard that exposes <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑥①">URLs</a>, should expose the <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑥②">URL</a> as a string (by <a data-link-type="dfn" href="#concept-url-serializer" id="ref-for-concept-url-serializer⑧">serializing</a> an internal <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑥③">URL</a>). A standard should not expose a <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑥④">URL</a> using a <code class="idl"><a data-link-type="idl" href="#url" id="ref-for-url⑥">URL</a></code> object. <code class="idl"><a data-link-type="idl" href="#url" id="ref-for-url⑦">URL</a></code> objects are meant for <a data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑥⑤">URL</a> manipulation. In IDL the USVString type should be used. </p>
   <p class="note" role="note">The higher-level notion here is that values are to be exposed as immutable data
structures. </p>
   <p>If a standard decides to use a variant of the name "URL" for a feature it defines, it should name
such a feature "url" (i.e., lowercase and with an "l" at the end). Names such as "URL", "URI", and
"IRI" should not be used. However, if the name is a compound, "URL" (i.e., uppercase) is preferred,
e.g., "newURL" and "oldURL". </p>
   <p class="note" role="note">The <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/server-sent-events.html#eventsource" id="ref-for-eventsource">EventSource</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hashchangeevent" id="ref-for-hashchangeevent">HashChangeEvent</a></code> interfaces in HTML are examples of proper
naming. <a data-link-type="biblio" href="#biblio-html">[HTML]</a> </p>
   <h2 class="no-num heading settled" id="acknowledgments"><span class="content">Acknowledgments</span><a class="self-link" href="#acknowledgments"></a></h2>
   <p>There have been a lot of people that have helped make <a class="no-backref" data-link-type="dfn" href="#concept-url" id="ref-for-concept-url⑥⑥">URLs</a> more interoperable over the years and thereby furthered the goals of this standard. Likewise many
people have helped making this standard what it is today. </p>
   <p>With that, many thanks to
100の人,
Adam Barth,
Addison Phillips,
Albert Wiersch,
Alex Christensen,
Alexandre Morgaut,
Andrew Sullivan,
Arkadiusz Michalski,
Behnam Esfahbod,
Bobby Holley,
Boris Zbarsky,
Brad Hill,
Brandon Ross,
Chris Dumez,
Chris Rebert,
Corey Farwell,
Dan Appelquist,
Daniel Bratell,
Daniel Stenberg,
David Burns,
David Håsäther,
David Sheets,
David Singer,
David Walp,
Domenic Denicola,
Erik Arvidsson,
Gavin Carothers,
Geoff Richards,
Glenn Maynard,
Gordon P. Hemsley,
Henri Sivonen,
Ian Hickson,
Ilya Grigorik,
Italo A. Casas,
Jakub Gieryluk,
James Graham,
James Manger,
James Ross,
Jeffrey Posnick,
Joe Duarte,
Joshua Bell,
Jxck,
Kevin Grandon,
Kornel Lesiński,
Larry Masinter,
Leif Halvard Silli,
Mark Davis,
Marcos Cáceres,
Martin Dürst,
Mathias Bynens,
Michael Peick,
Michael™ Smith,
Michal Bukovský,
Michel Suignard,
Noah Levitt,
Peter Occil,
Philip Jägenstedt,
Philippe Ombredanne,
Prayag Verma,
Rimas Misevičius,
Robert Kieffer,
Rodney Rehm,
Roy Fielding,
Ryan Sleevi,
Sam Ruby,
Santiago M. Mola,
Sebastian Mayr,
Simon Pieters,
Simon Sapin,
Steven Vachon,
Stuart Cook,
Sven Uhlig,
Tab Atkins,
吉野剛史 (Takeshi Yoshino),
Tantek Çelik,
Tiancheng "Timothy" Gu,
Tim Berners-Lee,
簡冠庭 (Tim Guan-tin Chien),
Titi_Alone,
Tomek Wytrębowicz,
Trevor Rowbotham,
Valentin Gosu,
Vyacheslav Matva,
Wei Wang,
山岸和利 (Yamagishi Kazutoshi), and
成瀬ゆい (Yui Naruse)
for being awesome! </p>
   <p>This standard is written by <a href="https://annevankesteren.nl/" lang="nl">Anne van Kesteren</a> (<a href="https://www.mozilla.org/">Mozilla</a>, <a href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>). </p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-num no-ref heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p>All diagrams, examples, and notes in this specification are non-normative, as are all sections explicitly marked non-normative. Everything else in this specification is normative. </p>
   <p>The key words “MUST”, “MUST NOT”, “REQUIRED”,  “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this specification are to be interpreted as described in RFC2119. For readability, these words do not appear in all uppercase letters in this specification. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p>Conformance requirements phrased as algorithms or specific steps may be implemented in any manner, so long as the end result is equivalent. (In particular, the algorithms defined in this specification are intended to be easy to follow, and not intended to be performant.) </p>
  </div>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#absolute-url-string">absolute-URL string</a><span>, in §4.3</span>
   <li><a href="#absolute-url-with-fragment-string">absolute-URL-with-fragment string</a><span>, in §4.3</span>
   <li><a href="#dom-urlsearchparams-append">append(name, value)</a><span>, in §6.2</span>
   <li><a href="#concept-urlencoded">application/x-www-form-urlencoded</a><span>, in §5</span>
   <li><a href="#authority-state">authority state</a><span>, in §4.4</span>
   <li><a href="#concept-base-url">base URL</a><span>, in §4.2</span>
   <li><a href="#concept-basic-url-parser">basic URL parser</a><span>, in §4.4</span>
   <li><a href="#c">c</a><span>, in §1.2</span>
   <li><a href="#c0-control-percent-encode-set">C0 control percent-encode set</a><span>, in §1.3</span>
   <li><a href="#url-cannot-be-a-base-url-flag">cannot-be-a-base-URL flag</a><span>, in §4.1</span>
   <li><a href="#cannot-be-a-base-url-path-state">cannot-be-a-base-URL path state</a><span>, in §4.4</span>
   <li><a href="#cannot-have-a-username-password-port">cannot have a username/password/port</a><span>, in §4.2</span>
   <li><a href="#default-port">default port</a><span>, in §4.2</span>
   <li><a href="#dom-urlsearchparams-delete">delete(name)</a><span>, in §6.2</span>
   <li><a href="#concept-domain">domain</a><span>, in §3.1</span>
   <li><a href="#concept-domain-to-ascii">domain to ASCII</a><span>, in §3.3</span>
   <li><a href="#concept-domain-to-unicode">domain to Unicode</a><span>, in §3.3</span>
   <li><a href="#double-dot-path-segment">double-dot path segment</a><span>, in §4.3</span>
   <li><a href="#empty-host">empty host</a><span>, in §3.1</span>
   <li><a href="#eof-code-point">EOF code point</a><span>, in §1.2</span>
   <li>
    equal
    <ul>
     <li><a href="#concept-host-equals">dfn for host</a><span>, in §3.7</span>
     <li><a href="#concept-url-equals">dfn for url</a><span>, in §4.6</span>
    </ul>
   <li><a href="#file-host-state">file host state</a><span>, in §4.4</span>
   <li><a href="#file-slash-state">file slash state</a><span>, in §4.4</span>
   <li><a href="#file-state">file state</a><span>, in §4.4</span>
   <li><a href="#forbidden-host-code-point">forbidden host code point</a><span>, in §3.2</span>
   <li><a href="#concept-url-fragment">fragment</a><span>, in §4.1</span>
   <li><a href="#fragment-percent-encode-set">fragment percent-encode set</a><span>, in §1.3</span>
   <li><a href="#fragment-state">fragment state</a><span>, in §4.4</span>
   <li><a href="#dom-urlsearchparams-getall">getAll(name)</a><span>, in §6.2</span>
   <li><a href="#dom-urlsearchparams-get">get(name)</a><span>, in §6.2</span>
   <li><a href="#dom-url-hash">hash</a><span>, in §6.1</span>
   <li><a href="#dom-urlsearchparams-has">has(name)</a><span>, in §6.2</span>
   <li>
    host
    <ul>
     <li><a href="#concept-host">definition of</a><span>, in §3.1</span>
     <li><a href="#concept-url-host">dfn for url</a><span>, in §4.1</span>
     <li><a href="#dom-url-host">attribute for URL</a><span>, in §6.1</span>
    </ul>
   <li><a href="#dom-url-hostname">hostname</a><span>, in §6.1</span>
   <li><a href="#hostname-state">hostname state</a><span>, in §4.4</span>
   <li><a href="#concept-host-parser">host parser</a><span>, in §3.5</span>
   <li><a href="#concept-host-serializer">host serializer</a><span>, in §3.6</span>
   <li><a href="#host-state">host state</a><span>, in §4.4</span>
   <li><a href="#dom-url-href">href</a><span>, in §6.1</span>
   <li><a href="#include-credentials">include credentials</a><span>, in §4.2</span>
   <li><a href="#include-credentials">includes credentials</a><span>, in §4.2</span>
   <li><a href="#concept-ipv4">IPv4 address</a><span>, in §3.1</span>
   <li><a href="#ipv4-number-parser">IPv4 number parser</a><span>, in §3.5</span>
   <li><a href="#concept-ipv4-parser">IPv4 parser</a><span>, in §3.5</span>
   <li><a href="#concept-ipv4-serializer">IPv4 serializer</a><span>, in §3.6</span>
   <li><a href="#concept-ipv6">IPv6 address</a><span>, in §3.1</span>
   <li><a href="#concept-ipv6-parser">IPv6 parser</a><span>, in §3.5</span>
   <li><a href="#concept-ipv6-piece">IPv6 piece</a><span>, in §3.1</span>
   <li><a href="#concept-ipv6-serializer">IPv6 serializer</a><span>, in §3.6</span>
   <li><a href="#is-special">is special</a><span>, in §4.2</span>
   <li><a href="#concept-urlsearchparams-list">list</a><span>, in §6.2</span>
   <li><a href="#concept-urlsearchparams-new">new</a><span>, in §6.2</span>
   <li><a href="#normalized-windows-drive-letter">normalized Windows drive letter</a><span>, in §4.2</span>
   <li><a href="#no-scheme-state">no scheme state</a><span>, in §4.4</span>
   <li><a href="#concept-url-object">object</a><span>, in §4.1</span>
   <li><a href="#opaque-host">opaque host</a><span>, in §3.1</span>
   <li><a href="#opaque-host-and-port-string">opaque-host-and-port string</a><span>, in §4.3</span>
   <li><a href="#concept-opaque-host-parser">opaque-host parser</a><span>, in §3.5</span>
   <li>
    origin
    <ul>
     <li><a href="#concept-url-origin">dfn for url</a><span>, in §4.7</span>
     <li><a href="#dom-url-origin">attribute for URL</a><span>, in §6.1</span>
    </ul>
   <li>
    password
    <ul>
     <li><a href="#concept-url-password">dfn for url</a><span>, in §4.1</span>
     <li><a href="#dom-url-password">attribute for URL</a><span>, in §6.1</span>
    </ul>
   <li><a href="#concept-url-path">path</a><span>, in §4.1</span>
   <li><a href="#path-absolute-non-windows-file-url-string">path-absolute-non-Windows-file-URL string</a><span>, in §4.3</span>
   <li><a href="#path-absolute-url-string">path-absolute-URL string</a><span>, in §4.3</span>
   <li><a href="#dom-url-pathname">pathname</a><span>, in §6.1</span>
   <li><a href="#path-or-authority-state">path or authority state</a><span>, in §4.4</span>
   <li><a href="#path-percent-encode-set">path percent-encode set</a><span>, in §1.3</span>
   <li><a href="#path-relative-scheme-less-url-string">path-relative-scheme-less-URL string</a><span>, in §4.3</span>
   <li><a href="#path-relative-url-string">path-relative-URL string</a><span>, in §4.3</span>
   <li><a href="#path-start-state">path start state</a><span>, in §4.4</span>
   <li><a href="#path-state">path state</a><span>, in §4.4</span>
   <li><a href="#percent-decode">percent decode</a><span>, in §1.3</span>
   <li><a href="#percent-encode">percent encode</a><span>, in §1.3</span>
   <li><a href="#percent-encoded-byte">percent-encoded byte</a><span>, in §1.3</span>
   <li>
    port
    <ul>
     <li><a href="#concept-url-port">dfn for url</a><span>, in §4.1</span>
     <li><a href="#dom-url-port">attribute for URL</a><span>, in §6.1</span>
    </ul>
   <li><a href="#port-state">port state</a><span>, in §4.4</span>
   <li><a href="#dom-url-protocol">protocol</a><span>, in §6.1</span>
   <li><a href="#concept-url-query">query</a><span>, in §4.1</span>
   <li><a href="#concept-url-query-object">query object</a><span>, in §6.1</span>
   <li><a href="#query-state">query state</a><span>, in §4.4</span>
   <li><a href="#relative-slash-state">relative slash state</a><span>, in §4.4</span>
   <li><a href="#relative-state">relative state</a><span>, in §4.4</span>
   <li><a href="#relative-url-string">relative-URL string</a><span>, in §4.3</span>
   <li><a href="#relative-url-with-fragment-string">relative-URL-with-fragment string</a><span>, in §4.3</span>
   <li><a href="#remaining">remaining</a><span>, in §1.2</span>
   <li><a href="#concept-url-scheme">scheme</a><span>, in §4.1</span>
   <li><a href="#scheme-relative-file-url-string">scheme-relative-file-URL string</a><span>, in §4.3</span>
   <li><a href="#scheme-relative-special-url-string">scheme-relative-special-URL string</a><span>, in §4.3</span>
   <li><a href="#scheme-relative-url-string">scheme-relative-URL string</a><span>, in §4.3</span>
   <li><a href="#scheme-start-state">scheme start state</a><span>, in §4.4</span>
   <li><a href="#scheme-state">scheme state</a><span>, in §4.4</span>
   <li><a href="#dom-url-search">search</a><span>, in §6.1</span>
   <li><a href="#dom-url-searchparams">searchParams</a><span>, in §6.1</span>
   <li><a href="#serialize-an-integer">serialize an integer</a><span>, in §1</span>
   <li><a href="#dom-urlsearchparams-set">set(name, value)</a><span>, in §6.2</span>
   <li><a href="#set-the-password">set the password</a><span>, in §4.4</span>
   <li><a href="#set-the-username">set the username</a><span>, in §4.4</span>
   <li><a href="#shorten-a-urls-path">shorten</a><span>, in §4.2</span>
   <li><a href="#shorten-a-urls-path">shorten a url’s path</a><span>, in §4.2</span>
   <li><a href="#single-dot-path-segment">single-dot path segment</a><span>, in §4.3</span>
   <li><a href="#dom-urlsearchparams-sort">sort()</a><span>, in §6.2</span>
   <li><a href="#special-authority-ignore-slashes-state">special authority ignore slashes state</a><span>, in §4.4</span>
   <li><a href="#special-authority-slashes-state">special authority slashes state</a><span>, in §4.4</span>
   <li><a href="#special-relative-or-authority-state">special relative or authority state</a><span>, in §4.4</span>
   <li><a href="#special-scheme">special scheme</a><span>, in §4.2</span>
   <li><a href="#start-with-a-windows-drive-letter">starts with a Windows drive letter</a><span>, in §4.2</span>
   <li><a href="#start-with-a-windows-drive-letter">start with a Windows drive letter</a><span>, in §4.2</span>
   <li>
    stringification behavior
    <ul>
     <li><a href="#URL-stringification-behavior">dfn for URL</a><span>, in §6.1</span>
     <li><a href="#urlsearchparams-stringification-behavior">dfn for URLSearchParams</a><span>, in §6.2</span>
    </ul>
   <li><a href="#string-percent-decode">string percent decode</a><span>, in §1.3</span>
   <li><a href="#dom-url-tojson">toJSON()</a><span>, in §6.1</span>
   <li><a href="#concept-urlsearchparams-update">update steps</a><span>, in §6.2</span>
   <li>
    URL
    <ul>
     <li><a href="#concept-url">definition of</a><span>, in §4.1</span>
     <li><a href="#url">(interface)</a><span>, in §6.1</span>
    </ul>
   <li><a href="#concept-url-url">url</a><span>, in §6.1</span>
   <li><a href="#url-code-points">URL code point</a><span>, in §4.3</span>
   <li><a href="#concept-urlencoded-byte-serializer">urlencoded byte serializer</a><span>, in §5.2</span>
   <li><a href="#concept-urlencoded-parser">urlencoded parser</a><span>, in §5.1</span>
   <li><a href="#concept-urlencoded-serializer">urlencoded serializer</a><span>, in §5.2</span>
   <li><a href="#concept-urlencoded-string-parser">urlencoded string parser</a><span>, in §5.3</span>
   <li><a href="#url-fragment-string">URL-fragment string</a><span>, in §4.3</span>
   <li><a href="#concept-urlsearchparams-url-object">url object</a><span>, in §6.2</span>
   <li><a href="#concept-url-parser">URL parser</a><span>, in §4.4</span>
   <li><a href="#url-path-segment-string">URL-path-segment string</a><span>, in §4.3</span>
   <li><a href="#url-port-string">URL-port string</a><span>, in §4.3</span>
   <li><a href="#url-query-string">URL-query string</a><span>, in §4.3</span>
   <li><a href="#concept-url">URL record</a><span>, in §4.1</span>
   <li><a href="#url-scheme-string">URL-scheme string</a><span>, in §4.3</span>
   <li><a href="#urlsearchparams">URLSearchParams</a><span>, in §6.2</span>
   <li><a href="#dom-urlsearchparams-urlsearchparams">URLSearchParams(init)</a><span>, in §6.2</span>
   <li><a href="#concept-url-serializer">URL serializer</a><span>, in §4.5</span>
   <li><a href="#url-units">URL units</a><span>, in §4.3</span>
   <li><a href="#dom-url-url">URL(url, base)</a><span>, in §6.1</span>
   <li><a href="#userinfo-percent-encode-set">userinfo percent-encode set</a><span>, in §1.3</span>
   <li>
    username
    <ul>
     <li><a href="#concept-url-username">dfn for url</a><span>, in §4.1</span>
     <li><a href="#dom-url-username">attribute for URL</a><span>, in §6.1</span>
    </ul>
   <li><a href="#utf-8-percent-encode">UTF-8 percent encode</a><span>, in §1.3</span>
   <li><a href="#validation-error">validation error</a><span>, in §1.1</span>
   <li><a href="#valid-domain">valid domain</a><span>, in §3.4</span>
   <li><a href="#valid-domain-string">valid domain string</a><span>, in §3.4</span>
   <li><a href="#valid-host-string">valid host string</a><span>, in §3.4</span>
   <li><a href="#valid-ipv4-address-string">valid IPv4-address string</a><span>, in §3.4</span>
   <li><a href="#valid-ipv6-address-string">valid IPv6-address string</a><span>, in §3.4</span>
   <li><a href="#valid-opaque-host-string">valid opaque-host string</a><span>, in §3.4</span>
   <li><a href="#valid-url-string">valid URL string</a><span>, in §4.3</span>
   <li><a href="#webkiturl">webkitURL</a><span>, in §6.1</span>
   <li><a href="#windows-drive-letter">Windows drive letter</a><span>, in §4.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#context-object">context object</a>
    </ul>
   <li>
    <a data-link-type="biblio">[ENCODING]</a> defines the following terms:
    <ul>
     <li><a href="https://encoding.spec.whatwg.org/#encode">encode</a>
     <li><a href="https://encoding.spec.whatwg.org/#encoding">encoding</a>
     <li><a href="https://encoding.spec.whatwg.org/#get-an-output-encoding">get an output encoding</a>
     <li><a href="https://encoding.spec.whatwg.org/#name">name</a>
     <li><a href="https://encoding.spec.whatwg.org/#utf-8">utf-8</a>
     <li><a href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom">utf-8 decode without bom</a>
     <li><a href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom-or-fail">utf-8 decode without bom or fail</a>
     <li><a href="https://encoding.spec.whatwg.org/#utf-8-encode">utf-8 encode</a>
    </ul>
   <li>
    <a data-link-type="biblio">[FILEAPI]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/FileAPI/#dfn-Blob">Blob</a>
     <li><a href="https://w3c.github.io/FileAPI/#BlobURLStore">blob url store</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#eventsource">EventSource</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hashchangeevent">HashChangeEvent</a>
     <li><a href="https://html.spec.whatwg.org/multipage/history.html#location">Location</a>
     <li><a href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin-opaque">opaque origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin">origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/history.html#dom-location-protocol">protocol</a>
     <li><a href="https://html.spec.whatwg.org/multipage/origin.html#same-origin">same origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/origin.html#ascii-serialisation-of-an-origin">serialization of an origin</a>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><a href="https://infra.spec.whatwg.org/#list-append">append</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-alpha">ascii alpha</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-alphanumeric">ascii alphanumeric</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-byte">ascii byte</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-case-insensitive">ascii case-insensitive</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-digit">ascii digit</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-hex-digit">ascii hex digit</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-lowercase">ascii lowercase</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-string">ascii string</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-tab-or-newline">ascii tab or newline</a>
     <li><a href="https://infra.spec.whatwg.org/#ascii-upper-hex-digit">ascii upper hex digit</a>
     <li><a href="https://infra.spec.whatwg.org/#iteration-break">break</a>
     <li><a href="https://infra.spec.whatwg.org/#byte-sequence">byte sequence</a>
     <li><a href="https://infra.spec.whatwg.org/#c0-control">c0 control</a>
     <li><a href="https://infra.spec.whatwg.org/#c0-control-or-space">c0 control or space</a>
     <li><a href="https://infra.spec.whatwg.org/#code-point">code point</a>
     <li><a href="https://infra.spec.whatwg.org/#iteration-continue">continue</a>
     <li><a href="https://infra.spec.whatwg.org/#list-iterate">for each <small>(for list)</small></a>
     <li><a href="https://infra.spec.whatwg.org/#map-iterate">for each <small>(for map)</small></a>
     <li><a href="https://infra.spec.whatwg.org/#list-is-empty">is empty</a>
     <li><a href="https://infra.spec.whatwg.org/#list-item">item</a>
     <li><a href="https://infra.spec.whatwg.org/#string-length">length</a>
     <li><a href="https://infra.spec.whatwg.org/#list">list</a>
     <li><a href="https://infra.spec.whatwg.org/#noncharacter">noncharacter</a>
     <li><a href="https://infra.spec.whatwg.org/#list-remove">remove</a>
     <li><a href="https://infra.spec.whatwg.org/#list-size">size</a>
     <li><a href="https://infra.spec.whatwg.org/#string">string</a>
     <li><a href="https://infra.spec.whatwg.org/#surrogate">surrogate</a>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIA-SOURCE]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/media-source/#idl-def-mediasource">MediaSource</a>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIACAPTURE-STREAMS]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/mediacapture-main/#idl-def-mediastream">MediaStream</a>
    </ul>
   <li>
    <a data-link-type="biblio">[UTS46]</a> defines the following terms:
    <ul>
     <li><a href="https://www.unicode.org/reports/tr46/#ToASCII">ToASCII</a>
     <li><a href="https://www.unicode.org/reports/tr46/#ToUnicode">ToUnicode</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>
     <li><a href="https://heycam.github.io/webidl/#LegacyWindowAlias">LegacyWindowAlias</a>
     <li><a href="https://heycam.github.io/webidl/#SameObject">SameObject</a>
     <li><a href="https://heycam.github.io/webidl/#exceptiondef-typeerror">TypeError</a>
     <li><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a>
     <li><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a>
     <li><a href="https://heycam.github.io/webidl/#idl-record">record</a>
     <li><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-value-pairs-to-iterate-over">value pairs to iterate over</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-bidi">[BIDI]
   <dd>Mark Davis; Aharon Lanin; Andrew Glass. <a href="https://www.unicode.org/reports/tr9/tr9-37.html">Unicode Bidirectional Algorithm</a>. 14 May 2017. Unicode Standard Annex #9. URL: <a href="https://www.unicode.org/reports/tr9/tr9-37.html">https://www.unicode.org/reports/tr9/tr9-37.html</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-encoding">[ENCODING]
   <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/">Encoding Standard</a>. Living Standard. URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
   <dt id="biblio-fileapi">[FILEAPI]
   <dd>Arun Ranganathan; Jonas Sicking. <a href="https://w3c.github.io/FileAPI/">File API</a>. URL: <a href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-iana-uri-schemes">[IANA-URI-SCHEMES]
   <dd><a href="https://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml">Uniform Resource Identifier (URI) Schemes</a>. URL: <a href="https://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml">https://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra Standard</a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-media-source">[MEDIA-SOURCE]
   <dd>Matthew Wolenetz; et al. <a href="https://w3c.github.io/media-source/">Media Source Extensions™</a>. URL: <a href="https://w3c.github.io/media-source/">https://w3c.github.io/media-source/</a>
   <dt id="biblio-mediacapture-streams">[MEDIACAPTURE-STREAMS]
   <dd>Daniel Burnett; et al. <a href="https://w3c.github.io/mediacapture-main/">Media Capture and Streams</a>. URL: <a href="https://w3c.github.io/mediacapture-main/">https://w3c.github.io/mediacapture-main/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-rfc4291">[RFC4291]
   <dd>R. Hinden; S. Deering. <a href="https://tools.ietf.org/html/rfc4291">IP Version 6 Addressing Architecture</a>. February 2006. Draft Standard. URL: <a href="https://tools.ietf.org/html/rfc4291">https://tools.ietf.org/html/rfc4291</a>
   <dt id="biblio-uts46">[UTS46]
   <dd>Mark Davis; Michel Suignard. <a href="https://www.unicode.org/reports/tr46/tr46-19.html">Unicode IDNA Compatibility Processing</a>. 8 June 2017. Unicode Technical Standard #46. URL: <a href="https://www.unicode.org/reports/tr46/tr46-19.html">https://www.unicode.org/reports/tr46/tr46-19.html</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Cameron McCormack; Boris Zbarsky; Tobie Langel. <a href="https://heycam.github.io/webidl/">Web IDL</a>. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-rfc1034">[RFC1034]
   <dd>P.V. Mockapetris. <a href="https://tools.ietf.org/html/rfc1034">Domain names - concepts and facilities</a>. November 1987. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc1034">https://tools.ietf.org/html/rfc1034</a>
   <dt id="biblio-rfc3986">[RFC3986]
   <dd>T. Berners-Lee; R. Fielding; L. Masinter. <a href="https://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>. January 2005. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc3986">https://tools.ietf.org/html/rfc3986</a>
   <dt id="biblio-rfc3987">[RFC3987]
   <dd>M. Duerst; M. Suignard. <a href="https://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRIs)</a>. January 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3987">https://tools.ietf.org/html/rfc3987</a>
   <dt id="biblio-rfc5952">[RFC5952]
   <dd>S. Kawamura; M. Kawashima. <a href="https://tools.ietf.org/html/rfc5952">A Recommendation for IPv6 Address Text Representation</a>. August 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5952">https://tools.ietf.org/html/rfc5952</a>
   <dt id="biblio-rfc6454">[RFC6454]
   <dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6454">The Web Origin Concept</a>. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6454">https://tools.ietf.org/html/rfc6454</a>
   <dt id="biblio-rfc7595">[RFC7595]
   <dd>D. Thaler, Ed.; T. Hansen; T. Hardie. <a href="https://tools.ietf.org/html/rfc7595">Guidelines and Registration Procedures for URI Schemes</a>. June 2015. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc7595">https://tools.ietf.org/html/rfc7595</a>
   <dt id="biblio-rfc791">[RFC791]
   <dd>J. Postel. <a href="https://tools.ietf.org/html/rfc791">Internet Protocol</a>. September 1981. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc791">https://tools.ietf.org/html/rfc791</a>
   <dt id="biblio-utr36">[UTR36]
   <dd>Mark Davis; Michel Suignard. <a href="https://www.unicode.org/reports/tr36/">Unicode Security Considerations</a>. 19 September 2014. Unicode Technical Report #36. URL: <a href="https://www.unicode.org/reports/tr36/">https://www.unicode.org/reports/tr36/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-url-url" id="ref-for-dom-url-url①">Constructor</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString③⓪"><span class="kt">USVString</span></a> <a class="nv" href="#dom-url-url-url-base-url"><code>url</code></a>, <span class="kt">optional</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①①⓪"><span class="kt">USVString</span></a> <a class="nv" href="#dom-url-url-url-base-base"><code>base</code></a>),
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>),
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#LegacyWindowAlias" id="ref-for-LegacyWindowAlias①">LegacyWindowAlias</a>=<a class="nv" href="#webkiturl"><code>webkitURL</code></a>]
<span class="kt">interface</span> <a class="nv" href="#url"><code>URL</code></a> {
  <a class="kt" href="#URL-stringification-behavior">stringifier</a> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②①⓪"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-href" id="ref-for-dom-url-href③">href</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString③①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-url-origin" id="ref-for-dom-url-origin①">origin</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString④①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-protocol" id="ref-for-dom-url-protocol②">protocol</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑤①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-username" id="ref-for-dom-url-username②">username</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑥①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-password" id="ref-for-dom-url-password②">password</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑦①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-host" id="ref-for-dom-url-host③">host</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑧①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-hostname" id="ref-for-dom-url-hostname②">hostname</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑨①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-port" id="ref-for-dom-url-port②">port</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⓪①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-pathname" id="ref-for-dom-url-pathname②">pathname</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①①①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-search" id="ref-for-dom-url-search②">search</a>;
  [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject" id="ref-for-SameObject①">SameObject</a>] <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#urlsearchparams" id="ref-for-urlsearchparams①④">URLSearchParams</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="URLSearchParams" href="#dom-url-searchparams" id="ref-for-dom-url-searchparams①">searchParams</a>;
           <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①②①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-url-hash" id="ref-for-dom-url-hash②">hash</a>;

  <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①③①"><span class="kt">USVString</span></a> <a class="nv idl-code" data-link-type="method" href="#dom-url-tojson" id="ref-for-dom-url-tojson①">toJSON</a>();
};

[<a class="nv idl-code" data-link-type="constructor" href="#dom-urlsearchparams-urlsearchparams" id="ref-for-dom-urlsearchparams-urlsearchparams①">Constructor</a>(<span class="kt">optional</span> (<span class="kt">sequence</span>&lt;<span class="kt">sequence</span>&lt;<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①④①"><span class="kt">USVString</span></a>>> <span class="kt">or</span> <span class="kt">record</span>&lt;<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑤①"><span class="kt">USVString</span></a>, <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑥①"><span class="kt">USVString</span></a>> <span class="kt">or</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑦①"><span class="kt">USVString</span></a>) <a class="nv" href="#dom-urlsearchparams-urlsearchparams-init-init"><code>init</code></a> = ""),
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①①">Exposed</a>=(<span class="n">Window</span>,<span class="n">Worker</span>)]
<span class="kt">interface</span> <a class="nv" href="#urlsearchparams"><code>URLSearchParams</code></a> {
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-append" id="ref-for-dom-urlsearchparams-append①">append</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑧①"><span class="kt">USVString</span></a> <a class="nv" href="#dom-urlsearchparams-append-name-value-name"><code>name</code></a>, <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①⑨①"><span class="kt">USVString</span></a> <a class="nv" href="#dom-urlsearchparams-append-name-value-value"><code>value</code></a>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-delete" id="ref-for-dom-urlsearchparams-delete①">delete</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⓪①"><span class="kt">USVString</span></a> <a class="nv" href="#dom-urlsearchparams-delete-name-name"><code>name</code></a>);
  <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②①①"><span class="kt">USVString</span></a>? <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-get" id="ref-for-dom-urlsearchparams-get①">get</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②②①"><span class="kt">USVString</span></a> <a class="nv" href="#dom-urlsearchparams-get-name-name"><code>name</code></a>);
  <span class="kt">sequence</span>&lt;<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②③①"><span class="kt">USVString</span></a>> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-getall" id="ref-for-dom-urlsearchparams-getall①">getAll</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②④①"><span class="kt">USVString</span></a> <a class="nv" href="#dom-urlsearchparams-getall-name-name"><code>name</code></a>);
  <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean①"><span class="kt">boolean</span></a> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-has" id="ref-for-dom-urlsearchparams-has①">has</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑤①"><span class="kt">USVString</span></a> <a class="nv" href="#dom-urlsearchparams-has-name-name"><code>name</code></a>);
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-set" id="ref-for-dom-urlsearchparams-set①">set</a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑥①"><span class="kt">USVString</span></a> <a class="nv" href="#dom-urlsearchparams-set-name-value-name"><code>name</code></a>, <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑦①"><span class="kt">USVString</span></a> <a class="nv" href="#dom-urlsearchparams-set-name-value-value"><code>value</code></a>);

  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-urlsearchparams-sort" id="ref-for-dom-urlsearchparams-sort②">sort</a>();

  <span class="kt">iterable</span>&lt;<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑧①"><span class="kt">USVString</span></a>, <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②⑨①"><span class="kt">USVString</span></a>>;
  <a class="kt" data-link-type="dfn" href="#urlsearchparams-stringification-behavior" id="ref-for-urlsearchparams-stringification-behavior①">stringifier</a>;
};

</pre>