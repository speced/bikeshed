<!doctype html><html lang="en">
 <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="#3c790a" name="theme-color">
  <meta content="light dark" name="color-scheme">
  <title>Fullscreen API Standard</title>
  <link crossorigin href="https://resources.whatwg.org/standard-shared-with-dev.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/standard.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/spec.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/logo-fullscreen.svg" rel="icon">
  <script crossorigin defer src="https://resources.whatwg.org/commit-snapshot-shortcut-key.js"></script>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry status-LS">
  <div class="head">
    <a class="logo" href="https://whatwg.org/"> <img alt="WHATWG" class="darkmode-aware" crossorigin height="100" src="https://resources.whatwg.org/logo-fullscreen.svg"> </a> 
   <hgroup>
    <h1 class="p-name no-ref" id="title">Fullscreen API</h1>
    <p id="subtitle">Living Standard — Last Updated <time class="dt-updated" datetime="1970-01-01">1 January 1970</time> </p>
   </hgroup>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Participate:
     <dd><a href="https://github.com/whatwg/fullscreen">GitHub whatwg/fullscreen</a> (<a href="https://github.com/whatwg/fullscreen/issues/new/choose">new issue</a>, <a href="https://github.com/whatwg/fullscreen/issues">open issues</a>)
     <dd><a href="https://whatwg.org/chat">Chat on Matrix</a>
     <dt>Commits:
     <dd><a href="https://github.com/whatwg/fullscreen/commits">GitHub whatwg/fullscreen/commits</a>
     <dd><a href="/commit-snapshots/[COMMIT-SHA]/" id="commit-snapshot-link">Snapshot as of this commit</a>
     <dd><a href="https://twitter.com/fullscreenapi">@fullscreenapi</a>
     <dt>Tests:
     <dd><a href="https://github.com/web-platform-tests/wpt/tree/master/fullscreen">web-platform-tests fullscreen/</a> (<a href="https://github.com/web-platform-tests/wpt/labels/fullscreen">ongoing work</a>)
     <dt>Translations <small>(non-normative)</small>:
     <dd><span title="Japanese"><a href="https://triple-underscore.github.io/fullscreen-ja.html" hreflang="ja" lang="ja" rel="alternate">日本語</a></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The Fullscreen API standard defines an API for elements to display themselves fullscreen.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#terminology"><span class="secno">1</span> <span class="content">Terminology</span></a>
    <li><a href="#model"><span class="secno">2</span> <span class="content">Model</span></a>
    <li><a href="#api"><span class="secno">3</span> <span class="content">API</span></a>
    <li><a href="#ui"><span class="secno">4</span> <span class="content">UI</span></a>
    <li>
     <a href="#rendering"><span class="secno">5</span> <span class="content">Rendering</span></a>
     <ol class="toc">
      <li><a href="#new-stacking-layer"><span class="secno">5.1</span> <span class="content">New stacking layer</span></a>
      <li><a href="#::backdrop-pseudo-element"><span class="secno">5.2</span> <span class="content"><code>::backdrop</code> pseudo-element</span></a>
      <li><a href="#:fullscreen-pseudo-class"><span class="secno">5.3</span> <span class="content"><code>:fullscreen</code> pseudo-class</span></a>
      <li><a href="#user-agent-level-style-sheet-defaults"><span class="secno">5.4</span> <span class="content">User-agent level style sheet defaults</span></a>
     </ol>
    <li><a href="#permissions-policy-integration"><span class="secno">6</span> <span class="content">Permissions Policy
Integration</span></a>
    <li><a href="#security-and-privacy-considerations"><span class="secno">7</span> <span class="content">Security and Privacy Considerations</span></a>
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">Acknowledgments</span></a>
    <li><a href="#ipr"><span class="secno"></span> <span class="content">Intellectual property rights</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="terminology"><span class="secno">1. </span><span class="content">Terminology</span><a class="self-link" href="#terminology"></a></h2>
   <p>This specification depends on the Infra Standard. <a data-link-type="biblio" href="#biblio-infra" title="Infra Standard">[INFRA]</a> </p>
   <p>Most terminology used in this specification is from CSS, DOM, HTML, and Web IDL. <a data-link-type="biblio" href="#biblio-css" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS]</a> <a data-link-type="biblio" href="#biblio-dom" title="DOM Standard">[DOM]</a> <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> <a data-link-type="biblio" href="#biblio-webidl" title="Web IDL Standard">[WEBIDL]</a> </p>
   <p>A <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context">browsing context</a> <var>A</var> is called a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="descendant-browsing-context">descendant browsing context</dfn> of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context①">browsing context</a> <var>B</var> if and only if <var>B</var> is an <a data-link-type="dfn">ancestor browsing context</a> of <var>A</var>. </p>
   <h2 class="heading settled" data-level="2" id="model"><span class="secno">2. </span><span class="content">Model</span><a class="self-link" href="#model"></a></h2>
   <p>All <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element">elements</a> have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-flag">fullscreen flag</dfn>. Unless stated otherwise it is
unset. </p>
   <p>All <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code> <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element①">elements</a> have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iframe-fullscreen-flag">iframe fullscreen flag</dfn>. Unless
stated otherwise it is unset. </p>
   <p>All <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">documents</a> have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="fullscreen-element">fullscreen element</dfn>. The <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element">fullscreen element</a> is the topmost <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element②">element</a> in the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①">document</a>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer">top layer</a> whose <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag">fullscreen flag</a> is set, if any, and null otherwise. </p>
   <p>All <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document②">documents</a> have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="list-of-pending-fullscreen-events">list of pending fullscreen events</dfn>, which
is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">ordered set</a> of (<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a>, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element③">element</a>) <a data-link-type="dfn">pairs</a>. It is initially empty. </p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-an-element">fullscreen an <var>element</var></dfn>, set <var>element</var>’s <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag①">fullscreen flag</a> and <a data-link-type="dfn" href="#top-layer-add" id="ref-for-top-layer-add">add</a> it to its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①">top layer</a>. </p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unfullscreen-an-element">unfullscreen an <var>element</var></dfn>, unset <var>element</var>’s <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag②">fullscreen flag</a> and <a data-link-type="dfn" href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag">iframe fullscreen flag</a> (if any), and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">remove</a> it from
its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node document</a>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer②">top layer</a>. </p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unfullscreen-a-document">unfullscreen a <var>document</var></dfn>, <a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element">unfullscreen</a> all <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element④">elements</a>, within <var>document</var>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer③">top layer</a>, whose <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag③">fullscreen flag</a> is set. </p>
   <hr>
   <div class="algorithm" data-algorithm="fully exit fullscreen">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fully-exit-fullscreen">fully exit fullscreen</dfn> a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document③">document</a> <var>document</var>, run these steps: </p>
    <ol>
     <li>
      <p>If <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①">fullscreen element</a> is null, terminate these steps. </p>
     <li>
      <p><a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element①">Unfullscreen elements</a> whose <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag④">fullscreen flag</a> is
 set, within <var>document</var>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer④">top layer</a>, except for <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②">fullscreen element</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen">Exit fullscreen</a> <var>document</var>. </p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="fullscreen removing steps">
    <p id="removing-steps">Whenever the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-remove-ext" id="ref-for-concept-node-remove-ext">removing steps</a> run with a <var>removedNode</var>, run
these steps: </p>
    <ol>
     <li>
      <p>Let <var>document</var> be <var>removedNode</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document②">node document</a>. </p>
     <li>
      <p>Let <var>nodes</var> be <var>removedNode</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant" id="ref-for-concept-shadow-including-inclusive-descendant">shadow-including inclusive descendants</a> that have their <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑤">fullscreen flag</a> set, in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-tree-order" id="ref-for-concept-shadow-including-tree-order">shadow-including tree order</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>node</var> in <var>nodes</var>: </p>
      <ol>
       <li>
        <p>If <var>node</var> is <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element③">fullscreen element</a>, <a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen①">exit fullscreen</a> <var>document</var>. </p>
       <li>
        <p>Otherwise, <a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element②">unfullscreen <var>node</var></a>. </p>
       <li>
        <p>If <var>document</var>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑤">top layer</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> <var>node</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove①">remove</a> <var>node</var> from <var>document</var>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑥">top layer</a>. </p>
        <p class="note" role="note">Other specifications can add and remove elements from <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑦">top layer</a>, so <var>node</var> might not be <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element④">fullscreen element</a>. For example, <var>node</var> could be an open <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element">dialog</a></code> element. </p>
      </ol>
    </ol>
   </div>
   <p>Whenever the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps" id="ref-for-unloading-document-cleanup-steps">unloading document cleanup steps</a> run with a <var>document</var>, <a data-link-type="dfn" href="#fully-exit-fullscreen" id="ref-for-fully-exit-fullscreen">fully exit fullscreen</a> <var>document</var>. </p>
   <hr>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-is-supported">Fullscreen is supported</dfn> if there is no previously-established user preference,
security risk, or platform limitation. </p>
   <hr>
   <div class="algorithm" data-algorithm="run the fullscreen steps">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="run-the-fullscreen-steps">run the fullscreen steps</dfn> for a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document④">document</a> <var>document</var>, run these
steps: </p>
    <ol>
     <li>
      <p>Let <var>pairs</var> be <var>document</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events">list of pending fullscreen events</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">Empty</a> <var>document</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events①">list of pending fullscreen events</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> (<var>type</var>, <var>element</var>) in <var>pairs</var>: </p>
      <ol>
       <li>
        <p>Let <var>target</var> be <var>element</var> if <var>element</var> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected">connected</a> and its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document③">node document</a> is <var>document</var>, and otherwise let <var>target</var> be <var>document</var>. </p>
       <li>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">Fire an event</a> named <var>type</var>, with its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles" id="ref-for-dom-event-bubbles">bubbles</a></code> and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-composed" id="ref-for-dom-event-composed">composed</a></code> attributes set to true, at <var>target</var>. </p>
      </ol>
    </ol>
    <p class="note" role="note">These steps integrate with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" id="ref-for-event-loop">event loop</a> defined in HTML. <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> </p>
   </div>
   <h2 class="heading settled" data-level="3" id="api"><span class="secno">3. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-fullscreennavigationui"><code><c- g>FullscreenNavigationUI</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI" data-dfn-type="enum-value" data-export id="dom-fullscreennavigationui-auto"><code><c- s>"auto"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI" data-dfn-type="enum-value" data-export id="dom-fullscreennavigationui-show"><code><c- s>"show"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI" data-dfn-type="enum-value" data-export id="dom-fullscreennavigationui-hide"><code><c- s>"hide"</c-></code></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fullscreenoptions"><code><c- g>FullscreenOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="#enumdef-fullscreennavigationui" id="ref-for-enumdef-fullscreennavigationui"><c- n>FullscreenNavigationUI</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;auto&quot;" data-dfn-for="FullscreenOptions" data-dfn-type="dict-member" data-export data-type="FullscreenNavigationUI" id="dom-fullscreenoptions-navigationui"><code><c- g>navigationUI</c-></code></dfn> = "auto";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element"><c- g>Element</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen"><c- g>requestFullscreen</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-fullscreenoptions" id="ref-for-dictdef-fullscreenoptions"><c- n>FullscreenOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element/requestFullscreen(options), Element/requestFullscreen()" data-dfn-type="argument" data-export id="dom-element-requestfullscreen-options-options"><code><c- g>options</c-></code></dfn> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-element-onfullscreenchange"><code><c- g>onfullscreenchange</c-></code></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-element-onfullscreenerror"><code><c- g>onfullscreenerror</c-></code></dfn>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document"><c- g>Document</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreenenabled" id="ref-for-dom-document-fullscreenenabled"><c- g>fullscreenEnabled</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter①"><c- g>LegacyLenientSetter</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Unscopable" id="ref-for-Unscopable"><c- g>Unscopable</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreen" id="ref-for-dom-document-fullscreen"><c- g>fullscreen</c-></a>; // historical

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen"><c- g>exitFullscreen</c-></a>();

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange" id="ref-for-handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror" id="ref-for-handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot" id="ref-for-documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter②"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element?" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement"><c- g>fullscreenElement</c-></a>;
};
</pre>
   <dl class="domintro">
    <dt><code><var>promise</var> = <var>element</var> . <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen①">requestFullscreen([<var>options</var>])</a></code> 
    <dd>
      Displays <var>element</var> fullscreen and resolves <var>promise</var> when done. 
     <p>When supplied, <var>options</var>’s <code>navigationUI</code> member indicates whether showing
  navigation UI while in fullscreen is preferred or not. If set to "<code>show</code>", navigation
  simplicity is preferred over screen space, and if set to "<code>hide</code>", more screen space
  is preferred. User agents are always free to honor user preference over the application’s. The
  default value "<code>auto</code>" indicates no application preference.</p>
    <dt><code><var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenenabled" id="ref-for-dom-document-fullscreenenabled①">fullscreenEnabled</a></code></code> 
    <dd>
     <p>Returns true if <var>document</var> has the ability to display <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑤">elements</a> fullscreen
 and <a data-link-type="dfn" href="#fullscreen-is-supported" id="ref-for-fullscreen-is-supported">fullscreen is supported</a>, or false otherwise. </p>
    <dt><code><var>promise</var> = <var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen①">exitFullscreen()</a></code></code> 
    <dd>
     <p>Stops <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑤">fullscreen element</a> from being displayed fullscreen and
 resolves <var>promise</var> when done. </p>
    <dt><code><var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement①">fullscreenElement</a></code></code> 
    <dd>
     <p>Returns <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑥">fullscreen element</a>. </p>
    <dt><code><var>shadowroot</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement②">fullscreenElement</a></code></code> 
    <dd>
     <p>Returns <var>shadowroot</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑦">fullscreen element</a>. </p>
   </dl>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-element-ready-check">fullscreen element ready check</dfn> for an <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑥">element</a> <var>element</var> returns true
if all of the following are true, and false otherwise: </p>
   <ul>
    <li>
     <p><var>element</var> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected①">connected</a>. </p>
    <li>
     <p><var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document④">node document</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use">allowed to use</a> the "<code><a data-link-type="dfn" href="#fullscreen-feature" id="ref-for-fullscreen-feature">fullscreen</a></code>" feature. </p>
   </ul>
   <div class="algorithm" data-algorithm="requestFullscreen(options)" data-algorithm-for="Element">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export data-lt="requestFullscreen(options)|requestFullscreen()" id="dom-element-requestfullscreen"><code>requestFullscreen(<var>options</var>)</code></dfn> method,
when invoked, must run these steps: </p>
    <ol>
     <li>
      <p>Let <var>pending</var> be the <a data-link-type="dfn">context object</a>. </p>
     <li>
      <p>Let <var>pendingDoc</var> be <var>pending</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑤">node document</a>. </p>
     <li>
      <p>Let <var>promise</var> be a new promise. </p>
     <li>
      <p>If <var>pendingDoc</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active">fully active</a>, then reject <var>promise</var> with a <code>TypeError</code> exception and return <var>promise</var>. </p>
     <li>
      <p>Let <var>error</var> be false. </p>
     <li>
      <p>If any of the following conditions are false, then set <var>error</var> to true: </p>
      <ul>
       <li>
        <p><var>pending</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-namespace" id="ref-for-concept-element-namespace">namespace</a> is the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace">HTML namespace</a> or <var>pending</var> is an <a href="https://www.w3.org/TR/SVG11/struct.html#SVGElement">SVG <code>svg</code></a> or <a href="https://www.w3.org/Math/draft-spec/chapter2.html#interf.toplevel">MathML <code>math</code></a> element. <a data-link-type="biblio" href="#biblio-svg" title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG]</a> <a data-link-type="biblio" href="#biblio-mathml" title="Mathematical Markup Language (MathML™) 1.01 Specification">[MATHML]</a> </p>
       <li>
        <p><var>pending</var> is not a <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element①">dialog</a></code> element. </p>
       <li>
        <p>The <a data-link-type="dfn" href="#fullscreen-element-ready-check" id="ref-for-fullscreen-element-ready-check">fullscreen element ready check</a> for <var>pending</var> returns true. </p>
       <li>
        <p><a data-link-type="dfn" href="#fullscreen-is-supported" id="ref-for-fullscreen-is-supported①">Fullscreen is supported</a>. </p>
       <li>
        <p><var>pending</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a> has <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation">transient activation</a> or the
   algorithm is <a data-link-type="dfn" href="https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change" id="ref-for-dfn-triggered-by-a-user-generated-orientation-change">triggered by a user generated orientation change</a>. </p>
      </ul>
     <li>
      <p>Return <var>promise</var>, and run the remaining steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>. </p>
     <li>
      <p>If <var>error</var> is false, then resize <var>pendingDoc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context">top-level browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document">active document</a>’s viewport’s dimensions, optionally
  taking into account <var>options</var>’s <code>navigationUI</code> member: </p>
      <table>
       <thead>
        <tr>
         <th>value
         <th>viewport dimensions
       <tbody>
        <tr>
         <td>"<code>hide</code>"
         <td>full dimensions of the screen of the output device
        <tr>
         <td>"<code>show</code>"
         <td>dimensions of the screen of the output device clamped to allow the user agent to show page navigation controls
        <tr>
         <td>"<code>auto</code>"
         <td>user-agent defined, but matching one of the above
      </table>
      <p>Optionally display a message how the end user can revert this. </p>
     <li>
      <p>If any of the following conditions are false, then set <var>error</var> to true: </p>
      <ul>
       <li>
        <p><var>pending</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑥">node document</a> is <var>pendingDoc</var>. </p>
       <li>
        <p>The <a data-link-type="dfn" href="#fullscreen-element-ready-check" id="ref-for-fullscreen-element-ready-check①">fullscreen element ready check</a> for <var>pending</var> returns true. </p>
      </ul>
     <li>
      <p>If <var>error</var> is true: </p>
      <ol>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> (<code>fullscreenerror</code>, <var>pending</var>) to <var>pendingDoc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events②">list of pending fullscreen events</a>. </p>
       <li>
        <p>Reject <var>promise</var> with a <code>TypeError</code> exception and terminate these
   steps. </p>
      </ol>
     <li>
      <p>Let <var>fullscreenElements</var> be an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">ordered set</a> initially consisting of <var>pending</var>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while" id="ref-for-iteration-while">While</a> the last element in <var>fullscreenElements</var> is in a <a data-link-type="dfn">nested browsing context</a>: <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append①">append</a> its <a data-link-type="dfn">browsing context container</a> to <var>fullscreenElements</var>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>element</var> in <var>fullscreenElements</var>: </p>
      <ol>
       <li>
        <p>Let <var>doc</var> be <var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑦">node document</a>. </p>
       <li>
        <p>If <var>element</var> is <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑧">fullscreen element</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>. </p>
        <p class="note" role="note">No need to notify observers when nothing has changed. </p>
       <li>
        <p>If <var>element</var> is <var>pending</var> and <var>pending</var> is an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code> <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑦">element</a>, then set <var>element</var>’s <a data-link-type="dfn" href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag①">iframe fullscreen flag</a>. </p>
       <li>
        <p><a data-link-type="dfn" href="#fullscreen-an-element" id="ref-for-fullscreen-an-element">Fullscreen <var>element</var></a> within <var>doc</var>. </p>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append②">Append</a> (<code>fullscreenchange</code>, <var>element</var>) to <var>doc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events③">list of pending fullscreen events</a>. </p>
      </ol>
      <p class="note" role="note">The order in which elements are <a data-link-type="dfn" href="#fullscreen-an-element" id="ref-for-fullscreen-an-element①">fullscreened</a> is not observable, because <a data-link-type="dfn" href="#run-the-fullscreen-steps" id="ref-for-run-the-fullscreen-steps">run the fullscreen steps</a> is invoked in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order" id="ref-for-concept-tree-order">tree order</a>. </p>
     <li>
      <p>Resolve <var>promise</var> with undefined. </p>
    </ol>
    <p class="note" role="note">Implementations with out-of-process <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context②">browsing contexts</a> are left as an
exercise to the reader. Input welcome on potential improvements. </p>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="dom-document-fullscreenenabled"><code>fullscreenEnabled</code></dfn> attribute’s getter must
return true if the <a data-link-type="dfn">context object</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use①">allowed to use</a> the "<code><a data-link-type="dfn" href="#fullscreen-feature" id="ref-for-fullscreen-feature①">fullscreen</a></code>" feature and <a data-link-type="dfn" href="#fullscreen-is-supported" id="ref-for-fullscreen-is-supported②">fullscreen is supported</a>, and
false otherwise. </p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="dom-document-fullscreen"><code>fullscreen</code></dfn> attribute’s getter must return
false if <a data-link-type="dfn">context object</a>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑨">fullscreen element</a> is null, and true otherwise. </p>
   <p class="note" role="note">Use the <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement③">fullscreenElement</a></code> attribute instead. </p>
   <div class="algorithm" data-algorithm="fullscreenElement" data-algorithm-for="DocumentOrShadowRoot">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="DocumentOrShadowRoot" data-dfn-type="attribute" data-export id="dom-document-fullscreenelement"><code>fullscreenElement</code></dfn> attribute’s getter must run these steps: </p>
    <ol>
     <li>
      <p>If the <a data-link-type="dfn">context object</a> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-root" id="ref-for-concept-shadow-root">shadow root</a> and its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-documentfragment-host" id="ref-for-concept-documentfragment-host">host</a> is not <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected②">connected</a>, then return null.</p>
     <li>
      <p>Let <var>candidate</var> be the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#retarget" id="ref-for-retarget">retargeting</a> <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⓪">fullscreen element</a> against the <a data-link-type="dfn">context object</a>. </p>
     <li>
      <p>If <var>candidate</var> and the <a data-link-type="dfn">context object</a> are in the same <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree" id="ref-for-concept-tree">tree</a>, then
 return <var>candidate</var>. </p>
     <li>
      <p>Return null. </p>
    </ol>
   </div>
   <p>A <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑤">document</a> is said to be a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="simple-fullscreen-document">simple fullscreen document</dfn> if there is exactly one <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑧">element</a> in its <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑧">top layer</a> that has its <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑥">fullscreen flag</a> set. </p>
   <p class="note" role="note">A <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑥">document</a> with two <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑨">elements</a> in its <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑨">top layer</a> can be a <a data-link-type="dfn" href="#simple-fullscreen-document" id="ref-for-simple-fullscreen-document">simple fullscreen document</a>. For example, in addition to the <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①①">fullscreen element</a> there
could be an open <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element②">dialog</a></code> element. </p>
   <div class="algorithm" data-algorithm="collect documents to unfullscreen">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="collect-documents-to-unfullscreen">collect documents to unfullscreen</dfn> given <var>doc</var>, run these steps: </p>
    <ol>
     <li>
      <p>Let <var>docs</var> be an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">ordered set</a> consisting of <var>doc</var>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while" id="ref-for-iteration-while①">While</a> true: </p>
      <ol>
       <li>
        <p>Let <var>lastDoc</var> be <var>docs</var>’s last <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑦">document</a>. </p>
       <li>
        <p>Assert: <var>lastDoc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①②">fullscreen element</a> is not null. </p>
       <li>
        <p>If <var>lastDoc</var> is not a <a data-link-type="dfn" href="#simple-fullscreen-document" id="ref-for-simple-fullscreen-document①">simple fullscreen document</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break">break</a>. </p>
       <li>
        <p>Let <var>container</var> be <var>lastDoc</var>’s <a data-link-type="dfn">browsing context container</a>, if
   any, and otherwise <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break①">break</a>. </p>
       <li>
        <p>If <var>container</var>’s <a data-link-type="dfn" href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag②">iframe fullscreen flag</a> is set, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break②">break</a>. </p>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append③">Append</a> <var>container</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑧">node document</a> to <var>docs</var>. </p>
      </ol>
     <li>
      <p>Return <var>docs</var>. </p>
      <p class="note" role="note">This is the set of documents for which the <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①③">fullscreen element</a> will be <a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element③">unfullscreened</a>, but the last document in <var>docs</var> might
 have more than one <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element①⓪">element</a> in its <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⓪">top layer</a> with the <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑦">fullscreen flag</a> set,
 in which case that document will still remain in fullscreen. </p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="exit fullscreen">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="exit-fullscreen">exit fullscreen</dfn> a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑧">document</a> <var>doc</var>, run these steps: </p>
    <ol>
     <li>
      <p>Let <var>promise</var> be a new promise. </p>
     <li>
      <p>If <var>doc</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①">fully active</a> or <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①④">fullscreen element</a> is null, then reject <var>promise</var> with a <code>TypeError</code> exception and return <var>promise</var>. </p>
     <li>
      <p>Let <var>resize</var> be false. </p>
     <li>
      <p>Let <var>docs</var> be the result of <a data-link-type="dfn" href="#collect-documents-to-unfullscreen" id="ref-for-collect-documents-to-unfullscreen">collecting documents to unfullscreen</a> given <var>doc</var>. </p>
     <li>
      <p>Let <var>topLevelDoc</var> be <var>doc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①">top-level browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document①">active document</a>. </p>
     <li>
      <p>If <var>topLevelDoc</var> is in <var>docs</var>, and it is a <a data-link-type="dfn" href="#simple-fullscreen-document" id="ref-for-simple-fullscreen-document②">simple fullscreen document</a>, then set <var>doc</var> to <var>topLevelDoc</var> and <var>resize</var> to true. </p>
     <li>
      <p>If <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑤">fullscreen element</a> is not <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected③">connected</a>: </p>
      <ol>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append④">Append</a> (<code>fullscreenchange</code>, <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑥">fullscreen element</a>) to <var>doc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events④">list of pending fullscreen events</a>. </p>
      </ol>
     <li>
      <p>Return <var>promise</var>, and run the remaining steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>. </p>
     <li>
      <p>If <var>resize</var> is true, resize <var>doc</var>’s viewport to its "normal" dimensions. </p>
     <li>
      <p>If <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑦">fullscreen element</a> is null, then resolve <var>promise</var> with
 undefined and terminate these steps. </p>
     <li>
      <p>Let <var>exitDocs</var> be the result of <a data-link-type="dfn" href="#collect-documents-to-unfullscreen" id="ref-for-collect-documents-to-unfullscreen①">collecting documents to unfullscreen</a> given <var>doc</var>. </p>
     <li>
      <p>Let <var>descendantDocs</var> be an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">ordered set</a> consisting of <var>doc</var>’s <a data-link-type="dfn" href="#descendant-browsing-context" id="ref-for-descendant-browsing-context">descendant browsing contexts</a>' <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document②">active documents</a> whose <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑧">fullscreen element</a> is
 non-null, if any, in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order" id="ref-for-concept-tree-order①">tree order</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> <var>exitDoc</var> in <var>exitDocs</var>: </p>
      <ol>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append⑤">Append</a> (<code>fullscreenchange</code>, <var>exitDoc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑨">fullscreen element</a>) to <var>exitDoc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events⑤">list of pending fullscreen events</a>. </p>
       <li>
        <p>If <var>resize</var> is true, <a data-link-type="dfn" href="#unfullscreen-a-document" id="ref-for-unfullscreen-a-document">unfullscreen <var>exitDoc</var></a>. </p>
       <li>
        <p>Otherwise, <a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element④">unfullscreen</a> <var>exitDoc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②⓪">fullscreen element</a>. </p>
      </ol>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate④">For each</a> <var>descendantDoc</var> in <var>descendantDocs</var>: </p>
      <ol>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append⑥">Append</a> (<code>fullscreenchange</code>, <var>descendantDoc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②①">fullscreen element</a>) to <var>descendantDoc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events⑥">list of pending fullscreen events</a>. </p>
       <li>
        <p><a data-link-type="dfn" href="#unfullscreen-a-document" id="ref-for-unfullscreen-a-document①">Unfullscreen <var>descendantDoc</var></a>. </p>
      </ol>
      <p class="note" role="note">The order in which documents are <a data-link-type="dfn" href="#unfullscreen-a-document" id="ref-for-unfullscreen-a-document②">unfullscreened</a> is not observable, because <a data-link-type="dfn" href="#run-the-fullscreen-steps" id="ref-for-run-the-fullscreen-steps①">run the fullscreen steps</a> is invoked in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order" id="ref-for-concept-tree-order②">tree order</a>. </p>
     <li>
      <p>Resolve <var>promise</var> with undefined. </p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export id="dom-document-exitfullscreen"><code>exitFullscreen()</code></dfn> method, when invoked, must
return the result of running <a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen②">exit fullscreen</a> on the <a data-link-type="dfn">context object</a>. </p>
   <hr>
   <p>The following are the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers">event handlers</a> (and their corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type">event handler event types</a>) that must be supported by <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code> and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> objects as <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes">event handler IDL attributes</a>: </p>
   <table>
    <thead>
     <tr>
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers①">event handler</a> 
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type①">event handler event type</a> 
    <tbody>
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="handler-document-onfullscreenchange"><code>onfullscreenchange</code></dfn> 
      <td><code>fullscreenchange</code> 
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="handler-document-onfullscreenerror"><code>onfullscreenerror</code></dfn> 
      <td><code>fullscreenerror</code> 
   </table>
   <p class="note" role="note">These are not supported by <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot">ShadowRoot</a></code> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code> objects, and there are no
corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes" id="ref-for-event-handler-content-attributes">event handler content attributes</a> for <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code> objects in any namespace. </p>
   <h2 class="heading settled" data-level="4" id="ui"><span class="secno">4. </span><span class="content">UI</span><a class="self-link" href="#ui"></a></h2>
   <p>User agents are encouraged to implement native media fullscreen controls in terms of <code class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen②">requestFullscreen()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen②">exitFullscreen()</a></code>. </p>
   <p>If the end user instructs the user agent to end a fullscreen session initiated via <code class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen③">requestFullscreen()</a></code>, <a data-link-type="dfn" href="#fully-exit-fullscreen" id="ref-for-fully-exit-fullscreen①">fully exit fullscreen</a> the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context②">top-level browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document③">active document</a>. </p>
   <p>The user agent may end any fullscreen session without instruction from the end user
or call to <code class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen③">exitFullscreen()</a></code> whenever the user agent deems it necessary. </p>
   <h2 class="heading settled" data-level="5" id="rendering"><span class="secno">5. </span><span class="content">Rendering</span><a class="self-link" href="#rendering"></a></h2>
   <p>This section is to be interpreted equivalently to the Rendering section of HTML. <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> </p>
   <p class="XXX">Long term CSS will define the <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①①">top layer</a> concept and its associated <a class="css" data-link-type="selector" href="#css-pe-backdrop" id="ref-for-css-pe-backdrop"><code>::backdrop</code></a> pseudo-element as part of CSS' stacking context model. Patching CSS
as done here is sketchy as hell. </p>
   <h3 class="heading settled" data-level="5.1" id="new-stacking-layer"><span class="secno">5.1. </span><span class="content">New stacking layer</span><a class="self-link" href="#new-stacking-layer"></a></h3>
   <p>This specification introduces a new stacking layer to the <a href="https://www.w3.org/TR/CSS2/zindex.html">Elaborate description of Stacking Contexts</a> of CSS
2.1. It is called the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="top-layer">top layer</dfn>, comes after step 10 in the painting order, and is
therefore rendered closest to the user within a viewport. Each <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑨">document</a> has one
associated viewport and therefore also one <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①②">top layer</a>. <a data-link-type="biblio" href="#biblio-css" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS]</a> </p>
   <p class="note" role="note">The terminology used in this and following subsection attempts to match CSS 2.1
Appendix E. </p>
   <p>The <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①③">top layer</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set④">ordered set</a> of elements, rendered in the order they appear in
the set. The last element in the set is rendered last, and thus appears on top. </p>
   <p class="note" role="note">The <code>z-index</code> property has no effect in the <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①④">top layer</a>. </p>
   <p>Each element and <a class="css" data-link-type="selector" href="#css-pe-backdrop" id="ref-for-css-pe-backdrop①"><code>::backdrop</code></a> pseudo-element in a <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⑤">top layer</a> has the
following characteristics: </p>
   <ul>
    <li>
     <p>It generates a new stacking context. </p>
    <li>
     <p>Its parent stacking context is the root stacking context. </p>
    <li>
     <p>If it consists of multiple layout boxes, the first box is used. </p>
    <li>
     <p>It is rendered as an atomic unit as if it were a sibling of its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-root" id="ref-for-concept-tree-root">root</a>. </p>
     <p class="note" role="note"><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-ancestor" id="ref-for-concept-tree-ancestor">Ancestor</a> elements with overflow, opacity, masks, etc. cannot affect
  it. </p>
    <li>
     <p>If its <code>position</code> property computes to <code>fixed</code>, its containing block
 is the viewport, and the initial containing block otherwise. </p>
    <li>
     <p>If it is an element, it and its <a class="css" data-link-type="selector" href="#css-pe-backdrop" id="ref-for-css-pe-backdrop②"><code>::backdrop</code></a> pseudo-element are not
 rendered if its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-ancestor" id="ref-for-concept-shadow-including-inclusive-ancestor">shadow-including inclusive ancestor</a> has the <code>display</code> property
 set to <code>none</code>. </p>
    <li>
     <p>If its specified <code>display</code> property is <code>contents</code>, it computes to <code>block</code>. </p>
    <li>
     <p>If its specified <code>position</code> property is not <code>absolute</code> or <code>fixed</code>, it computes to <code>absolute</code>. </p>
    <li>
     <p>Its outline, if any, is to be rendered before step 10 in the painting order. </p>
    <li>
     <p>Unless overridden by another specification, its static position for <code>left</code>, <code>right</code>, and <code>top</code> is zero. </p>
   </ul>
   <p>To <dfn class="dfn-paneled" data-dfn-for="top layer" data-dfn-type="dfn" data-export id="top-layer-add">add</dfn> an <var>element</var> to a <var>top layer</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove②">remove</a> it from <var>top layer</var> and then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append⑦">append</a> it to <var>top layer</var>. </p>
   <p class="note" role="note">In other words, <var>element</var> is moved to the end of <var>top layer</var> if it
is already present. </p>
   <h3 class="heading settled" data-level="5.2" id="::backdrop-pseudo-element"><span class="secno">5.2. </span><span class="content"><code>::backdrop</code> pseudo-element</span><a class="self-link" href="#::backdrop-pseudo-element"></a></h3>
   <p>Each element in a <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⑥">top layer</a> has a <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="css-pe-backdrop"><code>::backdrop</code></dfn> pseudo-element. This pseudo-element
is a box rendered immediately below the element (and above the element before the element in the
set, if any), within the same <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⑦">top layer</a>. </p>
   <p class="note" role="note">The <a class="css" data-link-type="selector" href="#css-pe-backdrop" id="ref-for-css-pe-backdrop③"><code>::backdrop</code></a> pseudo-element can be used to create a backdrop
that hides the underlying document for an element in a <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⑧">top layer</a> (such as an element that is
displayed fullscreen). </p>
   <p>It does not inherit from any element and is not inherited from. No restrictions are made on what
properties apply to this pseudo-element either. </p>
   <h3 class="heading settled" data-level="5.3" id=":fullscreen-pseudo-class"><span class="secno">5.3. </span><span class="content"><code>:fullscreen</code> pseudo-class</span><a class="self-link" href="#:fullscreen-pseudo-class"></a></h3>
   <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="css-pc-fullscreen"><code>:fullscreen</code></dfn> pseudo-class must match any <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element①①">element</a> <var>element</var> for which one of the following conditions is true: </p>
   <ul>
    <li>
     <p><var>element</var>’s <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑧">fullscreen flag</a> is set. </p>
    <li>
     <p><var>element</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#element-shadow-host" id="ref-for-element-shadow-host">shadow host</a> and the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#retarget" id="ref-for-retarget①">retargeting</a> its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑨">node document</a>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②②">fullscreen element</a> against <var>element</var> is <var>element</var>. </p>
   </ul>
   <p class="note no-backref" role="note">This makes it different from the <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement④">fullscreenElement</a></code> API, which returns the topmost <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②③">fullscreen element</a>. </p>
   <h3 class="heading settled" data-level="5.4" id="user-agent-level-style-sheet-defaults"><span class="secno">5.4. </span><span class="content">User-agent level style sheet defaults</span><a class="self-link" href="#user-agent-level-style-sheet-defaults"></a></h3>
<pre class="css">@namespace "http://www.w3.org/1999/xhtml";

*|*:not(:root):fullscreen {
  position:fixed !important;
  top:0 !important; right:0 !important; bottom:0 !important; left:0 !important;
  margin:0 !important;
  box-sizing:border-box !important;
  min-width:0 !important;
  max-width:none !important;
  min-height:0 !important;
  max-height:none !important;
  width:100% !important;
  height:100% !important;
  transform:none !important;

  /* intentionally not !important */
  object-fit:contain;
}

iframe:fullscreen {
  border:none !important;
  padding:0 !important;
}

::backdrop {
  position:fixed;
  top:0; right:0; bottom:0; left:0;
}

*|*:not(:root):fullscreen::backdrop {
  background:black;
}
</pre>
   <h2 class="heading settled" data-level="6" id="permissions-policy-integration"><span class="secno">6. </span><span class="content">Permissions Policy
Integration</span><span id="feature-policy-integration"></span><a class="self-link" href="#permissions-policy-integration"></a></h2>
   <p>This specification defines a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" id="ref-for-policy-controlled-feature">policy-controlled feature</a> identified by the string
"<code><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="fullscreen-feature" data-noexport id="fullscreen-feature">fullscreen</dfn></code>". Its <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist">default allowlist</a> is <code>'self'</code>. </p>
   <div class="note" role="note">
    <p>A <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①⓪">document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" id="ref-for-concept-document-permissions-policy">permissions policy</a> determines whether any content in that
document is allowed to go fullscreen. If disabled in any document, no content in the document will
be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use②">allowed to use</a> fullscreen. </p>
    <p>The <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen">allowfullscreen</a></code> attribute of the HTML <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element②">iframe</a></code> element affects the <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#container-policy" id="ref-for-container-policy">container
policy</a> for any document nested in that iframe. Unless overridden by the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow">allow</a></code> attribute, setting <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen①">allowfullscreen</a></code> on an iframe is equivalent to <code>&lt;iframe
allow="fullscreen *"></code>, as described in <a href="https://w3c.github.io/webappsec-permissions-policy/#iframe-allowfullscreen-attribute"><cite>Permissions Policy</cite> § 6.3.1 allowfullscreen</a>. </p>
   </div>
   <h2 class="heading settled" data-level="7" id="security-and-privacy-considerations"><span class="secno">7. </span><span class="content">Security and Privacy Considerations</span><a class="self-link" href="#security-and-privacy-considerations"></a></h2>
   <p>User agents should ensure, e.g. by means of an overlay, that the end user is aware something is
displayed fullscreen. User agents should provide a means of exiting fullscreen that always works and
advertise this to the user. This is to prevent a site from spoofing the end user by recreating the
user agent or even operating system environment when fullscreen. See also the definition of <code class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen④">requestFullscreen()</a></code>. </p>
   <p>To enable content in a <a data-link-type="dfn">nested browsing context</a> to go fullscreen, it needs to be
specifically allowed via permissions policy, either through the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen②">allowfullscreen</a></code> attribute
of the HTML <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element③">iframe</a></code> element, or an appropriate declaration in the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow①">allow</a></code> attribute of
the HTML <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element④">iframe</a></code> element, or through a `<a data-link-type="http-header" href="https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header" id="ref-for-permissions-policy-header"><code>Permissions-Policy</code></a>` HTTP
header delivered with the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①①">document</a> through which it is nested. </p>
   <p>This prevents e.g. content from third parties to go fullscreen without explicit permission. </p>
   <h2 class="no-num heading settled" id="acknowledgments"><span class="content">Acknowledgments</span><a class="self-link" href="#acknowledgments"></a></h2>
   <p>Many thanks to Robert O’Callahan for designing the initial model and being awesome. </p>
   <p>Thanks to
Andy Earnshaw,
Changwan Hong,
Chris Pearce,
Darin Fisher,
Dave Tapuska, <i>fantasai</i>,
Giuseppe Pascale,
Glenn Maynard,
Ian Clelland,
Ian Hickson,
Ignacio Solla,
João Eiras,
Josh Soref,
Kagami Sascha Rosylight,
Matt Falkenhagen,
Mihai Balan,
Mounir Lamouri,
Øyvind Stenhaug,
Pat Ladd,
Rafał Chłodnicki,
Riff Jiang,
Rune Lillesveen,
Sigbjørn Vik,
Simon Pieters,
Tab Atkins,
Takayoshi Kochi,
Theresa O’Connor,
triple-underscore,
Vincent Scheib, and
Xidorn Quan
for also being awesome. </p>
   <p>This standard is edited by <a href="https://foolip.org/" lang="sv">Philip Jägenstedt</a> (<a href="https://google.com/">Google</a>, <a href="mailto:philip@foolip.org">philip@foolip.org</a>). It was originally written by <a href="https://annevankesteren.nl/" lang="nl">Anne van Kesteren</a> (<a href="https://www.mozilla.org/">Mozilla</a>, <a href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>). <a href="http://tantek.com/" lang="tr">Tantek Çelik</a> (<a class="p-org org h-org h-card" href="https://www.mozilla.org/">Mozilla</a>, <a href="mailto:tantek@cs.stanford.edu">tantek@cs.stanford.edu</a>) sorted out legal hassles. </p>
   <h2 class="no-num heading settled" id="ipr"><span class="content">Intellectual property rights</span><a class="self-link" href="#ipr"></a></h2>
   <p>Copyright © WHATWG (Apple, Google, Mozilla, Microsoft). This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0
International License</a>. To the extent portions of it are incorporated into source code, such
portions in the source code are licensed under the <a href="https://opensource.org/licenses/BSD-3-Clause" rel="license">BSD 3-Clause License</a> instead.</p>
   <p>This is the Living Standard. Those
interested in the patent-review version should view the <a href="/review-drafts/2021-01/">Living Standard Review Draft</a>.</p>
  </main>
<script>
"use strict";
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js");
}
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#top-layer-add">add</a><span>, in § 5.1</span>
   <li><a href="#dom-fullscreennavigationui-auto">"auto"</a><span>, in § 3</span>
   <li><a href="#css-pe-backdrop">::backdrop</a><span>, in § 5.2</span>
   <li><a href="#collect-documents-to-unfullscreen">collect documents to unfullscreen</a><span>, in § 3</span>
   <li><a href="#descendant-browsing-context">descendant browsing context</a><span>, in § 1</span>
   <li><a href="#exit-fullscreen">exit fullscreen</a><span>, in § 3</span>
   <li><a href="#dom-document-exitfullscreen">exitFullscreen()</a><span>, in § 3</span>
   <li><a href="#css-pc-fullscreen">:fullscreen</a><span>, in § 5.3</span>
   <li><a href="#dom-document-fullscreen">fullscreen</a><span>, in § 3</span>
   <li><a href="#fullscreen-an-element">fullscreen an element</a><span>, in § 2</span>
   <li><a href="#fullscreen-element">fullscreen element</a><span>, in § 2</span>
   <li><a href="#dom-document-fullscreenelement">fullscreenElement</a><span>, in § 3</span>
   <li><a href="#fullscreen-element-ready-check">fullscreen element ready check</a><span>, in § 3</span>
   <li><a href="#dom-document-fullscreenenabled">fullscreenEnabled</a><span>, in § 3</span>
   <li><a href="#fullscreen-feature">fullscreen-feature</a><span>, in § 6</span>
   <li><a href="#fullscreen-flag">fullscreen flag</a><span>, in § 2</span>
   <li><a href="#fullscreen-is-supported">Fullscreen is supported</a><span>, in § 2</span>
   <li><a href="#enumdef-fullscreennavigationui">FullscreenNavigationUI</a><span>, in § 3</span>
   <li><a href="#dictdef-fullscreenoptions">FullscreenOptions</a><span>, in § 3</span>
   <li><a href="#fully-exit-fullscreen">fully exit fullscreen</a><span>, in § 2</span>
   <li><a href="#dom-fullscreennavigationui-hide">"hide"</a><span>, in § 3</span>
   <li><a href="#iframe-fullscreen-flag">iframe fullscreen flag</a><span>, in § 2</span>
   <li><a href="#list-of-pending-fullscreen-events">list of pending fullscreen events</a><span>, in § 2</span>
   <li><a href="#dom-fullscreenoptions-navigationui">navigationUI</a><span>, in § 3</span>
   <li>
    onfullscreenchange
    <ul>
     <li><a href="#handler-document-onfullscreenchange">attribute for Document</a><span>, in § 3</span>
     <li><a href="#dom-element-onfullscreenchange">attribute for Element</a><span>, in § 3</span>
    </ul>
   <li>
    onfullscreenerror
    <ul>
     <li><a href="#handler-document-onfullscreenerror">attribute for Document</a><span>, in § 3</span>
     <li><a href="#dom-element-onfullscreenerror">attribute for Element</a><span>, in § 3</span>
    </ul>
   <li><a href="#dom-element-requestfullscreen">requestFullscreen()</a><span>, in § 3</span>
   <li><a href="#dom-element-requestfullscreen">requestFullscreen(options)</a><span>, in § 3</span>
   <li><a href="#run-the-fullscreen-steps">run the fullscreen steps</a><span>, in § 2</span>
   <li><a href="#dom-fullscreennavigationui-show">"show"</a><span>, in § 3</span>
   <li><a href="#simple-fullscreen-document">simple fullscreen document</a><span>, in § 3</span>
   <li><a href="#top-layer">top layer</a><span>, in § 5.1</span>
   <li><a href="#unfullscreen-a-document">unfullscreen a document</a><span>, in § 2</span>
   <li><a href="#unfullscreen-an-element">unfullscreen an element</a><span>, in § 2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="95ea01a3">triggered by a user generated orientation change</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="9ac2aadf">DocumentOrShadowRoot</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="1cd7ff31">ShadowRoot</span>
     <li><span class="dfn-paneled" id="80159636">ancestor</span>
     <li><span class="dfn-paneled" id="0c0ceb78">bubbles</span>
     <li><span class="dfn-paneled" id="8b547cc7">composed</span>
     <li><span class="dfn-paneled" id="9638f92b">connected</span>
     <li><span class="dfn-paneled" id="a973e0fe">document</span>
     <li><span class="dfn-paneled" id="27d9b7ea">element</span>
     <li><span class="dfn-paneled" id="5fd23811">fire an event</span>
     <li><span class="dfn-paneled" id="5d233601">host</span>
     <li><span class="dfn-paneled" id="746cc3ba">namespace</span>
     <li><span class="dfn-paneled" id="5216e1a0">node document</span>
     <li><span class="dfn-paneled" id="62e9a98d">removing steps</span>
     <li><span class="dfn-paneled" id="c200d9ce">retargeting</span>
     <li><span class="dfn-paneled" id="f7960529">root</span>
     <li><span class="dfn-paneled" id="58a8f724">shadow host</span>
     <li><span class="dfn-paneled" id="3fcc582f">shadow root</span>
     <li><span class="dfn-paneled" id="3d6a3d36">shadow-including inclusive ancestor</span>
     <li><span class="dfn-paneled" id="a85a691e">shadow-including inclusive descendant</span>
     <li><span class="dfn-paneled" id="fefa5851">shadow-including tree order</span>
     <li><span class="dfn-paneled" id="e6cc3311">tree</span>
     <li><span class="dfn-paneled" id="25538777">tree order</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="f0951476">EventHandler</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="35972864">active document</span>
     <li><span class="dfn-paneled" id="57435598">allow</span>
     <li><span class="dfn-paneled" id="3610bd67">allowed to use</span>
     <li><span class="dfn-paneled" id="06cba118">allowfullscreen</span>
     <li><span class="dfn-paneled" id="0d0390b4">browsing context</span>
     <li><span class="dfn-paneled" id="1812300f">dialog</span>
     <li><span class="dfn-paneled" id="6a5a59a0">event handler</span>
     <li><span class="dfn-paneled" id="cc6d9aed">event handler content attribute</span>
     <li><span class="dfn-paneled" id="9d386f55">event handler event type</span>
     <li><span class="dfn-paneled" id="03675365">event handler idl attribute</span>
     <li><span class="dfn-paneled" id="c6d19e56">event loop</span>
     <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
     <li><span class="dfn-paneled" id="87fcd40c">iframe</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="a41102eb">permissions policy</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="ae2a6342">top-level browsing context</span>
     <li><span class="dfn-paneled" id="47fe679e">transient activation</span>
     <li><span class="dfn-paneled" id="4411082c">unloading document cleanup steps</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a3b18719">append</span>
     <li><span class="dfn-paneled" id="7b0d918d">break</span>
     <li><span class="dfn-paneled" id="ae8def21">contain</span>
     <li><span class="dfn-paneled" id="f937b7b6">continue</span>
     <li><span class="dfn-paneled" id="03afaf9c">empty</span>
     <li><span class="dfn-paneled" id="16d07e10">for each</span>
     <li><span class="dfn-paneled" id="f052b1ea">html namespace</span>
     <li><span class="dfn-paneled" id="692595fe">ordered set</span>
     <li><span class="dfn-paneled" id="99c988d6">remove</span>
     <li><span class="dfn-paneled" id="0698d556">string</span>
     <li><span class="dfn-paneled" id="cbdc89b4">while</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-POLICY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d080b91a">container policy</span>
     <li><span class="dfn-paneled" id="1570624a">default allowlist</span>
     <li><span class="dfn-paneled" id="0e3ba2bf">permissions-policy</span>
     <li><span class="dfn-paneled" id="cc890cc1">policy-controlled feature</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="459b02ed">LegacyLenientSetter</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="31d6b6c6">Unscopable</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css">[CSS]
   <dd>Bert Bos; et al. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-mathml">[MATHML]
   <dd>Patrick D F Ion; Robert R Miner. <a href="https://www.w3.org/TR/REC-MathML/"><cite>Mathematical Markup Language (MathML™) 1.01 Specification</cite></a>. 7 March 2023. REC. URL: <a href="https://www.w3.org/TR/REC-MathML/">https://www.w3.org/TR/REC-MathML/</a>
   <dt id="biblio-permissions-policy-1">[PERMISSIONS-POLICY-1]
   <dd>Ian Clelland. <a href="https://w3c.github.io/webappsec-permissions-policy/"><cite>Permissions Policy</cite></a>. URL: <a href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
   <dt id="biblio-svg">[SVG]
   <dd>Erik Dahlström; et al. <a href="https://www.w3.org/TR/SVG11/"><cite>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</cite></a>. 16 August 2011. REC. URL: <a href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-fullscreennavigationui"><code><c- g>FullscreenNavigationUI</c-></code></a> {
  <a href="#dom-fullscreennavigationui-auto"><code><c- s>"auto"</c-></code></a>,
  <a href="#dom-fullscreennavigationui-show"><code><c- s>"show"</c-></code></a>,
  <a href="#dom-fullscreennavigationui-hide"><code><c- s>"hide"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-fullscreenoptions"><code><c- g>FullscreenOptions</c-></code></a> {
  <a data-link-type="idl-name" href="#enumdef-fullscreennavigationui"><c- n>FullscreenNavigationUI</c-></a> <a data-default="&quot;auto&quot;" data-type="FullscreenNavigationUI" href="#dom-fullscreenoptions-navigationui"><code><c- g>navigationUI</c-></code></a> = "auto";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element"><c- g>Element</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen"><c- g>requestFullscreen</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-fullscreenoptions"><c- n>FullscreenOptions</c-></a> <a href="#dom-element-requestfullscreen-options-options"><code><c- g>options</c-></code></a> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-element-onfullscreenchange"><code><c- g>onfullscreenchange</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-element-onfullscreenerror"><code><c- g>onfullscreenerror</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreenenabled"><c- g>fullscreenEnabled</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Unscopable"><c- g>Unscopable</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreen"><c- g>fullscreen</c-></a>; // historical

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-document-exitfullscreen"><c- g>exitFullscreen</c-></a>();

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element?" href="#dom-document-fullscreenelement"><c- g>fullscreenElement</c-></a>;
};

</pre>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-exitfullscreen①">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen" title="The Document method exitFullscreen() requests that the element on this document which is currently being presented in fullscreen mode be taken out of fullscreen mode, restoring the previous state of the screen. This usually reverses the effects of a previous call to Element.requestFullscreen().">Document/exitFullscreen</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="handler-document-onfullscreenchange">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenchange_event" title="The fullscreenchange event is fired immediately after the browser switches into or out of fullscreen mode.">Document/fullscreenchange_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/fullscreenchange_event" title="The fullscreenchange event is fired immediately after an Element switches into or out of fullscreen mode.">Element/fullscreenchange_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenelement①">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement" title="The Document.fullscreenElement read-only property returns the Element that is currently being presented in fullscreen mode in this document, or null if fullscreen mode is not currently in use.">Document/fullscreenElement</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenenabled①">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenEnabled" title="The read-only fullscreenEnabled property on the Document interface indicates whether or not fullscreen mode is available.">Document/fullscreenEnabled</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="handler-document-onfullscreenerror">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenerror_event" title="The fullscreenerror event is fired when the browser cannot switch to fullscreen mode.">Document/fullscreenerror_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/fullscreenerror_event" title="The fullscreenerror event is fired when the browser cannot switch to fullscreen mode.">Element/fullscreenerror_event</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-element-requestfullscreen①">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen" title="The Element.requestFullscreen() method issues an asynchronous request to make the element be displayed in fullscreen mode.">Element/requestFullscreen</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android yes"><span>Firefox for Android</span><span>64+</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element" title="Element is the most general base class from which all element objects (i.e. objects that represent elements) in a Document inherit. It only has methods and properties common to all kinds of elements. More specific classes inherit from Element.">Element</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>8+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>4+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>10.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenelement②">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot/fullscreenElement" title="The fullscreenElement read-only property of the ShadowRoot interface returns the element within the shadow tree that is currently displayed in full screen.">ShadowRoot/fullscreenElement</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for=":fullscreen-pseudo-class">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:fullscreen" title="The :fullscreen CSS pseudo-class matches every element which is currently in fullscreen mode. If multiple elements have been put into fullscreen mode, this selects them all.">:fullscreen</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="permissions-policy-integration">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/fullscreen" title="The HTTP Permissions-Policy header fullscreen directive controls whether the current document is allowed to use Element.requestFullscreen().">Headers/Feature-Policy/fullscreen</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>62+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy/fullscreen" title="The HTTP Permissions-Policy header fullscreen directive controls whether the current document is allowed to use Element.requestFullscreen().">Headers/Permissions-Policy/fullscreen</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>88+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>88+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"03675365": {"dfnID":"03675365","dfnText":"event handler idl attribute","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handler-idl-attributes"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"},
"03afaf9c": {"dfnID":"03afaf9c","dfnText":"empty","external":true,"refSections":[{"refs":[{"id":"ref-for-list-empty"}],"title":"2. Model"}],"url":"https://infra.spec.whatwg.org/#list-empty"},
"0698d556": {"dfnID":"0698d556","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string"}],"title":"2. Model"}],"url":"https://infra.spec.whatwg.org/#string"},
"06cba118": {"dfnID":"06cba118","dfnText":"allowfullscreen","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-iframe-allowfullscreen"},{"id":"ref-for-attr-iframe-allowfullscreen\u2460"}],"title":"6. Permissions Policy\nIntegration"},{"refs":[{"id":"ref-for-attr-iframe-allowfullscreen\u2461"}],"title":"7. Security and Privacy Considerations"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen"},
"0c0ceb78": {"dfnID":"0c0ceb78","dfnText":"bubbles","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-event-bubbles"}],"title":"2. Model"}],"url":"https://dom.spec.whatwg.org/#dom-event-bubbles"},
"0d0390b4": {"dfnID":"0d0390b4","dfnText":"browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-browsing-context"},{"id":"ref-for-browsing-context\u2460"}],"title":"1. Terminology"},{"refs":[{"id":"ref-for-browsing-context\u2461"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context"},
"0e3ba2bf": {"dfnID":"0e3ba2bf","dfnText":"permissions-policy","external":true,"refSections":[{"refs":[{"id":"ref-for-permissions-policy-header"}],"title":"7. Security and Privacy Considerations"}],"url":"https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header"},
"0e3ba9f8": {"dfnID":"0e3ba9f8","dfnText":"fully active","external":true,"refSections":[{"refs":[{"id":"ref-for-fully-active"},{"id":"ref-for-fully-active\u2460"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"1570624a": {"dfnID":"1570624a","dfnText":"default allowlist","external":true,"refSections":[{"refs":[{"id":"ref-for-policy-controlled-feature-default-allowlist"}],"title":"6. Permissions Policy\nIntegration"}],"url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist"},
"16d07e10": {"dfnID":"16d07e10","dfnText":"for each","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"},{"id":"ref-for-list-iterate\u2460"}],"title":"2. Model"},{"refs":[{"id":"ref-for-list-iterate\u2461"},{"id":"ref-for-list-iterate\u2462"},{"id":"ref-for-list-iterate\u2463"}],"title":"3. API"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"1812300f": {"dfnID":"1812300f","dfnText":"dialog","external":true,"refSections":[{"refs":[{"id":"ref-for-the-dialog-element"}],"title":"2. Model"},{"refs":[{"id":"ref-for-the-dialog-element\u2460"},{"id":"ref-for-the-dialog-element\u2461"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element"},
"1cd7ff31": {"dfnID":"1cd7ff31","dfnText":"ShadowRoot","external":true,"refSections":[{"refs":[{"id":"ref-for-shadowroot"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#shadowroot"},
"25538777": {"dfnID":"25538777","dfnText":"tree order","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-tree-order"},{"id":"ref-for-concept-tree-order\u2460"},{"id":"ref-for-concept-tree-order\u2461"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#concept-tree-order"},
"27d9b7ea": {"dfnID":"27d9b7ea","dfnText":"element","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element"},{"id":"ref-for-concept-element\u2460"},{"id":"ref-for-concept-element\u2461"},{"id":"ref-for-concept-element\u2462"},{"id":"ref-for-concept-element\u2463"}],"title":"2. Model"},{"refs":[{"id":"ref-for-concept-element\u2464"},{"id":"ref-for-concept-element\u2465"},{"id":"ref-for-concept-element\u2466"},{"id":"ref-for-concept-element\u2467"},{"id":"ref-for-concept-element\u2468"},{"id":"ref-for-concept-element\u2460\u24ea"}],"title":"3. API"},{"refs":[{"id":"ref-for-concept-element\u2460\u2460"}],"title":"5.3. :fullscreen pseudo-class"}],"url":"https://dom.spec.whatwg.org/#concept-element"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"},{"id":"ref-for-element\u2460"},{"id":"ref-for-element\u2461"},{"id":"ref-for-element\u2462"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#element"},
"31d6b6c6": {"dfnID":"31d6b6c6","dfnText":"Unscopable","external":true,"refSections":[{"refs":[{"id":"ref-for-Unscopable"}],"title":"3. API"}],"url":"https://webidl.spec.whatwg.org/#Unscopable"},
"35972864": {"dfnID":"35972864","dfnText":"active document","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-document"},{"id":"ref-for-nav-document\u2460"},{"id":"ref-for-nav-document\u2461"}],"title":"3. API"},{"refs":[{"id":"ref-for-nav-document\u2462"}],"title":"4. UI"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"},
"3610bd67": {"dfnID":"3610bd67","dfnText":"allowed to use","external":true,"refSections":[{"refs":[{"id":"ref-for-allowed-to-use"},{"id":"ref-for-allowed-to-use\u2460"}],"title":"3. API"},{"refs":[{"id":"ref-for-allowed-to-use\u2461"}],"title":"6. Permissions Policy\nIntegration"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"},
"3d6a3d36": {"dfnID":"3d6a3d36","dfnText":"shadow-including inclusive ancestor","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-shadow-including-inclusive-ancestor"}],"title":"5.1. New stacking layer"}],"url":"https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-ancestor"},
"3fcc582f": {"dfnID":"3fcc582f","dfnText":"shadow root","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-shadow-root"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#concept-shadow-root"},
"4411082c": {"dfnID":"4411082c","dfnText":"unloading document cleanup steps","external":true,"refSections":[{"refs":[{"id":"ref-for-unloading-document-cleanup-steps"}],"title":"2. Model"}],"url":"https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps"},
"459b02ed": {"dfnID":"459b02ed","dfnText":"LegacyLenientSetter","external":true,"refSections":[{"refs":[{"id":"ref-for-LegacyLenientSetter"},{"id":"ref-for-LegacyLenientSetter\u2460"},{"id":"ref-for-LegacyLenientSetter\u2461"}],"title":"3. API"}],"url":"https://webidl.spec.whatwg.org/#LegacyLenientSetter"},
"47fe679e": {"dfnID":"47fe679e","dfnText":"transient activation","external":true,"refSections":[{"refs":[{"id":"ref-for-transient-activation"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation"},
"5216e1a0": {"dfnID":"5216e1a0","dfnText":"node document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-document"},{"id":"ref-for-concept-node-document\u2460"},{"id":"ref-for-concept-node-document\u2461"},{"id":"ref-for-concept-node-document\u2462"}],"title":"2. Model"},{"refs":[{"id":"ref-for-concept-node-document\u2463"},{"id":"ref-for-concept-node-document\u2464"},{"id":"ref-for-concept-node-document\u2465"},{"id":"ref-for-concept-node-document\u2466"},{"id":"ref-for-concept-node-document\u2467"}],"title":"3. API"},{"refs":[{"id":"ref-for-concept-node-document\u2468"}],"title":"5.3. :fullscreen pseudo-class"}],"url":"https://dom.spec.whatwg.org/#concept-node-document"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"},{"id":"ref-for-idl-boolean\u2460"}],"title":"3. API"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"57435598": {"dfnID":"57435598","dfnText":"allow","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-iframe-allow"}],"title":"6. Permissions Policy\nIntegration"},{"refs":[{"id":"ref-for-attr-iframe-allow\u2460"}],"title":"7. Security and Privacy Considerations"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow"},
"58a8f724": {"dfnID":"58a8f724","dfnText":"shadow host","external":true,"refSections":[{"refs":[{"id":"ref-for-element-shadow-host"}],"title":"5.3. :fullscreen pseudo-class"}],"url":"https://dom.spec.whatwg.org/#element-shadow-host"},
"5d233601": {"dfnID":"5d233601","dfnText":"host","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-documentfragment-host"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#concept-documentfragment-host"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"5f90bbfb": {"dfnID":"5f90bbfb","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"},{"id":"ref-for-idl-undefined\u2460"}],"title":"3. API"}],"url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"5fd23811": {"dfnID":"5fd23811","dfnText":"fire an event","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-event-fire"}],"title":"2. Model"}],"url":"https://dom.spec.whatwg.org/#concept-event-fire"},
"62e9a98d": {"dfnID":"62e9a98d","dfnText":"removing steps","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-remove-ext"}],"title":"2. Model"}],"url":"https://dom.spec.whatwg.org/#concept-node-remove-ext"},
"692595fe": {"dfnID":"692595fe","dfnText":"ordered set","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-set"}],"title":"2. Model"},{"refs":[{"id":"ref-for-ordered-set\u2460"},{"id":"ref-for-ordered-set\u2461"},{"id":"ref-for-ordered-set\u2462"}],"title":"3. API"},{"refs":[{"id":"ref-for-ordered-set\u2463"}],"title":"5.1. New stacking layer"}],"url":"https://infra.spec.whatwg.org/#ordered-set"},
"6a5a59a0": {"dfnID":"6a5a59a0","dfnText":"event handler","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handlers"},{"id":"ref-for-event-handlers\u2460"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"},
"746cc3ba": {"dfnID":"746cc3ba","dfnText":"namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-namespace"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#concept-element-namespace"},
"7b0d918d": {"dfnID":"7b0d918d","dfnText":"break","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-break"},{"id":"ref-for-iteration-break\u2460"},{"id":"ref-for-iteration-break\u2461"}],"title":"3. API"}],"url":"https://infra.spec.whatwg.org/#iteration-break"},
"80159636": {"dfnID":"80159636","dfnText":"ancestor","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-tree-ancestor"}],"title":"5.1. New stacking layer"}],"url":"https://dom.spec.whatwg.org/#concept-tree-ancestor"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"},{"id":"ref-for-document\u2460"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#document"},
"87fcd40c": {"dfnID":"87fcd40c","dfnText":"iframe","external":true,"refSections":[{"refs":[{"id":"ref-for-the-iframe-element"}],"title":"2. Model"},{"refs":[{"id":"ref-for-the-iframe-element\u2460"}],"title":"3. API"},{"refs":[{"id":"ref-for-the-iframe-element\u2461"}],"title":"6. Permissions Policy\nIntegration"},{"refs":[{"id":"ref-for-the-iframe-element\u2462"},{"id":"ref-for-the-iframe-element\u2463"}],"title":"7. Security and Privacy Considerations"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"},
"8b547cc7": {"dfnID":"8b547cc7","dfnText":"composed","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-event-composed"}],"title":"2. Model"}],"url":"https://dom.spec.whatwg.org/#dom-event-composed"},
"95ea01a3": {"dfnID":"95ea01a3","dfnText":"triggered by a user generated orientation change","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-triggered-by-a-user-generated-orientation-change"}],"title":"3. API"}],"url":"https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change"},
"9638f92b": {"dfnID":"9638f92b","dfnText":"connected","external":true,"refSections":[{"refs":[{"id":"ref-for-connected"}],"title":"2. Model"},{"refs":[{"id":"ref-for-connected\u2460"},{"id":"ref-for-connected\u2461"},{"id":"ref-for-connected\u2462"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#connected"},
"99c988d6": {"dfnID":"99c988d6","dfnText":"remove","external":true,"refSections":[{"refs":[{"id":"ref-for-list-remove"},{"id":"ref-for-list-remove\u2460"}],"title":"2. Model"},{"refs":[{"id":"ref-for-list-remove\u2461"}],"title":"5.1. New stacking layer"}],"url":"https://infra.spec.whatwg.org/#list-remove"},
"9ac2aadf": {"dfnID":"9ac2aadf","dfnText":"DocumentOrShadowRoot","external":true,"refSections":[{"refs":[{"id":"ref-for-documentorshadowroot"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#documentorshadowroot"},
"9d386f55": {"dfnID":"9d386f55","dfnText":"event handler event type","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handler-event-type"},{"id":"ref-for-event-handler-event-type\u2460"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"},
"a3b18719": {"dfnID":"a3b18719","dfnText":"append","external":true,"refSections":[{"refs":[{"id":"ref-for-set-append"},{"id":"ref-for-set-append\u2460"},{"id":"ref-for-set-append\u2461"},{"id":"ref-for-set-append\u2462"},{"id":"ref-for-set-append\u2463"},{"id":"ref-for-set-append\u2464"},{"id":"ref-for-set-append\u2465"}],"title":"3. API"},{"refs":[{"id":"ref-for-set-append\u2466"}],"title":"5.1. New stacking layer"}],"url":"https://infra.spec.whatwg.org/#set-append"},
"a41102eb": {"dfnID":"a41102eb","dfnText":"permissions policy","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-permissions-policy"}],"title":"6. Permissions Policy\nIntegration"}],"url":"https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy"},
"a72449dd": {"dfnID":"a72449dd","dfnText":"in parallel","external":true,"refSections":[{"refs":[{"id":"ref-for-in-parallel"},{"id":"ref-for-in-parallel\u2460"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"a85a691e": {"dfnID":"a85a691e","dfnText":"shadow-including inclusive descendant","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-shadow-including-inclusive-descendant"}],"title":"2. Model"}],"url":"https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant"},
"a973e0fe": {"dfnID":"a973e0fe","dfnText":"document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document"},{"id":"ref-for-concept-document\u2460"},{"id":"ref-for-concept-document\u2461"},{"id":"ref-for-concept-document\u2462"},{"id":"ref-for-concept-document\u2463"}],"title":"2. Model"},{"refs":[{"id":"ref-for-concept-document\u2464"},{"id":"ref-for-concept-document\u2465"},{"id":"ref-for-concept-document\u2466"},{"id":"ref-for-concept-document\u2467"}],"title":"3. API"},{"refs":[{"id":"ref-for-concept-document\u2468"}],"title":"5.1. New stacking layer"},{"refs":[{"id":"ref-for-concept-document\u2460\u24ea"}],"title":"6. Permissions Policy\nIntegration"},{"refs":[{"id":"ref-for-concept-document\u2460\u2460"}],"title":"7. Security and Privacy Considerations"}],"url":"https://dom.spec.whatwg.org/#concept-document"},
"ae2a6342": {"dfnID":"ae2a6342","dfnText":"top-level browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-top-level-browsing-context"},{"id":"ref-for-top-level-browsing-context\u2460"}],"title":"3. API"},{"refs":[{"id":"ref-for-top-level-browsing-context\u2461"}],"title":"4. UI"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"},
"ae8def21": {"dfnID":"ae8def21","dfnText":"contain","external":true,"refSections":[{"refs":[{"id":"ref-for-list-contain"}],"title":"2. Model"}],"url":"https://infra.spec.whatwg.org/#list-contain"},
"bdbd19d1": {"dfnID":"bdbd19d1","dfnText":"Promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise"},{"id":"ref-for-idl-promise\u2460"}],"title":"3. API"}],"url":"https://webidl.spec.whatwg.org/#idl-promise"},
"c200d9ce": {"dfnID":"c200d9ce","dfnText":"retargeting","external":true,"refSections":[{"refs":[{"id":"ref-for-retarget"}],"title":"3. API"},{"refs":[{"id":"ref-for-retarget\u2460"}],"title":"5.3. :fullscreen pseudo-class"}],"url":"https://dom.spec.whatwg.org/#retarget"},
"c6d19e56": {"dfnID":"c6d19e56","dfnText":"event loop","external":true,"refSections":[{"refs":[{"id":"ref-for-event-loop"}],"title":"2. Model"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"},
"cbdc89b4": {"dfnID":"cbdc89b4","dfnText":"while","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-while"},{"id":"ref-for-iteration-while\u2460"}],"title":"3. API"}],"url":"https://infra.spec.whatwg.org/#iteration-while"},
"cc6d9aed": {"dfnID":"cc6d9aed","dfnText":"event handler content attribute","external":true,"refSections":[{"refs":[{"id":"ref-for-event-handler-content-attributes"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes"},
"cc890cc1": {"dfnID":"cc890cc1","dfnText":"policy-controlled feature","external":true,"refSections":[{"refs":[{"id":"ref-for-policy-controlled-feature"}],"title":"6. Permissions Policy\nIntegration"}],"url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature"},
"collect-documents-to-unfullscreen": {"dfnID":"collect-documents-to-unfullscreen","dfnText":"collect documents to unfullscreen","external":false,"refSections":[{"refs":[{"id":"ref-for-collect-documents-to-unfullscreen"},{"id":"ref-for-collect-documents-to-unfullscreen\u2460"}],"title":"3. API"}],"url":"#collect-documents-to-unfullscreen"},
"css-pc-fullscreen": {"dfnID":"css-pc-fullscreen","dfnText":":fullscreen","external":false,"refSections":[],"url":"#css-pc-fullscreen"},
"css-pe-backdrop": {"dfnID":"css-pe-backdrop","dfnText":"::backdrop","external":false,"refSections":[{"refs":[{"id":"ref-for-css-pe-backdrop"}],"title":"5. Rendering"},{"refs":[{"id":"ref-for-css-pe-backdrop\u2460"},{"id":"ref-for-css-pe-backdrop\u2461"}],"title":"5.1. New stacking layer"},{"refs":[{"id":"ref-for-css-pe-backdrop\u2462"}],"title":"5.2. ::backdrop pseudo-element"}],"url":"#css-pe-backdrop"},
"d080b91a": {"dfnID":"d080b91a","dfnText":"container policy","external":true,"refSections":[{"refs":[{"id":"ref-for-container-policy"}],"title":"6. Permissions Policy\nIntegration"}],"url":"https://w3c.github.io/webappsec-permissions-policy/#container-policy"},
"descendant-browsing-context": {"dfnID":"descendant-browsing-context","dfnText":"descendant browsing context","external":false,"refSections":[{"refs":[{"id":"ref-for-descendant-browsing-context"}],"title":"3. API"}],"url":"#descendant-browsing-context"},
"dictdef-fullscreenoptions": {"dfnID":"dictdef-fullscreenoptions","dfnText":"FullscreenOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-fullscreenoptions"}],"title":"3. API"}],"url":"#dictdef-fullscreenoptions"},
"dom-document-exitfullscreen": {"dfnID":"dom-document-exitfullscreen","dfnText":"exitFullscreen()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-document-exitfullscreen"},{"id":"ref-for-dom-document-exitfullscreen\u2460"}],"title":"3. API"},{"refs":[{"id":"ref-for-dom-document-exitfullscreen\u2461"},{"id":"ref-for-dom-document-exitfullscreen\u2462"}],"title":"4. UI"}],"url":"#dom-document-exitfullscreen"},
"dom-document-fullscreen": {"dfnID":"dom-document-fullscreen","dfnText":"fullscreen","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-document-fullscreen"}],"title":"3. API"}],"url":"#dom-document-fullscreen"},
"dom-document-fullscreenelement": {"dfnID":"dom-document-fullscreenelement","dfnText":"fullscreenElement","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-document-fullscreenelement"},{"id":"ref-for-dom-document-fullscreenelement\u2460"},{"id":"ref-for-dom-document-fullscreenelement\u2461"},{"id":"ref-for-dom-document-fullscreenelement\u2462"}],"title":"3. API"},{"refs":[{"id":"ref-for-dom-document-fullscreenelement\u2463"}],"title":"5.3. :fullscreen pseudo-class"}],"url":"#dom-document-fullscreenelement"},
"dom-document-fullscreenenabled": {"dfnID":"dom-document-fullscreenenabled","dfnText":"fullscreenEnabled","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-document-fullscreenenabled"},{"id":"ref-for-dom-document-fullscreenenabled\u2460"}],"title":"3. API"}],"url":"#dom-document-fullscreenenabled"},
"dom-element-onfullscreenchange": {"dfnID":"dom-element-onfullscreenchange","dfnText":"onfullscreenchange","external":false,"refSections":[],"url":"#dom-element-onfullscreenchange"},
"dom-element-onfullscreenerror": {"dfnID":"dom-element-onfullscreenerror","dfnText":"onfullscreenerror","external":false,"refSections":[],"url":"#dom-element-onfullscreenerror"},
"dom-element-requestfullscreen": {"dfnID":"dom-element-requestfullscreen","dfnText":"requestFullscreen(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-element-requestfullscreen"},{"id":"ref-for-dom-element-requestfullscreen\u2460"}],"title":"3. API"},{"refs":[{"id":"ref-for-dom-element-requestfullscreen\u2461"},{"id":"ref-for-dom-element-requestfullscreen\u2462"}],"title":"4. UI"},{"refs":[{"id":"ref-for-dom-element-requestfullscreen\u2463"}],"title":"7. Security and Privacy Considerations"}],"url":"#dom-element-requestfullscreen"},
"dom-element-requestfullscreen-options-options": {"dfnID":"dom-element-requestfullscreen-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-element-requestfullscreen-options-options"},
"dom-fullscreennavigationui-auto": {"dfnID":"dom-fullscreennavigationui-auto","dfnText":"\"auto\"","external":false,"refSections":[],"url":"#dom-fullscreennavigationui-auto"},
"dom-fullscreennavigationui-hide": {"dfnID":"dom-fullscreennavigationui-hide","dfnText":"\"hide\"","external":false,"refSections":[],"url":"#dom-fullscreennavigationui-hide"},
"dom-fullscreennavigationui-show": {"dfnID":"dom-fullscreennavigationui-show","dfnText":"\"show\"","external":false,"refSections":[],"url":"#dom-fullscreennavigationui-show"},
"dom-fullscreenoptions-navigationui": {"dfnID":"dom-fullscreenoptions-navigationui","dfnText":"navigationUI","external":false,"refSections":[],"url":"#dom-fullscreenoptions-navigationui"},
"e6cc3311": {"dfnID":"e6cc3311","dfnText":"tree","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-tree"}],"title":"3. API"}],"url":"https://dom.spec.whatwg.org/#concept-tree"},
"e99bd18e": {"dfnID":"e99bd18e","dfnText":"relevant global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-global"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"enumdef-fullscreennavigationui": {"dfnID":"enumdef-fullscreennavigationui","dfnText":"FullscreenNavigationUI","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-fullscreennavigationui"}],"title":"3. API"}],"url":"#enumdef-fullscreennavigationui"},
"exit-fullscreen": {"dfnID":"exit-fullscreen","dfnText":"exit fullscreen","external":false,"refSections":[{"refs":[{"id":"ref-for-exit-fullscreen"},{"id":"ref-for-exit-fullscreen\u2460"}],"title":"2. Model"},{"refs":[{"id":"ref-for-exit-fullscreen\u2461"}],"title":"3. API"}],"url":"#exit-fullscreen"},
"f052b1ea": {"dfnID":"f052b1ea","dfnText":"html namespace","external":true,"refSections":[{"refs":[{"id":"ref-for-html-namespace"}],"title":"3. API"}],"url":"https://infra.spec.whatwg.org/#html-namespace"},
"f0951476": {"dfnID":"f0951476","dfnText":"EventHandler","external":true,"refSections":[{"refs":[{"id":"ref-for-eventhandler"},{"id":"ref-for-eventhandler\u2460"},{"id":"ref-for-eventhandler\u2461"},{"id":"ref-for-eventhandler\u2462"}],"title":"3. API"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"},
"f7960529": {"dfnID":"f7960529","dfnText":"root","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-tree-root"}],"title":"5.1. New stacking layer"}],"url":"https://dom.spec.whatwg.org/#concept-tree-root"},
"f937b7b6": {"dfnID":"f937b7b6","dfnText":"continue","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-continue"}],"title":"3. API"}],"url":"https://infra.spec.whatwg.org/#iteration-continue"},
"fefa5851": {"dfnID":"fefa5851","dfnText":"shadow-including tree order","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-shadow-including-tree-order"}],"title":"2. Model"}],"url":"https://dom.spec.whatwg.org/#concept-shadow-including-tree-order"},
"fullscreen-an-element": {"dfnID":"fullscreen-an-element","dfnText":"fullscreen an element","external":false,"refSections":[{"refs":[{"id":"ref-for-fullscreen-an-element"},{"id":"ref-for-fullscreen-an-element\u2460"}],"title":"3. API"}],"url":"#fullscreen-an-element"},
"fullscreen-element": {"dfnID":"fullscreen-element","dfnText":"fullscreen element","external":false,"refSections":[{"refs":[{"id":"ref-for-fullscreen-element"},{"id":"ref-for-fullscreen-element\u2460"},{"id":"ref-for-fullscreen-element\u2461"},{"id":"ref-for-fullscreen-element\u2462"},{"id":"ref-for-fullscreen-element\u2463"}],"title":"2. Model"},{"refs":[{"id":"ref-for-fullscreen-element\u2464"},{"id":"ref-for-fullscreen-element\u2465"},{"id":"ref-for-fullscreen-element\u2466"},{"id":"ref-for-fullscreen-element\u2467"},{"id":"ref-for-fullscreen-element\u2468"},{"id":"ref-for-fullscreen-element\u2460\u24ea"},{"id":"ref-for-fullscreen-element\u2460\u2460"},{"id":"ref-for-fullscreen-element\u2460\u2461"},{"id":"ref-for-fullscreen-element\u2460\u2462"},{"id":"ref-for-fullscreen-element\u2460\u2463"},{"id":"ref-for-fullscreen-element\u2460\u2464"},{"id":"ref-for-fullscreen-element\u2460\u2465"},{"id":"ref-for-fullscreen-element\u2460\u2466"},{"id":"ref-for-fullscreen-element\u2460\u2467"},{"id":"ref-for-fullscreen-element\u2460\u2468"},{"id":"ref-for-fullscreen-element\u2461\u24ea"},{"id":"ref-for-fullscreen-element\u2461\u2460"}],"title":"3. API"},{"refs":[{"id":"ref-for-fullscreen-element\u2461\u2461"},{"id":"ref-for-fullscreen-element\u2461\u2462"}],"title":"5.3. :fullscreen pseudo-class"}],"url":"#fullscreen-element"},
"fullscreen-element-ready-check": {"dfnID":"fullscreen-element-ready-check","dfnText":"fullscreen element ready check","external":false,"refSections":[{"refs":[{"id":"ref-for-fullscreen-element-ready-check"},{"id":"ref-for-fullscreen-element-ready-check\u2460"}],"title":"3. API"}],"url":"#fullscreen-element-ready-check"},
"fullscreen-feature": {"dfnID":"fullscreen-feature","dfnText":"fullscreen","external":false,"refSections":[{"refs":[{"id":"ref-for-fullscreen-feature"},{"id":"ref-for-fullscreen-feature\u2460"}],"title":"3. API"}],"url":"#fullscreen-feature"},
"fullscreen-flag": {"dfnID":"fullscreen-flag","dfnText":"fullscreen flag","external":false,"refSections":[{"refs":[{"id":"ref-for-fullscreen-flag"},{"id":"ref-for-fullscreen-flag\u2460"},{"id":"ref-for-fullscreen-flag\u2461"},{"id":"ref-for-fullscreen-flag\u2462"},{"id":"ref-for-fullscreen-flag\u2463"},{"id":"ref-for-fullscreen-flag\u2464"}],"title":"2. Model"},{"refs":[{"id":"ref-for-fullscreen-flag\u2465"},{"id":"ref-for-fullscreen-flag\u2466"}],"title":"3. API"},{"refs":[{"id":"ref-for-fullscreen-flag\u2467"}],"title":"5.3. :fullscreen pseudo-class"}],"url":"#fullscreen-flag"},
"fullscreen-is-supported": {"dfnID":"fullscreen-is-supported","dfnText":"Fullscreen is supported","external":false,"refSections":[{"refs":[{"id":"ref-for-fullscreen-is-supported"},{"id":"ref-for-fullscreen-is-supported\u2460"},{"id":"ref-for-fullscreen-is-supported\u2461"}],"title":"3. API"}],"url":"#fullscreen-is-supported"},
"fully-exit-fullscreen": {"dfnID":"fully-exit-fullscreen","dfnText":"fully exit fullscreen","external":false,"refSections":[{"refs":[{"id":"ref-for-fully-exit-fullscreen"}],"title":"2. Model"},{"refs":[{"id":"ref-for-fully-exit-fullscreen\u2460"}],"title":"4. UI"}],"url":"#fully-exit-fullscreen"},
"handler-document-onfullscreenchange": {"dfnID":"handler-document-onfullscreenchange","dfnText":"onfullscreenchange","external":false,"refSections":[{"refs":[{"id":"ref-for-handler-document-onfullscreenchange"}],"title":"3. API"}],"url":"#handler-document-onfullscreenchange"},
"handler-document-onfullscreenerror": {"dfnID":"handler-document-onfullscreenerror","dfnText":"onfullscreenerror","external":false,"refSections":[{"refs":[{"id":"ref-for-handler-document-onfullscreenerror"}],"title":"3. API"}],"url":"#handler-document-onfullscreenerror"},
"iframe-fullscreen-flag": {"dfnID":"iframe-fullscreen-flag","dfnText":"iframe fullscreen flag","external":false,"refSections":[{"refs":[{"id":"ref-for-iframe-fullscreen-flag"}],"title":"2. Model"},{"refs":[{"id":"ref-for-iframe-fullscreen-flag\u2460"},{"id":"ref-for-iframe-fullscreen-flag\u2461"}],"title":"3. API"}],"url":"#iframe-fullscreen-flag"},
"list-of-pending-fullscreen-events": {"dfnID":"list-of-pending-fullscreen-events","dfnText":"list of pending fullscreen events","external":false,"refSections":[{"refs":[{"id":"ref-for-list-of-pending-fullscreen-events"},{"id":"ref-for-list-of-pending-fullscreen-events\u2460"}],"title":"2. Model"},{"refs":[{"id":"ref-for-list-of-pending-fullscreen-events\u2461"},{"id":"ref-for-list-of-pending-fullscreen-events\u2462"},{"id":"ref-for-list-of-pending-fullscreen-events\u2463"},{"id":"ref-for-list-of-pending-fullscreen-events\u2464"},{"id":"ref-for-list-of-pending-fullscreen-events\u2465"}],"title":"3. API"}],"url":"#list-of-pending-fullscreen-events"},
"run-the-fullscreen-steps": {"dfnID":"run-the-fullscreen-steps","dfnText":"run the fullscreen steps","external":false,"refSections":[{"refs":[{"id":"ref-for-run-the-fullscreen-steps"},{"id":"ref-for-run-the-fullscreen-steps\u2460"}],"title":"3. API"}],"url":"#run-the-fullscreen-steps"},
"simple-fullscreen-document": {"dfnID":"simple-fullscreen-document","dfnText":"simple fullscreen document","external":false,"refSections":[{"refs":[{"id":"ref-for-simple-fullscreen-document"},{"id":"ref-for-simple-fullscreen-document\u2460"},{"id":"ref-for-simple-fullscreen-document\u2461"}],"title":"3. API"}],"url":"#simple-fullscreen-document"},
"top-layer": {"dfnID":"top-layer","dfnText":"top layer","external":false,"refSections":[{"refs":[{"id":"ref-for-top-layer"},{"id":"ref-for-top-layer\u2460"},{"id":"ref-for-top-layer\u2461"},{"id":"ref-for-top-layer\u2462"},{"id":"ref-for-top-layer\u2463"},{"id":"ref-for-top-layer\u2464"},{"id":"ref-for-top-layer\u2465"},{"id":"ref-for-top-layer\u2466"}],"title":"2. Model"},{"refs":[{"id":"ref-for-top-layer\u2467"},{"id":"ref-for-top-layer\u2468"},{"id":"ref-for-top-layer\u2460\u24ea"}],"title":"3. API"},{"refs":[{"id":"ref-for-top-layer\u2460\u2460"}],"title":"5. Rendering"},{"refs":[{"id":"ref-for-top-layer\u2460\u2461"},{"id":"ref-for-top-layer\u2460\u2462"},{"id":"ref-for-top-layer\u2460\u2463"},{"id":"ref-for-top-layer\u2460\u2464"}],"title":"5.1. New stacking layer"},{"refs":[{"id":"ref-for-top-layer\u2460\u2465"},{"id":"ref-for-top-layer\u2460\u2466"},{"id":"ref-for-top-layer\u2460\u2467"}],"title":"5.2. ::backdrop pseudo-element"}],"url":"#top-layer"},
"top-layer-add": {"dfnID":"top-layer-add","dfnText":"add","external":false,"refSections":[{"refs":[{"id":"ref-for-top-layer-add"}],"title":"2. Model"}],"url":"#top-layer-add"},
"unfullscreen-a-document": {"dfnID":"unfullscreen-a-document","dfnText":"unfullscreen a document","external":false,"refSections":[{"refs":[{"id":"ref-for-unfullscreen-a-document"},{"id":"ref-for-unfullscreen-a-document\u2460"},{"id":"ref-for-unfullscreen-a-document\u2461"}],"title":"3. API"}],"url":"#unfullscreen-a-document"},
"unfullscreen-an-element": {"dfnID":"unfullscreen-an-element","dfnText":"unfullscreen an element","external":false,"refSections":[{"refs":[{"id":"ref-for-unfullscreen-an-element"},{"id":"ref-for-unfullscreen-an-element\u2460"},{"id":"ref-for-unfullscreen-an-element\u2461"}],"title":"2. Model"},{"refs":[{"id":"ref-for-unfullscreen-an-element\u2462"},{"id":"ref-for-unfullscreen-an-element\u2463"}],"title":"3. API"}],"url":"#unfullscreen-an-element"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#collect-documents-to-unfullscreen": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"collect documents to unfullscreen","type":"dfn","url":"#collect-documents-to-unfullscreen"},
"#css-pe-backdrop": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"::backdrop","type":"selector","url":"#css-pe-backdrop"},
"#descendant-browsing-context": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"descendant browsing context","type":"dfn","url":"#descendant-browsing-context"},
"#dictdef-fullscreenoptions": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"FullscreenOptions","type":"dictionary","url":"#dictdef-fullscreenoptions"},
"#dom-document-exitfullscreen": {"export":true,"for_":["Document"],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"exitFullscreen()","type":"method","url":"#dom-document-exitfullscreen"},
"#dom-document-fullscreen": {"export":true,"for_":["Document"],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreen","type":"attribute","url":"#dom-document-fullscreen"},
"#dom-document-fullscreenelement": {"export":true,"for_":["DocumentOrShadowRoot"],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreenElement","type":"attribute","url":"#dom-document-fullscreenelement"},
"#dom-document-fullscreenenabled": {"export":true,"for_":["Document"],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreenEnabled","type":"attribute","url":"#dom-document-fullscreenenabled"},
"#dom-element-requestfullscreen": {"export":true,"for_":["Element"],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"requestFullscreen(options)","type":"method","url":"#dom-element-requestfullscreen"},
"#enumdef-fullscreennavigationui": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"FullscreenNavigationUI","type":"enum","url":"#enumdef-fullscreennavigationui"},
"#exit-fullscreen": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"exit fullscreen","type":"dfn","url":"#exit-fullscreen"},
"#fullscreen-an-element": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreen an element","type":"dfn","url":"#fullscreen-an-element"},
"#fullscreen-element": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreen element","type":"dfn","url":"#fullscreen-element"},
"#fullscreen-element-ready-check": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreen element ready check","type":"dfn","url":"#fullscreen-element-ready-check"},
"#fullscreen-feature": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreen-feature","type":"dfn","url":"#fullscreen-feature"},
"#fullscreen-flag": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreen flag","type":"dfn","url":"#fullscreen-flag"},
"#fullscreen-is-supported": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fullscreen is supported","type":"dfn","url":"#fullscreen-is-supported"},
"#fully-exit-fullscreen": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"fully exit fullscreen","type":"dfn","url":"#fully-exit-fullscreen"},
"#handler-document-onfullscreenchange": {"export":true,"for_":["Document"],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"onfullscreenchange","type":"attribute","url":"#handler-document-onfullscreenchange"},
"#handler-document-onfullscreenerror": {"export":true,"for_":["Document"],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"onfullscreenerror","type":"attribute","url":"#handler-document-onfullscreenerror"},
"#iframe-fullscreen-flag": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"iframe fullscreen flag","type":"dfn","url":"#iframe-fullscreen-flag"},
"#list-of-pending-fullscreen-events": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"list of pending fullscreen events","type":"dfn","url":"#list-of-pending-fullscreen-events"},
"#run-the-fullscreen-steps": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"run the fullscreen steps","type":"dfn","url":"#run-the-fullscreen-steps"},
"#simple-fullscreen-document": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"simple fullscreen document","type":"dfn","url":"#simple-fullscreen-document"},
"#top-layer": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"top layer","type":"dfn","url":"#top-layer"},
"#top-layer-add": {"export":true,"for_":["top layer"],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"add","type":"dfn","url":"#top-layer-add"},
"#unfullscreen-a-document": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"unfullscreen a document","type":"dfn","url":"#unfullscreen-a-document"},
"#unfullscreen-an-element": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"local","text":"unfullscreen an element","type":"dfn","url":"#unfullscreen-an-element"},
"https://dom.spec.whatwg.org/#concept-document": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"document","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-document"},
"https://dom.spec.whatwg.org/#concept-documentfragment-host": {"export":true,"for_":["DocumentFragment"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"host","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-documentfragment-host"},
"https://dom.spec.whatwg.org/#concept-element": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"element","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element"},
"https://dom.spec.whatwg.org/#concept-element-namespace": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"namespace","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element-namespace"},
"https://dom.spec.whatwg.org/#concept-event-fire": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"fire an event","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-event-fire"},
"https://dom.spec.whatwg.org/#concept-node-document": {"export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"node document","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-document"},
"https://dom.spec.whatwg.org/#concept-node-remove-ext": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"removing steps","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-remove-ext"},
"https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-ancestor": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow-including inclusive ancestor","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-ancestor"},
"https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow-including inclusive descendant","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant"},
"https://dom.spec.whatwg.org/#concept-shadow-including-tree-order": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow-including tree order","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-shadow-including-tree-order"},
"https://dom.spec.whatwg.org/#concept-shadow-root": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow root","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-shadow-root"},
"https://dom.spec.whatwg.org/#concept-tree": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"tree","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-tree"},
"https://dom.spec.whatwg.org/#concept-tree-ancestor": {"export":true,"for_":["tree"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"ancestor","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-tree-ancestor"},
"https://dom.spec.whatwg.org/#concept-tree-order": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"tree order","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-tree-order"},
"https://dom.spec.whatwg.org/#concept-tree-root": {"export":true,"for_":["tree"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"root","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-tree-root"},
"https://dom.spec.whatwg.org/#connected": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"connected","type":"dfn","url":"https://dom.spec.whatwg.org/#connected"},
"https://dom.spec.whatwg.org/#document": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#documentorshadowroot": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"DocumentOrShadowRoot","type":"interface","url":"https://dom.spec.whatwg.org/#documentorshadowroot"},
"https://dom.spec.whatwg.org/#dom-event-bubbles": {"export":true,"for_":["Event"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"bubbles","type":"attribute","url":"https://dom.spec.whatwg.org/#dom-event-bubbles"},
"https://dom.spec.whatwg.org/#dom-event-composed": {"export":true,"for_":["Event"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"composed","type":"attribute","url":"https://dom.spec.whatwg.org/#dom-event-composed"},
"https://dom.spec.whatwg.org/#element": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://dom.spec.whatwg.org/#element-shadow-host": {"export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow host","type":"dfn","url":"https://dom.spec.whatwg.org/#element-shadow-host"},
"https://dom.spec.whatwg.org/#retarget": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"retargeting","type":"dfn","url":"https://dom.spec.whatwg.org/#retarget"},
"https://dom.spec.whatwg.org/#shadowroot": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"ShadowRoot","type":"interface","url":"https://dom.spec.whatwg.org/#shadowroot"},
"https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"unloading document cleanup steps","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": {"export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"fully active","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document": {"export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"active document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"top-level browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context"},
"https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy": {"export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"permissions policy","type":"dfn","url":"https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"allowed to use","type":"dfn","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow": {"export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"allow","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen": {"export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"allowfullscreen","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"iframe","type":"element","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"in parallel","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"transient activation","type":"dfn","url":"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation"},
"https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"dialog","type":"element","url":"https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"event handler content attribute","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"event handler event type","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"event handler idl attribute","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"event handler","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"event loop","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"},
"https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"EventHandler","type":"typedef","url":"https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"},
"https://infra.spec.whatwg.org/#html-namespace": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"html namespace","type":"dfn","url":"https://infra.spec.whatwg.org/#html-namespace"},
"https://infra.spec.whatwg.org/#iteration-break": {"export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"break","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-break"},
"https://infra.spec.whatwg.org/#iteration-continue": {"export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"continue","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-continue"},
"https://infra.spec.whatwg.org/#iteration-while": {"export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"while","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-while"},
"https://infra.spec.whatwg.org/#list-contain": {"export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"contain","type":"dfn","url":"https://infra.spec.whatwg.org/#list-contain"},
"https://infra.spec.whatwg.org/#list-empty": {"export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"empty","type":"dfn","url":"https://infra.spec.whatwg.org/#list-empty"},
"https://infra.spec.whatwg.org/#list-iterate": {"export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#list-iterate"},
"https://infra.spec.whatwg.org/#list-remove": {"export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"remove","type":"dfn","url":"https://infra.spec.whatwg.org/#list-remove"},
"https://infra.spec.whatwg.org/#ordered-set": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ordered set","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-set"},
"https://infra.spec.whatwg.org/#set-append": {"export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#set-append"},
"https://infra.spec.whatwg.org/#string": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"string","type":"dfn","url":"https://infra.spec.whatwg.org/#string"},
"https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change": {"export":true,"for_":[],"level":"","normative":true,"shortname":"fullscreen","spec":"","status":"anchor-block","text":"triggered by a user generated orientation change","type":"dfn","url":"https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change"},
"https://w3c.github.io/webappsec-permissions-policy/#container-policy": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"current","text":"container policy","type":"dfn","url":"https://w3c.github.io/webappsec-permissions-policy/#container-policy"},
"https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"current","text":"permissions-policy","type":"http-header","url":"https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header"},
"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"current","text":"policy-controlled feature","type":"dfn","url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature"},
"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist": {"export":true,"for_":["policy-controlled feature"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"current","text":"default allowlist","type":"dfn","url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist"},
"https://webidl.spec.whatwg.org/#LegacyLenientSetter": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"LegacyLenientSetter","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#LegacyLenientSetter"},
"https://webidl.spec.whatwg.org/#Unscopable": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Unscopable","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Unscopable"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-promise": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Promise","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-promise"},
"https://webidl.spec.whatwg.org/#idl-undefined": {"export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"undefined","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-undefined"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.text != linkText) {
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.text)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>