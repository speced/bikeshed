<!doctype html><html lang="en">
 <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="#3c790a" name="theme-color">
  <title>Fullscreen API Standard</title>
  <link crossorigin href="https://resources.whatwg.org/spec.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/standard.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/standard-shared-with-dev.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/logo-fullscreen.svg" rel="icon">
<script async crossorigin src="https://resources.whatwg.org/file-issue.js"></script>
<script async crossorigin src="https://resources.whatwg.org/commit-snapshot-shortcut-key.js"></script>
<script crossorigin defer src="https://resources.whatwg.org/standard-mdn-annos.js"></script>
<style>/* style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-var-click-highlighting */
var { cursor: pointer; }
var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
</style>
 <body class="h-entry status-LS">
  <div class="head">
    <a class="logo" href="https://whatwg.org/"> <img alt="WHATWG" crossorigin height="100" src="https://resources.whatwg.org/logo-fullscreen.svg"> </a> 
   <hgroup>
    <h1 class="p-name no-ref" id="title">Fullscreen API</h1>
    <p id="subtitle">Living Standard — Last Updated <time class="dt-updated" datetime="1970-01-01">1 January 1970</time> </p>
   </hgroup>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Participate:
     <dd><a href="https://github.com/whatwg/fullscreen">GitHub whatwg/fullscreen</a> (<a href="https://github.com/whatwg/fullscreen/issues/new">new issue</a>, <a href="https://github.com/whatwg/fullscreen/issues">open issues</a>)
     <dd><a href="https://whatwg.org/chat">Chat on Matrix</a>
     <dt>Commits:
     <dd><a href="https://github.com/whatwg/fullscreen/commits">GitHub whatwg/fullscreen/commits</a>
     <dd><a href="/commit-snapshots/[COMMIT-SHA]/" id="commit-snapshot-link">Snapshot as of this commit</a>
     <dd><a href="https://twitter.com/fullscreenapi">@fullscreenapi</a>
     <dt>Tests:
     <dd><a href="https://github.com/web-platform-tests/wpt/tree/master/fullscreen">web-platform-tests fullscreen/</a> (<a href="https://github.com/web-platform-tests/wpt/labels/fullscreen">ongoing work</a>)
     <dt>Translations <small>(non-normative)</small>:
     <dd><span title="Japanese"><a href="https://triple-underscore.github.io/fullscreen-ja.html" hreflang="ja" lang="ja" rel="alternate">日本語</a></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The Fullscreen API standard defines an API for elements to display themselves fullscreen.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#terminology"><span class="secno">1</span> <span class="content">Terminology</span></a>
    <li><a href="#model"><span class="secno">2</span> <span class="content">Model</span></a>
    <li><a href="#api"><span class="secno">3</span> <span class="content">API</span></a>
    <li><a href="#ui"><span class="secno">4</span> <span class="content">UI</span></a>
    <li>
     <a href="#rendering"><span class="secno">5</span> <span class="content">Rendering</span></a>
     <ol class="toc">
      <li><a href="#new-stacking-layer"><span class="secno">5.1</span> <span class="content">New stacking layer</span></a>
      <li><a href="#::backdrop-pseudo-element"><span class="secno">5.2</span> <span class="content"><code>::backdrop</code> pseudo-element</span></a>
      <li><a href="#:fullscreen-pseudo-class"><span class="secno">5.3</span> <span class="content"><code>:fullscreen</code> pseudo-class</span></a>
      <li><a href="#user-agent-level-style-sheet-defaults"><span class="secno">5.4</span> <span class="content">User-agent level style sheet defaults</span></a>
     </ol>
    <li><a href="#permissions-policy-integration"><span class="secno">6</span> <span class="content">Permissions Policy
Integration</span></a>
    <li><a href="#security-and-privacy-considerations"><span class="secno">7</span> <span class="content">Security and Privacy Considerations</span></a>
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">Acknowledgments</span></a>
    <li><a href="#ipr"><span class="secno"></span> <span class="content">Intellectual property rights</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="terminology"><span class="secno">1. </span><span class="content">Terminology</span><a class="self-link" href="#terminology"></a></h2>
   <p>This specification depends on the Infra Standard. <a data-link-type="biblio" href="#biblio-infra" title="Infra Standard">[INFRA]</a> </p>
   <p>Most terminology used in this specification is from CSS, DOM, HTML, and Web IDL. <a data-link-type="biblio" href="#biblio-css" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS]</a> <a data-link-type="biblio" href="#biblio-dom" title="DOM Standard">[DOM]</a> <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> <a data-link-type="biblio" href="#biblio-webidl" title="Web IDL Standard">[WEBIDL]</a> </p>
   <p>A <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context">browsing context</a> <var>A</var> is called a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="descendant-browsing-context">descendant browsing context</dfn> of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context①">browsing context</a> <var>B</var> if and only if <var>B</var> is an <a data-link-type="dfn">ancestor browsing context</a> of <var>A</var>. </p>
   <h2 class="heading settled" data-level="2" id="model"><span class="secno">2. </span><span class="content">Model</span><a class="self-link" href="#model"></a></h2>
   <p>All <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element">elements</a> have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-flag">fullscreen flag</dfn>. Unless stated otherwise it is
unset. </p>
   <p>All <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code> <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element①">elements</a> have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iframe-fullscreen-flag">iframe fullscreen flag</dfn>. Unless
stated otherwise it is unset. </p>
   <p>All <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">documents</a> have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="fullscreen-element">fullscreen element</dfn>. The <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element">fullscreen element</a> is the topmost <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element②">element</a> in the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①">document</a>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer">top layer</a> whose <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag">fullscreen flag</a> is set, if any, and null otherwise. </p>
   <p>All <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document②">documents</a> have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="list-of-pending-fullscreen-events">list of pending fullscreen events</dfn>, which
is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">ordered set</a> of (<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a>, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element③">element</a>) <a data-link-type="dfn">pairs</a>. It is initially empty. </p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-an-element">fullscreen an <var>element</var></dfn>, set <var>element</var>’s <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag①">fullscreen flag</a> and <a data-link-type="dfn" href="#top-layer-add" id="ref-for-top-layer-add">add</a> it to its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①">top layer</a>. </p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unfullscreen-an-element">unfullscreen an <var>element</var></dfn>, unset <var>element</var>’s <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag②">fullscreen flag</a> and <a data-link-type="dfn" href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag">iframe fullscreen flag</a> (if any), and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">remove</a> it from
its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node document</a>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer②">top layer</a>. </p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unfullscreen-a-document">unfullscreen a <var>document</var></dfn>, <a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element">unfullscreen</a> all <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element④">elements</a>, within <var>document</var>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer③">top layer</a>, whose <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag③">fullscreen flag</a> is set. </p>
   <hr>
   <div class="algorithm" data-algorithm="fully exit fullscreen">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fully-exit-fullscreen">fully exit fullscreen</dfn> a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document③">document</a> <var>document</var>, run these steps: </p>
    <ol>
     <li>
      <p>If <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①">fullscreen element</a> is null, terminate these steps. </p>
     <li>
      <p><a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element①">Unfullscreen elements</a> whose <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag④">fullscreen flag</a> is
 set, within <var>document</var>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer④">top layer</a>, except for <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②">fullscreen element</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen">Exit fullscreen</a> <var>document</var>. </p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="fullscreen removing steps">
    <p id="removing-steps">Whenever the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-remove-ext" id="ref-for-concept-node-remove-ext">removing steps</a> run with a <var>removedNode</var>, run
these steps: </p>
    <ol>
     <li>
      <p>Let <var>document</var> be <var>removedNode</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document②">node document</a>. </p>
     <li>
      <p>Let <var>nodes</var> be <var>removedNode</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant" id="ref-for-concept-shadow-including-inclusive-descendant">shadow-including inclusive descendants</a> that have their <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑤">fullscreen flag</a> set, in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-tree-order" id="ref-for-concept-shadow-including-tree-order">shadow-including tree order</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>node</var> in <var>nodes</var>: </p>
      <ol>
       <li>
        <p>If <var>node</var> is <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element③">fullscreen element</a>, <a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen①">exit fullscreen</a> <var>document</var>. </p>
       <li>
        <p>Otherwise, <a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element②">unfullscreen <var>node</var></a>. </p>
       <li>
        <p>If <var>document</var>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑤">top layer</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> <var>node</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove①">remove</a> <var>node</var> from <var>document</var>’s <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑥">top layer</a>. </p>
        <p class="note" role="note">Other specifications can add and remove elements from <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑦">top layer</a>, so <var>node</var> might not be <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element④">fullscreen element</a>. For example, <var>node</var> could be an open <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element">dialog</a></code> element. </p>
      </ol>
    </ol>
   </div>
   <p>Whenever the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps" id="ref-for-unloading-document-cleanup-steps">unloading document cleanup steps</a> run with a <var>document</var>, <a data-link-type="dfn" href="#fully-exit-fullscreen" id="ref-for-fully-exit-fullscreen">fully exit fullscreen</a> <var>document</var>. </p>
   <hr>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-is-supported">Fullscreen is supported</dfn> if there is no previously-established user preference,
security risk, or platform limitation. </p>
   <hr>
   <div class="algorithm" data-algorithm="run the fullscreen steps">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="run-the-fullscreen-steps">run the fullscreen steps</dfn> for a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document④">document</a> <var>document</var>, run these
steps: </p>
    <ol>
     <li>
      <p>Let <var>pairs</var> be <var>document</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events">list of pending fullscreen events</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">Empty</a> <var>document</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events①">list of pending fullscreen events</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> (<var>type</var>, <var>element</var>) in <var>pairs</var>: </p>
      <ol>
       <li>
        <p>Let <var>target</var> be <var>element</var> if <var>element</var> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected">connected</a> and its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document③">node document</a> is <var>document</var>, and otherwise let <var>target</var> be <var>document</var>. </p>
       <li>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">Fire an event</a> named <var>type</var>, with its <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles" id="ref-for-dom-event-bubbles">bubbles</a></code> and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-composed" id="ref-for-dom-event-composed">composed</a></code> attributes set to true, at <var>target</var>. </p>
      </ol>
    </ol>
    <p class="note" role="note">These steps integrate with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" id="ref-for-event-loop">event loop</a> defined in HTML. <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> </p>
   </div>
   <h2 class="heading settled" data-level="3" id="api"><span class="secno">3. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-fullscreennavigationui"><code><c- g>FullscreenNavigationUI</c-></code></dfn> {
  <dfn class="idl-code" data-dfn-for="FullscreenNavigationUI" data-dfn-type="enum-value" data-export id="dom-fullscreennavigationui-auto"><code><c- s>"auto"</c-></code><a class="self-link" href="#dom-fullscreennavigationui-auto"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="FullscreenNavigationUI" data-dfn-type="enum-value" data-export id="dom-fullscreennavigationui-show"><code><c- s>"show"</c-></code><a class="self-link" href="#dom-fullscreennavigationui-show"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="FullscreenNavigationUI" data-dfn-type="enum-value" data-export id="dom-fullscreennavigationui-hide"><code><c- s>"hide"</c-></code><a class="self-link" href="#dom-fullscreennavigationui-hide"></a></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fullscreenoptions"><code><c- g>FullscreenOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="#enumdef-fullscreennavigationui" id="ref-for-enumdef-fullscreennavigationui"><c- n>FullscreenNavigationUI</c-></a> <dfn class="idl-code" data-default="&quot;auto&quot;" data-dfn-for="FullscreenOptions" data-dfn-type="dict-member" data-export data-type="FullscreenNavigationUI " id="dom-fullscreenoptions-navigationui"><code><c- g>navigationUI</c-></code><a class="self-link" href="#dom-fullscreenoptions-navigationui"></a></dfn> = "auto";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element"><c- g>Element</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen"><c- g>requestFullscreen</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-fullscreenoptions" id="ref-for-dictdef-fullscreenoptions"><c- n>FullscreenOptions</c-></a> <dfn class="idl-code" data-dfn-for="Element/requestFullscreen(options), Element/requestFullscreen()" data-dfn-type="argument" data-export id="dom-element-requestfullscreen-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-element-requestfullscreen-options-options"></a></dfn> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <dfn class="idl-code" data-dfn-for="Element" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-element-onfullscreenchange"><code><c- g>onfullscreenchange</c-></code><a class="self-link" href="#dom-element-onfullscreenchange"></a></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <dfn class="idl-code" data-dfn-for="Element" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-element-onfullscreenerror"><code><c- g>onfullscreenerror</c-></code><a class="self-link" href="#dom-element-onfullscreenerror"></a></dfn>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document"><c- g>Document</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreenenabled" id="ref-for-dom-document-fullscreenenabled"><c- g>fullscreenEnabled</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter①"><c- g>LegacyLenientSetter</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Unscopable" id="ref-for-Unscopable"><c- g>Unscopable</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreen" id="ref-for-dom-document-fullscreen"><c- g>fullscreen</c-></a>; // historical

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen"><c- g>exitFullscreen</c-></a>();

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange" id="ref-for-handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror" id="ref-for-handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot" id="ref-for-documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter②"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element?" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement"><c- g>fullscreenElement</c-></a>;
};
</pre>
   <dl class="domintro">
    <dt><code><var>promise</var> = <var>element</var> . <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen①">requestFullscreen([<var>options</var>])</a></code> 
    <dd>
      Displays <var>element</var> fullscreen and resolves <var>promise</var> when done. 
     <p>When supplied, <var>options</var>’s <code>navigationUI</code> member indicates whether showing
  navigation UI while in fullscreen is preferred or not. If set to "<code>show</code>", navigation
  simplicity is preferred over screen space, and if set to "<code>hide</code>", more screen space
  is preferred. User agents are always free to honor user preference over the application’s. The
  default value "<code>auto</code>" indicates no application preference.</p>
    <dt><code><var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenenabled" id="ref-for-dom-document-fullscreenenabled①">fullscreenEnabled</a></code></code> 
    <dd>
     <p>Returns true if <var>document</var> has the ability to display <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑤">elements</a> fullscreen
 and <a data-link-type="dfn" href="#fullscreen-is-supported" id="ref-for-fullscreen-is-supported">fullscreen is supported</a>, or false otherwise. </p>
    <dt><code><var>promise</var> = <var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen①">exitFullscreen()</a></code></code> 
    <dd>
     <p>Stops <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑤">fullscreen element</a> from being displayed fullscreen and
 resolves <var>promise</var> when done. </p>
    <dt><code><var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement①">fullscreenElement</a></code></code> 
    <dd>
     <p>Returns <var>document</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑥">fullscreen element</a>. </p>
    <dt><code><var>shadowroot</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement②">fullscreenElement</a></code></code> 
    <dd>
     <p>Returns <var>shadowroot</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑦">fullscreen element</a>. </p>
   </dl>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-element-ready-check">fullscreen element ready check</dfn> for an <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑥">element</a> <var>element</var> returns true
if all of the following are true, and false otherwise: </p>
   <ul>
    <li>
     <p><var>element</var> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected①">connected</a>. </p>
    <li>
     <p><var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document④">node document</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use">allowed to use</a> the "<code><a data-link-type="dfn" href="#fullscreen-feature" id="ref-for-fullscreen-feature">fullscreen</a></code>" feature. </p>
   </ul>
   <div class="algorithm" data-algorithm="requestFullscreen(options)" data-algorithm-for="Element">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export data-lt="requestFullscreen(options)|requestFullscreen()" id="dom-element-requestfullscreen"><code>requestFullscreen(<var>options</var>)</code></dfn> method,
when invoked, must run these steps: </p>
    <ol>
     <li>
      <p>Let <var>pending</var> be the <a data-link-type="dfn">context object</a>. </p>
     <li>
      <p>Let <var>pendingDoc</var> be <var>pending</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑤">node document</a>. </p>
     <li>
      <p>Let <var>promise</var> be a new promise. </p>
     <li>
      <p>If <var>pendingDoc</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active">fully active</a>, then reject <var>promise</var> with a <code>TypeError</code> exception and return <var>promise</var>. </p>
     <li>
      <p>Let <var>error</var> be false. </p>
     <li>
      <p>If any of the following conditions are false, then set <var>error</var> to true: </p>
      <ul>
       <li>
        <p><var>pending</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-namespace" id="ref-for-concept-element-namespace">namespace</a> is the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace">HTML namespace</a> or <var>pending</var> is an <a href="https://www.w3.org/TR/SVG11/struct.html#SVGElement">SVG <code>svg</code></a> or <a href="https://www.w3.org/Math/draft-spec/chapter2.html#interf.toplevel">MathML <code>math</code></a> element. <a data-link-type="biblio" href="#biblio-svg" title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG]</a> <a data-link-type="biblio" href="#biblio-mathml" title="Mathematical Markup Language (MathML) 1.01 Specification">[MATHML]</a> </p>
       <li>
        <p><var>pending</var> is not a <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element①">dialog</a></code> element. </p>
       <li>
        <p>The <a data-link-type="dfn" href="#fullscreen-element-ready-check" id="ref-for-fullscreen-element-ready-check">fullscreen element ready check</a> for <var>pending</var> returns true. </p>
       <li>
        <p><a data-link-type="dfn" href="#fullscreen-is-supported" id="ref-for-fullscreen-is-supported①">Fullscreen is supported</a>. </p>
       <li>
        <p><var>pending</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a> has <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation">transient activation</a> or the
   algorithm is <a data-link-type="dfn" href="https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change" id="ref-for-dfn-triggered-by-a-user-generated-orientation-change">triggered by a user generated orientation change</a>. </p>
      </ul>
     <li>
      <p>Return <var>promise</var>, and run the remaining steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>. </p>
     <li>
      <p>If <var>error</var> is false, then resize <var>pendingDoc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context">top-level browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document">active document</a>’s viewport’s dimensions, optionally
  taking into account <var>options</var>’s <code>navigationUI</code> member: </p>
      <table>
       <thead>
        <tr>
         <th>value
         <th>viewport dimensions
       <tbody>
        <tr>
         <td>"<code>hide</code>"
         <td>full dimensions of the screen of the output device
        <tr>
         <td>"<code>show</code>"
         <td>dimensions of the screen of the output device clamped to allow the user agent to show page navigation controls
        <tr>
         <td>"<code>auto</code>"
         <td>user-agent defined, but matching one of the above
      </table>
      <p>Optionally display a message how the end user can revert this. </p>
     <li>
      <p>If any of the following conditions are false, then set <var>error</var> to true: </p>
      <ul>
       <li>
        <p><var>pending</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑥">node document</a> is <var>pendingDoc</var>. </p>
       <li>
        <p>The <a data-link-type="dfn" href="#fullscreen-element-ready-check" id="ref-for-fullscreen-element-ready-check①">fullscreen element ready check</a> for <var>pending</var> returns true. </p>
      </ul>
     <li>
      <p>If <var>error</var> is true: </p>
      <ol>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> (<code>fullscreenerror</code>, <var>pending</var>) to <var>pendingDoc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events②">list of pending fullscreen events</a>. </p>
       <li>
        <p>Reject <var>promise</var> with a <code>TypeError</code> exception and terminate these
   steps. </p>
      </ol>
     <li>
      <p>Let <var>fullscreenElements</var> be an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">ordered set</a> initially consisting of <var>pending</var>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while" id="ref-for-iteration-while">While</a> the last element in <var>fullscreenElements</var> is in a <a data-link-type="dfn">nested browsing context</a>: <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append①">append</a> its <a data-link-type="dfn">browsing context container</a> to <var>fullscreenElements</var>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>element</var> in <var>fullscreenElements</var>: </p>
      <ol>
       <li>
        <p>Let <var>doc</var> be <var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑦">node document</a>. </p>
       <li>
        <p>If <var>element</var> is <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑧">fullscreen element</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>. </p>
        <p class="note" role="note">No need to notify observers when nothing has changed. </p>
       <li>
        <p>If <var>element</var> is <var>pending</var> and <var>pending</var> is an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code> <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑦">element</a>, then set <var>element</var>’s <a data-link-type="dfn" href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag①">iframe fullscreen flag</a>. </p>
       <li>
        <p><a data-link-type="dfn" href="#fullscreen-an-element" id="ref-for-fullscreen-an-element">Fullscreen <var>element</var></a> within <var>doc</var>. </p>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append②">Append</a> (<code>fullscreenchange</code>, <var>element</var>) to <var>doc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events③">list of pending fullscreen events</a>. </p>
      </ol>
      <p class="note" role="note">The order in which elements are <a data-link-type="dfn" href="#fullscreen-an-element" id="ref-for-fullscreen-an-element①">fullscreened</a> is not observable, because <a data-link-type="dfn" href="#run-the-fullscreen-steps" id="ref-for-run-the-fullscreen-steps">run the fullscreen steps</a> is invoked in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order" id="ref-for-concept-tree-order">tree order</a>. </p>
     <li>
      <p>Resolve <var>promise</var> with undefined. </p>
    </ol>
    <p class="note" role="note">Implementations with out-of-process <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context②">browsing contexts</a> are left as an
exercise to the reader. Input welcome on potential improvements. </p>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="dom-document-fullscreenenabled"><code>fullscreenEnabled</code></dfn> attribute’s getter must
return true if the <a data-link-type="dfn">context object</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use①">allowed to use</a> the "<code><a data-link-type="dfn" href="#fullscreen-feature" id="ref-for-fullscreen-feature①">fullscreen</a></code>" feature and <a data-link-type="dfn" href="#fullscreen-is-supported" id="ref-for-fullscreen-is-supported②">fullscreen is supported</a>, and
false otherwise. </p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="dom-document-fullscreen"><code>fullscreen</code></dfn> attribute’s getter must return
false if <a data-link-type="dfn">context object</a>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element⑨">fullscreen element</a> is null, and true otherwise. </p>
   <p class="note" role="note">Use the <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement③">fullscreenElement</a></code> attribute instead. </p>
   <div class="algorithm" data-algorithm="fullscreenElement" data-algorithm-for="DocumentOrShadowRoot">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="DocumentOrShadowRoot" data-dfn-type="attribute" data-export id="dom-document-fullscreenelement"><code>fullscreenElement</code></dfn> attribute’s getter must run these steps: </p>
    <ol>
     <li>
      <p>If the <a data-link-type="dfn">context object</a> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-root" id="ref-for-concept-shadow-root">shadow root</a> and its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-documentfragment-host" id="ref-for-concept-documentfragment-host">host</a> is not <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected②">connected</a>, then return null.</p>
     <li>
      <p>Let <var>candidate</var> be the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#retarget" id="ref-for-retarget">retargeting</a> <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⓪">fullscreen element</a> against the <a data-link-type="dfn">context object</a>. </p>
     <li>
      <p>If <var>candidate</var> and the <a data-link-type="dfn">context object</a> are in the same <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree" id="ref-for-concept-tree">tree</a>, then
 return <var>candidate</var>. </p>
     <li>
      <p>Return null. </p>
    </ol>
   </div>
   <p>A <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑤">document</a> is said to be a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="simple-fullscreen-document">simple fullscreen document</dfn> if there is exactly one <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑧">element</a> in its <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑧">top layer</a> that has its <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑥">fullscreen flag</a> set. </p>
   <p class="note" role="note">A <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑥">document</a> with two <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑨">elements</a> in its <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer⑨">top layer</a> can be a <a data-link-type="dfn" href="#simple-fullscreen-document" id="ref-for-simple-fullscreen-document">simple fullscreen document</a>. For example, in addition to the <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①①">fullscreen element</a> there
could be an open <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element②">dialog</a></code> element. </p>
   <div class="algorithm" data-algorithm="collect documents to unfullscreen">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="collect-documents-to-unfullscreen">collect documents to unfullscreen</dfn> given <var>doc</var>, run these steps: </p>
    <ol>
     <li>
      <p>Let <var>docs</var> be an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">ordered set</a> consisting of <var>doc</var>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while" id="ref-for-iteration-while①">While</a> true: </p>
      <ol>
       <li>
        <p>Let <var>lastDoc</var> be <var>docs</var>’s last <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑦">document</a>. </p>
       <li>
        <p>Assert: <var>lastDoc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①②">fullscreen element</a> is not null. </p>
       <li>
        <p>If <var>lastDoc</var> is not a <a data-link-type="dfn" href="#simple-fullscreen-document" id="ref-for-simple-fullscreen-document①">simple fullscreen document</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break">break</a>. </p>
       <li>
        <p>Let <var>container</var> be <var>lastDoc</var>’s <a data-link-type="dfn">browsing context container</a>, if
   any, and otherwise <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break①">break</a>. </p>
       <li>
        <p>If <var>container</var>’s <a data-link-type="dfn" href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag②">iframe fullscreen flag</a> is set, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break②">break</a>. </p>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append③">Append</a> <var>container</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑧">node document</a> to <var>docs</var>. </p>
      </ol>
     <li>
      <p>Return <var>docs</var>. </p>
      <p class="note" role="note">This is the set of documents for which the <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①③">fullscreen element</a> will be <a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element③">unfullscreened</a>, but the last document in <var>docs</var> might
 have more than one <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element①⓪">element</a> in its <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⓪">top layer</a> with the <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑦">fullscreen flag</a> set,
 in which case that document will still remain in fullscreen. </p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="exit fullscreen">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="exit-fullscreen">exit fullscreen</dfn> a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑧">document</a> <var>doc</var>, run these steps: </p>
    <ol>
     <li>
      <p>Let <var>promise</var> be a new promise. </p>
     <li>
      <p>If <var>doc</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①">fully active</a> or <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①④">fullscreen element</a> is null, then reject <var>promise</var> with a <code>TypeError</code> exception and return <var>promise</var>. </p>
     <li>
      <p>Let <var>resize</var> be false. </p>
     <li>
      <p>Let <var>docs</var> be the result of <a data-link-type="dfn" href="#collect-documents-to-unfullscreen" id="ref-for-collect-documents-to-unfullscreen">collecting documents to unfullscreen</a> given <var>doc</var>. </p>
     <li>
      <p>Let <var>topLevelDoc</var> be <var>doc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①">top-level browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document①">active document</a>. </p>
     <li>
      <p>If <var>topLevelDoc</var> is in <var>docs</var>, and it is a <a data-link-type="dfn" href="#simple-fullscreen-document" id="ref-for-simple-fullscreen-document②">simple fullscreen document</a>, then set <var>doc</var> to <var>topLevelDoc</var> and <var>resize</var> to true. </p>
     <li>
      <p>If <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑤">fullscreen element</a> is not <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected③">connected</a>: </p>
      <ol>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append④">Append</a> (<code>fullscreenchange</code>, <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑥">fullscreen element</a>) to <var>doc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events④">list of pending fullscreen events</a>. </p>
      </ol>
     <li>
      <p>Return <var>promise</var>, and run the remaining steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>. </p>
     <li>
      <p>If <var>resize</var> is true, resize <var>doc</var>’s viewport to its "normal" dimensions. </p>
     <li>
      <p>If <var>doc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑦">fullscreen element</a> is null, then resolve <var>promise</var> with
 undefined and terminate these steps. </p>
     <li>
      <p>Let <var>exitDocs</var> be the result of <a data-link-type="dfn" href="#collect-documents-to-unfullscreen" id="ref-for-collect-documents-to-unfullscreen①">collecting documents to unfullscreen</a> given <var>doc</var>. </p>
     <li>
      <p>Let <var>descendantDocs</var> be an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">ordered set</a> consisting of <var>doc</var>’s <a data-link-type="dfn" href="#descendant-browsing-context" id="ref-for-descendant-browsing-context">descendant browsing contexts</a>' <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document②">active documents</a> whose <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑧">fullscreen element</a> is
 non-null, if any, in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order" id="ref-for-concept-tree-order①">tree order</a>. </p>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> <var>exitDoc</var> in <var>exitDocs</var>: </p>
      <ol>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append⑤">Append</a> (<code>fullscreenchange</code>, <var>exitDoc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①⑨">fullscreen element</a>) to <var>exitDoc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events⑤">list of pending fullscreen events</a>. </p>
       <li>
        <p>If <var>resize</var> is true, <a data-link-type="dfn" href="#unfullscreen-a-document" id="ref-for-unfullscreen-a-document">unfullscreen <var>exitDoc</var></a>. </p>
       <li>
        <p>Otherwise, <a data-link-type="dfn" href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element④">unfullscreen</a> <var>exitDoc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②⓪">fullscreen element</a>. </p>
      </ol>
     <li>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate④">For each</a> <var>descendantDoc</var> in <var>descendantDocs</var>: </p>
      <ol>
       <li>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append⑥">Append</a> (<code>fullscreenchange</code>, <var>descendantDoc</var>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②①">fullscreen element</a>) to <var>descendantDoc</var>’s <a data-link-type="dfn" href="#list-of-pending-fullscreen-events" id="ref-for-list-of-pending-fullscreen-events⑥">list of pending fullscreen events</a>. </p>
       <li>
        <p><a data-link-type="dfn" href="#unfullscreen-a-document" id="ref-for-unfullscreen-a-document①">Unfullscreen <var>descendantDoc</var></a>. </p>
      </ol>
      <p class="note" role="note">The order in which documents are <a data-link-type="dfn" href="#unfullscreen-a-document" id="ref-for-unfullscreen-a-document②">unfullscreened</a> is not observable, because <a data-link-type="dfn" href="#run-the-fullscreen-steps" id="ref-for-run-the-fullscreen-steps①">run the fullscreen steps</a> is invoked in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order" id="ref-for-concept-tree-order②">tree order</a>. </p>
     <li>
      <p>Resolve <var>promise</var> with undefined. </p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export id="dom-document-exitfullscreen"><code>exitFullscreen()</code></dfn> method, when invoked, must
return the result of running <a data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen②">exit fullscreen</a> on the <a data-link-type="dfn">context object</a>. </p>
   <hr>
   <p>The following are the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers">event handlers</a> (and their corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type">event handler event types</a>) that must be supported by <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code> and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> objects as <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes">event handler IDL attributes</a>: </p>
   <table>
    <thead>
     <tr>
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers①">event handler</a> 
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type①">event handler event type</a> 
    <tbody>
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="handler-document-onfullscreenchange"><code>onfullscreenchange</code></dfn> 
      <td><code>fullscreenchange</code> 
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="handler-document-onfullscreenerror"><code>onfullscreenerror</code></dfn> 
      <td><code>fullscreenerror</code> 
   </table>
   <p class="note" role="note">These are not supported by <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot">ShadowRoot</a></code> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code> objects, and there are no
corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes" id="ref-for-event-handler-content-attributes">event handler content attributes</a> for <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code> objects in any namespace. </p>
   <h2 class="heading settled" data-level="4" id="ui"><span class="secno">4. </span><span class="content">UI</span><a class="self-link" href="#ui"></a></h2>
   <p>User agents are encouraged to implement native media fullscreen controls in terms of <code class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen②">requestFullscreen()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen②">exitFullscreen()</a></code>. </p>
   <p>If the end user instructs the user agent to end a fullscreen session initiated via <code class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen③">requestFullscreen()</a></code>, <a data-link-type="dfn" href="#fully-exit-fullscreen" id="ref-for-fully-exit-fullscreen①">fully exit fullscreen</a> the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context②">top-level browsing context</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document③">active document</a>. </p>
   <p>The user agent may end any fullscreen session without instruction from the end user
or call to <code class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen③">exitFullscreen()</a></code> whenever the user agent deems it necessary. </p>
   <h2 class="heading settled" data-level="5" id="rendering"><span class="secno">5. </span><span class="content">Rendering</span><a class="self-link" href="#rendering"></a></h2>
   <p>This section is to be interpreted equivalently to the Rendering section of HTML. <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> </p>
   <p class="XXX">Long term CSS will define the <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①①">top layer</a> concept and its associated <a class="css" data-link-type="selector" href="#css-pe-backdrop" id="ref-for-css-pe-backdrop"><code>::backdrop</code></a> pseudo-element as part of CSS' stacking context model. Patching CSS
as done here is sketchy as hell. </p>
   <h3 class="heading settled" data-level="5.1" id="new-stacking-layer"><span class="secno">5.1. </span><span class="content">New stacking layer</span><a class="self-link" href="#new-stacking-layer"></a></h3>
   <p>This specification introduces a new stacking layer to the <a href="https://www.w3.org/TR/CSS2/zindex.html">Elaborate description of Stacking Contexts</a> of CSS
2.1. It is called the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="top-layer">top layer</dfn>, comes after step 10 in the painting order, and is
therefore rendered closest to the user within a viewport. Each <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑨">document</a> has one
associated viewport and therefore also one <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①②">top layer</a>. <a data-link-type="biblio" href="#biblio-css" title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS]</a> </p>
   <p class="note" role="note">The terminology used in this and following subsection attempts to match CSS 2.1
Appendix E. </p>
   <p>The <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①③">top layer</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set④">ordered set</a> of elements, rendered in the order they appear in
the set. The last element in the set is rendered last, and thus appears on top. </p>
   <p class="note" role="note">The <code>z-index</code> property has no effect in the <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①④">top layer</a>. </p>
   <p>Each element and <a class="css" data-link-type="selector" href="#css-pe-backdrop" id="ref-for-css-pe-backdrop①"><code>::backdrop</code></a> pseudo-element in a <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⑤">top layer</a> has the
following characteristics: </p>
   <ul>
    <li>
     <p>It generates a new stacking context. </p>
    <li>
     <p>Its parent stacking context is the root stacking context. </p>
    <li>
     <p>If it consists of multiple layout boxes, the first box is used. </p>
    <li>
     <p>It is rendered as an atomic unit as if it were a sibling of its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-root" id="ref-for-concept-tree-root">root</a>. </p>
     <p class="note" role="note"><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-ancestor" id="ref-for-concept-tree-ancestor">Ancestor</a> elements with overflow, opacity, masks, etc. cannot affect
  it. </p>
    <li>
     <p>If its <code>position</code> property computes to <code>fixed</code>, its containing block
 is the viewport, and the initial containing block otherwise. </p>
    <li>
     <p>If it is an element, it and its <a class="css" data-link-type="selector" href="#css-pe-backdrop" id="ref-for-css-pe-backdrop②"><code>::backdrop</code></a> pseudo-element are not
 rendered if its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-ancestor" id="ref-for-concept-shadow-including-inclusive-ancestor">shadow-including inclusive ancestor</a> has the <code>display</code> property
 set to <code>none</code>. </p>
    <li>
     <p>If its specified <code>display</code> property is <code>contents</code>, it computes to <code>block</code>. </p>
    <li>
     <p>If its specified <code>position</code> property is not <code>absolute</code> or <code>fixed</code>, it computes to <code>absolute</code>. </p>
    <li>
     <p>Its outline, if any, is to be rendered before step 10 in the painting order. </p>
    <li>
     <p>Unless overridden by another specification, its static position for <code>left</code>, <code>right</code>, and <code>top</code> is zero. </p>
   </ul>
   <p>To <dfn class="dfn-paneled" data-dfn-for="top layer" data-dfn-type="dfn" data-export id="top-layer-add">add</dfn> an <var>element</var> to a <var>top layer</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove②">remove</a> it from <var>top layer</var> and then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append⑦">append</a> it to <var>top layer</var>. </p>
   <p class="note" role="note">In other words, <var>element</var> is moved to the end of <var>top layer</var> if it
is already present. </p>
   <h3 class="heading settled" data-level="5.2" id="::backdrop-pseudo-element"><span class="secno">5.2. </span><span class="content"><code>::backdrop</code> pseudo-element</span><a class="self-link" href="#::backdrop-pseudo-element"></a></h3>
   <p>Each element in a <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⑥">top layer</a> has a <dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="css-pe-backdrop"><code>::backdrop</code></dfn> pseudo-element. This pseudo-element
is a box rendered immediately below the element (and above the element before the element in the
set, if any), within the same <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⑦">top layer</a>. </p>
   <p class="note" role="note">The <a class="css" data-link-type="selector" href="#css-pe-backdrop" id="ref-for-css-pe-backdrop③"><code>::backdrop</code></a> pseudo-element can be used to create a backdrop
that hides the underlying document for an element in a <a data-link-type="dfn" href="#top-layer" id="ref-for-top-layer①⑧">top layer</a> (such as an element that is
displayed fullscreen). </p>
   <p>It does not inherit from any element and is not inherited from. No restrictions are made on what
properties apply to this pseudo-element either. </p>
   <h3 class="heading settled" data-level="5.3" id=":fullscreen-pseudo-class"><span class="secno">5.3. </span><span class="content"><code>:fullscreen</code> pseudo-class</span><a class="self-link" href="#:fullscreen-pseudo-class"></a></h3>
   <p>The <dfn class="css" data-dfn-type="selector" data-export id="css-pc-fullscreen"><code>:fullscreen</code><a class="self-link" href="#css-pc-fullscreen"></a></dfn> pseudo-class must match any <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element①①">element</a> <var>element</var> for which one of the following conditions is true: </p>
   <ul>
    <li>
     <p><var>element</var>’s <a data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑧">fullscreen flag</a> is set. </p>
    <li>
     <p><var>element</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#element-shadow-host" id="ref-for-element-shadow-host">shadow host</a> and the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#retarget" id="ref-for-retarget①">retargeting</a> its <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑨">node document</a>’s <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②②">fullscreen element</a> against <var>element</var> is <var>element</var>. </p>
   </ul>
   <p class="note no-backref" role="note">This makes it different from the <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement④">fullscreenElement</a></code> API, which returns the topmost <a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②③">fullscreen element</a>. </p>
   <h3 class="heading settled" data-level="5.4" id="user-agent-level-style-sheet-defaults"><span class="secno">5.4. </span><span class="content">User-agent level style sheet defaults</span><a class="self-link" href="#user-agent-level-style-sheet-defaults"></a></h3>
<pre class="css">@namespace "http://www.w3.org/1999/xhtml";

*|*:not(:root):fullscreen {
  position:fixed !important;
  top:0 !important; right:0 !important; bottom:0 !important; left:0 !important;
  margin:0 !important;
  box-sizing:border-box !important;
  min-width:0 !important;
  max-width:none !important;
  min-height:0 !important;
  max-height:none !important;
  width:100% !important;
  height:100% !important;
  transform:none !important;

  /* intentionally not !important */
  object-fit:contain;
}

iframe:fullscreen {
  border:none !important;
  padding:0 !important;
}

::backdrop {
  position:fixed;
  top:0; right:0; bottom:0; left:0;
}

*|*:not(:root):fullscreen::backdrop {
  background:black;
}
</pre>
   <h2 class="heading settled" data-level="6" id="permissions-policy-integration"><span class="secno">6. </span><span class="content">Permissions Policy
Integration</span><span id="feature-policy-integration"></span><a class="self-link" href="#permissions-policy-integration"></a></h2>
   <p>This specification defines a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" id="ref-for-policy-controlled-feature">policy-controlled feature</a> identified by the string
"<code><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="fullscreen-feature" data-noexport id="fullscreen-feature">fullscreen</dfn></code>". Its <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist">default allowlist</a> is <code>'self'</code>. </p>
   <div class="note" role="note">
    <p>A <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①⓪">document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" id="ref-for-concept-document-permissions-policy">permissions policy</a> determines whether any content in that
document is allowed to go fullscreen. If disabled in any document, no content in the document will
be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use②">allowed to use</a> fullscreen. </p>
    <p>The <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen">allowfullscreen</a></code> attribute of the HTML <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element②">iframe</a></code> element affects the <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#container-policy" id="ref-for-container-policy">container
policy</a> for any document nested in that iframe. Unless overridden by the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow">allow</a></code> attribute, setting <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen①">allowfullscreen</a></code> on an iframe is equivalent to <code>&lt;iframe
allow="fullscreen *"></code>, as described in <a href="https://w3c.github.io/webappsec-permissions-policy/#iframe-allowfullscreen-attribute"><cite>Permissions Policy</cite> § 6.3.1 allowfullscreen</a>. </p>
   </div>
   <h2 class="heading settled" data-level="7" id="security-and-privacy-considerations"><span class="secno">7. </span><span class="content">Security and Privacy Considerations</span><a class="self-link" href="#security-and-privacy-considerations"></a></h2>
   <p>User agents should ensure, e.g. by means of an overlay, that the end user is aware something is
displayed fullscreen. User agents should provide a means of exiting fullscreen that always works and
advertise this to the user. This is to prevent a site from spoofing the end user by recreating the
user agent or even operating system environment when fullscreen. See also the definition of <code class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen④">requestFullscreen()</a></code>. </p>
   <p>To enable content in a <a data-link-type="dfn">nested browsing context</a> to go fullscreen, it needs to be
specifically allowed via permissions policy, either through the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen②">allowfullscreen</a></code> attribute
of the HTML <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element③">iframe</a></code> element, or an appropriate declaration in the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow①">allow</a></code> attribute of
the HTML <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element④">iframe</a></code> element, or through a `<a data-link-type="http-header" href="https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header" id="ref-for-permissions-policy-header"><code>Permissions-Policy</code></a>` HTTP
header delivered with the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①①">document</a> through which it is nested. </p>
   <p>This prevents e.g. content from third parties to go fullscreen without explicit permission. </p>
   <h2 class="no-num heading settled" id="acknowledgments"><span class="content">Acknowledgments</span><a class="self-link" href="#acknowledgments"></a></h2>
   <p>Many thanks to Robert O’Callahan for designing the initial model and being awesome. </p>
   <p>Thanks to
Andy Earnshaw,
Changwan Hong,
Chris Pearce,
Darin Fisher,
Dave Tapuska, <i>fantasai</i>,
Giuseppe Pascale,
Glenn Maynard,
Ian Clelland,
Ian Hickson,
Ignacio Solla,
João Eiras,
Josh Soref,
Kagami Sascha Rosylight,
Matt Falkenhagen,
Mihai Balan,
Mounir Lamouri,
Øyvind Stenhaug,
Pat Ladd,
Rafał Chłodnicki,
Riff Jiang,
Rune Lillesveen,
Sigbjørn Vik,
Simon Pieters,
Tab Atkins,
Takayoshi Kochi,
Theresa O’Connor,
triple-underscore,
Vincent Scheib, and
Xidorn Quan
for also being awesome. </p>
   <p>This standard is edited by <a href="https://foolip.org/" lang="sv">Philip Jägenstedt</a> (<a href="https://google.com/">Google</a>, <a href="mailto:philip@foolip.org">philip@foolip.org</a>). It was originally written by <a href="https://annevankesteren.nl/" lang="nl">Anne van Kesteren</a> (<a href="https://www.mozilla.org/">Mozilla</a>, <a href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>). <a href="http://tantek.com/" lang="tr">Tantek Çelik</a> (<a class="p-org org h-org h-card" href="https://www.mozilla.org/">Mozilla</a>, <a href="mailto:tantek@cs.stanford.edu">tantek@cs.stanford.edu</a>) sorted out legal hassles. </p>
   <h2 class="no-num heading settled" id="ipr"><span class="content">Intellectual property rights</span><a class="self-link" href="#ipr"></a></h2>
   <p>Copyright © WHATWG (Apple, Google, Mozilla, Microsoft). This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0
International License</a>. To the extent portions of it are incorporated into source code, such
portions in the source code are licensed under the <a href="https://opensource.org/licenses/BSD-3-Clause" rel="license">BSD 3-Clause License</a> instead.</p>
   <p>This is the Living Standard. Those
interested in the patent-review version should view the <a href="/review-drafts/2021-01/">Living Standard Review Draft</a>.</p>
  </main>
<script>
"use strict";
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js");
}
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#top-layer-add">add</a><span>, in § 5.1</span>
   <li><a href="#dom-fullscreennavigationui-auto">"auto"</a><span>, in § 3</span>
   <li><a href="#css-pe-backdrop">::backdrop</a><span>, in § 5.2</span>
   <li><a href="#collect-documents-to-unfullscreen">collect documents to unfullscreen</a><span>, in § 3</span>
   <li><a href="#descendant-browsing-context">descendant browsing context</a><span>, in § 1</span>
   <li><a href="#exit-fullscreen">exit fullscreen</a><span>, in § 3</span>
   <li><a href="#dom-document-exitfullscreen">exitFullscreen()</a><span>, in § 3</span>
   <li><a href="#css-pc-fullscreen">:fullscreen</a><span>, in § 5.3</span>
   <li><a href="#dom-document-fullscreen">fullscreen</a><span>, in § 3</span>
   <li><a href="#fullscreen-an-element">fullscreen an element</a><span>, in § 2</span>
   <li><a href="#fullscreen-element">fullscreen element</a><span>, in § 2</span>
   <li><a href="#dom-document-fullscreenelement">fullscreenElement</a><span>, in § 3</span>
   <li><a href="#fullscreen-element-ready-check">fullscreen element ready check</a><span>, in § 3</span>
   <li><a href="#dom-document-fullscreenenabled">fullscreenEnabled</a><span>, in § 3</span>
   <li><a href="#fullscreen-feature">fullscreen-feature</a><span>, in § 6</span>
   <li><a href="#fullscreen-flag">fullscreen flag</a><span>, in § 2</span>
   <li><a href="#fullscreen-is-supported">Fullscreen is supported</a><span>, in § 2</span>
   <li><a href="#enumdef-fullscreennavigationui">FullscreenNavigationUI</a><span>, in § 3</span>
   <li><a href="#dictdef-fullscreenoptions">FullscreenOptions</a><span>, in § 3</span>
   <li><a href="#fully-exit-fullscreen">fully exit fullscreen</a><span>, in § 2</span>
   <li><a href="#dom-fullscreennavigationui-hide">"hide"</a><span>, in § 3</span>
   <li><a href="#iframe-fullscreen-flag">iframe fullscreen flag</a><span>, in § 2</span>
   <li><a href="#list-of-pending-fullscreen-events">list of pending fullscreen events</a><span>, in § 2</span>
   <li><a href="#dom-fullscreenoptions-navigationui">navigationUI</a><span>, in § 3</span>
   <li>
    onfullscreenchange
    <ul>
     <li><a href="#handler-document-onfullscreenchange">attribute for Document</a><span>, in § 3</span>
     <li><a href="#dom-element-onfullscreenchange">attribute for Element</a><span>, in § 3</span>
    </ul>
   <li>
    onfullscreenerror
    <ul>
     <li><a href="#handler-document-onfullscreenerror">attribute for Document</a><span>, in § 3</span>
     <li><a href="#dom-element-onfullscreenerror">attribute for Element</a><span>, in § 3</span>
    </ul>
   <li><a href="#dom-element-requestfullscreen">requestFullscreen()</a><span>, in § 3</span>
   <li><a href="#dom-element-requestfullscreen">requestFullscreen(options)</a><span>, in § 3</span>
   <li><a href="#run-the-fullscreen-steps">run the fullscreen steps</a><span>, in § 2</span>
   <li><a href="#dom-fullscreennavigationui-show">"show"</a><span>, in § 3</span>
   <li><a href="#simple-fullscreen-document">simple fullscreen document</a><span>, in § 3</span>
   <li><a href="#top-layer">top layer</a><span>, in § 5.1</span>
   <li><a href="#unfullscreen-a-document">unfullscreen a document</a><span>, in § 2</span>
   <li><a href="#unfullscreen-an-element">unfullscreen an element</a><span>, in § 2</span>
  </ul>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['a9a9f7a8051d9102822897df0389e6b3'] = {'external': 1, 'id': 'a9a9f7a8051d9102822897df0389e6b3', 'url': 'https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change', 'dfnText': 'triggered by a user generated orientation change', 'items': [{'ids': [{'linkID': 'ref-for-dfn-triggered-by-a-user-generated-orientation-change'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['07886e33695d0e7b473ef18f656ad7ac'] = {'external': 1, 'id': '07886e33695d0e7b473ef18f656ad7ac', 'url': 'https://dom.spec.whatwg.org/#document', 'dfnText': 'Document', 'items': [{'ids': [{'linkID': 'ref-for-document'}, {'linkID': 'ref-for-document①'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['94eafe4588698d5aad442ebc8ca8ca77'] = {'external': 1, 'id': '94eafe4588698d5aad442ebc8ca8ca77', 'url': 'https://dom.spec.whatwg.org/#documentorshadowroot', 'dfnText': 'DocumentOrShadowRoot', 'items': [{'ids': [{'linkID': 'ref-for-documentorshadowroot'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['217dfc85318b612bdb489d33301d0fc2'] = {'external': 1, 'id': '217dfc85318b612bdb489d33301d0fc2', 'url': 'https://dom.spec.whatwg.org/#element', 'dfnText': 'Element', 'items': [{'ids': [{'linkID': 'ref-for-element'}, {'linkID': 'ref-for-element①'}, {'linkID': 'ref-for-element②'}, {'linkID': 'ref-for-element③'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['e3a7ef84d7c2142897215242dd484128'] = {'external': 1, 'id': 'e3a7ef84d7c2142897215242dd484128', 'url': 'https://dom.spec.whatwg.org/#shadowroot', 'dfnText': 'ShadowRoot', 'items': [{'ids': [{'linkID': 'ref-for-shadowroot'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['4c15ea872ce67284d9c8690644adaa79'] = {'external': 1, 'id': '4c15ea872ce67284d9c8690644adaa79', 'url': 'https://dom.spec.whatwg.org/#concept-tree-ancestor', 'dfnText': 'ancestor', 'items': [{'ids': [{'linkID': 'ref-for-concept-tree-ancestor'}], 'text': '5.1. New stacking layer'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['da580abf5ce04ba74a073e32a09c604a'] = {'external': 1, 'id': 'da580abf5ce04ba74a073e32a09c604a', 'url': 'https://dom.spec.whatwg.org/#dom-event-bubbles', 'dfnText': 'bubbles', 'items': [{'ids': [{'linkID': 'ref-for-dom-event-bubbles'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['9e587c8e50e269725911bc6eb0e8b7e6'] = {'external': 1, 'id': '9e587c8e50e269725911bc6eb0e8b7e6', 'url': 'https://dom.spec.whatwg.org/#dom-event-composed', 'dfnText': 'composed', 'items': [{'ids': [{'linkID': 'ref-for-dom-event-composed'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['67e5935433cd04e5d9a81198721eda05'] = {'external': 1, 'id': '67e5935433cd04e5d9a81198721eda05', 'url': 'https://dom.spec.whatwg.org/#connected', 'dfnText': 'connected', 'items': [{'ids': [{'linkID': 'ref-for-connected'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-connected①'}, {'linkID': 'ref-for-connected②'}, {'linkID': 'ref-for-connected③'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['985c42e2af63b3e74bd3b70d55668fd4'] = {'external': 1, 'id': '985c42e2af63b3e74bd3b70d55668fd4', 'url': 'https://dom.spec.whatwg.org/#concept-document', 'dfnText': 'document', 'items': [{'ids': [{'linkID': 'ref-for-concept-document'}, {'linkID': 'ref-for-concept-document①'}, {'linkID': 'ref-for-concept-document②'}, {'linkID': 'ref-for-concept-document③'}, {'linkID': 'ref-for-concept-document④'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-concept-document⑤'}, {'linkID': 'ref-for-concept-document⑥'}, {'linkID': 'ref-for-concept-document⑦'}, {'linkID': 'ref-for-concept-document⑧'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-concept-document⑨'}], 'text': '5.1. New stacking layer'}, {'ids': [{'linkID': 'ref-for-concept-document①⓪'}], 'text': '6. Permissions Policy\nIntegration'}, {'ids': [{'linkID': 'ref-for-concept-document①①'}], 'text': '7. Security and Privacy Considerations'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['0e9d2b68d8d34152d128b48f1a821cc6'] = {'external': 1, 'id': '0e9d2b68d8d34152d128b48f1a821cc6', 'url': 'https://dom.spec.whatwg.org/#concept-element', 'dfnText': 'element', 'items': [{'ids': [{'linkID': 'ref-for-concept-element'}, {'linkID': 'ref-for-concept-element①'}, {'linkID': 'ref-for-concept-element②'}, {'linkID': 'ref-for-concept-element③'}, {'linkID': 'ref-for-concept-element④'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-concept-element⑤'}, {'linkID': 'ref-for-concept-element⑥'}, {'linkID': 'ref-for-concept-element⑦'}, {'linkID': 'ref-for-concept-element⑧'}, {'linkID': 'ref-for-concept-element⑨'}, {'linkID': 'ref-for-concept-element①⓪'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-concept-element①①'}], 'text': '5.3. :fullscreen pseudo-class'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['15045c15505e025cd6b6d0f134b7c986'] = {'external': 1, 'id': '15045c15505e025cd6b6d0f134b7c986', 'url': 'https://dom.spec.whatwg.org/#concept-event-fire', 'dfnText': 'fire an event', 'items': [{'ids': [{'linkID': 'ref-for-concept-event-fire'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['336f9dec7e7e3f85d4ed32b3ca6ad4d4'] = {'external': 1, 'id': '336f9dec7e7e3f85d4ed32b3ca6ad4d4', 'url': 'https://dom.spec.whatwg.org/#concept-documentfragment-host', 'dfnText': 'host', 'items': [{'ids': [{'linkID': 'ref-for-concept-documentfragment-host'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['b9c47d6217e09c4490194d25aba2b408'] = {'external': 1, 'id': 'b9c47d6217e09c4490194d25aba2b408', 'url': 'https://dom.spec.whatwg.org/#concept-element-namespace', 'dfnText': 'namespace', 'items': [{'ids': [{'linkID': 'ref-for-concept-element-namespace'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['e374c2a979dc7a73f7d03be0623d67e6'] = {'external': 1, 'id': 'e374c2a979dc7a73f7d03be0623d67e6', 'url': 'https://dom.spec.whatwg.org/#concept-node-document', 'dfnText': 'node document', 'items': [{'ids': [{'linkID': 'ref-for-concept-node-document'}, {'linkID': 'ref-for-concept-node-document①'}, {'linkID': 'ref-for-concept-node-document②'}, {'linkID': 'ref-for-concept-node-document③'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-concept-node-document④'}, {'linkID': 'ref-for-concept-node-document⑤'}, {'linkID': 'ref-for-concept-node-document⑥'}, {'linkID': 'ref-for-concept-node-document⑦'}, {'linkID': 'ref-for-concept-node-document⑧'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-concept-node-document⑨'}], 'text': '5.3. :fullscreen pseudo-class'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['f56b2b14acc71d82119b3c4a8271253b'] = {'external': 1, 'id': 'f56b2b14acc71d82119b3c4a8271253b', 'url': 'https://dom.spec.whatwg.org/#concept-node-remove-ext', 'dfnText': 'removing steps', 'items': [{'ids': [{'linkID': 'ref-for-concept-node-remove-ext'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['7f64fe51602436715f686161443b5b42'] = {'external': 1, 'id': '7f64fe51602436715f686161443b5b42', 'url': 'https://dom.spec.whatwg.org/#retarget', 'dfnText': 'retargeting', 'items': [{'ids': [{'linkID': 'ref-for-retarget'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-retarget①'}], 'text': '5.3. :fullscreen pseudo-class'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['cd37c4d3d03bfb78993ddcd7db947fa2'] = {'external': 1, 'id': 'cd37c4d3d03bfb78993ddcd7db947fa2', 'url': 'https://dom.spec.whatwg.org/#concept-tree-root', 'dfnText': 'root', 'items': [{'ids': [{'linkID': 'ref-for-concept-tree-root'}], 'text': '5.1. New stacking layer'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['ec3b2dc23a860db23f3f90223ec59b0a'] = {'external': 1, 'id': 'ec3b2dc23a860db23f3f90223ec59b0a', 'url': 'https://dom.spec.whatwg.org/#element-shadow-host', 'dfnText': 'shadow host', 'items': [{'ids': [{'linkID': 'ref-for-element-shadow-host'}], 'text': '5.3. :fullscreen pseudo-class'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['a0776d2c12f01e4264ed344ff747bce1'] = {'external': 1, 'id': 'a0776d2c12f01e4264ed344ff747bce1', 'url': 'https://dom.spec.whatwg.org/#concept-shadow-root', 'dfnText': 'shadow root', 'items': [{'ids': [{'linkID': 'ref-for-concept-shadow-root'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['7049f0f7045691b6d0511a167ad33988'] = {'external': 1, 'id': '7049f0f7045691b6d0511a167ad33988', 'url': 'https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-ancestor', 'dfnText': 'shadow-including inclusive ancestor', 'items': [{'ids': [{'linkID': 'ref-for-concept-shadow-including-inclusive-ancestor'}], 'text': '5.1. New stacking layer'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['ac5284c64aa29e20354ed8fbd9d3e9f5'] = {'external': 1, 'id': 'ac5284c64aa29e20354ed8fbd9d3e9f5', 'url': 'https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant', 'dfnText': 'shadow-including inclusive descendant', 'items': [{'ids': [{'linkID': 'ref-for-concept-shadow-including-inclusive-descendant'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['529584996f402e6737c1f987fc0e4f74'] = {'external': 1, 'id': '529584996f402e6737c1f987fc0e4f74', 'url': 'https://dom.spec.whatwg.org/#concept-shadow-including-tree-order', 'dfnText': 'shadow-including tree order', 'items': [{'ids': [{'linkID': 'ref-for-concept-shadow-including-tree-order'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['cbdda34ff2c9886625e91b16c2022fdc'] = {'external': 1, 'id': 'cbdda34ff2c9886625e91b16c2022fdc', 'url': 'https://dom.spec.whatwg.org/#concept-tree', 'dfnText': 'tree', 'items': [{'ids': [{'linkID': 'ref-for-concept-tree'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['f2e5c72892e03d173f9f2a37434f3b2b'] = {'external': 1, 'id': 'f2e5c72892e03d173f9f2a37434f3b2b', 'url': 'https://dom.spec.whatwg.org/#concept-tree-order', 'dfnText': 'tree order', 'items': [{'ids': [{'linkID': 'ref-for-concept-tree-order'}, {'linkID': 'ref-for-concept-tree-order①'}, {'linkID': 'ref-for-concept-tree-order②'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['716703f1068cc638b4235f83154eff6c'] = {'external': 1, 'id': '716703f1068cc638b4235f83154eff6c', 'url': 'https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler', 'dfnText': 'EventHandler', 'items': [{'ids': [{'linkID': 'ref-for-eventhandler'}, {'linkID': 'ref-for-eventhandler①'}, {'linkID': 'ref-for-eventhandler②'}, {'linkID': 'ref-for-eventhandler③'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['d1f0a86fd49be388d8b0159e241a1172'] = {'external': 1, 'id': 'd1f0a86fd49be388d8b0159e241a1172', 'url': 'https://html.spec.whatwg.org/multipage/nav-history-apis.html#window', 'dfnText': 'Window', 'items': [{'ids': [{'linkID': 'ref-for-window'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['de11cdc07a64c79878f1c3074e81554a'] = {'external': 1, 'id': 'de11cdc07a64c79878f1c3074e81554a', 'url': 'https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document', 'dfnText': 'active document', 'items': [{'ids': [{'linkID': 'ref-for-nav-document'}, {'linkID': 'ref-for-nav-document①'}, {'linkID': 'ref-for-nav-document②'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-nav-document③'}], 'text': '4. UI'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['bc89892ec400b8765774b6c81ab68090'] = {'external': 1, 'id': 'bc89892ec400b8765774b6c81ab68090', 'url': 'https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow', 'dfnText': 'allow', 'items': [{'ids': [{'linkID': 'ref-for-attr-iframe-allow'}], 'text': '6. Permissions Policy\nIntegration'}, {'ids': [{'linkID': 'ref-for-attr-iframe-allow①'}], 'text': '7. Security and Privacy Considerations'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['3dc9eee4a6a1d169f561b6d87bd08573'] = {'external': 1, 'id': '3dc9eee4a6a1d169f561b6d87bd08573', 'url': 'https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use', 'dfnText': 'allowed to use', 'items': [{'ids': [{'linkID': 'ref-for-allowed-to-use'}, {'linkID': 'ref-for-allowed-to-use①'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-allowed-to-use②'}], 'text': '6. Permissions Policy\nIntegration'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['6f1701ed740eeaaf1afacdb157347d60'] = {'external': 1, 'id': '6f1701ed740eeaaf1afacdb157347d60', 'url': 'https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen', 'dfnText': 'allowfullscreen', 'items': [{'ids': [{'linkID': 'ref-for-attr-iframe-allowfullscreen'}, {'linkID': 'ref-for-attr-iframe-allowfullscreen①'}], 'text': '6. Permissions Policy\nIntegration'}, {'ids': [{'linkID': 'ref-for-attr-iframe-allowfullscreen②'}], 'text': '7. Security and Privacy Considerations'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['5db590bc82ac7edd15fc4ebd1b0c25f0'] = {'external': 1, 'id': '5db590bc82ac7edd15fc4ebd1b0c25f0', 'url': 'https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context', 'dfnText': 'browsing context', 'items': [{'ids': [{'linkID': 'ref-for-browsing-context'}, {'linkID': 'ref-for-browsing-context①'}], 'text': '1. Terminology'}, {'ids': [{'linkID': 'ref-for-browsing-context②'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['6d6b4fb0bd4b897770bd854f53d3a12f'] = {'external': 1, 'id': '6d6b4fb0bd4b897770bd854f53d3a12f', 'url': 'https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element', 'dfnText': 'dialog', 'items': [{'ids': [{'linkID': 'ref-for-the-dialog-element'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-the-dialog-element①'}, {'linkID': 'ref-for-the-dialog-element②'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['b2b24659ba237e66a1118572bb5ecd7c'] = {'external': 1, 'id': 'b2b24659ba237e66a1118572bb5ecd7c', 'url': 'https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers', 'dfnText': 'event handler', 'items': [{'ids': [{'linkID': 'ref-for-event-handlers'}, {'linkID': 'ref-for-event-handlers①'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['bdcd2a2e97634229446a82ad48433043'] = {'external': 1, 'id': 'bdcd2a2e97634229446a82ad48433043', 'url': 'https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes', 'dfnText': 'event handler content attribute', 'items': [{'ids': [{'linkID': 'ref-for-event-handler-content-attributes'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['63ae16e3c4cc120a678b317e8329b704'] = {'external': 1, 'id': '63ae16e3c4cc120a678b317e8329b704', 'url': 'https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type', 'dfnText': 'event handler event type', 'items': [{'ids': [{'linkID': 'ref-for-event-handler-event-type'}, {'linkID': 'ref-for-event-handler-event-type①'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['e76cd636ec243fdd4a25330499736463'] = {'external': 1, 'id': 'e76cd636ec243fdd4a25330499736463', 'url': 'https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes', 'dfnText': 'event handler idl attribute', 'items': [{'ids': [{'linkID': 'ref-for-event-handler-idl-attributes'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['d7194ba752d7976f439b51ac9d70a9e3'] = {'external': 1, 'id': 'd7194ba752d7976f439b51ac9d70a9e3', 'url': 'https://html.spec.whatwg.org/multipage/webappapis.html#event-loop', 'dfnText': 'event loop', 'items': [{'ids': [{'linkID': 'ref-for-event-loop'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['7594a09aa0c77c9e24726559a3a6da9d'] = {'external': 1, 'id': '7594a09aa0c77c9e24726559a3a6da9d', 'url': 'https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active', 'dfnText': 'fully active', 'items': [{'ids': [{'linkID': 'ref-for-fully-active'}, {'linkID': 'ref-for-fully-active①'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['baf95ce8d0404079723db392663d355e'] = {'external': 1, 'id': 'baf95ce8d0404079723db392663d355e', 'url': 'https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element', 'dfnText': 'iframe', 'items': [{'ids': [{'linkID': 'ref-for-the-iframe-element'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-the-iframe-element①'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-the-iframe-element②'}], 'text': '6. Permissions Policy\nIntegration'}, {'ids': [{'linkID': 'ref-for-the-iframe-element③'}, {'linkID': 'ref-for-the-iframe-element④'}], 'text': '7. Security and Privacy Considerations'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['3a2763fcaa6bc82693554cf36780c0dd'] = {'external': 1, 'id': '3a2763fcaa6bc82693554cf36780c0dd', 'url': 'https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel', 'dfnText': 'in parallel', 'items': [{'ids': [{'linkID': 'ref-for-in-parallel'}, {'linkID': 'ref-for-in-parallel①'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['c8a8ffe673019218223a10e45dee6a88'] = {'external': 1, 'id': 'c8a8ffe673019218223a10e45dee6a88', 'url': 'https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy', 'dfnText': 'permissions policy', 'items': [{'ids': [{'linkID': 'ref-for-concept-document-permissions-policy'}], 'text': '6. Permissions Policy\nIntegration'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['2233058c8f0998915af8393ee2abbc1d'] = {'external': 1, 'id': '2233058c8f0998915af8393ee2abbc1d', 'url': 'https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global', 'dfnText': 'relevant global object', 'items': [{'ids': [{'linkID': 'ref-for-concept-relevant-global'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['c104b697744f6f246969dcc26b898f11'] = {'external': 1, 'id': 'c104b697744f6f246969dcc26b898f11', 'url': 'https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context', 'dfnText': 'top-level browsing context', 'items': [{'ids': [{'linkID': 'ref-for-top-level-browsing-context'}, {'linkID': 'ref-for-top-level-browsing-context①'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-top-level-browsing-context②'}], 'text': '4. UI'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['5b762d09d78e8674458b84982b3cb3c9'] = {'external': 1, 'id': '5b762d09d78e8674458b84982b3cb3c9', 'url': 'https://html.spec.whatwg.org/multipage/interaction.html#transient-activation', 'dfnText': 'transient activation', 'items': [{'ids': [{'linkID': 'ref-for-transient-activation'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['5002247a1e0aa38a7705419d947c6884'] = {'external': 1, 'id': '5002247a1e0aa38a7705419d947c6884', 'url': 'https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps', 'dfnText': 'unloading document cleanup steps', 'items': [{'ids': [{'linkID': 'ref-for-unloading-document-cleanup-steps'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['53c2c70bc752d6cf2a1f7deddc029549'] = {'external': 1, 'id': '53c2c70bc752d6cf2a1f7deddc029549', 'url': 'https://infra.spec.whatwg.org/#set-append', 'dfnText': 'append', 'items': [{'ids': [{'linkID': 'ref-for-set-append'}, {'linkID': 'ref-for-set-append①'}, {'linkID': 'ref-for-set-append②'}, {'linkID': 'ref-for-set-append③'}, {'linkID': 'ref-for-set-append④'}, {'linkID': 'ref-for-set-append⑤'}, {'linkID': 'ref-for-set-append⑥'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-set-append⑦'}], 'text': '5.1. New stacking layer'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['2889fa868b02a31759864aaf77f851d6'] = {'external': 1, 'id': '2889fa868b02a31759864aaf77f851d6', 'url': 'https://infra.spec.whatwg.org/#iteration-break', 'dfnText': 'break', 'items': [{'ids': [{'linkID': 'ref-for-iteration-break'}, {'linkID': 'ref-for-iteration-break①'}, {'linkID': 'ref-for-iteration-break②'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['eb75379b05abc264a531a791358e1eba'] = {'external': 1, 'id': 'eb75379b05abc264a531a791358e1eba', 'url': 'https://infra.spec.whatwg.org/#list-contain', 'dfnText': 'contain', 'items': [{'ids': [{'linkID': 'ref-for-list-contain'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['ce9efec0e74a2cbfe986593eb861ade6'] = {'external': 1, 'id': 'ce9efec0e74a2cbfe986593eb861ade6', 'url': 'https://infra.spec.whatwg.org/#iteration-continue', 'dfnText': 'continue', 'items': [{'ids': [{'linkID': 'ref-for-iteration-continue'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['de8dad85bc31aef3359c7c7dbd918fe7'] = {'external': 1, 'id': 'de8dad85bc31aef3359c7c7dbd918fe7', 'url': 'https://infra.spec.whatwg.org/#list-empty', 'dfnText': 'empty', 'items': [{'ids': [{'linkID': 'ref-for-list-empty'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['8b9e78ceedde26e69095bd6f6cce47bf'] = {'external': 1, 'id': '8b9e78ceedde26e69095bd6f6cce47bf', 'url': 'https://infra.spec.whatwg.org/#list-iterate', 'dfnText': 'for each', 'items': [{'ids': [{'linkID': 'ref-for-list-iterate'}, {'linkID': 'ref-for-list-iterate①'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-list-iterate②'}, {'linkID': 'ref-for-list-iterate③'}, {'linkID': 'ref-for-list-iterate④'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['39deea7d529a23ee9b82b61369f78690'] = {'external': 1, 'id': '39deea7d529a23ee9b82b61369f78690', 'url': 'https://infra.spec.whatwg.org/#html-namespace', 'dfnText': 'html namespace', 'items': [{'ids': [{'linkID': 'ref-for-html-namespace'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['80524ea4c0063fe3cf0b6c49a40e31bf'] = {'external': 1, 'id': '80524ea4c0063fe3cf0b6c49a40e31bf', 'url': 'https://infra.spec.whatwg.org/#ordered-set', 'dfnText': 'ordered set', 'items': [{'ids': [{'linkID': 'ref-for-ordered-set'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-ordered-set①'}, {'linkID': 'ref-for-ordered-set②'}, {'linkID': 'ref-for-ordered-set③'}], 'text': '3. API'}, {'ids': [{'linkID': 'ref-for-ordered-set④'}], 'text': '5.1. New stacking layer'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['fadc27e826887faf120674544589ae68'] = {'external': 1, 'id': 'fadc27e826887faf120674544589ae68', 'url': 'https://infra.spec.whatwg.org/#list-remove', 'dfnText': 'remove', 'items': [{'ids': [{'linkID': 'ref-for-list-remove'}, {'linkID': 'ref-for-list-remove①'}], 'text': '2. Model'}, {'ids': [{'linkID': 'ref-for-list-remove②'}], 'text': '5.1. New stacking layer'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['40b59bc325bd4d66701dfd8b7f1847c0'] = {'external': 1, 'id': '40b59bc325bd4d66701dfd8b7f1847c0', 'url': 'https://infra.spec.whatwg.org/#string', 'dfnText': 'string', 'items': [{'ids': [{'linkID': 'ref-for-string'}], 'text': '2. Model'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['35a770fa01542cb11801796082208978'] = {'external': 1, 'id': '35a770fa01542cb11801796082208978', 'url': 'https://infra.spec.whatwg.org/#iteration-while', 'dfnText': 'while', 'items': [{'ids': [{'linkID': 'ref-for-iteration-while'}, {'linkID': 'ref-for-iteration-while①'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['8cb233b2e2ebbf941b326dfd1ff7e608'] = {'external': 1, 'id': '8cb233b2e2ebbf941b326dfd1ff7e608', 'url': 'https://w3c.github.io/webappsec-permissions-policy/#container-policy', 'dfnText': 'container policy', 'items': [{'ids': [{'linkID': 'ref-for-container-policy'}], 'text': '6. Permissions Policy\nIntegration'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['23e803a7c7cace37e75c5045c4c7fff3'] = {'external': 1, 'id': '23e803a7c7cace37e75c5045c4c7fff3', 'url': 'https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist', 'dfnText': 'default allowlist', 'items': [{'ids': [{'linkID': 'ref-for-policy-controlled-feature-default-allowlist'}], 'text': '6. Permissions Policy\nIntegration'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['c0a1ba805e460f8f248125dac5666cfb'] = {'external': 1, 'id': 'c0a1ba805e460f8f248125dac5666cfb', 'url': 'https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header', 'dfnText': 'permissions-policy', 'items': [{'ids': [{'linkID': 'ref-for-permissions-policy-header'}], 'text': '7. Security and Privacy Considerations'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['cbc4165961071efad91900c4c7b2fe8b'] = {'external': 1, 'id': 'cbc4165961071efad91900c4c7b2fe8b', 'url': 'https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature', 'dfnText': 'policy-controlled feature', 'items': [{'ids': [{'linkID': 'ref-for-policy-controlled-feature'}], 'text': '6. Permissions Policy\nIntegration'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['ccd13ebf0bd1e0a15f5a5d6b4e129f35'] = {'external': 1, 'id': 'ccd13ebf0bd1e0a15f5a5d6b4e129f35', 'url': 'https://webidl.spec.whatwg.org/#LegacyLenientSetter', 'dfnText': 'LegacyLenientSetter', 'items': [{'ids': [{'linkID': 'ref-for-LegacyLenientSetter'}, {'linkID': 'ref-for-LegacyLenientSetter①'}, {'linkID': 'ref-for-LegacyLenientSetter②'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['93669c631ec1ef8e696b4c083bdbe12c'] = {'external': 1, 'id': '93669c631ec1ef8e696b4c083bdbe12c', 'url': 'https://webidl.spec.whatwg.org/#idl-promise', 'dfnText': 'Promise', 'items': [{'ids': [{'linkID': 'ref-for-idl-promise'}, {'linkID': 'ref-for-idl-promise①'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['0672068b3ec96623721f48cf3e99a93f'] = {'external': 1, 'id': '0672068b3ec96623721f48cf3e99a93f', 'url': 'https://webidl.spec.whatwg.org/#Unscopable', 'dfnText': 'Unscopable', 'items': [{'ids': [{'linkID': 'ref-for-Unscopable'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['f8062b07e25ed0281f5cbfb9a54070b4'] = {'external': 1, 'id': 'f8062b07e25ed0281f5cbfb9a54070b4', 'url': 'https://webidl.spec.whatwg.org/#idl-boolean', 'dfnText': 'boolean', 'items': [{'ids': [{'linkID': 'ref-for-idl-boolean'}, {'linkID': 'ref-for-idl-boolean①'}], 'text': '3. API'}]};
</script>
<script>
    window.dfnsJson ??= {};
    window.dfnsJson['cee863f1f2ec91066cfb7f5d309d59dc'] = {'external': 1, 'id': 'cee863f1f2ec91066cfb7f5d309d59dc', 'url': 'https://webidl.spec.whatwg.org/#idl-undefined', 'dfnText': 'undefined', 'items': [{'ids': [{'linkID': 'ref-for-idl-undefined'}, {'linkID': 'ref-for-idl-undefined①'}], 'text': '3. API'}]};
</script>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a9a9f7a8051d9102822897df0389e6b3">triggered by a user generated orientation change</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="07886e33695d0e7b473ef18f656ad7ac">Document</span>
     <li><span class="dfn-paneled" id="94eafe4588698d5aad442ebc8ca8ca77">DocumentOrShadowRoot</span>
     <li><span class="dfn-paneled" id="217dfc85318b612bdb489d33301d0fc2">Element</span>
     <li><span class="dfn-paneled" id="e3a7ef84d7c2142897215242dd484128">ShadowRoot</span>
     <li><span class="dfn-paneled" id="4c15ea872ce67284d9c8690644adaa79">ancestor</span>
     <li><span class="dfn-paneled" id="da580abf5ce04ba74a073e32a09c604a">bubbles</span>
     <li><span class="dfn-paneled" id="9e587c8e50e269725911bc6eb0e8b7e6">composed</span>
     <li><span class="dfn-paneled" id="67e5935433cd04e5d9a81198721eda05">connected</span>
     <li><span class="dfn-paneled" id="985c42e2af63b3e74bd3b70d55668fd4">document</span>
     <li><span class="dfn-paneled" id="0e9d2b68d8d34152d128b48f1a821cc6">element</span>
     <li><span class="dfn-paneled" id="15045c15505e025cd6b6d0f134b7c986">fire an event</span>
     <li><span class="dfn-paneled" id="336f9dec7e7e3f85d4ed32b3ca6ad4d4">host</span>
     <li><span class="dfn-paneled" id="b9c47d6217e09c4490194d25aba2b408">namespace</span>
     <li><span class="dfn-paneled" id="e374c2a979dc7a73f7d03be0623d67e6">node document</span>
     <li><span class="dfn-paneled" id="f56b2b14acc71d82119b3c4a8271253b">removing steps</span>
     <li><span class="dfn-paneled" id="7f64fe51602436715f686161443b5b42">retargeting</span>
     <li><span class="dfn-paneled" id="cd37c4d3d03bfb78993ddcd7db947fa2">root</span>
     <li><span class="dfn-paneled" id="ec3b2dc23a860db23f3f90223ec59b0a">shadow host</span>
     <li><span class="dfn-paneled" id="a0776d2c12f01e4264ed344ff747bce1">shadow root</span>
     <li><span class="dfn-paneled" id="7049f0f7045691b6d0511a167ad33988">shadow-including inclusive ancestor</span>
     <li><span class="dfn-paneled" id="ac5284c64aa29e20354ed8fbd9d3e9f5">shadow-including inclusive descendant</span>
     <li><span class="dfn-paneled" id="529584996f402e6737c1f987fc0e4f74">shadow-including tree order</span>
     <li><span class="dfn-paneled" id="cbdda34ff2c9886625e91b16c2022fdc">tree</span>
     <li><span class="dfn-paneled" id="f2e5c72892e03d173f9f2a37434f3b2b">tree order</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="716703f1068cc638b4235f83154eff6c">EventHandler</span>
     <li><span class="dfn-paneled" id="d1f0a86fd49be388d8b0159e241a1172">Window</span>
     <li><span class="dfn-paneled" id="de11cdc07a64c79878f1c3074e81554a">active document</span>
     <li><span class="dfn-paneled" id="bc89892ec400b8765774b6c81ab68090">allow</span>
     <li><span class="dfn-paneled" id="3dc9eee4a6a1d169f561b6d87bd08573">allowed to use</span>
     <li><span class="dfn-paneled" id="6f1701ed740eeaaf1afacdb157347d60">allowfullscreen</span>
     <li><span class="dfn-paneled" id="5db590bc82ac7edd15fc4ebd1b0c25f0">browsing context</span>
     <li><span class="dfn-paneled" id="6d6b4fb0bd4b897770bd854f53d3a12f">dialog</span>
     <li><span class="dfn-paneled" id="b2b24659ba237e66a1118572bb5ecd7c">event handler</span>
     <li><span class="dfn-paneled" id="bdcd2a2e97634229446a82ad48433043">event handler content attribute</span>
     <li><span class="dfn-paneled" id="63ae16e3c4cc120a678b317e8329b704">event handler event type</span>
     <li><span class="dfn-paneled" id="e76cd636ec243fdd4a25330499736463">event handler idl attribute</span>
     <li><span class="dfn-paneled" id="d7194ba752d7976f439b51ac9d70a9e3">event loop</span>
     <li><span class="dfn-paneled" id="7594a09aa0c77c9e24726559a3a6da9d">fully active</span>
     <li><span class="dfn-paneled" id="baf95ce8d0404079723db392663d355e">iframe</span>
     <li><span class="dfn-paneled" id="3a2763fcaa6bc82693554cf36780c0dd">in parallel</span>
     <li><span class="dfn-paneled" id="c8a8ffe673019218223a10e45dee6a88">permissions policy</span>
     <li><span class="dfn-paneled" id="2233058c8f0998915af8393ee2abbc1d">relevant global object</span>
     <li><span class="dfn-paneled" id="c104b697744f6f246969dcc26b898f11">top-level browsing context</span>
     <li><span class="dfn-paneled" id="5b762d09d78e8674458b84982b3cb3c9">transient activation</span>
     <li><span class="dfn-paneled" id="5002247a1e0aa38a7705419d947c6884">unloading document cleanup steps</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53c2c70bc752d6cf2a1f7deddc029549">append</span>
     <li><span class="dfn-paneled" id="2889fa868b02a31759864aaf77f851d6">break</span>
     <li><span class="dfn-paneled" id="eb75379b05abc264a531a791358e1eba">contain</span>
     <li><span class="dfn-paneled" id="ce9efec0e74a2cbfe986593eb861ade6">continue</span>
     <li><span class="dfn-paneled" id="de8dad85bc31aef3359c7c7dbd918fe7">empty</span>
     <li><span class="dfn-paneled" id="8b9e78ceedde26e69095bd6f6cce47bf">for each</span>
     <li><span class="dfn-paneled" id="39deea7d529a23ee9b82b61369f78690">html namespace</span>
     <li><span class="dfn-paneled" id="80524ea4c0063fe3cf0b6c49a40e31bf">ordered set</span>
     <li><span class="dfn-paneled" id="fadc27e826887faf120674544589ae68">remove</span>
     <li><span class="dfn-paneled" id="40b59bc325bd4d66701dfd8b7f1847c0">string</span>
     <li><span class="dfn-paneled" id="35a770fa01542cb11801796082208978">while</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-POLICY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8cb233b2e2ebbf941b326dfd1ff7e608">container policy</span>
     <li><span class="dfn-paneled" id="23e803a7c7cace37e75c5045c4c7fff3">default allowlist</span>
     <li><span class="dfn-paneled" id="c0a1ba805e460f8f248125dac5666cfb">permissions-policy</span>
     <li><span class="dfn-paneled" id="cbc4165961071efad91900c4c7b2fe8b">policy-controlled feature</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ccd13ebf0bd1e0a15f5a5d6b4e129f35">LegacyLenientSetter</span>
     <li><span class="dfn-paneled" id="93669c631ec1ef8e696b4c083bdbe12c">Promise</span>
     <li><span class="dfn-paneled" id="0672068b3ec96623721f48cf3e99a93f">Unscopable</span>
     <li><span class="dfn-paneled" id="f8062b07e25ed0281f5cbfb9a54070b4">boolean</span>
     <li><span class="dfn-paneled" id="cee863f1f2ec91066cfb7f5d309d59dc">undefined</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css">[CSS]
   <dd>Bert Bos; et al. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-mathml">[MATHML]
   <dd>Patrick D F Ion; Robert R Miner. <a href="https://www.w3.org/TR/REC-MathML/"><cite>Mathematical Markup Language (MathML) 1.01 Specification</cite></a>. 7 July 1999. REC. URL: <a href="https://www.w3.org/TR/REC-MathML/">https://www.w3.org/TR/REC-MathML/</a>
   <dt id="biblio-permissions-policy-1">[PERMISSIONS-POLICY-1]
   <dd>Ian Clelland. <a href="https://w3c.github.io/webappsec-permissions-policy/"><cite>Permissions Policy</cite></a>. URL: <a href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
   <dt id="biblio-svg">[SVG]
   <dd>Erik Dahlström; et al. <a href="https://www.w3.org/TR/SVG11/"><cite>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</cite></a>. 16 August 2011. REC. URL: <a href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-fullscreennavigationui"><code><c- g>FullscreenNavigationUI</c-></code></a> {
  <a href="#dom-fullscreennavigationui-auto"><code><c- s>"auto"</c-></code></a>,
  <a href="#dom-fullscreennavigationui-show"><code><c- s>"show"</c-></code></a>,
  <a href="#dom-fullscreennavigationui-hide"><code><c- s>"hide"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-fullscreenoptions"><code><c- g>FullscreenOptions</c-></code></a> {
  <a data-link-type="idl-name" href="#enumdef-fullscreennavigationui"><c- n>FullscreenNavigationUI</c-></a> <a data-default="&quot;auto&quot;" data-type="FullscreenNavigationUI " href="#dom-fullscreenoptions-navigationui"><code><c- g>navigationUI</c-></code></a> = "auto";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element"><c- g>Element</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen"><c- g>requestFullscreen</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-fullscreenoptions"><c- n>FullscreenOptions</c-></a> <a href="#dom-element-requestfullscreen-options-options"><code><c- g>options</c-></code></a> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-element-onfullscreenchange"><code><c- g>onfullscreenchange</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-element-onfullscreenerror"><code><c- g>onfullscreenerror</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreenenabled"><c- g>fullscreenEnabled</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Unscopable"><c- g>Unscopable</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreen"><c- g>fullscreen</c-></a>; // historical

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-document-exitfullscreen"><c- g>exitFullscreen</c-></a>();

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element?" href="#dom-document-fullscreenelement"><c- g>fullscreenElement</c-></a>;
};

</pre>
<script>
window.dfnsJson ??= {};
window.dfnsJson['descendant-browsing-context'] = {'id': 'descendant-browsing-context', 'url': '#descendant-browsing-context', 'dfnText': 'descendant browsing context', 'items': [{'ids': [{'refID': 'ref-for-descendant-browsing-context'}], 'text': '3. API'}]};
window.dfnsJson['fullscreen-flag'] = {'id': 'fullscreen-flag', 'url': '#fullscreen-flag', 'dfnText': 'fullscreen flag', 'items': [{'ids': [{'refID': 'ref-for-fullscreen-flag'}, {'refID': 'ref-for-fullscreen-flag①'}, {'refID': 'ref-for-fullscreen-flag②'}, {'refID': 'ref-for-fullscreen-flag③'}, {'refID': 'ref-for-fullscreen-flag④'}, {'refID': 'ref-for-fullscreen-flag⑤'}], 'text': '2. Model'}, {'ids': [{'refID': 'ref-for-fullscreen-flag⑥'}, {'refID': 'ref-for-fullscreen-flag⑦'}], 'text': '3. API'}, {'ids': [{'refID': 'ref-for-fullscreen-flag⑧'}], 'text': '5.3. :fullscreen pseudo-class'}]};
window.dfnsJson['iframe-fullscreen-flag'] = {'id': 'iframe-fullscreen-flag', 'url': '#iframe-fullscreen-flag', 'dfnText': 'iframe fullscreen flag', 'items': [{'ids': [{'refID': 'ref-for-iframe-fullscreen-flag'}], 'text': '2. Model'}, {'ids': [{'refID': 'ref-for-iframe-fullscreen-flag①'}, {'refID': 'ref-for-iframe-fullscreen-flag②'}], 'text': '3. API'}]};
window.dfnsJson['fullscreen-element'] = {'id': 'fullscreen-element', 'url': '#fullscreen-element', 'dfnText': 'fullscreen element', 'items': [{'ids': [{'refID': 'ref-for-fullscreen-element'}, {'refID': 'ref-for-fullscreen-element①'}, {'refID': 'ref-for-fullscreen-element②'}, {'refID': 'ref-for-fullscreen-element③'}, {'refID': 'ref-for-fullscreen-element④'}], 'text': '2. Model'}, {'ids': [{'refID': 'ref-for-fullscreen-element⑤'}, {'refID': 'ref-for-fullscreen-element⑥'}, {'refID': 'ref-for-fullscreen-element⑦'}, {'refID': 'ref-for-fullscreen-element⑧'}, {'refID': 'ref-for-fullscreen-element⑨'}, {'refID': 'ref-for-fullscreen-element①⓪'}, {'refID': 'ref-for-fullscreen-element①①'}, {'refID': 'ref-for-fullscreen-element①②'}, {'refID': 'ref-for-fullscreen-element①③'}, {'refID': 'ref-for-fullscreen-element①④'}, {'refID': 'ref-for-fullscreen-element①⑤'}, {'refID': 'ref-for-fullscreen-element①⑥'}, {'refID': 'ref-for-fullscreen-element①⑦'}, {'refID': 'ref-for-fullscreen-element①⑧'}, {'refID': 'ref-for-fullscreen-element①⑨'}, {'refID': 'ref-for-fullscreen-element②⓪'}, {'refID': 'ref-for-fullscreen-element②①'}], 'text': '3. API'}, {'ids': [{'refID': 'ref-for-fullscreen-element②②'}, {'refID': 'ref-for-fullscreen-element②③'}], 'text': '5.3. :fullscreen pseudo-class'}]};
window.dfnsJson['list-of-pending-fullscreen-events'] = {'id': 'list-of-pending-fullscreen-events', 'url': '#list-of-pending-fullscreen-events', 'dfnText': 'list of pending fullscreen events', 'items': [{'ids': [{'refID': 'ref-for-list-of-pending-fullscreen-events'}, {'refID': 'ref-for-list-of-pending-fullscreen-events①'}], 'text': '2. Model'}, {'ids': [{'refID': 'ref-for-list-of-pending-fullscreen-events②'}, {'refID': 'ref-for-list-of-pending-fullscreen-events③'}, {'refID': 'ref-for-list-of-pending-fullscreen-events④'}, {'refID': 'ref-for-list-of-pending-fullscreen-events⑤'}, {'refID': 'ref-for-list-of-pending-fullscreen-events⑥'}], 'text': '3. API'}]};
window.dfnsJson['fullscreen-an-element'] = {'id': 'fullscreen-an-element', 'url': '#fullscreen-an-element', 'dfnText': 'fullscreen an element', 'items': [{'ids': [{'refID': 'ref-for-fullscreen-an-element'}, {'refID': 'ref-for-fullscreen-an-element①'}], 'text': '3. API'}]};
window.dfnsJson['unfullscreen-an-element'] = {'id': 'unfullscreen-an-element', 'url': '#unfullscreen-an-element', 'dfnText': 'unfullscreen an element', 'items': [{'ids': [{'refID': 'ref-for-unfullscreen-an-element'}, {'refID': 'ref-for-unfullscreen-an-element①'}, {'refID': 'ref-for-unfullscreen-an-element②'}], 'text': '2. Model'}, {'ids': [{'refID': 'ref-for-unfullscreen-an-element③'}, {'refID': 'ref-for-unfullscreen-an-element④'}], 'text': '3. API'}]};
window.dfnsJson['unfullscreen-a-document'] = {'id': 'unfullscreen-a-document', 'url': '#unfullscreen-a-document', 'dfnText': 'unfullscreen a document', 'items': [{'ids': [{'refID': 'ref-for-unfullscreen-a-document'}, {'refID': 'ref-for-unfullscreen-a-document①'}, {'refID': 'ref-for-unfullscreen-a-document②'}], 'text': '3. API'}]};
window.dfnsJson['fully-exit-fullscreen'] = {'id': 'fully-exit-fullscreen', 'url': '#fully-exit-fullscreen', 'dfnText': 'fully exit fullscreen', 'items': [{'ids': [{'refID': 'ref-for-fully-exit-fullscreen'}], 'text': '2. Model'}, {'ids': [{'refID': 'ref-for-fully-exit-fullscreen①'}], 'text': '4. UI'}]};
window.dfnsJson['fullscreen-is-supported'] = {'id': 'fullscreen-is-supported', 'url': '#fullscreen-is-supported', 'dfnText': 'Fullscreen is supported', 'items': [{'ids': [{'refID': 'ref-for-fullscreen-is-supported'}, {'refID': 'ref-for-fullscreen-is-supported①'}, {'refID': 'ref-for-fullscreen-is-supported②'}], 'text': '3. API'}]};
window.dfnsJson['run-the-fullscreen-steps'] = {'id': 'run-the-fullscreen-steps', 'url': '#run-the-fullscreen-steps', 'dfnText': 'run the fullscreen steps', 'items': [{'ids': [{'refID': 'ref-for-run-the-fullscreen-steps'}, {'refID': 'ref-for-run-the-fullscreen-steps①'}], 'text': '3. API'}]};
window.dfnsJson['enumdef-fullscreennavigationui'] = {'id': 'enumdef-fullscreennavigationui', 'url': '#enumdef-fullscreennavigationui', 'dfnText': 'FullscreenNavigationUI', 'items': [{'ids': [{'refID': 'ref-for-enumdef-fullscreennavigationui'}], 'text': '3. API'}]};
window.dfnsJson['dictdef-fullscreenoptions'] = {'id': 'dictdef-fullscreenoptions', 'url': '#dictdef-fullscreenoptions', 'dfnText': 'FullscreenOptions', 'items': [{'ids': [{'refID': 'ref-for-dictdef-fullscreenoptions'}], 'text': '3. API'}]};
window.dfnsJson['fullscreen-element-ready-check'] = {'id': 'fullscreen-element-ready-check', 'url': '#fullscreen-element-ready-check', 'dfnText': 'fullscreen element ready check', 'items': [{'ids': [{'refID': 'ref-for-fullscreen-element-ready-check'}, {'refID': 'ref-for-fullscreen-element-ready-check①'}], 'text': '3. API'}]};
window.dfnsJson['dom-element-requestfullscreen'] = {'id': 'dom-element-requestfullscreen', 'url': '#dom-element-requestfullscreen', 'dfnText': 'requestFullscreen(options)', 'items': [{'ids': [{'refID': 'ref-for-dom-element-requestfullscreen'}, {'refID': 'ref-for-dom-element-requestfullscreen①'}], 'text': '3. API'}, {'ids': [{'refID': 'ref-for-dom-element-requestfullscreen②'}, {'refID': 'ref-for-dom-element-requestfullscreen③'}], 'text': '4. UI'}, {'ids': [{'refID': 'ref-for-dom-element-requestfullscreen④'}], 'text': '7. Security and Privacy Considerations'}]};
window.dfnsJson['dom-document-fullscreenenabled'] = {'id': 'dom-document-fullscreenenabled', 'url': '#dom-document-fullscreenenabled', 'dfnText': 'fullscreenEnabled', 'items': [{'ids': [{'refID': 'ref-for-dom-document-fullscreenenabled'}, {'refID': 'ref-for-dom-document-fullscreenenabled①'}], 'text': '3. API'}]};
window.dfnsJson['dom-document-fullscreen'] = {'id': 'dom-document-fullscreen', 'url': '#dom-document-fullscreen', 'dfnText': 'fullscreen', 'items': [{'ids': [{'refID': 'ref-for-dom-document-fullscreen'}], 'text': '3. API'}]};
window.dfnsJson['dom-document-fullscreenelement'] = {'id': 'dom-document-fullscreenelement', 'url': '#dom-document-fullscreenelement', 'dfnText': 'fullscreenElement', 'items': [{'ids': [{'refID': 'ref-for-dom-document-fullscreenelement'}, {'refID': 'ref-for-dom-document-fullscreenelement①'}, {'refID': 'ref-for-dom-document-fullscreenelement②'}, {'refID': 'ref-for-dom-document-fullscreenelement③'}], 'text': '3. API'}, {'ids': [{'refID': 'ref-for-dom-document-fullscreenelement④'}], 'text': '5.3. :fullscreen pseudo-class'}]};
window.dfnsJson['simple-fullscreen-document'] = {'id': 'simple-fullscreen-document', 'url': '#simple-fullscreen-document', 'dfnText': 'simple fullscreen document', 'items': [{'ids': [{'refID': 'ref-for-simple-fullscreen-document'}, {'refID': 'ref-for-simple-fullscreen-document①'}, {'refID': 'ref-for-simple-fullscreen-document②'}], 'text': '3. API'}]};
window.dfnsJson['collect-documents-to-unfullscreen'] = {'id': 'collect-documents-to-unfullscreen', 'url': '#collect-documents-to-unfullscreen', 'dfnText': 'collect documents to unfullscreen', 'items': [{'ids': [{'refID': 'ref-for-collect-documents-to-unfullscreen'}, {'refID': 'ref-for-collect-documents-to-unfullscreen①'}], 'text': '3. API'}]};
window.dfnsJson['exit-fullscreen'] = {'id': 'exit-fullscreen', 'url': '#exit-fullscreen', 'dfnText': 'exit fullscreen', 'items': [{'ids': [{'refID': 'ref-for-exit-fullscreen'}, {'refID': 'ref-for-exit-fullscreen①'}], 'text': '2. Model'}, {'ids': [{'refID': 'ref-for-exit-fullscreen②'}], 'text': '3. API'}]};
window.dfnsJson['dom-document-exitfullscreen'] = {'id': 'dom-document-exitfullscreen', 'url': '#dom-document-exitfullscreen', 'dfnText': 'exitFullscreen()', 'items': [{'ids': [{'refID': 'ref-for-dom-document-exitfullscreen'}, {'refID': 'ref-for-dom-document-exitfullscreen①'}], 'text': '3. API'}, {'ids': [{'refID': 'ref-for-dom-document-exitfullscreen②'}, {'refID': 'ref-for-dom-document-exitfullscreen③'}], 'text': '4. UI'}]};
window.dfnsJson['handler-document-onfullscreenchange'] = {'id': 'handler-document-onfullscreenchange', 'url': '#handler-document-onfullscreenchange', 'dfnText': 'onfullscreenchange', 'items': [{'ids': [{'refID': 'ref-for-handler-document-onfullscreenchange'}], 'text': '3. API'}]};
window.dfnsJson['handler-document-onfullscreenerror'] = {'id': 'handler-document-onfullscreenerror', 'url': '#handler-document-onfullscreenerror', 'dfnText': 'onfullscreenerror', 'items': [{'ids': [{'refID': 'ref-for-handler-document-onfullscreenerror'}], 'text': '3. API'}]};
window.dfnsJson['top-layer'] = {'id': 'top-layer', 'url': '#top-layer', 'dfnText': 'top layer', 'items': [{'ids': [{'refID': 'ref-for-top-layer'}, {'refID': 'ref-for-top-layer①'}, {'refID': 'ref-for-top-layer②'}, {'refID': 'ref-for-top-layer③'}, {'refID': 'ref-for-top-layer④'}, {'refID': 'ref-for-top-layer⑤'}, {'refID': 'ref-for-top-layer⑥'}, {'refID': 'ref-for-top-layer⑦'}], 'text': '2. Model'}, {'ids': [{'refID': 'ref-for-top-layer⑧'}, {'refID': 'ref-for-top-layer⑨'}, {'refID': 'ref-for-top-layer①⓪'}], 'text': '3. API'}, {'ids': [{'refID': 'ref-for-top-layer①①'}], 'text': '5. Rendering'}, {'ids': [{'refID': 'ref-for-top-layer①②'}, {'refID': 'ref-for-top-layer①③'}, {'refID': 'ref-for-top-layer①④'}, {'refID': 'ref-for-top-layer①⑤'}], 'text': '5.1. New stacking layer'}, {'ids': [{'refID': 'ref-for-top-layer①⑥'}, {'refID': 'ref-for-top-layer①⑦'}, {'refID': 'ref-for-top-layer①⑧'}], 'text': '5.2. ::backdrop pseudo-element'}]};
window.dfnsJson['top-layer-add'] = {'id': 'top-layer-add', 'url': '#top-layer-add', 'dfnText': 'add', 'items': [{'ids': [{'refID': 'ref-for-top-layer-add'}], 'text': '2. Model'}]};
window.dfnsJson['css-pe-backdrop'] = {'id': 'css-pe-backdrop', 'url': '#css-pe-backdrop', 'dfnText': '::backdrop', 'items': [{'ids': [{'refID': 'ref-for-css-pe-backdrop'}], 'text': '5. Rendering'}, {'ids': [{'refID': 'ref-for-css-pe-backdrop①'}, {'refID': 'ref-for-css-pe-backdrop②'}], 'text': '5.1. New stacking layer'}, {'ids': [{'refID': 'ref-for-css-pe-backdrop③'}], 'text': '5.2. ::backdrop pseudo-element'}]};
window.dfnsJson['fullscreen-feature'] = {'id': 'fullscreen-feature', 'url': '#fullscreen-feature', 'dfnText': 'fullscreen', 'items': [{'ids': [{'refID': 'ref-for-fullscreen-feature'}, {'refID': 'ref-for-fullscreen-feature①'}], 'text': '3. API'}]};
</script>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-exitfullscreen①">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen" title="The Document method exitFullscreen() requests that the element on this document which is currently being presented in fullscreen mode be taken out of fullscreen mode, restoring the previous state of the screen. This usually reverses the effects of a previous call to Element.requestFullscreen().">Document/exitFullscreen</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="handler-document-onfullscreenchange">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenchange_event" title="The fullscreenchange event is fired immediately after the browser switches into or out of fullscreen mode.">Document/fullscreenchange_event</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/fullscreenchange_event" title="The fullscreenchange event is fired immediately after an Element switches into or out of fullscreen mode.">Element/fullscreenchange_event</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenelement①">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement" title="The Document.fullscreenElement read-only property returns the Element that is currently being presented in fullscreen mode in this document, or null if fullscreen mode is not currently in use.">Document/fullscreenElement</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenenabled①">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenEnabled" title="The read-only fullscreenEnabled property on the Document interface indicates whether or not fullscreen mode is available.">Document/fullscreenEnabled</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="handler-document-onfullscreenerror">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenerror_event" title="The fullscreenerror event is fired when the browser cannot switch to fullscreen mode.">Document/fullscreenerror_event</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/fullscreenerror_event" title="The fullscreenerror event is fired when the browser cannot switch to fullscreen mode.">Element/fullscreenerror_event</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-element-requestfullscreen①">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen" title="The Element.requestFullscreen() method issues an asynchronous request to make the element be displayed in fullscreen mode.">Element/requestFullscreen</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>58+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android yes"><span>Firefox for Android</span><span>64+</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="api">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element" title="Element is the most general base class from which all element objects (i.e. objects that represent elements) in a Document inherit. It only has methods and properties common to all kinds of elements. More specific classes inherit from Element.">Element</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span>
     <hr>
     <span class="opera yes"><span>Opera</span><span>8+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>IE</span><span>4+</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Mobile</span><span>10.1+</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenelement②">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot/fullscreenElement" title="The fullscreenElement read-only property of the ShadowRoot interface returns the element within the shadow tree that is currently displayed in full screen.">ShadowRoot/fullscreenElement</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="::backdrop-pseudo-element">
   <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::backdrop" title="The ::backdrop CSS pseudo-element is a box the size of the viewport which is rendered immediately beneath any element being presented in fullscreen mode. This includes both elements which have been placed in fullscreen mode using the Fullscreen API and <dialog> elements.">::backdrop</a></p>
    <p class="all-engines-text">In all current engines.</p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>47+</span></span><span class="safari yes"><span>Safari</span><span>15.4+</span></span><span class="chrome yes"><span>Chrome</span><span>37+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for=":fullscreen-pseudo-class">
   <summary><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:fullscreen" title="The :fullscreen CSS pseudo-class matches every element which is currently in fullscreen mode. If multiple elements have been put into fullscreen mode, this selects them all.">:fullscreen</a></p>
    <div class="support">
     <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>71+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
  <details class="mdn-anno unpositioned" data-anno-for="permissions-policy-integration">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/fullscreen" title="The HTTP Feature-Policy header fullscreen directive controls whether the current document is allowed to use Element.requestFullscreen(). When this policy is enabled, the returned Promise rejects with a TypeError.">Headers/Feature-Policy/fullscreen</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>62+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* position-annos */
"use strict";
{

function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        const rect = dfn.getBoundingClientRect();
        const top = window.scrollY + rect.top
        panel.style.top = top + "px";
        panel.top = top;
        panel.height = rect.height;
        panel.classList.remove("unpositioned");
        const panelRect = panel.getBoundingClientRect()
        if(main) {
            panel.classList.toggle("overlapping-main", panelRect.left < mainRect.right)
        }
    }
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        console.log(panel.top, vSoFar);
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}</script>
<script>/* script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    function genDfnPanel([key, value]) {
        const {id, url, dfnText, items, external}  = value;
        const itemsHtml = items.map((item) => {
            const idsHtml = item.ids.map((id, index) => {
                const href = `#${external ? id.linkID : id.refID}`;
                const anchorText = (index == 0) ? item.text : `(${index + 1})`;
                return /* html */`
                    <li><a href="${href}">${anchorText}</a></li>`;
            });
            return idsHtml.join('');
        });

        return /* html */`
            <aside
                class="dfn-panel"
                id="infopanel-for-${id}"
                data-for="${id}"
                aria-labelledby="infopaneltitle-for-${id}">
                <span id="infopaneltitle-for-${id}" style="display:none">
                    Info about the '${dfnText}'
                    ${external ? 'external': ''} reference.
                </span>
                <a href=${url}>${url}</a>
                <b>Referenced in:</b>
                <ul>${itemsHtml.join('')}</ul>
            </aside>`;
    }

    function genAllDfnPanels() {
        const html = Object.entries(dfnsJson).map(genDfnPanel).join('\n');
        const div = document.createElement('div');
        div.innerHTML = html;
        document.body.appendChild(div);
    }

    genAllDfnPanels();

    function queryAll(sel) {
        return [].slice.call(document.querySelectorAll(sel));
    }

    // Add popup behavior to all dfns to show the corresponding dfn-panel.
    var dfns = document.querySelectorAll('.dfn-paneled');
    for (let dfn of dfns) { insertDfnPopupAction(dfn); }

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });

    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn) {
        // Find dfn panel
        const dfnPanel = document.querySelector(`.dfn-panel[data-for='${dfn.id}']`);
        if (dfnPanel) {
            const panelWrapper = document.createElement('span');
            panelWrapper.appendChild(dfnPanel);
            panelWrapper.style.position = "relative";
            panelWrapper.style.height = "0px";
            dfn.insertAdjacentElement("afterend", panelWrapper);
            dfn.setAttribute('role', 'button');
            dfn.setAttribute('aria-expanded', 'false')
            dfn.tabIndex = 0;
            dfn.classList.add('has-dfn-panel');
            dfn.addEventListener('click', (event) => {
                showDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
            });
            dfn.addEventListener('keypress', (event) => {
                const kc = event.keyCode;
                // 32->Space, 13->Enter
                if(kc == 32 || kc == 13) {
                    toggleDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                    event.preventDefault();
                }
            });

            dfnPanel.addEventListener('click', (event) => {
                if (event.target.nodeName != 'A') {
                    pinDfnPanel(dfnPanel);
                }
                event.stopPropagation();
            });

            dfnPanel.addEventListener('keydown', (event) => {
                if(event.keyCode == 27) { // Escape key
                    hideDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                    event.preventDefault();
                }
            })

        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + dfn.id + "']");
        }
    }
}
</script>
<script>/* script-var-click-highlighting */

    "use strict";
    {
        document.addEventListener("click", e=>{
            if(e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
</script>